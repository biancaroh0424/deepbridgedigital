/*! For license information please see main.642dd972.js.LICENSE.txt */
!function(){var e={463:function(e,t,n){"use strict";var i=n(791),r=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,L);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,L);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,L);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),M=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var B,N=Object.assign;function z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var F=!1;function j(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){K(e,t);var n=G(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),i=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ve(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Le(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,Se=null;function ke(e){if(e=yr(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xr(t),we(e.stateNode,e.type,t))}}function Ae(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Me(){if(_e){var e=_e,t=Se;if(Se=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Te=!1;function Pe(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==_e||null!==Se)&&(Ee(),Me())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Oe=!1}function Re(e,t,n,i,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Be=!1,Ne=null,ze=!1,Fe=null,je={onError:function(e){Be=!0,Ne=e}};function Ue(e,t,n,i,r,a,o,s,l){Be=!1,Ne=null,Re.apply(je,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ge(r),e;if(o===i)return Ge(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ke=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=dt(s):0!==(a&=o)&&(i=dt(a))}else 0!==(o=n&~r)?i=dt(o):0!==a&&(i=dt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function Lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,_t,St,kt,At=!1,Mt=[],Ct=null,Et=null,Tt=null,Pt=new Map,Dt=new Map,Ot=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Bt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nt(e){var t=Lr(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function jt(){At=!1,null!==Ct&&zt(Ct)&&(Ct=null),null!==Et&&zt(Et)&&(Et=null),null!==Tt&&zt(Tt)&&(Tt=null),Pt.forEach(Ft),Dt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function Zt(e){function t(t){return Ut(t,e)}if(0<Mt.length){Ut(Mt[0],e);for(var n=1;n<Mt.length;n++){var i=Mt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Et&&Ut(Et,e),null!==Tt&&Ut(Tt,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Nt(n),null===n.blockedOn&&Ot.shift()}var Vt=b.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,i){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=1,qt(e,t,n,i)}finally{yt=r,Vt.transition=a}}function Wt(e,t,n,i){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=4,qt(e,t,n,i)}finally{yt=r,Vt.transition=a}}function qt(e,t,n,i){if(Gt){var r=Yt(e,t,n,i);if(null===r)Gi(e,t,i,Xt,n),Rt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Bt(Ct,e,t,n,i,r),!0;case"dragenter":return Et=Bt(Et,e,t,n,i,r),!0;case"mouseover":return Tt=Bt(Tt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Pt.set(a,Bt(Pt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Dt.set(a,Bt(Dt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Rt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==r;){var a=yr(r);if(null!==a&&xt(a),null===(a=Yt(e,t,n,i))&&Gi(e,t,i,Xt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Gi(e,t,i,null,n)}}var Xt=null;function Yt(e,t,n,i){if(Xt=null,null!==(e=Lr(e=xe(i))))if(null===(t=Ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,i=n.length,r="value"in Kt?Kt.value:Kt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=N({},un,{view:0,detail:0}),hn=an(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),vn=an(N({},fn,{dataTransfer:0})),mn=an(N({},dn,{relatedTarget:0})),gn=an(N({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),Ln=N({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(Ln),bn=an(N({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Sn}var An=N({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=an(An),Cn=an(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=an(N({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=N({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),On=[9,13,27,32],In=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Bn=c&&"TextEvent"in window&&!Rn,Nn=c&&(!In||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,i){Ae(i),0<(t=Wi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Xn(e){zi(e,0)}function Yn(e){if(q(br(e)))return e}function Qn(e,t){if("change"===e)return t}var Kn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Jn=$n}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),qn=Wn=null)}function ni(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Hn(t,qn,e,xe(e)),Pe(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),qn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ai(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ci(n,a);var o=ci(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vi=c&&"documentMode"in document&&11>=document.documentMode,mi=null,gi=null,Li=null,yi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==mi||mi!==X(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Li&&li(Li,i)||(Li=i,0<(i=Wi(gi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},_i={},Si={};function ki(e){if(_i[e])return _i[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return _i[e]=n[t];return e}c&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ai=ki("animationend"),Mi=ki("animationiteration"),Ci=ki("animationstart"),Ei=ki("transitionend"),Ti=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Ti.set(e,t),l(t,[e])}for(var Oi=0;Oi<Pi.length;Oi++){var Ii=Pi[Oi];Di(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Di(Ai,"onAnimationEnd"),Di(Mi,"onAnimationIteration"),Di(Ci,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Ei,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Ni(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,u){if(Ue.apply(this,arguments),Be){if(!Be)throw Error(a(198));var c=Ne;Be=!1,Ne=null,ze||(ze=!0,Fe=c)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Ni(r,s,u),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Ni(r,s,u),a=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fi(e,t){var n=t[vr];void 0===n&&(n=t[vr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function ji(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Ui]){e[Ui]=!0,o.forEach((function(t){"selectionchange"!==t&&(Bi.has(t)||ji(t,!1,e),ji(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,ji("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Qt(t)){case 1:var r=Ht;break;case 4:r=Wt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Gi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=Lr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}Pe((function(){var i=a,r=xe(n),o=[];e:{var s=Ti.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ai:case Mi:case Ci:l=gn;break;case Ei:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=i;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==h&&(null!=(v=De(p,h))&&c.push(Hi(p,v,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,r),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!Lr(u)&&!u[pr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?Lr(u):null)&&(u!==(d=Ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:br(l),f=null==u?s:br(u),(s=new c(v,p+"leave",l,n,r)).target=d,s.relatedTarget=f,v=null,Lr(r)===i&&((c=new c(h,p+"enter",u,n,r)).target=f,c.relatedTarget=d,v=c),d=v,l&&u)e:{for(h=u,p=0,f=c=l;f;f=qi(f))p++;for(f=0,v=h;v;v=qi(v))f++;for(;0<p-f;)c=qi(c),p--;for(;0<f-p;)h=qi(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=qi(c),h=qi(h)}c=null}else c=null;null!==l&&Xi(o,s,l,c,!1),null!==u&&null!==d&&Xi(o,d,u,c,!0)}if("select"===(l=(s=i?br(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Qn;else if(Gn(s))if(Kn)m=oi;else{m=ri;var g=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ai);switch(m&&(m=m(e,i))?Hn(o,m,n,r):(g&&g(e,s,i),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=i?br(i):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mi=g,gi=i,Li=null);break;case"focusout":Li=gi=mi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(o,n,r);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":bi(o,n,r)}var L;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Zn?jn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Nn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Zn&&(L=en()):(Jt="value"in(Kt=r)?Kt.value:Kt.textContent,Zn=!0)),0<(g=Wi(i,y)).length&&(y=new bn(y,e,null,n,r),o.push({event:y,listeners:g}),L?y.data=L:null!==(L=Un(n))&&(y.data=L))),(L=Bn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!In&&jn(e,t)?(e=en(),$t=Jt=Kt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=L))}zi(o,t)}))}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=De(e,n))&&i.unshift(Hi(e,a,r)),null!=(a=De(e,t))&&i.push(Hi(e,a,r))),e=e.return}return i}function qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==u&&(s=u,r?null!=(l=De(n,a))&&o.unshift(Hi(n,l,s)):r||null!=(l=De(n,a))&&o.push(Hi(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Ki(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=Ki(t),Ki(e)!==t&&n)throw Error(a(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Zt(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,vr="__reactEvents$"+dr,mr="__reactListeners$"+dr,gr="__reactHandles$"+dr;function Lr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cr(e);null!==e;){if(n=e[hr])return n;e=cr(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xr(e){return e[fr]||null}var wr=[],_r=-1;function Sr(e){return{current:e}}function kr(e){0>_r||(e.current=wr[_r],wr[_r]=null,_r--)}function Ar(e,t){_r++,wr[_r]=e.current,e.current=t}var Mr={},Cr=Sr(Mr),Er=Sr(!1),Tr=Mr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Mr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Dr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){kr(Er),kr(Cr)}function Ir(e,t,n){if(Cr.current!==Mr)throw Error(a(168));Ar(Cr,t),Ar(Er,n)}function Rr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,V(e)||"Unknown",r));return N({},n,i)}function Br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,Tr=Cr.current,Ar(Cr,e),Ar(Er,Er.current),!0}function Nr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Rr(e,t,Tr),i.__reactInternalMemoizedMergedChildContext=e,kr(Er),kr(Cr),Ar(Cr,e)):kr(Er),Ar(Er,n)}var zr=null,Fr=!1,jr=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Zr(){if(!jr&&null!==zr){jr=!0;var e=0,t=yt;try{var n=zr;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zr=null,Fr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),qe($e,Zr),r}finally{yt=t,jr=!1}}return null}var Vr=[],Gr=0,Hr=null,Wr=0,qr=[],Xr=0,Yr=null,Qr=1,Kr="";function Jr(e,t){Vr[Gr++]=Wr,Vr[Gr++]=Hr,Hr=e,Wr=t}function $r(e,t,n){qr[Xr++]=Qr,qr[Xr++]=Kr,qr[Xr++]=Yr,Yr=e;var i=Qr;e=Kr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var a=32-ot(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qr=1<<32-ot(t)+r|n<<r|i,Kr=a+e}else Qr=1<<a|n<<r|i,Kr=e}function ea(e){null!==e.return&&(Jr(e,1),$r(e,1,0))}function ta(e){for(;e===Hr;)Hr=Vr[--Gr],Vr[Gr]=null,Wr=Vr[--Gr],Vr[Gr]=null;for(;e===Yr;)Yr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null,Qr=qr[--Xr],qr[Xr]=null}var na=null,ia=null,ra=!1,aa=null;function oa(e,t){var n=Du(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Du(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ra){var t=ia;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ur(n.nextSibling);var i=na;t&&sa(e,t)?oa(i,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ra)return ca(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ur(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?ur(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ia;e;)e=ur(e.nextSibling)}function fa(){ia=na=null,ra=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Sr(null),La=null,ya=null,ba=null;function xa(){ba=ya=La=null}function wa(e){var t=ga.current;kr(ga),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){La=e,ba=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===La)throw Error(a(308));ya=e,La.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Aa=null;function Ma(e){null===Aa?Aa=[e]:Aa.push(e)}function Ca(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ma(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ea(e,i)}function Ea(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ta=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&El)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ea(e,n)}return null===(r=i.interleaved)?(t.next=t,Ma(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ea(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}function Ba(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Na(e,t,n,i){var r=e.updateQueue;Ta=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(o=0,c=u=l=null,s=a;;){var h=s.lane,f=s.eventTime;if((i&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(f,d,h):p)||void 0===h)break e;d=N({},d,h);break e;case 2:Ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(h=s).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===c&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Nl|=o,e.lanes=o,e.memoizedState=d}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Fa=(new i.Component).refs;function ja(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=Oa(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,r))&&(iu(t,e,r,i),Ra(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),a=Oa(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,r))&&(iu(t,e,r,i),Ra(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),i=nu(e),r=Oa(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ia(e,r,i))&&(iu(t,e,i,n),Ra(t,e,i))}};function Za(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function Va(e,t,n){var i=!1,r=Mr,a=t.contextType;return"object"===typeof a&&null!==a?a=ka(a):(r=Dr(t)?Tr:Cr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Pr(e,r):Mr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Fa,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=ka(a):(a=Dr(t)?Tr:Cr.current,r.context=Pr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ua.enqueueReplaceState(r,r.state,null),Na(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Fa&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){var a=n.type;return a===_?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Xa(a)===t.type)?((i=r(t,n.props)).ref=Wa(e,t,n),i.return=e,i):((i=Ru(n.type,n.key,n.props,null,e.mode,i)).ref=Wa(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Bu(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Bu(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?u(e,t,n,i):null;case w:return n.key===r?c(e,t,n,i):null;case D:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||R(n))return null!==r?null:d(e,t,n,i,null);qa(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case D:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||R(i))return d(t,e=e.get(n)||null,i,r,null);qa(t,i)}return null}function v(r,a,s,l){for(var u=null,c=null,d=a,v=a=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=f(r,d,s[v],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(r,d),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,d=m}if(v===s.length)return n(r,d),ra&&Jr(r,v),u;if(null===d){for(;v<s.length;v++)null!==(d=h(r,s[v],l))&&(a=o(d,a,v),null===c?u=d:c.sibling=d,c=d);return ra&&Jr(r,v),u}for(d=i(r,d);v<s.length;v++)null!==(m=p(d,r,v,s[v],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(r,e)})),ra&&Jr(r,v),u}function m(r,s,l,u){var c=R(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,v=s,m=s=0,g=null,L=l.next();null!==v&&!L.done;m++,L=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var y=f(r,v,L.value,u);if(null===y){null===v&&(v=g);break}e&&v&&null===y.alternate&&t(r,v),s=o(y,s,m),null===d?c=y:d.sibling=y,d=y,v=g}if(L.done)return n(r,v),ra&&Jr(r,m),c;if(null===v){for(;!L.done;m++,L=l.next())null!==(L=h(r,L.value,u))&&(s=o(L,s,m),null===d?c=L:d.sibling=L,d=L);return ra&&Jr(r,m),c}for(v=i(r,v);!L.done;m++,L=l.next())null!==(L=p(v,r,m,L.value,u))&&(e&&null!==L.alternate&&v.delete(null===L.key?m:L.key),s=o(L,s,m),null===d?c=L:d.sibling=L,d=L);return e&&v.forEach((function(e){return t(r,e)})),ra&&Jr(r,m),c}return function e(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===_){if(7===c.tag){n(i,c.sibling),(a=r(c,o.props.children)).return=i,i=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Xa(u)===c.type){n(i,c.sibling),(a=r(c,o.props)).ref=Wa(i,c,o),a.return=i,i=a;break e}n(i,c);break}t(i,c),c=c.sibling}o.type===_?((a=Bu(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Ru(o.type,o.key,o.props,null,i.mode,l)).ref=Wa(i,a,o),l.return=i,i=l)}return s(i);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Fu(o,i.mode,l)).return=i,i=a}return s(i);case D:return e(i,a,(c=o._init)(o._payload),l)}if(te(o))return v(i,a,o,l);if(R(o))return m(i,a,o,l);qa(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=zu(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var Qa=Ya(!0),Ka=Ya(!1),Ja={},$a=Sr(Ja),eo=Sr(Ja),to=Sr(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function io(e,t){switch(Ar(to,t),Ar(eo,e),Ar($a,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr($a),Ar($a,t)}function ro(){kr($a),kr(eo),kr(to)}function ao(e){no(to.current);var t=no($a.current),n=le(t,e.type);t!==n&&(Ar(eo,e),Ar($a,n))}function oo(e){eo.current===e&&(kr($a),kr(eo))}var so=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,Lo=!1,yo=!1,bo=0,xo=0;function wo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(i,r),yo){o=0;do{if(yo=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=us,e=n(i,r)}while(yo)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,Lo=!1,t)throw Error(a(300));return e}function ko(){var e=0!==bo;return bo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Mo(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=Mo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((po&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=i):u=u.next=h,vo.lanes|=d,Nl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=i:u.next=l,si(i,t.memoizedState)||(bs=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,vo.lanes|=o,Nl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=Mo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);si(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Po(){}function Do(e,t){var n=vo,i=Mo(),r=t(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,bs=!0),i=i.queue,Go(Ro.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Fo(9,Io.bind(null,n,i,r,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&po)||Oo(n,t,r)}return r}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,i){t.value=n,t.getSnapshot=i,Bo(t)&&No(e)}function Ro(e,t,n){return n((function(){Bo(t)&&No(e)}))}function Bo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function No(e){var t=Ea(e,1);null!==t&&iu(t,e,1,-1)}function zo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Fo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function jo(){return Mo().memoizedState}function Uo(e,t,n,i){var r=Ao();vo.flags|=e,r.memoizedState=Fo(1|t,n,void 0,void 0===i?null:i)}function Zo(e,t,n,i){var r=Mo();i=void 0===i?null:i;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==i&&_o(i,o.deps))return void(r.memoizedState=Fo(t,n,a,i))}vo.flags|=e,r.memoizedState=Fo(1|t,n,a,i)}function Vo(e,t){return Uo(8390656,8,e,t)}function Go(e,t){return Zo(2048,8,e,t)}function Ho(e,t){return Zo(4,2,e,t)}function Wo(e,t){return Zo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4,4,qo.bind(null,t,e),n)}function Yo(){}function Qo(e,t){var n=Mo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&_o(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=Mo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&_o(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(si(n,t)||(n=vt(),vo.lanes|=n,Nl|=n,e.baseState=!0),t)}function $o(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=fo.transition;fo.transition={};try{e(!1),t()}finally{yt=n,fo.transition=i}}function es(){return Mo().memoizedState}function ts(e,t,n){var i=nu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))rs(t,n);else if(null!==(n=Ca(e,t,n,i))){iu(n,e,i,tu()),as(n,t,i)}}function ns(e,t,n){var i=nu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))rs(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ma(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(u){}null!==(n=Ca(e,t,r,i))&&(iu(n,e,i,r=tu()),as(n,t,i))}}function is(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function rs(e,t){yo=Lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}var os={readContext:ka,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:ka,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ao();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ts.bind(null,vo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:zo,useDebugValue:Yo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=$o.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=vo,r=Ao();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&po)||Oo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Vo(Ro.bind(null,i,o,e),[e]),i.flags|=2048,Fo(9,Io.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Ao(),t=Tl.identifierPrefix;if(ra){var n=Kr;t=":"+t+"R"+(n=(Qr&~(1<<32-ot(Qr)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:ka,useCallback:Qo,useContext:ka,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Ko,useReducer:Eo,useRef:jo,useState:function(){return Eo(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Mo(),mo.memoizedState,e)},useTransition:function(){return[Eo(Co)[0],Mo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},us={readContext:ka,useCallback:Qo,useContext:ka,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Ko,useReducer:To,useRef:jo,useState:function(){return To(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Mo();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[To(Co)[0],Mo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",i=t;do{n+=U(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=i),hs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fs;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ls(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ia(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ys=b.ReactCurrentOwner,bs=!1;function xs(e,t,n,i){t.child=null===e?Ka(t,null,n,i):Qa(t,e.child,n,i)}function ws(e,t,n,i,r){n=n.render;var a=t.ref;return Sa(t,r),i=So(e,t,n,i,a,r),n=ko(),null===e||bs?(ra&&n&&ea(t),t.flags|=1,xs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hs(e,t,r))}function _s(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Ou(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Hs(e,t,r)}return t.flags|=1,(e=Iu(a,i)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(li(a,i)&&e.ref===t.ref){if(bs=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Hs(e,t,r);0!==(131072&e.flags)&&(bs=!0)}}return Ms(e,t,n,i,r)}function ks(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Il,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Il,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Ar(Il,Ol),Ol|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,Ar(Il,Ol),Ol|=i;return xs(e,t,r,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ms(e,t,n,i,r){var a=Dr(n)?Tr:Cr.current;return a=Pr(t,a),Sa(t,r),n=So(e,t,n,i,a,r),i=ko(),null===e||bs?(ra&&i&&ea(t),t.flags|=1,xs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hs(e,t,r))}function Cs(e,t,n,i,r){if(Dr(n)){var a=!0;Br(t)}else a=!1;if(Sa(t,r),null===t.stateNode)Gs(e,t),Va(t,n,i),Ha(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=ka(u):u=Pr(t,u=Dr(n)?Tr:Cr.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Ga(t,o,i,u),Ta=!1;var h=t.memoizedState;o.state=h,Na(t,i,o,r),l=t.memoizedState,s!==i||h!==l||Er.current||Ta?("function"===typeof c&&(ja(t,n,c,i),l=t.memoizedState),(s=Ta||Za(t,n,s,i,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ka(l):l=Pr(t,l=Dr(n)?Tr:Cr.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Ga(t,o,i,l),Ta=!1,h=t.memoizedState,o.state=h,Na(t,i,o,r);var p=t.memoizedState;s!==d||h!==p||Er.current||Ta?("function"===typeof f&&(ja(t,n,f,i),p=t.memoizedState),(u=Ta||Za(t,n,u,i,h,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Es(e,t,n,i,a,r)}function Es(e,t,n,i,r,a){As(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Nr(t,n,!1),Hs(e,t,a);i=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Qa(t,e.child,null,a),t.child=Qa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=i.state,r&&Nr(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Ir(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ir(0,t.context,!1),io(e,t.containerInfo)}function Ps(e,t,n,i,r){return fa(),pa(r),t.flags|=256,xs(e,t,n,i),t.child}var Ds,Os,Is,Rs,Bs={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var i,r=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ar(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nu(l,r,0,null),e=Bu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Bs,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,i=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Nu({mode:"visible",children:i.children},r,0,null),(o=Bu(o,r,s,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Qa(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Bs,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,js(e,t,s,i=ds(o=Error(a(419)),i,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(i=Tl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ea(e,r),iu(i,e,r,-1))}return mu(),js(e,t,s,i=ds(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ia=ur(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(qr[Xr++]=Qr,qr[Xr++]=Kr,qr[Xr++]=Yr,Qr=e.id,Kr=e.overflow,Yr=t),t=Fs(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(s){s=r.fallback,l=t.mode,i=(o=e.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=u,t.deletions=null):(r=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=Iu(i,s):(s=Bu(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Bs,r}return e=(s=e.child).sibling,r=Iu(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fs(e,t){return(t=Nu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,i){return null!==i&&pa(i),Qa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),_a(e.return,t,n)}function Zs(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Vs(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(xs(e,t,i.children,n),0!==(2&(i=so.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ar(so,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Zs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Zs(t,!0,n,null,a);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xs(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Dr(t.type)&&Or(),qs(t),null;case 3:return i=t.stateNode,ro(),kr(Er),kr(Cr),co(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Os(e,t),qs(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=no($a.current),da(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[hr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)Fi(Ri[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":Q(i,o),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Fi("invalid",i);break;case"textarea":re(i,o),Fi("invalid",i)}for(var l in Le(n,o),r=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,u,e),r=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,u,e),r=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":W(i),$(i,o,!0);break;case"textarea":W(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[fr]=i,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)Fi(Ri[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":Q(e,i),r=Y(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=N({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(o in Le(n,r),u=r)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fi("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":W(e),$(e,i,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+G(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),da(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(o=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return qs(t),null;case 13:if(kr(so),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,o=!1;else if(o=da(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hr]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Rl&&(Rl=3):mu())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ro(),Os(e,t),null===e&&Zi(t.stateNode.containerInfo),qs(t),null;case 10:return wa(t.type._context),qs(t),null;case 19:if(kr(so),null===(o=t.memoizedState))return qs(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ws(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ws(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Vl&&(t.flags|=128,i=!0,Ws(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ra)return qs(t),null}else 2*Ke()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=so.current,Ar(so,i?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return hu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Dr(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),kr(Er),kr(Cr),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(kr(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(so),null;case 4:return ro(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Is=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=N({},r,{value:void 0}),i=N({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(c in Le(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fi("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Rs=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qs=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){ku(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){ku(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&tl(t,n,a)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[fr],delete t[vr],delete t[mr],delete t[gr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ks||el(n,t);case 6:var i=dl,r=hl;dl=null,fl(e,t,n),hl=r,null!==(dl=i)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Zt(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),r=r.next}while(r!==i)}fl(e,t,n);break;case 1:if(!Ks&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){ku(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ks=(i=Ks)||null!==n.memoizedState,fl(e,t,n),Ks=i):fl(e,t,n);break;default:fl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var i=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(o,s,r),dl=null,hl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(c){ku(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),Ll(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){ku(e,e.return,m)}try{il(5,e,e.return)}catch(m){ku(e,e.return,m)}}break;case 1:ml(t,e),Ll(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),Ll(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){ku(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&K(r,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,c)}switch(l){case"input":J(r,o);break;case"textarea":ae(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){ku(e,e.return,m)}}break;case 6:if(ml(t,e),Ll(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){ku(e,e.return,m)}}break;case 3:if(ml(t,e),Ll(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(m){ku(e,e.return,m)}break;case 4:default:ml(t,e),Ll(e);break;case 13:ml(t,e),Ll(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Zl=Ke())),4&i&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(c=Ks)||d,ml(t,e),Ks=c):ml(t,e),Ll(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:el(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){i=f,n=f.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){ku(i,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,$s=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ve("display",s))}catch(m){ku(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){ku(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),Ll(e),4&i&&vl(e);case 21:}}function Ll(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){ku(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$s=e,bl(e,t,n)}function bl(e,t,n){for(var i=0!==(1&e.mode);null!==$s;){var r=$s,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Qs;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Qs;var u=Ks;if(Qs=o,(Ks=l)&&!u)for($s=r;null!==$s;)l=(o=$s).child,22===o.tag&&null!==o.memoizedState?_l(r):null!==l?(l.return=o,$s=l):_l(r);for(;null!==a;)$s=a,bl(a,t,n),a=a.sibling;$s=r,Qs=s,Ks=u}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,$s=a):xl(e)}}function xl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ks)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&za(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Zt(h)}}}break;default:throw Error(a(163))}Ks||512&t.flags&&al(t)}catch(f){ku(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wl(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function _l(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){ku(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){ku(t,r,l)}}var a=t.return;try{al(t)}catch(l){ku(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){ku(t,o,l)}}}catch(l){ku(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Sl,kl=Math.ceil,Al=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Tl=null,Pl=null,Dl=0,Ol=0,Il=Sr(0),Rl=0,Bl=null,Nl=0,zl=0,Fl=0,jl=null,Ul=null,Zl=0,Vl=1/0,Gl=null,Hl=!1,Wl=null,ql=null,Xl=!1,Yl=null,Ql=0,Kl=0,Jl=null,$l=-1,eu=0;function tu(){return 0!==(6&El)?Ke():-1!==$l?$l:$l=Ke()}function nu(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Dl?Dl&-Dl:null!==va.transition?(0===eu&&(eu=vt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function iu(e,t,n,i){if(50<Kl)throw Kl=0,Jl=null,Error(a(185));gt(e,n,i),0!==(2&El)&&e===Tl||(e===Tl&&(0===(2&El)&&(zl|=n),4===Rl&&lu(e,Dl)),ru(e,i),1===n&&0===El&&0===(1&t.mode)&&(Vl=Ke()+500,Fr&&Zr()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=ht(e,e===Tl?Dl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fr=!0,Ur(e)}(uu.bind(null,e)):Ur(uu.bind(null,e)),or((function(){0===(6&El)&&Zr()})),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if($l=-1,eu=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var i=ht(e,e===Tl?Dl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gu(e,i);else{t=i;var r=El;El|=2;var o=vu();for(Tl===e&&Dl===t||(Gl=null,Vl=Ke()+500,fu(e,t));;)try{yu();break}catch(l){pu(e,l)}xa(),Al.current=o,El=r,null!==Pl?t=0:(Tl=null,Dl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=ou(e,r))),1===t)throw n=Bl,fu(e,0),lu(e,i),ru(e,Ke()),n;if(6===t)lu(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gu(e,i))&&(0!==(o=pt(e))&&(i=o,t=ou(e,o))),1===t))throw n=Bl,fu(e,0),lu(e,i),ru(e,Ke()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Ul,Gl);break;case 3:if(lu(e,i),(130023424&i)===i&&10<(t=Zl+500-Ke())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wu.bind(null,e,Ul,Gl),t);break}wu(e,Ul,Gl);break;case 4:if(lu(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-ot(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Ke()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=ir(wu.bind(null,e,Ul,Gl),i);break}wu(e,Ul,Gl);break;default:throw Error(a(329))}}}return ru(e,Ke()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Ul,Ul=n,null!==t&&su(t)),e}function su(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lu(e,t){for(t&=~Fl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function uu(e){if(0!==(6&El))throw Error(a(327));_u();var t=ht(e,0);if(0===(1&t))return ru(e,Ke()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=ou(e,i))}if(1===n)throw n=Bl,fu(e,0),lu(e,t),ru(e,Ke()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Ul,Gl),ru(e,Ke()),null}function cu(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Ke()+500,Fr&&Zr())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&_u();var t=El;El|=1;var n=Cl.transition,i=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=i,Cl.transition=n,0===(6&(El=t))&&Zr()}}function hu(){Ol=Il.current,kr(Il)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:ro(),kr(Er),kr(Cr),co();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:kr(so);break;case 10:wa(i.type._context);break;case 22:case 23:hu()}n=n.return}if(Tl=e,Pl=e=Iu(e.current,null),Dl=Ol=t,Rl=0,Bl=null,Fl=zl=Nl=0,Ul=jl=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(i=(n=Aa[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}Aa=null}return e}function pu(e,t){for(;;){var n=Pl;try{if(xa(),ho.current=os,Lo){for(var i=vo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Lo=!1}if(po=0,go=mo=vo=null,yo=!1,bo=0,Ml.current=null,null===n||null===n.return){Rl=1,Bl=t,Pl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Dl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,Ls(p,s,l,0,t),1&p.mode&&ms(o,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ms(o,c,t),mu();break e}u=Error(a(426))}else if(ra&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),Ls(g,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==Rl&&(Rl=2),null===jl?jl=[o]:jl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,ps(0,u,t));break e;case 1:l=u;var L=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof L.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,vs(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vu(){var e=Al.current;return Al.current=os,null===e?os:e}function mu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Nl)&&0===(268435455&zl)||lu(Tl,Dl)}function gu(e,t){var n=El;El|=2;var i=vu();for(Tl===e&&Dl===t||(Gl=null,fu(e,t));;)try{Lu();break}catch(r){pu(e,r)}if(xa(),El=n,Al.current=i,null!==Pl)throw Error(a(261));return Tl=null,Dl=0,Rl}function Lu(){for(;null!==Pl;)bu(Pl)}function yu(){for(;null!==Pl&&!Ye();)bu(Pl)}function bu(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xu(e):Pl=t,Ml.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wu(e,t,n){var i=yt,r=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,i){do{_u()}while(null!==Yl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===Tl&&(Pl=Tl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Tu(tt,(function(){return _u(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=yt;yt=1;var l=El;El|=4,Ml.current=null,function(e,t){if(er=Gt,fi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=s+r),h!==o||0!==i&&3!==h.nodeType||(u=s+i),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===r&&(l=s),f===o&&++d===i&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Gt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,L=t.stateNode,y=L.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);L.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(x){ku(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=nl,nl=!1}(e,n),gl(n,e),pi(tr),Gt=!!er,tr=er=null,e.current=n,yl(n,e,r),Qe(),El=l,yt=s,Cl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Ql=r),o=e.pendingLanes,0===o&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Ke()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&_u(),o=e.pendingLanes,0!==(1&o)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Zr()}(e,t,n,i)}finally{Cl.transition=r,yt=i}return null}function _u(){if(null!==Yl){var e=bt(Ql),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&El))throw Error(a(331));var r=El;for(El|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($s=c;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:il(8,d,o)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(ol(d),d===c){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var L=o.sibling;if(null!==L){L.return=o.return,$s=L;break e}$s=o.return}}var y=e.current;for($s=y;null!==$s;){var b=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,$s=b;else e:for(s=y;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){ku(l,l.return,w)}if(l===s){$s=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$s=x;break e}$s=l.return}}if(El=r,Zr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{yt=n,Cl.transition=t}}return!1}function Su(e,t,n){e=Ia(e,t=ps(0,t=cs(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),ru(e,t))}function ku(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Ia(t,e=vs(t,e=cs(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function Au(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Dl&n)===n&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Ke()-Zl?fu(e,0):Fl|=n),ru(e,t)}function Mu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ea(e,t))&&(gt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mu(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Mu(e,n)}function Tu(e,t){return qe(e,t)}function Pu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(e,t,n,i){return new Pu(e,t,n,i)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Du(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Bu(n.children,r,o,t);case S:s=8,r|=8;break;case k:return(e=Du(12,n,t,2|r)).elementType=k,e.lanes=o,e;case E:return(e=Du(13,n,t,r)).elementType=E,e.lanes=o,e;case T:return(e=Du(19,n,t,r)).elementType=T,e.lanes=o,e;case O:return Nu(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case M:s=9;break e;case C:s=11;break e;case P:s=14;break e;case D:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Du(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Bu(e,t,n,i){return(e=Du(7,e,i,t)).lanes=n,e}function Nu(e,t,n,i){return(e=Du(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function zu(e,t,n){return(e=Du(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Du(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,i,r,a,o,s,l){return e=new ju(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Du(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Zu(e){if(!e)return Mr;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Rr(e,n,t)}return t}function Vu(e,t,n,i,r,a,o,s,l){return(e=Uu(n,i,!0,e,0,a,0,s,l)).context=Zu(null),n=e.current,(a=Oa(i=tu(),r=nu(n))).callback=void 0!==t&&null!==t?t:null,Ia(n,a,r),e.current.lanes=r,gt(e,r,i),ru(e,i),e}function Gu(e,t,n,i){var r=t.current,a=tu(),o=nu(r);return n=Zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ia(r,t,o))&&(iu(e,r,o,a),Ra(e,r,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),fa();break;case 5:ao(t);break;case 1:Dr(t.type)&&Br(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Ar(ga,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ar(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ar(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ar(so,1&so.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(so,so.current),i)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ra&&0!==(1048576&t.flags)&&$r(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gs(e,t),e=t.pendingProps;var r=Pr(t,Cr.current);Sa(t,n),r=So(null,t,i,e,r,n);var o=ko();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(i)?(o=!0,Br(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Pa(t),r.updater=Ua,t.stateNode=r,r._reactInternals=t,Ha(t,i,e,n),t=Es(null,t,i,!0,o,n)):(t.tag=0,ra&&o&&ea(t),xs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(i),e=ma(i,e),r){case 0:t=Ms(null,t,i,e,n);break e;case 1:t=Cs(null,t,i,e,n);break e;case 11:t=ws(null,t,i,e,n);break e;case 14:t=_s(null,t,i,ma(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ms(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 1:return i=t.type,r=t.pendingProps,Cs(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 3:e:{if(Ts(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Da(e,t),Na(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,i,n,r=cs(Error(a(423)),t));break e}if(i!==r){t=Ps(e,t,i,n,r=cs(Error(a(424)),t));break e}for(ia=ur(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=Ka(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),i===r){t=Hs(e,t,n);break e}xs(e,t,i,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(t.flags|=32),As(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return zs(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Qa(t,null,i,n):xs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ws(e,t,i,r=t.elementType===i?r:ma(i,r),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,Ar(ga,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Er.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===o.tag){(u=Oa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),_a(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Sa(t,n),i=i(r=ka(r)),t.flags|=1,xs(e,t,i,n),t.child;case 14:return r=ma(i=t.type,t.pendingProps),_s(e,t,i,r=ma(i.type,r),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),Gs(e,t),t.tag=1,Dr(i)?(e=!0,Br(t)):e=!1,Sa(t,n),Va(t,i,r),Ha(t,i,r,n),Es(null,t,i,!0,e,n);case 19:return Vs(e,t,n);case 22:return ks(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function ec(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var e=Hu(o);s.call(e)}}Gu(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Hu(o);a.call(e)}}var o=Vu(t,i,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[pr]=o.current,Zi(8===e.nodeType?e.parentNode:e),du(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Hu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[pr]=l.current,Zi(8===e.nodeType?e.parentNode:e),du((function(){Gu(t,l,n,i)})),l}(n,t,e,r,i);return Hu(o)}Qu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gu(e,t,null,null)},Qu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Gu(null,e,null,null)})),t[pr]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(Lt(t,1|n),ru(t,Ke()),0===(6&El)&&(Vl=Ke()+500,Zr()))}break;case 13:du((function(){var t=Ea(e,1);if(null!==t){var n=tu();iu(t,e,1,n)}})),qu(e,1)}},wt=function(e){if(13===e.tag){var t=Ea(e,134217728);if(null!==t)iu(t,e,134217728,tu());qu(e,134217728)}},_t=function(e){if(13===e.tag){var t=nu(e),n=Ea(e,t);if(null!==n)iu(n,e,t,tu());qu(e,t)}},St=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(a(90));q(i),J(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cu,Ee=du;var tc={usingClientEntryPoint:!1,Events:[yr,br,xr,Ae,Me,cu]},nc={findFiberByHostInstance:Lr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{rt=rc.inject(ic),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ku(e))throw Error(a(299));var n=!1,i="",r=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Zi(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ku(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,r,0,o,s),e[pr]=t.current,Zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var i=n(164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},59:function(e,t,n){var i;e.exports=(i=n(791),function(){"use strict";var e={0:function(e,t,n){n.r(t)},374:function(e,t,n){n.r(t)},840:function(e,t,n){n.r(t)},481:function(e,t,n){n.r(t)},549:function(e,t,n){n.r(t)},153:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CountrySelector=void 0,n(0);var l=o(n(156)),u=n(946),c=n(515),d=n(332),h=n(425),f=n(60);t.CountrySelector=function(e){var t,n,r=e.selectedCountry,a=e.onSelect,o=e.disabled,p=e.hideDropdown,v=e.countries,m=void 0===v?u.defaultCountries:v,g=e.renderButtonWrapper,L=s(e,["selectedCountry","onSelect","disabled","hideDropdown","countries","renderButtonWrapper"]),y=(0,l.useState)(!1),b=y[0],x=y[1],w=(0,l.useMemo)((function(){if(r)return(0,d.getCountry)({value:r,field:"iso2",countries:m})}),[m,r]),_=(0,l.useRef)(null);return l.default.createElement("div",{className:(0,c.buildClassNames)({addPrefix:["country-selector"],rawClassNames:[L.className]}),style:L.style,ref:_},(t={title:null==w?void 0:w.name,onClick:function(){return x((function(e){return!e}))},onMouseDown:function(e){return e.preventDefault()},onKeyDown:function(e){e.key&&["ArrowUp","ArrowDown"].includes(e.key)&&(e.preventDefault(),x(!0))},disabled:p||o,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":b},n=l.default.createElement("div",{className:(0,c.buildClassNames)({addPrefix:["country-selector-button__button-content"],rawClassNames:[L.buttonContentWrapperClassName]}),style:L.buttonContentWrapperStyle},l.default.createElement(h.FlagEmoji,{iso2:r,className:(0,c.buildClassNames)({addPrefix:["country-selector-button__flag-emoji",o&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[L.flagClassName]}),style:i({visibility:r?"visible":"hidden"},L.flagStyle)}),!p&&l.default.createElement("div",{className:(0,c.buildClassNames)({addPrefix:["country-selector-button__dropdown-arrow",o&&"country-selector-button__dropdown-arrow--disabled",b&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[L.dropdownArrowClassName]}),style:L.dropdownArrowStyle})),g?g({children:n,rootProps:t}):l.default.createElement("button",i({},t,{type:"button",className:(0,c.buildClassNames)({addPrefix:["country-selector-button",b&&"country-selector-button--active",o&&"country-selector-button--disabled",p&&"country-selector-button--hide-dropdown"],rawClassNames:[L.buttonClassName]}),"data-country":r,style:L.buttonStyle}),n)),l.default.createElement(f.CountrySelectorDropdown,i({show:b,countries:m,onSelect:function(e){x(!1),null==a||a(e)},selectedCountry:r,onClose:function(){x(!1)}},L.dropdownStyleProps)))}},60:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CountrySelectorDropdown=void 0,n(374);var l=o(n(156)),u=n(946),c=n(515),d=n(332),h=n(425);t.CountrySelectorDropdown=function(e){var t=e.show,n=e.dialCodePrefix,r=void 0===n?"+":n,a=e.selectedCountry,o=e.countries,f=void 0===o?u.defaultCountries:o,p=e.onSelect,v=e.onClose,m=s(e,["show","dialCodePrefix","selectedCountry","countries","onSelect","onClose"]),g=(0,l.useRef)(null),L=(0,l.useRef)(),y=(0,l.useRef)({updatedAt:void 0,value:""}),b=(0,l.useCallback)((function(e){return f.findIndex((function(t){return(0,d.parseCountry)(t).iso2===e}))}),[f]),x=(0,l.useState)(b(a)),w=x[0],_=x[1],S=function(){L.current!==a&&_(b(a))},k=(0,l.useCallback)((function(e){_(b(e.iso2)),null==p||p(e)}),[p,b]),A=function(e){var t=f.length-1;_((function(n){var i,r=(i=n,"prev"===e?i-1:"next"===e?i+1:"last"===e?t:0);return r<0?0:r>t?t:r}))},M=(0,l.useCallback)((function(){if(g.current&&void 0!==w){var e=(0,d.parseCountry)(f[w]).iso2;if(e!==L.current){var t=g.current.querySelector('[data-country="'.concat(e,'"]'));t&&((0,d.scrollToChild)(g.current,t),L.current=e)}}}),[w,f]);return(0,l.useEffect)((function(){M()}),[w,M]),(0,l.useEffect)((function(){g.current&&(t?g.current.focus():S())}),[t]),(0,l.useEffect)((function(){S()}),[a]),l.default.createElement("ul",{ref:g,role:"listbox",className:(0,c.buildClassNames)({addPrefix:["country-selector-dropdown"],rawClassNames:[m.className]}),style:i({display:t?"block":"none"},m.style),onKeyDown:function(e){if(e.stopPropagation(),"Enter"!==e.key)if("Escape"!==e.key){if("ArrowUp"===e.key)return e.preventDefault(),void A("prev");if("ArrowDown"===e.key)return e.preventDefault(),void A("next");if("PageUp"===e.key)return e.preventDefault(),void A("first");if("PageDown"===e.key)return e.preventDefault(),void A("last");" "===e.key&&e.preventDefault(),1!==e.key.length||e.altKey||e.ctrlKey||e.metaKey||function(e){var t=y.current.updatedAt&&(new Date).getTime()-y.current.updatedAt.getTime()>1e3;y.current={value:t?e:"".concat(y.current.value).concat(e),updatedAt:new Date};var n=f.findIndex((function(e){return(0,d.parseCountry)(e).name.toLowerCase().startsWith(y.current.value)}));-1!==n&&_(n)}(e.key.toLocaleLowerCase())}else null==v||v();else{var t=(0,d.parseCountry)(f[w]);k(t)}},onBlur:v,tabIndex:-1,"aria-activedescendant":"".concat((0,d.parseCountry)(f[w]).iso2,"-option")},f.map((function(e,t){var n=(0,d.parseCountry)(e),i=n.iso2===a,o=t===w;return l.default.createElement("li",{key:n.iso2,"data-country":n.iso2,role:"option","aria-selected":i,"aria-label":"".concat(n.name," ").concat(r).concat(n.dialCode),id:"".concat(n.iso2,"-option"),className:(0,c.buildClassNames)({addPrefix:["country-selector-dropdown__list-item",i&&"country-selector-dropdown__list-item--selected",o&&"country-selector-dropdown__list-item--focused"],rawClassNames:[m.listItemClassName]}),onClick:function(){return k(n)},style:m.listItemStyle},l.default.createElement(h.FlagEmoji,{iso2:n.iso2,className:(0,c.buildClassNames)({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[m.listItemFlagClassName]}),style:m.listItemFlagStyle}),l.default.createElement("span",{className:(0,c.buildClassNames)({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[m.listItemCountryNameClassName]}),style:m.listItemCountryNameStyle},n.name),l.default.createElement("span",{className:(0,c.buildClassNames)({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[m.listItemDialCodeClassName]}),style:m.listItemDialCodeStyle},r,n.dialCode))})))}},7:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DialCodePreview=void 0,n(840);var r=i(n(156)),a=n(515);t.DialCodePreview=function(e){var t=e.dialCode,n=e.prefix,i=e.disabled,o=e.style,s=e.className;return r.default.createElement("div",{className:(0,a.buildClassNames)({addPrefix:["dial-code-preview",i&&"dial-code-preview--disabled"],rawClassNames:[s]}),style:o},"".concat(n).concat(t))}},425:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlagEmoji=void 0,n(481);var o=a(n(156)),s=n(515),l="abcdefghijklmnopqrstuvwxyz".split("").reduce((function(e,t,n){var r,a,o;return i(i({},e),((r={})[t]=(a=n,o=parseInt("1f1e6",16),Number(o+a).toString(16)),r))}),{});t.FlagEmoji=function(e){var t=e.iso2,n=e.size,a=void 0===n?"24px":n,u=e.protocol,c=void 0===u?"https":u,d=e.disableLazyLoading,h=e.className,f=r(e,["iso2","size","protocol","disableLazyLoading","className"]);if(!t)return o.default.createElement("img",i({width:a,height:a},f));var p=function(e){return[l[e[0]],l[e[1]]].join("-")}(t),v="".concat(c,"://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/").concat(p,".svg");return o.default.createElement("img",i({className:(0,s.buildClassNames)({addPrefix:["flag-emoji"],rawClassNames:[h]}),src:v,width:a,height:a,draggable:!1,"data-country":t,loading:d?void 0:"lazy"},f))}},28:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneInput=void 0,n(549);var l=o(n(156)),u=n(946),c=n(882),d=n(515),h=n(332),f=n(153),p=n(7);t.PhoneInput=function(e){var t,n=e.hideDropdown,r=e.placeholder,a=e.disabled,o=e.showDisabledDialCodeAndPrefix,v=e.inputProps,m=e.onChange,g=e.style,L=e.className,y=e.inputStyle,b=e.inputClassName,x=e.countrySelectorStyleProps,w=e.dialCodePreviewStyleProps,_=e.value,S=e.countries,k=void 0===S?u.defaultCountries:S,A=s(e,["hideDropdown","placeholder","disabled","showDisabledDialCodeAndPrefix","inputProps","onChange","style","className","inputStyle","inputClassName","countrySelectorStyleProps","dialCodePreviewStyleProps","value","countries"]),M=(0,c.usePhoneInput)(i(i({value:_,countries:k},A),{onChange:function(e){null==m||m(e.phone,e.country)}})),C=M.phone,E=M.inputRef,T=M.country,P=M.setCountry,D=M.handlePhoneValueChange,O=(0,l.useMemo)((function(){if(T)return(0,h.getCountry)({value:T,field:"iso2",countries:k})}),[k,T]),I=A.disableDialCodeAndPrefix&&o&&(null==O?void 0:O.dialCode);return l.default.createElement("div",{className:(0,d.buildClassNames)({addPrefix:["input-container"],rawClassNames:[L]}),style:g},l.default.createElement(f.CountrySelector,i({onSelect:function(e){return P(e.iso2)},selectedCountry:T,countries:k,disabled:a,hideDropdown:n},x)),I&&l.default.createElement(p.DialCodePreview,i({dialCode:O.dialCode,prefix:null!==(t=A.prefix)&&void 0!==t?t:"+",disabled:a},w)),l.default.createElement("input",i({onChange:D,value:C,type:"tel",ref:E,className:(0,d.buildClassNames)({addPrefix:["input",a&&"input--disabled"],rawClassNames:[b]}),placeholder:r,disabled:a,style:y},v)))}},946:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCountries=void 0,t.defaultCountries=[["Afghanistan",["asia"],"af","93"],["Albania",["europe"],"al","355"],["Algeria",["africa","north-africa"],"dz","213"],["Andorra",["europe"],"ad","376"],["Angola",["africa"],"ao","244"],["Antigua and Barbuda",["america","carribean"],"ag","1268"],["Argentina",["america","south-america"],"ar","54","(..) ........",0,["11","221","223","261","264","2652","280","2905","291","2920","2966","299","341","342","343","351","376","379","381","3833","385","387","388"]],["Armenia",["asia","ex-ussr"],"am","374",".. ......"],["Aruba",["america","carribean"],"aw","297"],["Australia",["oceania"],"au","61",". .... ....",0,["2","3","4","7","8"]],["Austria",["europe","eu-union"],"at","43"],["Azerbaijan",["asia","ex-ussr"],"az","994","(..) ... .. .."],["Bahamas",["america","carribean"],"bs","1242"],["Bahrain",["middle-east"],"bh","973"],["Bangladesh",["asia"],"bd","880"],["Barbados",["america","carribean"],"bb","1246"],["Belarus",["europe","ex-ussr"],"by","375","(..) ... .. .."],["Belgium",["europe","eu-union"],"be","32","... .. .. .."],["Belize",["america","central-america"],"bz","501"],["Benin",["africa"],"bj","229"],["Bhutan",["asia"],"bt","975"],["Bolivia",["america","south-america"],"bo","591"],["Bosnia and Herzegovina",["europe","ex-yugos"],"ba","387"],["Botswana",["africa"],"bw","267"],["Brazil",["america","south-america"],"br","55","(..) ........."],["British Indian Ocean Territory",["asia"],"io","246"],["Brunei",["asia"],"bn","673"],["Bulgaria",["europe","eu-union"],"bg","359"],["Burkina Faso",["africa"],"bf","226"],["Burundi",["africa"],"bi","257"],["Cambodia",["asia"],"kh","855"],["Cameroon",["africa"],"cm","237"],["Canada",["america","north-america"],"ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde",["africa"],"cv","238"],["Caribbean Netherlands",["america","carribean"],"bq","599","",1],["Central African Republic",["africa"],"cf","236"],["Chad",["africa"],"td","235"],["Chile",["america","south-america"],"cl","56"],["China",["asia"],"cn","86","... .... ...."],["Colombia",["america","south-america"],"co","57","... ... ...."],["Comoros",["africa"],"km","269"],["Congo",["africa"],"cd","243"],["Congo",["africa"],"cg","242"],["Costa Rica",["america","central-america"],"cr","506","....-...."],["C\xf4te d'Ivoire",["africa"],"ci","225",".. .. .. .. .."],["Croatia",["europe","eu-union","ex-yugos"],"hr","385"],["Cuba",["america","carribean"],"cu","53"],["Cura\xe7ao",["america","carribean"],"cw","599","",0],["Cyprus",["europe","eu-union"],"cy","357",".. ......"],["Czech Republic",["europe","eu-union"],"cz","420","... ... ..."],["Denmark",["europe","eu-union","baltic"],"dk","45",".. .. .. .."],["Djibouti",["africa"],"dj","253"],["Dominica",["america","carribean"],"dm","1767"],["Dominican Republic",["america","carribean"],"do","1","",2],["Ecuador",["america","south-america"],"ec","593"],["Egypt",["africa","north-africa"],"eg","20"],["El Salvador",["america","central-america"],"sv","503","....-...."],["Equatorial Guinea",["africa"],"gq","240"],["Eritrea",["africa"],"er","291"],["Estonia",["europe","eu-union","ex-ussr","baltic"],"ee","372",".... ......"],["Ethiopia",["africa"],"et","251"],["Fiji",["oceania"],"fj","679"],["Finland",["europe","eu-union","baltic"],"fi","358",".. ... .. .."],["France",["europe","eu-union"],"fr","33",". .. .. .. .."],["French Guiana",["america","south-america"],"gf","594"],["French Polynesia",["oceania"],"pf","689"],["Gabon",["africa"],"ga","241"],["Gambia",["africa"],"gm","220"],["Georgia",["asia","ex-ussr"],"ge","995"],["Germany",["europe","eu-union","baltic"],"de","49",".... ........"],["Ghana",["africa"],"gh","233"],["Greece",["europe","eu-union"],"gr","30"],["Grenada",["america","carribean"],"gd","1473"],["Guadeloupe",["america","carribean"],"gp","590","",0],["Guam",["oceania"],"gu","1671"],["Guatemala",["america","central-america"],"gt","502","....-...."],["Guinea",["africa"],"gn","224"],["Guinea-Bissau",["africa"],"gw","245"],["Guyana",["america","south-america"],"gy","592"],["Haiti",["america","carribean"],"ht","509","....-...."],["Honduras",["america","central-america"],"hn","504"],["Hong Kong",["asia"],"hk","852",".... ...."],["Hungary",["europe","eu-union"],"hu","36"],["Iceland",["europe"],"is","354","... ...."],["India",["asia"],"in","91",".....-....."],["Indonesia",["asia"],"id","62"],["Iran",["middle-east"],"ir","98","... ... ...."],["Iraq",["middle-east"],"iq","964"],["Ireland",["europe","eu-union"],"ie","353",".. ......."],["Israel",["middle-east"],"il","972","... ... ...."],["Italy",["europe","eu-union"],"it","39","... .......",0],["Jamaica",["america","carribean"],"jm","1876"],["Japan",["asia"],"jp","81",".. .... ...."],["Jordan",["middle-east"],"jo","962"],["Kazakhstan",["asia","ex-ussr"],"kz","7","... ...-..-..",0,["310","311","312","313","315","318","321","324","325","326","327","336","7172","73622"]],["Kenya",["africa"],"ke","254"],["Kiribati",["oceania"],"ki","686"],["Kosovo",["europe","ex-yugos"],"xk","383"],["Kuwait",["middle-east"],"kw","965"],["Kyrgyzstan",["asia","ex-ussr"],"kg","996","... ... ..."],["Laos",["asia"],"la","856"],["Latvia",["europe","eu-union","ex-ussr","baltic"],"lv","371",".. ... ..."],["Lebanon",["middle-east"],"lb","961"],["Lesotho",["africa"],"ls","266"],["Liberia",["africa"],"lr","231"],["Libya",["africa","north-africa"],"ly","218"],["Liechtenstein",["europe"],"li","423"],["Lithuania",["europe","eu-union","ex-ussr","baltic"],"lt","370"],["Luxembourg",["europe","eu-union"],"lu","352"],["Macau",["asia"],"mo","853"],["Macedonia",["europe","ex-yugos"],"mk","389"],["Madagascar",["africa"],"mg","261"],["Malawi",["africa"],"mw","265"],["Malaysia",["asia"],"my","60","..-....-...."],["Maldives",["asia"],"mv","960"],["Mali",["africa"],"ml","223"],["Malta",["europe","eu-union"],"mt","356"],["Marshall Islands",["oceania"],"mh","692"],["Martinique",["america","carribean"],"mq","596"],["Mauritania",["africa"],"mr","222"],["Mauritius",["africa"],"mu","230"],["Mexico",["america","central-america"],"mx","52","... ... ....",0,["33","55","81","229","656","664","774","998"]],["Micronesia",["oceania"],"fm","691"],["Moldova",["europe"],"md","373","(..) ..-..-.."],["Monaco",["europe"],"mc","377"],["Mongolia",["asia"],"mn","976"],["Montenegro",["europe","ex-yugos"],"me","382"],["Morocco",["africa","north-africa"],"ma","212"],["Mozambique",["africa"],"mz","258"],["Myanmar",["asia"],"mm","95"],["Namibia",["africa"],"na","264"],["Nauru",["africa"],"nr","674"],["Nepal",["asia"],"np","977"],["Netherlands",["europe","eu-union"],"nl","31",".. ........"],["New Caledonia",["oceania"],"nc","687"],["New Zealand",["oceania"],"nz","64","...-...-...."],["Nicaragua",["america","central-america"],"ni","505"],["Niger",["africa"],"ne","227"],["Nigeria",["africa"],"ng","234"],["North Korea",["asia"],"kp","850"],["Norway",["europe","baltic"],"no","47","... .. ..."],["Oman",["middle-east"],"om","968"],["Pakistan",["asia"],"pk","92","...-......."],["Palau",["oceania"],"pw","680"],["Palestine",["middle-east"],"ps","970"],["Panama",["america","central-america"],"pa","507"],["Papua New Guinea",["oceania"],"pg","675"],["Paraguay",["america","south-america"],"py","595"],["Peru",["america","south-america"],"pe","51"],["Philippines",["asia"],"ph","63",".... ......."],["Poland",["europe","eu-union","baltic"],"pl","48","...-...-..."],["Portugal",["europe","eu-union"],"pt","351"],["Puerto Rico",["america","carribean"],"pr","1","",3],["Qatar",["middle-east"],"qa","974"],["R\xe9union",["africa"],"re","262"],["Romania",["europe","eu-union"],"ro","40"],["Russia",["europe","asia","ex-ussr","baltic"],"ru","7","(...) ...-..-..",1],["Rwanda",["africa"],"rw","250"],["Saint Kitts and Nevis",["america","carribean"],"kn","1869"],["Saint Lucia",["america","carribean"],"lc","1758"],["Saint Vincent and the Grenadines",["america","carribean"],"vc","1784"],["Samoa",["oceania"],"ws","685"],["San Marino",["europe"],"sm","378"],["S\xe3o Tom\xe9 and Pr\xedncipe",["africa"],"st","239"],["Saudi Arabia",["middle-east"],"sa","966"],["Senegal",["africa"],"sn","221"],["Serbia",["europe","ex-yugos"],"rs","381"],["Seychelles",["africa"],"sc","248"],["Sierra Leone",["africa"],"sl","232"],["Singapore",["asia"],"sg","65","....-...."],["Slovakia",["europe","eu-union"],"sk","421"],["Slovenia",["europe","eu-union","ex-yugos"],"si","386"],["Solomon Islands",["oceania"],"sb","677"],["Somalia",["africa"],"so","252"],["South Africa",["africa"],"za","27"],["South Korea",["asia"],"kr","82","... .... ...."],["South Sudan",["africa","north-africa"],"ss","211"],["Spain",["europe","eu-union"],"es","34","... ... ..."],["Sri Lanka",["asia"],"lk","94"],["Sudan",["africa"],"sd","249"],["Suriname",["america","south-america"],"sr","597"],["Swaziland",["africa"],"sz","268"],["Sweden",["europe","eu-union","baltic"],"se","46","(...) ...-..."],["Switzerland",["europe"],"ch","41",".. ... .. .."],["Syria",["middle-east"],"sy","963"],["Taiwan",["asia"],"tw","886"],["Tajikistan",["asia","ex-ussr"],"tj","992"],["Tanzania",["africa"],"tz","255"],["Thailand",["asia"],"th","66"],["Timor-Leste",["asia"],"tl","670"],["Togo",["africa"],"tg","228"],["Tonga",["oceania"],"to","676"],["Trinidad and Tobago",["america","carribean"],"tt","1868"],["Tunisia",["africa","north-africa"],"tn","216"],["Turkey",["europe"],"tr","90","... ... .. .."],["Turkmenistan",["asia","ex-ussr"],"tm","993"],["Tuvalu",["asia"],"tv","688"],["Uganda",["africa"],"ug","256"],["Ukraine",["europe","ex-ussr"],"ua","380","(..) ... .. .."],["United Arab Emirates",["middle-east"],"ae","971"],["United Kingdom",["europe","eu-union"],"gb","44",".... ......"],["United States",["america","north-america"],"us","1","(...) ...-....",0,["201","202","203","205","206","207","208","209","210","212","213","214","215","216","217","218","219","224","225","228","229","231","234","239","240","248","251","252","253","254","256","260","262","267","269","270","276","281","301","302","303","304","305","307","308","309","310","312","313","314","315","316","317","318","319","320","321","323","325","330","334","336","337","339","347","351","352","360","361","386","401","402","404","405","406","407","408","409","410","412","413","414","415","417","419","423","424","425","430","432","434","435","440","443","447","469","478","479","480","484","501","502","503","504","505","507","508","509","510","512","513","515","516","517","518","520","530","540","541","551","559","561","562","563","567","570","571","573","574","575","580","585","586","601","602","603","605","606","607","608","609","610","612","614","615","616","617","618","619","620","623","626","630","631","636","641","646","650","651","660","661","662","678","681","682","689","701","702","703","704","706","707","708","712","713","714","715","716","717","718","719","720","724","727","731","732","734","740","754","757","760","762","763","765","769","770","772","773","774","775","779","781","785","786","801","802","803","804","805","806","808","810","812","813","814","815","816","817","818","828","830","831","832","843","845","847","848","850","856","857","858","859","860","862","863","864","865","870","878","901","903","904","906","907","908","909","910","912","913","914","915","916","917","918","919","920","925","928","931","936","937","940","941","947","949","951","952","954","956","970","971","972","973","978","979","980","985","989"]],["Uruguay",["america","south-america"],"uy","598"],["Uzbekistan",["asia","ex-ussr"],"uz","998",".. ... .. .."],["Vanuatu",["oceania"],"vu","678"],["Vatican City",["europe"],"va","39",".. .... ....",1],["Venezuela",["america","south-america"],"ve","58"],["Vietnam",["asia"],"vn","84"],["Yemen",["middle-east"],"ye","967"],["Zambia",["africa"],"zm","260"],["Zimbabwe",["africa"],"zw","263"]]},11:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryState=void 0;var a=n(156),o=n(795),s={size:20,overrideLastItemDebounceMS:-1};t.useHistoryState=function(e,t){var n=i(i({},s),t),l=n.size,u=n.overrideLastItemDebounceMS,c=n.onChange,d=(0,a.useState)(e),h=d[0],f=d[1],p=(0,a.useState)([h]),v=p[0],m=p[1],g=(0,a.useState)(0),L=g[0],y=g[1],b=(0,o.useTimer)();return[h,function(e,t){if(("object"!=typeof e||Object.entries(e).toString()!==Object.entries(h).toString())&&e!==h){var n=u>0,i=b.check(),a=!n||void 0===i||i>u;if(void 0!==(null==t?void 0:t.overrideLastItem)?t.overrideLastItem:!a)m((function(t){return r(r([],t.slice(0,L),!0),[e],!1)}));else{var o=v.length>=l;m((function(t){return r(r([],t.slice(o?1:0,L+1),!0),[e],!1)})),o||y((function(e){return e+1}))}f(e),null==c||c(e)}},function(){if(L<=0)return{success:!1};var e=v[L-1];return f(e),y((function(e){return e-1})),null==c||c(e),{success:!0,value:e}},function(){if(L+1>=v.length)return{success:!1};var e=v[L+1];return f(e),y((function(e){return e+1})),null==c||c(e),{success:!0,value:e}}]}},882:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.usePhoneInput=t.defaultConfig=t.MASK_CHAR=void 0;var i=n(156),r=n(946),a=n(332),o=n(11);t.MASK_CHAR=".",t.defaultConfig={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,countries:r.defaultCountries},t.usePhoneInput=function(e){var n=e.defaultCountry,r=void 0===n?t.defaultConfig.defaultCountry:n,s=e.value,l=void 0===s?t.defaultConfig.value:s,u=e.countries,c=void 0===u?t.defaultConfig.countries:u,d=e.prefix,h=void 0===d?t.defaultConfig.prefix:d,f=e.defaultMask,p=void 0===f?t.defaultConfig.defaultMask:f,v=e.charAfterDialCode,m=void 0===v?t.defaultConfig.charAfterDialCode:v,g=e.historySaveDebounceMS,L=void 0===g?t.defaultConfig.historySaveDebounceMS:g,y=e.disableCountryGuess,b=void 0===y?t.defaultConfig.disableCountryGuess:y,x=e.disableDialCodePrefill,w=void 0===x?t.defaultConfig.disableDialCodePrefill:x,_=e.forceDialCode,S=void 0===_?t.defaultConfig.forceDialCode:_,k=e.disableDialCodeAndPrefix,A=void 0===k?t.defaultConfig.disableDialCodeAndPrefix:k,M=e.onChange,C=!A&&!b,E=(0,i.useRef)(null),T=function(e){var n,i=e.value,r=e.country,o=e.trimNonDigitsEnd,s=e.insertDialCodeOnEmpty,l=!e.forceDisableCountryGuess&&C?(0,a.guessCountryByPartialNumber)({phone:i,countries:c,currentCountryIso2:r.iso2}):void 0,u=null!==(n=null==l?void 0:l.country)&&void 0!==n?n:r;return{phone:u?(0,a.formatPhone)(i,{prefix:h,mask:u.format||p,maskChar:t.MASK_CHAR,dialCode:u.dialCode,trimNonDigitsEnd:o,charAfterDialCode:m,forceDialCode:S,insertDialCodeOnEmpty:s,disableDialCodeAndPrefix:A}):i,countryGuessResult:l,formatCountry:u}},P=function(e){Promise.resolve().then((function(){var t;null===(t=E.current)||void 0===t||t.setSelectionRange(e,e)}))},D=(0,o.useHistoryState)((function(){var e=(0,a.guessCountryByPartialNumber)({phone:l,countries:c,currentCountryIso2:r}).country||(0,a.getCountry)({value:r,field:"iso2",countries:c});e||console.error('[react-international-phone]: can not find a country with "'.concat(r,'" iso2 code'));var t=e||(0,a.parseCountry)(c.find((function(e){return"us"===(0,a.parseCountry)(e).iso2}))),n=T({value:l,country:t,insertDialCodeOnEmpty:!w}).phone;return P(n.length),{phone:n,country:t.iso2}}),{overrideLastItemDebounceMS:L,onChange:M}),O=D[0],I=O.phone,R=O.country,B=D[1],N=D[2],z=D[3],F=(0,i.useMemo)((function(){return(0,a.getCountry)({value:R,field:"iso2",countries:c})}),[c,R]),j=function(e,t){var n,i,r=void 0===t?{}:t,o=r.deletion,s=r.cursorPosition,l=r.insertDialCodeOnEmpty,u=r.inserted,c=e,d=s;S&&!A&&F&&!(0,a.removeNonDigits)(e).startsWith(F.dialCode)&&e&&(u&&e.startsWith(h)&&e.length-(null!=s?s:0)==0?c=e:(c=I,d=0));var f=T({value:c,country:F,trimNonDigitsEnd:"backward"===o,insertDialCodeOnEmpty:l,forceDisableCountryGuess:S&&!!o&&(0,a.removeNonDigits)(c).length<F.dialCode.length}),p=f.phone,v=f.countryGuessResult,g=F;C&&(null==v?void 0:v.country)&&v.country.name!==R&&v.fullDialCodeMatch&&(g=v.country);var L=(0,a.getCursorPosition)({cursorPositionAfterInput:null!=d?d:0,phoneBeforeInput:I,phoneAfterInput:e,phoneAfterFormatted:p,leftOffset:S?h.length+(null!==(i=null===(n=null==F?void 0:F.dialCode)||void 0===n?void 0:n.length)&&void 0!==i?i:0)+m.length:0,deletion:o});return B({phone:p,country:g.iso2}),P(L),p};(0,i.useEffect)((function(){var e=E.current;if(e){var t=function(e){if(e.key){var t=e.ctrlKey,n=e.shiftKey,i="z"===e.key.toLowerCase();t&&i&&(n?z():N())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}}),[E,N,z]);var U=(0,i.useState)(!1),Z=U[0],V=U[1];return(0,i.useEffect)((function(){if(!Z)return V(!0),void(l!==I&&(null==M||M({phone:I,country:R})));l!==I&&j(l)}),[l]),{phone:I,country:R,setCountry:function(e){var t=(0,a.getCountry)({value:e,field:"iso2",countries:c});if(t){var n=A?"":"".concat(h).concat(t.dialCode).concat(m);B({phone:n,country:t.iso2}),Promise.resolve().then((function(){var e;null===(e=E.current)||void 0===e||e.focus()}))}},handlePhoneValueChange:function(e){var t;e.preventDefault();var n=e.nativeEvent.inputType,i=null==n?void 0:n.startsWith("insertFrom"),r=j(e.target.value,{deletion:function(){var e;if(null!==(e=null==n?void 0:n.toLocaleLowerCase().includes("delete"))&&void 0!==e&&e)return(null==n?void 0:n.toLocaleLowerCase().includes("forward"))?"forward":"backward"}(),inserted:i,cursorPosition:null!==(t=e.target.selectionStart)&&void 0!==t?t:0});return A&&F?(0,a.addDialCode)({phone:r,dialCode:F.dialCode,charAfterDialCode:m,prefix:h}):r},inputRef:E}}},393:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.usePhoneValidation=void 0;var i=n(332);t.usePhoneValidation=function(e,t){return(0,i.validatePhone)(e,t)}},795:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTimer=void 0;var i=n(156);t.useTimer=function(){var e=(0,i.useRef)(),t=(0,i.useRef)(Date.now());return{check:function(){var n=Date.now(),i=e.current?n-t.current:void 0;return e.current=t.current,t.current=n,i}}}},515:function(e,t){var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.buildClassNames=t.classNamesWithPrefix=t.joinClasses=t.classPrefix=void 0,t.classPrefix="react-international-phone-",t.joinClasses=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return!!e})).join(" ").trim()},t.classNamesWithPrefix=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.joinClasses.apply(void 0,e).split(" ").map((function(e){return"".concat(t.classPrefix).concat(e)})).join(" ")},t.buildClassNames=function(e){var i=e.addPrefix,r=e.rawClassNames;return t.joinClasses.apply(void 0,n([t.classNamesWithPrefix.apply(void 0,i)],r,!1))}},62:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.applyMask=void 0,t.applyMask=function(e){var t=e.value,n=e.mask,i=e.maskSymbol,r=e.offset,a=void 0===r?0:r,o=e.trimNonMaskCharsLeftover,s=void 0!==o&&o;if(t.length<a)return t;for(var l=t.slice(0,a),u=t.slice(a),c=l,d=0,h=0,f=n.split("");h<f.length;h++){var p=f[h];if(d>=u.length){if(!s&&p!==i){c+=p;continue}break}p===i?(c+=u[d],d+=1):c+=p}return c}},239:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(62),t),r(n(939),t),r(n(222),t)},939:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeNonDigits=void 0,t.removeNonDigits=function(e){return e.replace(/\D/g,"")}},222:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToChild=void 0,t.scrollToChild=function(e,t){var n=e.style.display;"block"!==n&&(e.style.display="block");var i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=r.top-i.top,o=i.bottom-r.bottom;a>=0&&o>=0||(Math.abs(a)<Math.abs(o)?e.scrollTop+=a:e.scrollTop-=o),e.style.display=n}},298:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.buildCountryData=void 0,t.buildCountryData=function(e){for(var t=[e.name,e.regions,e.iso2,e.dialCode,e.format,e.priority,e.areaCodes],n=0;n<t.length;n+=1)if(0!==n){var i=t[n-1],r=t[n];if(void 0===i&&void 0!==r){var a=JSON.stringify(t,(function(e,t){return void 0===t?"__undefined":t})).replace(/"__undefined"/g,"undefined");throw new Error("[react-international-phone] invalid country values passed to buildCountryData. Check ".concat(i," in: ").concat(a))}}return t.filter((function(e){return void 0!==e}))}},891:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getCountry=void 0;var i=n(300);t.getCountry=function(e){var t=e.value,n=e.field,r=e.countries;if(["regions","priority"].includes(n))throw new Error(function(e){return'Field "'.concat(e,'" is not supported')}(n));var a=r.find((function(e){var r=(0,i.parseCountry)(e);return t===r[n]}));if(a)return(0,i.parseCountry)(a)}},4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.guessCountryByPartialNumber=void 0;var i=n(239),r=n(891),a=n(300);t.guessCountryByPartialNumber=function(e){var t,n=e.phone,o=e.countries,s=e.currentCountryIso2,l={country:void 0,fullDialCodeMatch:!1,areaCodeMatch:void 0};if(!n)return l;var u=(0,i.removeNonDigits)(n);if(!u)return l;for(var c=l,d=function(e){var t,n,i,r,a=e.country,o=e.fullDialCodeMatch,s=e.areaCodeMatch,l=a.dialCode===(null===(t=c.country)||void 0===t?void 0:t.dialCode),u=(null!==(n=a.priority)&&void 0!==n?n:0)<(null!==(r=null===(i=c.country)||void 0===i?void 0:i.priority)&&void 0!==r?r:0);l&&!u||(c={country:a,fullDialCodeMatch:o,areaCodeMatch:s})},h=0,f=o;h<f.length;h++){var p=f[h],v=(0,a.parseCountry)(p),m=v.dialCode,g=v.areaCodes;if(u.startsWith(m)){var L=!c.country||Number(m)>=Number(c.country.dialCode);if(g)for(var y=u.substring(m.length),b=0,x=g;b<x.length;b++){var w=x[b];if(y.startsWith(w))return{country:v,fullDialCodeMatch:!0,areaCodeMatch:!0}}!L&&m!==u&&c.fullDialCodeMatch||d({country:v,fullDialCodeMatch:!0,areaCodeMatch:g?!g:void 0})}c.fullDialCodeMatch||u.length<m.length&&m.startsWith(u)&&(!c.country||Number(m)<=Number(c.country.dialCode))&&d({country:v,fullDialCodeMatch:!1})}if(s){var _=(0,r.getCountry)({value:s,field:"iso2",countries:o});c&&_&&(null===(t=c.country)||void 0===t?void 0:t.dialCode)===_.dialCode&&c.country!==_&&c.fullDialCodeMatch&&!c.areaCodeMatch&&(c={country:_,areaCodeMatch:!(null==_?void 0:_.areaCodes)&&void 0,fullDialCodeMatch:!0})}return c}},88:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(298),t),r(n(891),t),r(n(4),t),r(n(300),t)},300:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCountry=void 0,t.parseCountry=function(e){return{name:e[0],regions:e[1],iso2:e[2],dialCode:e[3],format:e[4],priority:e[5],areaCodes:e[6]}}},332:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(239),t),r(n(88),t),r(n(165),t)},820:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addDialCode=void 0;var i=n(214);t.addDialCode=function(e){var t=e.phone,n=e.dialCode,r=e.prefix,a=void 0===r?"+":r,o=e.charAfterDialCode,s=void 0===o?" ":o;return"".concat(a).concat(n).concat(s).concat((0,i.removeDialCode)({phone:t,dialCode:n,charAfterDialCode:s,prefix:a}))}},380:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.formatPhone=void 0;var i=n(239);t.formatPhone=function(e,t){var n=!t.disableDialCodeAndPrefix&&t.forceDialCode,r=!t.disableDialCodeAndPrefix&&t.insertDialCodeOnEmpty,a=e,o=function(e){return t.trimNonDigitsEnd?e.trim():e};if(!a)return r&&!a.length||n?o("".concat(t.prefix).concat(t.dialCode).concat(t.charAfterDialCode)):o(a);if((a=(0,i.removeNonDigits)(a))===t.dialCode&&!t.disableDialCodeAndPrefix)return o("".concat(t.prefix).concat(t.dialCode).concat(t.charAfterDialCode));if(t.dialCode.startsWith(a)&&!t.disableDialCodeAndPrefix)return o(n?"".concat(t.prefix).concat(t.dialCode).concat(t.charAfterDialCode):"".concat(t.prefix).concat(a));if(!a.startsWith(t.dialCode)&&!t.disableDialCodeAndPrefix){if(n)return o("".concat(t.prefix).concat(t.dialCode).concat(t.charAfterDialCode));if(a.length<t.dialCode.length)return o("".concat(t.prefix).concat(a))}var s,l=(s=t.dialCode.length,t.disableDialCodeAndPrefix&&(s=0),{phoneLeftSide:a.slice(0,s),phoneRightSide:a.slice(s)}),u=l.phoneLeftSide,c=l.phoneRightSide;return u="".concat(t.prefix).concat(u).concat(t.charAfterDialCode),c=(0,i.applyMask)({value:c,mask:t.mask,maskSymbol:t.maskChar,trimNonMaskCharsLeftover:t.trimNonDigitsEnd}),t.disableDialCodeAndPrefix&&(u=""),o("".concat(u).concat(c))}},775:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCursorPosition=void 0;var n=function(e){return/\d/.test(e)};t.getCursorPosition=function(e){var t=e.phoneBeforeInput,i=e.phoneAfterInput,r=e.phoneAfterFormatted,a=e.cursorPositionAfterInput,o=e.leftOffset,s=void 0===o?0:o,l=e.deletion;if(a<s)return s;if(!t)return r.length;var u="backward"===l;if(0===a&&i.length>0&&r.length>0){if(u)return 0;for(var c=0;c<r.length;c+=1)if(n(r[c]))return c;return r.length}if(i.length<t.length&&1===i.length)return r.length;var d=null;for(c=a-1;c>=0;c-=1)if(n(i[c])){d=c;break}if(null===d)return 0!==a?a:r.length;var h=0;for(c=0;c<d;c+=1)n(i[c])&&(h+=1);u&&(h-=1);var f=0,p=0;for(c=0;c<r.length&&(f+=1,n(r[c])&&(p+=1),p!==h+1);c+=1);for(;!n(r[f])&&f<r.length;)f+=1;return u&&(f+=1),f}},165:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(820),t),r(n(380),t),r(n(775),t),r(n(214),t),r(n(684),t)},214:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeDialCode=void 0,t.removeDialCode=function(e){var t=e.phone,n=e.dialCode,i=e.prefix,r=void 0===i?"+":i,a=e.charAfterDialCode,o=void 0===a?" ":a;if(!t||!n)return t;var s=t;return s.startsWith(r)&&(s=s.replace(r,"")),s.startsWith(n)?((s=s.replace(n,"")).startsWith(o)&&(s=s.replace(o,"")),s):t}},684:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.validatePhone=void 0;var r=n(882),a=n(239),o=n(88);t.validatePhone=function(e,t){var n,s=i(i({},r.defaultConfig),t),l=s.countries,u=s.defaultMask,c=s.defaultMaskMinPhoneLength,d=void 0===c?10:c,h=s.prefix,f=s.charAfterDialCode,p=(null==t?void 0:t.country)?(0,o.getCountry)({value:t.country,field:"iso2",countries:l}):null,v=(0,o.guessCountryByPartialNumber)({phone:e,countries:l,currentCountryIso2:null==t?void 0:t.country}),m=(null===(n=v.country)||void 0===n?void 0:n.iso2)===(null==p?void 0:p.iso2),g=!p||m?v:{country:p,fullDialCodeMatch:!1,areaCodeMatch:!(null==p?void 0:p.areaCodes)&&void 0},L=g.country,y=g.fullDialCodeMatch,b=g.areaCodeMatch;if(!L)return{country:L,lengthMatch:!1,dialCodeMatch:y,areaCodeMatch:b,formatMatch:!1,isValid:!1};var x=L.format||u,w=!L.format,_=w?d-L.dialCode.length:x.length-x.replaceAll(r.MASK_CHAR,"").length,S=w?x.slice(0,_):x,k="".concat(h).concat(L.dialCode).concat(f).concat(S).split("").every((function(t,n){var i=e[n]===t,a=t===r.MASK_CHAR&&Number.isFinite(+e[n]);return i||a})),A=(0,a.removeNonDigits)(e),M=L.dialCode.length+_;return A.length<M?{country:L,lengthMatch:!1,dialCodeMatch:y,areaCodeMatch:b,formatMatch:k,isValid:!1}:{country:L,lengthMatch:!0,dialCodeMatch:y,areaCodeMatch:b,formatMatch:k,isValid:A.startsWith(L.dialCode)}}},156:function(e){e.exports=i}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.validatePhone=e.parseCountry=e.buildCountryData=e.usePhoneValidation=e.usePhoneInput=e.defaultCountries=e.PhoneInput=e.FlagEmoji=e.DialCodePreview=e.CountrySelectorDropdown=e.CountrySelector=void 0;var t=n(153);Object.defineProperty(e,"CountrySelector",{enumerable:!0,get:function(){return t.CountrySelector}});var i=n(60);Object.defineProperty(e,"CountrySelectorDropdown",{enumerable:!0,get:function(){return i.CountrySelectorDropdown}});var a=n(7);Object.defineProperty(e,"DialCodePreview",{enumerable:!0,get:function(){return a.DialCodePreview}});var o=n(425);Object.defineProperty(e,"FlagEmoji",{enumerable:!0,get:function(){return o.FlagEmoji}});var s=n(28);Object.defineProperty(e,"PhoneInput",{enumerable:!0,get:function(){return s.PhoneInput}});var l=n(946);Object.defineProperty(e,"defaultCountries",{enumerable:!0,get:function(){return l.defaultCountries}});var u=n(882);Object.defineProperty(e,"usePhoneInput",{enumerable:!0,get:function(){return u.usePhoneInput}});var c=n(393);Object.defineProperty(e,"usePhoneValidation",{enumerable:!0,get:function(){return c.usePhoneValidation}});var d=n(332);Object.defineProperty(e,"buildCountryData",{enumerable:!0,get:function(){return d.buildCountryData}}),Object.defineProperty(e,"parseCountry",{enumerable:!0,get:function(){return d.parseCountry}}),Object.defineProperty(e,"validatePhone",{enumerable:!0,get:function(){return d.validatePhone}})}(),r}())},374:function(e,t,n){"use strict";var i=n(791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,a={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function L(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},L.prototype=g.prototype;var b=y.prototype=new L;b.constructor=y,v(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===a?"."+C(l,0):a,x(o)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),E(o,t,r,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(M,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+C(s=e[u],u);l+=E(s,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=E(s=s.value,t,r,c=a+C(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var i=[],r=0;return E(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},I={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!S.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<r&&0>a(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[s]=n,i=s);else{if(!(u<r&&0>a(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,L="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function x(e){if(m=!1,b(e),!v)if(null!==i(u))v=!0,O(w);else{var t=i(c);null!==t&&I(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,L(A),A=-1),p=!0;var a=f;try{for(b(n),h=i(u);null!==h&&(!(h.expirationTime>n)||e&&!E());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===i(u)&&r(u),b(n)}else r(u);h=i(u)}if(null!==h)var l=!0;else{var d=i(c);null!==d&&I(x,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,k=null,A=-1,M=5,C=-1;function E(){return!(t.unstable_now()-C<M)}function T(){if(null!==k){var e=t.unstable_now();C=e;var n=!0;try{n=k(!0,e)}finally{n?_():(S=!1,k=null)}}else S=!1}if("function"===typeof y)_=function(){y(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=T,_=function(){D.postMessage(null)}}else _=function(){g(T,0)};function O(e){k=e,S||(S=!0,_())}function I(e,n){A=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(u)&&e===i(c)&&(m?(L(A),A=-1):m=!0,I(x,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},399:function(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},907:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:function(){return i}})},326:function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},861:function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return r}})},671:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return i}})},144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(142);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.Z)(r.key),r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},762:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(181);function r(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,i.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}},388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(120),r=n(814),a=n(963);function o(e){var t=(0,r.Z)();return function(){var n,r=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}},120:function(e,t,n){"use strict";function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n.d(t,{Z:function(){return i}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(611);function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,i.Z)(e,t)}},814:function(e,t,n){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return i}})},963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(2),r=n(326);function a(e,t){if(t&&("object"===(0,i.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.Z)(e)}},165:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2);function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,o=Object.create(r.prototype),s=new M(i||[]);return a(o,"_invoke",{value:_(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=d;var f={};function p(){}function v(){}function m(){}var g={};c(g,s,(function(){return this}));var L=Object.getPrototypeOf,y=L&&L(L(C([])));y&&y!==t&&n.call(y,s)&&(g=y);var b=m.prototype=p.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,s,l){var u=h(e[a],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,i.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function _(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=h(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=h(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}throw new TypeError((0,i.Z)(e)+" is not iterable")}return v.prototype=m,a(b,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(w.prototype),c(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new w(d(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),c(b,u,"Generator"),c(b,s,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;A(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},611:function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}n.d(t,{Z:function(){return i}})},142:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2);function r(e){var t=function(e,t){if("object"!==(0,i.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==(0,i.Z)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,i.Z)(t)?t:String(t)}},2:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:function(){return i}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(907);function r(e,t){if(e){if("string"===typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return i[e]}}));return o.default=function(){return i},n.d(a,o),a}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{227:"46a54b89",232:"5cca7e4a",237:"bd2ab11f",526:"cbd14f94",787:"07c6a3fc",872:"c40912cc"}[e]+".chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="deepbridge_digital_agency:";n.l=function(i,r,a,o){if(e[i])e[i].push(r);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=i),e[i]=[r];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/deepbridgedigital/",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,i){var r,a,o=i[0],s=i[1],l=i[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkdeepbridge_digital_agency=self.webpackChunkdeepbridge_digital_agency||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e=n(791),t=n.t(e,2);function i(e){if(Array.isArray(e))return e}var r=n(181);function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||(0,r.Z)(e,t)||a()}var s=n(907);function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){return function(e){if(Array.isArray(e))return(0,s.Z)(e)}(e)||l(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(671),d=n(144),h=n(136),f=n(388),p=n(120),v=n(611);var m=n(814);function g(e,t,n){return g=(0,m.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&(0,v.Z)(r,n.prototype),r},g.apply(null,arguments)}function L(e){var t="function"===typeof Map?new Map:void 0;return L=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,(0,p.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,v.Z)(n,e)},L(e)}function y(e){return i(e)||l(e)||(0,r.Z)(e)||a()}var b,x=n(762);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(b||(b={}));var _,S="popstate";function k(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function A(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(eT){}}}function M(e,t){return{usr:e.state,key:e.key,idx:t}}function C(e,t,n,i){return void 0===n&&(n=null),w({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?T(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function E(e){var t=e.pathname,n=void 0===t?"/":t,i=e.search,r=void 0===i?"":i,a=e.hash,o=void 0===a?"":a;return r&&"?"!==r&&(n+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function T(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function P(e,t,n,i){void 0===i&&(i={});var r=i,a=r.window,o=void 0===a?document.defaultView:a,s=r.v5Compat,l=void 0!==s&&s,u=o.history,c=b.Pop,d=null,h=f();function f(){return(u.state||{idx:null}).idx}function p(){c=b.Pop;var e=f(),t=null==e?null:e-h;h=e,d&&d({action:c,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:E(e);return k(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,u.replaceState(w({},u.state,{idx:h}),""));var m={get action(){return c},get location(){return e(o,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(S,p),d=e,function(){o.removeEventListener(S,p),d=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=b.Push;var i=C(m.location,e,t);n&&n(i,e);var r=M(i,h=f()+1),a=m.createHref(i);try{u.pushState(r,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(a)}l&&d&&d({action:c,location:m.location,delta:1})},replace:function(e,t){c=b.Replace;var i=C(m.location,e,t);n&&n(i,e);var r=M(i,h=f()),a=m.createHref(i);u.replaceState(r,"",a),l&&d&&d({action:c,location:m.location,delta:0})},go:function(e){return u.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function D(e,t,n){void 0===n&&(n="/");var i=W(("string"===typeof t?T(t):t).pathname||"/",n);if(null==i)return null;var r=O(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(r);for(var a=null,o=0;null==a&&o<r.length;++o)a=V(r[o],H(i));return a}function O(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");var r=function(e,r,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(k(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));var s=Q([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(k(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),O(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:Z(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var i,a=(0,x.Z)(I(e.path));try{for(a.s();!(i=a.n()).done;){var o=i.value;r(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else r(e,t)})),t}function I(e){var t=e.split("/");if(0===t.length)return[];var n=y(t),i=n[0],r=n.slice(1),a=i.endsWith("?"),o=i.replace(/\?$/,"");if(0===r.length)return a?[o,""]:[o];var s=I(r.join("/")),l=[];return l.push.apply(l,u(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&l.push.apply(l,u(s)),l.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var R=/^:\w+$/,B=3,N=2,z=1,F=10,j=-2,U=function(e){return"*"===e};function Z(e,t){var n=e.split("/"),i=n.length;return n.some(U)&&(i+=j),t&&(i+=N),n.filter((function(e){return!U(e)})).reduce((function(e,t){return e+(R.test(t)?B:""===t?z:F)}),i)}function V(e,t){for(var n=e.routesMeta,i={},r="/",a=[],o=0;o<n.length;++o){var s=n[o],l=o===n.length-1,u="/"===r?t:t.slice(r.length)||"/",c=G({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);var d=s.route;a.push({params:i,pathname:Q([r,c.pathname]),pathnameBase:K(Q([r,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(r=Q([r,c.pathnameBase]))}return a}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);A("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return i.push(t),"/([^\\/]+)"}));e.endsWith("*")?(i.push("*"),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");var a=new RegExp(r,t?void 0:"i");return[a,i]}(e.path,e.caseSensitive,e.end),i=o(n,2),r=i[0],a=i[1],s=t.match(r);if(!s)return null;var l=s[0],u=l.replace(/(.)\/+$/,"$1"),c=s.slice(1),d=a.reduce((function(e,t,n){if("*"===t){var i=c[n]||"";u=l.slice(0,l.length-i.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return A(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:d,pathname:l,pathnameBase:u,pattern:e}}function H(e){try{return decodeURI(e)}catch(t){return A(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function q(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Y(e,t,n,i){var r;void 0===i&&(i=!1),"string"===typeof e?r=T(e):(k(!(r=w({},e)).pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),k(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),k(!r.search||!r.search.includes("#"),q("#","search","hash",r)));var a,o=""===e||""===r.pathname,s=o?"/":r.pathname;if(i||null==s)a=n;else{var l=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),l-=1;r.pathname=u.join("/")}a=l>=0?t[l]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?T(e):e,i=n.pathname,r=n.search,a=void 0===r?"":r,o=n.hash,s=void 0===o?"":o,l=i?i.startsWith("/")?i:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(i,t):t;return{pathname:l,search:J(a),hash:$(s)}}(r,a),d=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var Q=function(e){return e.join("/").replace(/\/\/+/g,"/")},K=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},J=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},$=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ee=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(L(Error));function te(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ne=["post","put","patch","delete"],ie=(new Set(ne),["get"].concat(ne));new Set(ie),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},re.apply(this,arguments)}var ae=e.createContext(null);var oe=e.createContext(null);var se=e.createContext(null);var le=e.createContext(null);var ue=e.createContext(null);var ce=e.createContext({outlet:null,matches:[],isDataRoute:!1});var de=e.createContext(null);function he(){return null!=e.useContext(ue)}function fe(){return he()||k(!1),e.useContext(ue).location}function pe(t){e.useContext(le).static||e.useLayoutEffect(t)}function ve(){return e.useContext(ce).isDataRoute?function(){var t=ke(_e.UseNavigateStable).router,n=Me(Se.UseNavigateStable),i=e.useRef(!1);pe((function(){i.current=!0}));var r=e.useCallback((function(e,r){void 0===r&&(r={}),i.current&&("number"===typeof e?t.navigate(e):t.navigate(e,re({fromRouteId:n},r)))}),[t,n]);return r}():function(){he()||k(!1);var t=e.useContext(ae),n=e.useContext(le),i=n.basename,r=n.navigator,a=e.useContext(ce).matches,o=fe().pathname,s=JSON.stringify(X(a).map((function(e){return e.pathnameBase}))),l=e.useRef(!1);pe((function(){l.current=!0}));var u=e.useCallback((function(e,n){if(void 0===n&&(n={}),l.current)if("number"!==typeof e){var a=Y(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==i&&(a.pathname="/"===a.pathname?i:Q([i,a.pathname])),(n.replace?r.replace:r.push)(a,n.state,n)}else r.go(e)}),[i,r,s,o,t]);return u}()}function me(t,n){var i=(void 0===n?{}:n).relative,r=e.useContext(ce).matches,a=fe().pathname,o=JSON.stringify(X(r).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return Y(t,JSON.parse(o),a,"path"===i)}),[t,o,a,i])}function ge(t,n,i){he()||k(!1);var r,a=e.useContext(le).navigator,o=e.useContext(ce).matches,s=o[o.length-1],l=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,fe());if(n){var d,h="string"===typeof n?T(n):n;"/"===u||(null==(d=h.pathname)?void 0:d.startsWith(u))||k(!1),r=h}else r=c;var f=r.pathname||"/",p=D(t,{pathname:"/"===u?f:f.slice(u.length)||"/"});var v=we(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Q([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Q([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,i);return n&&v?e.createElement(ue.Provider,{value:{location:re({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:b.Pop}},v):v}function Le(){var t=function(){var t,n=e.useContext(de),i=Ae(Se.UseRouteError),r=Me(Se.UseRouteError);if(n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=te(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:a},i):null,null)}var ye=e.createElement(Le,null),be=function(t){(0,h.Z)(i,t);var n=(0,f.Z)(i);function i(e){var t;return(0,c.Z)(this,i),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,d.Z)(i,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(ce.Provider,{value:this.props.routeContext},e.createElement(de.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),i}(e.Component);function xe(t){var n=t.routeContext,i=t.match,r=t.children,a=e.useContext(ae);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(ce.Provider,{value:n},r)}function we(t,n,i){var r;if(void 0===n&&(n=[]),void 0===i&&(i=null),null==t){var a;if(null==(a=i)||!a.errors)return null;t=i.matches}var o=t,s=null==(r=i)?void 0:r.errors;if(null!=s){var l=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));l>=0||k(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((function(t,r,a){var l=r.route.id?null==s?void 0:s[r.route.id]:null,u=null;i&&(u=r.route.errorElement||ye);var c=n.concat(o.slice(0,a+1)),d=function(){var n;return n=l?u:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(xe,{match:r,routeContext:{outlet:t,matches:c,isDataRoute:null!=i},children:n})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?e.createElement(be,{location:i.location,revalidation:i.revalidation,component:u,error:l,children:d(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):d()}),null)}var _e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_e||{}),Se=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Se||{});function ke(t){var n=e.useContext(ae);return n||k(!1),n}function Ae(t){var n=e.useContext(oe);return n||k(!1),n}function Me(t){var n=function(t){var n=e.useContext(ce);return n||k(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||k(!1),i.route.id}t.startTransition;function Ce(e){k(!1)}function Ee(t){var n=t.basename,i=void 0===n?"/":n,r=t.children,a=void 0===r?null:r,o=t.location,s=t.navigationType,l=void 0===s?b.Pop:s,u=t.navigator,c=t.static,d=void 0!==c&&c;he()&&k(!1);var h=i.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:h,navigator:u,static:d}}),[h,u,d]);"string"===typeof o&&(o=T(o));var p=o,v=p.pathname,m=void 0===v?"/":v,g=p.search,L=void 0===g?"":g,y=p.hash,x=void 0===y?"":y,w=p.state,_=void 0===w?null:w,S=p.key,A=void 0===S?"default":S,M=e.useMemo((function(){var e=W(m,h);return null==e?null:{location:{pathname:e,search:L,hash:x,state:_,key:A},navigationType:l}}),[h,m,L,x,_,A,l]);return null==M?null:e.createElement(le.Provider,{value:f},e.createElement(ue.Provider,{children:a,value:M}))}function Te(e){var t=e.children,n=e.location;return ge(Oe(t),n)}var Pe=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Pe||{}),De=new Promise((function(){}));e.Component;function Oe(t,n){void 0===n&&(n=[]);var i=[];return e.Children.forEach(t,(function(t,r){if(e.isValidElement(t)){var a=[].concat(u(n),[r]);if(t.type!==e.Fragment){t.type!==Ce&&k(!1),t.props.index&&t.props.children&&k(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Oe(t.props.children,a)),i.push(o)}else i.push.apply(i,Oe(t.props.children,a))}})),i}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ie.apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Ne=t.startTransition;function ze(t){var n,i=t.basename,r=t.children,a=t.future,s=t.window,l=e.useRef();null==l.current&&(l.current=(void 0===(n={window:s,v5Compat:!0})&&(n={}),P((function(e,t){var n=e.location;return C("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:E(t)}),null,n)));var u=l.current,c=o(e.useState({action:u.action,location:u.location}),2),d=c[0],h=c[1],f=(a||{}).v7_startTransition,p=e.useCallback((function(e){f&&Ne?Ne((function(){return h(e)})):h(e)}),[h,f]);return e.useLayoutEffect((function(){return u.listen(p)}),[u,p]),e.createElement(Ee,{basename:i,children:r,location:d.location,navigationType:d.action,navigator:u})}var Fe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=e.forwardRef((function(t,n){var i,r=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,l=t.state,u=t.target,c=t.to,d=t.preventScrollReset,h=Re(t,Be),f=e.useContext(le).basename,p=!1;if("string"===typeof c&&je.test(c)&&(i=c,Fe))try{var v=new URL(window.location.href),m=c.startsWith("//")?new URL(v.protocol+c):new URL(c),g=W(m.pathname,f);m.origin===v.origin&&null!=g?c=g+m.search+m.hash:p=!0}catch(eT){}var L=function(t,n){var i=(void 0===n?{}:n).relative;he()||k(!1);var r=e.useContext(le),a=r.basename,o=r.navigator,s=me(t,{relative:i}),l=s.hash,u=s.pathname,c=s.search,d=u;return"/"!==a&&(d="/"===u?a:Q([a,u])),o.createHref({pathname:d,search:c,hash:l})}(c,{relative:a}),y=function(t,n){var i=void 0===n?{}:n,r=i.target,a=i.replace,o=i.state,s=i.preventScrollReset,l=i.relative,u=ve(),c=fe(),d=me(t,{relative:l});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();var n=void 0!==a?a:E(c)===E(d);u(t,{replace:n,state:o,preventScrollReset:s,relative:l})}}),[c,u,d,a,o,r,t,s,l])}(c,{replace:s,state:l,target:u,preventScrollReset:d,relative:a});return e.createElement("a",Ie({},h,{href:i||L,onClick:p||o?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:n,target:u}))}));var Ze,Ve;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Ze||(Ze={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ve||(Ve={}));var Ge=n(250);var He=n.p+"static/media/deepbridge_logo.fe3c6985accede61b97d04108fd77375.svg",We=n(184),qe=function(){return(0,We.jsx)("img",{src:He,alt:"Deep Bridge Digital"})},Xe=n(963),Ye=n(326),Qe=n(142);function Ke(e,t,n){return(t=(0,Qe.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},tt=function(){function e(t){(0,c.Z)(this,e);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(t,n)}return(0,d.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||et,this.options=t,this.debug=t.debug}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"===typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,$e($e({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}(),nt=new tt,it=function(){function e(){(0,c.Z)(this,e),this.observers={}}return(0,d.Z)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function rt(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function at(e){return null==e?"":""+e}function ot(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"===typeof e}for(var a="string"!==typeof t?[].concat(t):t.split(".");a.length>1;){if(r())return{};var o=i(a.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return r()?{}:{obj:e,k:i(a.shift())}}function st(e,t,n){var i=ot(e,t,Object);i.obj[i.k]=n}function lt(e,t){var n=ot(e,t),i=n.obj,r=n.k;if(i)return i[r]}function ut(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"===typeof e[i]||e[i]instanceof String||"string"===typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):ut(e[i],t[i],n):e[i]=t[i]);return e}function ct(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ht(e){return"string"===typeof e?e.replace(/[&<>"'\/]/g,(function(e){return dt[e]})):e}var ft=[" ",",","?","!",";"];function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),r=e,a=0;a<i.length;++a){if(!r)return;if("string"===typeof r[i[a]]&&a+1<i.length)return;if(void 0===r[i[a]]){for(var o=2,s=i.slice(a,a+o).join(n),l=r[s];void 0===l&&i.length>a+o;)o++,l=r[s=i.slice(a,a+o).join(n)];if(void 0===l)return;if(null===l)return null;if(t.endsWith(s)){if("string"===typeof l)return l;if(s&&"string"===typeof l[s])return l[s]}var u=i.slice(a+o).join(n);return u?pt(l,u,n):void 0}r=r[i[a]]}return r}}function vt(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}var mt=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(i=t.call(this)).data=e||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return(0,d.Z)(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!==typeof n&&(o=o.concat(n)),n&&"string"===typeof n&&(o=o.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(o=e.split("."));var s=lt(this.data,o);return s||!a||"string"!==typeof n?s:pt(this.data&&this.data[e]&&this.data[e][t],n,r)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(i=t,t=(o=e.split("."))[1]),this.addNamespaces(t),st(this.data,o,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!==typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var s=lt(this.data,o)||{};i?ut(s,n,r):s=$e($e({},s),n),st(this.data,o,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?$e($e({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(it),gt={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,i,r))})),t}},Lt={},yt=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=t.call(this),function(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,(0,Ye.Z)(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=nt.create("translator"),i}return(0,d.Z)(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS||[],a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!function(e,t,n){t=t||"",n=n||"";var i=ft.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),a=!r.test(e);if(!a){var o=e.indexOf(n);o>0&&!r.test(e.substring(0,o))&&(a=!0)}return a}(e,n,i);if(a&&!o){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:r};var l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),e=l.join(i)}return"string"===typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,i){var r=this;if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t=$e({},t)),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),l=s.key,u=s.namespaces,c=u[u.length-1],d=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(h){var f=t.nsSeparator||this.options.nsSeparator;return a?{res:"".concat(c).concat(f).concat(l),usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c}:"".concat(c).concat(f).concat(l)}return a?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c}:l}var p=this.resolve(e,t),v=p&&p.res,m=p&&p.usedKey||l,g=p&&p.exactUsedKey||l,L=Object.prototype.toString.apply(v),y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&v&&("string"!==typeof v&&"boolean"!==typeof v&&"number"!==typeof v)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(L)<0&&("string"!==typeof y||"[object Array]"!==L)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,v,$e($e({},t),{},{ns:u})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return a?(p.res=x,p):x}if(o){var w="[object Array]"===L,_=w?[]:{},S=w?g:m;for(var k in v)if(Object.prototype.hasOwnProperty.call(v,k)){var A="".concat(S).concat(o).concat(k);_[k]=this.translate(A,$e($e({},t),{joinArrays:!1,ns:u})),_[k]===A&&(_[k]=v[k])}v=_}}else if(b&&"string"===typeof y&&"[object Array]"===L)(v=v.join(y))&&(v=this.extendTranslation(v,e,t,i));else{var M=!1,C=!1,E=void 0!==t.count&&"string"!==typeof t.count,T=n.hasDefaultValue(t),P=E?this.pluralResolver.getSuffix(d,t.count,t):"",D=t.ordinal&&E?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",O=t["defaultValue".concat(P)]||t["defaultValue".concat(D)]||t.defaultValue;!this.isValidLookup(v)&&T&&(M=!0,v=O),this.isValidLookup(v)||(C=!0,v=l);var I=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:v,R=T&&O!==v&&this.options.updateMissing;if(C||M||R){if(this.logger.log(R?"updateKey":"missingKey",d,c,l,R?O:v),o){var B=this.resolve(l,$e($e({},t),{},{keySeparator:!1}));B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var N=[],z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&z&&z[0])for(var F=0;F<z.length;F++)N.push(z[F]);else"all"===this.options.saveMissingTo?N=this.languageUtils.toResolveHierarchy(t.lng||this.language):N.push(t.lng||this.language);var j=function(e,n,i){var a=T&&i!==v?i:I;r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,n,a,R,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,n,a,R,t),r.emit("missingKey",e,c,n,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?N.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){j([e],l+n,t["defaultValue".concat(n)]||O)}))})):j(N,l,O))}v=this.extendTranslation(v,e,t,p,i),C&&v===l&&this.options.appendNamespaceToMissingKey&&(v="".concat(c,":").concat(l)),(C||M)&&this.options.parseMissingKeyHandler&&(v="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(c,":").concat(l):l,M?v:void 0):this.options.parseMissingKeyHandler(v))}return a?(p.res=v,p):v}},{key:"extendTranslation",value:function(e,t,n,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,$e($e({},this.options.interpolation.defaultVariables),n),i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init($e($e({},n),{interpolation:$e($e({},this.options.interpolation),n.interpolation)}));var o,s="string"===typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var u=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=$e($e({},this.options.interpolation.defaultVariables),u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);o<(c&&c.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return r&&r[0]===i[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):a.translate.apply(a,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,h="string"===typeof d?[d]:d;return void 0!==e&&null!==e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=gt.handle(h,e,t,this.options&&this.options.postProcessPassResolved?$e({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,s),u=l.key;n=u;var c=l.namespaces;o.options.fallbackNS&&(c=c.concat(o.options.fallbackNS));var d=void 0!==s.count&&"string"!==typeof s.count,h=d&&!s.ordinal&&0===s.count&&o.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&("string"===typeof s.context||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);c.forEach((function(e){o.isValidLookup(t)||(a=e,!Lt["".concat(p[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(Lt["".concat(p[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!o.isValidLookup(t)){r=n;var a,l=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(l,u,n,e,s);else{var c;d&&(c=o.pluralResolver.getSuffix(n,s.count,s));var p="".concat(o.options.pluralSeparator,"zero"),v="".concat(o.options.pluralSeparator,"ordinal").concat(o.options.pluralSeparator);if(d&&(l.push(u+c),s.ordinal&&0===c.indexOf(v)&&l.push(u+c.replace(v,o.options.pluralSeparator)),h&&l.push(u+p)),f){var m="".concat(u).concat(o.options.contextSeparator).concat(s.context);l.push(m),d&&(l.push(m+c),s.ordinal&&0===c.indexOf(v)&&l.push(m+c.replace(v,o.options.pluralSeparator)),h&&l.push(m+p))}}for(;a=l.pop();)o.isValidLookup(t)||(i=a,t=o.getResource(n,e,a,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:a}}},{key:"isValidLookup",value:function(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),n}(it);function bt(e){return e.charAt(0).toUpperCase()+e.slice(1)}var xt=function(){function e(t){(0,c.Z)(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nt.create("languageUtils")}return(0,d.Z)(e,[{key:"getScriptPartFromCode",value:function(e){if(!(e=vt(e))||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!(e=vt(e))||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"===typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=bt(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=bt(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=bt(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){return e===i?e:e.indexOf("-")<0&&i.indexOf("-")<0?void 0:0===e.indexOf(i)?e:void 0}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),"string"===typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],a=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"===typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"===typeof e&&a(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&a(n.formatLanguageCode(e))})),r}}]),e}(),wt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_t={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},St=["v1","v2","v3"],kt=["v4"],At={zero:0,one:1,two:2,few:3,many:4,other:5};var Mt=function(){function e(t){(0,c.Z)(this,e);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=nt.create("pluralResolver"),this.options.compatibilityJSON&&!kt.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){var e={};return wt.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:_t[t.fc]}}))})),e}()}return(0,d.Z)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(vt(e),{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,t){return At[e]-At[t]})).map((function(e){return"".concat(t.options.prepend).concat(n.ordinal?"ordinal".concat(t.options.prepend):"").concat(e)})):i.numbers.map((function(i){return t.getSuffix(e,i,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var a=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?"_plural_".concat(r.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!St.includes(this.options.compatibilityJSON)}}]),e}();function Ct(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=function(e,t,n){var i=lt(e,n);return void 0!==i?i:lt(t,n)}(e,t,n);return!a&&r&&"string"===typeof n&&void 0===(a=pt(e,n,i))&&(a=pt(t,n,i)),a}var Et=function(){function e(){(0,c.Z)(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=nt.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,d.Z)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:ht,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ct(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ct(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ct(t.nestingPrefix):t.nestingPrefixEscaped||ct("$t("),this.nestingSuffix=t.nestingSuffix?ct(t.nestingSuffix):t.nestingSuffixEscaped||ct(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,a,o,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(s.formatSeparator)<0){var r=Ct(t,l,e,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(r,void 0,n,$e($e($e({},i),t),{},{interpolationkey:e})):r}var a=e.split(s.formatSeparator),o=a.shift().trim(),u=a.join(s.formatSeparator).trim();return s.format(Ct(t,l,o,s.options.keySeparator,s.options.ignoreJSONStructure),u,n,$e($e($e({},i),t),{},{interpolationkey:o}))};this.resetRegExp();var d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}].forEach((function(t){for(o=0;r=t.regex.exec(e);){var n=r[1].trim();if(void 0===(a=c(n)))if("function"===typeof d){var l=d(e,r,i);a="string"===typeof l?l:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))a="";else{if(h){a=r[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),a=""}else"string"===typeof a||s.useRawValueToEscape||(a=at(a));var u=t.safeValue(a);if(e=e.replace(r[0],u),h?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,++o>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r,a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),a="{".concat(i[1]);e=i[0];var o=(a=this.interpolate(a,r)).match(/'/g),s=a.match(/"/g);(o&&o.length%2===0&&!s||s.length%2!==0)&&(a=a.replace(/'/g,'"'));try{r=JSON.parse(a),t&&(r=$e($e({},t),r))}catch(eT){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),eT),"".concat(e).concat(n).concat(a)}return delete r.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){var l=[];(r=(r=$e({},o)).replace&&"string"!==typeof r.replace?r.replace:r).applyPostProcessor=!1,delete r.defaultValue;var u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((i=t(s.call(this,n[1].trim(),r),r))&&n[0]===e&&"string"!==typeof i)return i;"string"!==typeof i&&(i=at(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),u&&(i=l.reduce((function(e,t){return a.format(e,t,o.lng,$e($e({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();function Tt(e){var t={};return function(n,i,r){var a=i+JSON.stringify(r),o=t[a];return o||(o=e(vt(i),r),t[a]=o),o(n)}}var Pt=function(){function e(){(0,c.Z)(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=nt.create("formatter"),this.options=t,this.formats={number:Tt((function(e,t){var n=new Intl.NumberFormat(e,$e({},t));return function(e){return n.format(e)}})),currency:Tt((function(e,t){var n=new Intl.NumberFormat(e,$e($e({},t),{},{style:"currency"}));return function(e){return n.format(e)}})),datetime:Tt((function(e,t){var n=new Intl.DateTimeFormat(e,$e({},t));return function(e){return n.format(e)}})),relativetime:Tt((function(e,t){var n=new Intl.RelativeTimeFormat(e,$e({},t));return function(e){return n.format(e,t.range||"day")}})),list:Tt((function(e,t){var n=new Intl.ListFormat(e,$e({},t));return function(e){return n.format(e)}}))},this.init(t)}return(0,d.Z)(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=Tt(t)}},{key:"format",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.split(this.formatSeparator).reduce((function(e,t){var a=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(e){if(e){var t=y(e.split(":")),i=t[0],r=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[i.trim()]||(n[i.trim()]=r),"false"===r&&(n[i.trim()]=!1),"true"===r&&(n[i.trim()]=!0),isNaN(r)||(n[i.trim()]=parseInt(r,10))}}))}return{formatName:t,formatOptions:n}}(t),o=a.formatName,s=a.formatOptions;if(i.formats[o]){var l=e;try{var u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},c=u.locale||u.lng||r.locale||r.lng||n;l=i.formats[o](e,c,$e($e($e({},s),r),u))}catch(d){i.logger.warn(d)}return l}return i.logger.warn("there was no format function for ".concat(o)),e}),e);return a}}]),e}();var Dt=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n);var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(a=t.call(this)).backend=e,a.store=i,a.services=r,a.languageUtils=r.languageUtils,a.options=o,a.logger=nt.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,o.backend,o),a}return(0,d.Z)(n,[{key:"queueLoad",value:function(e,t,n,i){var r=this,a={},o={},s={},l={};return e.forEach((function(e){var i=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[s]=2:r.state[s]<0||(1===r.state[s]?void 0===o[s]&&(o[s]=!0):(r.state[s]=1,i=!1,void 0===o[s]&&(o[s]=!0),void 0===a[s]&&(a[s]=!0),void 0===l[t]&&(l[t]=!0)))})),i||(s[e]=!0)})),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],a=i[1];t&&this.emit("failedLoading",r,a,t),n&&this.store.addResourceBundle(r,a,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){!function(e,t,n,i){var r=ot(e,t,Object),a=r.obj,o=r.k;a[o]=a[o]||[],i&&(a[o]=a[o].concat(n)),i||a[o].push(n)}(n.loaded,[r],a),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:a,callback:o});else{this.readingCalls++;var s=function(s,l){if(i.readingCalls--,i.waitingReads.length>0){var u=i.waitingReads.shift();i.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}s&&l&&r<i.maxRetries?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*a,o)}),a):o(s,l)},l=this.backend[n].bind(this.backend);if(2!==l.length)return l(e,t,s);try{var u=l(e,t);u&&"function"===typeof u.then?u.then((function(e){return s(null,e)})).catch(s):s(null,u)}catch(c){s(c)}}}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"===typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"===typeof t&&(t=[t]);var a=this.queueLoad(e,t,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(function(i,o){i&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(r," failed"),i),!i&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(r),o),t.loaded(e,i,o)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){var s=$e($e({},a),{},{isUpdate:r}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var u;(u=5===l.length?l(e,t,n,i,s):l(e,t,n,i))&&"function"===typeof u.then?u.then((function(e){return o(null,e)})).catch(o):o(null,u)}catch(c){o(c)}else l(e,t,n,i,o,s)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}}]),n}(it);function Ot(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===typeof e[1]&&(t=e[1]),"string"===typeof e[1]&&(t.defaultValue=e[1]),"string"===typeof e[2]&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function It(e){return"string"===typeof e.ns&&(e.ns=[e.ns]),"string"===typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"===typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Rt(){}var Bt=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,c.Z)(this,n);var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if((e=t.call(this)).options=It(r),e.services={},e.logger=nt,e.modules={external:[]},i=(0,Ye.Z)(e),Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach((function(e){"function"===typeof i[e]&&(i[e]=i[e].bind(i))})),a&&!e.isInitialized&&!r.isClone){if(!e.options.initImmediate)return e.init(r,a),(0,Xe.Z)(e,(0,Ye.Z)(e));setTimeout((function(){e.init(r,a)}),0)}return e}return(0,d.Z)(n,[{key:"init",value:function(){var e=this,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;"function"===typeof n&&(i=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&("string"===typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var r=Ot();function a(e){return e?"function"===typeof e?new e:e:null}if(this.options=$e($e($e({},r),this.options),It(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=$e($e({},r.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var o;this.modules.logger?nt.init(a(this.modules.logger),this.options):nt.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!==typeof Intl&&(o=Pt);var s=new xt(this.options);this.store=new mt(this.options.resources,this.options);var l=this.services;l.logger=nt,l.resourceStore=this.store,l.languageUtils=s,l.pluralResolver=new Mt(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(l.formatter=a(o),l.formatter.init(l,this.options),this.options.interpolation.format=l.formatter.format.bind(l.formatter)),l.interpolator=new Et(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new Dt(a(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.languageDetector&&(l.languageDetector=a(this.modules.languageDetector),l.languageDetector.init&&l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=a(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new yt(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,i||(i=Rt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&"dev"!==u[0]&&(this.options.lng=u[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments),t}}));var c=rt(),d=function(){var t=function(t,n){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(n),i(t,n)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt,i="string"===typeof e?e:this.language;if("function"===typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){r.indexOf(e)<0&&r.push(e)}))};if(i)a(i);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return a(e)}));this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(r,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)}))}else n(null)}},{key:"reloadResources",value:function(e,t,n){var i=rt();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Rt),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&gt.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this,i=this;this.isLanguageChangingTo=e;var r=rt();this.emit("languageChanging",e);var a=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"===typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||a(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(a(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return i.t.apply(i,arguments)})),t&&t(e,(function(){return i.t.apply(i,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var i=this,r=function e(t,r){var a;if("object"!==typeof r){for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];a=i.options.overloadTranslationOptionHandler([t,r].concat(s))}else a=$e({},r);a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,a.keyPrefix=a.keyPrefix||n||e.keyPrefix;var u,c=i.options.keySeparator||".";return u=a.keyPrefix&&Array.isArray(t)?t.map((function(e){return"".concat(a.keyPrefix).concat(c).concat(e)})):a.keyPrefix?"".concat(a.keyPrefix).concat(c).concat(t):t,i.t(u,a)};return"string"===typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=n.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var o=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!!this.hasResourceBundle(i,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(i,e)||r&&!o(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=rt();return this.options.ns?("string"===typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=rt();"string"===typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new xt(Ot());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt,r=t.forkResourceStore;r&&delete t.forkResourceStore;var a=$e($e($e({},this.options),t),{isClone:!0}),o=new n(a);void 0===t.debug&&void 0===t.prefix||(o.logger=o.logger.clone(t));return["store","services","language"].forEach((function(t){o[t]=e[t]})),o.services=$e({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new mt(this.store.data,a),o.services.resourceStore=o.store),o.translator=new yt(o.services,a),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(a,i),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}],[{key:"createInstance",value:function(){return new n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}}]),n}(it),Nt=Bt.createInstance();Nt.createInstance=Bt.createInstance;Nt.createInstance,Nt.dir,Nt.init,Nt.loadResources,Nt.reloadResources,Nt.use,Nt.changeLanguage,Nt.getFixedT,Nt.t,Nt.exists,Nt.setDefaultNamespace,Nt.hasLoadedNamespace,Nt.loadNamespaces,Nt.loadLanguages,n(399);Object.create(null);function zt(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"string"===typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Ft={};function jt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&Ft[t[0]]||("string"===typeof t[0]&&(Ft[t[0]]=new Date),zt.apply(void 0,t))}var Ut=function(e,t){return function(){if(e.isInitialized)t();else{e.on("initialized",(function n(){setTimeout((function(){e.off("initialized",n)}),0),t()}))}}};function Zt(e,t,n){e.loadNamespaces(t,Ut(e,n))}function Vt(e,t,n,i){"string"===typeof n&&(n=[n]),n.forEach((function(t){e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,Ut(e,i))}var Gt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ht={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Wt=function(e){return Ht[e]},qt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(Gt,Wt)}};var Xt;var Yt={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qt=$e($e({},qt),e)}(e.options.react),function(e){Xt=e}(e)}},Qt=(0,e.createContext)(),Kt=function(){function e(){(0,c.Z)(this,e),this.usedNamespaces={}}return(0,d.Z)(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function Jt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.i18n,r=(0,e.useContext)(Qt)||{},a=r.i18n,s=r.defaultNS,l=i||a||Xt;if(l&&!l.reportNamespaces&&(l.reportNamespaces=new Kt),!l){jt("You will need to pass in an i18next instance by using initReactI18next");var u=function(e,t){return"string"===typeof t?t:t&&"object"===typeof t&&"string"===typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e},c=[u,{},!1];return c.t=u,c.i18n={},c.ready=!1,c}l.options.react&&void 0!==l.options.react.wait&&jt("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var d=$e($e($e({},qt),l.options.react),n),h=d.useSuspense,f=d.keyPrefix,p=t||s||l.options&&l.options.defaultNS;p="string"===typeof p?[p]:p||["translation"],l.reportNamespaces.addUsedNamespaces&&l.reportNamespaces.addUsedNamespaces(p);var v=(l.isInitialized||l.initializedStoreOnce)&&p.every((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:function(t,i){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))return!1}}):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.languages[0],r=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===i.toLowerCase())return!0;var o=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(i,e)||!(t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages))||!(!o(i,e)||r&&!o(a,e)))}(e,t,n):(jt("i18n.languages were undefined or empty",t.languages),!0)}(e,l,d)}));function m(){return l.getFixedT(n.lng||null,"fallback"===d.nsMode?p:p[0],f)}var g=o((0,e.useState)(m),2),L=g[0],y=g[1],b=p.join();n.lng&&(b="".concat(n.lng).concat(b));var x=function(t,n){var i=(0,e.useRef)();return(0,e.useEffect)((function(){i.current=n?i.current:t}),[t,n]),i.current}(b),w=(0,e.useRef)(!0);(0,e.useEffect)((function(){var e=d.bindI18n,t=d.bindI18nStore;function i(){w.current&&y(m)}return w.current=!0,v||h||(n.lng?Vt(l,n.lng,p,(function(){w.current&&y(m)})):Zt(l,p,(function(){w.current&&y(m)}))),v&&x&&x!==b&&w.current&&y(m),e&&l&&l.on(e,i),t&&l&&l.store.on(t,i),function(){w.current=!1,e&&l&&e.split(" ").forEach((function(e){return l.off(e,i)})),t&&l&&t.split(" ").forEach((function(e){return l.store.off(e,i)}))}}),[l,b]);var _=(0,e.useRef)(!0);(0,e.useEffect)((function(){w.current&&!_.current&&y(m),_.current=!1}),[l,f]);var S=[L,l,v];if(S.t=L,S.i18n=l,S.ready=v,v)return S;if(!v&&!h)return S;throw new Promise((function(e){n.lng?Vt(l,n.lng,p,(function(){return e()})):Zt(l,p,(function(){return e()}))}))}var $t={en:{translation:JSON.parse('{"What we can help":"What we can help","We\'ve worked with":"We\'ve worked with","Who we can help":"Who we can help","Who we are":"Who we are","Let\'s talk":"Let\'s talk","hero":{"Everything is":"Everything is","Relative":"Relative.","Except for what is":"Except for what is","Absolute":"Absolute.","Our mission is to connect humans on a deep level.":"Our mission is to connect humans on a deep level."},"firstSection":{"Beyond the digital":"Beyond the digital","Human connection":"Human connection","description":"Our range of services includes everything from website design and development, to SEO and content marketing, to social media management and advertising. We\'re always exploring new technologies and platforms to ensure that we\'re delivering the most effective solutions for our clients.","Analytics and Reporting":{"title":"Analytics and Reporting","description":"We provide detailed analytics and reporting that help businesses track their digital performance and make data-driven decisions. Our reporting services include website analytics, social media analytics, PPC analytics, and more. These are just a few of the services that our digital agency provides. We\'re always exploring new technologies and strategies to ensure that we\'re delivering the most innovative and effective solutions for our clients."},"E-commerce Solutions":{"title":"E-commerce Solutions","description":"We offer comprehensive e-commerce solutions that help businesses build and manage their online stores. Our e-commerce services include website design and development, payment gateway integration, inventory management, and more..."},"Email Marketing":{"title":"Email Marketing","description":"We help businesses build and manage their email lists and create and send effective email campaigns that drive engagement and conversions."},"Pay-Per-Click Advertising (PPC)":{"title":"Pay-Per-Click Advertising (PPC)","description":"We offer PPC advertising services that help businesses reach their target audience through targeted ads on search engines and social media platforms. Our PPC experts are skilled at creating and optimizing campaigns that drive high-quality traffic and leads."},"Content Marketing":{"title":"Content Marketing","description":"We create and distribute high-quality content that helps businesses attract and engage their target audience. Our content marketing services include content strategy development, content creation, distribution, and promotion."},"Search Engine Optimization (SEO)":{"title":"Search Engine Optimization (SEO)","description":"We provide comprehensive SEO services that help businesses improve their online visibility and rankings on search engines like Google. Our approach to SEO is focused on creating high-quality, engaging content that resonates with both search engines and human audiences."},"Website Design and Development":{"title":"Website Design and Development","description":"We offer custom website design and development services that are tailored to meet the unique needs and goals of our clients. Our team of designers and developers are experts in creating beautiful, functional, and user-friendly websites that help businesses stand out online."},"Marketing & Communication Strategy":{"title":"Marketing & Communication Strategy","description":"Understand your target audience and create a holistic strategy to reach it and create a special bond."}},"thirdSection":{"We live in exciting times":"We live in exciting times: ","the whole world is meeting daily in a few platforms and spaces.":"the whole world is meeting daily in a few platforms and spaces.","description1":"Whether you\'re a small startup or a large corporation, we\'re here to help you succeed in the digital landscape. Contact us today to learn more about how we can help take your business to the next level!","description2":"We believe that people are moved by what really matters to them and that those values are common to everyone. We can help you with our experience to connect and show the value of your proposal, showing potential partners and customers why you believe in what you do and why it can help them too. Whether it is a product or a service, by helping you look at the world through their eyes/perspective you will be able to show how what you offer can help.","description3":"Finally, we are here to help you understand how the spaces and platforms where you will meet your customers work. The codes matter. You will be heard and understood."},"fourthSection":{"There was no such thing":"There was no such thing","as a Deep Bridge":"as a Deep Bridge","description1":"We understand that every business is unique, and that\'s why we take a customized approach to every project we work on. Whether you need a complete digital overhaul or just some fine-tuning, we\'ll work closely with you to create a tailored solution that meets your specific needs and goals."},"footer":{"Contact us Desc":"Contact us today to learn more about how we can help take your business to the next level!","Full Name":"Full Name","Phone Number":"Phone Number","Email":"Email","Subject":{"Subject":"Subject","Analytics and Reporting":"Analytics and Reporting","E-commerce Solutions":"E-commerce Solutions","Email Marketing":"Email Marketing","Pay-Per-Click Advertising (PPC)":"Pay-Per-Click Advertising (PPC)","Content Marketing":"Content Marketing","Search Engine Optimization (SEO)":"Search Engine Optimization (SEO)","Website Design and Development":"Website Design and Development","Marketing & Communication Strategy":"Marketing & Communication Strategy"},"Details":"Details","Policy":"I agree to receive communications from Deep Bridge, and I understand Deep Bridge will process my personal information in accordance with Deep Bridge\'s","Submit":"Submit"}}')},it:{translation:JSON.parse('{"What we can help":"Cosa possiamo aiutarvi","We\'ve worked with":"Colleborazione","Who we can help":"Chi possiamo aiutare","Who we are":"Chi siamo","Let\'s talk":"Parliamo","hero":{"Everything is":"Tutto \xe8","Relative":" relativo. ","Except for what is":"Tranne ci\xf2 che \xe8 ","Absolute":"Assoluto.","Our mission is to connect humans on a deep level.":"La nostra missione \xe8 connettere gli esseri umani a un livello profondo."},"firstSection":{"Beyond the digital":"Oltre il digitale","Human connection":"Connessione umana","description":"La nostra gamma di servizi comprende tutto, dalla progettazione e sviluppo di siti Web, al SEO e al content marketing, alla gestione e pubblicit\xe0 dei social media. Esploriamo sempre nuove tecnologie e piattaforme per assicurarci di fornire le soluzioni pi\xf9 efficaci per i nostri clienti.","Analytics and Reporting":{"title":"Analisi e Reporting","description":"Forniamo dettagliate analisi e report che aiutano le aziende a monitorare le loro performance digitali e a prendere decisioni basate sui dati. I nostri servizi di reportistica includono analisi del sito web, analisi dei social media, analisi PPC e altro ancora. Questi sono solo alcuni dei servizi che la nostra agenzia digitale offre. Siamo sempre alla ricerca di nuove tecnologie e strategie per garantire di fornire soluzioni innovative ed efficaci per i nostri clienti."},"E-commerce Solutions":{"title":"Soluzioni per l\'E-commerce","description":"Offriamo soluzioni complete per l\'e-commerce che aiutano le aziende a costruire e gestire i loro negozi online. I nostri servizi per l\'e-commerce includono progettazione e sviluppo del sito web, integrazione del gateway di pagamento, gestione dell\'inventario e altro ancora..."},"Email Marketing":{"title":"Marketing via email","description":"Aiutiamo le aziende a costruire e gestire le loro liste email e a creare e inviare campagne email efficaci che stimolano l\'interazione e le conversioni."},"Pay-Per-Click Advertising (PPC)":{"title":"Pubblicit\xe0 a Pagamento per Clic (PPC)","description":"Offriamo servizi di pubblicit\xe0 PPC che aiutano le aziende a raggiungere il loro pubblico target attraverso annunci mirati su motori di ricerca e piattaforme di social media. I nostri esperti in PPC sono abili nella creazione e ottimizzazione di campagne che generano traffico e potenziali clienti di alta qualit\xe0."},"Content Marketing":{"title":"Marketing dei contenuti","description":"Creiamo e distribuiamo contenuti di alta qualit\xe0 che aiutano le aziende a attrarre e coinvolgere il proprio pubblico target. I nostri servizi di content marketing includono lo sviluppo di strategie per i contenuti, la creazione di contenuti, la distribuzione e la promozione."},"Search Engine Optimization (SEO)":{"title":"Ottimizzazione per i Motori di Ricerca (SEO)","description":"Offriamo servizi completi di ottimizzazione per i motori di ricerca (SEO) che aiutano le aziende a migliorare la loro visibilit\xe0 online e il posizionamento sui motori di ricerca come Google. Il nostro approccio all\'ottimizzazione per i motori di ricerca si concentra sulla creazione di contenuti di alta qualit\xe0 e coinvolgenti che risuonano sia con i motori di ricerca che con il pubblico umano."},"Website Design and Development":{"title":"Progettazione e Sviluppo di Siti Web","description":"Offriamo servizi personalizzati di progettazione e sviluppo di siti web, appositamente pensati per soddisfare le esigenze e gli obiettivi unici dei nostri clienti. Il nostro team di designer e sviluppatori \xe8 composto da esperti nella creazione di siti web belli, funzionali e user-friendly che aiutano le aziende a distinguersi online."},"Marketing & Communication Strategy":{"title":"Strategia di Marketing e Comunicazione","description":"Comprendere il proprio pubblico target e creare una strategia olistica per raggiungerlo e instaurare un legame speciale."}},"thirdSection":{"We live in exciting times":"Viviamo in tempi entusiasmanti: ","the whole world is meeting daily in a few platforms and spaces.":"il mondo intero si incontra quotidianamente in poche piattaforme e spazi.","description1":"Che tu sia una piccola startup o una grande azienda, siamo qui per aiutarti a avere successo nel panorama digitale. Contattaci oggi stesso per saperne di pi\xf9 su come possiamo contribuire a portare la tua azienda al livello successivo!","description2":"Crediamo che le persone siano mosse da ci\xf2 che conta davvero per loro e che questi valori siano comuni a tutti. Possiamo aiutarti con la nostra esperienza a creare un legame e a mostrare il valore della tua proposta, evidenziando a potenziali partner e clienti il motivo per cui credi in ci\xf2 che fai e perch\xe9 pu\xf2 aiutarli. Che si tratti di un prodotto o di un servizio, aiutandoti a guardare il mondo attraverso i loro occhi/perspettiva, sarai in grado di dimostrare come ci\xf2 che offri pu\xf2 essere utile.","description3":"Infine, siamo qui per aiutarti a comprendere come funzionano gli spazi e le piattaforme in cui incontrerai i tuoi clienti. I codici sono importanti. Sarai ascoltato e compreso."},"fourthSection":{"There was no such thing":"Non c\'era nulla del genere","as a Deep Bridge":"come Deep Bridge","description1":"Comprendiamo che ogni azienda \xe8 unica, ed \xe8 per questo che adottiamo un approccio personalizzato per ogni progetto su cui lavoriamo. Che tu abbia bisogno di una ristrutturazione digitale completa o semplicemente di qualche affinamento, collaboreremo attentamente con te per creare una soluzione su misura che soddisfi le tue esigenze e obiettivi specifici."},"footer":{"Contact us Desc":"Contattaci oggi stesso per saperne di pi\xf9 su come possiamo aiutarti a portare la tua azienda al livello successivo!","Full Name":"Nome e Cognome","Phone Number":"Telefono","Email":"Email","Subject":{"Subject":"Oggetto","Analytics and Reporting":"Analisi e Report","E-commerce Solutions":"Soluzioni E-commerce","Email Marketing":"Marketing via Email","Pay-Per-Click Advertising (PPC)":"Pubblicit\xe0 a Pagamento per Clic (PPC)","Content Marketing":"Marketing dei Contenuti","Search Engine Optimization (SEO)":"Ottimizzazione per i Motori di Ricerca (SEO)","Website Design and Development":"Progettazione e Sviluppo di Siti Web","Marketing & Communication Strategy":"Strategia di Marketing e Comunicazione"},"Details":"Dettagli","Policy":"I agree to receive communications from Deep Bridge, and I understand Deep Bridge will process my personal information in accordance with Deep Bridge\'s","Submit":"Invia"}}')}};Nt.use(Yt).init({resources:$t,lng:"en",debug:!0,fallbackLng:"ita",interpolation:{escapeValue:!1},ns:"translation",defaultNS:"translation"});var en=Nt,tn=function(){var t=o((0,e.useState)(en.language),2),n=t[0],i=t[1];return(0,We.jsxs)("select",{className:"LanguageSelector SubFont",defaultValue:n,onChange:function(e){e.preventDefault(),en.changeLanguage(e.target.value),i(e.target.value)},children:[(0,We.jsx)("option",{value:"en",children:"EN"}),(0,We.jsx)("option",{value:"it",children:"ITA"})]})},nn=function(){var e=Jt().t;return(0,We.jsx)("header",{children:(0,We.jsxs)("nav",{className:"HeaderNav",children:[(0,We.jsx)("a",{href:"/",className:"DeepBridgeLogoStyle",children:(0,We.jsx)(qe,{})}),(0,We.jsxs)("ul",{children:[(0,We.jsx)("li",{children:(0,We.jsx)("a",{href:"#what_we_can_help",className:"NavLink SubFont",children:e("What we can help")})}),(0,We.jsx)("li",{children:(0,We.jsx)("a",{href:"#weve_worked_with",className:"NavLink SubFont",children:e("We've worked with")})}),(0,We.jsx)("li",{children:(0,We.jsx)("a",{href:"#who_we_can_help",className:"NavLink SubFont",children:e("Who we can help")})}),(0,We.jsx)("li",{children:(0,We.jsx)("a",{href:"#who_we_are",className:"NavLink SubFont",children:e("Who we are")})}),(0,We.jsx)("li",{children:(0,We.jsx)("a",{href:"#lets_talk",className:"NavLink SubFont",children:e("Let's talk")})})]}),(0,We.jsx)(tn,{})]})})};var rn=n.p+"static/media/sidebarbutton.3a0556da044ae52b6c17a51fcbae26d2.svg",an=function(){return(0,We.jsx)("div",{className:"SideBar",children:(0,We.jsx)("a",{href:"#lets_talk",className:"AnchorSide",children:(0,We.jsx)("img",{src:rn,alt:"DeepBridgeDigital"})})})};var on=n.p+"static/media/floatinglogo.17c4bf0e19e4c9369f4ffc5a9fa17263.svg",sn=(0,e.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),ln=(0,e.createContext)({}),un=(0,e.createContext)(null),cn="undefined"!==typeof document,dn=cn?e.useLayoutEffect:e.useEffect,hn=(0,e.createContext)({strict:!1});function fn(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function pn(e){return"string"===typeof e||Array.isArray(e)}function vn(e){return"object"===typeof e&&"function"===typeof e.start}var mn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gn=["initial"].concat(mn);function Ln(e){return vn(e.animate)||gn.some((function(t){return pn(e[t])}))}function yn(e){return Boolean(Ln(e)||e.variants)}function bn(t){var n=function(e,t){if(Ln(e)){var n=e.initial,i=e.animate;return{initial:!1===n||pn(n)?n:void 0,animate:pn(i)?i:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(ln)),i=n.initial,r=n.animate;return(0,e.useMemo)((function(){return{initial:i,animate:r}}),[xn(i),xn(r)])}function xn(e){return Array.isArray(e)?e.join(" "):e}var wn={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_n={},Sn=function(e){_n[e]={isEnabled:function(t){return wn[e].some((function(e){return!!t[e]}))}}};for(var kn in wn)Sn(kn);var An=(0,e.createContext)({}),Mn=(0,e.createContext)({}),Cn=Symbol.for("motionComponentSymbol");function En(t){var n=t.preloadedFeatures,i=t.createVisualElement,r=t.useRender,a=t.useVisualState,o=t.Component;n&&function(e){for(var t in e)_n[t]=$e($e({},_n[t]),e[t])}(n);var s=(0,e.forwardRef)((function(t,s){var l,u=$e($e($e({},(0,e.useContext)(sn)),t),{},{layoutId:Tn(t)}),c=u.isStatic,d=bn(t),h=a(t,c);if(!c&&cn){d.visualElement=function(t,n,i,r){var a=(0,e.useContext)(ln).visualElement,o=(0,e.useContext)(hn),s=(0,e.useContext)(un),l=(0,e.useContext)(sn).reducedMotion,u=(0,e.useRef)();r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:n,parent:a,props:i,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));var c=u.current;return(0,e.useInsertionEffect)((function(){c&&c.update(i,s)})),dn((function(){c&&c.render()})),(0,e.useEffect)((function(){c&&c.updateFeatures()})),(window.HandoffAppearAnimations?dn:e.useEffect)((function(){c&&c.animationState&&c.animationState.animateChanges()})),c}(o,h,u,i);var f=(0,e.useContext)(Mn),p=(0,e.useContext)(hn).strict;d.visualElement&&(l=d.visualElement.loadFeatures(u,p,n,f))}return e.createElement(ln.Provider,{value:d},l&&d.visualElement?e.createElement(l,$e({visualElement:d.visualElement},u)):null,r(o,t,function(t,n,i){return(0,e.useCallback)((function(e){e&&t.mount&&t.mount(e),n&&(e?n.mount(e):n.unmount()),i&&("function"===typeof i?i(e):fn(i)&&(i.current=e))}),[n])}(h,d.visualElement,s),h,c,d.visualElement))}));return s[Cn]=o,s}function Tn(t){var n=t.layoutId,i=(0,e.useContext)(An).id;return i&&void 0!==n?i+"-"+n:n}function Pn(e){function t(t){return En(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,i){return n.has(i)||n.set(i,t(i)),n.get(i)}})}var Dn=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function On(e){return"string"===typeof e&&!e.includes("-")&&!!(Dn.indexOf(e)>-1||/[A-Z]/.test(e))}var In={};var Rn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bn=new Set(Rn);function Nn(e,t){var n=t.layout,i=t.layoutId;return Bn.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!In[e]||"opacity"===e)}var zn=function(e){return Boolean(e&&e.getVelocity)},Fn={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jn=Rn.length;var Un=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},Zn=Un("--"),Vn=Un("var(--"),Gn=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Hn=function(e,t,n){return Math.min(Math.max(n,e),t)},Wn={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},qn=$e($e({},Wn),{},{transform:function(e){return Hn(0,1,e)}}),Xn=$e($e({},Wn),{},{default:1}),Yn=function(e){return Math.round(1e5*e)/1e5},Qn=/(-)?([\d]*\.?[\d])+/g,Kn=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Jn=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $n(e){return"string"===typeof e}var ei=function(e){return{test:function(t){return $n(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},ti=ei("deg"),ni=ei("%"),ii=ei("px"),ri=ei("vh"),ai=ei("vw"),oi=$e($e({},ni),{},{parse:function(e){return ni.parse(e)/100},transform:function(e){return ni.transform(100*e)}}),si=$e($e({},Wn),{},{transform:Math.round}),li={borderWidth:ii,borderTopWidth:ii,borderRightWidth:ii,borderBottomWidth:ii,borderLeftWidth:ii,borderRadius:ii,radius:ii,borderTopLeftRadius:ii,borderTopRightRadius:ii,borderBottomRightRadius:ii,borderBottomLeftRadius:ii,width:ii,maxWidth:ii,height:ii,maxHeight:ii,size:ii,top:ii,right:ii,bottom:ii,left:ii,padding:ii,paddingTop:ii,paddingRight:ii,paddingBottom:ii,paddingLeft:ii,margin:ii,marginTop:ii,marginRight:ii,marginBottom:ii,marginLeft:ii,rotate:ti,rotateX:ti,rotateY:ti,rotateZ:ti,scale:Xn,scaleX:Xn,scaleY:Xn,scaleZ:Xn,skew:ti,skewX:ti,skewY:ti,distance:ii,translateX:ii,translateY:ii,translateZ:ii,x:ii,y:ii,z:ii,perspective:ii,transformPerspective:ii,opacity:qn,originX:oi,originY:oi,originZ:ii,zIndex:si,fillOpacity:qn,strokeOpacity:qn,numOctaves:si};function ui(e,t,n,i){var r=e.style,a=e.vars,o=e.transform,s=e.transformOrigin,l=!1,u=!1,c=!0;for(var d in t){var h=t[d];if(Zn(d))a[d]=h;else{var f=li[d],p=Gn(h,f);if(Bn.has(d)){if(l=!0,o[d]=p,!c)continue;h!==(f.default||0)&&(c=!1)}else d.startsWith("origin")?(u=!0,s[d]=p):r[d]=p}}if(t.transform||(l||i?r.transform=function(e,t,n,i){for(var r=t.enableHardwareAcceleration,a=void 0===r||r,o=t.allowTransformNone,s=void 0===o||o,l="",u=0;u<jn;u++){var c=Rn[u];if(void 0!==e[c]){var d=Fn[c]||c;l+="".concat(d,"(").concat(e[c],") ")}}return a&&!e.z&&(l+="translateZ(0)"),l=l.trim(),i?l=i(e,n?"":l):s&&n&&(l="none"),l}(e.transform,n,c,i):r.transform&&(r.transform="none")),u){var v=s.originX,m=void 0===v?"50%":v,g=s.originY,L=void 0===g?"50%":g,y=s.originZ,b=void 0===y?0:y;r.transformOrigin="".concat(m," ").concat(L," ").concat(b)}}var ci=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function di(e,t,n){for(var i in t)zn(t[i])||Nn(i,n)||(e[i]=t[i])}function hi(t,n,i){var r={};return di(r,t.style||{},t),Object.assign(r,function(t,n,i){var r=t.transformTemplate;return(0,e.useMemo)((function(){var e=ci();return ui(e,n,{enableHardwareAcceleration:!i},r),Object.assign({},e.vars,e.style)}),[n])}(t,n,i)),t.transformValues?t.transformValues(r):r}function fi(e,t,n){var i={},r=hi(e,t,n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}var pi=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function vi(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||pi.has(e)}var mi,gi=function(e){return!vi(e)};try{(mi=require("@emotion/is-prop-valid").default)&&(gi=function(e){return e.startsWith("on")?!vi(e):mi(e)})}catch(DT){}function Li(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yi(e,t,n){return"string"===typeof e?e:ii.transform(t+n*e)}var bi={offset:"stroke-dashoffset",array:"stroke-dasharray"},xi={offset:"strokeDashoffset",array:"strokeDasharray"};var wi=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function _i(e,t,n,i,r){var a=t.attrX,o=t.attrY,s=t.attrScale,l=t.originX,u=t.originY,c=t.pathLength,d=t.pathSpacing,h=void 0===d?1:d,f=t.pathOffset,p=void 0===f?0:f;if(ui(e,Li(t,wi),n,r),i)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var v=e.attrs,m=e.style,g=e.dimensions;v.transform&&(g&&(m.transform=v.transform),delete v.transform),g&&(void 0!==l||void 0!==u||m.transform)&&(m.transformOrigin=function(e,t,n){var i=yi(t,e.x,e.width),r=yi(n,e.y,e.height);return"".concat(i," ").concat(r)}(g,void 0!==l?l:.5,void 0!==u?u:.5)),void 0!==a&&(v.x=a),void 0!==o&&(v.y=o),void 0!==s&&(v.scale=s),void 0!==c&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=r?bi:xi;e[a.offset]=ii.transform(-i);var o=ii.transform(t),s=ii.transform(n);e[a.array]="".concat(o," ").concat(s)}(v,c,h,p,!1)}}var Si=function(){return $e($e({},ci()),{},{attrs:{}})},ki=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function Ai(t,n,i,r){var a=(0,e.useMemo)((function(){var e=Si();return _i(e,n,{enableHardwareAcceleration:!1},ki(r),t.transformTemplate),$e($e({},e.attrs),{},{style:$e({},e.style)})}),[n]);if(t.style){var o={};di(o,t.style,t),a.style=$e($e({},o),a.style)}return a}function Mi(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,i,r,a,o){var s=a.latestValues,l=(On(n)?Ai:fi)(i,s,o,n),u=function(e,t,n){var i={};for(var r in e)"values"===r&&"object"===typeof e.values||(gi(r)||!0===n&&vi(r)||!t&&!vi(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,t),c=$e($e($e({},u),l),{},{ref:r}),d=i.children,h=(0,e.useMemo)((function(){return zn(d)?d.get():d}),[d]);return(0,e.createElement)(n,$e($e({},c),{},{children:h}))}}var Ci=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function Ei(e,t,n,i){var r=t.style,a=t.vars;for(var o in Object.assign(e.style,r,i&&i.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var Ti=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pi(e,t,n,i){for(var r in Ei(e,t,void 0,i),t.attrs)e.setAttribute(Ti.has(r)?r:Ci(r),t.attrs[r])}function Di(e,t){var n=e.style,i={};for(var r in n)(zn(n[r])||t.style&&zn(t.style[r])||Nn(r,e))&&(i[r]=n[r]);return i}function Oi(e,t){var n=Di(e,t);for(var i in e){if(zn(e[i])||zn(t[i]))n[-1!==Rn.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return n}function Ii(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,i,r)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,i,r)),t}var Ri=function(e){return Array.isArray(e)},Bi=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},Ni=function(e){return Ri(e)?e[e.length-1]||0:e};function zi(e){var t=zn(e)?e.get():e;return Bi(t)?t.toValue():t}var Fi=["transitionEnd","transition"];var ji=function(t){return function(n,i){var r=(0,e.useContext)(ln),a=(0,e.useContext)(un),o=function(){return function(e,t,n,i){var r=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:Ui(t,n,i,r),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}(t,n,r,a)};return i?o():function(t){var n=(0,e.useRef)(null);return null===n.current&&(n.current=t()),n.current}(o)}};function Ui(e,t,n,i){var r={},a=i(e,{});for(var o in a)r[o]=zi(a[o]);var s=e.initial,l=e.animate,u=Ln(e),c=yn(e);t&&c&&!u&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===l&&(l=t.animate));var d=!!n&&!1===n.initial,h=(d=d||!1===s)?l:s;h&&"boolean"!==typeof h&&!vn(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=Ii(e,t);if(n){var i=n.transitionEnd,a=(n.transition,Li(n,Fi));for(var o in a){var s=a[o];if(Array.isArray(s))s=s[d?s.length-1:0];null!==s&&(r[o]=s)}for(var l in i)r[l]=i[l]}}));return r}var Zi={useVisualState:ji({scrapeMotionValuesFromProps:Oi,createRenderState:Si,onMount:function(e,t,n){var i=n.renderState,r=n.latestValues;try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(eT){i.dimensions={x:0,y:0,width:0,height:0}}_i(i,r,{enableHardwareAcceleration:!1},ki(t.tagName),e.transformTemplate),Pi(t,i)}})},Vi={useVisualState:ji({scrapeMotionValuesFromProps:Di,createRenderState:ci})};function Gi(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n)}}var Hi=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function Wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var qi=function(e){return function(t){return Hi(t)&&e(t,Wi(t))}};function Xi(e,t,n,i){return Gi(e,t,qi(n),i)}var Yi=function(e,t){return function(n){return t(e(n))}},Qi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Yi)};function Ki(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Ji=Ki("dragHorizontal"),$i=Ki("dragVertical");function er(e){var t=!1;if("y"===e)t=$i();else if("x"===e)t=Ji();else{var n=Ji(),i=$i();n&&i?t=function(){n(),i()}:(n&&n(),i&&i())}return t}function tr(){var e=er(!0);return!e||(e(),!1)}var nr=function(){function e(t){(0,c.Z)(this,e),this.isMounted=!1,this.node=t}return(0,d.Z)(e,[{key:"update",value:function(){}}]),e}(),ir=function(e){return e};var rr=["prepare","read","update","preRender","render","postRender"];var ar=function(e,t){var n=!1,i=!0,r={delta:0,timestamp:0,isProcessing:!1},a=rr.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],i=0,r=!1,a=!1,o=new WeakSet,s={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,s=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),a&&r&&(i=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(l){if(r)a=!0;else{r=!0;var u=[n,t];if(t=u[0],(n=u[1]).length=0,i=t.length)for(var c=0;c<i;c++){var d=t[c];d(l),o.has(d)&&(s.schedule(d),e())}r=!1,a&&(a=!1,s.process(l))}}};return s}((function(){return n=!0})),e}),{}),o=function(e){return a[e].process(r)},s=function a(){var s=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(s-r.timestamp,40),1),r.timestamp=s,r.isProcessing=!0,rr.forEach(o),r.isProcessing=!1,n&&t&&(i=!1,e(a))},l=rr.reduce((function(t,o){var l=a[o];return t[o]=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(s)),l.schedule(t,a,o)},t}),{});return{schedule:l,cancel:function(e){return rr.forEach((function(t){return a[t].cancel(e)}))},state:r,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:ir,!0),or=ar.schedule,sr=ar.cancel,lr=ar.state,ur=ar.steps;function cr(e,t){var n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End");return Xi(e.current,n,(function(n,r){if("touch"!==n.type&&!tr()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[i]&&or.update((function(){return a[i](n,r)}))}}),{passive:!e.getProps()[i]})}var dr=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"mount",value:function(){this.unmount=Qi(cr(this.node,!0),cr(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(nr),hr=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).isActive=!1,e}return(0,d.Z)(n,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(eT){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=Qi(Gi(this.node.current,"focus",(function(){return e.onFocus()})),Gi(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(nr),fr=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function pr(e,t){if(t){var n=new PointerEvent("pointer"+e);t(n,Wi(n))}}var vr=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).removeStartListeners=ir,e.removeEndListeners=ir,e.removeAccessibleListeners=ir,e.startPointerPress=function(t,n){if(e.removeEndListeners(),!e.isPressing){var i=e.node.getProps(),r=Xi(window,"pointerup",(function(t,n){if(e.checkPressEnd()){var i=e.node.getProps(),r=i.onTap,a=i.onTapCancel;or.update((function(){fr(e.node.current,t.target)?r&&r(t,n):a&&a(t,n)}))}}),{passive:!(i.onTap||i.onPointerUp)}),a=Xi(window,"pointercancel",(function(t,n){return e.cancelPress(t,n)}),{passive:!(i.onTapCancel||i.onPointerCancel)});e.removeEndListeners=Qi(r,a),e.startPress(t,n)}},e.startAccessiblePress=function(){var t=Gi(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=Gi(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&pr("up",(function(t,n){var i=e.node.getProps().onTap;i&&or.update((function(){return i(t,n)}))}))})),pr("down",(function(t,n){e.startPress(t,n)}))}})),n=Gi(e.node.current,"blur",(function(){e.isPressing&&pr("cancel",(function(t,n){return e.cancelPress(t,n)}))}));e.removeAccessibleListeners=Qi(t,n)},e}return(0,d.Z)(n,[{key:"startPress",value:function(e,t){this.isPressing=!0;var n=this.node.getProps(),i=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&or.update((function(){return i(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tr()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&or.update((function(){return n(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=Xi(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Gi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qi(t,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(nr),mr=["root"],gr=new WeakMap,Lr=new WeakMap,yr=function(e){var t=gr.get(e.target);t&&t(e)},br=function(e){e.forEach(yr)};function xr(e,t,n){var i=function(e){var t=e.root,n=Li(e,mr),i=t||document;Lr.has(i)||Lr.set(i,{});var r=Lr.get(i),a=JSON.stringify(n);return r[a]||(r[a]=new IntersectionObserver(br,$e({root:t},n))),r[a]}(t);return gr.set(e,n),i.observe(e),function(){gr.delete(e),i.unobserve(e)}}var wr={some:0,all:1},_r=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return(0,d.Z)(n,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,n=void 0===t?{}:t,i=n.root,r=n.margin,a=n.amount,o=void 0===a?"some":a,s=n.once,l={root:i?i.current:void 0,rootMargin:r,threshold:"number"===typeof o?o:wr[o]};return xr(this.node.current,l,(function(t){var n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!s||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",n);var i=e.node.getProps(),r=i.onViewportEnter,a=i.onViewportLeave,o=n?r:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,n=e.prevProps,i=["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.viewport,a=void 0===r?{}:r;return function(e){return n[e]!==a[e]}}(t,n));i&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(nr);var Sr={inView:{Feature:_r},tap:{Feature:vr},focus:{Feature:hr},hover:{Feature:dr}};function kr(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Ar(e,t,n){var i=e.getProps();return Ii(i,t,void 0!==n?n:i.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var Mr="data-"+Ci("framerAppearId"),Cr=ir,Er=ir;var Tr=function(e){return 1e3*e},Pr=function(e){return e/1e3},Dr=!1,Or=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function Ir(e){return Boolean(!e||"string"===typeof e&&Br[e]||Or(e)||Array.isArray(e)&&e.every(Ir))}var Rr=function(e){var t=o(e,4),n=t[0],i=t[1],r=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(i,", ").concat(r,", ").concat(a,")")},Br={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rr([0,.65,.55,1]),circOut:Rr([.55,0,1,.45]),backIn:Rr([.31,.01,.66,-.59]),backOut:Rr([.33,1.53,.69,.99])};function Nr(e){if(e)return Or(e)?Rr(e):Array.isArray(e)?e.map(Nr):Br[e]}var zr=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e},Fr=1e-7,jr=12;function Ur(e,t,n,i){if(e===t&&n===i)return ir;var r=function(t){return function(e,t,n,i,r){var a,o,s=0;do{(a=zr(o=t+(n-t)/2,i,r)-e)>0?n=o:t=o}while(Math.abs(a)>Fr&&++s<jr);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:zr(r(e),t,i)}}var Zr=Ur(.42,0,1,1),Vr=Ur(0,0,.58,1),Gr=Ur(.42,0,.58,1),Hr=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},Wr=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},qr=function(e){return function(t){return 1-e(1-t)}},Xr=function(e){return 1-Math.sin(Math.acos(e))},Yr=qr(Xr),Qr=Wr(Yr),Kr=Ur(.33,1.53,.69,.99),Jr=qr(Kr),$r=Wr(Jr),ea={linear:ir,easeIn:Zr,easeInOut:Gr,easeOut:Vr,circIn:Xr,circInOut:Qr,circOut:Yr,backIn:Jr,backInOut:$r,backOut:Kr,anticipate:function(e){return(e*=2)<1?.5*Jr(e):.5*(2-Math.pow(2,-10*(e-1)))}},ta=function(e){if(Array.isArray(e)){Er(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=o(e,4);return Ur(t[0],t[1],t[2],t[3])}return"string"===typeof e?(Er(void 0!==ea[e],"Invalid easing type '".concat(e,"'")),ea[e]):e},na=function(e,t){return function(n){return Boolean($n(n)&&Jn.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},ia=function(e,t,n){return function(i){var r;if(!$n(i))return i;var a=o(i.match(Qn),4),s=a[0],l=a[1],u=a[2],c=a[3];return Ke(r={},e,parseFloat(s)),Ke(r,t,parseFloat(l)),Ke(r,n,parseFloat(u)),Ke(r,"alpha",void 0!==c?parseFloat(c):1),r}},ra=$e($e({},Wn),{},{transform:function(e){return Math.round(function(e){return Hn(0,255,e)}(e))}}),aa={test:na("rgb","red"),parse:ia("red","green","blue"),transform:function(e){var t=e.red,n=e.green,i=e.blue,r=e.alpha,a=void 0===r?1:r;return"rgba("+ra.transform(t)+", "+ra.transform(n)+", "+ra.transform(i)+", "+Yn(qn.transform(a))+")"}};var oa={test:na("#"),parse:function(e){var t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:aa.transform},sa={test:na("hsl","hue"),parse:ia("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,i=e.lightness,r=e.alpha,a=void 0===r?1:r;return"hsla("+Math.round(t)+", "+ni.transform(Yn(n))+", "+ni.transform(Yn(i))+", "+Yn(qn.transform(a))+")"}},la={test:function(e){return aa.test(e)||oa.test(e)||sa.test(e)},parse:function(e){return aa.test(e)?aa.parse(e):sa.test(e)?sa.parse(e):oa.parse(e)},transform:function(e){return $n(e)?e:e.hasOwnProperty("red")?aa.transform(e):sa.transform(e)}},ua=function(e,t,n){return-n*e+n*t+e};function ca(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var da=function(e,t,n){var i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},ha=[oa,aa,sa];function fa(e){var t,n=(t=e,ha.find((function(e){return e.test(t)})));Er(Boolean(n),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var i=n.parse(e);return n===sa&&(i=function(e){var t=e.hue,n=e.saturation,i=e.lightness,r=e.alpha;t/=360,i/=100;var a=0,o=0,s=0;if(n/=100){var l=i<.5?i*(1+n):i+n-i*n,u=2*i-l;a=ca(u,l,t+1/3),o=ca(u,l,t),s=ca(u,l,t-1/3)}else a=o=s=i;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*s),alpha:r}}(i)),i}var pa=function(e,t){var n=fa(e),i=fa(t),r=$e({},n);return function(e){return r.red=da(n.red,i.red,e),r.green=da(n.green,i.green,e),r.blue=da(n.blue,i.blue,e),r.alpha=ua(n.alpha,i.alpha,e),aa.transform(r)}};var va={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:ir},ma={regex:Kn,countKey:"Colors",token:"${c}",parse:la.parse},ga={regex:Qn,countKey:"Numbers",token:"${n}",parse:Wn.parse};function La(e,t){var n,i=t.regex,r=t.countKey,a=t.token,o=t.parse,s=e.tokenised.match(i);s&&(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(i,a),(n=e.values).push.apply(n,u(s.map(o))))}function ya(e){var t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&La(n,va),La(n,ma),La(n,ga),n}function ba(e){return ya(e).values}function xa(e){var t=ya(e),n=t.values,i=t.numColors,r=t.numVars,a=t.tokenised,o=n.length;return function(e){for(var t=a,n=0;n<o;n++)t=n<r?t.replace(va.token,e[n]):n<r+i?t.replace(ma.token,la.transform(e[n])):t.replace(ga.token,Yn(e[n]));return t}}var wa=function(e){return"number"===typeof e?0:e};var _a={test:function(e){var t,n;return isNaN(e)&&$n(e)&&((null===(t=e.match(Qn))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Kn))||void 0===n?void 0:n.length)||0)>0},parse:ba,createTransformer:xa,getAnimatableNone:function(e){var t=ba(e);return xa(e)(t.map(wa))}},Sa=function(e,t){return function(n){return"".concat(n>0?t:e)}};function ka(e,t){return"number"===typeof e?function(n){return ua(e,t,n)}:la.test(e)?pa(e,t):e.startsWith("var(")?Sa(e,t):Ca(e,t)}var Aa=function(e,t){var n=u(e),i=n.length,r=e.map((function(e,n){return ka(e,t[n])}));return function(e){for(var t=0;t<i;t++)n[t]=r[t](e);return n}},Ma=function(e,t){var n=$e($e({},e),t),i={};for(var r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=ka(e[r],t[r]));return function(e){for(var t in i)n[t]=i[t](e);return n}},Ca=function(e,t){var n=_a.createTransformer(t),i=ya(e),r=ya(t);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Qi(Aa(i.values,r.values),n):(Cr(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Sa(e,t))},Ea=function(e,t,n){var i=t-e;return 0===i?1:(n-e)/i},Ta=function(e,t){return function(n){return ua(e,t,n)}};function Pa(e,t,n){for(var i,r=[],a=n||("number"===typeof(i=e[0])?Ta:"string"===typeof i?la.test(i)?pa:Ca:Array.isArray(i)?Aa:"object"===typeof i?Ma:Ta),o=e.length-1,s=0;s<o;s++){var l=a(e[s],e[s+1]);if(t){var u=Array.isArray(t)?t[s]||ir:t;l=Qi(u,l)}r.push(l)}return r}function Da(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.clamp,r=void 0===i||i,a=n.ease,o=n.mixer,s=e.length;if(Er(s===t.length,"Both input and output ranges must be the same length"),1===s)return function(){return t[0]};e[0]>e[s-1]&&(e=u(e).reverse(),t=u(t).reverse());var l=Pa(t,a,o),c=l.length,d=function(t){var n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var i=Ea(e[n],e[n+1],t);return l[n](i)};return r?function(t){return d(Hn(e[0],e[s-1],t))}:d}function Oa(e){var t=[0];return function(e,t){for(var n=e[e.length-1],i=1;i<=t;i++){var r=Ea(0,t,i);e.push(ua(n,1,r))}}(t,e.length-1),t}function Ia(e){var t,n,i=e.duration,r=void 0===i?300:i,a=e.keyframes,o=e.times,s=e.ease,l=void 0===s?"easeInOut":s,u=Hr(l)?l.map(ta):ta(l),c={done:!1,value:a[0]},d=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===a.length?o:Oa(a),r),h=Da(d,a,{ease:Array.isArray(u)?u:(t=a,n=u,t.map((function(){return n||Gr})).splice(0,t.length-1))});return{calculatedDuration:r,next:function(e){return c.value=h(e),c.done=e>=r,c}}}function Ra(e,t){return t?e*(1e3/t):0}var Ba=5;function Na(e,t,n){var i=Math.max(t-Ba,0);return Ra(n-e(i),t-i)}var za=.001,Fa=.01,ja=10,Ua=.05,Za=1;function Va(e){var t,n,i=e.duration,r=void 0===i?800:i,a=e.bounce,o=void 0===a?.25:a,s=e.velocity,l=void 0===s?0:s,u=e.mass,c=void 0===u?1:u;Cr(r<=Tr(ja),"Spring duration must be 10 seconds or less");var d=1-o;d=Hn(Ua,Za,d),r=Hn(Fa,ja,Pr(r)),d<1?(t=function(e){var t=e*d,n=t*r,i=t-l,a=Ha(e,d),o=Math.exp(-n);return za-i/a*o},n=function(e){var n=e*d*r,i=n*l+l,a=Math.pow(d,2)*Math.pow(e,2)*r,o=Math.exp(-n),s=Ha(Math.pow(e,2),d);return(-t(e)+za>0?-1:1)*((i-a)*o)/s}):(t=function(e){return Math.exp(-e*r)*((e-l)*r+1)-za},n=function(e){return Math.exp(-e*r)*(r*r*(l-e))});var h=function(e,t,n){for(var i=n,r=1;r<Ga;r++)i-=e(i)/t(i);return i}(t,n,5/r);if(r=Tr(r),isNaN(h))return{stiffness:100,damping:10,duration:r};var f=Math.pow(h,2)*c;return{stiffness:f,damping:2*d*Math.sqrt(c*f),duration:r}}var Ga=12;function Ha(e,t){return e*Math.sqrt(1-t*t)}var Wa=["keyframes","restDelta","restSpeed"],qa=["duration","bounce"],Xa=["stiffness","damping","mass"];function Ya(e,t){return t.some((function(t){return void 0!==e[t]}))}function Qa(e){var t,n=e.keyframes,i=e.restDelta,r=e.restSpeed,a=Li(e,Wa),o=n[0],s=n[n.length-1],l={done:!1,value:o},u=function(e){var t=$e({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Ya(e,Xa)&&Ya(e,qa)){var n=Va(e);(t=$e($e($e({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),c=u.stiffness,d=u.damping,h=u.mass,f=u.velocity,p=u.duration,v=u.isResolvedFromDuration,m=f?-Pr(f):0,g=d/(2*Math.sqrt(c*h)),L=s-o,y=Pr(Math.sqrt(c/h)),b=Math.abs(L)<5;if(r||(r=b?.01:2),i||(i=b?.005:.5),g<1){var x=Ha(y,g);t=function(e){var t=Math.exp(-g*y*e);return s-t*((m+g*y*L)/x*Math.sin(x*e)+L*Math.cos(x*e))}}else if(1===g)t=function(e){return s-Math.exp(-y*e)*(L+(m+y*L)*e)};else{var w=y*Math.sqrt(g*g-1);t=function(e){var t=Math.exp(-g*y*e),n=Math.min(w*e,300);return s-t*((m+g*y*L)*Math.sinh(n)+w*L*Math.cosh(n))/w}}return{calculatedDuration:v&&p||null,next:function(e){var n=t(e);if(v)l.done=e>=p;else{var a=m;0!==e&&(a=g<1?Na(t,e,n):0);var o=Math.abs(a)<=r,u=Math.abs(s-n)<=i;l.done=o&&u}return l.value=l.done?s:n,l}}}function Ka(e){var t=e.keyframes,n=e.velocity,i=void 0===n?0:n,r=e.power,a=void 0===r?.8:r,o=e.timeConstant,s=void 0===o?325:o,l=e.bounceDamping,u=void 0===l?10:l,c=e.bounceStiffness,d=void 0===c?500:c,h=e.modifyTarget,f=e.min,p=e.max,v=e.restDelta,m=void 0===v?.5:v,g=e.restSpeed,L=t[0],y={done:!1,value:L},b=function(e){return void 0===f?p:void 0===p||Math.abs(f-e)<Math.abs(p-e)?f:p},x=a*i,w=L+x,_=void 0===h?w:h(w);_!==w&&(x=_-L);var S,k,A=function(e){return-x*Math.exp(-e/s)},M=function(e){return _+A(e)},C=function(e){var t=A(e),n=M(e);y.done=Math.abs(t)<=m,y.value=y.done?_:n},E=function(e){var t;(t=y.value,void 0!==f&&t<f||void 0!==p&&t>p)&&(S=e,k=Qa({keyframes:[y.value,b(y.value)],velocity:Na(M,e,y.value),damping:u,stiffness:d,restDelta:m,restSpeed:g}))};return E(0),{calculatedDuration:null,next:function(e){var t=!1;return k||void 0!==S||(t=!0,C(e),E(e)),void 0!==S&&e>S?k.next(e-S):(!t&&C(e),y)}}}var Ja=function(e){var t=function(t){var n=t.timestamp;return e(n)};return{start:function(){return or.update(t,!0)},stop:function(){return sr(t)},now:function(){return lr.isProcessing?lr.timestamp:performance.now()}}},$a=2e4;function eo(e){for(var t=0,n=e.next(t);!n.done&&t<$a;)t+=50,n=e.next(t);return t>=$a?1/0:t}var to=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],no={decay:Ka,inertia:Ka,tween:Ia,keyframes:Ia,spring:Qa};function io(e){var t,n,i,r=e.autoplay,a=void 0===r||r,o=e.delay,s=void 0===o?0:o,l=e.driver,c=void 0===l?Ja:l,d=e.keyframes,h=e.type,f=void 0===h?"keyframes":h,p=e.repeat,v=void 0===p?0:p,m=e.repeatDelay,g=void 0===m?0:m,L=e.repeatType,y=void 0===L?"loop":L,b=e.onPlay,x=e.onStop,w=e.onComplete,_=e.onUpdate,S=Li(e,to),k=1,A=!1,M=function(){n=new Promise((function(e){t=e}))};M();var C,E=no[f]||Ia;E!==Ia&&"number"!==typeof d[0]&&(C=Da([0,100],d,{clamp:!1}),d=[0,100]);var T,P=E($e($e({},S),{},{keyframes:d}));"mirror"===y&&(T=E($e($e({},S),{},{keyframes:u(d).reverse(),velocity:-(S.velocity||0)})));var D="idle",O=null,I=null,R=null;null===P.calculatedDuration&&v&&(P.calculatedDuration=eo(P));var B=P.calculatedDuration,N=1/0,z=1/0;null!==B&&(z=(N=B+g)*(v+1)-g);var F=0,j=function(e){if(null!==I){k>0&&(I=Math.min(I,e)),k<0&&(I=Math.min(e-z/k,I));var t=(F=null!==O?O:Math.round(e-I)*k)-s*(k>=0?1:-1),n=k>=0?t<0:t>z;F=Math.max(t,0),"finished"===D&&null===O&&(F=z);var i=F,r=P;if(v){var a=F/N,o=Math.floor(a),l=a%1;!l&&a>=1&&(l=1),1===l&&o--,o=Math.min(o,v+1);var u=Boolean(o%2);u&&("reverse"===y?(l=1-l,g&&(l-=g/N)):"mirror"===y&&(r=T));var c=Hn(0,1,l);F>z&&(c="reverse"===y&&u?1:0),i=c*N}var h=n?{done:!1,value:d[0]}:r.next(i);C&&(h.value=C(h.value));var f=h.done;n||null===B||(f=k>=0?F>=z:F<=0);var p=null===O&&("finished"===D||"running"===D&&f);return _&&_(h.value),p&&V(),h}},U=function(){i&&i.stop(),i=void 0},Z=function(){D="idle",U(),t(),M(),I=R=null},V=function(){D="finished",w&&w(),U(),t()},G=function(){if(!A){i||(i=c(j));var e=i.now();b&&b(),null!==O?I=e-O:I&&"finished"!==D||(I=e),"finished"===D&&M(),R=I,O=null,D="running",i.start()}};a&&G();var H={then:function(e,t){return n.then(e,t)},get time(){return Pr(F)},set time(e){e=Tr(e),F=e,null===O&&i&&0!==k?I=i.now()-e/k:O=e},get duration(){var e=null===P.calculatedDuration?eo(P):P.calculatedDuration;return Pr(e)},get speed(){return k},set speed(e){e!==k&&i&&(k=e,H.time=Pr(F))},get state(){return D},play:G,pause:function(){D="paused",O=F},stop:function(){A=!0,"idle"!==D&&(D="idle",x&&x(),Z())},cancel:function(){null!==R&&j(R),Z()},complete:function(){D="finished"},sample:function(e){return I=0,j(e)}};return H}var ro=["onUpdate","onComplete"],ao=function(e){var t;return function(){return void 0===t&&(t=e()),t}}((function(){return Object.hasOwnProperty.call(Element.prototype,"animate")})),oo=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function so(e,t,n){n.onUpdate;var i=n.onComplete,r=Li(n,ro);if(!(ao()&&oo.has(t)&&!r.repeatDelay&&"mirror"!==r.repeatType&&0!==r.damping&&"inertia"!==r.type))return!1;var a,o,s=!1,l=function(){o=new Promise((function(e){a=e}))};l();var u=r.keyframes,c=r.duration,d=void 0===c?300:c,h=r.ease,f=r.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!Ir(t.ease)}(t,r)){for(var p=io($e($e({},r),{},{repeat:0,delay:0})),v={done:!1,value:u[0]},m=[],g=0;!v.done&&g<2e4;)v=p.sample(g),m.push(v.value),g+=10;f=void 0,u=m,d=g-10,h="linear"}var L=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.delay,a=void 0===r?0:r,o=i.duration,s=i.repeat,l=void 0===s?0:s,u=i.repeatType,c=void 0===u?"loop":u,d=i.ease,h=i.times,f=Ke({},t,n);h&&(f.offset=h);var p=Nr(d);return Array.isArray(p)&&(f.easing=p),e.animate(f,{delay:a,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:"reverse"===c?"alternate":"normal"})}(e.owner.current,t,u,$e($e({},r),{},{duration:d,ease:h,times:f})),y=function(){return L.cancel()},b=function(){or.update(y),a(),l()};return L.onfinish=function(){e.set(function(e,t){var n=t.repeat,i=t.repeatType;return e[n&&"loop"!==(void 0===i?"loop":i)&&n%2===1?0:e.length-1]}(u,r)),i&&i(),b()},{then:function(e,t){return o.then(e,t)},attachTimeline:function(e){return L.timeline=e,L.onfinish=null,ir},get time(){return Pr(L.currentTime||0)},set time(e){L.currentTime=Tr(e)},get speed(){return L.playbackRate},set speed(e){L.playbackRate=e},get duration(){return Pr(d)},play:function(){s||(L.play(),sr(y))},pause:function(){return L.pause()},stop:function(){if(s=!0,"idle"!==L.playState){var t=L.currentTime;if(t){var n=io($e($e({},r),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}b()}},complete:function(){return L.finish()},cancel:b}}var lo={type:"spring",stiffness:500,damping:25,restSpeed:10},uo={type:"keyframes",duration:.8},co={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ho=function(e,t){var n=t.keyframes;return n.length>2?uo:Bn.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:lo:co},fo=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!_a.test(t)&&"0"!==t||t.startsWith("url(")))},po=new Set(["brightness","contrast","saturate","opacity"]);function vo(e){var t=o(e.slice(0,-1).split("("),2),n=t[0],i=t[1];if("drop-shadow"===n)return e;var r=o(i.match(Qn)||[],1)[0];if(!r)return e;var a=i.replace(r,""),s=po.has(n)?1:0;return r!==i&&(s*=100),n+"("+s+a+")"}var mo=/([a-z-]*)\(.*?\)/g,go=$e($e({},_a),{},{getAnimatableNone:function(e){var t=e.match(mo);return t?t.map(vo).join(" "):e}}),Lo=$e($e({},li),{},{color:la,backgroundColor:la,outlineColor:la,fill:la,stroke:la,borderColor:la,borderTopColor:la,borderRightColor:la,borderBottomColor:la,borderLeftColor:la,filter:go,WebkitFilter:go}),yo=function(e){return Lo[e]};function bo(e,t){var n=yo(e);return n!==go&&(n=_a),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var xo=function(e){return/^0[^.\s]+$/.test(e)};function wo(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||xo(e):void 0}var _o=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function So(e,t){return e[t]||e.default||e}var ko=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(r){var a=So(i,e)||{},o=a.delay||i.delay||0,s=i.elapsed,l=void 0===s?0:s;l-=Tr(o);var c=function(e,t,n,i){var r,a=fo(t,n);r=Array.isArray(n)?u(n):[null,n];for(var o=void 0!==i.from?i.from:e.get(),s=void 0,l=[],c=0;c<r.length;c++)null===r[c]&&(r[c]=0===c?o:r[c-1]),wo(r[c])&&l.push(c),"string"===typeof r[c]&&"none"!==r[c]&&"0"!==r[c]&&(s=r[c]);if(a&&l.length&&s)for(var d=0;d<l.length;d++)r[l[d]]=bo(t,s);return r}(t,e,n,a),d=c[0],h=c[c.length-1],f=fo(e,d),p=fo(e,h);Cr(f===p,"You are trying to animate ".concat(e,' from "').concat(d,'" to "').concat(h,'". ').concat(d," is not an animatable value - to enable this animation set ").concat(d," to a value animatable to ").concat(h," via the `style` property."));var v=$e($e({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-l,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){r(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=Li(e,_o);return!!Object.keys(t).length}(a)||(v=$e($e({},v),ho(e,v))),v.duration&&(v.duration=Tr(v.duration)),v.repeatDelay&&(v.repeatDelay=Tr(v.repeatDelay)),!f||!p||Dr||!1===a.type)return function(e){var t=e.keyframes,n=e.delay,i=e.onUpdate,r=e.onComplete,a=function(){return i&&i(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ir,pause:ir,stop:ir,then:function(e){return e(),Promise.resolve()},cancel:ir,complete:ir}};return n?io({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(Dr?$e($e({},v),{},{delay:0}):v);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var m=so(t,e,v);if(m)return m}return io(v)}};function Ao(e){return Boolean(zn(e)&&e.add)}function Mo(e,t){-1===e.indexOf(t)&&e.push(t)}function Co(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Eo=function(){function e(){(0,c.Z)(this,e),this.subscriptions=[]}return(0,d.Z)(e,[{key:"add",value:function(e){var t=this;return Mo(this.subscriptions,e),function(){return Co(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(var r=0;r<i;r++){var a=this.subscriptions[r];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),To=function(){function e(t){var n,i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,e),this.version="10.15.1",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.prev=i.current,i.current=e;var n=lr.delta,r=lr.timestamp;i.lastUpdated!==r&&(i.timeDelta=n,i.lastUpdated=r,or.postRender(i.scheduleVelocityCheck)),i.prev!==i.current&&i.events.change&&i.events.change.notify(i.current),i.events.velocityChange&&i.events.velocityChange.notify(i.getVelocity()),t&&i.events.renderRequest&&i.events.renderRequest.notify(i.current)},this.scheduleVelocityCheck=function(){return or.postRender(i.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==i.lastUpdated&&(i.prev=i.current,i.events.velocityChange&&i.events.velocityChange.notify(i.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=r.owner}return(0,d.Z)(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new Eo);var i=this.events[e].add(t);return"change"===e?function(){i(),or.read((function(){n.events.change.getSize()||n.stop()}))}:i}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?Ra(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function Po(e,t){return new To(e,t)}var Do=function(e){return function(t){return t.test(e)}},Oo=[Wn,ii,ni,ti,ai,ri,{test:function(e){return"auto"===e},parse:function(e){return e}}],Io=function(e){return Oo.find(Do(e))},Ro=[].concat(u(Oo),[la,_a]),Bo=function(e){return Ro.find(Do(e))},No=["transitionEnd","transition"];function zo(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Po(n))}function Fo(e,t){var n=Ar(e,t),i=n?e.makeTargetAnimatable(n,!1):{},r=i.transitionEnd,a=void 0===r?{}:r,o=(i.transition,Li(i,No));for(var s in o=$e($e({},o),a)){zo(e,s,Ni(o[s]))}}function jo(e,t){if(t)return(t[e]||t.default||t).from}var Uo=["transition","transitionEnd"];function Zo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.delay,r=void 0===i?0:i,a=n.transitionOverride,o=n.type,s=e.makeTargetAnimatable(t),l=s.transition,u=void 0===l?e.getDefaultTransition():l,c=s.transitionEnd,d=Li(s,Uo),h=e.getValue("willChange");a&&(u=a);var f=[],p=o&&e.animationState&&e.animationState.getState()[o],v=function(t){var n=e.getValue(t),i=d[t];if(!n||void 0===i||p&&function(e,t){var n=e.protectedKeys,i=e.needsAnimating,r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}(p,t))return 1;var a=$e({delay:r,elapsed:0},u);if(window.HandoffAppearAnimations&&!n.hasAnimated){var o=e.getProps()[Mr];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,n,or))}n.start(ko(t,n,i,e.shouldReduceMotion&&Bn.has(t)?{type:!1}:a));var s=n.animation;Ao(h)&&(h.add(t),s.then((function(){return h.remove(t)}))),f.push(s)};for(var m in d)v(m);return c&&Promise.all(f).then((function(){c&&Fo(e,c)})),f}function Vo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Ar(e,t,n.custom),r=(i||{}).transition,a=void 0===r?e.getDefaultTransition()||{}:r;n.transitionOverride&&(a=n.transitionOverride);var s=i?function(){return Promise.all(Zo(e,i,n))}:function(){return Promise.resolve()},l=e.variantChildren&&e.variantChildren.size?function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=a,o=r.delayChildren,s=void 0===o?0:o,l=r.staggerChildren,u=r.staggerDirection;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],s=(e.variantChildren.size-1)*i,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(Go).forEach((function(e,i){e.notify("AnimationStart",t),o.push(Vo(e,t,$e($e({},a),{},{delay:n+l(i)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,s+i,l,u,n)}:function(){return Promise.resolve()},u=a.when;if(u){var c=o("beforeChildren"===u?[s,l]:[l,s],2),d=c[0],h=c[1];return d().then((function(){return h()}))}return Promise.all([s(),l(n.delay)])}function Go(e,t){return e.sortNodePosition(t)}var Ho=["transition","transitionEnd"],Wo=u(mn).reverse(),qo=mn.length;function Xo(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,i=t.options;return function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var r=t.map((function(t){return Vo(e,t,i)}));n=Promise.all(r)}else if("string"===typeof t)n=Vo(e,t,i);else{var a="function"===typeof t?Ar(e,t,i.custom):t;n=Promise.all(Zo(e,a,i))}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,i)})))}}function Yo(e){var t=Xo(e),n={animate:Qo(!0),whileInView:Qo(),whileHover:Qo(),whileTap:Qo(),whileDrag:Qo(),whileFocus:Qo(),exit:Qo()},i=!0,r=function(t,n){var i=Ar(e,n);if(i){i.transition;var r=i.transitionEnd,a=Li(i,Ho);t=$e($e($e({},t),a),r)}return t};function a(a,o){for(var s=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set,h={},f=1/0,p=function(){var t=Wo[v],p=n[t],m=void 0!==s[t]?s[t]:l[t],g=pn(m),L=t===o?p.isActive:null;!1===L&&(f=v);var y=m===l[t]&&m!==s[t]&&g;if(y&&i&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys=$e({},h),!p.isActive&&null===L||!m&&!p.prevProp||vn(m)||"boolean"===typeof m)return 1;var b=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!kr(t,e);return!1}(p.prevProp,m),x=b||t===o&&p.isActive&&!y&&g||v>f&&g,w=Array.isArray(m)?m:[m],_=w.reduce(r,{});!1===L&&(_={});var S=p.prevResolvedValues,k=void 0===S?{}:S,A=$e($e({},k),_),M=function(e){x=!0,d.delete(e),p.needsAnimating[e]=!0};for(var C in A){var E=_[C],T=k[C];h.hasOwnProperty(C)||(E!==T?Ri(E)&&Ri(T)?!kr(E,T)||b?M(C):p.protectedKeys[C]=!0:void 0!==E?M(C):d.add(C):void 0!==E&&d.has(C)?M(C):p.protectedKeys[C]=!0)}p.prevProp=m,p.prevResolvedValues=_,p.isActive&&(h=$e($e({},h),_)),i&&e.blockInitialAnimation&&(x=!1),x&&!y&&c.push.apply(c,u(w.map((function(e){return{animation:e,options:$e({type:t},a)}}))))},v=0;v<qo;v++)p();if(d.size){var m={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),c.push({animation:m})}var g=Boolean(c.length);return i&&!1===s.initial&&!e.manuallyAnimateOnMount&&(g=!1),i=!1,g?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,i,r){var o;if(n[t].isActive===i)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;var s=a(r,t);for(var l in n)n[l].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Qo(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Ko=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),e.animationState||(e.animationState=Yo(e)),i}return(0,d.Z)(n,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),vn(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(nr),Jo=0,$o=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).id=Jo++,e}return(0,d.Z)(n,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,i=t.onExitComplete,r=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==a){var o=this.node.animationState.setActive("exit",!n,{custom:null!==r&&void 0!==r?r:this.node.getProps().custom});i&&!n&&o.then((function(){return i(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),n}(nr),es={animation:{Feature:Ko},exit:{Feature:$o}},ts=function(e,t){return Math.abs(e-t)};var ns=function(){function e(t,n){var i=this,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if((0,c.Z)(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(i.lastMoveEvent&&i.lastMoveEventInfo){var e=as(i.lastMoveEventInfo,i.history),t=null!==i.startEvent,n=function(e,t){var n=ts(e.x,t.x),i=ts(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}(e.offset,{x:0,y:0})>=3;if(t||n){var r=e.point,a=lr.timestamp;i.history.push($e($e({},r),{},{timestamp:a}));var o=i.handlers,s=o.onStart,l=o.onMove;t||(s&&s(i.lastMoveEvent,e),i.startEvent=i.lastMoveEvent),l&&l(i.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){i.lastMoveEvent=e,i.lastMoveEventInfo=is(t,i.transformPagePoint),or.update(i.updatePoint,!0)},this.handlePointerUp=function(e,t){if(i.end(),i.lastMoveEvent&&i.lastMoveEventInfo){var n=i.handlers,r=n.onEnd,a=n.onSessionEnd,o=as("pointercancel"===e.type?i.lastMoveEventInfo:is(t,i.transformPagePoint),i.history);i.startEvent&&r&&r(e,o),a&&a(e,o)}},Hi(t)){this.handlers=n,this.transformPagePoint=r;var a=is(Wi(t),this.transformPagePoint),o=a.point,s=lr.timestamp;this.history=[$e($e({},o),{},{timestamp:s})];var l=n.onSessionStart;l&&l(t,as(a,this.history)),this.removeListeners=Qi(Xi(window,"pointermove",this.handlePointerMove),Xi(window,"pointerup",this.handlePointerUp),Xi(window,"pointercancel",this.handlePointerUp))}}return(0,d.Z)(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),sr(this.updatePoint)}}]),e}();function is(e,t){return t?{point:t(e.point)}:e}function rs(e,t){return{x:e.x-t.x,y:e.y-t.y}}function as(e,t){var n=e.point;return{point:n,delta:rs(n,ss(t)),offset:rs(n,os(t)),velocity:ls(t,.1)}}function os(e){return e[0]}function ss(e){return e[e.length-1]}function ls(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,i=null,r=ss(e);n>=0&&(i=e[n],!(r.timestamp-i.timestamp>Tr(t)));)n--;if(!i)return{x:0,y:0};var a=Pr(r.timestamp-i.timestamp);if(0===a)return{x:0,y:0};var o={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function us(e){return e.max-e.min}function cs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function ds(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=ua(t.min,t.max,e.origin),e.scale=us(n)/us(t),(cs(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ua(n.min,n.max,e.origin)-e.originPoint,(cs(e.translate)||isNaN(e.translate))&&(e.translate=0)}function hs(e,t,n,i){ds(e.x,t.x,n.x,i?i.originX:void 0),ds(e.y,t.y,n.y,i?i.originY:void 0)}function fs(e,t,n){e.min=n.min+t.min,e.max=e.min+us(t)}function ps(e,t,n){e.min=t.min-n.min,e.max=e.min+us(t)}function vs(e,t,n){ps(e.x,t.x,n.x),ps(e.y,t.y,n.y)}function ms(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function gs(e,t){var n=t.min-e.min,i=t.max-e.max;if(t.max-t.min<e.max-e.min){var r=[i,n];n=r[0],i=r[1]}return{min:n,max:i}}var Ls=.35;function ys(e,t,n){return{min:bs(e,t),max:bs(e,n)}}function bs(e,t){return"number"===typeof e?e:e[t]||0}var xs=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},ws=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function _s(e){return[e("x"),e("y")]}function Ss(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function ks(e){return void 0===e||1===e}function As(e){var t=e.scale,n=e.scaleX,i=e.scaleY;return!ks(t)||!ks(n)||!ks(i)}function Ms(e){return As(e)||Cs(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Cs(e){return Es(e.x)||Es(e.y)}function Es(e){return e&&"0%"!==e}function Ts(e,t,n){return n+t*(e-n)}function Ps(e,t,n,i,r){return void 0!==r&&(e=Ts(e,r,i)),Ts(e,n,i)+t}function Ds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Ps(e.min,t,n,i,r),e.max=Ps(e.max,t,n,i,r)}function Os(e,t){var n=t.x,i=t.y;Ds(e.x,n.translate,n.scale,n.originPoint),Ds(e.y,i.translate,i.scale,i.originPoint)}function Is(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Rs(e,t){e.min=e.min+t,e.max=e.max+t}function Bs(e,t,n){var i=o(n,3),r=i[0],a=i[1],s=i[2],l=void 0!==t[s]?t[s]:.5,u=ua(e.min,e.max,l);Ds(e,t[r],t[a],u,t.scale)}var Ns=["x","scaleX","originX"],zs=["y","scaleY","originY"];function Fs(e,t){Bs(e.x,t,Ns),Bs(e.y,t,zs)}function js(e,t){return Ss(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}var Us=new WeakMap,Zs=function(){function e(t){(0,c.Z)(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ws(),this.visualElement=t}return(0,d.Z)(e,[{key:"start",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,i=void 0!==n&&n,r=this.visualElement.presenceContext;if(!r||!1!==r.isPresent){this.panSession=new ns(e,{onSessionStart:function(e){t.stopAnimation(),i&&t.snapToCursor(Wi(e,"page").point)},onStart:function(e,n){var i=t.getProps(),r=i.drag,a=i.dragPropagation,o=i.onDragStart;if(!r||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=er(r),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),_s((function(e){var n=t.getAxisMotionValue(e).get()||0;if(ni.test(n)){var i=t.visualElement.projection;if(i&&i.layout){var r=i.layout.layoutBox[e];if(r)n=us(r)*(parseFloat(n)/100)}}t.originPoint[e]=n})),o&&or.update((function(){return o(e,n)}),!1,!0);var s=t.visualElement.animationState;s&&s.setActive("whileDrag",!0)}},onMove:function(e,n){var i=t.getProps(),r=i.dragPropagation,a=i.dragDirectionLock,o=i.onDirectionLock,s=i.onDrag;if(r||t.openGlobalLock){var l=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",n.point,l),t.updateAxis("y",n.point,l),t.visualElement.render(),s&&s(e,n)}},onSessionEnd:function(e,n){return t.stop(e,n)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var i=t.velocity;this.startAnimation(i);var r=this.getProps().onDragEnd;r&&or.update((function(){return r(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var i=this.getProps().drag;if(n&&Vs(e,i,this.currentDirection)){var r=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var i=t.min,r=t.max;return void 0!==i&&e<i?e=n?ua(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?ua(r,e,n.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,i=t.dragElastic,r=(this.visualElement.projection||{}).layout,a=this.constraints;n&&fn(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!r)&&function(e,t){var n=t.top,i=t.left,r=t.bottom,a=t.right;return{x:ms(e.x,i,a),y:ms(e.y,n,r)}}(r.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls;return!1===e?e=0:!0===e&&(e=Ls),{x:ys(e,"left","right"),y:ys(e,"top","bottom")}}(i),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_s((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!fn(t))return!1;var i=t.current;Er(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var r=this.visualElement.projection;if(!r||!r.layout)return!1;var a=function(e,t,n){var i=js(e,n),r=t.scroll;return r&&(Rs(i.x,r.offset.x),Rs(i.y,r.offset.y)),i}(i,r.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:gs(e.x,t.x),y:gs(e.y,t.y)}}(r.layout.layoutBox,a);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=Ss(s))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),i=n.drag,r=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,l=n.onDragTransitionEnd,u=this.constraints||{},c=_s((function(n){if(Vs(n,i,t.currentDirection)){var l=u&&u[n]||{};s&&(l={min:0,max:0});var c=a?200:1e6,d=a?40:1e7,h=$e($e({type:"inertia",velocity:r?e[n]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),l);return t.startAxisValueAnimation(n,h)}}));return Promise.all(c).then(l)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(ko(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;_s((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;_s((function(n){if(Vs(n,t.getProps().drag,t.currentDirection)){var i=t.visualElement.projection,r=t.getAxisMotionValue(n);if(i&&i.layout){var a=i.layout.layoutBox[n],o=a.min,s=a.max;r.set(e[n]-ua(o,s,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,i=t.dragConstraints,r=this.visualElement.projection;if(fn(i)&&r&&this.constraints){this.stopAnimation();var a={x:0,y:0};_s((function(t){var n=e.getAxisMotionValue(t);if(n){var i=n.get();a[t]=function(e,t){var n=.5,i=us(e),r=us(t);return r>i?n=Ea(t.min,t.max-i,e.min):i>r&&(n=Ea(e.min,e.max-r,t.min)),Hn(0,1,n)}({min:i,max:i},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_s((function(t){if(Vs(t,n,null)){var i=e.getAxisMotionValue(t),r=e.constraints[t],o=r.min,s=r.max;i.set(ua(o,s,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){Us.set(this.visualElement,this);var t=Xi(this.visualElement.current,"pointerdown",(function(t){var n=e.getProps(),i=n.drag,r=n.dragListener;i&&(void 0===r||r)&&e.start(t)})),n=function(){fn(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},i=this.visualElement.projection,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();var a=Gi(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=i.addEventListener("didUpdate",(function(t){var n=t.delta,i=t.hasLayoutChanged;e.isDragging&&i&&(_s((function(t){var i=e.getAxisMotionValue(t);i&&(e.originPoint[t]+=n[t].translate,i.set(i.get()+n[t].translate))})),e.visualElement.render())}));return function(){a(),t(),r(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,i=e.dragDirectionLock,r=void 0!==i&&i,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,u=e.dragElastic,c=void 0===u?Ls:u,d=e.dragMomentum,h=void 0===d||d;return $e($e({},e),{},{drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:h})}}]),e}();function Vs(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var Gs=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).removeGroupControls=ir,i.removeListeners=ir,i.controls=new Zs(e),i}return(0,d.Z)(n,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ir}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(nr),Hs=function(e){return function(t,n){e&&or.update((function(){return e(t,n)}))}},Ws=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).removePointerDownListener=ir,e}return(0,d.Z)(n,[{key:"onPointerDown",value:function(e){this.session=new ns(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,i=t.onPanStart,r=t.onPan,a=t.onPanEnd;return{onSessionStart:Hs(n),onStart:Hs(i),onMove:r,onEnd:function(t,n){delete e.session,a&&or.update((function(){return a(t,n)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=Xi(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(nr);var qs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xs(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Ys={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!ii.test(e))return e;e=parseFloat(e)}var n=Xs(e,t.target.x),i=Xs(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},Qs={correct:function(e,t){var n=t.treeScale,i=t.projectionDelta,r=e,a=_a.parse(e);if(a.length>5)return r;var o=_a.createTransformer(e),s="number"!==typeof a[0]?1:0,l=i.x.scale*n.x,u=i.y.scale*n.y;a[0+s]/=l,a[1+s]/=u;var c=ua(l,u,.5);return"number"===typeof a[2+s]&&(a[2+s]/=c),"number"===typeof a[3+s]&&(a[3+s]/=c),o(a)}},Ks=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,i=n.visualElement,r=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,s=i.projection;e=$s,Object.assign(In,e),s&&(r.group&&r.group.add(s),a&&a.register&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions($e($e({},s.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),qs.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,i=n.layoutDependency,r=n.visualElement,a=n.drag,o=n.isPresent,s=r.projection;return s?(s.isPresent=o,a||e.layoutDependency!==i||void 0===i?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||or.postRender((function(){var e=s.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),queueMicrotask((function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,i=e.switchLayoutGroup,r=t.projection;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),n}(e.Component);function Js(t){var n=function(){var t=(0,e.useContext)(un);if(null===t)return[!0,null];var n=t.isPresent,i=t.onExitComplete,r=t.register,a=(0,e.useId)();return(0,e.useEffect)((function(){return r(a)}),[]),!n&&i?[!1,function(){return i&&i(a)}]:[!0]}(),i=o(n,2),r=i[0],a=i[1],s=(0,e.useContext)(An);return e.createElement(Ks,$e($e({},t),{},{layoutGroup:s,switchLayoutGroup:(0,e.useContext)(Mn),isPresent:r,safeToRemove:a}))}var $s={borderRadius:$e($e({},Ys),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ys,borderTopRightRadius:Ys,borderBottomLeftRadius:Ys,borderBottomRightRadius:Ys,boxShadow:Qs},el=["TopLeft","TopRight","BottomLeft","BottomRight"],tl=el.length,nl=function(e){return"string"===typeof e?parseFloat(e):e},il=function(e){return"number"===typeof e||ii.test(e)};function rl(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var al=sl(0,.5,Yr),ol=sl(.5,.95,ir);function sl(e,t,n){return function(i){return i<e?0:i>t?1:n(Ea(e,t,i))}}function ll(e,t){e.min=t.min,e.max=t.max}function ul(e,t){ll(e.x,t.x),ll(e.y,t.y)}function cl(e,t,n,i,r){return e=Ts(e-=t,1/n,i),void 0!==r&&(e=Ts(e,1/r,i)),e}function dl(e,t,n,i,r){var a=o(n,3),s=a[0],l=a[1],u=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(ni.test(t)&&(t=parseFloat(t),t=ua(o.min,o.max,t/100)-o.min),"number"===typeof t){var s=ua(a.min,a.max,i);e===a&&(s-=t),e.min=cl(e.min,t,n,s,r),e.max=cl(e.max,t,n,s,r)}}(e,t[s],t[l],t[u],t.scale,i,r)}var hl=["x","scaleX","originX"],fl=["y","scaleY","originY"];function pl(e,t,n,i){dl(e.x,t,hl,n?n.x:void 0,i?i.x:void 0),dl(e.y,t,fl,n?n.y:void 0,i?i.y:void 0)}function vl(e){return 0===e.translate&&1===e.scale}function ml(e){return vl(e.x)&&vl(e.y)}function gl(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Ll(e){return us(e.x)/us(e.y)}var yl=function(){function e(){(0,c.Z)(this,e),this.members=[]}return(0,d.Z)(e,[{key:"add",value:function(e){Mo(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(Co(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var i=n;i>=0;i--){var r=this.members[i];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function bl(e,t,n){var i="",r=e.x.translate/t.x,a=e.y.translate/t.y;if((r||a)&&(i="translate3d(".concat(r,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,s=n.rotateX,l=n.rotateY;o&&(i+="rotate(".concat(o,"deg) ")),s&&(i+="rotateX(".concat(s,"deg) ")),l&&(i+="rotateY(".concat(l,"deg) "))}var u=e.x.scale*t.x,c=e.y.scale*t.y;return 1===u&&1===c||(i+="scale(".concat(u,", ").concat(c,")")),i||"none"}var xl=function(e,t){return e.depth-t.depth},wl=function(){function e(){(0,c.Z)(this,e),this.children=[],this.isDirty=!1}return(0,d.Z)(e,[{key:"add",value:function(e){Mo(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){Co(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(xl),this.isDirty=!1,this.children.forEach(e)}}]),e}();var _l=["","X","Y","Z"],Sl=0,kl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Al(e){var t=e.attachResizeListener,n=e.defaultParent,i=e.measureScroll,r=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();(0,c.Z)(this,e),this.id=Sl++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=function(){t.isUpdating&&(t.isUpdating=!1,t.clearAllSnapshots())},this.updateProjection=function(){var e;kl.totalNodes=kl.resolvedTargetDeltas=kl.recalculatedProjection=0,t.nodes.forEach(El),t.nodes.forEach(Bl),t.nodes.forEach(Nl),t.nodes.forEach(Tl),e=kl,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=r?r.root||r:this,this.path=r?[].concat(u(r.path),[r]):[],this.parent=r,this.depth=r?r.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new wl)}return(0,d.Z)(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Eo),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify.apply(t,i)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;var a=this.options,o=a.layoutId,s=a.layout,l=a.visualElement;if(l&&!l.current&&l.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(s||o)&&(this.isLayoutDirty=!0),t){var u,c=function(){return n.root.updateBlockedByResize=!1};t(e,(function(){n.root.updateBlockedByResize=!0,u&&u(),u=function(e,t){var n=performance.now(),i=function i(r){var a=r.timestamp-n;a>=t&&(sr(i),e(a-t))};return or.read(i,!0),function(){return sr(i)}}(c,250),qs.hasAnimatedSinceResize&&(qs.hasAnimatedSinceResize=!1,n.nodes.forEach(Rl))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&l&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,i=e.hasLayoutChanged,r=e.hasRelativeTargetChanged,a=e.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||l.getDefaultTransition()||Vl,s=l.getProps(),u=s.onLayoutAnimationStart,c=s.onLayoutAnimationComplete,d=!n.targetLayout||!gl(n.targetLayout,a)||r,h=!i&&r;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||h||i&&(d||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(t,h);var f=$e($e({},So(o,"layout")),{},{onPlay:u,onComplete:c});(l.shouldReduceMotion||n.options.layoutRoot)&&(f.delay=0,f.type=!1),n.startAnimation(f)}else i||Rl(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sr(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zl),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var i=this.options,r=i.layoutId,a=i.layout;if(void 0!==r||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Dl);this.isUpdating||this.nodes.forEach(Ol),this.isUpdating=!1,this.nodes.forEach(Il),this.nodes.forEach(Ml),this.nodes.forEach(Cl),this.clearAllSnapshots();var e=performance.now();lr.delta=Hn(0,1e3/60,e-lr.timestamp),lr.timestamp=e,lr.isProcessing=!0,ur.update.process(lr),ur.preRender.process(lr),ur.render.process(lr),lr.isProcessing=!1}},{key:"didUpdate",value:function(){var e=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){return e.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(Pl),this.sharedNodes.forEach(Fl)}},{key:"scheduleUpdateProjection",value:function(){or.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;or.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ws(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:i(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!ml(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||Ms(this.latestValues)||r)&&(a(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),i=this.removeElementScroll(n);return t&&(i=this.removeTransform(i)),Wl((e=i).x),Wl(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:i,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return ws();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(Rs(t.x,n.offset.x),Rs(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=ws();ul(t,e);for(var n=0;n<this.path.length;n++){var i=this.path[n],r=i.scroll,a=i.options;if(i!==this.root&&r&&a.layoutScroll){if(r.isRoot){ul(t,e);var o=this.root.scroll;o&&(Rs(t.x,-o.offset.x),Rs(t.y,-o.offset.y))}Rs(t.x,r.offset.x),Rs(t.y,r.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ws();ul(n,e);for(var i=0;i<this.path.length;i++){var r=this.path[i];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Fs(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),Ms(r.latestValues)&&Fs(n,r.latestValues)}return Ms(this.latestValues)&&Fs(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=ws();ul(t,e);for(var n=0;n<this.path.length;n++){var i=this.path[n];if(i.instance&&Ms(i.latestValues)){As(i.latestValues)&&i.updateSnapshot();var r=ws();ul(r,i.measurePageBox()),pl(t,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,r)}}return Ms(this.latestValues)&&pl(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=$e($e($e({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==lr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var i=Boolean(this.resumingFrom)||this!==n;if(!!(t||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var r=this.options,a=r.layout,o=r.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=lr.timestamp,!this.targetDelta&&!this.relativeTarget){var s=this.getClosestProjectingParent();s&&s.layout&&1!==this.animationProgress?(this.relativeParent=s,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ws(),this.relativeTargetOrigin=ws(),vs(this.relativeTargetOrigin,this.layout.layoutBox,s.layout.layoutBox),ul(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var l,u,c;if(this.target||(this.target=ws(),this.targetWithTransforms=ws()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l=this.target,u=this.relativeTarget,c=this.relativeParent.target,fs(l.x,u.x,c.x),fs(l.y,u.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ul(this.target,this.layout.layoutBox),Os(this.target,this.targetDelta)):ul(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var d=this.getClosestProjectingParent();d&&Boolean(d.resumingFrom)===Boolean(this.resumingFrom)&&!d.options.layoutScroll&&d.target&&1!==this.animationProgress?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ws(),this.relativeTargetOrigin=ws(),vs(this.relativeTargetOrigin,this.target,d.target),ul(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kl.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!As(this.parent.latestValues)&&!Cs(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t,i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===lr.timestamp&&(i=!1),!i){var r=this.options,a=r.layout,o=r.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){ul(this.layoutCorrected,this.layout.layoutBox);var s=this.treeScale.x,l=this.treeScale.y;!function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=n.length;if(r){var a,o;t.x=t.y=1;for(var s=0;s<r;s++){o=(a=n[s]).projectionDelta;var l=a.instance;l&&l.style&&"contents"===l.style.display||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fs(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Os(e,o)),i&&Ms(a.latestValues)&&Fs(e,a.latestValues))}t.x=Is(t.x),t.y=Is(t.y)}}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);var u=t.target;if(u){this.projectionDelta||(this.projectionDelta=xs(),this.projectionDeltaWithTransform=xs());var c=this.projectionTransform;hs(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.projectionTransform=bl(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===l||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),kl.recalculatedProjection++}else this.projectionTransform&&(this.projectionDelta=xs(),this.projectionTransform="none",this.scheduleRender())}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.snapshot,r=i?i.latestValues:{},a=$e({},this.latestValues),o=xs();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var s,l=ws(),u=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),d=!c||c.members.length<=1,h=Boolean(u&&!d&&!0===this.options.crossfade&&!this.path.some(Zl));this.animationProgress=0,this.mixTargetDelta=function(n){var i=n/1e3;jl(o.x,e.x,i),jl(o.y,e.y,i),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(vs(l,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,n,i){Ul(e.x,t.x,n.x,i),Ul(e.y,t.y,n.y,i)}(t.relativeTarget,t.relativeTargetOrigin,l,i),s&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(t.relativeTarget,s)&&(t.isProjectionDirty=!1),s||(s=ws()),ul(s,t.relativeTarget)),u&&(t.animationValues=a,function(e,t,n,i,r,a){r?(e.opacity=ua(0,void 0!==n.opacity?n.opacity:1,al(i)),e.opacityExit=ua(void 0!==t.opacity?t.opacity:1,0,ol(i))):a&&(e.opacity=ua(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(var o=0;o<tl;o++){var s="border".concat(el[o],"Radius"),l=rl(t,s),u=rl(n,s);void 0===l&&void 0===u||(l||(l=0),u||(u=0),0===l||0===u||il(l)===il(u)?(e[s]=Math.max(ua(nl(l),nl(u),i),0),(ni.test(u)||ni.test(l))&&(e[s]+="%")):e[s]=u)}(t.rotate||n.rotate)&&(e.rotate=ua(t.rotate||0,n.rotate||0,i))}(a,r,t.latestValues,i,h,d)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=i},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=or.update((function(){qs.hasAnimatedSinceResize=!0,t.currentAnimation=function(e,t,n){var i=zn(e)?e:Po(e);return i.start(ko("",i,t,n)),i.animation}(0,1e3,$e($e({},e),{},{onUpdate:function(n){t.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,i=e.layout,r=e.latestValues;if(t&&n&&i){if(this!==e&&this.layout&&i&&ql(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||ws();var a=us(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=us(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}ul(t,n),Fs(t,r),hs(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new yl),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,i=e.preserveFollowOpacity,r=this.getStack();r&&r.promote(this,i),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var i={},r=0;r<_l.length;r++){var a="rotate"+_l[r];n[a]&&(i[a]=n[a],e.setStaticValue(a,0))}for(var o in e.render(),i)e.setStaticValue(o,i[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};if(!this.instance||this.isSVG)return i;if(!this.isVisible)return{visibility:"hidden"};i.visibility="";var r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=zi(n.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=zi(n.pointerEvents)||""),this.hasProjected&&!Ms(this.latestValues)&&(o.transform=r?r({},""):"none",this.hasProjected=!1),o}var s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),i.transform=bl(this.projectionDeltaWithTransform,this.treeScale,s),r&&(i.transform=r(s,i.transform));var l=this.projectionDelta,u=l.x,c=l.y;for(var d in i.transformOrigin="".concat(100*u.origin,"% ").concat(100*c.origin,"% 0"),a.animationValues?i.opacity=a===this?null!==(t=null!==(e=s.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,In)if(void 0!==s[d]){var h=In[d],f=h.correct,p=h.applyTo,v="none"===i.transform?s[d]:f(s[d],a);if(p)for(var m=p.length,g=0;g<m;g++)i[p[g]]=v;else i[d]=v}return this.options.layoutId&&(i.pointerEvents=a===this?zi(n.pointerEvents)||"":"none"),i}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Dl),this.root.sharedNodes.clear()}}]),e}()}function Ml(e){e.updateLayout()}function Cl(e){var t,n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var i=e.layout,r=i.layoutBox,a=i.measuredBox,o=e.options.animationType,s=n.source!==e.layout.source;"size"===o?_s((function(e){var t=s?n.measuredBox[e]:n.layoutBox[e],i=us(t);t.min=r[e].min,t.max=t.min+i})):ql(o,n.layoutBox,r)&&_s((function(t){var i=s?n.measuredBox[t]:n.layoutBox[t],a=us(r[t]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var l=xs();hs(l,r,n.layoutBox);var u=xs();s?hs(u,e.applyTransform(a,!0),n.measuredBox):hs(u,r,n.layoutBox);var c=!ml(l),d=!1;if(!e.resumeFrom){var h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){var f=h.snapshot,p=h.layout;if(f&&p){var v=ws();vs(v,n.layoutBox,f.layoutBox);var m=ws();vs(m,r,p.layoutBox),gl(v,m)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){var g=e.options.onExitComplete;g&&g()}e.options.transition=void 0}function El(e){kl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Tl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Pl(e){e.clearSnapshot()}function Dl(e){e.clearMeasurements()}function Ol(e){e.isLayoutDirty=!1}function Il(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Bl(e){e.resolveTargetDelta()}function Nl(e){e.calcProjection()}function zl(e){e.resetRotation()}function Fl(e){e.removeLeadSnapshot()}function jl(e,t,n){e.translate=ua(t.translate,0,n),e.scale=ua(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ul(e,t,n,i){e.min=ua(t.min,n.min,i),e.max=ua(t.max,n.max,i)}function Zl(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var Vl={duration:.45,ease:[.4,0,.1,1]},Gl=function(e){return"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e)},Hl=Gl("applewebkit/")&&!Gl("chrome/")?Math.round:ir;function Wl(e){e.min=Hl(e.min),e.max=Hl(e.max)}function ql(e,t,n){return"position"===e||"preserve-aspect"===e&&!cs(Ll(t),Ll(n),.2)}var Xl=Al({attachResizeListener:function(e,t){return Gi(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),Yl={current:void 0},Ql=Al({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!Yl.current){var e=new Xl({});e.mount(window),e.setOptions({layoutScroll:!0}),Yl.current=e}return Yl.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),Kl={pan:{Feature:Ws},drag:{Feature:Gs,ProjectionNode:Ql,MeasureLayout:Js}};var Jl=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var $l=4;function eu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Er(n<=$l,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var i=function(e){var t=Jl.exec(e);if(!t)return[,];var n=o(t,3);return[n[1],n[2]]}(e),r=o(i,2),a=r[0],s=r[1];if(a){var l=window.getComputedStyle(t).getPropertyValue(a);return l?l.trim():Vn(s)?eu(s,t,n+1):s}}function tu(e,t,n){var i=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),r=e.current;if(!(r instanceof Element))return{target:i,transitionEnd:n};for(var a in n&&(n=$e({},n)),e.values.forEach((function(e){var t=e.get();if(Vn(t)){var n=eu(t,r);n&&e.set(n)}})),i){var o=i[a];if(Vn(o)){var s=eu(o,r);s&&(i[a]=s,n||(n={}),void 0===n[a]&&(n[a]=o))}}return{target:i,transitionEnd:n}}var nu=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),iu=function(e){return nu.has(e)},ru=function(e){return e===Wn||e===ii},au=function(e,t){return parseFloat(e.split(", ")[t])},ou=function(e,t){return function(n,i){var r=i.transform;if("none"===r||!r)return 0;var a=r.match(/^matrix3d\((.+)\)$/);if(a)return au(a[1],t);var o=r.match(/^matrix\((.+)\)$/);return o?au(o[1],e):0}},su=new Set(["x","y","z"]),lu=Rn.filter((function(e){return!su.has(e)}));var uu={width:function(e,t){var n=e.x,i=t.paddingLeft,r=void 0===i?"0":i,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(r)-parseFloat(o)},height:function(e,t){var n=e.y,i=t.paddingTop,r=void 0===i?"0":i,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(r)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,i=t.top;return parseFloat(i)+(n.max-n.min)},right:function(e,t){var n=e.x,i=t.left;return parseFloat(i)+(n.max-n.min)},x:ou(4,13),y:ou(5,14)};uu.translateX=uu.x,uu.translateY=uu.y;var cu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=$e({},t),i=$e({},i);var r=Object.keys(t).filter(iu),a=[],s=!1,l=[];if(r.forEach((function(r){var o=e.getValue(r);if(e.hasValue(r)){var u,c=n[r],d=Io(c),h=t[r];if(Ri(h)){var f=h.length,p=null===h[0]?1:0;c=h[p],d=Io(c);for(var v=p;v<f&&null!==h[v];v++)u?Er(Io(h[v])===u,"All keyframes must be of the same type"):(u=Io(h[v]),Er(u===d||ru(d)&&ru(u),"Keyframes must be of the same dimension as the current value"))}else u=Io(h);if(d!==u)if(ru(d)&&ru(u)){var m=o.get();"string"===typeof m&&o.set(parseFloat(m)),"string"===typeof h?t[r]=parseFloat(h):Array.isArray(h)&&u===ii&&(t[r]=h.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===u||void 0===u?void 0:u.transform)&&(0===c||0===h)?0===c?o.set(u.transform(c)):t[r]=d.transform(h):(s||(a=function(e){var t=[];return lu.forEach((function(n){var i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),s=!0),l.push(r),i[r]=void 0!==i[r]?i[r]:t[r],o.jump(h))}})),l.length){var u=l.indexOf("height")>=0?window.pageYOffset:null,c=function(e,t,n){var i=t.measureViewportBox(),r=t.current,a=getComputedStyle(r),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=uu[e](i,a)})),t.render();var l=t.measureViewportBox();return n.forEach((function(n){var i=t.getValue(n);i&&i.jump(s[n]),e[n]=uu[n](l,a)})),e}(t,e,l);return a.length&&a.forEach((function(t){var n=o(t,2),i=n[0],r=n[1];e.getValue(i).set(r)})),e.render(),cn&&null!==u&&window.scrollTo({top:u}),{target:c,transitionEnd:i}}return{target:t,transitionEnd:i}};function du(e,t,n,i){return function(e){return Object.keys(e).some(iu)}(t)?cu(e,t,n,i):{target:t,transitionEnd:i}}var hu={current:null},fu={current:!1};var pu=new WeakMap,vu=["willChange"],mu=["children"],gu=Object.keys(_n),Lu=gu.length,yu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],bu=gn.length,xu=function(){function e(t){var n=this,i=t.parent,r=t.props,a=t.presenceContext,o=t.reducedMotionConfig,s=t.visualState,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return or.render(n.render,!1,!0)};var u=s.latestValues,d=s.renderState;this.latestValues=u,this.baseTarget=$e({},u),this.initialValues=r.initial?$e({},u):{},this.renderState=d,this.parent=i,this.props=r,this.presenceContext=a,this.depth=i?i.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.isControllingVariants=Ln(r),this.isVariantNode=yn(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(i&&i.current);var h=this.scrapeMotionValuesFromProps(r,{}),f=h.willChange,p=Li(h,vu);for(var v in p){var m=p[v];void 0!==u[v]&&zn(m)&&(m.set(u[v],!1),Ao(f)&&f.add(v))}}return(0,d.Z)(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,pu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,n){return t.bindToMotionValue(n,e)})),fu.current||function(){if(fu.current=!0,cn)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return hu.current=e.matches};e.addListener(t),t()}else hu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||hu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in pu.delete(this.current),this.projection&&this.projection.unmount(),sr(this.notifyUpdate),sr(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,i=Bn.has(e),r=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&or.update(n.notifyUpdate,!1,!0),i&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){r(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,n,i){for(var r,a,o=this,s=(e.children,Li(e,mu)),l=0;l<Lu;l++){var u=gu[l],c=_n[u],d=c.isEnabled,h=c.Feature,f=c.ProjectionNode,p=c.MeasureLayout;f&&(r=f),d(s)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(a=p))}if(!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);var v=s.layoutId,m=s.layout,g=s.drag,L=s.dragConstraints,y=s.layoutScroll,b=s.layoutRoot;this.projection.setOptions({layoutId:v,layout:m,alwaysMeasureLayout:Boolean(g)||L&&fn(L),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof m?m:"both",initialPromotionConfig:i,layoutScroll:y,layoutRoot:b})}return a}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ws()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<yu.length;n++){var i=yu[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);var r=e["on"+i];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=function(e,t,n){var i=t.willChange;for(var r in t){var a=t[r],o=n[r];if(zn(a))e.addValue(r,a),Ao(i)&&i.add(r);else if(zn(o))e.addValue(r,Po(a,{owner:e})),Ao(i)&&i.remove(r);else if(o!==a)if(e.hasValue(r)){var s=e.getValue(r);!s.hasAnimated&&s.set(a)}else{var l=e.getStaticValue(r);e.addValue(r,Po(void 0!==l?l:a,{owner:e}))}}for(var u in n)void 0===t[u]&&e.removeValue(u);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},n=0;n<bu;n++){var i=gn[n],r=this.props[i];(pn(r)||!1===r)&&(t[i]=r)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Po(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,i="string"===typeof n||"object"===typeof n?null===(t=Ii(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==i)return i;var r=this.getBaseTargetFromProps(this.props,e);return void 0===r||zn(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new Eo),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.events[e]).notify.apply(t,i)}}}]),e}(),wu=["transition","transitionEnd"],_u=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,i=t.style;delete n[e],delete i[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var i=e.transition,r=e.transitionEnd,a=Li(e,wu),o=t.transformValues,s=function(e,t,n){var i={};for(var r in e){var a=jo(r,t);if(void 0!==a)i[r]=a;else{var o=n.getValue(r);o&&(i[r]=o.get())}}return i}(a,i||{},this);if(o&&(r&&(r=o(r)),a&&(a=o(a)),s&&(s=o(s))),n){!function(e,t,n){var i,r,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var s=0;s<o;s++){var l=a[s],u=t[l],c=null;Array.isArray(u)&&(c=u[0]),null===c&&(c=null!==(r=null!==(i=n[l])&&void 0!==i?i:e.readValue(l))&&void 0!==r?r:t[l]),void 0!==c&&null!==c&&("string"===typeof c&&(/^\-?\d*\.?\d+$/.test(c)||xo(c))?c=parseFloat(c):!Bo(c)&&_a.test(u)&&(c=bo(l,u)),e.addValue(l,Po(c,{owner:e})),void 0===n[l]&&(n[l]=c),null!==c&&e.setBaseTarget(l,c))}}(this,a,s);var l=function(e,t,n,i){var r=tu(e,t,i);return du(e,t=r.target,n,i=r.transitionEnd)}(this,a,s,r);r=l.transitionEnd,a=l.target}return $e({transition:i,transitionEnd:r},a)}}]),n}(xu);var Su=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"readValueFromInstance",value:function(e,t){if(Bn.has(t)){var n=yo(t);return n&&n.default||0}var i,r=(i=e,window.getComputedStyle(i)),a=(Zn(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return js(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,i){ui(e,t,n,i.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return Di(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;zn(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,n,i){Ei(e,t,n,i)}}]),n}(_u);function ku(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,p.Z)(e)););return e}function Au(){return Au="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=ku(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Au.apply(this,arguments)}var Mu=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return(0,d.Z)(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(Bn.has(t)){var n=yo(t);return n&&n.default||0}return t=Ti.has(t)?t:Ci(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return ws()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return Oi(e,t)}},{key:"build",value:function(e,t,n,i){_i(e,t,n,this.isSVGTag,i.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,i){Pi(e,t,0,i)}},{key:"mount",value:function(e){this.isSVGTag=ki(e.tagName),Au((0,p.Z)(n.prototype),"mount",this).call(this,e)}}]),n}(_u),Cu=function(e,t){return On(e)?new Mu(t,{enableHardwareAcceleration:!1}):new Su(t,{enableHardwareAcceleration:!0})},Eu={layout:{ProjectionNode:Ql,MeasureLayout:Js}},Tu=$e($e($e($e({},es),Sr),Kl),Eu),Pu=Pn((function(e,t){return function(e,t,n,i){var r=t.forwardMotionProps,a=void 0!==r&&r;return $e($e({},On(e)?Zi:Vi),{},{preloadedFeatures:n,useRender:Mi(a),createVisualElement:i,Component:e})}(e,t,Tu,Cu)}));var Du=function(){var t=Jt().t,n=o((0,e.useState)(!1),2),i=n[0],r=n[1];return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("nav",{className:"FloatingNav",children:[(0,We.jsx)("div",{className:"FloatingLogoBtn",children:(0,We.jsx)("img",{src:on,alt:""})}),(0,We.jsxs)("ul",{children:[(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#what_we_can_help",className:"SubFont",children:t("What we can help")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#weve_worked_with",className:"SubFont",children:t("We've worked with")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#who_we_can_help",className:"SubFont",children:t("Who we can help")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#who_we_are",className:"SubFont",children:t("Who we are")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn SubFont LanguageSelect",children:(0,We.jsx)(tn,{className:"FloatingMenuBtn SubFont"})}),(0,We.jsx)("li",{className:"FloatingMenuBtn TalkBtn",children:(0,We.jsx)("a",{href:"#lets_talk",className:"SubFont",children:t("Let's talk")})})]})]}),(0,We.jsxs)(Pu.nav,{className:"FloatingNavResp",animate:i?{width:"94vw"}:{width:"max-content"},children:[(0,We.jsx)(Pu.div,{onClick:function(){return r(!i)},animate:i?{width:"100%"}:"",className:"FloatingLogoBtn",children:(0,We.jsx)("img",{src:on,alt:""})}),(0,We.jsxs)(Pu.ul,{initial:{display:"none",height:"0"},transition:{duration:.1},animate:i?{display:"flex",opacity:"1",height:"100%"}:{display:"none",opacity:"0"},children:[(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#what_we_can_help",className:"SubFont",children:t("What we can help")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#weve_worked_with",className:"SubFont",children:t("We've worked with")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#who_we_can_help",className:"SubFont",children:t("Who we can help")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn",children:(0,We.jsx)("a",{href:"#who_we_are",className:"SubFont",children:t("Who we are")})}),(0,We.jsx)("li",{className:"FloatingMenuBtn TalkBtn",children:(0,We.jsx)("a",{href:"#lets_talk",className:"SubFont",children:t("Let's talk")})})]})]})]})},Ou=function(){return(0,We.jsx)("div",{children:(0,We.jsxs)("div",{children:[(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Privacy Policy for Deep Bridge"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"At Deep Bridge, accessible from https://deepbridge.com, one of our main priorities is the privacy of our visitors. This Privacy Policy document contains types of information that is collected and recorded by Deep Bridge and how we use it."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"If you have additional questions or require more information about our Privacy Policy, do not hesitate to contact us."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"This Privacy Policy applies only to our online activities and is valid for visitors to our website with regards to the information that they shared and/or collect in Deep Bridge. This policy is not applicable to any information collected offline or via channels other than this website."}),(0,We.jsx)("br",{})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Consent"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"By using our website, you hereby consent to our Privacy Policy and agree to its terms."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Information we collect"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The personal information that you are asked to provide, and the reasons why you are asked to provide it, will be made clear to you at the point we ask you to provide your personal information."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"If you contact us directly, we may receive additional information about you such as your name, email address, phone number, the contents of the message and/or attachments you may send us, and any other information you may choose to provide."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"When you register for an Account, we may ask for your contact information, including items such as name, company name, address, email address, and telephone number."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"How we use your information"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"We use the information we collect in various ways, including to:"}),(0,We.jsxs)("ul",{className:"ColUl",children:[(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Provide, operate, and maintain our website"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Improve, personalize, and expand our website"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Understand and analyze how you use our website"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Develop new products, services, features, and functionality"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Communicate with you, either directly or through one of our partners, including for customer service, to provide you with updates and other information relating to the website, and for marketing and promotional purposes"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Send you emails"}),(0,We.jsx)("li",{className:"SubFont SectionDescription",children:"Find and prevent fraud"})]})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Log Files"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Deep Bridge follows a standard procedure of using log files. These files log visitors when they visit websites. All hosting companies do this and a part of hosting services' analytics. The information collected by log files include internet protocol (IP) addresses, browser type, Internet Service Provider (ISP), date and time stamp, referring/exit pages, and possibly the number of clicks. These are not linked to any information that is personally identifiable. The purpose of the information is for analyzing trends, administering the site, tracking users' movement on the website, and gathering demographic information."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Advertising Partners Privacy Policies"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"You may consult this list to find the Privacy Policy for each of the advertising partners of Deep Bridge."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Third-party ad servers or ad networks uses technologies like cookies, JavaScript, or Web Beacons that are used in their respective advertisements and links that appear on Deep Bridge, which are sent directly to users' browser. They automatically receive your IP address when this occurs. These technologies are used to measure the effectiveness of their advertising campaigns and/or to personalize the advertising content that you see on websites that you visit."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Note that Deep Bridge has no access to or control over these cookies that are used by third-party advertisers."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Third Party Privacy Policies"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Deep Bridge's Privacy Policy does not apply to other advertisers or websites. Thus, we are advising you to consult the respective Privacy Policies of these third-party ad servers for more detailed information. It may include their practices and instructions about how to opt-out of certain options. "}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"You can choose to disable cookies through your individual browser options. To know more detailed information about cookie management with specific web browsers, it can be found at the browsers' respective websites."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"CCPA Privacy Rights (Do Not Sell My Personal Information)"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Under the CCPA, among other rights, California consumers have the right to:"}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Request that a business that collects a consumer's personal data disclose the categories and specific pieces of personal data that a business has collected about consumers."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Request that a business delete any personal data about the consumer that a business has collected."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Request that a business that sells a consumer's personal data, not sell the consumer's personal data."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"If you make a request, we have one month to respond to you. If you would like to exercise any of these rights, please contact us."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"GDPR Data Protection Rights"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"We would like to make sure you are fully aware of all of your data protection rights. Every user is entitled to the following:"}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to access \u2013 You have the right to request copies of your personal data. We may charge you a small fee for this service."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to rectification \u2013 You have the right to request that we correct any information you believe is inaccurate. You also have the right to request that we complete the information you believe is incomplete."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to erasure \u2013 You have the right to request that we erase your personal data, under certain conditions."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to restrict processing \u2013 You have the right to request that we restrict the processing of your personal data, under certain conditions."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to object to processing \u2013 You have the right to object to our processing of your personal data, under certain conditions."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"The right to data portability \u2013 You have the right to request that we transfer the data that we have collected to another organization, or directly to you, under certain conditions."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"If you make a request, we have one month to respond to you. If you would like to exercise any of these rights, please contact us."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Children's Information"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Another part of our priority is adding protection for children while using the internet. We encourage parents and guardians to observe, participate in, and/or monitor and guide their online activity."}),(0,We.jsx)("br",{}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"Deep Bridge does not knowingly collect any Personal Identifiable Information from children under the age of 13. If you think that your child provided this kind of information on our website, we strongly encourage you to contact us immediately and we will do our best efforts to promptly remove such information from our records."})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Changes to This Privacy Policy"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"We may update our Privacy Policy from time to time. Thus, we advise you to review this page periodically for any changes. We will notify you of any changes by posting the new Privacy Policy on this page. These changes are effective immediately, after they are posted on this page."}),(0,We.jsx)("br",{}),(0,We.jsxs)("p",{className:"SubFont SectionDescription",children:["Our Privacy Policy was created with the help of the ",(0,We.jsx)("a",{href:"https://www.termsfeed.com/privacy-policy-generator/",children:"Privacy Policy Generator"}),"."]})]}),(0,We.jsxs)("div",{className:"TopBottomMargin",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:"Contact Us"}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:"If you have any questions or suggestions about our Privacy Policy, do not hesitate to contact us."})]})]})})},Iu=function(){return(0,We.jsx)("div",{id:"privacy_policy",className:"FirstSection SectionWidth",children:(0,We.jsx)(Ou,{})})};var Ru={some:0,all:1};function Bu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.root,r=n.margin,a=n.amount,o=void 0===a?"some":a,s=function(e,t,n){var i;if("string"===typeof e){var r=document;t&&(Er(Boolean(t.current),"Scope provided, but no element detected."),r=t.current),n?(null!==(i=n[e])&&void 0!==i||(n[e]=r.querySelectorAll(e)),e=n[e]):e=r.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}(e),l=new WeakMap,u=new IntersectionObserver((function(e){e.forEach((function(e){var n=l.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){var i=t(e);"function"===typeof i?l.set(e.target,i):u.unobserve(e.target)}else n&&(n(e),l.delete(e.target))}))}),{root:i,rootMargin:r,threshold:"number"===typeof o?o:Ru[o]});return s.forEach((function(e){return u.observe(e)})),function(){return u.disconnect()}}function Nu(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.root,r=n.margin,a=n.amount,s=n.once,l=void 0!==s&&s,u=o((0,e.useState)(!1),2),c=u[0],d=u[1];return(0,e.useEffect)((function(){if(!(!t.current||l&&c)){var e={root:i&&i.current||void 0,margin:r,amount:a};return Bu(t.current,(function(){return d(!0),l?void 0:function(){return d(!1)}}),e)}}),[i,t,r,l]),c}var zu=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsxs)("div",{className:"HeroTitleGroup",children:[(0,We.jsxs)("div",{className:"HeroTitleCol",children:[(0,We.jsx)("div",{className:"HeroTitleRow",children:(0,We.jsxs)(Pu.h2,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.1},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"MainFont HeroText",children:[t("hero.Everything is")," ",(0,We.jsx)("span",{className:"HerohighLight1",children:t("hero.Relative")})]})}),(0,We.jsx)("div",{className:"HeroTitleRow"}),(0,We.jsxs)(Pu.h2,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.6},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"MainFont HeroText",children:[t("hero.Except for what is")," ",(0,We.jsxs)("span",{className:"HerohighLight2",children:[t("hero.Absolute")," "]})]})]}),(0,We.jsx)(Pu.p,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:1},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"MainFont HeroDescription",children:t("hero.Our mission is to connect humans on a deep level.")})]})},Fu=n(165),ju=n(861),Uu=n(2);function Zu(){Zu=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,i,r){var a=new RegExp(e,i);return t.set(a,r||t.get(e)),(0,v.Z)(a,n.prototype)}function i(e,n){var i=t.get(n);return Object.keys(i).reduce((function(t,n){var r=i[n];if("number"==typeof r)t[n]=e[r];else{for(var a=0;void 0===e[r[a]]&&a+1<r.length;)a++;t[n]=e[r[a]]}return t}),Object.create(null))}return(0,h.Z)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=i(n,this);var r=n.indices;r&&(r.groups=i(r,this))}return n},n.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var a=t.get(this);return e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){var n=a[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof r){var o=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,Uu.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(i(e,o)),r.apply(this,e)}))}return e[Symbol.replace].call(this,n,r)},Zu.apply(this,arguments)}function Vu(e,t,n,i){return Vu="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var r,a=ku(e,t);if(a){if((r=Object.getOwnPropertyDescriptor(a,t)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,t,r)}else Ke(i,t,n);return!0},Vu(e,t,n,i)}function Gu(e,t,n,i,r){if(!Vu(e,t,n,i||e)&&r)throw new TypeError("failed to set property");return n}var Hu,Wu,qu=["texture"],Xu=["texture"],Yu=["name"],Qu=["material"],Ku=["enabled"],Ju=Object.create,$u=Object.defineProperty,ec=Object.getOwnPropertyDescriptor,tc=Object.getOwnPropertyNames,nc=Object.getPrototypeOf,ic=Object.prototype.hasOwnProperty,rc=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},ac=function(e,t,n){return n=null!=e?Ju(nc(e)):{},function(e,t,n,i){if(t&&"object"==typeof t||"function"==typeof t){var r,a=(0,x.Z)(tc(t));try{var o=function(){var a=r.value;!ic.call(e,a)&&a!==n&&$u(e,a,{get:function(){return t[a]},enumerable:!(i=ec(t,a))||i.enumerable})};for(a.s();!(r=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}return e}(!t&&e&&e.__esModule?n:$u(n,"default",{value:e,enumerable:!0}),e)},oc=rc((function(e,t){!function(n,i){"object"==typeof e?t.exports=i():"function"==typeof define&&define.amd?define(i):n.Alea=i()}(e,(function(){return e.importState=function(t){var n=new e;return n.importState(t),n},e;function e(){return function(e){var t=0,n=0,i=0,r=1;0==e.length&&(e=[+new Date]);var a=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}();t=a(" "),n=a(" "),i=a(" ");for(var o=0;o<e.length;o++)(t-=a(e[o]))<0&&(t+=1),(n-=a(e[o]))<0&&(n+=1),(i-=a(e[o]))<0&&(i+=1);a=null;var s=function(){var e=2091639*t+2.3283064365386963e-10*r;return t=n,n=i,i=e-(r=0|e)};return s.next=s,s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.version="Alea 0.9",s.args=e,s.exportState=function(){return[t,n,i,r]},s.importState=function(e){t=+e[0]||0,n=+e[1]||0,i=+e[2]||0,r=+e[3]||0},s}(Array.prototype.slice.call(arguments))}}))})),sc=rc((function(e,t){!function(n,i){"object"==typeof e&&typeof t<"u"?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})}(e,(function(e){e.SVD=function(e,t,n,i,r){if(t=void 0===t||t,n=void 0===n||n,r=1e-64/(i=i||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var a,o,s,l,u,c,d,h,f,p,v,m,g=e[0].length,L=e.length;if(L<g)throw new TypeError("Invalid matrix: m < n");for(var y=[],b=[],x=[],w="f"===t?L:g,_=p=d=0;_<L;_++)b[_]=new Array(w).fill(0);for(_=0;_<g;_++)x[_]=new Array(g).fill(0);var S,k=new Array(g).fill(0);for(_=0;_<L;_++)for(a=0;a<g;a++)b[_][a]=e[_][a];for(_=0;_<g;_++){for(y[_]=d,f=0,s=_+1,a=_;a<L;a++)f+=Math.pow(b[a][_],2);if(f<r)d=0;else for(h=(c=b[_][_])*(d=c<0?Math.sqrt(f):-Math.sqrt(f))-f,b[_][_]=c-d,a=s;a<g;a++){for(f=0,o=_;o<L;o++)f+=b[o][_]*b[o][a];for(c=f/h,o=_;o<L;o++)b[o][a]=b[o][a]+c*b[o][_]}for(k[_]=d,f=0,a=s;a<g;a++)f+=Math.pow(b[_][a],2);if(f<r)d=0;else{for(h=(c=b[_][_+1])*(d=c<0?Math.sqrt(f):-Math.sqrt(f))-f,b[_][_+1]=c-d,a=s;a<g;a++)y[a]=b[_][a]/h;for(a=s;a<L;a++){for(f=0,o=s;o<g;o++)f+=b[a][o]*b[_][o];for(o=s;o<g;o++)b[a][o]=b[a][o]+f*y[o]}}p<(v=Math.abs(k[_])+Math.abs(y[_]))&&(p=v)}if(n)for(_=g-1;0<=_;_--){if(0!==d){for(h=b[_][_+1]*d,a=s;a<g;a++)x[a][_]=b[_][a]/h;for(a=s;a<g;a++){for(f=0,o=s;o<g;o++)f+=b[_][o]*x[o][a];for(o=s;o<g;o++)x[o][a]=x[o][a]+f*x[o][_]}}for(a=s;a<g;a++)x[_][a]=0,x[a][_]=0;x[_][_]=1,d=y[_],s=_}if(t){if("f"===t)for(_=g;_<L;_++){for(a=g;a<L;a++)b[_][a]=0;b[_][_]=1}for(_=g-1;0<=_;_--){for(s=_+1,d=k[_],a=s;a<w;a++)b[_][a]=0;if(0!==d){for(h=b[_][_]*d,a=s;a<w;a++){for(f=0,o=s;o<L;o++)f+=b[o][_]*b[o][a];for(c=f/h,o=_;o<L;o++)b[o][a]=b[o][a]+c*b[o][_]}for(a=_;a<L;a++)b[a][_]=b[a][_]/d}else for(a=_;a<L;a++)b[a][_]=0;b[_][_]=b[_][_]+1}}for(i*=p,o=g-1;0<=o;o--)for(var A=0;A<50;A++){for(S=!1,s=o;0<=s;s--){if(Math.abs(y[s])<=i){S=!0;break}if(Math.abs(k[s-1])<=i)break}if(!S)for(u=0,l=s-(f=1),_=s;_<o+1&&(c=f*y[_],y[_]=u*y[_],!(Math.abs(c)<=i));_++)if(d=k[_],k[_]=Math.sqrt(c*c+d*d),u=d/(h=k[_]),f=-c/h,t)for(a=0;a<L;a++)v=b[a][l],m=b[a][_],b[a][l]=v*u+m*f,b[a][_]=-v*f+m*u;if(m=k[o],s===o){if(m<0&&(k[o]=-m,n))for(a=0;a<g;a++)x[a][o]=-x[a][o];break}for(p=k[s],c=(((v=k[o-1])-m)*(v+m)+((d=y[o-1])-(h=y[o]))*(d+h))/(2*h*v),d=Math.sqrt(c*c+1),c=((p-m)*(p+m)+h*(v/(c<0?c-d:c+d)-h))/p,_=s+(f=u=1);_<o+1;_++){if(d=y[_],v=k[_],h=f*d,d*=u,m=Math.sqrt(c*c+h*h),c=p*(u=c/(y[_-1]=m))+d*(f=h/m),d=-p*f+d*u,h=v*f,v*=u,n)for(a=0;a<g;a++)p=x[a][_-1],m=x[a][_],x[a][_-1]=p*u+m*f,x[a][_]=-p*f+m*u;if(m=Math.sqrt(c*c+h*h),c=(u=c/(k[_-1]=m))*d+(f=h/m)*v,p=-f*d+u*v,t)for(a=0;a<L;a++)v=b[a][_-1],m=b[a][_],b[a][_-1]=v*u+m*f,b[a][_]=-v*f+m*u}y[s]=0,y[o]=c,k[o]=p}for(_=0;_<g;_++)k[_]<i&&(k[_]=0);return{u:b,q:k,v:x}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})}))})),lc=rc((function(e,t){!function(n,i){"object"==typeof e&&typeof t<"u"?t.exports=i():"function"==typeof define&&define.amd?define(i):(n=n||self).TinyQueue=i()}(e,(function(){var e=function(e,n){if(void 0===e&&(e=[]),void 0===n&&(n=t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function t(e,t){return e<t?-1:e>t?1:0}return e.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(e){for(var t=this.data,n=this.compare,i=t[e];e>0;){var r=e-1>>1,a=t[r];if(n(i,a)>=0)break;t[e]=a,e=r}t[e]=i},e.prototype._down=function(e){for(var t=this.data,n=this.compare,i=this.length>>1,r=t[e];e<i;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,r)>=0)break;t[e]=o,e=a}t[e]=r},e}))})),uc=rc((function(e,t){var n=lc();function i(e,t,i){t=t||1;for(var o,s,l,u,c=0;c<e[0].length;c++){var d=e[0][c];(!c||d[0]<o)&&(o=d[0]),(!c||d[1]<s)&&(s=d[1]),(!c||d[0]>l)&&(l=d[0]),(!c||d[1]>u)&&(u=d[1])}var h=l-o,f=u-s,p=Math.min(h,f),v=p/2;if(0===p){var m=[o,s];return m.distance=0,m}for(var g=new n(void 0,r),L=o;L<l;L+=p)for(var y=s;y<u;y+=p)g.push(new a(L+v,y+v,v,e));var b=function(e){for(var t=0,n=0,i=0,r=e[0],o=0,s=r.length,l=s-1;o<s;l=o++){var u=r[o],c=r[l],d=u[0]*c[1]-c[0]*u[1];n+=(u[0]+c[0])*d,i+=(u[1]+c[1])*d,t+=3*d}return 0===t?new a(r[0][0],r[0][1],0,e):new a(n/t,i/t,0,e)}(e),x=new a(o+h/2,s+f/2,0,e);x.d>b.d&&(b=x);for(var w=g.length;g.length;){var _=g.pop();_.d>b.d&&(b=_,i&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,w)),!(_.max-b.d<=t)&&(v=_.h/2,g.push(new a(_.x-v,_.y-v,v,e)),g.push(new a(_.x+v,_.y-v,v,e)),g.push(new a(_.x-v,_.y+v,v,e)),g.push(new a(_.x+v,_.y+v,v,e)),w+=4)}i&&(console.log("num probes: "+w),console.log("best distance: "+b.d));var S=[b.x,b.y];return S.distance=b.d,S}function r(e,t){return t.max-e.max}function a(e,t,n,i){this.x=e,this.y=t,this.h=n,this.d=function(e,t,n){for(var i=!1,r=1/0,a=0;a<n.length;a++)for(var s=n[a],l=0,u=s.length,c=u-1;l<u;c=l++){var d=s[l],h=s[c];d[1]>t!=h[1]>t&&e<(h[0]-d[0])*(t-d[1])/(h[1]-d[1])+d[0]&&(i=!i),r=Math.min(r,o(e,t,d,h))}return 0===r?0:(i?1:-1)*Math.sqrt(r)}(e,t,i),this.max=this.d+this.h*Math.SQRT2}function o(e,t,n,i){var r=n[0],a=n[1],o=i[0]-r,s=i[1]-a;if(0!==o||0!==s){var l=((e-r)*o+(t-a)*s)/(o*o+s*s);l>1?(r=i[0],a=i[1]):l>0&&(r+=o*l,a+=s*l)}return(o=e-r)*o+(s=t-a)*s}n.default&&(n=n.default),t.exports=i,t.exports.default=i})),cc=rc((function(e){!function(){var t=function(){this.init()};t.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||c(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var r=t._howls[i]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[i]._soundById(r[a]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var r=t._howls[i]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[i]._soundById(r[a]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(i){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t=typeof Audio<"u"?new Audio:null}catch(c){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",a=r.match(/OPR\/([0-6].)/g),o=a&&parseInt(a[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),l=r.match(/Version\/(.*?) /),u=s&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(o||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(u){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),o=0;o<a.length;o++){var s=e._howls[r]._soundById(a[o]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),typeof l.start>"u"?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&typeof Promise<"u"&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new t,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return n.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var a,s;if(e._format&&e._format[i])a=e._format[i];else{if("string"!=typeof(s=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(a=/^data:audio\/([^;,]+);/i.exec(s))||(a=/\.([^.]+)$/.exec(s.split("?",1)[0])),a&&(a=a[1].toLowerCase())}if(a||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),a&&n.codecs(a)){t=e._src[i];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&o(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var i=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(typeof e>"u"&&(e="__default",!i._playLock)){for(var a=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(a++,r=i._sounds[o]._id);1===a?e=null:r=null}}var s=r?i._soundById(r):i._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==i._state){s._sprite=e,s._ended=!1;var l=s._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(r&&!s._paused)return t||i._loadQueue("play"),s._id;i._webAudio&&n._autoResume();var u=Math.max(0,s._seek>0?s._seek:i._sprite[e][0]/1e3),c=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(s._rate),h=i._sprite[e][0]/1e3,f=(i._sprite[e][0]+i._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var p=function(){s._paused=!1,s._seek=u,s._start=h,s._stop=f,s._loop=!(!s._loop&&!i._sprite[e][2])};if(!(u>=f)){var v=s._node;if(i._webAudio){var m=function(){i._playLock=!1,p(),i._refreshBuffer(s);var e=s._muted||i._muted?0:s._volume;v.gain.setValueAtTime(e,n.ctx.currentTime),s._playStart=n.ctx.currentTime,typeof v.bufferSource.start>"u"?s._loop?v.bufferSource.noteGrainOn(0,u,86400):v.bufferSource.noteGrainOn(0,u,c):s._loop?v.bufferSource.start(0,u,86400):v.bufferSource.start(0,u,c),d!==1/0&&(i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),d)),t||setTimeout((function(){i._emit("play",s._id),i._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(s._id))}else{var g=function(){v.currentTime=u,v.muted=s._muted||i._muted||n._muted||v.muted,v.volume=s._volume*n.volume(),v.playbackRate=s._rate;try{var r=v.play();if(r&&typeof Promise<"u"&&(r instanceof Promise||"function"==typeof r.then)?(i._playLock=!0,p(),r.then((function(){i._playLock=!1,v._unlocked=!0,t?i._loadQueue():i._emit("play",s._id)})).catch((function(){i._playLock=!1,i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(i._playLock=!1,p(),i._emit("play",s._id)),v.playbackRate=s._rate,v.paused)return void i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),d):(i._endTimers[s._id]=function(){i._ended(s),v.removeEventListener("ended",i._endTimers[s._id],!1)},v.addEventListener("ended",i._endTimers[s._id],!1))}catch(a){i._emit("playerror",s._id,a)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===v.src&&(v.src=i._src,v.load());var L=window&&window.ejecta||!v.readyState&&n._navigator.isCocoonJS;if(v.readyState>=3||L)g();else{i._playLock=!0,i._state="loading";v.addEventListener(n._canPlayEvent,(function e(){i._state="loaded",g(),v.removeEventListener(n._canPlayEvent,e,!1)}),!1),i._clearTimer(s._id)}}return s._id}i._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),i=0;i<n.length;i++){t._clearTimer(n[i]);var r=t._soundById(n[i]);if(r&&!r._paused&&(r._seek=t.seek(n[i]),r._rateSeek=0,r._paused=!0,t._stopFade(n[i]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;typeof r._node.bufferSource.stop>"u"?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else(!isNaN(r._node.duration)||r._node.duration===1/0)&&r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var a=n._soundById(i[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(i[r]),a._node&&(n._webAudio?a._node.bufferSource&&(typeof a._node.bufferSource.stop>"u"?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):(!isNaN(a._node.duration)||a._node.duration===1/0)&&(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&n._clearSound(a._node))),t||n._emit("stop",a._id))}return n},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(typeof t>"u"){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var r=i._getSoundIds(t),a=0;a<r.length;a++){var o=i._soundById(r[a]);o&&(o._muted=e,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,n.ctx.currentTime):o._node&&(o._node.muted=!!n._muted||e),i._emit("mute",o._id))}return i},volume:function(){var e,t,i,r=this,a=arguments;if(0===a.length)return r._volume;1===a.length||2===a.length&&typeof a[1]>"u"?r._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0]):a.length>=2&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(!(typeof e<"u"&&e>=0&&e<=1))return(i=t?r._soundById(t):r._sounds[0])?i._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof t>"u"&&(r._volume=e),t=r._getSoundIds(t);for(var o=0;o<t.length;o++)(i=r._soundById(t[o]))&&(i._volume=e,a[2]||r._stopFade(t[o]),r._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,n.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*n.volume()),r._emit("volume",i._id));return r},fade:function(e,t,i,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,t,i,r)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),i=parseFloat(i),a.volume(e,r);for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var l=a._soundById(o[s]);if(l){if(r||a._stopFade(o[s]),a._webAudio&&!l._muted){var u=n.ctx.currentTime,c=u+i/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}a._startFadeInterval(l,e,t,i,o[s],typeof r>"u")}}return a},_startFadeInterval:function(e,t,n,i,r,a){var o=this,s=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?i/u:i),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-d)/i;d=Date.now(),s+=l*r,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),o._webAudio?e._volume=s:o.volume(s,e._id,!0),a&&(o._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(n,e._id),o._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(i._interval),i._interval=null,t.volume(i._fadeTo,e),i._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],i._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=i._getSoundIds(t),o=0;o<a.length;o++)(n=i._soundById(a[o]))&&(n._loop=e,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(a[o])&&(i.pause(a[o],!0),i.play(a[o],!0)))));return i},rate:function(){var e,t,i,r=this,a=arguments;if(0===a.length)t=r._sounds[0]._id;else if(1===a.length){r._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if("number"!=typeof e)return(i=r._soundById(t))?i._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof t>"u"&&(r._rate=e),t=r._getSoundIds(t);for(var o=0;o<t.length;o++)if(i=r._soundById(t[o])){r.playing(t[o])&&(i._rateSeek=r.seek(t[o]),i._playStart=r._webAudio?n.ctx.currentTime:i._playStart),i._rate=e,r._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):i._node&&(i._node.playbackRate=e);var s=r.seek(t[o]),l=1e3*((r._sprite[i._sprite][0]+r._sprite[i._sprite][1])/1e3-s)/Math.abs(i._rate);(r._endTimers[t[o]]||!i._paused)&&(r._clearTimer(t[o]),r._endTimers[t[o]]=setTimeout(r._ended.bind(r,i),l)),r._emit("rate",i._id)}return r},seek:function(){var e,t,i=this,r=arguments;if(0===r.length)i._sounds.length&&(t=i._sounds[0]._id);else if(1===r.length){i._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(typeof t>"u")return 0;if("number"==typeof e&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var a=i._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var o=i.playing(t)?n.ctx.currentTime-a._playStart:0,s=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(s+o*Math.abs(a._rate))}return a._node.currentTime}var l=i.playing(t);l&&i.pause(t,!0),a._seek=e,a._ended=!1,i._clearTimer(t),!i._webAudio&&a._node&&!isNaN(a._node.duration)&&(a._node.currentTime=e);var u=function(){l&&i.play(t,!0),i._emit("seek",t)};if(l&&!i._webAudio){setTimeout((function e(){i._playLock?setTimeout(e,0):u()}),0)}else u()}return i},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var i=0;i<t._sounds.length;i++)if(!t._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,i=t._soundById(e);return i&&(n=t._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(n._canPlayEvent,t[i]._loadFn,!1),t[i]._node.removeEventListener("ended",t[i]._endFn,!1),n._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var r=n._howls.indexOf(e);r>=0&&n._howls.splice(r,1);var o=!0;for(i=0;i<n._howls.length;i++)if(n._howls[i]._src===e._src||e._src.indexOf(n._howls[i]._src)>=0){o=!1;break}return a&&o&&delete a[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,i){var r=this["_on"+e];return"function"==typeof t&&r.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function(e,t,n){var i=this,r=i["_on"+e],a=0;if("number"==typeof t&&(n=t,t=null),t||n)for(a=0;a<r.length;a++){var o=n===r[a].id;if(t===r[a].fn&&o||!t&&o){r.splice(a,1);break}}else if(e)i["_on"+e]=[];else{var s=Object.keys(i);for(a=0;a<s.length;a++)0===s[a].indexOf("_on")&&Array.isArray(i[s[a]])&&(i[s[a]]=[])}return i},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var i=this,r=i["_on"+e],a=r.length-1;a>=0;a--)(!r[a].id||r[a].id===t||"load"===e)&&(setTimeout(function(e){e.call(this,t,n)}.bind(i,r[a].fn),0),r[a].once&&i.off(e,r[a].fn,r[a].id));return i._loadQueue(e),i},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),a)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),!t._webAudio&&!r&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new r(e)},_drain:function(){var e=this,t=e._pool,n=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&n++;for(i=e._sounds.length-1;i>=0;i--){if(n<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),n--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),this},_cleanBuffer:function(e){var t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(i){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(i,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=i*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var a={},o=function(e){var t=e._src;if(a[t])return e._duration=a[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);l(i.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?l(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},s(o)}},s=function(e){try{e.send()}catch(t){e.onerror()}},l=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(a[t._src]=e,u(t,e)):i()};typeof Promise<"u"&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(r).catch(i):n.ctx.decodeAudioData(e,r,i)},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(a){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!r&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:n,Howl:i}})),typeof e<"u"&&(e.Howler=n,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=i,window.Sound=r)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._pos[1]:t,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof e?i._pos:(i._pos=[e,t,n],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,n,i,r,a){var o=this;if(!o.ctx||!o.ctx.listener)return o;var s=o._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,a="number"!=typeof a?s[5]:a,"number"!=typeof e?s:(o._orientation=[e,t,n,i,r,a],typeof o.ctx.listener.forwardX<"u"?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,n,i,r,a),o)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:typeof t.coneInnerAngle<"u"?t.coneInnerAngle:360,coneOuterAngle:typeof t.coneOuterAngle<"u"?t.coneOuterAngle:360,coneOuterGain:typeof t.coneOuterGain<"u"?t.coneOuterGain:0,distanceModel:typeof t.distanceModel<"u"?t.distanceModel:"inverse",maxDistance:typeof t.maxDistance<"u"?t.maxDistance:1e4,panningModel:typeof t.panningModel<"u"?t.panningModel:"HRTF",refDistance:typeof t.refDistance<"u"?t.refDistance:1,rolloffFactor:typeof t.rolloffFactor<"u"?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u"){if("number"!=typeof t)return i._stereo;i._stereo=t,i._pos=[t,0,0]}for(var a=i._getSoundIds(n),o=0;o<a.length;o++){var s=i._soundById(a[o]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",(!s._panner||!s._panner.pan)&&e(s,r),"spatial"===r?typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",s._id)}}return i},Howl.prototype.pos=function(t,n,i,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,n,i,r)}}),a;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,typeof r>"u"){if("number"!=typeof t)return a._pos;a._pos=[t,n,i]}for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var l=a._soundById(o[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,i],l._node&&((!l._panner||l._panner.pan)&&e(l,"spatial"),typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(t,n,i)),a._emit("pos",l._id)}}return a},Howl.prototype.orientation=function(t,n,i,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,n,i,r)}}),a;if(n="number"!=typeof n?a._orientation[1]:n,i="number"!=typeof i?a._orientation[2]:i,typeof r>"u"){if("number"!=typeof t)return a._orientation;a._orientation=[t,n,i]}for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var l=a._soundById(o[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,i],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),e(l,"spatial")),typeof l._panner.orientationX<"u"?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,i)),a._emit("orientation",l._id)}}return a},Howl.prototype.pannerAttr=function(){var t,n,i,r=this,a=arguments;if(!r._webAudio)return r;if(0===a.length)return r._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(i=r._soundById(parseInt(a[0],10)))?i._pannerAttr:r._pannerAttr;t=a[0],typeof n>"u"&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:typeof t.pannerAttr.coneInnerAngle<"u"?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof t.pannerAttr.coneOuterAngle<"u"?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof t.pannerAttr.coneOuterGain<"u"?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof t.pannerAttr.distanceModel<"u"?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof t.pannerAttr.maxDistance<"u"?t.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof t.pannerAttr.refDistance<"u"?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof t.pannerAttr.rolloffFactor<"u"?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof t.pannerAttr.panningModel<"u"?t.pannerAttr.panningModel:r._panningModel})}else 2===a.length&&(t=a[0],n=parseInt(a[1],10));for(var o=r._getSoundIds(n),s=0;s<o.length;s++)if(i=r._soundById(o[s])){var l=i._pannerAttr;l={coneInnerAngle:typeof t.coneInnerAngle<"u"?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:typeof t.coneOuterAngle<"u"?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:typeof t.coneOuterGain<"u"?t.coneOuterGain:l.coneOuterGain,distanceModel:typeof t.distanceModel<"u"?t.distanceModel:l.distanceModel,maxDistance:typeof t.maxDistance<"u"?t.maxDistance:l.maxDistance,refDistance:typeof t.refDistance<"u"?t.refDistance:l.refDistance,rolloffFactor:typeof t.rolloffFactor<"u"?t.rolloffFactor:l.rolloffFactor,panningModel:typeof t.panningModel<"u"?t.panningModel:l.panningModel};var u=i._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(i._pos||(i._pos=r._pos||[0,0,-.5]),e(i,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,typeof e._panner.positionX<"u"?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),typeof e._panner.orientationX<"u"?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()})),dc=rc((function(e,t){t.exports=function(e,t){for(var n=e.split("."),i=t.split("."),r=0;r<3;r++){var a=Number(n[r]),o=Number(i[r]);if(a>o)return 1;if(o>a)return-1;if(!isNaN(a)&&isNaN(o))return 1;if(isNaN(a)&&!isNaN(o))return-1}return 0}})),hc="149",fc=0,pc=1,vc=2,mc=3,gc=0,Lc=1,yc=2,bc=1,xc=2,wc=3,_c=0,Sc=1,kc=2,Ac=0,Mc=1,Cc=2,Ec=3,Tc=4,Pc=5,Dc=100,Oc=101,Ic=102,Rc=103,Bc=104,Nc=200,zc=201,Fc=202,jc=203,Uc=204,Zc=205,Vc=206,Gc=207,Hc=208,Wc=209,qc=210,Xc=0,Yc=1,Qc=2,Kc=3,Jc=4,$c=5,ed=6,td=7,nd=0,id=1,rd=2,ad=0,od=1,sd=2,ld=3,ud=4,cd=5,dd=301,hd=302,fd=303,pd=304,vd=306,md=1e3,gd=1001,Ld=1002,yd=1003,bd=1004,xd=1005,wd=1006,_d=1007,Sd=1008,kd=1009,Ad=1010,Md=1011,Cd=1012,Ed=1013,Td=1014,Pd=1015,Dd=1016,Od=1017,Id=1018,Rd=1020,Bd=1021,Nd=1023,zd=1024,Fd=1025,jd=1026,Ud=1027,Zd=1028,Vd=1029,Gd=1030,Hd=1031,Wd=1033,qd=33776,Xd=33777,Yd=33778,Qd=33779,Kd=35840,Jd=35841,$d=35842,eh=35843,th=36196,nh=37492,ih=37496,rh=37808,ah=37809,oh=37810,sh=37811,lh=37812,uh=37813,ch=37814,dh=37815,hh=37816,fh=37817,ph=37818,vh=37819,mh=37820,gh=37821,Lh=36492,yh=36283,bh=36284,xh=36285,wh=36286,_h=2202,Sh=2300,kh=2301,Ah=2302,Mh=2400,Ch=2401,Eh=2402,Th=2500,Ph=3e3,Dh=3001,Oh=3200,Ih=3201,Rh=0,Bh=1,Nh="srgb",zh="srgb-linear",Fh=7680,jh=35044,Uh="300 es",Zh=1035,Vh=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e);e.target=null}}}}]),e}(),Gh=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Hh=1234567,Wh=Math.PI/180,qh=180/Math.PI;function Xh(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Gh[255&e]+Gh[e>>8&255]+Gh[e>>16&255]+Gh[e>>24&255]+"-"+Gh[255&t]+Gh[t>>8&255]+"-"+Gh[t>>16&15|64]+Gh[t>>24&255]+"-"+Gh[63&n|128]+Gh[n>>8&255]+"-"+Gh[n>>16&255]+Gh[n>>24&255]+Gh[255&i]+Gh[i>>8&255]+Gh[i>>16&255]+Gh[i>>24&255]).toLowerCase()}function Yh(e,t,n){return Math.max(t,Math.min(n,e))}function Qh(e,t){return(e%t+t)%t}function Kh(e,t,n){return(1-n)*e+n*t}function Jh(e){return 0===(e&e-1)&&0!==e}function $h(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ef(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function tf(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function nf(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var rf=Object.freeze({__proto__:null,DEG2RAD:Wh,RAD2DEG:qh,ceilPowerOfTwo:$h,clamp:Yh,damp:function(e,t,n,i){return Kh(e,t,1-Math.exp(-n*i))},degToRad:function(e){return e*Wh},denormalize:tf,euclideanModulo:Qh,floorPowerOfTwo:ef,generateUUID:Xh,inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},isPowerOfTwo:Jh,lerp:Kh,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},normalize:nf,pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Qh(e,2*t)-t)},radToDeg:function(e){return e*qh},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function(e){void 0!==e&&(Hh=e);var t=Hh+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(e,t,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+i)/2),c=o((t+i)/2),d=a((t-i)/2),h=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}}),af=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,c.Z)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return(0,d.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),of=function(){function e(){(0,c.Z)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,d.Z)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=i[0],v=i[3],m=i[6],g=i[1],L=i[4],y=i[7],b=i[2],x=i[5],w=i[8];return r[0]=a*p+o*g+s*b,r[3]=a*v+o*L+s*x,r[6]=a*m+o*y+s*w,r[1]=l*p+u*g+c*b,r[4]=l*v+u*L+c*x,r[7]=l*m+u*y+c*w,r[2]=d*p+h*g+f*b,r[5]=d*v+h*L+f*x,r[8]=d*m+h*y+f*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*r*u+n*o*s+i*r*l-i*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,d=o*s-u*r,h=l*r-a*s,f=t*c+n*d+i*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(i*l-u*n)*p,e[2]=(o*n-i*a)*p,e[3]=d*p,e[4]=(u*t-i*s)*p,e[5]=(i*r-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*r)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(sf.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(sf.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(sf.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),sf=new of;function lf(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var uf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function cf(e,t){return new uf[e](t)}function df(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function hf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ff(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var pf=(Ke(Hu={},Nh,Ke({},zh,hf)),Ke(Hu,zh,Ke({},Nh,ff)),Hu),vf={legacyMode:!0,get workingColorSpace(){return zh},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(pf[t]&&void 0!==pf[t][n]){var i=pf[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},mf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gf={r:0,g:0,b:0},Lf={h:0,s:0,l:0},yf={h:0,s:0,l:0};function bf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function xf(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var wf=function(e){function t(e,n,i){return(0,c.Z)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return(0,d.Z)(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nh;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vf.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vf.workingColorSpace;return this.r=e,this.g=t,this.b=n,vf.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vf.workingColorSpace;if(e=Qh(e,1),t=Yh(t,0,1),n=Yh(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=bf(a,r,e+1/3),this.g=bf(a,r,e),this.b=bf(a,r,e-1/3)}return vf.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nh;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,vf.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,vf.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(r[1])/360,l=parseFloat(r[2])/100,u=parseFloat(r[3])/100;return i(r[4]),this.setHSL(s,l,u,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,vf.toWorkingColorSpace(this,n),this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,vf.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nh,n=mf[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=hf(e.r),this.g=hf(e.g),this.b=hf(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=ff(e.r),this.g=ff(e.g),this.b=ff(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nh;return vf.fromWorkingColorSpace(xf(this,gf),e),Yh(255*gf.r,0,255)<<16^Yh(255*gf.g,0,255)<<8^Yh(255*gf.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nh;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vf.workingColorSpace;vf.fromWorkingColorSpace(xf(this,gf),t);var n,i,r=gf.r,a=gf.g,o=gf.b,s=Math.max(r,a,o),l=Math.min(r,a,o),u=(l+s)/2;if(l===s)n=0,i=0;else{var c=s-l;switch(i=u<=.5?c/(s+l):c/(2-s-l),s){case r:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-r)/c+2;break;case o:n=(r-a)/c+4}n/=6}return e.h=n,e.s=i,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vf.workingColorSpace;return vf.fromWorkingColorSpace(xf(this,gf),t),e.r=gf.r,e.g=gf.g,e.b=gf.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nh;return vf.fromWorkingColorSpace(xf(this,gf),e),e!==Nh?"color(".concat(e," ").concat(gf.r," ").concat(gf.g," ").concat(gf.b,")"):"rgb(".concat(255*gf.r|0,",").concat(255*gf.g|0,",").concat(255*gf.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Lf),Lf.h+=e,Lf.s+=t,Lf.l+=n,this.setHSL(Lf.h,Lf.s,Lf.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Lf),e.getHSL(yf);var n=Kh(Lf.h,yf.h,t),i=Kh(Lf.s,yf.s,t),r=Kh(Lf.l,yf.l,t);return this.setHSL(n,i,r),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);wf.NAMES=mf;var _f,Sf=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_f&&(_f=df("canvas")),_f.width=e.width,_f.height=e.height;var n=_f.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_f}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){var t=df("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,a=0;a<r.length;a++)r[a]=255*hf(r[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*hf(o[s]/255)):o[s]=hf(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),kf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,c.Z)(this,e),this.isSource=!0,this.uuid=Xh(),this.data=t,this.version=0}return(0,d.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)i[a].isDataTexture?r.push(Af(i[a].image)):r.push(Af(i[a]))}else r=Af(i);n.url=r}return t||(e.images[this.uuid]=n),n}}]),e}();function Af(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Sf.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Mf=0,Cf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gd,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gd,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wd,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sd,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nd,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:kd,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ph;return(0,c.Z)(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty((0,Ye.Z)(e),"id",{value:Mf++}),e.uuid=Xh(),e.name="",e.source=new kf(i),e.mipmaps=[],e.mapping=r,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=h,e.format=u,e.internalFormat=null,e.type=d,e.offset=new af(0,0),e.repeat=new af(1,1),e.center=new af(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new of,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,d.Z)(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case md:e.x=e.x-Math.floor(e.x);break;case gd:e.x=e.x<0?0:1;break;case Ld:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case md:e.y=e.y-Math.floor(e.y);break;case gd:e.y=e.y<0?0:1;break;case Ld:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Vh);Cf.DEFAULT_IMAGE=null,Cf.DEFAULT_MAPPING=300,Cf.DEFAULT_ANISOTROPY=1;var Ef=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,c.Z)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}return(0,d.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,r,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var v=(o+1)/2,m=(c+1)/2,g=(p+1)/2,L=(s+u)/4,y=(l+h)/4,b=(d+f)/4;return v>m&&v>g?v<.01?(n=0,i=.707106781,r=.707106781):(i=L/(n=Math.sqrt(v)),r=y/n):m>g?m<.01?(n=.707106781,i=0,r=.707106781):(n=L/(i=Math.sqrt(m)),r=b/i):g<.01?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(g)),i=b/r),this.set(n,i,r,t),this}var x=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(x)<.001&&(x=1),this.x=(f-d)/x,this.y=(l-h)/x,this.z=(u-s)/x,this.w=Math.acos((o+c+p-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),Tf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=i,e.height=r,e.depth=1,e.scissor=new Ef(0,0,i,r),e.scissorTest=!1,e.viewport=new Ef(0,0,i,r);var o={width:i,height:r,depth:1};return e.texture=new Cf(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:wd,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,d.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new kf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Vh),Pf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,c.Z)(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=yd,e.minFilter=yd,e.wrapR=gd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,d.Z)(n)}(Cf),Df=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,c.Z)(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=yd,e.minFilter=yd,e.wrapR=gd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,d.Z)(n)}(Cf),Of=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,c.Z)(this,n),(e=t.call(this,i,r,o)).isWebGLMultipleRenderTargets=!0;var s=e.texture;e.texture=[];for(var l=0;l<a;l++)e.texture[l]=s.clone(),e.texture[l].isRenderTargetTexture=!0;return e}return(0,d.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(Tf),If=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,c.Z)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}return(0,d.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),d=s(n/2),h=s(i/2),f=s(r/2);switch(a){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+o+c;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-s)*h,this._y=(r-l)*h,this._z=(a-i)*h}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(r+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(r-l)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-i)/v,this._x=(r+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Yh(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],d=r[a+0],h=r[a+1],f=r[a+2],p=r[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==d||l!==h||u!==f){var v=1-o,m=s*d+l*h+u*f+c*p,g=m>=0?1:-1,L=1-m*m;if(L>Number.EPSILON){var y=Math.sqrt(L),b=Math.atan2(y,m*g);v=Math.sin(v*b)/y,o=Math.sin(o*b)/y}var x=o*g;if(s=s*v+d*x,l=l*v+h*x,u=u*v+f*x,c=c*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],u=n[i+3],c=r[a],d=r[a+1],h=r[a+2],f=r[a+3];return e[t]=o*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-o*h,e[t+2]=l*f+u*h+o*d-s*c,e[t+3]=u*f-o*c-s*d-l*h,e}}]),t}(Symbol.iterator),Rf=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,c.Z)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}return(0,d.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Nf.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Nf.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,u=s*n+o*t-r*i,c=s*i+r*n-a*t,d=-r*t-a*n-o*i;return this.x=l*s+d*-r+u*-o-c*-a,this.y=u*s+d*-a+c*-r-l*-o,this.z=c*s+d*-o+l*-a-u*-r,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Bf.copy(this).projectOnVector(e),this.sub(Bf)}},{key:"reflect",value:function(e){return this.sub(Bf.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Yh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),Bf=new Rf,Nf=new If,zf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf(-1/0,-1/0,-1/0);(0,c.Z)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=jf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)jf.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),this.expandByPoint(jf);else null===n.boundingBox&&n.computeBoundingBox(),Uf.copy(n.boundingBox),Uf.applyMatrix4(e.matrixWorld),this.union(Uf);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,jf),jf.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Xf),Yf.subVectors(this.max,Xf),Zf.subVectors(e.a,Xf),Vf.subVectors(e.b,Xf),Gf.subVectors(e.c,Xf),Hf.subVectors(Vf,Zf),Wf.subVectors(Gf,Vf),qf.subVectors(Zf,Gf);var t=[0,-Hf.z,Hf.y,0,-Wf.z,Wf.y,0,-qf.z,qf.y,Hf.z,0,-Hf.x,Wf.z,0,-Wf.x,qf.z,0,-qf.x,-Hf.y,Hf.x,0,-Wf.y,Wf.x,0,-qf.y,qf.x,0];return!(!Jf(t,Zf,Vf,Gf,Yf)||(t=[1,0,0,0,1,0,0,0,1],!Jf(t,Zf,Vf,Gf,Yf)))&&(Qf.crossVectors(Hf,Wf),Jf(t=[Qf.x,Qf.y,Qf.z],Zf,Vf,Gf,Yf))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return jf.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(jf).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ff[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ff[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ff[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ff[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ff[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ff[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ff[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ff[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ff)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ff=[new Rf,new Rf,new Rf,new Rf,new Rf,new Rf,new Rf,new Rf],jf=new Rf,Uf=new zf,Zf=new Rf,Vf=new Rf,Gf=new Rf,Hf=new Rf,Wf=new Rf,qf=new Rf,Xf=new Rf,Yf=new Rf,Qf=new Rf,Kf=new Rf;function Jf(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){Kf.fromArray(e,a);var s=r.x*Math.abs(Kf.x)+r.y*Math.abs(Kf.y)+r.z*Math.abs(Kf.z),l=t.dot(Kf),u=n.dot(Kf),c=i.dot(Kf);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var $f=new zf,ep=new Rf,tp=new Rf,np=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,c.Z)(this,e),this.center=t,this.radius=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$f.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ep.subVectors(e,this.center);var t=ep.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector(ep,i/n),this.radius+=i}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ep.copy(e.center).add(tp)),this.expandByPoint(ep.copy(e.center).sub(tp))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ip=new Rf,rp=new Rf,ap=new Rf,op=new Rf,sp=new Rf,lp=new Rf,up=new Rf,cp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf(0,0,-1);(0,c.Z)(this,e),this.origin=t,this.direction=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ip)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ip.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ip.copy(this.direction).multiplyScalar(t).add(this.origin),ip.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){rp.copy(e).add(t).multiplyScalar(.5),ap.copy(t).sub(e).normalize(),op.copy(this.origin).sub(rp);var r,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(ap),c=op.dot(this.direction),d=-op.dot(ap),h=op.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(a=u*c-d,s=l*f,(r=u*d-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(r*=p)*(r+u*(a*=p)+2*c)+a*(u*r+a+2*d)+h}else a=l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;else a=-l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;else a<=-s?o=-(r=Math.max(0,-(-u*l+c)))*r+(a=r>0?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h:a<=s?(r=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):o=-(r=Math.max(0,-(u*l+c)))*r+(a=r>0?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h;else a=u>0?-l:l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(ap).multiplyScalar(a).add(rp),o}},{key:"intersectSphere",value:function(e,t){ip.subVectors(e.center,this.origin);var n=ip.dot(this.direction),i=ip.dot(ip)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(r=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||r>i||((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>i)||((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0)?null:this.at(n>=0?n:i,t)}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ip)}},{key:"intersectTriangle",value:function(e,t,n,i,r){sp.subVectors(t,e),lp.subVectors(n,e),up.crossVectors(sp,lp);var a,o=this.direction.dot(up);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}op.subVectors(this.origin,e);var s=a*this.direction.dot(lp.crossVectors(op,lp));if(s<0)return null;var l=a*this.direction.dot(sp.cross(op));if(l<0||s+l>o)return null;var u=-a*op.dot(up);return u<0?null:this.at(u/o,r)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),dp=function(){function e(){(0,c.Z)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,d.Z)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l,u,c,d,h,f,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=d,m[3]=h,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/hp.setFromMatrixColumn(e,0).length(),r=1/hp.setFromMatrixColumn(e,1).length(),a=1/hp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var d=a*u,h=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+f*l,t[5]=d-p*l,t[9]=-o*s,t[2]=p-d*l,t[6]=f+h*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,L=l*c;t[0]=v+L*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=L+v*o,t[10]=a*s}else if("ZXY"===e.order){var y=s*u,b=s*c,x=l*u,w=l*c;t[0]=y-w*o,t[4]=-a*c,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*u,t[9]=w-y*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var _=a*u,S=a*c,k=o*u,A=o*c;t[0]=s*u,t[4]=k*l-S,t[8]=_*l+A,t[1]=s*c,t[5]=A*l+_,t[9]=S*l-k,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var M=a*s,C=a*l,E=o*s,T=o*l;t[0]=s*u,t[4]=T-M*c,t[8]=E*c+C,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=C*c+E,t[10]=M-T*c}else if("XZY"===e.order){var P=a*s,D=a*l,O=o*s,I=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=P*c+I,t[5]=a*u,t[9]=D*c-O,t[2]=O*c-D,t[6]=o*u,t[10]=I*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(pp,e,vp)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return Lp.subVectors(e,t),0===Lp.lengthSq()&&(Lp.z=1),Lp.normalize(),mp.crossVectors(n,Lp),0===mp.lengthSq()&&(1===Math.abs(n.z)?Lp.x+=1e-4:Lp.z+=1e-4,Lp.normalize(),mp.crossVectors(n,Lp)),mp.normalize(),gp.crossVectors(Lp,mp),i[0]=mp.x,i[4]=gp.x,i[8]=Lp.x,i[1]=mp.y,i[5]=gp.y,i[9]=Lp.y,i[2]=mp.z,i[6]=gp.z,i[10]=Lp.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],L=n[7],y=n[11],b=n[15],x=i[0],w=i[4],_=i[8],S=i[12],k=i[1],A=i[5],M=i[9],C=i[13],E=i[2],T=i[6],P=i[10],D=i[14],O=i[3],I=i[7],R=i[11],B=i[15];return r[0]=a*x+o*k+s*E+l*O,r[4]=a*w+o*A+s*T+l*I,r[8]=a*_+o*M+s*P+l*R,r[12]=a*S+o*C+s*D+l*B,r[1]=u*x+c*k+d*E+h*O,r[5]=u*w+c*A+d*T+h*I,r[9]=u*_+c*M+d*P+h*R,r[13]=u*S+c*C+d*D+h*B,r[2]=f*x+p*k+v*E+m*O,r[6]=f*w+p*A+v*T+m*I,r[10]=f*_+p*M+v*P+m*R,r[14]=f*S+p*C+v*D+m*B,r[3]=g*x+L*k+y*E+b*O,r[7]=g*w+L*A+y*T+b*I,r[11]=g*_+L*M+y*P+b*R,r[15]=g*S+L*C+y*D+b*B,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+r*s*c-i*l*c-r*o*d+n*l*d+i*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+r*a*d-i*a*h+i*l*u-r*s*u)+e[11]*(+t*l*c-t*o*h-r*a*c+n*a*h+r*o*u-n*l*u)+e[15]*(-i*o*u-t*s*c+t*o*d+i*a*c-n*a*d+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*d*l+p*s*h-o*v*h-c*s*m+o*d*m,L=f*d*l-u*v*l-f*s*h+a*v*h+u*s*m-a*d*m,y=u*p*l-f*c*l+f*o*h-a*p*h-u*o*m+a*c*m,b=f*c*s-u*p*s-f*o*d+a*p*d+u*o*v-a*c*v,x=t*g+n*L+i*y+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*d*r-c*v*r-p*i*h+n*v*h+c*i*m-n*d*m)*w,e[2]=(o*v*r-p*s*r+p*i*l-n*v*l-o*i*m+n*s*m)*w,e[3]=(c*s*r-o*d*r-c*i*l+n*d*l+o*i*h-n*s*h)*w,e[4]=L*w,e[5]=(u*v*r-f*d*r+f*i*h-t*v*h-u*i*m+t*d*m)*w,e[6]=(f*s*r-a*v*r-f*i*l+t*v*l+a*i*m-t*s*m)*w,e[7]=(a*d*r-u*s*r+u*i*l-t*d*l-a*i*h+t*s*h)*w,e[8]=y*w,e[9]=(f*c*r-u*p*r-f*n*h+t*p*h+u*n*m-t*c*m)*w,e[10]=(a*p*r-f*o*r+f*n*l-t*p*l-a*n*m+t*o*m)*w,e[11]=(u*o*r-a*c*r-u*n*l+t*c*l+a*n*h-t*o*h)*w,e[12]=b*w,e[13]=(u*p*i-f*c*i+f*n*d-t*p*d-u*n*v+t*c*v)*w,e[14]=(f*o*i-a*p*i-f*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*i-u*o*i+u*n*s-t*c*s-a*n*d+t*o*d)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,u=a+a,c=o+o,d=r*l,h=r*u,f=r*c,p=a*u,v=a*c,m=o*c,g=s*l,L=s*u,y=s*c,b=n.x,x=n.y,w=n.z;return i[0]=(1-(p+m))*b,i[1]=(h+y)*b,i[2]=(f-L)*b,i[3]=0,i[4]=(h-y)*x,i[5]=(1-(d+m))*x,i[6]=(v+g)*x,i[7]=0,i[8]=(f+L)*w,i[9]=(v-g)*w,i[10]=(1-(d+p))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,r=hp.set(i[0],i[1],i[2]).length(),a=hp.set(i[4],i[5],i[6]).length(),o=hp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],fp.copy(this);var s=1/r,l=1/a,u=1/o;return fp.elements[0]*=s,fp.elements[1]*=s,fp.elements[2]*=s,fp.elements[4]*=l,fp.elements[5]*=l,fp.elements[6]*=l,fp.elements[8]*=u,fp.elements[9]*=u,fp.elements[10]*=u,t.setFromRotationMatrix(fp),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,i,r,a){var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),d=-(a+r)/(a-r),h=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*s,d=(n+i)*l,h=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),hp=new Rf,fp=new dp,pp=new Rf(0,0,0),vp=new Rf(1,1,1),mp=new Rf,gp=new Rf,Lp=new Rf,yp=new dp,bp=new If,xp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;(0,c.Z)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}return(0,d.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],c=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Yh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Yh(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(Yh(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Yh(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Yh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Yh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return yp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yp,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return bp.setFromEuler(this),this.setFromQuaternion(bp,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,Fu.Z)().mark((function e(){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);xp.DEFAULT_ORDER="XYZ";var wp=function(){function e(){(0,c.Z)(this,e),this.mask=1}return(0,d.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),_p=0,Sp=new Rf,kp=new If,Ap=new dp,Mp=new Rf,Cp=new Rf,Ep=new Rf,Tp=new If,Pp=new Rf(1,0,0),Dp=new Rf(0,1,0),Op=new Rf(0,0,1),Ip={type:"added"},Rp={type:"removed"},Bp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,c.Z)(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty((0,Ye.Z)(e),"id",{value:_p++}),e.uuid=Xh(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var i=new Rf,r=new xp,a=new If,o=new Rf(1,1,1);return r._onChange((function(){a.setFromEuler(r,!1)})),a._onChange((function(){r.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,Ye.Z)(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new dp},normalMatrix:{value:new of}}),e.matrix=new dp,e.matrixWorld=new dp,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new wp,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,d.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return kp.setFromAxisAngle(e,t),this.quaternion.multiply(kp),this}},{key:"rotateOnWorldAxis",value:function(e,t){return kp.setFromAxisAngle(e,t),this.quaternion.premultiply(kp),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Pp,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Dp,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Op,e)}},{key:"translateOnAxis",value:function(e,t){return Sp.copy(e).applyQuaternion(this.quaternion),this.position.add(Sp.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Pp,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Dp,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Op,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ap.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Mp.copy(e):Mp.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Cp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ap.lookAt(Cp,Mp,this.up):Ap.lookAt(Mp,Cp,this.up),this.quaternion.setFromRotationMatrix(Ap),i&&(Ap.extractRotation(i.matrixWorld),kp.setFromRotationMatrix(Ap),this.quaternion.premultiply(kp.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ip)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Rp)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Rp)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Ap.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ap.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ap),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var i=0,r=this.children.length;i<r;i++){var a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,e,Ep),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,Tp,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++){var o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(e.shapes,u)}else r(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],d=0,h=this.material.length;d<h;d++)c.push(r(e.materials,this.material[d]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var f=0;f<this.children.length;f++)i.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];i.animations.push(r(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),L=S(e.textures),y=S(e.images),b=S(e.shapes),x=S(e.skeletons),w=S(e.animations),_=S(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),L.length>0&&(n.textures=L),y.length>0&&(n.images=y),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w),_.length>0&&(n.nodes=_)}return n.object=i,n;function S(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(Vh);Bp.DEFAULT_UP=new Rf(0,1,0),Bp.DEFAULT_MATRIX_AUTO_UPDATE=!0,Bp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Np=new Rf,zp=new Rf,Fp=new Rf,jp=new Rf,Up=new Rf,Zp=new Rf,Vp=new Rf,Gp=new Rf,Hp=new Rf,Wp=new Rf,qp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rf;(0,c.Z)(this,e),this.a=t,this.b=n,this.c=i}return(0,d.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Np.subVectors(this.c,this.b),zp.subVectors(this.a,this.b),.5*Np.cross(zp).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,r,a){return e.getUV(t,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,r=this.a,a=this.b,o=this.c;Up.subVectors(a,r),Zp.subVectors(o,r),Gp.subVectors(e,r);var s=Up.dot(Gp),l=Zp.dot(Gp);if(s<=0&&l<=0)return t.copy(r);Hp.subVectors(e,a);var u=Up.dot(Hp),c=Zp.dot(Hp);if(u>=0&&c<=u)return t.copy(a);var d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(r).addScaledVector(Up,n);Wp.subVectors(e,o);var h=Up.dot(Wp),f=Zp.dot(Wp);if(f>=0&&h<=f)return t.copy(o);var p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return i=l/(l-f),t.copy(r).addScaledVector(Zp,i);var v=u*f-h*c;if(v<=0&&c-u>=0&&h-f>=0)return Vp.subVectors(o,a),i=(c-u)/(c-u+(h-f)),t.copy(a).addScaledVector(Vp,i);var m=1/(v+p+d);return n=p*m,i=d*m,t.copy(r).addScaledVector(Up,n).addScaledVector(Zp,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),Np.subVectors(e,t),i.cross(Np);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,r){Np.subVectors(i,t),zp.subVectors(n,t),Fp.subVectors(e,t);var a=Np.dot(Np),o=Np.dot(zp),s=Np.dot(Fp),l=zp.dot(zp),u=zp.dot(Fp),c=a*l-o*o;if(0===c)return r.set(-2,-1,-1);var d=1/c,h=(l*s-o*u)*d,f=(a*u-o*s)*d;return r.set(1-h-f,f,h)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,jp),jp.x>=0&&jp.y>=0&&jp.x+jp.y<=1}},{key:"getUV",value:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,jp),s.set(0,0),s.addScaledVector(r,jp.x),s.addScaledVector(a,jp.y),s.addScaledVector(o,jp.z),s}},{key:"isFrontFacing",value:function(e,t,n,i){return Np.subVectors(n,t),zp.subVectors(e,t),Np.cross(zp).dot(i)<0}}]),e}(),Xp=0,Yp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty((0,Ye.Z)(e),"id",{value:Xp++}),e.uuid=Xh(),e.name="",e.type="Material",e.blending=Mc,e.side=_c,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=Uc,e.blendDst=Zc,e.blendEquation=Dc,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=Kc,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Fh,e.stencilZFail=Fh,e.stencilZPass=Fh,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,d.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Mc&&(n.blending=this.blending),this.side!==_c&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Vh),Qp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new wf(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=nd,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yp),Kp=new Rf,Jp=new af,$p=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,c.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=i,this.usage=jh,this.updateRange={offset:0,count:-1},this.version=0}return(0,d.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Jp.fromBufferAttribute(this,t),Jp.applyMatrix3(e),this.setXY(t,Jp.x,Jp.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Kp.fromBufferAttribute(this,i),Kp.applyMatrix3(e),this.setXYZ(i,Kp.x,Kp.y,Kp.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Kp.fromBufferAttribute(this,t),Kp.applyMatrix4(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Kp.fromBufferAttribute(this,t),Kp.applyNormalMatrix(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Kp.fromBufferAttribute(this,t),Kp.transformDirection(e),this.setXYZ(t,Kp.x,Kp.y,Kp.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=tf(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=tf(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=tf(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=tf(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array),i=nf(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array),i=nf(i,this.array),r=nf(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==jh&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),ev=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){return(0,c.Z)(this,n),t.call(this,new Uint16Array(e),i,r)}return(0,d.Z)(n)}($p),tv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){return(0,c.Z)(this,n),t.call(this,new Uint32Array(e),i,r)}return(0,d.Z)(n)}($p),nv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){return(0,c.Z)(this,n),t.call(this,new Float32Array(e),i,r)}return(0,d.Z)(n)}($p),iv=0,rv=new dp,av=new Bp,ov=new Rf,sv=new zf,lv=new zf,uv=new Rf,cv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty((0,Ye.Z)(e),"id",{value:iv++}),e.uuid=Xh(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,d.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(lf(e)?tv:ev)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new of).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return rv.makeRotationFromQuaternion(e),this.applyMatrix4(rv),this}},{key:"rotateX",value:function(e){return rv.makeRotationX(e),this.applyMatrix4(rv),this}},{key:"rotateY",value:function(e){return rv.makeRotationY(e),this.applyMatrix4(rv),this}},{key:"rotateZ",value:function(e){return rv.makeRotationZ(e),this.applyMatrix4(rv),this}},{key:"translate",value:function(e,t,n){return rv.makeTranslation(e,t,n),this.applyMatrix4(rv),this}},{key:"scale",value:function(e,t,n){return rv.makeScale(e,t,n),this.applyMatrix4(rv),this}},{key:"lookAt",value:function(e){return av.lookAt(e),av.updateMatrix(),this.applyMatrix4(av.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ov).negate(),this.translate(ov.x,ov.y,ov.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new nv(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new zf);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Rf(-1/0,-1/0,-1/0),new Rf(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];sv.setFromBufferAttribute(r),this.morphTargetsRelative?(uv.addVectors(this.boundingBox.min,sv.min),this.boundingBox.expandByPoint(uv),uv.addVectors(this.boundingBox.max,sv.max),this.boundingBox.expandByPoint(uv)):(this.boundingBox.expandByPoint(sv.min),this.boundingBox.expandByPoint(sv.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new np);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Rf,1/0);if(e){var n=this.boundingSphere.center;if(sv.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];lv.setFromBufferAttribute(a),this.morphTargetsRelative?(uv.addVectors(sv.min,lv.min),sv.expandByPoint(uv),uv.addVectors(sv.max,lv.max),sv.expandByPoint(uv)):(sv.expandByPoint(lv.min),sv.expandByPoint(lv.max))}sv.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)uv.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(uv));if(t)for(var u=0,c=t.length;u<c;u++)for(var d=t[u],h=this.morphTargetsRelative,f=0,p=d.count;f<p;f++)uv.fromBufferAttribute(d,f),h&&(ov.fromBufferAttribute(e,f),uv.add(ov)),o=Math.max(o,n.distanceToSquared(uv));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new $p(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Rf,u[c]=new Rf;var d=new Rf,h=new Rf,f=new Rf,p=new af,v=new af,m=new af,g=new Rf,L=new Rf,y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(var b=0,x=y.length;b<x;++b)for(var w=y[b],_=w.start,S=_,k=_+w.count;S<k;S+=3)B(n[S+0],n[S+1],n[S+2]);for(var A=new Rf,M=new Rf,C=new Rf,E=new Rf,T=0,P=y.length;T<P;++T)for(var D=y[T],O=D.start,I=O,R=O+D.count;I<R;I+=3)N(n[I+0]),N(n[I+1]),N(n[I+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function B(e,t,n){d.fromArray(i,3*e),h.fromArray(i,3*t),f.fromArray(i,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(d),f.sub(d),v.sub(p),m.sub(p);var r=1/(v.x*m.y-m.x*v.y);!isFinite(r)||(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(r),L.copy(f).multiplyScalar(v.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(L),u[t].add(L),u[n].add(L))}function N(e){C.fromArray(r,3*e),E.copy(C);var t=l[e];A.copy(t),A.sub(C.multiplyScalar(C.dot(t))).normalize(),M.crossVectors(E,t);var n=M.dot(u[e])<0?-1:1;s[4*e]=A.x,s[4*e+1]=A.y,s[4*e+2]=A.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new $p(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Rf,o=new Rf,s=new Rf,l=new Rf,u=new Rf,c=new Rf,d=new Rf,h=new Rf;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(d),u.add(d),c.add(d),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var L=0,y=t.count;L<y;L+=3)a.fromBufferAttribute(t,L+0),o.fromBufferAttribute(t,L+1),s.fromBufferAttribute(t,L+2),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),n.setXYZ(L+0,d.x,d.y,d.z),n.setXYZ(L+1,d.x,d.y,d.z),n.setXYZ(L+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)uv.fromBufferAttribute(e,t),uv.normalize(),e.setXYZ(t,uv.x,uv.y,uv.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(var c=0;c<i;c++)a[s++]=n[o++]}return new $p(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=e(r[a],i);t.setAttribute(a,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],d=0,h=c.length;d<h;d++){var f=e(c[d],i);u.push(f)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],d=[],h=0,f=c.length;h<f;h++){var p=c[h];d.push(p.toJSON(e.data))}d.length>0&&(s[u]=d,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,d=u.length;c<d;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,p=h.length;f<p;f++){var v=h[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Vh),dv=new dp,hv=new cp,fv=new np,pv=new Rf,vv=new Rf,mv=new Rf,gv=new Rf,Lv=new Rf,yv=new af,bv=new af,xv=new af,wv=new Rf,_v=new Rf,Sv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cv,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qp;return(0,c.Z)(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);var o=this.morphTargetInfluences;if(r&&o){Lv.set(0,0,0);for(var s=0,l=r.length;s<l;s++){var u=o[s],c=r[s];0!==u&&(gv.fromBufferAttribute(c,e),a?Lv.addScaledVector(gv,u):Lv.addScaledVector(gv.sub(t),u))}t.add(Lv)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),fv.copy(n.boundingSphere),fv.applyMatrix4(r),!1!==e.ray.intersectsSphere(fv))&&(dv.copy(r).invert(),hv.copy(e.ray).applyMatrix4(dv),null===n.boundingBox||!1!==hv.intersectsBox(n.boundingBox))){var a,o=n.index,s=n.attributes.position,l=n.attributes.uv,u=n.attributes.uv2,c=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(i))for(var h=0,f=c.length;h<f;h++)for(var p=c[h],v=i[p.materialIndex],m=Math.max(p.start,d.start),g=Math.min(o.count,Math.min(p.start+p.count,d.start+d.count));m<g;m+=3){var L=o.getX(m),y=o.getX(m+1),b=o.getX(m+2);(a=kv(this,v,e,hv,l,u,L,y,b))&&(a.faceIndex=Math.floor(m/3),a.face.materialIndex=p.materialIndex,t.push(a))}else for(var x=Math.max(0,d.start),w=Math.min(o.count,d.start+d.count);x<w;x+=3){var _=o.getX(x),S=o.getX(x+1),k=o.getX(x+2);(a=kv(this,i,e,hv,l,u,_,S,k))&&(a.faceIndex=Math.floor(x/3),t.push(a))}else if(void 0!==s)if(Array.isArray(i))for(var A=0,M=c.length;A<M;A++)for(var C=c[A],E=i[C.materialIndex],T=Math.max(C.start,d.start),P=Math.min(s.count,Math.min(C.start+C.count,d.start+d.count));T<P;T+=3){(a=kv(this,E,e,hv,l,u,T,T+1,T+2))&&(a.faceIndex=Math.floor(T/3),a.face.materialIndex=C.materialIndex,t.push(a))}else for(var D=Math.max(0,d.start),O=Math.min(s.count,d.start+d.count);D<O;D+=3){(a=kv(this,i,e,hv,l,u,D,D+1,D+2))&&(a.faceIndex=Math.floor(D/3),t.push(a))}}}}]),n}(Bp);function kv(e,t,n,i,r,a,o,s,l){e.getVertexPosition(o,pv),e.getVertexPosition(s,vv),e.getVertexPosition(l,mv);var u=function(e,t,n,i,r,a,o,s){if(null===(t.side===Sc?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side===_c,s)))return null;_v.copy(s),_v.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(_v);return l<n.near||l>n.far?null:{distance:l,point:_v.clone(),object:e}}(e,t,n,i,pv,vv,mv,wv);if(u){r&&(yv.fromBufferAttribute(r,o),bv.fromBufferAttribute(r,s),xv.fromBufferAttribute(r,l),u.uv=qp.getUV(wv,pv,vv,mv,yv,bv,xv,new af)),a&&(yv.fromBufferAttribute(a,o),bv.fromBufferAttribute(a,s),xv.fromBufferAttribute(a,l),u.uv2=qp.getUV(wv,pv,vv,mv,yv,bv,xv,new af));var c={a:o,b:s,c:l,normal:new Rf,materialIndex:0};qp.getNormal(pv,vv,mv,c.normal),u.face=c}return u}var Av=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,c.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:r,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var u=(0,Ye.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var d=[],h=[],f=[],p=[],v=0,m=0;function g(e,t,n,i,r,a,o,s,l,c,g){for(var L=a/l,y=o/c,b=a/2,x=o/2,w=s/2,_=l+1,S=c+1,k=0,A=0,M=new Rf,C=0;C<S;C++)for(var E=C*y-x,T=0;T<_;T++){var P=T*L-b;M[e]=P*i,M[t]=E*r,M[n]=w,h.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=s>0?1:-1,f.push(M.x,M.y,M.z),p.push(T/l),p.push(1-C/c),k+=1}for(var D=0;D<c;D++)for(var O=0;O<l;O++){var I=v+O+_*D,R=v+O+_*(D+1),B=v+(O+1)+_*(D+1),N=v+(O+1)+_*D;d.push(I,R,N),d.push(R,B,N),A+=6}u.addGroup(m,A,g),m+=A,v+=k}return g("z","y","x",-1,-1,a,r,i,l,s,0),g("z","y","x",1,-1,a,r,-i,l,s,1),g("x","z","y",1,1,i,a,r,o,l,2),g("x","z","y",1,-1,i,a,-r,o,l,3),g("x","y","z",1,-1,i,r,a,o,s,4),g("x","y","z",-1,-1,i,r,-a,o,s,5),e.setIndex(d),e.setAttribute("position",new nv(h,3)),e.setAttribute("normal",new nv(f,3)),e.setAttribute("uv",new nv(p,2)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(cv);function Mv(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Cv(e){for(var t={},n=0;n<e.length;n++){var i=Mv(e[n]);for(var r in i)t[r]=i[r]}return t}function Ev(e){return null===e.getRenderTarget()&&e.outputEncoding===Dh?Nh:zh}var Tv={clone:Mv,merge:Cv},Pv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mv(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Au((0,p.Z)(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[i].value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Yp),Dv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new dp,e.projectionMatrix=new dp,e.projectionMatrixInverse=new dp,e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Au((0,p.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Bp),Ov=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,c.Z)(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*qh*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Wh*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*qh*Math.atan(Math.tan(.5*Wh*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Wh*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Au((0,p.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Dv),Iv=-90,Rv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=r;var o=new Ov(Iv,1,e,i);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new Ov(Iv,1,e,i);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var l=new Ov(Iv,1,e,i);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),a.add(l);var u=new Ov(Iv,1,e,i);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(0,-1,0),a.add(u);var d=new Ov(Iv,1,e,i);d.layers=a.layers,d.up.set(0,1,0),d.lookAt(0,0,1),a.add(d);var h=new Ov(Iv,1,e,i);return h.layers=a.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),a.add(h),a}return(0,d.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=o(this.children,6),r=i[0],a=i[1],s=i[2],l=i[3],u=i[4],c=i[5],d=e.getRenderTarget(),h=e.toneMapping,f=e.xr.enabled;e.toneMapping=ad,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(Bp),Bv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h){var f;return(0,c.Z)(this,n),e=void 0!==e?e:[],i=void 0!==i?i:dd,(f=t.call(this,e,i,r,a,o,s,l,u,d,h)).isCubeTexture=!0,f.flipY=!1,f}return(0,d.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Cf),Nv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,n),(e=t.call(this,i,i,r)).isWebGLCubeRenderTarget=!0;var a={width:i,height:i,depth:1},o=[a,a,a,a,a,a];return e.texture=new Bv(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,e.texture.minFilter=void 0!==r.minFilter?r.minFilter:wd,e}return(0,d.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Av(5,5,5),o=new Pv({name:"CubemapFromEquirect",uniforms:Mv(n),vertexShader:i,fragmentShader:r,side:Sc,blending:Ac});o.uniforms.tEquirect.value=t;var s=new Sv(a,o),l=t.minFilter;return t.minFilter===Sd&&(t.minFilter=wd),new Rv(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}]),n}(Tf),zv=new Rf,Fv=new Rf,jv=new of,Uv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,c.Z)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=zv.subVectors(n,t).cross(Fv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(zv),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||jv.getNormalMatrix(e),i=this.coplanarPoint(zv).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Zv=new np,Vv=new Rf,Gv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uv,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uv,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Uv,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Uv,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Uv,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Uv;(0,c.Z)(this,e),this.planes=[t,n,i,r,a,o]}return(0,d.Z)(e,[{key:"set",value:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],L=n[15];return t[0].setComponents(o-i,c-s,p-d,L-v).normalize(),t[1].setComponents(o+i,c+s,p+d,L+v).normalize(),t[2].setComponents(o+r,c+l,p+h,L+m).normalize(),t[3].setComponents(o-r,c-l,p-h,L-m).normalize(),t[4].setComponents(o-a,c-u,p-f,L-g).normalize(),t[5].setComponents(o+a,c+u,p+f,L+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Zv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Zv)}},{key:"intersectsSprite",value:function(e){return Zv.center.set(0,0,0),Zv.radius=.7071067811865476,Zv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zv)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(Vv.x=i.normal.x>0?e.max.x:e.min.x,Vv.y=i.normal.y>0?e.max.y:e.min.y,Vv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Vv)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Hv(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Wv(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var a=i.get(t);(!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=i.get(t);void 0===o?i.set(t,function(t,i){var r,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(i,s),e.bufferData(i,a,o),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:s,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(function(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),i.onUploadCallback()}(o.buffer,t,r),o.version=t.version)}}}}var qv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,c.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:r,widthSegments:a,heightSegments:o};for(var s=i/2,l=r/2,u=Math.floor(a),d=Math.floor(o),h=u+1,f=d+1,p=i/u,v=r/d,m=[],g=[],L=[],y=[],b=0;b<f;b++)for(var x=b*v-l,w=0;w<h;w++){var _=w*p-s;g.push(_,-x,0),L.push(0,0,1),y.push(w/u),y.push(1-b/d)}for(var S=0;S<d;S++)for(var k=0;k<u;k++){var A=k+h*S,M=k+h*(S+1),C=k+1+h*(S+1),E=k+1+h*S;m.push(A,M,E),m.push(M,C,E)}return e.setIndex(m),e.setAttribute("position",new nv(g,3)),e.setAttribute("normal",new nv(L,3)),e.setAttribute("uv",new nv(y,2)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(cv),Xv={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Yv={common:{diffuse:{value:new wf(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new of},uv2Transform:{value:new of},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new af(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wf(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wf(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new of}},sprite:{diffuse:{value:new wf(16777215)},opacity:{value:1},center:{value:new af(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new of}}},Qv={basic:{uniforms:Cv([Yv.common,Yv.specularmap,Yv.envmap,Yv.aomap,Yv.lightmap,Yv.fog]),vertexShader:Xv.meshbasic_vert,fragmentShader:Xv.meshbasic_frag},lambert:{uniforms:Cv([Yv.common,Yv.specularmap,Yv.envmap,Yv.aomap,Yv.lightmap,Yv.emissivemap,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,Yv.fog,Yv.lights,{emissive:{value:new wf(0)}}]),vertexShader:Xv.meshlambert_vert,fragmentShader:Xv.meshlambert_frag},phong:{uniforms:Cv([Yv.common,Yv.specularmap,Yv.envmap,Yv.aomap,Yv.lightmap,Yv.emissivemap,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,Yv.fog,Yv.lights,{emissive:{value:new wf(0)},specular:{value:new wf(1118481)},shininess:{value:30}}]),vertexShader:Xv.meshphong_vert,fragmentShader:Xv.meshphong_frag},standard:{uniforms:Cv([Yv.common,Yv.envmap,Yv.aomap,Yv.lightmap,Yv.emissivemap,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,Yv.roughnessmap,Yv.metalnessmap,Yv.fog,Yv.lights,{emissive:{value:new wf(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xv.meshphysical_vert,fragmentShader:Xv.meshphysical_frag},toon:{uniforms:Cv([Yv.common,Yv.aomap,Yv.lightmap,Yv.emissivemap,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,Yv.gradientmap,Yv.fog,Yv.lights,{emissive:{value:new wf(0)}}]),vertexShader:Xv.meshtoon_vert,fragmentShader:Xv.meshtoon_frag},matcap:{uniforms:Cv([Yv.common,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,Yv.fog,{matcap:{value:null}}]),vertexShader:Xv.meshmatcap_vert,fragmentShader:Xv.meshmatcap_frag},points:{uniforms:Cv([Yv.points,Yv.fog]),vertexShader:Xv.points_vert,fragmentShader:Xv.points_frag},dashed:{uniforms:Cv([Yv.common,Yv.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xv.linedashed_vert,fragmentShader:Xv.linedashed_frag},depth:{uniforms:Cv([Yv.common,Yv.displacementmap]),vertexShader:Xv.depth_vert,fragmentShader:Xv.depth_frag},normal:{uniforms:Cv([Yv.common,Yv.bumpmap,Yv.normalmap,Yv.displacementmap,{opacity:{value:1}}]),vertexShader:Xv.meshnormal_vert,fragmentShader:Xv.meshnormal_frag},sprite:{uniforms:Cv([Yv.sprite,Yv.fog]),vertexShader:Xv.sprite_vert,fragmentShader:Xv.sprite_frag},background:{uniforms:{uvTransform:{value:new of},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xv.background_vert,fragmentShader:Xv.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xv.backgroundCube_vert,fragmentShader:Xv.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xv.cube_vert,fragmentShader:Xv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xv.equirect_vert,fragmentShader:Xv.equirect_frag},distanceRGBA:{uniforms:Cv([Yv.common,Yv.displacementmap,{referencePosition:{value:new Rf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xv.distanceRGBA_vert,fragmentShader:Xv.distanceRGBA_frag},shadow:{uniforms:Cv([Yv.lights,Yv.fog,{color:{value:new wf(0)},opacity:{value:1}}]),vertexShader:Xv.shadow_vert,fragmentShader:Xv.shadow_frag}};Qv.physical={uniforms:Cv([Qv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new af(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new wf(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new af},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wf(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wf(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Xv.meshphysical_vert,fragmentShader:Xv.meshphysical_frag};var Kv={r:0,b:0,g:0};function Jv(e,t,n,i,r,a,o){var s,l,u=new wf(0),c=!0===a?0:1,d=null,h=0,f=null;function p(t,n){t.getRGB(Kv,Ev(e)),i.buffers.color.setClear(Kv.r,Kv.g,Kv.b,n,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),p(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(i,a){var o=!1,v=!0===a.isScene?a.background:null;v&&v.isTexture&&(v=(a.backgroundBlurriness>0?n:t).get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?p(u,c):v&&v.isColor&&(p(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===vd)?(void 0===l&&((l=new Sv(new Av(1,1,1),new Pv({name:"BackgroundCubeMaterial",uniforms:Mv(Qv.backgroundCube.uniforms),vertexShader:Qv.backgroundCube.vertexShader,fragmentShader:Qv.backgroundCube.fragmentShader,side:Sc,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=v.encoding!==Dh,(d!==v||h!==v.version||f!==e.toneMapping)&&(l.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new Sv(new qv(2,2),new Pv({name:"BackgroundMaterial",uniforms:Mv(Qv.background.uniforms),vertexShader:Qv.background.vertexShader,fragmentShader:Qv.background.fragmentShader,side:_c,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=v,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,s.material.toneMapped=v.encoding!==Dh,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==e.toneMapping)&&(s.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),s.layers.enableAll(),i.unshift(s,s.geometry,s.material,0,0,null))}}}function $v(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=f(null),u=l,c=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,r){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function g(){for(var t=u.newAttributes,n=u.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function L(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function y(){b(),c=!0,u!==l&&d((u=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,b){var x=!1;if(o){var w=function(t,n,r){var o=!0===r.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];return void 0===c&&(c=f(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c),c}(y,h,l);u!==w&&d((u=w).object),x=function(e,t,n,i){var r=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s)if(s[l].location>=0){var c=r[l],d=a[l];if(void 0===d&&("instanceMatrix"===l&&e.instanceMatrix&&(d=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(d=e.instanceColor)),void 0===c||c.attribute!==d||d&&c.data!==d.data)return!0;o++}return u.attributesNum!==o||u.index!==i}(r,y,h,b),x&&function(e,t,n,i){var r={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s)if(s[l].location>=0){var c=a[l];void 0===c&&("instanceMatrix"===l&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(c=e.instanceColor));var d={};d.attribute=c,c&&c.data&&(d.data=c.data),r[l]=d,o++}u.attributes=r,u.attributesNum=o,u.index=i}(r,y,h,b)}else{var _=!0===l.wireframe;(u.geometry!==y.id||u.program!==h.id||u.wireframe!==_)&&(u.geometry=y.id,u.program=h.id,u.wireframe=_,x=!0)}null!==b&&n.update(b,34963),(x||c)&&(c=!1,function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var d in u){var h=u[d];if(h.location>=0){var f=l[d];if(void 0===f&&("instanceMatrix"===d&&r.instanceMatrix&&(f=r.instanceMatrix),"instanceColor"===d&&r.instanceColor&&(f=r.instanceColor)),void 0!==f){var y=f.normalized,b=f.itemSize,x=n.get(f);if(void 0===x)continue;var w=x.buffer,_=x.type,S=x.bytesPerElement;if(f.isInterleavedBufferAttribute){var k=f.data,A=k.stride,M=f.offset;if(k.isInstancedInterleavedBuffer){for(var C=0;C<h.locationSize;C++)m(h.location+C,k.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=k.meshPerAttribute*k.count)}else for(var E=0;E<h.locationSize;E++)v(h.location+E);e.bindBuffer(34962,w);for(var T=0;T<h.locationSize;T++)L(h.location+T,b/h.locationSize,_,y,A*S,(M+b/h.locationSize*T)*S)}else{if(f.isInstancedBufferAttribute){for(var P=0;P<h.locationSize;P++)m(h.location+P,f.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var D=0;D<h.locationSize;D++)v(h.location+D);e.bindBuffer(34962,w);for(var O=0;O<h.locationSize;O++)L(h.location+O,b/h.locationSize,_,y,b*S,b/h.locationSize*O*S)}}else if(void 0!==c){var I=c[d];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(h.location,I);break;case 3:e.vertexAttrib3fv(h.location,I);break;case 4:e.vertexAttrib4fv(h.location,I);break;default:e.vertexAttrib1fv(h.location,I)}}}}g()}(r,l,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var i=t[n];for(var r in i)h(i[r].object),delete i[r];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var i=t[n];for(var r in i)h(i[r].object),delete i[r];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)h(i[r].object),delete i[r];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function em(e,t,n,i){var r,a=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=function(i,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,i,o,s),n.update(o,r,s)}}}function tm(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),L=d>0,y=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:L,floatFragmentTextures:y,floatVertexTextures:L&&y,maxSamples:a?e.getParameter(36183):0}}function nm(e){var t=this,n=null,i=0,r=!1,a=!1,o=new Uv,s=new of,l={value:null,needsUpdate:!1};function u(e,n,i,r){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==r||null===u){var c=i+4*a,d=n.matrixWorldInverse;s.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,f=i;h!==a;++h,f+=4)o.copy(e[h]).applyMatrix4(d,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(o,s,c){var d=o.clippingPlanes,h=o.clipIntersection,f=o.clipShadows,p=e.get(o);if(!r||null===d||0===d.length||a&&!f)a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0);else{var v=a?0:i,m=4*v,g=p.clippingState||null;l.value=g,g=u(d,s,m,c);for(var L=0;L!==m;++L)g[L]=n[L];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=v}}}function im(e){var t=new WeakMap;function n(e,t){return t===fd?e.mapping=dd:t===pd&&(e.mapping=hd),e}function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping;if(a===fd||a===pd){if(t.has(r))return n(t.get(r).texture,r.mapping);var o=r.image;if(o&&o.height>0){var s=new Nv(o.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}return r},dispose:function(){t=new WeakMap}}}var rm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,c.Z)(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=r,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Au((0,p.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Dv),am=[.125,.215,.35,.446,.526,.582],om=20,sm=new rm,lm=new wf,um=null,cm=(1+Math.sqrt(5))/2,dm=1/cm,hm=[new Rf(1,1,1),new Rf(-1,1,1),new Rf(1,1,-1),new Rf(-1,1,-1),new Rf(0,cm,dm),new Rf(0,cm,-dm),new Rf(dm,0,cm),new Rf(-dm,0,cm),new Rf(cm,dm,0),new Rf(-cm,dm,0)],fm=function(){function e(t){(0,c.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,d.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;um=this._renderer.getRenderTarget(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=gm(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=mm(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(um),e.scissorTest=!1,vm(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===dd||e.mapping===hd?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),um=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:wd,minFilter:wd,generateMipmaps:!1,type:Dd,format:Nd,encoding:Ph,depthBuffer:!1},i=pm(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){var r;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=pm(e,t,n);var a=this._lodMax;r=function(e){for(var t=[],n=[],i=[],r=e,a=e-4+1+am.length,o=0;o<a;o++){var s=Math.pow(2,r);n.push(s);var l=1/s;o>e-4?l=am[o-e+4-1]:0===o&&(l=0),i.push(l);for(var u=1/(s-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,p=6,v=3,m=2,g=1,L=new Float32Array(v*p*f),y=new Float32Array(m*p*f),b=new Float32Array(g*p*f),x=0;x<f;x++){var w=x%3*2/3-1,_=x>2?0:-1,S=[w,_,0,w+2/3,_,0,w+2/3,_+1,0,w,_,0,w+2/3,_+1,0,w,_+1,0];L.set(S,v*p*x),y.set(h,m*p*x);var k=[x,x,x,x,x,x];b.set(k,g*p*x)}var A=new cv;A.setAttribute("position",new $p(L,v)),A.setAttribute("uv",new $p(y,m)),A.setAttribute("faceIndex",new $p(b,g)),t.push(A),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(a),this._sizeLods=r.sizeLods,this._lodPlanes=r.lodPlanes,this._sigmas=r.sigmas,this._blurMaterial=function(e,t,n){var i=new Float32Array(om),r=new Rf(0,1,0);return new Pv({name:"SphericalGaussianBlur",defines:{n:om,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ac,depthTest:!1,depthWrite:!1})}(a,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new Sv(this._lodPlanes[0],e);this._renderer.compile(t,sm)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var r=new Ov(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(lm),s.toneMapping=ad,s.autoClear=!1;var c=new Qp({name:"PMREM.Background",side:Sc,depthWrite:!1,depthTest:!1}),d=new Sv(new Av,c),h=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,h=!0):(c.color.copy(lm),h=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(r.up.set(0,a[p],0),r.lookAt(o[p],0,0)):1===v?(r.up.set(0,0,a[p]),r.lookAt(0,o[p],0)):(r.up.set(0,a[p],0),r.lookAt(0,0,o[p]));var m=this._cubeSize;vm(i,v*m,p>2?m:0,m,m),s.setRenderTarget(i),h&&s.render(d,r),s.render(e,r)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===dd||e.mapping===hd;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=gm()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=mm());var r=i?this._cubemapMaterial:this._equirectMaterial,a=new Sv(this._lodPlanes[0],r);r.uniforms.envMap.value=e;var o=this._cubeSize;vm(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,sm)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=hm[(i-1)%hm.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(e,t,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new Sv(this._lodPlanes[i],l),c=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,f=r/h,p=isFinite(r)?1+Math.floor(3*f):om;p>om&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(om));for(var v=[],m=0,g=0;g<om;++g){var L=g/f,y=Math.exp(-L*L/2);v.push(y),0===g?m+=y:g<p&&(m+=2*y)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=h,c.mipInt.value=x-n;var w=this._sizeLods[i];vm(t,3*w*(i>x-4?i-x+4:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(u,sm)}}]),e}();function pm(e,t,n){var i=new Tf(e,t,n);return i.texture.mapping=vd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vm(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function mm(){return new Pv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ac,depthTest:!1,depthWrite:!1})}function gm(){return new Pv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ac,depthTest:!1,depthWrite:!1})}function Lm(e){var t=new WeakMap,n=null;function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){var a=r.mapping,o=a===fd||a===pd,s=a===dd||a===hd;if(o||s){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;var l=t.get(r);return null===n&&(n=new fm(e)),l=o?n.fromEquirectangular(r,l):n.fromCubemap(r,l),t.set(r,l),l.texture}if(t.has(r))return t.get(r).texture;var u=r.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(u)){null===n&&(n=new fm(e));var c=o?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,c),r.addEventListener("dispose",i),c.texture}return null}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ym(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function bm(e,t,n,i){var r={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete r[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],d=s[l+1],h=s[l+2];n.push(c,d,d,h,h,c)}}else{var f=r.array;o=r.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,L=p+2;n.push(m,g,g,L,L,m)}}var y=new(lf(n)?tv:ev)(n,1);y.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,y)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function xm(e,t,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)},this.renderInstances=function(i,l,u){if(0!==u){var c,d;if(s)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](r,l,a,i*o,u),n.update(l,r,u)}}}function wm(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function _m(e,t){return e[0]-t[0]}function Sm(e,t){return Math.abs(t[1])-Math.abs(e[1])}function km(e,t,n){for(var i={},r=new Float32Array(8),a=new WeakMap,o=new Ef,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,d){var h=l.morphTargetInfluences;if(!0===t.isWebGL2){var f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0,v=a.get(u);if(void 0===v||v.count!==p){void 0!==v&&v.texture.dispose();var m=void 0!==u.morphAttributes.position,g=void 0!==u.morphAttributes.normal,L=void 0!==u.morphAttributes.color,y=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[],w=0;!0===m&&(w=1),!0===g&&(w=2),!0===L&&(w=3);var _=u.attributes.position.count*w,S=1;_>t.maxTextureSize&&(S=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);var k=new Float32Array(_*S*4*p),A=new Pf(k,_,S,p);A.type=Pd,A.needsUpdate=!0;for(var M=4*w,C=0;C<p;C++)for(var E=y[C],T=b[C],P=x[C],D=_*S*4*C,O=0;O<E.count;O++){var I=O*M;!0===m&&(o.fromBufferAttribute(E,O),k[D+I+0]=o.x,k[D+I+1]=o.y,k[D+I+2]=o.z,k[D+I+3]=0),!0===g&&(o.fromBufferAttribute(T,O),k[D+I+4]=o.x,k[D+I+5]=o.y,k[D+I+6]=o.z,k[D+I+7]=0),!0===L&&(o.fromBufferAttribute(P,O),k[D+I+8]=o.x,k[D+I+9]=o.y,k[D+I+10]=o.z,k[D+I+11]=4===P.itemSize?o.w:1)}v={count:p,texture:A,size:new af(_,S)},a.set(u,v),u.addEventListener("dispose",(function e(){A.dispose(),a.delete(u),u.removeEventListener("dispose",e)}))}for(var R=0,B=0;B<h.length;B++)R+=h[B];var N=u.morphTargetsRelative?1:1-R;d.getUniforms().setValue(e,"morphTargetBaseInfluence",N),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var z=void 0===h?0:h.length,F=i[u.id];if(void 0===F||F.length!==z){F=[];for(var j=0;j<z;j++)F[j]=[j,0];i[u.id]=F}for(var U=0;U<z;U++){var Z=F[U];Z[0]=U,Z[1]=h[U]}F.sort(Sm);for(var V=0;V<8;V++)V<z&&F[V][1]?(s[V][0]=F[V][0],s[V][1]=F[V][1]):(s[V][0]=Number.MAX_SAFE_INTEGER,s[V][1]=0);s.sort(_m);for(var G=u.morphAttributes.position,H=u.morphAttributes.normal,W=0,q=0;q<8;q++){var X=s[q],Y=X[0],Q=X[1];Y!==Number.MAX_SAFE_INTEGER&&Q?(G&&u.getAttribute("morphTarget"+q)!==G[Y]&&u.setAttribute("morphTarget"+q,G[Y]),H&&u.getAttribute("morphNormal"+q)!==H[Y]&&u.setAttribute("morphNormal"+q,H[Y]),r[q]=Q,W+=Q):(G&&!0===u.hasAttribute("morphTarget"+q)&&u.deleteAttribute("morphTarget"+q),H&&!0===u.hasAttribute("morphNormal"+q)&&u.deleteAttribute("morphNormal"+q),r[q]=0)}var K=u.morphTargetsRelative?1:1-W;d.getUniforms().setValue(e,"morphTargetBaseInfluence",K),d.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Am(e,t,n,i){var r=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=i.render.frame,s=e.geometry,l=t.get(e,s);return r.get(l)!==o&&(t.update(l),r.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}var Mm=new Cf,Cm=new Pf,Em=new Df,Tm=new Bv,Pm=[],Dm=[],Om=new Float32Array(16),Im=new Float32Array(9),Rm=new Float32Array(4);function Bm(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Pm[r];if(void 0===a&&(a=new Float32Array(r),Pm[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Nm(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function zm(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Fm(e,t){var n=Dm[t];void 0===n&&(n=new Int32Array(t),Dm[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function jm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Um(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Nm(n,t))return;e.uniform2fv(this.addr,t),zm(n,t)}}function Zm(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Nm(n,t))return;e.uniform3fv(this.addr,t),zm(n,t)}}function Vm(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Nm(n,t))return;e.uniform4fv(this.addr,t),zm(n,t)}}function Gm(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Nm(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),zm(n,t)}else{if(Nm(n,i))return;Rm.set(i),e.uniformMatrix2fv(this.addr,!1,Rm),zm(n,i)}}function Hm(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Nm(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),zm(n,t)}else{if(Nm(n,i))return;Im.set(i),e.uniformMatrix3fv(this.addr,!1,Im),zm(n,i)}}function Wm(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Nm(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),zm(n,t)}else{if(Nm(n,i))return;Om.set(i),e.uniformMatrix4fv(this.addr,!1,Om),zm(n,i)}}function qm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xm(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Nm(n,t))return;e.uniform2iv(this.addr,t),zm(n,t)}}function Ym(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Nm(n,t))return;e.uniform3iv(this.addr,t),zm(n,t)}}function Qm(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Nm(n,t))return;e.uniform4iv(this.addr,t),zm(n,t)}}function Km(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Jm(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Nm(n,t))return;e.uniform2uiv(this.addr,t),zm(n,t)}}function $m(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Nm(n,t))return;e.uniform3uiv(this.addr,t),zm(n,t)}}function eg(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Nm(n,t))return;e.uniform4uiv(this.addr,t),zm(n,t)}}function tg(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Mm,r)}function ng(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Em,r)}function ig(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Tm,r)}function rg(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Cm,r)}function ag(e,t){e.uniform1fv(this.addr,t)}function og(e,t){var n=Bm(t,this.size,2);e.uniform2fv(this.addr,n)}function sg(e,t){var n=Bm(t,this.size,3);e.uniform3fv(this.addr,n)}function lg(e,t){var n=Bm(t,this.size,4);e.uniform4fv(this.addr,n)}function ug(e,t){var n=Bm(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cg(e,t){var n=Bm(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function dg(e,t){var n=Bm(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function hg(e,t){e.uniform1iv(this.addr,t)}function fg(e,t){e.uniform2iv(this.addr,t)}function pg(e,t){e.uniform3iv(this.addr,t)}function vg(e,t){e.uniform4iv(this.addr,t)}function mg(e,t){e.uniform1uiv(this.addr,t)}function gg(e,t){e.uniform2uiv(this.addr,t)}function Lg(e,t){e.uniform3uiv(this.addr,t)}function yg(e,t){e.uniform4uiv(this.addr,t)}function bg(e,t,n){var i=this.cache,r=t.length,a=Fm(n,r);Nm(i,a)||(e.uniform1iv(this.addr,a),zm(i,a));for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Mm,a[o])}function xg(e,t,n){var i=this.cache,r=t.length,a=Fm(n,r);Nm(i,a)||(e.uniform1iv(this.addr,a),zm(i,a));for(var o=0;o!==r;++o)n.setTexture3D(t[o]||Em,a[o])}function wg(e,t,n){var i=this.cache,r=t.length,a=Fm(n,r);Nm(i,a)||(e.uniform1iv(this.addr,a),zm(i,a));for(var o=0;o!==r;++o)n.setTextureCube(t[o]||Tm,a[o])}function _g(e,t,n){var i=this.cache,r=t.length,a=Fm(n,r);Nm(i,a)||(e.uniform1iv(this.addr,a),zm(i,a));for(var o=0;o!==r;++o)n.setTexture2DArray(t[o]||Cm,a[o])}var Sg=(0,d.Z)((function e(t,n,i){(0,c.Z)(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return jm;case 35664:return Um;case 35665:return Zm;case 35666:return Vm;case 35674:return Gm;case 35675:return Hm;case 35676:return Wm;case 5124:case 35670:return qm;case 35667:case 35671:return Xm;case 35668:case 35672:return Ym;case 35669:case 35673:return Qm;case 5125:return Km;case 36294:return Jm;case 36295:return $m;case 36296:return eg;case 35678:case 36198:case 36298:case 36306:case 35682:return tg;case 35679:case 36299:case 36307:return ng;case 35680:case 36300:case 36308:case 36293:return ig;case 36289:case 36303:case 36311:case 36292:return rg}}(n.type)})),kg=(0,d.Z)((function e(t,n,i){(0,c.Z)(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return ag;case 35664:return og;case 35665:return sg;case 35666:return lg;case 35674:return ug;case 35675:return cg;case 35676:return dg;case 5124:case 35670:return hg;case 35667:case 35671:return fg;case 35668:case 35672:return pg;case 35669:case 35673:return vg;case 5125:return mg;case 36294:return gg;case 36295:return Lg;case 36296:return yg;case 35678:case 36198:case 36298:case 36306:case 35682:return bg;case 35679:case 36299:case 36307:return xg;case 35680:case 36300:case 36308:case 36293:return wg;case 36289:case 36303:case 36311:case 36292:return _g}}(n.type)})),Ag=function(){function e(t){(0,c.Z)(this,e),this.id=t,this.seq=[],this.map={}}return(0,d.Z)(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}}}]),e}(),Mg=/(\w+)(\])?(\[|\.)?/g;function Cg(e,t){e.seq.push(t),e.map[t.id]=t}function Eg(e,t,n){var i=e.name,r=i.length;for(Mg.lastIndex=0;;){var a=Mg.exec(i),o=Mg.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){Cg(n,void 0===u?new Sg(s,e,t):new kg(s,e,t));break}var c=n.map[s];void 0===c&&Cg(n,c=new Ag(s)),n=c}}var Tg=function(){function e(t,n){(0,c.Z)(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),r=0;r<i;++r){var a=t.getActiveUniform(n,r);Eg(a,t.getUniformLocation(n,a.name),this)}}return(0,d.Z)(e,[{key:"setValue",value:function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function Pg(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var Dg=0;function Og(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){for(var n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length),o=r;o<a;o++){var s=o+1;i.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return i.join("\n")}(e.getShaderSource(t),o)}return r}function Ig(e,t){var n=function(e){switch(e){case Ph:return["Linear","( value )"];case Dh:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Rg(e,t){var n;switch(t){case od:n="Linear";break;case sd:n="Reinhard";break;case ld:n="OptimizedCineon";break;case ud:n="ACESFilmic";break;case cd:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bg(e){return""!==e}function Ng(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function zg(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Fg=/^[ \t]*#include +<([\w\d./]+)>/gm;function jg(e){return e.replace(Fg,Ug)}function Ug(e,t){var n=Xv[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return jg(n)}var Zg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Vg(e){return e.replace(Zg,Gg)}function Gg(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Hg(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Wg(e,t,n,i){var r,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===bc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===xc?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===wc&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case dd:case hd:t="ENVMAP_TYPE_CUBE";break;case vd:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===hd&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case nd:t="ENVMAP_BLENDING_MULTIPLY";break;case id:t="ENVMAP_BLENDING_MIX";break;case rd:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bg).join("\n")}(n),m=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),g=o.createProgram(),L=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[m].filter(Bg).join("\n")).length>0&&(r+="\n"),(a=[v,m].filter(Bg).join("\n")).length>0&&(a+="\n")):(r=[Hg(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bg).join("\n"),a=[v,Hg(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ad?"#define TONE_MAPPING":"",n.toneMapping!==ad?Xv.tonemapping_pars_fragment:"",n.toneMapping!==ad?Rg("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Xv.encodings_pars_fragment,Ig("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bg).join("\n")),l=zg(l=Ng(l=jg(l),n),n),u=zg(u=Ng(u=jg(u),n),n),l=Vg(l),u=Vg(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(L="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===Uh?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Uh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y,b,x=L+a+u,w=Pg(o,35633,L+r+l),_=Pg(o,35632,x);if(o.attachShader(g,w),o.attachShader(g,_),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var S=o.getProgramInfoLog(g).trim(),k=o.getShaderInfoLog(w).trim(),A=o.getShaderInfoLog(_).trim(),M=!0,C=!0;if(!1===o.getProgramParameter(g,35714)){M=!1;var E=Og(o,w,"vertex"),T=Og(o,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+S+"\n"+E+"\n"+T)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):(""===k||""===A)&&(C=!1);C&&(this.diagnostics={runnable:M,programLog:S,vertexShader:{log:k,prefix:r},fragmentShader:{log:A,prefix:a}})}return o.deleteShader(w),o.deleteShader(_),this.getUniforms=function(){return void 0===y&&(y=new Tg(o,g)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),b},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Dg++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=_,this}var qg=0,Xg=function(){function e(){(0,c.Z)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,d.Z)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),i=(0,x.Z)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(a){i.e(a)}finally{i.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Yg(e),t.set(e,n)),n}}]),e}(),Yg=(0,d.Z)((function e(t){(0,c.Z)(this,e),this.id=qg++,this.code=t,this.usedTimes=0}));function Qg(e,t,n,i,r,a,o){var s=new wp,l=new Xg,u=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,u,v,m){var g=v.fog,L=m.geometry,y=a.isMeshStandardMaterial?v.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||y),x=b&&b.mapping===vd?b.image.height:null,w=p[a.type];null!==a.precision&&((f=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));var _,S,k,A,M=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,C=void 0!==M?M.length:0,E=0;if(void 0!==L.morphAttributes.position&&(E=1),void 0!==L.morphAttributes.normal&&(E=2),void 0!==L.morphAttributes.color&&(E=3),w){var T=Qv[w];_=T.vertexShader,S=T.fragmentShader}else _=a.vertexShader,S=a.fragmentShader,l.update(a),k=l.getVertexShaderID(a),A=l.getFragmentShaderID(a);var P=e.getRenderTarget(),D=a.alphaTest>0,O=a.clearcoat>0,I=a.iridescence>0;return{isWebGL2:c,shaderID:w,shaderName:a.type,vertexShader:_,fragmentShader:S,defines:a.defines,customVertexShaderID:k,customFragmentShaderID:A,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:h,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:Ph,map:!!a.map,matcap:!!a.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:x,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Bh,tangentSpaceNormalMap:a.normalMapType===Rh,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Dh,clearcoat:O,clearcoatMap:O&&!!a.clearcoatMap,clearcoatRoughnessMap:O&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!a.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!a.iridescenceMap,iridescenceThicknessMap:I&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===Mc,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!L.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!L.attributes.color&&4===L.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==L.morphAttributes.position,morphNormals:void 0!==L.morphAttributes.normal,morphColors:void 0!==L.morphAttributes.color,morphTargetsCount:C,morphTextureStride:E,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:ad,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===kc,flipSided:a.side===Sc,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var i=Qv[n];t=Tv.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var i,r=0,o=u.length;r<o;r++){var s=u[r];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new Wg(e,n,t,a),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Kg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Jg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $g(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function eL(){var e=[],t=0,n=[],i=[],r=[];function a(n,i,r,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?i.push(c):!0===o.transparent?r.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?i.unshift(c):!0===o.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Jg),i.length>1&&i.sort(t||$g),r.length>1&&r.sort(t||$g)}}}function tL(){var e=new WeakMap;return{get:function(t,n){var i,r=e.get(t);return void 0===r?(i=new eL,e.set(t,[i])):n>=r.length?(i=new eL,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function nL(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Rf,color:new wf};break;case"SpotLight":n={position:new Rf,direction:new Rf,color:new wf,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Rf,color:new wf,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Rf,skyColor:new wf,groundColor:new wf};break;case"RectAreaLight":n={color:new wf,position:new Rf,halfWidth:new Rf,halfHeight:new Rf}}return e[t.id]=n,n}}}var iL=0;function rL(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function aL(e,t){for(var n=new nL,i=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new af};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new af,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)r.probe.push(new Rf);var o=new Rf,s=new dp,l=new dp;return{setup:function(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var d=0,h=0,f=0,p=0,v=0,m=0,g=0,L=0,y=0,b=0;a.sort(rL);for(var x=!0!==o?Math.PI:1,w=0,_=a.length;w<_;w++){var S=a[w],k=S.color,A=S.intensity,M=S.distance,C=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=k.r*A*x,l+=k.g*A*x,u+=k.b*A*x;else if(S.isLightProbe)for(var E=0;E<9;E++)r.probe[E].addScaledVector(S.sh.coefficients[E],A);else if(S.isDirectionalLight){var T=n.get(S);if(T.color.copy(S.color).multiplyScalar(S.intensity*x),S.castShadow){var P=S.shadow,D=i.get(S);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,r.directionalShadow[d]=D,r.directionalShadowMap[d]=C,r.directionalShadowMatrix[d]=S.shadow.matrix,m++}r.directional[d]=T,d++}else if(S.isSpotLight){var O=n.get(S);O.position.setFromMatrixPosition(S.matrixWorld),O.color.copy(k).multiplyScalar(A*x),O.distance=M,O.coneCos=Math.cos(S.angle),O.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),O.decay=S.decay,r.spot[f]=O;var I=S.shadow;if(S.map&&(r.spotLightMap[y]=S.map,y++,I.updateMatrices(S),S.castShadow&&b++),r.spotLightMatrix[f]=I.matrix,S.castShadow){var R=i.get(S);R.shadowBias=I.bias,R.shadowNormalBias=I.normalBias,R.shadowRadius=I.radius,R.shadowMapSize=I.mapSize,r.spotShadow[f]=R,r.spotShadowMap[f]=C,L++}f++}else if(S.isRectAreaLight){var B=n.get(S);B.color.copy(k).multiplyScalar(A),B.halfWidth.set(.5*S.width,0,0),B.halfHeight.set(0,.5*S.height,0),r.rectArea[p]=B,p++}else if(S.isPointLight){var N=n.get(S);if(N.color.copy(S.color).multiplyScalar(S.intensity*x),N.distance=S.distance,N.decay=S.decay,S.castShadow){var z=S.shadow,F=i.get(S);F.shadowBias=z.bias,F.shadowNormalBias=z.normalBias,F.shadowRadius=z.radius,F.shadowMapSize=z.mapSize,F.shadowCameraNear=z.camera.near,F.shadowCameraFar=z.camera.far,r.pointShadow[h]=F,r.pointShadowMap[h]=C,r.pointShadowMatrix[h]=S.shadow.matrix,g++}r.point[h]=N,h++}else if(S.isHemisphereLight){var j=n.get(S);j.skyColor.copy(S.color).multiplyScalar(A*x),j.groundColor.copy(S.groundColor).multiplyScalar(A*x),r.hemi[v]=j,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Yv.LTC_FLOAT_1,r.rectAreaLTC2=Yv.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Yv.LTC_HALF_1,r.rectAreaLTC2=Yv.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=u;var U=r.hash;(U.directionalLength!==d||U.pointLength!==h||U.spotLength!==f||U.rectAreaLength!==p||U.hemiLength!==v||U.numDirectionalShadows!==m||U.numPointShadows!==g||U.numSpotShadows!==L||U.numSpotMaps!==y)&&(r.directional.length=d,r.spot.length=f,r.rectArea.length=p,r.point.length=h,r.hemi.length=v,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=L,r.spotShadowMap.length=L,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=L+y-b,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=b,U.directionalLength=d,U.pointLength=h,U.spotLength=f,U.rectAreaLength=p,U.hemiLength=v,U.numDirectionalShadows=m,U.numPointShadows=g,U.numSpotShadows=L,U.numSpotMaps=y,r.version=iL++)},setupView:function(e,t){for(var n=0,i=0,a=0,u=0,c=0,d=t.matrixWorldInverse,h=0,f=e.length;h<f;h++){var p=e[h];if(p.isDirectionalLight){var v=r.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(d),n++}else if(p.isSpotLight){var m=r.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(d),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(d),a++}else if(p.isRectAreaLight){var g=r.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(d),l.identity(),s.copy(p.matrixWorld),s.premultiply(d),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var L=r.point[i];L.position.setFromMatrixPosition(p.matrixWorld),L.position.applyMatrix4(d),i++}else if(p.isHemisphereLight){var y=r.hemi[c];y.direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(d),c++}}},state:r}}function oL(e,t){var n=new aL(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function sL(e,t){var n=new WeakMap;return{get:function(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(i);return void 0===o?(r=new oL(e,t),n.set(i,[r])):a>=o.length?(r=new oL(e,t),o.push(r)):r=o[a],r},dispose:function(){n=new WeakMap}}}var lL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=Oh,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Yp),uL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new Rf,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Yp),cL="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",dL="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function hL(e,t,n){var i,r=new Gv,a=new af,o=new af,s=new Ef,l=new lL({depthPacking:Ih}),u=new uL,c={},d=n.maxTextureSize,h=(Ke(i={},_c,Sc),Ke(i,Sc,_c),Ke(i,kc,kc),i),f=new Pv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new af},radius:{value:4}},vertexShader:cL,fragmentShader:dL}),p=f.clone();p.defines.HORIZONTAL_PASS=1;var v=new cv;v.setAttribute("position",new $p(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Sv(v,f),g=this;function L(n,i){var r=t.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Tf(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,f,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,p,m,null)}function y(t,n,i,r,a,o){var s=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)s=d;else if(s=!0===i.isPointLight?u:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var f=s.uuid,p=n.uuid,v=c[f];void 0===v&&(v={},c[f]=v);var m=v[p];void 0===m&&(m=s.clone(),v[p]=m),s=m}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=o===wc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial&&(s.referencePosition.setFromMatrixPosition(i.matrixWorld),s.nearDistance=r,s.farDistance=a),s}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===wc)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,d=0,h=c.length;d<h;d++){var f=c[d],p=u[f.materialIndex];if(p&&p.visible){var v=y(n,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,v,n,f)}}else if(u.visible){var m=y(n,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,L=0,x=g.length;L<x;L++)b(g[L],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bc,this.render=function(t,n,i){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),h=e.state;h.setBlending(Ac),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var v=t[f],m=v.shadow;if(void 0!==m){if(!1!==m.autoUpdate||!1!==m.needsUpdate){a.copy(m.mapSize);var y=m.getFrameExtents();if(a.multiply(y),o.copy(m.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(o.x=Math.floor(d/y.x),a.x=o.x*y.x,m.mapSize.x=o.x),a.y>d&&(o.y=Math.floor(d/y.y),a.y=o.y*y.y,m.mapSize.y=o.y)),null===m.map){var x=this.type!==wc?{minFilter:yd,magFilter:yd}:{};m.map=new Tf(a.x,a.y,x),m.map.texture.name=v.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();for(var w=m.getViewportCount(),_=0;_<w;_++){var S=m.getViewport(_);s.set(o.x*S.x,o.y*S.y,o.x*S.z,o.y*S.w),h.viewport(s),m.updateMatrices(v,_),r=m.getFrustum(),b(n,i,m.camera,v,this.type)}!0!==m.isPointLightShadow&&this.type===wc&&L(m,i),m.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}g.needsUpdate=!1,e.setRenderTarget(l,u,c)}}}function fL(e,t,n){var i,r,a=n.isWebGL2;var o=new function(){var t=!1,n=new Ef,i=null,r=new Ef(0,0,0,0);return{setMask:function(n){i!==n&&!t&&(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?Z(2929):V(2929)},setMask:function(i){n!==i&&!t&&(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case Xc:e.depthFunc(512);break;case Yc:e.depthFunc(519);break;case Qc:e.depthFunc(513);break;case Kc:e.depthFunc(515);break;case Jc:e.depthFunc(514);break;case $c:e.depthFunc(518);break;case ed:e.depthFunc(516);break;case td:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},l=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?Z(2960):V(2960))},setMask:function(i){n!==i&&!t&&(e.stencilMask(i),n=i)},setFunc:function(t,n,o){(i!==t||r!==n||a!==o)&&(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){(o!==t||s!==n||l!==i)&&(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}},u=new WeakMap,c=new WeakMap,d={},h={},f=new WeakMap,p=[],v=null,m=!1,g=null,L=null,y=null,b=null,x=null,w=null,_=null,S=!1,k=null,A=null,M=null,C=null,E=null,T=e.getParameter(35661),P=!1,D=0,O=e.getParameter(7938);-1!==O.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=D>=1):-1!==O.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=D>=2);var I=null,R={},B=e.getParameter(3088),N=e.getParameter(2978),z=(new Ef).fromArray(B),F=(new Ef).fromArray(N);function j(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var U={};function Z(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function V(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}U[3553]=j(3553,3553,1),U[34067]=j(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Z(2929),s.setFunc(Kc),X(!1),Y(Lc),Z(2884),q(Ac);var G=(Ke(i={},Dc,32774),Ke(i,Oc,32778),Ke(i,Ic,32779),i);if(a)G[Rc]=32775,G[Bc]=32776;else{var H=t.get("EXT_blend_minmax");null!==H&&(G[Rc]=H.MIN_EXT,G[Bc]=H.MAX_EXT)}var W=(Ke(r={},Nc,0),Ke(r,zc,1),Ke(r,Fc,768),Ke(r,Uc,770),Ke(r,qc,776),Ke(r,Hc,774),Ke(r,Vc,772),Ke(r,jc,769),Ke(r,Zc,771),Ke(r,Wc,775),Ke(r,Gc,773),r);function q(t,n,i,r,a,o,s,l){if(t!==Ac){if(!1===m&&(Z(3042),m=!0),t===Pc)a=a||n,o=o||i,s=s||r,(n!==L||a!==x)&&(e.blendEquationSeparate(G[n],G[a]),L=n,x=a),(i!==y||r!==b||o!==w||s!==_)&&(e.blendFuncSeparate(W[i],W[r],W[o],W[s]),y=i,b=r,w=o,_=s),g=t,S=!1;else if(t!==g||l!==S){if((L!==Dc||x!==Dc)&&(e.blendEquation(32774),L=Dc,x=Dc),l)switch(t){case Mc:e.blendFuncSeparate(1,771,1,771);break;case Cc:e.blendFunc(1,1);break;case Ec:e.blendFuncSeparate(0,769,0,1);break;case Tc:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Mc:e.blendFuncSeparate(770,771,1,771);break;case Cc:e.blendFunc(770,1);break;case Ec:e.blendFuncSeparate(0,769,0,1);break;case Tc:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,w=null,_=null,g=t,S=l}}else!0===m&&(V(3042),m=!1)}function X(t){k!==t&&(t?e.frontFace(2304):e.frontFace(2305),k=t)}function Y(t){t!==gc?(Z(2884),t!==A&&(t===Lc?e.cullFace(1029):t===yc?e.cullFace(1028):e.cullFace(1032))):V(2884),A=t}function Q(t,n,i){t?(Z(32823),(C!==n||E!==i)&&(e.polygonOffset(n,i),C=n,E=i)):V(32823)}return{buffers:{color:o,depth:s,stencil:l},enable:Z,disable:V,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},drawBuffers:function(i,r){var a=p,o=!1;if(i)if(void 0===(a=f.get(r))&&(a=[],f.set(r,a)),i.isWebGLMultipleRenderTargets){var s=i.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:q,setMaterial:function(e,t){e.side===kc?V(2884):Z(2884);var n=e.side===Sc;t&&(n=!n),X(n),e.blending===Mc&&!1===e.transparent?q(Ac):q(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var i=e.stencilWrite;l.setTest(i),i&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Z(32926):V(32926)},setFlipSided:X,setCullFace:Y,setLineWidth:function(t){t!==M&&(P&&e.lineWidth(t),M=t)},setPolygonOffset:Q,setScissorTest:function(e){e?Z(3089):V(3089)},activeTexture:function(t){void 0===t&&(t=33984+T-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===I?33984+T-1:I);var r=R[i];void 0===r&&(r={type:void 0,texture:void 0},R[i]=r),(r.type!==t||r.texture!==n)&&(I!==i&&(e.activeTexture(i),I=i),e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=R[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},updateUBOMapping:function(t,n){var i=c.get(n);void 0===i&&(i=new WeakMap,c.set(n,i));var r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){var i=c.get(n).get(t);u.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),u.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},I=null,R={},h={},f=new WeakMap,p=[],v=null,m=!1,g=null,L=null,y=null,b=null,x=null,w=null,_=null,S=!1,k=null,A=null,M=null,C=null,E=null,z.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function pL(e,t,n,i,r,a,o){var s,l,u,c=r.isWebGL2,d=r.maxTextures,h=r.maxCubemapSize,f=r.maxTextureSize,p=r.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,L=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(G){}function b(e,t){return y?new OffscreenCanvas(e,t):df("canvas")}function x(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){var a=t?ef:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===u&&(u=b(o,s));var l=n?b(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Jh(e.width)&&Jh(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==yd&&e.minFilter!==wd}function S(t){e.generateMipmap(t)}function k(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),33319===i&&(5126===r&&(s=33328),5131===r&&(s=33327),5121===r&&(s=33323)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===Dh&&!1===o?35907:32856),32819===r&&(s=32854),32820===r&&(s=32855)),(33325===s||33326===s||33327===s||33328===s||34842===s||34836===s)&&t.get("EXT_color_buffer_float"),s}function A(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==yd&&e.minFilter!==wd?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function M(e){return e===yd||e===bd||e===xd?9728:9729}function C(e){var t=e.target;t.removeEventListener("dispose",C),function(e){var t=i.get(e);if(void 0===t.__webglInit)return;var n=e.source,r=L.get(n);if(r){var a=r[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&T(e),0===Object.keys(r).length&&L.delete(n)}i.remove(e)}(t),t.isVideoTexture&&g.delete(t)}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=t.texture,r=i.get(t),a=i.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(var l=0;l<r.__webglColorRenderbuffer.length;l++)r.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[l]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var d=i.get(n[u]);d.__webglTexture&&(e.deleteTexture(d.__webglTexture),o.memory.textures--),i.remove(n[u])}i.remove(n),i.remove(t)}(n)}function T(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var r=t.source;delete L.get(r)[n.__cacheKey],o.memory.textures--}var P=0;function D(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void N(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,r.__webglTexture,33984+t)}var O=(Ke(s={},md,10497),Ke(s,gd,33071),Ke(s,Ld,33648),s),I=(Ke(l={},yd,9728),Ke(l,bd,9984),Ke(l,xd,9986),Ke(l,wd,9729),Ke(l,_d,9985),Ke(l,Sd,9987),l);function R(n,a,o){if(o?(e.texParameteri(n,10242,O[a.wrapS]),e.texParameteri(n,10243,O[a.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,O[a.wrapR]),e.texParameteri(n,10240,I[a.magFilter]),e.texParameteri(n,10241,I[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),(a.wrapS!==gd||a.wrapT!==gd)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==yd&&a.minFilter!==wd&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===yd||a.minFilter!==xd&&a.minFilter!==Sd||a.type===Pd&&!1===t.has("OES_texture_float_linear")||!1===c&&a.type===Dd&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function B(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));var r=n.source,a=L.get(r);void 0===a&&(a={},L.set(r,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&T(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return i}function N(t,r,o){var s=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(s=35866),r.isData3DTexture&&(s=32879);var l=B(t,r),u=r.source;n.bindTexture(s,t.__webglTexture,33984+o);var d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var h=function(e){return!c&&(e.wrapS!==gd||e.wrapT!==gd||e.minFilter!==yd&&e.minFilter!==wd)}(r)&&!1===w(r.image),p=x(r.image,h,!1,f),v=w(p=V(r,p))||c,m=a.convert(r.format,r.encoding),g=a.convert(r.type),L=k(r.internalFormat,m,g,r.encoding,r.isVideoTexture);R(s,r,v);var y,b=r.mipmaps,M=c&&!0!==r.isVideoTexture,C=void 0===d.__version||!0===l,E=A(r,p,v);if(r.isDepthTexture)L=6402,c?L=r.type===Pd?36012:r.type===Td?33190:r.type===Rd?35056:33189:r.type===Pd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===jd&&6402===L&&r.type!==Cd&&r.type!==Td&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Td,g=a.convert(r.type)),r.format===Ud&&6402===L&&(L=34041,r.type!==Rd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Rd,g=a.convert(r.type))),C&&(M?n.texStorage2D(3553,1,L,p.width,p.height):n.texImage2D(3553,0,L,p.width,p.height,0,m,g,null));else if(r.isDataTexture)if(b.length>0&&v){M&&C&&n.texStorage2D(3553,E,L,b[0].width,b[0].height);for(var T=0,P=b.length;T<P;T++)y=b[T],M?n.texSubImage2D(3553,T,0,0,y.width,y.height,m,g,y.data):n.texImage2D(3553,T,L,y.width,y.height,0,m,g,y.data);r.generateMipmaps=!1}else M?(C&&n.texStorage2D(3553,E,L,p.width,p.height),n.texSubImage2D(3553,0,0,0,p.width,p.height,m,g,p.data)):n.texImage2D(3553,0,L,p.width,p.height,0,m,g,p.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){M&&C&&n.texStorage3D(35866,E,L,b[0].width,b[0].height,p.depth);for(var D=0,O=b.length;D<O;D++)y=b[D],r.format!==Nd?null!==m?M?n.compressedTexSubImage3D(35866,D,0,0,0,y.width,y.height,p.depth,m,y.data,0,0):n.compressedTexImage3D(35866,D,L,y.width,y.height,p.depth,0,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage3D(35866,D,0,0,0,y.width,y.height,p.depth,m,g,y.data):n.texImage3D(35866,D,L,y.width,y.height,p.depth,0,m,g,y.data)}else{M&&C&&n.texStorage2D(3553,E,L,b[0].width,b[0].height);for(var I=0,N=b.length;I<N;I++)y=b[I],r.format!==Nd?null!==m?M?n.compressedTexSubImage2D(3553,I,0,0,y.width,y.height,m,y.data):n.compressedTexImage2D(3553,I,L,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage2D(3553,I,0,0,y.width,y.height,m,g,y.data):n.texImage2D(3553,I,L,y.width,y.height,0,m,g,y.data)}else if(r.isDataArrayTexture)M?(C&&n.texStorage3D(35866,E,L,p.width,p.height,p.depth),n.texSubImage3D(35866,0,0,0,0,p.width,p.height,p.depth,m,g,p.data)):n.texImage3D(35866,0,L,p.width,p.height,p.depth,0,m,g,p.data);else if(r.isData3DTexture)M?(C&&n.texStorage3D(32879,E,L,p.width,p.height,p.depth),n.texSubImage3D(32879,0,0,0,0,p.width,p.height,p.depth,m,g,p.data)):n.texImage3D(32879,0,L,p.width,p.height,p.depth,0,m,g,p.data);else if(r.isFramebufferTexture){if(C)if(M)n.texStorage2D(3553,E,L,p.width,p.height);else for(var z=p.width,F=p.height,j=0;j<E;j++)n.texImage2D(3553,j,L,z,F,0,m,g,null),z>>=1,F>>=1}else if(b.length>0&&v){M&&C&&n.texStorage2D(3553,E,L,b[0].width,b[0].height);for(var U=0,Z=b.length;U<Z;U++)y=b[U],M?n.texSubImage2D(3553,U,0,0,m,g,y):n.texImage2D(3553,U,L,m,g,y);r.generateMipmaps=!1}else M?(C&&n.texStorage2D(3553,E,L,p.width,p.height),n.texSubImage2D(3553,0,0,0,m,g,p)):n.texImage2D(3553,0,L,m,g,p);_(r,v)&&S(s),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function z(t,r,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),d=k(o.internalFormat,u,c,o.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,d,r.width,r.height,0,u,c,null)),n.bindFramebuffer(36160,t),Z(r)?v.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(o).__webglTexture,0,U(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||Z(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Pd?r=36012:o.type===Td&&(r=33190));var s=U(n);Z(n)?v.renderbufferStorageMultisampleEXT(36161,s,r,n.width,n.height):e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=U(n);i&&!1===Z(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):Z(n)?v.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var d=u[c],h=a.convert(d.format,d.encoding),f=a.convert(d.type),p=k(d.internalFormat,h,f,d.encoding),m=U(n);i&&!1===Z(n)?e.renderbufferStorageMultisample(36161,m,p,n.width,n.height):Z(n)?v.renderbufferStorageMultisampleEXT(36161,m,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function j(t){var r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height)&&(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),D(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture,o=U(r);if(r.depthTexture.format===jd)Z(r)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Ud)throw new Error("Unknown depthTexture format");Z(r)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),F(r.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),F(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function U(e){return Math.min(p,e.samples)}function Z(e){var n=i.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,n){var i=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Zh||i!==Ph&&(i===Dh?!1===c?!0===t.has("EXT_sRGB")&&r===Nd?(e.format=Zh,e.minFilter=wd,e.generateMipmaps=!1):n=Sf.sRGBToLinear(n):(r!==Nd||a!==kd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){var e=P;return e>=d&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+d),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=D,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):n.bindTexture(35866,r.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):n.bindTexture(32879,r.__webglTexture,33984+t)},this.setTextureCube=function(t,r){var o=i.get(t);t.version>0&&o.__version!==t.version?function(t,r,o){if(6!==r.image.length)return;var s=B(t,r),l=r.source;n.bindTexture(34067,t.__webglTexture,33984+o);var u=i.get(l);if(l.version!==u.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var d=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=d||f?f?r.image[v].image:r.image[v]:x(r.image[v],!1,!0,h),p[v]=V(r,p[v]);var m,g=p[0],L=w(g)||c,y=a.convert(r.format,r.encoding),b=a.convert(r.type),M=k(r.internalFormat,y,b,r.encoding),C=c&&!0!==r.isVideoTexture,E=void 0===u.__version||!0===s,T=A(r,g,L);if(R(34067,r,L),d){C&&E&&n.texStorage2D(34067,T,M,g.width,g.height);for(var P=0;P<6;P++){m=p[P].mipmaps;for(var D=0;D<m.length;D++){var O=m[D];r.format!==Nd?null!==y?C?n.compressedTexSubImage2D(34069+P,D,0,0,O.width,O.height,y,O.data):n.compressedTexImage2D(34069+P,D,M,O.width,O.height,0,O.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):C?n.texSubImage2D(34069+P,D,0,0,O.width,O.height,y,b,O.data):n.texImage2D(34069+P,D,M,O.width,O.height,0,y,b,O.data)}}}else{m=r.mipmaps,C&&E&&(m.length>0&&T++,n.texStorage2D(34067,T,M,p[0].width,p[0].height));for(var I=0;I<6;I++)if(f){C?n.texSubImage2D(34069+I,0,0,0,p[I].width,p[I].height,y,b,p[I].data):n.texImage2D(34069+I,0,M,p[I].width,p[I].height,0,y,b,p[I].data);for(var N=0;N<m.length;N++){var z=m[N].image[I].image;C?n.texSubImage2D(34069+I,N+1,0,0,z.width,z.height,y,b,z.data):n.texImage2D(34069+I,N+1,M,z.width,z.height,0,y,b,z.data)}}else{C?n.texSubImage2D(34069+I,0,0,0,y,b,p[I]):n.texImage2D(34069+I,0,M,y,b,p[I]);for(var F=0;F<m.length;F++){var j=m[F];C?n.texSubImage2D(34069+I,F+1,0,0,y,b,j.image[I]):n.texImage2D(34069+I,F+1,M,y,b,j.image[I])}}}_(r,L)&&S(34067),u.__version=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,r):n.bindTexture(34067,o.__webglTexture,33984+r)},this.rebindTextures=function(e,t,n){var r=i.get(e);void 0!==t&&z(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&j(e)},this.setupRenderTarget=function(t){var s=t.texture,l=i.get(t),u=i.get(s);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=w(t)||c;if(d){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),h)if(r.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var L=i.get(v[m]);void 0===L.__webglTexture&&(L.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===Z(t)){var y=h?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var b=0;b<y.length;b++){var x=y[b];l.__webglColorRenderbuffer[b]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[b]);var A=a.convert(x.format,x.encoding),M=a.convert(x.type),C=k(x.internalFormat,A,M,x.encoding,!0===t.isXRRenderTarget),T=U(t);e.renderbufferStorageMultisample(36161,T,C,t.width,t.height),e.framebufferRenderbuffer(36160,36064+b,36161,l.__webglColorRenderbuffer[b])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),F(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),R(34067,s,f);for(var P=0;P<6;P++)z(l.__webglFramebuffer[P],t,s,36064,34069+P);_(s,f)&&S(34067),n.unbindTexture()}else if(h){for(var D=t.texture,O=0,I=D.length;O<I;O++){var B=D[O],N=i.get(B);n.bindTexture(3553,N.__webglTexture),R(3553,B,f),z(l.__webglFramebuffer,t,B,36064+O,3553),_(B,f)&&S(3553)}n.unbindTexture()}else{var V=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?V=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(V,u.__webglTexture),R(V,s,f),z(l.__webglFramebuffer,t,s,36064,V),_(s,f)&&S(V),n.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){for(var t=w(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=r.length;a<o;a++){var s=r[a];if(_(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=i.get(s).__webglTexture;n.bindTexture(l,u),S(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===Z(t)){var r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,d=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(var f=0;f<r.length;f++)n.bindFramebuffer(36160,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+f,36161,null),n.bindFramebuffer(36160,d.__webglFramebuffer),e.framebufferTexture2D(36009,36064+f,3553,null,0);n.bindFramebuffer(36008,d.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,d.__webglFramebuffer);for(var p=0;p<r.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,d.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),h){var g=i.get(r[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,g,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),m&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(var L=0;L<r.length;L++){n.bindFramebuffer(36160,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+L,36161,d.__webglColorRenderbuffer[L]);var y=i.get(r[L]).__webglTexture;n.bindFramebuffer(36160,d.__webglFramebuffer),e.framebufferTexture2D(36009,36064+L,3553,y,0)}n.bindFramebuffer(36009,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=z,this.useMultisampledRTT=Z}function vL(e,t,n){var i=n.isWebGL2;return{convert:function(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===kd)return 5121;if(n===Od)return 32819;if(n===Id)return 32820;if(n===Ad)return 5120;if(n===Md)return 5122;if(n===Cd)return 5123;if(n===Ed)return 5124;if(n===Td)return 5125;if(n===Pd)return 5126;if(n===Dd)return i?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(n===Bd)return 6406;if(n===Nd)return 6408;if(n===zd)return 6409;if(n===Fd)return 6410;if(n===jd)return 6402;if(n===Ud)return 34041;if(n===Zh)return null!==(r=t.get("EXT_sRGB"))?r.SRGB_ALPHA_EXT:null;if(n===Zd)return 6403;if(n===Vd)return 36244;if(n===Gd)return 33319;if(n===Hd)return 33320;if(n===Wd)return 36249;if(n===qd||n===Xd||n===Yd||n===Qd)if(a===Dh){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===qd)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Xd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Yd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Qd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===qd)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Xd)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Yd)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Qd)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Kd||n===Jd||n===$d||n===eh){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===Kd)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Jd)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===$d)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===eh)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===th)return null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===nh||n===ih){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(n===nh)return a===Dh?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===ih)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===rh||n===ah||n===oh||n===sh||n===lh||n===uh||n===ch||n===dh||n===hh||n===fh||n===ph||n===vh||n===mh||n===gh){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(n===rh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ah)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===oh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===sh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===lh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===uh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ch)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===dh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===hh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===fh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ph)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===vh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===mh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===gh)return a===Dh?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Lh){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(n===Lh)return a===Dh?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===yh||n===bh||n===xh||n===wh){if(null===(r=t.get("EXT_texture_compression_rgtc")))return null;if(n===Lh)return r.COMPRESSED_RED_RGTC1_EXT;if(n===bh)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===xh)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===wh)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Rd?i?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var mL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,c.Z)(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=i,e}return(0,d.Z)(n)}(Ov),gL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return(0,d.Z)(n)}(Bp),LL={type:"move"},yL=function(){function e(){(0,c.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,d.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new gL,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new gL,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Rf,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Rf),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new gL,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Rf,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Rf),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,i=(0,x.Z)(e.hand.values());try{for(i.s();!(n=i.n()).done;){var r=n.value;this._getHandJoint(t,r)}}catch(a){i.e(a)}finally{i.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;var u,c=(0,x.Z)(e.hand.values());try{for(c.s();!(u=c.n()).done;){var d=u.value,h=t.getJointPose(d,n),f=this._getHandJoint(l,d);null!==h&&(f.matrix.fromArray(h.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=h.radius),f.visible=null!==h}}catch(g){c.e(g)}finally{c.f()}var p=l.joints["index-finger-tip"],v=l.joints["thumb-tip"],m=p.position.distanceTo(v.position);l.inputState.pinching&&m>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&m<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(null!==(r=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(LL)))}return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new gL;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),bL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h){var f;if((0,c.Z)(this,n),(h=void 0!==h?h:jd)!==jd&&h!==Ud)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&h===jd&&(r=Td),void 0===r&&h===Ud&&(r=Rd),(f=t.call(this,null,a,o,s,l,u,h,r,d)).isDepthTexture=!0,f.image={width:e,height:i},f.magFilter=void 0!==l?l:yd,f.minFilter=void 0!==u?u:yd,f.flipY=!1,f.generateMipmaps=!1,f}return(0,d.Z)(n)}(Cf),xL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),r=t.call(this);var a=(0,Ye.Z)(r),o=null,s=1,l=null,u="local-floor",d=1,h=null,f=null,p=null,v=null,m=null,g=null,L=i.getContextAttributes(),y=null,b=null,w=[],_=[],S=new Set,k=new Map,A=new Ov;A.layers.enable(1),A.viewport=new Ef;var M=new Ov;M.layers.enable(2),M.viewport=new Ef;var C=[A,M],E=new mL;E.layers.enable(1),E.layers.enable(2);var T=null,P=null;function D(e){var t=_.indexOf(e.inputSource);if(-1!==t){var n=w[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function O(){o.removeEventListener("select",D),o.removeEventListener("selectstart",D),o.removeEventListener("selectend",D),o.removeEventListener("squeeze",D),o.removeEventListener("squeezestart",D),o.removeEventListener("squeezeend",D),o.removeEventListener("end",O),o.removeEventListener("inputsourceschange",I);for(var t=0;t<w.length;t++){var n=_[t];null!==n&&(_[t]=null,w[t].disconnect(n))}T=null,P=null,e.setRenderTarget(y),m=null,v=null,p=null,o=null,b=null,F.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function I(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=_.indexOf(n);i>=0&&(_[i]=null,w[i].disconnect(n))}for(var r=0;r<e.added.length;r++){var a=e.added[r],o=_.indexOf(a);if(-1===o){for(var s=0;s<w.length;s++){if(s>=_.length){_.push(a),o=s;break}if(null===_[s]){_[s]=a,o=s;break}}if(-1===o)break}var l=w[o];l&&l.connect(a)}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=w[e];return void 0===t&&(t=new yL,w[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=w[e];return void 0===t&&(t=new yL,w[e]=t),t.getGripSpace()},r.getHand=function(e){var t=w[e];return void 0===t&&(t=new yL,w[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){u=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return h||l},r.setReferenceSpace=function(e){h=e},r.getBaseLayer=function(){return null!==v?v:m},r.getBinding=function(){return p},r.getFrame=function(){return g},r.getSession=function(){return o},r.setSession=function(){var t=(0,ju.Z)((0,Fu.Z)().mark((function t(n){var r,c,f,g,x;return(0,Fu.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=35;break}if(y=e.getRenderTarget(),o.addEventListener("select",D),o.addEventListener("selectstart",D),o.addEventListener("selectend",D),o.addEventListener("squeeze",D),o.addEventListener("squeezestart",D),o.addEventListener("squeezeend",D),o.addEventListener("end",O),o.addEventListener("inputsourceschange",I),t.t0=!0!==L.xrCompatible,!t.t0){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:if(void 0!==o.renderState.layers&&!1!==e.capabilities.isWebGL2){t.next=19;break}r={antialias:void 0!==o.renderState.layers||L.antialias,alpha:L.alpha,depth:L.depth,stencil:L.stencil,framebufferScaleFactor:s},m=new XRWebGLLayer(o,i,r),o.updateRenderState({baseLayer:m}),b=new Tf(m.framebufferWidth,m.framebufferHeight,{format:Nd,type:kd,encoding:e.outputEncoding,stencilBuffer:L.stencil}),t.next=25;break;case 19:c=null,f=null,g=null,L.depth&&(g=L.stencil?35056:33190,c=L.stencil?Ud:jd,f=L.stencil?Rd:Td),x={colorFormat:32856,depthFormat:g,scaleFactor:s},p=new XRWebGLBinding(o,i),v=p.createProjectionLayer(x),o.updateRenderState({layers:[v]}),b=new Tf(v.textureWidth,v.textureHeight,{format:Nd,type:kd,depthTexture:new bL(v.textureWidth,v.textureHeight,f,void 0,void 0,void 0,void 0,void 0,void 0,c),stencilBuffer:L.stencil,encoding:e.outputEncoding,samples:L.antialias?4:0}),e.properties.get(b).__ignoreDepthValues=v.ignoreDepthValues;case 25:return b.isXRRenderTarget=!0,this.setFoveation(d),h=null,t.next=30,o.requestReferenceSpace(u);case 30:l=t.sent,F.setContext(o),F.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 35:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var R=new Rf,B=new Rf;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==o){E.near=M.near=A.near=e.near,E.far=M.far=A.far=e.far,(T!==E.near||P!==E.far)&&(o.updateRenderState({depthNear:E.near,depthFar:E.far}),T=E.near,P=E.far);var t=e.parent,n=E.cameras;N(E,t);for(var i=0;i<n.length;i++)N(n[i],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.matrix.copy(E.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var r=e.children,a=0,s=r.length;a<s;a++)r[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),B.setFromMatrixPosition(n.matrixWorld);var i=R.distanceTo(B),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=o*c,f=o*d,p=i/(-c+d),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,L=h-v,y=f+(i-v),b=l*s/g*m,x=u*s/g*m;e.projectionMatrix.makePerspective(L,y,b,x,m,g)}(E,A,M):E.projectionMatrix.copy(A.projectionMatrix)}},r.getCamera=function(){return E},r.getFoveation=function(){if(null!==v||null!==m)return d},r.setFoveation=function(e){d=e,null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)},r.getPlanes=function(){return S};var z=null;var F=new Hv;return F.setAnimationLoop((function(t,n){if(f=n.getViewerPose(h||l),g=n,null!==f){var i=f.views;null!==m&&(e.setRenderTargetFramebuffer(b,m.framebuffer),e.setRenderTarget(b));var r=!1;i.length!==E.cameras.length&&(E.cameras.length=0,r=!0);for(var o=0;o<i.length;o++){var s=i[o],u=null;if(null!==m)u=m.getViewport(s);else{var c=p.getViewSubImage(v,s);u=c.viewport,0===o&&(e.setRenderTargetTextures(b,c.colorTexture,v.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(b))}var d=C[o];void 0===d&&((d=new Ov).layers.enable(o),d.viewport=new Ef,C[o]=d),d.matrix.fromArray(s.transform.matrix),d.projectionMatrix.fromArray(s.projectionMatrix),d.viewport.set(u.x,u.y,u.width,u.height),0===o&&E.matrix.copy(d.matrix),!0===r&&E.cameras.push(d)}}for(var L=0;L<w.length;L++){var y=_[L],A=w[L];null!==y&&void 0!==A&&A.update(y,n,h||l)}if(z&&z(t,n),n.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var M,T=null,P=(0,x.Z)(S);try{for(P.s();!(M=P.n()).done;){var D=M.value;n.detectedPlanes.has(D)||(null===T&&(T=[]),T.push(D))}}catch(U){P.e(U)}finally{P.f()}if(null!==T){var O,I=(0,x.Z)(T);try{for(I.s();!(O=I.n()).done;){var R=O.value;S.delete(R),k.delete(R),a.dispatchEvent({type:"planeremoved",data:R})}}catch(U){I.e(U)}finally{I.f()}}var B,N=(0,x.Z)(n.detectedPlanes);try{for(N.s();!(B=N.n()).done;){var F=B.value;if(S.has(F)){var j=k.get(F);F.lastChangedTime>j&&(k.set(F,F.lastChangedTime),a.dispatchEvent({type:"planechanged",data:F}))}else S.add(F),k.set(F,n.lastChangedTime),a.dispatchEvent({type:"planeadded",data:F})}}catch(U){N.e(U)}finally{N.f()}}g=null})),r.setAnimationLoop=function(e){z=e},r.dispose=function(){},r}return(0,d.Z)(n)}(Vh);function wL(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===Sc&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===Sc&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var r,a,o=t.get(i).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*s}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.iridescenceMap?r=i.iridescenceMap:i.iridescenceThicknessMap?r=i.iridescenceThicknessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularColorMap?r=i.specularColorMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap?r=i.thicknessMap:i.sheenColorMap?r=i.sheenColorMap:i.sheenRoughnessMap&&(r=i.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),n.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Ev(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,r,a,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Sc&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,o)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){var r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,a):i.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function _L(e,t,n,i){var r={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){var i=e.value;if(void 0===n[t]){if("number"==typeof i)n[t]=i;else{for(var r=Array.isArray(i)?i:[i],a=[],o=0;o<r.length;o++)a.push(r[o].clone());n[t]=a}return!0}if("number"==typeof i){if(n[t]!==i)return n[t]=i,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],l=Array.isArray(i)?i:[i],u=0;u<s.length;u++){var c=s[u];if(!1===c.equals(l[u]))return c.copy(l[u]),!0}return!1}function u(e){var t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){var h=r[n.id];void 0===h&&(function(e){for(var t=e.uniforms,n=0,i=16,r=0,a=0,o=t.length;a<o;a++){for(var s=t[a],l={boundary:0,storage:0},c=Array.isArray(s.value)?s.value:[s.value],d=0,h=c.length;d<h;d++){var f=u(c[d]);l.boundary+=f.boundary,l.storage+=f.storage}if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(r=n%i)&&i-r-l.boundary<0&&(n+=i-r,s.__offset=n);n+=l.storage}r=n%i,r>0&&(n+=i-r),e.__size=n,e.__cache={}}(n),h=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",c));var f=d.program;i.updateUBOMapping(n,f);var p=t.render.frame;a[n.id]!==p&&(function(t){var n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=i.length;o<s;o++){var c=i[o];if(!0===l(c,o,a)){for(var d=c.__offset,h=Array.isArray(c.value)?c.value:[c.value],f=0,p=0;p<h.length;p++){var v=h[p],m=u(v);"number"==typeof v?(c.__data[0]=v,e.bufferSubData(35345,d+f,c.__data)):v.isMatrix3?(c.__data[0]=v.elements[0],c.__data[1]=v.elements[1],c.__data[2]=v.elements[2],c.__data[3]=v.elements[0],c.__data[4]=v.elements[3],c.__data[5]=v.elements[4],c.__data[6]=v.elements[5],c.__data[7]=v.elements[0],c.__data[8]=v.elements[6],c.__data[9]=v.elements[7],c.__data[10]=v.elements[8],c.__data[11]=v.elements[0]):(v.toArray(c.__data,f),f+=m.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,d,c.__data)}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}}}function SL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:function(){var e=df("canvas");return e.style.display="block",e}(),i=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var d=null,h=null,f=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ph,this.physicallyCorrectLights=!1,this.toneMapping=ad,this.toneMappingExposure=1;var v=this,m=!1,g=0,L=0,y=null,b=-1,x=null,w=new Ef,_=new Ef,S=null,k=n.width,A=n.height,M=1,C=null,E=null,T=new Ef(0,0,k,A),P=new Ef(0,0,k,A),D=!1,O=new Gv,I=!1,R=!1,B=null,N=new dp,z=new af,F=new Rf,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===y?M:1}var Z,V,G,H,W,q,X,Y,Q,K,J,$,ee,te,ne,ie,re,ae,oe,se,le,ue,ce,de,he=i;function fe(e,t){for(var i=0;i<e.length;i++){var r=e[i],a=n.getContext(r,t);if(null!==a)return a}return null}try{var pe={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(hc)),n.addEventListener("webglcontextlost",Le,!1),n.addEventListener("webglcontextrestored",ye,!1),n.addEventListener("webglcontextcreationerror",be,!1),null===he){var ve=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&ve.shift(),null===(he=fe(ve,pe)))throw fe(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}function me(){Z=new ym(he),V=new tm(he,Z,e),Z.init(V),ue=new vL(he,Z,V),G=new fL(he,Z,V),H=new wm,W=new Kg,q=new pL(he,Z,G,W,V,ue,H),X=new im(v),Y=new Lm(v),Q=new Wv(he,V),ce=new $v(he,Z,Q,V),K=new bm(he,Q,H,ce),J=new Am(he,K,Q,H),oe=new km(he,V,q),ie=new nm(W),$=new Qg(v,X,Y,Z,V,ce,ie),ee=new wL(v,W),te=new tL,ne=new sL(Z,V),ae=new Jv(v,X,Y,G,J,t,s),re=new hL(v,J,V),de=new _L(he,H,V,G),se=new em(he,Z,H,V),le=new xm(he,Z,H,V),H.programs=$.programs,v.capabilities=V,v.extensions=Z,v.properties=W,v.renderLists=te,v.shadowMap=re,v.state=G,v.info=H}me();var ge=new xL(v,he);function Le(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=H.autoReset,t=re.enabled,n=re.autoUpdate,i=re.needsUpdate,r=re.type;me(),H.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=i,re.type=r}function be(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){var t=W.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))})(e),W.remove(e)}(t)}this.xr=ge,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(k,A,!1))},this.getSize=function(e){return e.set(k,A)},this.setSize=function(e,t,i){ge.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,A=t,n.width=Math.floor(e*M),n.height=Math.floor(t*M),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(k*M,A*M).floor()},this.setDrawingBufferSize=function(e,t,i){k=e,A=t,M=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(T)},this.setViewport=function(e,t,n,i){e.isVector4?T.set(e.x,e.y,e.z,e.w):T.set(e,t,n,i),G.viewport(w.copy(T).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),G.scissor(_.copy(P).multiplyScalar(M).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){G.setScissorTest(D=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){E=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),he.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Le,!1),n.removeEventListener("webglcontextrestored",ye,!1),n.removeEventListener("webglcontextcreationerror",be,!1),te.dispose(),ne.dispose(),W.dispose(),X.dispose(),Y.dispose(),J.dispose(),ce.dispose(),de.dispose(),$.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",_e),ge.removeEventListener("sessionend",Se),B&&(B.dispose(),B=null),ke.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=j);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,n,i,r){!0!==t.isScene&&(t=j),q.resetTextureUnits();var a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===y?v.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:Ph,l=(i.isMeshStandardMaterial?Y:X).get(i.envMap||o),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=i.toneMapped?v.toneMapping:ad,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,L=void 0!==g?g.length:0,w=W.get(i),_=h.state.lights;if(!0===I&&(!0===R||e!==x)){var S=e===x&&i.id===b;ie.setState(i,e,S)}var k=!1;i.version===w.__version?(w.needsLights&&w.lightsStateVersion!==_.state.version||w.outputEncoding!==s||r.isInstancedMesh&&!1===w.instancing||!r.isInstancedMesh&&!0===w.instancing||r.isSkinnedMesh&&!1===w.skinning||!r.isSkinnedMesh&&!0===w.skinning||w.envMap!==l||!0===i.fog&&w.fog!==a||void 0!==w.numClippingPlanes&&(w.numClippingPlanes!==ie.numPlanes||w.numIntersection!==ie.numIntersection)||w.vertexAlphas!==u||w.vertexTangents!==c||w.morphTargets!==d||w.morphNormals!==f||w.morphColors!==p||w.toneMapping!==m||!0===V.isWebGL2&&w.morphTargetsCount!==L)&&(k=!0):(k=!0,w.__version=i.version);var C=w.currentProgram;!0===k&&(C=Te(i,t,r));var E=!1,T=!1,P=!1,D=C.getUniforms(),O=w.uniforms;if(G.useProgram(C.program)&&(E=!0,T=!0,P=!0),i.id!==b&&(b=i.id,T=!0),E||x!==e){if(D.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&D.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,T=!0,P=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var N=D.map.cameraPosition;void 0!==N&&N.setValue(he,F.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&D.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&D.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){D.setOptional(he,r,"bindMatrix"),D.setOptional(he,r,"bindMatrixInverse");var z=r.skeleton;z&&(V.floatVertexTextures?(null===z.boneTexture&&z.computeBoneTexture(),D.setValue(he,"boneTexture",z.boneTexture,q),D.setValue(he,"boneTextureSize",z.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var U=n.morphAttributes;if((void 0!==U.position||void 0!==U.normal||void 0!==U.color&&!0===V.isWebGL2)&&oe.update(r,n,i,C),(T||w.receiveShadow!==r.receiveShadow)&&(w.receiveShadow=r.receiveShadow,D.setValue(he,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),T&&(D.setValue(he,"toneMappingExposure",v.toneMappingExposure),w.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(O,P),a&&!0===i.fog&&ee.refreshFogUniforms(O,a),ee.refreshMaterialUniforms(O,i,M,A,B),Tg.upload(he,w.uniformsList,O,q)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Tg.upload(he,w.uniformsList,O,q),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&D.setValue(he,"center",r.center),D.setValue(he,"modelViewMatrix",r.modelViewMatrix),D.setValue(he,"normalMatrix",r.normalMatrix),D.setValue(he,"modelMatrix",r.matrixWorld),r.previousModelViewMatrix&&D.setValue(he,"previousModelViewMatrix",r.previousModelViewMatrix),e.previousProjectionMatrix&&D.setValue(he,"previousProjectionMatrix",e.previousProjectionMatrix),i.isShaderMaterial||i.isRawShaderMaterial)for(var Z=i.uniformsGroups,H=0,Q=Z.length;H<Q;H++)if(V.isWebGL2){var K=Z[H];de.update(K,C),de.bind(K,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return C}(e,t,n,i,r);G.setMaterial(i,o);var l=n.index,u=1;!0===i.wireframe&&(l=K.getWireframeAttribute(n),u=2);var c=n.drawRange,d=n.attributes.position,f=c.start*u,p=(c.start+c.count)*u;null!==a&&(f=Math.max(f,a.start*u),p=Math.min(p,(a.start+a.count)*u)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):null!=d&&(f=Math.max(f,0),p=Math.min(p,d.count));var m=p-f;if(!(m<0||m===1/0)){ce.setup(r,i,s,n,l);var g,L=se;if(null!==l&&(g=Q.get(l),(L=le).setIndex(g)),r.isMesh)!0===i.wireframe?(G.setLineWidth(i.wireframeLinewidth*U()),L.setMode(1)):L.setMode(4);else if(r.isLine){var w=i.linewidth;void 0===w&&(w=1),G.setLineWidth(w*U()),r.isLineSegments?L.setMode(1):r.isLineLoop?L.setMode(2):L.setMode(3)}else r.isPoints?L.setMode(0):r.isSprite&&L.setMode(4);if(r.isInstancedMesh)L.renderInstances(f,m,r.count);else if(n.isInstancedBufferGeometry){var _=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,S=Math.min(n.instanceCount,_);L.renderInstances(f,m,S)}else L.render(f,m)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===kc&&!1===e.forceSinglePass?(e.side=Sc,e.needsUpdate=!0,Te(e,t,n),e.side=_c,e.needsUpdate=!0,Te(e,t,n),e.side=kc):Te(e,t,n)}(h=ne.get(e)).init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){n(i[r],e,t)}else n(i,e,t)})),p.pop(),h=null};var we=null;function _e(){ke.stop()}function Se(){ke.start()}var ke=new Hv;function Ae(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){i&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var r=J.update(e),a=e.material;a.visible&&d.push(e,r,a,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||O.intersectsObject(e))){i&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var f=l[u],p=s[f.materialIndex];p&&p.visible&&d.push(e,o,p,n,F.z,f)}else s.visible&&d.push(e,o,s,n,F.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Ae(v[m],t,n,i)}}function Me(e,t,n,i){var r=e.opaque,a=e.transmissive,s=e.transparent;h.setupLightsView(n),!0===I&&ie.setGlobalState(v.clippingPlanes,n),a.length>0&&function(e,t,n){var i=V.isWebGL2;null===B&&(B=new Tf(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?Dd:kd,minFilter:Sd,samples:i&&!0===o?4:0})),v.getDrawingBufferSize(z),i?B.setSize(z.x,z.y):B.setSize(ef(z.x),ef(z.y));var r=v.getRenderTarget();v.setRenderTarget(B),v.clear();var a=v.toneMapping;v.toneMapping=ad,Ce(e,t,n),v.toneMapping=a,q.updateMultisampleRenderTarget(B),q.updateRenderTargetMipmap(B),v.setRenderTarget(r)}(r,t,n),i&&G.viewport(w.copy(i)),r.length>0&&Ce(r,t,n),a.length>0&&Ce(a,t,n),s.length>0&&Ce(s,t,n),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1)}function Ce(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,u=null===i?o.material:i,c=o.group;s.layers.test(n.layers)&&Ee(s,t,n,l,u,c)}}function Ee(e,t,n,i,r,a){e.onBeforeRender(v,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(v,t,n,i,e,a),!0===r.transparent&&r.side===kc&&!1===r.forceSinglePass?(r.side=Sc,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=_c,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=kc):v.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(v,t,n,i,r,a)}function Te(e,t,n){!0!==t.isScene&&(t=j);var i=W.get(e),r=h.state.lights,a=h.state.shadowsArray,o=r.state.version,s=$.getParameters(e,r.state,a,t,n),l=$.getProgramCacheKey(s),u=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||i.environment),void 0===u&&(e.addEventListener("dispose",xe),u=new Map,i.programs=u);var c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return Pe(e,s),c}else s.uniforms=$.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=$.acquireProgram(s,l),u.set(l,c),i.uniforms=s.uniforms;var d=i.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(d.clippingPlanes=ie.uniform),Pe(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);var f=c.getUniforms(),p=Tg.seqWithValue(f.seq,d);return i.currentProgram=c,i.uniformsList=p,c}function Pe(e,t){var n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ke.setAnimationLoop((function(e){we&&we(e)})),typeof self<"u"&&ke.setContext(self),this.setAnimationLoop=function(e){we=e,ge.setAnimationLoop(e),null===e?ke.stop():ke.start()},ge.addEventListener("sessionstart",_e),ge.addEventListener("sessionend",Se),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,y),(h=ne.get(e,p.length)).init(),p.push(h),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(N),R=this.localClippingEnabled,I=ie.init(this.clippingPlanes,R),(d=te.get(e,f.length)).init(),f.push(d),Ae(e,t,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(C,E),!0===I&&ie.beginShadows();var n=h.state.shadowsArray;if(re.render(n,e,t),!0===I&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(d,e),h.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,r=0,a=i.length;r<a;r++){var o=i[r];Me(d,e,o,o.viewport)}else Me(d,e,t);null!==y&&(q.updateMultisampleRenderTarget(y),q.updateRenderTargetMipmap(y)),!0===e.isScene&&e.onAfterRender(v,e,t),ce.resetDefaultState(),b=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(e,t,n){W.get(e.texture).__webglTexture=t,W.get(e.depthTexture).__webglTexture=n;var i=W.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=W.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y=e,g=t,L=n;var i=!0,r=null,a=!1,o=!1;if(e){var s=W.get(e);void 0!==s.__useDefaultFramebuffer?(G.bindFramebuffer(36160,null),i=!1):void 0===s.__webglFramebuffer?q.setupRenderTarget(e):s.__hasExternalTextures&&q.rebindTextures(e,W.get(e.texture).__webglTexture,W.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=u[t],a=!0):r=V.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?W.get(e).__webglMultisampledFramebuffer:u,w.copy(e.viewport),_.copy(e.scissor),S=e.scissorTest}else w.copy(T).multiplyScalar(M).floor(),_.copy(P).multiplyScalar(M).floor(),S=D;if(G.bindFramebuffer(36160,r)&&V.drawBuffers&&i&&G.drawBuffers(e,r),G.viewport(w),G.scissor(_),G.setScissorTest(S),a){var c=W.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var d=W.get(e.texture),h=t||0;he.framebufferTextureLayer(36160,36064,d.__webglTexture,n||0,h)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){G.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==Nd&&ue.convert(u)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var d=c===Dd&&(Z.has("EXT_color_buffer_half_float")||V.isWebGL2&&Z.has("EXT_color_buffer_float"));if(c!==kd&&ue.convert(c)!==he.getParameter(35738)&&(c!==Pd||!(V.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!d)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&he.readPixels(t,n,i,r,ue.convert(u),ue.convert(c),a)}finally{var h=null!==y?W.get(y).__webglFramebuffer:null;G.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);q.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),G.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,o=ue.convert(n.format),s=ue.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&he.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=ue.convert(i.format),c=ue.convert(i.type);if(i.isData3DTexture)q.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),a=35866}he.pixelStorei(37440,i.flipY),he.pixelStorei(37441,i.premultiplyAlpha),he.pixelStorei(3317,i.unpackAlignment);var d=he.getParameter(3314),h=he.getParameter(32878),f=he.getParameter(3316),p=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,g.data)):he.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g),he.pixelStorei(3314,d),he.pixelStorei(32878,h),he.pixelStorei(3316,f),he.pixelStorei(3315,p),he.pixelStorei(32877,m),0===r&&i.generateMipmaps&&he.generateMipmap(a),G.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){g=0,L=0,y=null,G.reset(),ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var kL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(SL);kL.prototype.isWebGL1Renderer=!0;var AL=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,c.Z)(this,e),this.isFog=!0,this.name="",this.color=new wf(t),this.near=n,this.far=i}return(0,d.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),ML=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,Ye.Z)(e)})),e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Au((0,p.Z)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Bp),CL=function(){function e(t,n){(0,c.Z)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=jh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xh()}return(0,d.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),EL=new Rf,TL=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,c.Z)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=r}return(0,d.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)EL.fromBufferAttribute(this,t),EL.applyMatrix4(e),this.setXYZ(t,EL.x,EL.y,EL.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)EL.fromBufferAttribute(this,t),EL.applyNormalMatrix(e),this.setXYZ(t,EL.x,EL.y,EL.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)EL.fromBufferAttribute(this,t),EL.transformDirection(e),this.setXYZ(t,EL.x,EL.y,EL.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=tf(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=tf(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=tf(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=tf(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array),i=nf(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nf(t,this.array),n=nf(n,this.array),i=nf(i,this.array),r=nf(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new $p(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),PL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return(0,d.Z)(n)}(Bp),DL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:yd,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:yd,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return(0,c.Z)(this,n),(e=t.call(this,null,l,u,d,h,f,o,s,p,v)).isDataTexture=!0,e.image={data:i,width:r,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,d.Z)(n)}(Cf),OL=new dp,IL=new dp,RL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,c.Z)(this,e),this.uuid=Xh(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,d.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new dp)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new dp;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:IL;OL.multiplyMatrices(o,t[r]),OL.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=$h(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new DL(t,e,e,Nd,Pd);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var r=e.bones[n],a=t[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new PL),this.bones.push(a),this.boneInverses.push((new dp).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,r=t.length;i<r;i++){var a=t[i];e.bones.push(a.uuid);var o=n[i];e.boneInverses.push(o.toArray())}return e}}]),e}(),BL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,c.Z)(this,n),(a=t.call(this,e,i,r)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}($p),NL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new wf(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Yp),zL=new Rf,FL=new Rf,jL=new dp,UL=new cp,ZL=new np,VL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cv,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NL;return(0,c.Z)(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)zL.fromBufferAttribute(t,i-1),FL.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=zL.distanceTo(FL);e.setAttribute("lineDistance",new nv(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ZL.copy(n.boundingSphere),ZL.applyMatrix4(i),ZL.radius+=r,!1!==e.ray.intersectsSphere(ZL)){jL.copy(i).invert(),UL.copy(e.ray).applyMatrix4(jL);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Rf,u=new Rf,c=new Rf,d=new Rf,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(var v=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count)-1;v<m;v+=h){var g=f.getX(v),L=f.getX(v+1);if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,L),!(UL.distanceSqToSegment(l,u,d,c)>s)){d.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(d);y<e.near||y>e.far||t.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;b<x;b+=h)if(l.fromBufferAttribute(p,b),u.fromBufferAttribute(p,b+1),!(UL.distanceSqToSegment(l,u,d,c)>s)){d.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(Bp),GL=new Rf,HL=new Rf,WL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,e,i)).isLineSegments=!0,r.type="LineSegments",r}return(0,d.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)GL.fromBufferAttribute(t,i),HL.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+GL.distanceTo(HL);e.setAttribute("lineDistance",new nv(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(VL),qL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d){var h;(0,c.Z)(this,n),(h=t.call(this,e,i,r,a,o,s,l,u,d)).isVideoTexture=!0,h.minFilter=void 0!==s?s:wd,h.magFilter=void 0!==o?o:wd,h.generateMipmaps=!1;var f=(0,Ye.Z)(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)})),h}return(0,d.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Cf),XL=function(){function e(){(0,c.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,d.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)r+=(t=this.getPoint(a/e)).distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)}},{key:"getTangent",value:function(e,t){var n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),a=this.getPoint(i),o=t||(r.isVector2?new af:new Rf);return o.copy(a).sub(r).normalize(),o}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Rf,i=[],r=[],a=[],o=new Rf,s=new dp,l=0;l<=e;l++){var u=l/e;i[l]=this.getTangentAt(u,new Rf)}r[0]=new Rf,a[0]=new Rf;var c=Number.MAX_VALUE,d=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var p=1;p<=e;p++){if(r[p]=r[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Yh(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(i[p],r[p])}if(!0===t){var m=Math.acos(Yh(r[0].dot(r[e]),-1,1));m/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(m=-m);for(var g=1;g<=e;g++)r[g].applyMatrix4(s.makeRotationAxis(i[g],m*g)),a[g].crossVectors(i[g],r[g])}return{tangents:i,normals:r,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),YL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,c.Z)(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=r,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=d,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new af,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0===this.aClockwise&&!a&&(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(XL),QL=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s){var l;return(0,c.Z)(this,n),(l=t.call(this,e,i,r,r,a,o,s)).isArcCurve=!0,l.type="ArcCurve",l}return(0,d.Z)(n)}(YL);function KL(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,l*=o,u*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}var JL=new Rf,$L=new KL,ey=new KL,ty=new KL,ny=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,c.Z)(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=r,e.curveType=a,e.tension=o,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?t=r[(s-1)%a]:(JL.subVectors(r[0],r[1]).add(r[0]),t=JL);var u=r[s%a],c=r[(s+1)%a];if(this.closed||s+2<a?n=r[(s+2)%a]:(JL.subVectors(r[a-1],r[a-2]).add(r[a-1]),n=JL),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(t.distanceToSquared(u),d),f=Math.pow(u.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(n),d);f<1e-4&&(f=1),h<1e-4&&(h=f),p<1e-4&&(p=f),$L.initNonuniformCatmullRom(t.x,u.x,c.x,n.x,h,f,p),ey.initNonuniformCatmullRom(t.y,u.y,c.y,n.y,h,f,p),ty.initNonuniformCatmullRom(t.z,u.z,c.z,n.z,h,f,p)}else"catmullrom"===this.curveType&&($L.initCatmullRom(t.x,u.x,c.x,n.x,this.tension),ey.initCatmullRom(t.y,u.y,c.y,n.y,this.tension),ty.initCatmullRom(t.z,u.z,c.z,n.z,this.tension));return i.set($L.calc(l),ey.calc(l),ty.calc(l)),i}},{key:"copy",value:function(e){Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Rf).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(XL);function iy(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function ry(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function ay(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}var oy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new af,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new af;return(0,c.Z)(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(ay(e,n.x,i.x,r.x,a.x),ay(e,n.y,i.y,r.y,a.y)),t}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(XL),sy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rf,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Rf;return(0,c.Z)(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(ay(e,n.x,i.x,r.x,a.x),ay(e,n.y,i.y,r.y,a.y),ay(e,n.z,i.z,r.z,a.z)),t}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(XL),ly=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af;return(0,c.Z)(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=r,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new af;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(XL),uy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf;return(0,c.Z)(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=r,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(XL),cy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new af;return(0,c.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=r,e.v2=a,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,n=this.v0,i=this.v1,r=this.v2;return t.set(ry(e,n.x,i.x,r.x),ry(e,n.y,i.y,r.y)),t}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(XL),dy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rf;return(0,c.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf,n=this.v0,i=this.v1,r=this.v2;return t.set(ry(e,n.x,i.x,r.x),ry(e,n.y,i.y,r.y),ry(e,n.z,i.z,r.z)),t}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(XL),hy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,c.Z)(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return(0,d.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,n=this.points,i=(n.length-1)*e,r=Math.floor(i),a=i-r,o=n[0===r?r:r-1],s=n[r],l=n[r>n.length-2?n.length-1:r+1],u=n[r>n.length-3?n.length-1:r+2];return t.set(iy(a,o.x,s.x,l.x,u.x),iy(a,o.y,s.y,l.y,u.y)),t}},{key:"copy",value:function(e){Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e}},{key:"fromJSON",value:function(e){Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new af).fromArray(r))}return this}}]),n}(XL),fy=Object.freeze({__proto__:null,ArcCurve:QL,CatmullRomCurve3:ny,CubicBezierCurve:oy,CubicBezierCurve3:sy,EllipseCurve:YL,LineCurve:ly,LineCurve3:uy,QuadraticBezierCurve:cy,QuadraticBezierCurve3:dy,SplineCurve:hy}),py=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,d.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ly(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new fy[r.type]).fromJSON(r))}return this}}]),n}(XL),vy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).type="Path",i.currentPoint=new af,e&&i.setFromPoints(e),i}return(0,d.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new ly(this.currentPoint.clone(),new af(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r=new cy(this.currentPoint.clone(),new af(e,t),new af(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o=new oy(this.currentPoint.clone(),new af(e,t),new af(n,i),new af(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new hy(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this}},{key:"absarc",value:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}},{key:"ellipse",value:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,a,o,s),this}},{key:"absellipse",value:function(e,t,n,i,r,a,o,s){var l=new YL(e,t,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(py),my=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new af(0,-.5),new af(.5,0),new af(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,c.Z)(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:i,segments:r,phiStart:a,phiLength:o},r=Math.floor(r),o=Yh(o,0,2*Math.PI);for(var s=[],l=[],u=[],d=[],h=[],f=1/r,p=new Rf,v=new af,m=new Rf,g=new Rf,L=new Rf,y=0,b=0,x=0;x<=i.length-1;x++)switch(x){case 0:y=i[x+1].x-i[x].x,b=i[x+1].y-i[x].y,m.x=1*b,m.y=-y,m.z=0*b,L.copy(m),m.normalize(),d.push(m.x,m.y,m.z);break;case i.length-1:d.push(L.x,L.y,L.z);break;default:y=i[x+1].x-i[x].x,b=i[x+1].y-i[x].y,m.x=1*b,m.y=-y,m.z=0*b,g.copy(m),m.x+=L.x,m.y+=L.y,m.z+=L.z,m.normalize(),d.push(m.x,m.y,m.z),L.copy(g)}for(var w=0;w<=r;w++)for(var _=a+w*f*o,S=Math.sin(_),k=Math.cos(_),A=0;A<=i.length-1;A++){p.x=i[A].x*S,p.y=i[A].y,p.z=i[A].x*k,l.push(p.x,p.y,p.z),v.x=w/r,v.y=A/(i.length-1),u.push(v.x,v.y);var M=d[3*A+0]*S,C=d[3*A+1],E=d[3*A+0]*k;h.push(M,C,E)}for(var T=0;T<r;T++)for(var P=0;P<i.length-1;P++){var D=P+T*i.length,O=D,I=D+i.length,R=D+i.length+1,B=D+1;s.push(O,I,B),s.push(R,B,I)}return e.setIndex(s),e.setAttribute("position",new nv(l,3)),e.setAttribute("uv",new nv(u,2)),e.setAttribute("normal",new nv(h,3)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(cv),gy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,c.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:d};var h=(0,Ye.Z)(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],m=[],g=0,L=[],y=a/2,b=0;function x(e){for(var t=g,n=new af,a=new Rf,s=0,l=!0===e?i:r,c=!0===e?1:-1,L=1;L<=o;L++)p.push(0,y*c,0),v.push(0,c,0),m.push(.5,.5),g++;for(var x=g,w=0;w<=o;w++){var _=w/o*d+u,S=Math.cos(_),k=Math.sin(_);a.x=l*k,a.y=y*c,a.z=l*S,p.push(a.x,a.y,a.z),v.push(0,c,0),n.x=.5*S+.5,n.y=.5*k*c+.5,m.push(n.x,n.y),g++}for(var A=0;A<o;A++){var M=t+A,C=x+A;!0===e?f.push(C,C+1,M):f.push(C+1,C,M),s+=3}h.addGroup(b,s,!0===e?1:2),b+=s}return function(){for(var e=new Rf,t=new Rf,n=0,l=(r-i)/a,c=0;c<=s;c++){for(var x=[],w=c/s,_=w*(r-i)+i,S=0;S<=o;S++){var k=S/o,A=k*d+u,M=Math.sin(A),C=Math.cos(A);t.x=_*M,t.y=-w*a+y,t.z=_*C,p.push(t.x,t.y,t.z),e.set(M,l,C).normalize(),v.push(e.x,e.y,e.z),m.push(k,1-w),x.push(g++)}L.push(x)}for(var E=0;E<o;E++)for(var T=0;T<s;T++){var P=L[T][E],D=L[T+1][E],O=L[T+1][E+1],I=L[T][E+1];f.push(P,D,I),f.push(D,O,I),n+=6}h.addGroup(b,n,0),b+=n}(),!1===l&&(i>0&&x(!0),r>0&&x(!1)),e.setIndex(f),e.setAttribute("position",new nv(p,3)),e.setAttribute("normal",new nv(v,3)),e.setAttribute("uv",new nv(m,2)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(cv),Ly=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,c.Z)(this,n),(e=t.call(this,0,i,r,a,o,s,l,u)).type="ConeGeometry",e.parameters={radius:i,height:r,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u},e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(gy),yy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,c.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:i,indices:r,radius:a,detail:o};var s=[],l=[];function u(e,t,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var s=e.clone().lerp(n,o/r),l=t.clone().lerp(n,o/r),u=r-o,c=0;c<=u;c++)a[o][c]=0===c&&o===r?s:s.clone().lerp(l,c/u)}for(var h=0;h<r;h++)for(var f=0;f<2*(r-h)-1;f++){var p=Math.floor(f/2);f%2===0?(d(a[h][p+1]),d(a[h+1][p]),d(a[h][p])):(d(a[h][p+1]),d(a[h+1][p+1]),d(a[h+1][p]))}}function d(e){s.push(e.x,e.y,e.z)}function h(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function f(e,t,n,i){i<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return function(e){for(var t=new Rf,n=new Rf,i=new Rf,a=0;a<r.length;a+=3)h(r[a+0],t),h(r[a+1],n),h(r[a+2],i),u(t,n,i,e)}(o),function(e){for(var t=new Rf,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(a),function(){for(var e=new Rf,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=p(e)/2/Math.PI+.5,i=v(e)/Math.PI+.5;l.push(n,1-i)}(function(){for(var e=new Rf,t=new Rf,n=new Rf,i=new Rf,r=new af,a=new af,o=new af,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),r.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var d=p(i);f(r,c+0,e,d),f(a,c+2,t,d),f(o,c+4,n,d)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],i=l[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),i<.2&&(l[e+4]+=1))}}()}(),e.setAttribute("position",new nv(s,3)),e.setAttribute("normal",new nv(s.slice(),3)),e.setAttribute("uv",new nv(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(cv),by=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,c.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o];return(e=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i,r)).type="DodecahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(yy),xy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).uuid=Xh(),i.type="Shape",i.holes=[],i}return(0,d.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Au((0,p.Z)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new vy).fromJSON(r))}return this}}]),n}(vy),wy=function(e,t){var n,i,r,a,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,d=c?t[0]*u:e.length,h=_y(e,0,d,u,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,i){var r,a,o,s,l,u=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,(l=_y(e,o,s,i,!1))===l.next&&(l.steiner=!0),u.push(Iy(l));for(u.sort(Ty),r=0;r<u.length;r++)n=Py(u[r],n);return n}(e,t,h,u)),e.length>80*u){n=r=e[0],i=a=e[1];for(var p=u;p<d;p+=u)(o=e[p])<n&&(n=o),(s=e[p+1])<i&&(i=s),o>r&&(r=o),s>a&&(a=s);l=0!==(l=Math.max(r-n,a-i))?32767/l:0}return ky(h,f,u,n,i,l,0),f};function _y(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=Gy(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=Gy(a,e[a],e[a+1],o);return o&&zy(o,o.next)&&(Hy(o),o=o.next),o}function Sy(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!zy(i,i.next)&&0!==Ny(i.prev,i,i.next))i=i.next;else{if(Hy(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function ky(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{0===r.z&&(r.z=Oy(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<u&&(s++,i=i.nextZ);t++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?My(e,i,r,a):Ay(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Hy(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?ky(e=Cy(Sy(e),t,n),t,n,i,r,a,2):2===o&&Ey(e,t,n,i,r,a):ky(Sy(e),t,n,i,r,a,1);break}}}function Ay(e){var t=e.prev,n=e,i=e.next;if(Ny(t,n,i)>=0)return!1;for(var r=t.x,a=n.x,o=i.x,s=t.y,l=n.y,u=i.y,c=r<a?r<o?r:o:a<o?a:o,d=s<l?s<u?s:u:l<u?l:u,h=r>a?r>o?r:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=i.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&Ry(r,s,a,l,o,u,p.x,p.y)&&Ny(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function My(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Ny(r,a,o)>=0)return!1;for(var s=r.x,l=a.x,u=o.x,c=r.y,d=a.y,h=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,v=s>l?s>u?s:u:l>u?l:u,m=c>d?c>h?c:h:d>h?d:h,g=Oy(f,p,t,n,i),L=Oy(v,m,t,n,i),y=e.prevZ,b=e.nextZ;y&&y.z>=g&&b&&b.z<=L;){if(y.x>=f&&y.x<=v&&y.y>=p&&y.y<=m&&y!==r&&y!==o&&Ry(s,c,l,d,u,h,y.x,y.y)&&Ny(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=f&&b.x<=v&&b.y>=p&&b.y<=m&&b!==r&&b!==o&&Ry(s,c,l,d,u,h,b.x,b.y)&&Ny(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=f&&y.x<=v&&y.y>=p&&y.y<=m&&y!==r&&y!==o&&Ry(s,c,l,d,u,h,y.x,y.y)&&Ny(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=L;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=m&&b!==r&&b!==o&&Ry(s,c,l,d,u,h,b.x,b.y)&&Ny(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Cy(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!zy(r,a)&&Fy(r,i,i.next,a)&&Zy(r,a)&&Zy(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),Hy(i),Hy(i.next),i=e=a),i=i.next}while(i!==e);return Sy(i)}function Ey(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&By(o,s)){var l=Vy(o,s);return o=Sy(o,o.next),l=Sy(l,l.next),ky(o,t,n,i,r,a,0),void ky(l,t,n,i,r,a,0)}s=s.next}o=o.next}while(o!==e)}function Ty(e,t){return e.x-t.x}function Py(e,t){var n=function(e,t){var n,i=t,r=-1/0,a=e.x,o=e.y;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&s>r&&(r=s,n=i.x<i.next.x?i:i.next,s===a))return n}i=i.next}while(i!==t);if(!n)return null;var l,u=n,c=n.x,d=n.y,h=1/0;i=n;do{a>=i.x&&i.x>=c&&a!==i.x&&Ry(o<d?a:r,o,c,d,o<d?r:a,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(a-i.x),Zy(i,e)&&(l<h||l===h&&(i.x>n.x||i.x===n.x&&Dy(n,i)))&&(n=i,h=l)),i=i.next}while(i!==u);return n}(e,t);if(!n)return t;var i=Vy(n,e);return Sy(i,i.next),Sy(n,n.next)}function Dy(e,t){return Ny(e.prev,e,t.prev)<0&&Ny(t.next,e,e.next)<0}function Oy(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Iy(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ry(e,t,n,i,r,a,o,s){return(r-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function By(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fy(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Zy(e,t)&&Zy(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Ny(e.prev,e,t.prev)||Ny(e,t.prev,t))||zy(e,t)&&Ny(e.prev,e,e.next)>0&&Ny(t.prev,t,t.next)>0)}function Ny(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function zy(e,t){return e.x===t.x&&e.y===t.y}function Fy(e,t,n,i){var r=Uy(Ny(e,t,n)),a=Uy(Ny(e,t,i)),o=Uy(Ny(n,i,e)),s=Uy(Ny(n,i,t));return!!(r!==a&&o!==s||0===r&&jy(e,n,t)||0===a&&jy(e,i,t)||0===o&&jy(n,e,i)||0===s&&jy(n,t,i))}function jy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uy(e){return e>0?1:e<0?-1:0}function Zy(e,t){return Ny(e.prev,e,e.next)<0?Ny(e,t,e.next)>=0&&Ny(e,e.prev,t)>=0:Ny(e,t,e.prev)<0||Ny(e,e.next,t)<0}function Vy(e,t){var n=new Wy(e.i,e.x,e.y),i=new Wy(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Gy(e,t,n,i){var r=new Wy(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Hy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wy(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var qy=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],r=[];Xy(e),Yy(n,e);var a=e.length;t.forEach(Xy);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Yy(n,t[o]);for(var s=wy(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),e}();function Xy(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yy(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Qy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,c.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];return(e=t.call(this,o,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,r)).type="IcosahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(yy),Ky=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,c.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var d=Math.min(l+u,Math.PI),h=0,f=[],p=new Rf,v=new Rf,m=[],g=[],L=[],y=[],b=0;b<=a;b++){var x=[],w=b/a,_=0;0==b&&0==l?_=.5/r:b==a&&d==Math.PI&&(_=-.5/r);for(var S=0;S<=r;S++){var k=S/r;p.x=-i*Math.cos(o+k*s)*Math.sin(l+w*u),p.y=i*Math.cos(l+w*u),p.z=i*Math.sin(o+k*s)*Math.sin(l+w*u),g.push(p.x,p.y,p.z),v.copy(p).normalize(),L.push(v.x,v.y,v.z),y.push(k+_,1-w),x.push(h++)}f.push(x)}for(var A=0;A<a;A++)for(var M=0;M<r;M++){var C=f[A][M+1],E=f[A][M],T=f[A+1][M],P=f[A+1][M+1];(0!==A||l>0)&&m.push(C,E,P),(A!==a-1||d<Math.PI)&&m.push(E,T,P)}return e.setIndex(m),e.setAttribute("position",new nv(g,3)),e.setAttribute("normal",new nv(L,3)),e.setAttribute("uv",new nv(y,2)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(cv),Jy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,c.Z)(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var u=[],d=[],h=[],f=[],p=new Rf,v=new Rf,m=new Rf,g=new Rf,L=new Rf,y=new Rf,b=new Rf,x=0;x<=a;++x){var w=x/a*s*Math.PI*2;O(w,s,l,i,m),O(w+.01,s,l,i,g),y.subVectors(g,m),b.addVectors(g,m),L.crossVectors(y,b),b.crossVectors(L,y),L.normalize(),b.normalize();for(var _=0;_<=o;++_){var S=_/o*Math.PI*2,k=-r*Math.cos(S),A=r*Math.sin(S);p.x=m.x+(k*b.x+A*L.x),p.y=m.y+(k*b.y+A*L.y),p.z=m.z+(k*b.z+A*L.z),d.push(p.x,p.y,p.z),v.subVectors(p,m).normalize(),h.push(v.x,v.y,v.z),f.push(x/a),f.push(_/o)}}for(var M=1;M<=a;M++)for(var C=1;C<=o;C++){var E=(o+1)*(M-1)+(C-1),T=(o+1)*M+(C-1),P=(o+1)*M+C,D=(o+1)*(M-1)+C;u.push(E,T,D),u.push(T,P,D)}function O(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new nv(d,3)),e.setAttribute("normal",new nv(h,3)),e.setAttribute("uv",new nv(f,2)),e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(cv);function $y(e,t,n){return tb(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function eb(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function tb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nb(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function ib(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r}function rb(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}var ab=function(){function e(t,n,i,r){(0,c.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return(0,d.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),ob=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,e,i,r,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Mh,endingEnd:Mh},o}return(0,d.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ch:r=e,o=2*t-n;break;case Eh:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ch:a=e,s=2*n-t;break;case Eh:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(i-t),p=f*f,v=p*f,m=-d*v+2*d*p-d*f,g=(1+d)*v+(-1.5-2*d)*p+(-.5+d)*f+1,L=(-1-h)*v+(1.5+h)*p+.5*f,y=h*v-h*p,b=0;b!==o;++b)r[b]=m*a[u+b]+g*a[l+b]+L*a[s+b]+y*a[c+b];return r}}]),n}(ab),sb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){return(0,c.Z)(this,n),t.call(this,e,i,r,a)}return(0,d.Z)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(i-t),c=1-u,d=0;d!==o;++d)r[d]=a[l+d]*c+a[s+d]*u;return r}}]),n}(ab),lb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){return(0,c.Z)(this,n),t.call(this,e,i,r,a)}return(0,d.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(ab),ub=function(){function e(t,n,i,r){if((0,c.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=eb(n,this.TimeBufferType),this.values=eb(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return(0,d.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new lb(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new sb(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new ob(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Sh:t=this.InterpolantFactoryMethodDiscrete;break;case kh:t=this.InterpolantFactoryMethodLinear;break;case Ah:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sh;case this.InterpolantFactoryMethodLinear:return kh;case this.InterpolantFactoryMethodSmooth:return Ah}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=$y(n,r,a),this.values=$y(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&tb(i))for(var l=0,u=i.length;l!==u;++l){var c=i[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=$y(this.times),t=$y(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ah,r=e.length-1,a=1,o=1;o<r;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(i)s=!0;else for(var u=o*n,c=u-n,d=u+n,h=0;h!==n;++h){var f=t[u+h];if(f!==t[c+h]||f!==t[d+h]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(r>0){e[a]=e[r];for(var g=r*n,L=a*n,y=0;y!==n;++y)t[L+y]=t[g+y];++a}return a!==e.length?(this.times=$y(e,0,a),this.values=$y(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=$y(this.times,0),t=$y(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:eb(e.times,Array),values:eb(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();ub.prototype.TimeBufferType=Float32Array,ub.prototype.ValueBufferType=Float32Array,ub.prototype.DefaultInterpolation=kh;var cb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(ub);cb.prototype.ValueTypeName="bool",cb.prototype.ValueBufferType=Array,cb.prototype.DefaultInterpolation=Sh,cb.prototype.InterpolantFactoryMethodLinear=void 0,cb.prototype.InterpolantFactoryMethodSmooth=void 0;var db=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(ub);db.prototype.ValueTypeName="color";var hb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(ub);hb.prototype.ValueTypeName="number";var fb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){return(0,c.Z)(this,n),t.call(this,e,i,r,a)}return(0,d.Z)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t),l=e*o,u=l+o;l!==u;l+=4)If.slerpFlat(r,0,a,l-o,a,l,s);return r}}]),n}(ab),pb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new fb(this.times,this.values,this.getValueSize(),e)}}]),n}(ub);pb.prototype.ValueTypeName="quaternion",pb.prototype.DefaultInterpolation=kh,pb.prototype.InterpolantFactoryMethodSmooth=void 0;var vb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(ub);vb.prototype.ValueTypeName="string",vb.prototype.ValueBufferType=Array,vb.prototype.DefaultInterpolation=Sh,vb.prototype.InterpolantFactoryMethodLinear=void 0,vb.prototype.InterpolantFactoryMethodSmooth=void 0;var mb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(ub);mb.prototype.ValueTypeName="vector";var gb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Th;(0,c.Z)(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Xh(),this.duration<0&&this.resetDuration()}return(0,d.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(Lb(n[r]).scale(i));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(ub.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=nb(s);s=ib(s,1,u),l=ib(l,1,u),!i&&0===s[0]&&(s.push(r),l.push(l[0])),a.push(new hb(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var d=[];for(var h in i)d.push(this.CreateFromMorphTargetSequence(h,i[h],t,n));return d}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];rb(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var d={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)d[c[h].morphTargets[f]]=-1;for(var p in d){for(var v=[],m=[],g=0;g!==c[h].morphTargets.length;++g){var L=c[h];v.push(L.time),m.push(L.morphTarget===p?1:0)}i.push(new hb(".morphTargetInfluence["+p+"]",v,m))}s=d.length*a}else{var y=".bones["+t[u].name+"]";n(mb,y+".position",c,"pos",i),n(pb,y+".quaternion",c,"rot",i),n(mb,y+".scale",c,"scl",i)}}return 0===i.length?null:new this(r,s,i,o)}}]),e}();function Lb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hb;case"vector":case"vector2":case"vector3":case"vector4":return mb;case"color":return db;case"quaternion":return pb;case"bool":case"boolean":return cb;case"string":return vb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];rb(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var yb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},bb=(0,d.Z)((function e(t,n,i){(0,c.Z)(this,e);var r,a=this,o=!1,s=0,l=0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){l++,!1===o&&void 0!==a.onStart&&a.onStart(e,s,l),o=!0},this.itemEnd=function(e){s++,void 0!==a.onProgress&&a.onProgress(e,s,l),s===l&&(o=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var i=u[t],r=u[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}})),xb=new bb,wb=function(){function e(t){(0,c.Z)(this,e),this.manager=void 0!==t?t:xb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,d.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),_b={},Sb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).response=i,r}return(0,d.Z)(n)}(L(Error)),kb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"load",value:function(e,t,n,i){var r=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=yb.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===_b[e]){_b[e]=[],_b[e].push({onLoad:t,onProgress:n,onError:i});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===t.body||void 0===t.body.getReader)return t;var n=_b[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){!function t(){i.read().then((function(i){var r=i.done,l=i.value;if(r)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,d=n.length;c<d;c++){var h=n[c];h.onProgress&&h.onProgress(u)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new Sb('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){yb.add(e,t);var n=_b[e];delete _b[e];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=_b[e];if(void 0===n)throw r.manager.itemError(e),t;delete _b[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e)})).finally((function(){r.manager.itemEnd(e)})),this.manager.itemStart(e)}else _b[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(wb),Ab=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,c.Z)(this,n),(i=t.call(this)).isLight=!0,i.type="Light",i.color=new wf(e),i.intensity=r,i}return(0,d.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Au((0,p.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Bp),Mb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,r)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Bp.DEFAULT_UP),a.updateMatrix(),a.groundColor=new wf(i),a}return(0,d.Z)(n,[{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Ab),Cb=new dp,Eb=new Rf,Tb=new Rf,Pb=function(){function e(t){(0,c.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new af(512,512),this.map=null,this.mapPass=null,this.matrix=new dp,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gv,this._frameExtents=new af(1,1),this._viewportCount=1,this._viewports=[new Ef(0,0,1,1)]}return(0,d.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Eb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Eb),Tb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Tb),t.updateMatrixWorld(),Cb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Cb)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Db=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,new Ov(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return(0,d.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*qh*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),Au((0,p.Z)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Pb),Ob=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,c.Z)(this,n),(r=t.call(this,e,i)).isSpotLight=!0,r.type="SpotLight",r.position.copy(Bp.DEFAULT_UP),r.updateMatrix(),r.target=new Bp,r.distance=a,r.angle=o,r.penumbra=s,r.decay=l,r.map=null,r.shadow=new Db,r}return(0,d.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Ab),Ib=new dp,Rb=new Rf,Bb=new Rf,Nb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,new Ov(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new af(4,2),e._viewportCount=6,e._viewports=[new Ef(2,1,1,1),new Ef(0,1,1,1),new Ef(3,1,1,1),new Ef(1,1,1,1),new Ef(3,0,1,1),new Ef(1,0,1,1)],e._cubeDirections=[new Rf(1,0,0),new Rf(-1,0,0),new Rf(0,0,1),new Rf(0,0,-1),new Rf(0,1,0),new Rf(0,-1,0)],e._cubeUps=[new Rf(0,1,0),new Rf(0,1,0),new Rf(0,1,0),new Rf(0,1,0),new Rf(0,0,1),new Rf(0,0,-1)],e}return(0,d.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Rb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Rb),Bb.copy(n.position),Bb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Bb),n.updateMatrixWorld(),i.makeTranslation(-Rb.x,-Rb.y,-Rb.z),Ib.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ib)}}]),n}(Pb),zb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return(0,c.Z)(this,n),(r=t.call(this,e,i)).isPointLight=!0,r.type="PointLight",r.distance=a,r.decay=o,r.shadow=new Nb,r}return(0,d.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Ab),Fb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,new rm(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return(0,d.Z)(n)}(Pb),jb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,e,i)).isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(Bp.DEFAULT_UP),r.updateMatrix(),r.target=new Bp,r.shadow=new Fb,r}return(0,d.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Ab),Ub=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=Au((0,p.Z)(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(cv),Zb=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}return(0,d.Z)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new kb(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),o=cf(r.type,a),s=new CL(o,r.stride);return s.uuid=r.uuid,t[i]=s,s}var r=e.isInstancedBufferGeometry?new Ub:new cv,a=e.data.index;if(void 0!==a){var o=cf(a.type,a.array);r.setIndex(new $p(o,1))}var s=e.data.attributes;for(var l in s){var u=s[l],c=void 0;if(u.isInterleavedBufferAttribute){var d=i(e.data,u.data);c=new TL(d,u.itemSize,u.offset,u.normalized)}else{var h=cf(u.type,u.array);c=new(u.isInstancedBufferAttribute?BL:$p)(h,u.itemSize,u.normalized)}void 0!==u.name&&(c.name=u.name),void 0!==u.usage&&c.setUsage(u.usage),void 0!==u.updateRange&&(c.updateRange.offset=u.updateRange.offset,c.updateRange.count=u.updateRange.count),r.setAttribute(l,c)}var f=e.data.morphAttributes;if(f)for(var p in f){for(var v=f[p],m=[],g=0,L=v.length;g<L;g++){var y=v[g],b=void 0;if(y.isInterleavedBufferAttribute){var x=i(e.data,y.data);b=new TL(x,y.itemSize,y.offset,y.normalized)}else{var w=cf(y.type,y.array);b=new $p(w,y.itemSize,y.normalized)}void 0!==y.name&&(b.name=y.name),m.push(b)}r.morphAttributes[p]=m}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var _=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==_)for(var S=0,k=_.length;S!==k;++S){var A=_[S];r.addGroup(A.start,A.count,A.materialIndex)}var M=e.data.boundingSphere;if(void 0!==M){var C=new Rf;void 0!==M.center&&C.fromArray(M.center),r.boundingSphere=new np(C,M.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}]),n}(wb),Vb=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,c.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,d.Z)(e,[{key:"start",value:function(){this.startTime=Gb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Gb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Gb(){return(typeof performance>"u"?Date:performance).now()}var Hb=function(){function e(t,n,i){var r,a,o;switch((0,c.Z)(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,d.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){If.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,r){var a=this._workIndex*r;If.multiplyQuaternionsFlat(e,a,e,t,e,n),If.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}}]),e}(),Wb="\\[\\]\\.:\\/",qb=new RegExp("["+Wb+"]","g"),Xb="[^"+Wb+"]",Yb="[^"+Wb.replace("\\.","")+"]",Qb=/((?:WC+[\/:])*)/.source.replace("WC",Xb),Kb=/(WCOD+)?/.source.replace("WCOD",Yb),Jb=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xb),$b=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xb),ex=new RegExp("^"+Qb+Kb+Jb+$b+"$"),tx=["material","materials","bones","map"],nx=function(){function e(t,n,i){(0,c.Z)(this,e);var r=i||ix.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}return(0,d.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),ix=function(){function e(t,n,i){(0,c.Z)(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,d.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[r];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(qb,"")}},{key:"parseTrackName",value:function(e){var t=ex.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==tx.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}]),e}();ix.Composite=nx,ix.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ix.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ix.prototype.GetterByBindingType=[ix.prototype._getValue_direct,ix.prototype._getValue_array,ix.prototype._getValue_arrayElement,ix.prototype._getValue_toArray],ix.prototype.SetterByBindingTypeAndVersioning=[[ix.prototype._setValue_direct,ix.prototype._setValue_direct_setNeedsUpdate,ix.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ix.prototype._setValue_array,ix.prototype._setValue_array_setNeedsUpdate,ix.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ix.prototype._setValue_arrayElement,ix.prototype._setValue_arrayElement_setNeedsUpdate,ix.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ix.prototype._setValue_fromArray,ix.prototype._setValue_fromArray_setNeedsUpdate,ix.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var rx=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,c.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:Mh,endingEnd:Mh},u=0;u!==o;++u){var d=a[u].createInterpolant(null);s[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,d.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(2501===this.blendMode)for(var c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulate(i,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=n===_h;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Ch,i.endingEnd=Ch):(i.endingStart=e?this.zeroSlopeAtStart?Ch:Mh:Eh,i.endingEnd=t?this.zeroSlopeAtEnd?Ch:Mh:Eh)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}]),e}(),ax=new Float32Array(1),ox=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return(0,d.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var d=i[c],h=d.name,f=u[h];if(void 0!==f)++f.referenceCount,a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new Hb(ix.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,h),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new sb(new Float32Array(2),new Float32Array(2),1,ax)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"==typeof e?gb.findByName(i,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:Th),void 0!==s){var u=s.actionByRoot[r];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new rx(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?gb.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(i,e,r,a);for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Vh),sx=function(){function e(t){(0,c.Z)(this,e),this.value=t}return(0,d.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),lx=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,c.Z)(this,e),this.ray=new cp(t,n),this.near=i,this.far=r,this.camera=null,this.layers=new wp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,d.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return cx(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(ux),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.length;i<r;i++)cx(e[i],this,n,t);return n.sort(ux),n}}]),e}();function ux(e,t){return e.distance-t.distance}function cx(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)cx(r[a],t,n,!0)}var dx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,c.Z)(this,e),this.radius=t,this.phi=n,this.theta=i,this}return(0,d.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Yh(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),hx=new af,fx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af(-1/0,-1/0);(0,c.Z)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=hx.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return hx.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),px=new Rf,vx=new Rf,mx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rf;(0,c.Z)(this,e),this.start=t,this.end=n}return(0,d.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){px.subVectors(e,this.start),vx.subVectors(this.end,this.start);var n=vx.dot(vx),i=vx.dot(px)/n;return t&&(i=Yh(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),gx=new Rf,Lx=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this)).light=e,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,r.type="SpotLightHelper";for(var a=new cv,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var u=s/32*Math.PI*2,d=l/32*Math.PI*2;o.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}a.setAttribute("position",new nv(o,3));var h=new NL({fog:!1,toneMapped:!1});return r.cone=new WL(a,h),r.add(r.cone),r.update(),r}return(0,d.Z)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gx.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gx),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Bp),yx=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n);var o=new Ky(i,4,2),s=new Qp({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.color=r,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,d.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Sv),bx=new Rf,xx=new Rf,wx=new Rf,_x=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,a.type="DirectionalLightHelper",void 0===i&&(i=1);var o=new cv;o.setAttribute("position",new nv([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new NL({fog:!1,toneMapped:!1});return a.lightPlane=new VL(o,s),a.add(a.lightPlane),(o=new cv).setAttribute("position",new nv([0,0,0,0,0,1],3)),a.targetLine=new VL(o,s),a.add(a.targetLine),a.update(),a}return(0,d.Z)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bx.setFromMatrixPosition(this.light.matrixWorld),xx.setFromMatrixPosition(this.light.target.matrixWorld),wx.subVectors(xx,bx),this.lightPlane.lookAt(xx),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xx),this.targetLine.scale.z=wx.length()}}]),n}(Bp),Sx=new Rf,kx=new Dv,Ax=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n);var r=new cv,a=new NL({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function u(e,t){d(e),d(t)}function d(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),r.setAttribute("position",new nv(o,3)),r.setAttribute("color",new nv(s,3)),(i=t.call(this,r,a)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update();var h=new wf(16755200),f=new wf(16711680),p=new wf(43775),v=new wf(16777215),m=new wf(3355443);return i.setColors(h,f,p,v,m),i}return(0,d.Z)(n,[{key:"setColors",value:function(e,t,n,i,r){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;kx.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Mx("c",t,e,kx,0,0,-1),Mx("t",t,e,kx,0,0,1),Mx("n1",t,e,kx,-1,-1,-1),Mx("n2",t,e,kx,1,-1,-1),Mx("n3",t,e,kx,-1,1,-1),Mx("n4",t,e,kx,1,1,-1),Mx("f1",t,e,kx,-1,-1,1),Mx("f2",t,e,kx,1,-1,1),Mx("f3",t,e,kx,-1,1,1),Mx("f4",t,e,kx,1,1,1),Mx("u1",t,e,kx,.7,1.1,-1),Mx("u2",t,e,kx,-.7,1.1,-1),Mx("u3",t,e,kx,0,2,-1),Mx("cf1",t,e,kx,-1,0,1),Mx("cf2",t,e,kx,1,0,1),Mx("cf3",t,e,kx,0,-1,1),Mx("cf4",t,e,kx,0,1,1),Mx("cn1",t,e,kx,-1,0,-1),Mx("cn2",t,e,kx,1,0,-1),Mx("cn3",t,e,kx,0,-1,-1),Mx("cn4",t,e,kx,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(WL);function Mx(e,t,n,i,r,a,o){Sx.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Sx.x,Sx.y,Sx.z)}var Cx=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,c.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new cv;return o.setIndex(new $p(a,1)),o.setAttribute("position",new nv([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(i=t.call(this,o,new NL({color:r,toneMapped:!1}))).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return(0,d.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(WL),Ex=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,c.Z)(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=new cv;a.setAttribute("position",new nv(r,3)),a.setAttribute("color",new nv([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var o=new NL({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,o)).type="AxesHelper",e}return(0,d.Z)(n,[{key:"setColors",value:function(e,t,n){var i=new wf,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(WL);typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hc}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hc);var Tx=".",Px=Symbol("target"),Dx=Symbol("unsubscribe");function Ox(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var Ix=Array.isArray;function Rx(e){return"symbol"==typeof e}var Bx={after:function(e,t){return Ix(e)?e.slice(t.length):""===t?e:e.slice(t.length+1)},concat:function(e,t){return Ix(e)?(e=u(e),t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+=Tx),Rx(t)?e+t.toString():e+t):e},initial:function(e){if(Ix(e))return e.slice(0,-1);if(""===e)return e;var t=e.lastIndexOf(Tx);return-1===t?"":e.slice(0,t)},last:function(e){if(Ix(e))return e[e.length-1]||"";if(""===e)return e;var t=e.lastIndexOf(Tx);return-1===t?e:e.slice(t+1)},walk:function(e,t){if(Ix(e)){var n,i=(0,x.Z)(e);try{for(i.s();!(n=i.n()).done;){t(n.value)}}catch(o){i.e(o)}finally{i.f()}}else if(""!==e){var r=0,a=e.indexOf(Tx);if(-1===a)t(e);else for(;r<e.length;)-1===a&&(a=e.length),t(e.slice(r,a)),r=a+1,a=e.indexOf(Tx,r)}},get:function(e,t){return this.walk(t,(function(t){e&&(e=e[t])})),e}},Nx=Bx;function zx(e,t,n){return e.isUnsubscribed||t.ignoreSymbols&&Rx(n)||t.ignoreUnderscores&&"_"===n.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(n)}var Fx=function(){function e(t){(0,c.Z)(this,e),this._equals=t,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}return(0,d.Z)(e,[{key:"_getDescriptorCache",value:function(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}},{key:"_getProperties",value:function(e){var t=this._getDescriptorCache(),n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}},{key:"_getOwnPropertyDescriptor",value:function(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);var n=this._getProperties(e),i=n[t];return void 0===i&&(i=Reflect.getOwnPropertyDescriptor(e,t),n[t]=i),i}},{key:"getProxy",value:function(e,t,n,i){if(this.isUnsubscribed)return e;var r=e[i],a=r||e;this._pathCache.set(a,t);var o=this._proxyCache.get(a);return void 0===o&&(o=void 0===r?new Proxy(e,n):e,this._proxyCache.set(a,o)),o}},{key:"getPath",value:function(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}},{key:"isDetached",value:function(e,t){return!Object.is(e,Nx.get(t,this.getPath(e)))}},{key:"defineProperty",value:function(e,t,n){return!!Reflect.defineProperty(e,t,n)&&(this.isUnsubscribed||(this._getProperties(e)[t]=n),!0)}},{key:"setProperty",value:function(e,t,n,i,r){if(!this._equals(r,n)||!(t in e)){var a=this._getOwnPropertyDescriptor(e,t);return void 0!==a&&"set"in a?Reflect.set(e,t,n,i):Reflect.set(e,t,n)}return!0}},{key:"deleteProperty",value:function(e,t,n){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){var i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(n))}return!0}return!1}},{key:"isSameDescriptor",value:function(e,t,n){var i=this._getOwnPropertyDescriptor(t,n);return void 0!==e&&void 0!==i&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}},{key:"isGetInvariant",value:function(e,t){var n=this._getOwnPropertyDescriptor(e,t);return void 0!==n&&!0!==n.configurable&&!0!==n.writable}},{key:"unsubscribe",value:function(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}]),e}();function jx(e){return"[object Object]"===toString.call(e)}function Ux(){return!0}function Zx(e,t){return e.length!==t.length||e.some((function(e,n){return t[n]!==e}))}var Vx=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Gx=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Hx={push:Ux,pop:Ux,shift:Ux,unshift:Ux,copyWithin:Zx,reverse:Zx,sort:Zx,splice:Zx,flat:Zx,fill:Zx},Wx=new Set([].concat(u(Vx),u(Gx),u(Object.keys(Hx))));function qx(e,t){if(e.size!==t.size)return!0;var n,i=(0,x.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r))return!0}}catch(a){i.e(a)}finally{i.f()}return!1}var Xx=["keys","values","entries"],Yx=new Set(["has","toString"]),Qx={add:qx,clear:qx,delete:qx,forEach:qx},Kx=new Set([].concat(u(Yx),u(Object.keys(Qx)),Xx));function Jx(e,t){if(e.size!==t.size)return!0;var n,i,r=(0,x.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=o(i.value,2),s=a[0],l=a[1];if((n=t.get(s))!==l||void 0===n&&!t.has(s))return!0}}catch(u){r.e(u)}finally{r.f()}return!1}var $x=new Set([].concat(u(Yx),["get"])),ew={set:Jx,clear:Jx,delete:Jx,forEach:Jx},tw=new Set([].concat(u($x),u(Object.keys(ew)),Xx)),nw=function(){function e(t,n,i,r){(0,c.Z)(this,e),this._path=n,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=void 0===n?t:this._shallowClone(t)}return(0,d.Z)(e,[{key:"_shallowClone",value:function(e){var t=this,n=e;if(jx(e))n=$e({},e);else if(Ix(e))n=u(e);else if(e instanceof Date)n=new Date(e);else if(e instanceof Set)n=new Set(u(e).map((function(e){return t._shallowClone(e)})));else if(e instanceof Map){n=new Map;var i,r=(0,x.Z)(e.entries());try{for(r.s();!(i=r.n()).done;){var a=o(i.value,2),s=a[0],l=a[1];n.set(s,this._shallowClone(l))}}catch(c){r.e(c)}finally{r.f()}}return this._clonedCache.add(n),n}},{key:"preferredThisArg",value:function(e,t,n,i){return e?(Ix(i)?this._onIsChanged=Hx[t]:i instanceof Set?this._onIsChanged=Qx[t]:i instanceof Map&&(this._onIsChanged=ew[t]),i):n}},{key:"update",value:function(e,t,n){var i=this,r=Nx.after(e,this._path);if("length"!==t){var a=this.clone;Nx.walk(r,(function(e){a&&a[e]&&(i._clonedCache.has(a[e])||(a[e]=i._shallowClone(a[e])),a=a[e])})),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:n}),a&&a[t]&&(a[t]=n)}this._isChanged=!0}},{key:"undo",value:function(e){for(var t,n=this._changes.length-1;-1!==n;n--)t=this._changes[n],Nx.get(e,t.path)[t.property]=t.previous}},{key:"isChanged",value:function(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}}],[{key:"isHandledMethod",value:function(e){return Vx.has(e)}}]),e}(),iw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,null,[{key:"isHandledMethod",value:function(e){return Wx.has(e)}}]),n}(nw),rw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"undo",value:function(e){e.setTime(this.clone.getTime())}},{key:"isChanged",value:function(e,t){return!t(this.clone.valueOf(),e.valueOf())}}]),n}(nw),aw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"undo",value:function(e){var t,n=(0,x.Z)(this.clone);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.add(i)}}catch(s){n.e(s)}finally{n.f()}var r,a=(0,x.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.clone.has(o)||e.delete(o)}}catch(s){a.e(s)}finally{a.f()}}}],[{key:"isHandledMethod",value:function(e){return Kx.has(e)}}]),n}(nw),ow=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"undo",value:function(e){var t,n=(0,x.Z)(this.clone.entries());try{for(n.s();!(t=n.n()).done;){var i=o(t.value,2),r=i[0],a=i[1];e.set(r,a)}}catch(c){n.e(c)}finally{n.f()}var s,l=(0,x.Z)(e.keys());try{for(l.s();!(s=l.n()).done;){var u=s.value;this.clone.has(u)||e.delete(u)}}catch(c){l.e(c)}finally{l.f()}}}],[{key:"isHandledMethod",value:function(e){return tw.has(e)}}]),n}(nw),sw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,void 0,i,r,a))._arg1=r[0],o._weakValue=e.has(o._arg1),o}return(0,d.Z)(n,[{key:"isChanged",value:function(e){return this._weakValue!==e.has(this._arg1)}},{key:"undo",value:function(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}}]),n}(nw),lw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,void 0,i,r,a))._weakKey=r[0],o._weakHas=e.has(o._weakKey),o._weakValue=e.get(o._weakKey),o}return(0,d.Z)(n,[{key:"isChanged",value:function(e){return this._weakValue!==e.get(this._weakKey)}},{key:"undo",value:function(e){var t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}}]),n}(nw),uw=function(){function e(t){(0,c.Z)(this,e),this._stack=[],this._hasOnValidate=t}return(0,d.Z)(e,[{key:"isCloning",get:function(){return this._stack.length>0}},{key:"start",value:function(e,t,n){var i=nw;Ix(e)?i=iw:e instanceof Date?i=rw:e instanceof Set?i=aw:e instanceof Map?i=ow:e instanceof WeakSet?i=sw:e instanceof WeakMap&&(i=lw),this._stack.push(new i(e,t,n,this._hasOnValidate))}},{key:"update",value:function(e,t,n){this._stack[this._stack.length-1].update(e,t,n)}},{key:"preferredThisArg",value:function(t,n,i){var r=t.name,a=e.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(a,r,n,i)}},{key:"isChanged",value:function(e,t,n){return this._stack[this._stack.length-1].isChanged(e,t,n)}},{key:"undo",value:function(e){void 0!==this._previousClone&&this._previousClone.undo(e)}},{key:"stop",value:function(){return this._previousClone=this._stack.pop(),this._previousClone.clone}}],[{key:"isHandledType",value:function(e){return jx(e)||Ix(e)||Ox(e)}},{key:"isHandledMethod",value:function(e,t){return jx(e)?nw.isHandledMethod(t):Ix(e)?iw.isHandledMethod(t):e instanceof Set?aw.isHandledMethod(t):e instanceof Map?ow.isHandledMethod(t):Ox(e)}}]),e}(),cw={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},dw=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=$e($e({},cw),n);var i=Symbol("ProxyTarget"),r=n,a=r.equals,o=r.isShallow,s=r.ignoreDetached,l=r.details,u=new Fx(a),c="function"==typeof n.onValidate,d=new uw(c),h=function(e,t,i,r,a){return!c||d.isCloning||!0===n.onValidate(Nx.concat(u.getPath(e),t),i,r,a)},f=function(t,i,r,a){!zx(u,n,i)&&(!s||!u.isDetached(t,e))&&p(u.getPath(t),i,r,a)},p=function(e,n,i,r,a){d.isCloning?d.update(e,n,r):t(Nx.concat(e,n),i,r,a)},v=function(e){return e&&(e[i]||e)},m=function(t,r,a,l){return function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===a||o&&!uw.isHandledMethod(r,a)||zx(u,n,a)||u.isGetInvariant(r,a)||s&&u.isDetached(r,e)?t:(void 0===l&&(l=u.getPath(r)),u.getProxy(t,Nx.concat(l,a),g,i))},g={get:function(e,t,n){if(Rx(t)){if(t===i||t===Px)return e;if(t===Dx&&!u.isUnsubscribed&&0===u.getPath(e).length)return u.unsubscribe(),e}var r=Ox(e)?Reflect.get(e,t):Reflect.get(e,t,n);return m(r,e,t)},set:function(e,t,n,r){n=v(n);var o=e[i]||e,s=o[t];if(a(s,n)&&t in e)return!0;var l=h(e,t,n,s);return l&&u.setProperty(o,t,n,r,s)?(f(e,t,e[t],s),!0):!l},defineProperty:function(e,t,n){if(!u.isSameDescriptor(n,e,t)){var i=e[t];h(e,t,n.value,i)&&u.defineProperty(e,t,n,i)&&f(e,t,n.value,i)}return!0},deleteProperty:function(e,t){if(!Reflect.has(e,t))return!0;var n=Reflect.get(e,t),i=h(e,t,void 0,n);return i&&u.deleteProperty(e,t,n)?(f(e,t,void 0,n),!0):!i},apply:function(t,n,r){var o=n[i]||n;if(u.isUnsubscribed)return Reflect.apply(t,o,r);if((!1===l||!0!==l&&!l.includes(t.name))&&uw.isHandledType(o)){var s=Nx.initial(u.getPath(t)),c=uw.isHandledMethod(o,t.name);d.start(o,s,r);var f=Reflect.apply(t,d.preferredThisArg(t,n,o),c?r.map((function(e){return v(e)})):r),L=d.isChanged(o,a),y=d.stop();if(uw.isHandledType(f)&&c&&(n instanceof Map&&"get"===t.name&&(s=Nx.concat(s,r[0])),f=u.getProxy(f,s,g)),L){var b={name:t.name,args:r,result:f},x=d.isCloning?Nx.initial(s):s,w=d.isCloning?Nx.last(s):"";h(Nx.get(e,x),w,o,y,b)?p(x,w,o,y,b):d.undo(o)}return(n instanceof Map||n instanceof Set)&&function(e){return"object"==typeof e&&"function"==typeof e.next}(f)?function(e,t,n,i,r){var a=e.next;if("entries"===t.name)e.next=function(){var e=a.call(this);return!1===e.done&&(e.value[0]=r(e.value[0],t,e.value[0],i),e.value[1]=r(e.value[1],t,e.value[0],i)),e};else if("values"===t.name){var o=n[Px].keys();e.next=function(){var e=a.call(this);return!1===e.done&&(e.value=r(e.value,t,o.next().value,i)),e}}else e.next=function(){var e=a.call(this);return!1===e.done&&(e.value=r(e.value,t,e.value,i)),e};return e}(f,t,n,s,m):f}return Reflect.apply(t,n,r)}},L=u.getProxy(e,n.pathAsArray?[]:"",g);return t=t.bind(L),c&&(n.onValidate=n.onValidate.bind(L)),L};dw.target=function(e){return e&&e[Px]||e},dw.unsubscribe=function(e){return e[Dx]||e};var hw=dw,fw="object"==typeof global&&global&&global.Object===Object&&global,pw="object"==typeof self&&self&&self.Object===Object&&self,vw=fw||pw||Function("return this")(),mw=vw.Symbol,gw=Object.prototype,Lw=gw.hasOwnProperty,yw=gw.toString,bw=mw?mw.toStringTag:void 0;var xw=function(e){var t=Lw.call(e,bw),n=e[bw];try{e[bw]=void 0;var i=!0}catch(a){}var r=yw.call(e);return i&&(t?e[bw]=n:delete e[bw]),r},ww=Object.prototype.toString;var _w=function(e){return ww.call(e)},Sw=mw?mw.toStringTag:void 0;var kw=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Sw&&Sw in Object(e)?xw(e):_w(e)};var Aw=function(e){return null!=e&&"object"==typeof e};var Mw=function(e){return"symbol"==typeof e||Aw(e)&&"[object Symbol]"==kw(e)};var Cw=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},Ew=Array.isArray,Tw=mw?mw.prototype:void 0,Pw=Tw?Tw.toString:void 0;var Dw=function e(t){if("string"==typeof t)return t;if(Ew(t))return Cw(t,e)+"";if(Mw(t))return Pw?Pw.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},Ow=/\s/;var Iw=function(e){for(var t=e.length;t--&&Ow.test(e.charAt(t)););return t},Rw=/^\s+/;var Bw=function(e){return e&&e.slice(0,Iw(e)+1).replace(Rw,"")};var Nw=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},zw=/^[-+]0x[0-9a-f]+$/i,Fw=/^0b[01]+$/i,jw=/^0o[0-7]+$/i,Uw=parseInt;var Zw=function(e){if("number"==typeof e)return e;if(Mw(e))return NaN;if(Nw(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Nw(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Bw(e);var n=Fw.test(e);return n||jw.test(e)?Uw(e.slice(2),n?2:8):zw.test(e)?NaN:+e};var Vw=function(e){return e};var Gw=function(e){if(!Nw(e))return!1;var t=kw(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Hw=vw["__core-js_shared__"],Ww=function(){var e=/[^.]+$/.exec(Hw&&Hw.keys&&Hw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var qw=function(e){return!!Ww&&Ww in e},Xw=Function.prototype.toString;var Yw=function(e){if(null!=e){try{return Xw.call(e)}catch(t){}try{return e+""}catch(n){}}return""},Qw=/^\[object .+?Constructor\]$/,Kw=Function.prototype,Jw=Object.prototype,$w=Kw.toString,e_=Jw.hasOwnProperty,t_=RegExp("^"+$w.call(e_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var n_=function(e){return!(!Nw(e)||qw(e))&&(Gw(e)?t_:Qw).test(Yw(e))};var i_=function(e,t){return null===e||void 0===e?void 0:e[t]};var r_=function(e,t){var n=i_(e,t);return n_(n)?n:void 0},a_=r_(vw,"WeakMap"),o_=Object.create,s_=function(){function e(){}return function(t){if(!Nw(t))return{};if(o_)return o_(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),l_=s_;var u_=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var c_=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},d_=Date.now;var h_=function(e){var t=0,n=0;return function(){var i=d_(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};var f_=function(e){return function(){return e}},p_=function(){try{var e=r_(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),v_=p_,m_=v_?function(e,t){return v_(e,"toString",{configurable:!0,enumerable:!1,value:f_(t),writable:!0})}:Vw,g_=h_(m_);var L_=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e},y_=/^(?:0|[1-9]\d*)$/;var b_=function(e,t){var n,i=typeof e;return!!(t=null!==(n=t)&&void 0!==n?n:9007199254740991)&&("number"==i||"symbol"!=i&&y_.test(e))&&e>-1&&e%1==0&&e<t};var x_=function(e,t,n){"__proto__"==t&&v_?v_(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var w_=function(e,t){return e===t||e!==e&&t!==t},__=Object.prototype.hasOwnProperty;var S_=function(e,t,n){var i=e[t];(!__.call(e,t)||!w_(i,n)||void 0===n&&!(t in e))&&x_(e,t,n)};var k_=function(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?x_(n,s,l):S_(n,s,l)}return n},A_=Math.max;var M_=function(e,t,n){return t=A_(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=A_(i.length-t,0),o=Array(a);++r<a;)o[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(o),u_(e,this,s)}};var C_=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var E_=function(e){return null!=e&&C_(e.length)&&!Gw(e)},T_=Object.prototype;var P_=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||T_)};var D_=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i};var O_=function(e){return Aw(e)&&"[object Arguments]"==kw(e)},I_=Object.prototype,R_=I_.hasOwnProperty,B_=I_.propertyIsEnumerable,N_=O_(function(){return arguments}())?O_:function(e){return Aw(e)&&R_.call(e,"callee")&&!B_.call(e,"callee")},z_=N_;var F_=function(){return!1},j_="object"==typeof exports&&exports&&!exports.nodeType&&exports,U_=j_&&"object"==typeof module&&module&&!module.nodeType&&module,Z_=U_&&U_.exports===j_?vw.Buffer:void 0,V_=(Z_?Z_.isBuffer:void 0)||F_,G_={};G_["[object Float32Array]"]=G_["[object Float64Array]"]=G_["[object Int8Array]"]=G_["[object Int16Array]"]=G_["[object Int32Array]"]=G_["[object Uint8Array]"]=G_["[object Uint8ClampedArray]"]=G_["[object Uint16Array]"]=G_["[object Uint32Array]"]=!0,G_["[object Arguments]"]=G_["[object Array]"]=G_["[object ArrayBuffer]"]=G_["[object Boolean]"]=G_["[object DataView]"]=G_["[object Date]"]=G_["[object Error]"]=G_["[object Function]"]=G_["[object Map]"]=G_["[object Number]"]=G_["[object Object]"]=G_["[object RegExp]"]=G_["[object Set]"]=G_["[object String]"]=G_["[object WeakMap]"]=!1;var H_=function(e){return Aw(e)&&C_(e.length)&&!!G_[kw(e)]};var W_=function(e){return function(t){return e(t)}},q_="object"==typeof exports&&exports&&!exports.nodeType&&exports,X_=q_&&"object"==typeof module&&module&&!module.nodeType&&module,Y_=X_&&X_.exports===q_&&fw.process,Q_=function(){try{return X_&&X_.require&&X_.require("util").types||Y_&&Y_.binding&&Y_.binding("util")}catch(e){}}(),K_=Q_&&Q_.isTypedArray,J_=K_?W_(K_):H_,$_=Object.prototype.hasOwnProperty;var eS=function(e,t){var n=Ew(e),i=!n&&z_(e),r=!n&&!i&&V_(e),a=!n&&!i&&!r&&J_(e),o=n||i||r||a,s=o?D_(e.length,String):[],l=s.length;for(var u in e)(t||$_.call(e,u))&&(!o||!("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||b_(u,l)))&&s.push(u);return s};var tS=function(e,t){return function(n){return e(t(n))}},nS=tS(Object.keys,Object),iS=Object.prototype.hasOwnProperty;var rS=function(e){if(!P_(e))return nS(e);var t=[];for(var n in Object(e))iS.call(e,n)&&"constructor"!=n&&t.push(n);return t};var aS=function(e){return E_(e)?eS(e):rS(e)};var oS=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},sS=Object.prototype.hasOwnProperty;var lS=function(e){if(!Nw(e))return oS(e);var t=P_(e),n=[];for(var i in e)"constructor"==i&&(t||!sS.call(e,i))||n.push(i);return n};var uS=function(e){return E_(e)?eS(e,!0):lS(e)},cS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dS=/^\w*$/;var hS=function(e,t){if(Ew(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Mw(e))||(dS.test(e)||!cS.test(e)||null!=t&&e in Object(t))},fS=r_(Object,"create");var pS=function(){this.__data__=fS?fS(null):{},this.size=0};var vS=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},mS=Object.prototype.hasOwnProperty;var gS=function(e){var t=this.__data__;if(fS){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return mS.call(t,e)?t[e]:void 0},LS=Object.prototype.hasOwnProperty;var yS=function(e){var t=this.__data__;return fS?void 0!==t[e]:LS.call(t,e)};var bS=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fS&&void 0===t?"__lodash_hash_undefined__":t,this};function xS(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}xS.prototype.clear=pS,xS.prototype.delete=vS,xS.prototype.get=gS,xS.prototype.has=yS,xS.prototype.set=bS;var wS=xS;var _S=function(){this.__data__=[],this.size=0};var SS=function(e,t){for(var n=e.length;n--;)if(w_(e[n][0],t))return n;return-1},kS=Array.prototype.splice;var AS=function(e){var t=this.__data__,n=SS(t,e);return!(n<0)&&(n==t.length-1?t.pop():kS.call(t,n,1),--this.size,!0)};var MS=function(e){var t=this.__data__,n=SS(t,e);return n<0?void 0:t[n][1]};var CS=function(e){return SS(this.__data__,e)>-1};var ES=function(e,t){var n=this.__data__,i=SS(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function TS(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}TS.prototype.clear=_S,TS.prototype.delete=AS,TS.prototype.get=MS,TS.prototype.has=CS,TS.prototype.set=ES;var PS=TS,DS=r_(vw,"Map");var OS=function(){this.size=0,this.__data__={hash:new wS,map:new(DS||PS),string:new wS}};var IS=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var RS=function(e,t){var n=e.__data__;return IS(t)?n["string"==typeof t?"string":"hash"]:n.map};var BS=function(e){var t=RS(this,e).delete(e);return this.size-=t?1:0,t};var NS=function(e){return RS(this,e).get(e)};var zS=function(e){return RS(this,e).has(e)};var FS=function(e,t){var n=RS(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function jS(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}jS.prototype.clear=OS,jS.prototype.delete=BS,jS.prototype.get=NS,jS.prototype.has=zS,jS.prototype.set=FS;var US=jS;function ZS(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(ZS.Cache||US),n}ZS.Cache=US;var VS=ZS;var GS=function(e){var t=VS(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},HS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,WS=/\\(\\)?/g,qS=GS((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(HS,(function(e,n,i,r){t.push(i?r.replace(WS,"$1"):n||e)})),t})),XS=qS;var YS=function(e){return null==e?"":Dw(e)};var QS=function(e,t){return Ew(e)?e:hS(e,t)?[e]:XS(YS(e))};var KS=function(e){if("string"==typeof e||Mw(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var JS=function(e,t){for(var n=0,i=(t=QS(t,e)).length;null!=e&&n<i;)e=e[KS(t[n++])];return n&&n==i?e:void 0};var $S=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},ek=mw?mw.isConcatSpreadable:void 0;var tk=function(e){return Ew(e)||z_(e)||!!(ek&&e&&e[ek])};var nk=function e(t,n,i,r,a){var o=-1,s=t.length;for(i||(i=tk),a||(a=[]);++o<s;){var l=t[o];n>0&&i(l)?n>1?e(l,n-1,i,r,a):$S(a,l):r||(a[a.length]=l)}return a};var ik=function(e){return(null==e?0:e.length)?nk(e,1):[]};var rk=function(e){return g_(M_(e,void 0,ik),e+"")},ak=tS(Object.getPrototypeOf,Object),ok=Function.prototype,sk=Object.prototype,lk=ok.toString,uk=sk.hasOwnProperty,ck=lk.call(Object);var dk=function(e){if(!Aw(e)||"[object Object]"!=kw(e))return!1;var t=ak(e);if(null===t)return!0;var n=uk.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lk.call(n)==ck};var hk=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++i<r;)a[i]=e[i+t];return a};var fk=function(){this.__data__=new PS,this.size=0};var pk=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var vk=function(e){return this.__data__.get(e)};var mk=function(e){return this.__data__.has(e)};var gk=function(e,t){var n=this.__data__;if(n instanceof PS){var i=n.__data__;if(!DS||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new US(i)}return n.set(e,t),this.size=n.size,this};function Lk(e){var t=this.__data__=new PS(e);this.size=t.size}Lk.prototype.clear=fk,Lk.prototype.delete=pk,Lk.prototype.get=vk,Lk.prototype.has=mk,Lk.prototype.set=gk;var yk=Lk;var bk=function(e,t){return e&&k_(t,aS(t),e)};var xk=function(e,t){return e&&k_(t,uS(t),e)},wk="object"==typeof exports&&exports&&!exports.nodeType&&exports,_k=wk&&"object"==typeof module&&module&&!module.nodeType&&module,Sk=_k&&_k.exports===wk?vw.Buffer:void 0,kk=Sk?Sk.allocUnsafe:void 0;var Ak=function(e,t){if(t)return e.slice();var n=e.length,i=kk?kk(n):new e.constructor(n);return e.copy(i),i};var Mk=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a};var Ck=function(){return[]},Ek=Object.prototype.propertyIsEnumerable,Tk=Object.getOwnPropertySymbols,Pk=Tk?function(e){return null==e?[]:(e=Object(e),Mk(Tk(e),(function(t){return Ek.call(e,t)})))}:Ck,Dk=Pk;var Ok=function(e,t){return k_(e,Dk(e),t)},Ik=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$S(t,Dk(e)),e=ak(e);return t}:Ck,Rk=Ik;var Bk=function(e,t){return k_(e,Rk(e),t)};var Nk=function(e,t,n){var i=t(e);return Ew(e)?i:$S(i,n(e))};var zk=function(e){return Nk(e,aS,Dk)};var Fk=function(e){return Nk(e,uS,Rk)},jk=r_(vw,"DataView"),Uk=r_(vw,"Promise"),Zk=r_(vw,"Set"),Vk="[object Map]",Gk="[object Promise]",Hk="[object Set]",Wk="[object WeakMap]",qk="[object DataView]",Xk=Yw(jk),Yk=Yw(DS),Qk=Yw(Uk),Kk=Yw(Zk),Jk=Yw(a_),$k=kw;(jk&&$k(new jk(new ArrayBuffer(1)))!=qk||DS&&$k(new DS)!=Vk||Uk&&$k(Uk.resolve())!=Gk||Zk&&$k(new Zk)!=Hk||a_&&$k(new a_)!=Wk)&&($k=function(e){var t=kw(e),n="[object Object]"==t?e.constructor:void 0,i=n?Yw(n):"";if(i)switch(i){case Xk:return qk;case Yk:return Vk;case Qk:return Gk;case Kk:return Hk;case Jk:return Wk}return t});var eA=$k,tA=Object.prototype.hasOwnProperty;var nA=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tA.call(e,"index")&&(n.index=e.index,n.input=e.input),n},iA=vw.Uint8Array;var rA=function(e){var t=new e.constructor(e.byteLength);return new iA(t).set(new iA(e)),t};var aA=function(e,t){var n=t?rA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},oA=/\w*$/;var sA=function(e){var t=new e.constructor(e.source,oA.exec(e));return t.lastIndex=e.lastIndex,t},lA=mw?mw.prototype:void 0,uA=lA?lA.valueOf:void 0;var cA=function(e){return uA?Object(uA.call(e)):{}};var dA=function(e,t){var n=t?rA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var hA=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return rA(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return aA(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return dA(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return sA(e);case"[object Symbol]":return cA(e)}};var fA=function(e){return"function"!=typeof e.constructor||P_(e)?{}:l_(ak(e))};var pA=function(e){return Aw(e)&&"[object Map]"==eA(e)},vA=Q_&&Q_.isMap,mA=vA?W_(vA):pA;var gA=function(e){return Aw(e)&&"[object Set]"==eA(e)},LA=Q_&&Q_.isSet,yA=LA?W_(LA):gA,bA="[object Arguments]",xA="[object Function]",wA="[object Object]",_A={};_A[bA]=_A["[object Array]"]=_A["[object ArrayBuffer]"]=_A["[object DataView]"]=_A["[object Boolean]"]=_A["[object Date]"]=_A["[object Float32Array]"]=_A["[object Float64Array]"]=_A["[object Int8Array]"]=_A["[object Int16Array]"]=_A["[object Int32Array]"]=_A["[object Map]"]=_A["[object Number]"]=_A[wA]=_A["[object RegExp]"]=_A["[object Set]"]=_A["[object String]"]=_A["[object Symbol]"]=_A["[object Uint8Array]"]=_A["[object Uint8ClampedArray]"]=_A["[object Uint16Array]"]=_A["[object Uint32Array]"]=!0,_A["[object Error]"]=_A[xA]=_A["[object WeakMap]"]=!1;var SA=function e(t,n,i,r,a,o){var s,l=1&n,u=2&n,c=4&n;if(i&&(s=a?i(t,r,a,o):i(t)),void 0!==s)return s;if(!Nw(t))return t;var d=Ew(t);if(d){if(s=nA(t),!l)return c_(t,s)}else{var h=eA(t),f=h==xA||"[object GeneratorFunction]"==h;if(V_(t))return Ak(t,l);if(h==wA||h==bA||f&&!a){if(s=u||f?{}:fA(t),!l)return u?Bk(t,xk(s,t)):Ok(t,bk(s,t))}else{if(!_A[h])return a?t:{};s=hA(t,h,l)}}o||(o=new yk);var p=o.get(t);if(p)return p;o.set(t,s),yA(t)?t.forEach((function(r){s.add(e(r,n,i,r,t,o))})):mA(t)&&t.forEach((function(r,a){s.set(a,e(r,n,i,a,t,o))}));var v=d?void 0:(c?u?Fk:zk:u?uS:aS)(t);return L_(v||t,(function(r,a){v&&(r=t[a=r]),S_(s,a,e(r,n,i,a,t,o))})),s};var kA=function(e){return SA(e,5)};var AA=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var MA=function(e){return this.__data__.has(e)};function CA(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new US;++t<n;)this.add(e[t])}CA.prototype.add=CA.prototype.push=AA,CA.prototype.has=MA;var EA=CA;var TA=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1};var PA=function(e,t){return e.has(t)};var DA=function(e,t,n,i,r,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,f=2&n?new EA:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var p=e[d],v=t[d];if(i)var m=o?i(v,p,d,t,e,a):i(p,v,d,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!TA(t,(function(e,t){if(!PA(f,t)&&(p===e||r(p,e,n,i,a)))return f.push(t)}))){h=!1;break}}else if(p!==v&&!r(p,v,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h};var OA=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n};var IA=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},RA=mw?mw.prototype:void 0,BA=RA?RA.valueOf:void 0;var NA=function(e,t,n,i,r,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new iA(e),new iA(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return w_(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=OA;case"[object Set]":var l=1&i;if(s||(s=IA),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;i|=2,o.set(e,t);var c=DA(s(e),s(t),i,r,a,o);return o.delete(e),c;case"[object Symbol]":if(BA)return BA.call(e)==BA.call(t)}return!1},zA=Object.prototype.hasOwnProperty;var FA=function(e,t,n,i,r,a){var o=1&n,s=zk(e),l=s.length;if(l!=zk(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:zA.call(t,c)))return!1}var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var f=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var v=e[c=s[u]],m=t[c];if(i)var g=o?i(m,v,c,t,e,a):i(v,m,c,e,t,a);if(!(void 0===g?v===m||r(v,m,n,i,a):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var L=e.constructor,y=t.constructor;L!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof L&&L instanceof L&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(e),a.delete(t),f},jA="[object Arguments]",UA="[object Array]",ZA="[object Object]",VA=Object.prototype.hasOwnProperty;var GA=function(e,t,n,i,r,a){var o=Ew(e),s=Ew(t),l=o?UA:eA(e),u=s?UA:eA(t),c=(l=l==jA?ZA:l)==ZA,d=(u=u==jA?ZA:u)==ZA,h=l==u;if(h&&V_(e)){if(!V_(t))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new yk),o||J_(e)?DA(e,t,n,i,r,a):NA(e,t,l,n,i,r,a);if(!(1&n)){var f=c&&VA.call(e,"__wrapped__"),p=d&&VA.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return a||(a=new yk),r(v,m,n,i,a)}}return!!h&&(a||(a=new yk),FA(e,t,n,i,r,a))};var HA=function e(t,n,i,r,a){return t===n||(null==t||null==n||!Aw(t)&&!Aw(n)?t!==t&&n!==n:GA(t,n,i,r,e,a))};var WA=function(e,t){return null!=e&&t in Object(e)};var qA=function(e,t,n){for(var i=-1,r=(t=QS(t,e)).length,a=!1;++i<r;){var o=KS(t[i]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&C_(r)&&b_(o,r)&&(Ew(e)||z_(e))};var XA=function(e,t){return null!=e&&qA(e,t,WA)},YA=function(){return vw.Date.now()},QA=Math.max,KA=Math.min;var JA=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=YA();if(p(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?KA(n,a-(e-u)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,o)}function g(){var e=YA(),n=p(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?f(e):o}(l);if(d)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=Zw(t)||0,Nw(n)&&(c=!!n.leading,a=(d="maxWait"in n)?QA(Zw(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},g.flush=function(){return void 0===s?o:m(YA())},g};var $A=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var eM=function(e,t){return t.length<2?e:JS(e,hk(t,0,-1))};var tM=function(e,t){return HA(e,t)};var nM=function(e,t){return t=QS(t,e),null==(e=eM(e,t))||delete e[KS($A(t))]};var iM=function(e){return dk(e)?void 0:e},rM=rk((function(e,t){var n={};if(null==e)return n;var i=!1;t=Cw(t,(function(t){return t=QS(t,e),i||(i=t.length>1),t})),k_(e,Fk(e),n),i&&(n=SA(n,7,iM));for(var r=t.length;r--;)nM(n,t[r]);return n})),aM=rM;var oM=function(e,t,n,i){if(!Nw(e))return e;for(var r=-1,a=(t=QS(t,e)).length,o=a-1,s=e;null!=s&&++r<a;){var l=KS(t[r]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=o){var c=s[l];void 0===(u=i?i(c,l,s):void 0)&&(u=Nw(c)?c:b_(t[r+1])?[]:{})}S_(s,l,u),s=s[l]}return e};var sM=function(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var o=t[i],s=JS(e,o);n(s,o)&&oM(a,QS(o,e),s)}return a};var lM=function(e,t){return sM(e,t,(function(t,n){return XA(e,n)}))},uM=rk((function(e,t){return null==e?{}:lM(e,t)})),cM=uM;var dM=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Nw(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),JA(e,t,{leading:i,maxWait:t,trailing:r})};function hM(e,t){return Object.setPrototypeOf(e,t),e}!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/")&&function(){var e;typeof window>"u"||(e=new URLSearchParams(window.location.search).get("desktop-app-version"))}();var fM=!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC"),pM=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||fM&&"ontouchend"in document),vM=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,mM=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),gM=function(){if(typeof window>"u")return!1;var e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)}(),LM=Number(function(){if(typeof window>"u")return null;var e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]}());function yM(e){return Array.isArray(e)?e:[e]}function bM(e){return fM?e.metaKey:e.ctrlKey}var xM=[],wM={},_M={},SM={};function kM(e){xM.includes(e)||xM.push(e)}function AM(e){delete wM[e.pointerId];for(var t=0;t<xM.length;t++)if(xM[t].pointerId===e.pointerId){xM.splice(t,1);break}}function MM(e){if("touch"===e.pointerType){var t=wM[e.pointerId];void 0===t&&(t={x:0,y:0},wM[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}}function CM(e){var t=e.pointerId===xM[0].pointerId?xM[1]:xM[0];return wM[t.pointerId]}function EM(e){_M[e.key]=!0,SM[e.key]=void 0===SM[e.key]?1:SM[e.key]+1}function TM(e){if(fM&&_M.Meta)for(var t in _M)_M[t]=!1;else _M[e.key]=!1;SM={}}var PM,DM,OM=new Promise((function(e){PM=e}));function IM(){if(DM)return DM;function e(){return e=(0,ju.Z)((0,Fu.Z)().mark((function e(){var t,i,r,a,s,l;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://unpkg.com/@splinetool/navmesh-wasm@0.9.418/build",e.next=3,Promise.all([n.e(872).then(n.bind(n,872)),fetch("".concat("https://unpkg.com/@splinetool/navmesh-wasm@0.9.418/build","/navmesh.wasm")).then((function(e){return e.arrayBuffer()}))]);case 3:return t=e.sent,i=o(t,2),r=i[0],a=i[1],s=r.default,e.next=10,s({wasmBinary:a});case 10:l=e.sent,PM(l);case 12:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return DM=function(){return e.apply(this,arguments)}(),DM}var RM,BM,NM=new Promise((function(e){RM=e}));function zM(){if(BM)return BM;function e(){return e=(0,ju.Z)((0,Fu.Z)().mark((function e(){var t;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(227).then(n.bind(n,227));case 2:return t=e.sent,e.next=5,t.init();case 5:RM(t);case 6:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return BM=function(){return e.apply(this,arguments)}(),BM}var FM=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,[{key:"modifyById",value:function(t,n){if(void 0===this[t])throw new Error("not expected");var i=$e($e({},this),{},Ke({},t,n));return Object.setPrototypeOf(i,e.prototype),i}},{key:"add",value:function(e,t){var n,i;return null!==(n=null===(i=this.runOp({type:1,id:e,data:t}))||void 0===i?void 0:i.data)&&void 0!==n?n:this}},{key:"runOp",value:function(t){var n=this;if(1===t.type){var i,r=n[t.id];i=void 0===r?{type:2,id:t.id}:{type:1,id:t.id,data:r};var a=t.id,o=t.data,s=$e($e({},n),{},Ke({},a,o));return Object.setPrototypeOf(s,e.prototype),{data:s,actual:t,reverse:i}}if(2===t.type){var l=t.id,u=n[l];if(void 0===u)return null;var c=$e({},n);return Object.setPrototypeOf(c,e.prototype),delete c[l],{data:c,actual:t,reverse:{type:1,id:l,data:u}}}return null}}]),e}();function jM(e){if(void 0===e.deepFreeze){var t,n=Object.getOwnPropertyNames(e),i=(0,x.Z)(n);try{for(i.s();!(t=i.n()).done;){var r=e[t.value];r&&"object"==typeof r&&jM(r)}}catch(a){i.e(a)}finally{i.f()}return Object.freeze(e)}e.deepFreeze(e)}var UM=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(L(Error));function ZM(e){var t=$e({},e);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function VM(e,t,n){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){var i=e;e=t,t=i}for(var r=[],a=1/(n+1),o=0;o<n;o++){var s=e+(t-e)*(o+.75+.5*Math.random())*a;r.push(s)}return r}function GM(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function HM(e,t){var n,i=(0,x.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;!0!==t(r.id,r.data)&&HM(r.children,t)}}catch(a){i.e(a)}finally{i.f()}}function WM(e,t){if(!0!==t(e.id,e.data)){var n,i=(0,x.Z)(e.children);try{for(i.s();!(n=i.n()).done;){WM(n.value,t)}}catch(r){i.e(r)}finally{i.f()}}}var qM,XM=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object.setPrototypeOf((0,Ye.Z)(e),n.prototype),e}return(0,d.Z)(n,[{key:"deepFreeze",value:function(){for(var e=0;e<this.length;)jM(this[e]),e++}},{key:"fillCaches0",value:function(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);var n,i=(0,x.Z)(e.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.fillCaches0(r,e.id)}}catch(a){i.e(a)}finally{i.f()}}},{key:"fillCaches",value:function(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;var e,t=(0,x.Z)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.fillCaches0(n,null)}}catch(i){t.e(i)}finally{t.f()}}}},{key:"randomId",value:function(){this.fillCaches();var e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}},{key:"nonExistOrDescendantOf",value:function(e,t){if(!this.has(e))return!0;for(;e;){var n=this.parent(e);if(n===t)return!0;e=n}return!1}},{key:"rootAcestor",value:function(e){for(;e;){var t=this.parent(e);if(!t)return e;e=t}return e}},{key:"isDescendantOf",value:function(e,t){for(;e;){var n=this.parent(e);if(n===t)return!0;e=n}return!1}},{key:"data",value:function(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}},{key:"has",value:function(e){return void 0!==this.childrenOf(e)}},{key:"get",value:function(e){return this.fillCaches(),this.objCaches.get(e)}},{key:"childrenOf",value:function(e){var t;return null===e?this:null===(t=this.get(e))||void 0===t?void 0:t.children}},{key:"traverseFrom",value:function(e,t){if(null===e)this.traverse(t);else{var n=this.get(e);n&&WM(n,t)}}},{key:"traverse",value:function(e){HM(this,e)}},{key:"totalSize",value:function(){return this.fillCaches(),this.objCaches.size}},{key:"parent",value:function(e){return this.fillCaches(),this.parentCaches.get(e)}},{key:"childrenArray",value:function(e){return null===e?this:this.get(e).children}},{key:"modifyById",value:function(e,t){if(void 0===this.get(e))throw new Error("not expected");var n=this.parent(e),i=this.childrenArray(n),r=i.findIndex((function(t){return t.id===e}));if(r<0)throw new Error("not expected");var a=i[r];return(i=u(i))[r]=$e($e({},a),{},{data:t}),this.modifyArrayBy(n,i)}},{key:"modifyArrayBy",value:function(e,t){for(var i=this,r=e,a=t,o=function(){var e=a,t=r;if(void 0===(r=i.parent(r)))throw new Error;var n=(a=i.childrenArray(r)).findIndex((function(e){return e.id===t}));if(n<0)throw new Error;(a=u(a))[n]=$e($e({},a[n]),{},{children:e})};null!==r;)o();Object.setPrototypeOf(a,n.prototype);var s=a;return s.fillCaches(),s}},{key:"runOp",value:function(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}},{key:"checkDuplicatedIdRec",value:function(e){var t=e.id,n=e.children;if(void 0!==this.get(t))return!0;var i,r=(0,x.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(this.checkDuplicatedIdRec(a))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"addOp",value:function(e){var t=e.parent,n=e.fi,i=e.id,r=e.data,a=e.children;if(null!==t&&void 0===this.get(t))return null;if(this.checkDuplicatedIdRec(e))return null;var o=t,s=this.childrenArray(o),l={fi:n,id:i,data:r,children:a};return(s=[].concat(u(s),[l])).sort((function(e,t){return e.fi-t.fi})),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(o,s),actual:e,reverse:{type:8,id:i}}}},{key:"deleteOp",value:function(e){var t=e.id;if(null===this.get(t))return null;var n=this.parent(t);if(void 0===n)return null;var i=this.childrenArray(n),r=i.findIndex((function(e){return e.id===t}));e.localIndex=r;var a=(i=u(i)).splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:e,reverse:$e($e({type:7},a),{},{parent:n})}}},{key:"moveOp",value:function(e){var t=e.parent,n=e.fi,i=e.id;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:i});if(null!==t)for(var r=t;null!==r;){if(void 0===r)throw new Error;if(r===i)throw new UM("cyclic tree");r=this.parent(r)}var a=this.parent(i);if(void 0===a)return null;var o=a,s=this.childrenArray(a),l=s.findIndex((function(e){return e.id===i})),c=(s=u(s)).splice(l,1)[0],d=this.modifyArrayBy(a,s);a=t,s=d.childrenArray(a);var h=c.fi;return c=$e($e({},c),{},{fi:n}),(s=[].concat(u(s),[c])).sort((function(e,t){return e.fi-t.fi})),e.localIndex=s.indexOf(c),{data:d=d.modifyArrayBy(a,s),actual:e,reverse:{type:9,parent:o,fi:h,id:i}}}},{key:"previous",value:function(e,t){if(null===t){var n=this.childrenArray(e);return 0===n.length?null:n[n.length-1].id}var i,r=null,a=(0,x.Z)(this.childrenArray(e));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.id===t)return r;r=o.id}}catch(s){a.e(s)}finally{a.f()}return null}},{key:"traverseSortNext",value:function(e){var t=this.parent(e);if(void 0!==t){var n=this.childrenArray(t),i=n.findIndex((function(t){return t.id===e}))+1;if(i<n.length)return n[i].id;if(t)return this.traverseSortNext(t)}}},{key:"sortNext",value:function(e){var t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}},{key:"traverseSortPrevious",value:function(e){var t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}},{key:"sortPrevious",value:function(e){var t=this.parent(e);if(void 0!==t){var n=this.childrenArray(t),i=n.findIndex((function(t){return t.id===e}))-1;return i>=0?this.traverseSortPrevious(n[i].id):t}}},{key:"getAllSorted",value:function(e){var t,n=[],i=(0,x.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=this.getWithSortKey(r.id);void 0!==a&&n.push($e($e({},r),a))}}catch(l){i.e(l)}finally{i.f()}n.sort((function(e,t){return function(e,t){for(var n=0;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(e.sortKey,t.sortKey)}));for(var o=0,s=n;o<s.length;o++){delete s[o].sortKey}return n}},{key:"getWithSortKey",value:function(e){var t=e,n=[],i=this.get(t),r=i;if(void 0!==i){for(;t;)n.splice(0,0,i.fi),null!==(t=this.parent(t))&&(i=this.get(t));return $e($e({},r),{},{sortKey:n})}}},{key:"insertBeforeHelper",value:function(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}},{key:"insertAfterHelper",value:function(e,t,n){var i=this.childrenArray(e);if(null===t){if(0===i.length)return VM(0,n,n);var r=i[0].fi;return VM(r-n,r,n)}var a=this.get(t);if(void 0===a||this.parent(t)!==e)throw new Error("illegal args");var o=i.find((function(e){return e.fi>a.fi}));if(void 0===o){var s=i[i.length-1].fi;return VM(s,s+n,n)}return VM(a.fi,o.fi,n)}}]),n}(L(Array));!function(e){e.runOp=function(e,t){if(0!==t.type)return null;if(Array.isArray(e)){var n=t.props,i={},r=u(e),a=!1;if(n)for(var o=0,s=Object.keys(n);o<s.length;o++){var l=s[o],c=parseInt(l);if(isNaN(c))throw new Error("wrong index");i[l]=r[c],r[c]=n[l],a=!0}return a?{data:r,actual:t,reverse:{type:0,props:i}}:null}var d=t.props,h={},f=$e({},e),p=!1;if(d)for(var v=0,m=Object.keys(d);v<m.length;v++){var g=m[v];h[g]=f[g];var L=d[g];void 0===L?delete f[g]:f[g]=L,p=!0}return p?{data:f,actual:t,reverse:{type:0,props:h}}:null}}(qM||(qM={}));var YM=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object.setPrototypeOf((0,Ye.Z)(e),n.prototype),e}return(0,d.Z)(n,[{key:"deepFreeze",value:function(){for(var e=0;e<this.length;)jM(this[e]),e++}},{key:"fillCaches0",value:function(e){this.objCaches.set(e.id,e)}},{key:"fillCaches",value:function(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;var e,t=(0,x.Z)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.fillCaches0(n)}}catch(i){t.e(i)}finally{t.f()}}}},{key:"randomId",value:function(){this.fillCaches();var e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}},{key:"data",value:function(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}},{key:"get",value:function(e){return this.fillCaches(),this.objCaches.get(e)}},{key:"modifyById",value:function(e,t){if(void 0===this.get(e))throw new Error("not expected");var n=this,i=n.findIndex((function(t){return t.id===e}));if(i<0)throw new Error("not expected");var r=n[i];return(n=u(n))[i]=$e($e({},r),{},{data:t}),this.modifyArrayBy(n)}},{key:"modifyArrayBy",value:function(e){Object.setPrototypeOf(e,n.prototype);var t=e;return typeof process<"u"||t.fillCaches(),t}},{key:"runOp",value:function(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}},{key:"addOp",value:function(e){var t=e.fi,n=e.id,i=this,r={fi:t,id:n,data:e.data};return(i=[].concat(u(i),[r])).sort((function(e,t){return e.fi-t.fi})),e.localIndex=i.indexOf(r),{data:this.modifyArrayBy(i),actual:e,reverse:{type:5,id:n}}}},{key:"deleteOp",value:function(e){var t=e.id,n=this,i=n.findIndex((function(e){return e.id===t}));if(-1===i)return null;e.localIndex=i;var r=(n=u(n)).splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:e,reverse:$e({type:4},r)}}},{key:"moveOp",value:function(e){var t=e.fi,n=e.id,i=this,r=(i=u(i)).findIndex((function(e){return e.id===n}));if(-1===r)return null;var a=i[r].fi,o=$e($e({},i[r]),{},{fi:t});return i[r]=o,i.sort((function(e,t){return e.fi-t.fi})),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:a,id:n}}}},{key:"previous",value:function(e){if(null===e)return 0===this.length?null:this[this.length-1].id;var t,n=null,i=(0,x.Z)(this);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.id===e)return n;n=r.id}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"insertBeforeHelper",value:function(e,t){return this.insertAfterHelper(this.previous(e),t)}},{key:"insertAfterHelper",value:function(e,t){var n=this;if(null===e){if(0===n.length)return VM(0,t,t);var i=n[0].fi;return VM(i-t,i,t)}var r=this.get(e);if(void 0===r)throw new Error("illegal args");var a=n.find((function(e){return e.fi>r.fi}));if(void 0===a){var o=n[n.length-1].fi;return VM(o,o+t,t)}return VM(r.fi,a.fi,t)}}]),n}(L(Array));function QM(e){return e&&"object"==typeof e&&e instanceof tC}var KM,JM,$M,eC,tC=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,[{key:"unusedFunOverridesTable",value:function(e){}},{key:"runOp",value:function(t){for(var n=[],i=this,r=0,a={};r<t.path.length;){if(n.push(i),void 0!==(i=void 0===i?void 0:i[t.path[r]])&&!QM(i))return null;r+=1}i=i?ZM(i):new e;for(var s=0,l=Object.entries(t.props);s<l.length;s++){var u=o(l[s],2),c=u[0],d=u[1],h=i[c];a[c]=h,void 0===d?delete i[c]:i[c]=d}for(;r>0;){if(0===Object.keys(i).length){var f=n[r-1];f&&delete(i=ZM(f))[t.path[r-1]]}else{var p=n[r-1];if(p){var v=ZM(p);v[t.path[r-1]]=i,i=v}else{var m=new e;m[t.path[r-1]]=i,i=m}}r-=1}return{data:Object.setPrototypeOf(i,e.prototype),actual:t,reverse:$e($e({},t),{},{props:a})}}}]),e}();function nC(e,t){if(void 0!==t){var n=!1,i=e.map((function(e){var i=e.id,r=iC(e.data,t[i]);if(n=n||void 0!==r,void 0===r&&(r=e.data),e.children){var a=nC(e.children,t);return void 0!==a?n=!0:a=e.children,$e($e({},e),{},{id:i,data:r,children:a})}return $e($e({},e),{},{id:i,data:r})}));return n?i:void 0}}function iC(e,t){if(!QM(t))return t;if(e instanceof XM){var n=nC(e,t);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof YM)return function(e,t){if(void 0!==t){var n=!1,i=e.map((function(e){var i=e.id,r=iC(e.data,t[i]);return n=n||void 0!==r,void 0===r&&(r=e.data),$e($e({},e),{},{id:i,data:r})}));return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}(e,t);if(Array.isArray(e)){var i=!1,r=e.map((function(e,n){var r=iC(e,t[n]);return i=i||void 0!==r,void 0===r&&(r=e),r}));return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e instanceof tC)return rC(e,t);if(e&&"object"==typeof e){for(var a={},s=!1,l=0,u=Object.entries(e);l<u.length;l++){var c=o(u[l],2),d=c[0],h=c[1],f=iC(h,t[d]);s=s||void 0!==f,void 0===f&&(f=h),a[d]=f}return s?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}}function rC(e,t){if(void 0===e)return t;if(void 0===t)return e;if(!QM(t))return t;if(!QM(e))return KM.apply(e,t);for(var n=new Set,i=0,r=Object.keys(e);i<r.length;i++){var a=r[i];n.add(a)}for(var o=0,s=Object.keys(t);o<s.length;o++){var l=s[o];n.add(l)}var u,c=new tC,d=(0,x.Z)(n);try{for(d.s();!(u=d.n()).done;){var h=u.value,f=rC(void 0===e?void 0:e[h],void 0===t?void 0:t[h]);c[h]=f}}catch(p){d.e(p)}finally{d.f()}return c}function aC(e,t){var n,i={cur:[],result:[],len:0};return[e=null!==(n=uC(e,t,i))&&void 0!==n?n:e,i.result]}function oC(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function sC(e){e&&(e.len-=1)}function lC(e,t,n){var i=!1,r=e.map((function(e){var r=e.id,a=t[r];if(void 0!==a&&"string"==typeof a&&(i=!0,r=a,null!==n))throw new Error("not supported");var o=uC(e.data,t,oC(n,r));sC(n),i=i||void 0!==o,void 0===o&&(o=e.data);var s=lC(e.children,t,n);return void 0!==s?i=!0:s=e.children,$e($e({},e),{},{id:r,data:o,children:s})}));if(i)return r}function uC(e,t,n){if(e instanceof XM){var i=lC(e,t,n);return void 0!==i&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}if(e instanceof YM)return function(e,t,n){var i=!1,r=e.map((function(e){var r=e.id,a=t[r];if(void 0!==a&&"string"==typeof a&&(i=!0,r=a,null!==n))throw new Error("not supported");var o=uC(e.data,t,oC(n,r));return sC(n),i=i||void 0!==o,void 0===o&&(o=e.data),$e($e({},e),{},{id:r,data:o})}));if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}(e,t,n);if(Array.isArray(e)){var r=!1,a=e.map((function(e,i){var a=uC(e,t,oC(n,i));return sC(n),r=r||void 0!==a,void 0===a&&(a=e),a}));return r?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}if(e&&"object"==typeof e&&!GM(e)){for(var s={},l=!1,u=0,c=Object.entries(e);u<c.length;u++){var d=o(c[u],2),h=d[0],f=d[1];if("name"!==h&&"text"!==h){var p=t[h];if("string"==typeof p){if(null!==n)throw new Error("not supported");l=!0,h=p}var v=uC(f,t,oC(n,h));sC(n),l=l||void 0!==v,void 0===v&&(v=f),s[h]=v}else s[h]=f}return l?(Object.setPrototypeOf(s,Object.getPrototypeOf(e)),s):void 0}if("string"==typeof e){var m=t[e];if(void 0!==m){if(36!==e.length)throw new Error("for now you should only call this method when the key is a uuid");!function(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(n)}return m}}!function(e){e.apply=function(e,t){var n;return null!==(n=iC(e,t))&&void 0!==n?n:e},e.merge=function(e,t){return rC(e,t)},e.filterOp=function(e,t){for(var n=0,i=t.path,r=e;n<i.length&&void 0!==r;){if(void 0===(r=wC.zoomOnce(r,i[n])))return t;if(!QM(r))return;n+=1}if(void 0===r)return t;if(QM(r)){if(0===t.type){for(var a=$e({},t.props),o=0,s=Object.keys(r);o<s.length;o++){delete a[s[o]]}return $e($e({},t),{},{props:a})}if(1===t.type||4===t.type||7===t.type){var l=nC([t],r);return l?(console.log(l),l):t}return t}}}(KM||(KM={})),function(e){e.replaceProps=function(e,t){var n=wC.zoom(t,e.path);if("object"==typeof n){for(var i={},r=0,a=Object.keys(e.props);r<a.length;r++){var o=a[r];i[o]=n[o]}return $e($e({},e),{},{props:i})}return $e($e({},e),{},{props:{}})}}(JM||(JM={})),function(e){function t(e,t){for(var n=t.path,i=[];;){var r=void 0;if(e instanceof tC&&0===t.type&&(null===(r=e.runOp($e($e({},t),{},{path:n.slice(i.length)})))&&(r=void 0)),void 0===r&&i.length===n.length&&(r=e instanceof XM||e instanceof YM||e instanceof FM?e.runOp(t):qM.runOp(e,t)),void 0!==r){if(null!==r){for(var a=r.data,o=i.length-1;o>=0;o--){var s=n[o],l=i[o];if(l instanceof XM){if("number"==typeof s)throw new Error("illegal arg");a=l.modifyById(s,a)}else if(l instanceof YM){if("number"==typeof s)throw new Error("illegal arg");a=l.modifyById(s,a)}else if(l instanceof FM){if("number"==typeof s)throw new Error("illegal arg");a=l.modifyById(s,a)}else if(l instanceof tC){var c=$e($e({},l),{},Ke({},s,a));a=Object.setPrototypeOf(c,tC.prototype)}else{if("object"!=typeof l)return null;if(Array.isArray(l)){if("string"==typeof s&&(s=parseInt(s),isNaN(s)))throw new Error("Invalid path");var d=a;(a=u(l))[s]=d}else a=$e($e({},l),{},Ke({},s,a))}}return{data:a,actual:$e($e({},r.actual),{},{path:n}),reverse:$e($e({},r.reverse),{},{path:n})}}return null}var h=n[i.length],f=void 0;if(e instanceof XM){var p;if("number"==typeof h)throw new Error("");f=null===(p=e.get(h))||void 0===p?void 0:p.data}else if(e instanceof YM){var v;if("number"==typeof h)throw new Error("");f=null===(v=e.get(h))||void 0===v?void 0:v.data}else null!==e&&(f=e[h]);if(void 0===f)return null;i.push(e),e=f}}function n(e,t){for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!0;return!1}function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}e.drop=function(e,t){return $e($e({},e),{},{path:e.path.slice(t)})},e.applySimple=function(e,n){var i,r;return null!==(i=null===(r=t(e,n))||void 0===r?void 0:r.data)&&void 0!==i?i:e},e.apply=t,e.pathDisjoint=n,e.pathEq=i,e.commutative=function(e,t){return n(e.path,t.path)},e.subsumed=function(e,t){return!(0!==e.type||0!==t.type||!i(e.path,t.path))&&Object.keys(e.props).every((function(e){return void 0!==t.props[e]}))}}($M||($M={})),function(e){function t(e,t){var n,i=e,r=[],a=[],s=(0,x.Z)(t);try{for(s.s();!(n=s.n()).done;){var l=n.value;try{if(3===l.type){var c=wC.zoom(i,[].concat(u(l.path),[l.id])),d=$M.apply(i,$e($e({},l),{},{type:2}));if(null!==d){var h=o(aC(i=d.data,Ke({},l.id,c)),2),f=h[0],p=h[1];i=f;var v,m=(0,x.Z)(p);try{for(m.s();!(v=m.n()).done;){var g=v.value,L=g[g.length-1];g.splice(g.length-1,1),r.push({type:0,path:g,props:Ke({},L,c)}),a.push({type:0,path:g,props:Ke({},L,l.id)})}}catch(b){m.e(b)}finally{m.f()}a.push(d.reverse),r.push(d.actual)}}else{var y=$M.apply(i,l);null!==y&&(r.push(y.actual),i=y.data,a.push(y.reverse))}}catch(w){if(w instanceof UM)return null;throw w}}}catch(b){s.e(b)}finally{s.f()}return{data:i,actual:r,reverse:a.reverse()}}e.empty=function(){return[]},e.removePrefix=function(e,t){var n,i=[],r=(0,x.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=y(a.path),s=o[0],l=o.slice(1);s===t&&i.push($e($e({},a),{},{path:l}))}}catch(u){r.e(u)}finally{r.f()}return i},e.addPrefix=function(e,t){return e.map((function(e){return $e($e({},e),{},{path:[t].concat(u(e.path))})}))},e.concat=function(e,t){return[].concat(u(e),u(t))},e.compress=function(e,t){return[].concat(u(e.filter((function(e){return!t.some((function(t){return $M.subsumed(e,t)}))}))),u(t))},e.commutative=function(e,t){return e.every((function(e){return t.every((function(t){return $M.commutative(e,t)}))}))},e.applyAll=function(e,n){var i,r=(0,x.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=t(e,i.value);null!==a&&(e=a.data)}}catch(o){r.e(o)}finally{r.f()}return e},e.apply=t}(eC||(eC={}));var cC=Symbol(),dC=Symbol(),hC=Symbol(),fC=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,[{key:"reportOp",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=this;if(null!==t){i._current=t.data;for(var r=n;!(i instanceof _C);){var a=i._path,o=i._current;if(""!==a&&r.splice(0,0,a),null===(i=i._parent))return;i.update(a,o)}i.push(r,e,t.actual,t.reverse)}}},{key:"deleteChildren",value:function(e){if(this._children){var t=this._children[e];if(t){var n=t[hC];n&&n(),delete this._children[e]}}}}]),e}(),pC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._parent=e,a._path=i,a._current=r,a}return(0,d.Z)(n,[{key:"update",value:function(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=u(this._current),this._current[e]=t}else this._current=$e($e({},this._current),{},Ke({},e,t))}},{key:"runOp",value:function(e){this.reportOp(e,qM.runOp(this._current,e),e.path)}}]),n}(fC),vC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._parent=e,a._path=i,a._current=r,a}return(0,d.Z)(n,[{key:"update",value:function(e,t){this._current=$e($e({},this._current),{},Ke({},e,t)),Object.setPrototypeOf(this._current,FM.prototype)}},{key:"runOp",value:function(e){this.reportOp(e,this._current.runOp(e))}}]),n}(fC),mC={get:function(e,t){if(t===hC)return function(){e._parent=null};if(t===cC)return e._current;if(t===dC)return e;var n=e._current,i=e._children;if("push"===t&&Array.isArray(n))throw new Error("not supported to expand array");var r=void 0===i?void 0:i[t];if(void 0!==r)return r;var a=n[t],o=SC(e,t,a);return o!==a?(void 0===i&&(i={},e._children=i),i[t]=o,o):a},has:function(e,t){return t in e._current},ownKeys:function(e){return Reflect.ownKeys(e._current)},defineProperty:function(){throw Error("not supported")},getPrototypeOf:function(e){return Object.getPrototypeOf(e._current)},setPrototypeOf:function(){throw Error("not supported")},getOwnPropertyDescriptor:function(e,t){var n=e._current,i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[t]}}},gC=$e($e({},mC),{},{set:function(e,t,n){var i,r={type:0,props:Ke({},t,null!==(i=MC(n))&&void 0!==i?i:n)};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty:function(e,t){var n={type:0,props:Ke({},t,void 0)};return e.deleteChildren(t),e.runOp(n),!0}}),LC=$e($e({},mC),{},{set:function(e,t,n){return void 0===n?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:n})),!0},deleteProperty:function(e,t){return e.runOp({type:2,id:t}),!0}}),yC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._children={},a._parent=e,a._path=i,a._current=r,a[hC]=function(){a._parent=null},a}return(0,d.Z)(n,[{key:"unproxy",value:function(){return this._current}},{key:"update",value:function(e,t){this._current=this._current.modifyById(e,t)}},{key:"runOp",value:function(e){this.reportOp(e,this._current.runOp(e))}},{key:"randomId",value:function(){return this._current.randomId()}},{key:"isDescendantOf",value:function(e,t){return this._current.isDescendantOf(e,t)}},{key:"childrenOf",value:function(e){return this._current.childrenOf(e)}},{key:"traverse",value:function(e){var t=this;this._current.traverse((function(n,i){e(n,t.data(n))}))}},{key:"get",value:function(e){return this._current.get(e)}},{key:"parent",value:function(e){return this._current.parent(e)}},{key:"data",value:function(e){var t,n=this._current,i=this._children,r=void 0===i?void 0:i[e];if(void 0!==r)return r;var a=null===(t=n.get(e))||void 0===t?void 0:t.data,o=SC(this,e,a);return o!==a?(void 0===i&&(i={},this._children=i),i[e]=o,o):a}},{key:"add",value:function(e,t,n,i,r){this.runOp({type:7,parent:e,fi:t,id:n,data:i,children:r})}},{key:"move",value:function(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}},{key:"insertAfter",value:function(e,t,n){for(var i=this._current.insertAfterHelper(e,t,n.length),r=0;r<n.length;r++){var a=n[r];this.add(e,i[r],a.id,a.data,a.children)}}},{key:"insertBefore",value:function(e,t,n){for(var i=this._current.insertBeforeHelper(e,t,n.length),r=0;r<n.length;r++){var a=n[r];this.add(e,i[r],a.id,a.data,a.children)}}},{key:"moveAfter",value:function(e,t,n){for(var i=this._current.insertAfterHelper(e,t,n.length),r=0;r<n.length;r++){var a=n[r];this.move(e,i[r],a)}}},{key:"moveBefore",value:function(e,t,n){for(var i=this._current.insertBeforeHelper(e,t,n.length),r=0;r<n.length;r++){var a=n[r];this.move(e,i[r],a)}}},{key:"delete",value:function(e){this.deleteChildren(e),this.runOp({type:8,id:e})}},{key:"sortNext",value:function(e){return this._current.sortNext(e)}},{key:"sortPrevious",value:function(e){return this._current.sortPrevious(e)}},{key:"getAllSorted",value:function(e){return this._current.getAllSorted(e)}}]),n}(fC),bC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._children={},a._parent=e,a._path=i,a._current=r,a[hC]=function(){a._parent=null},a}return(0,d.Z)(n,[{key:"unproxy",value:function(){return this._current}},{key:"length",get:function(){return this._current.length}},{key:"forEach",value:function(e){for(var t=this.length,n=0;n<t;n++){var i=this._current[n].id,r=this._current[n].fi;e(this.data(this._current[n].id),i,r)}}},{key:"find",value:function(e){for(var t=this.length,n=0;n<t;n++){var i=this._current[n].id;if(e(this.data(i),i))return this.get(i)}}},{key:"update",value:function(e,t){this._current=this._current.modifyById(e,t)}},{key:"randomId",value:function(){return this._current.randomId()}},{key:"get",value:function(e){return $e($e({},this._current.get(e)),{},{data:this.data(e)})}},{key:"data",value:function(e){var t,n=this._current,i=this._children,r=void 0===i?void 0:i[e];if(void 0!==r)return r;var a=null===(t=n.get(e))||void 0===t?void 0:t.data,o=SC(this,e,a);return o!==a?(void 0===i&&(i={},this._children=i),i[e]=o,o):a}},{key:"runOp",value:function(e){this.reportOp(e,this._current.runOp(e))}},{key:"add",value:function(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}},{key:"move",value:function(e,t){this.runOp({type:6,fi:e,id:t})}},{key:"insertAfter",value:function(e,t){for(var n=this._current.insertAfterHelper(e,t.length),i=0;i<t.length;i++){var r=t[i];this.add(n[i],r.id,r.data)}}},{key:"insertBefore",value:function(e,t){for(var n=this._current.insertBeforeHelper(e,t.length),i=0;i<t.length;i++){var r=t[i];this.add(n[i],r.id,r.data)}}},{key:"moveAfter",value:function(e,t){for(var n=this._current.insertAfterHelper(e,t.length),i=0;i<t.length;i++){var r=t[i];this.move(n[i],r)}}},{key:"moveBefore",value:function(e,t){for(var n=this._current.insertBeforeHelper(e,t.length),i=0;i<t.length;i++){var r=t[i];this.move(n[i],r)}}},{key:"delete",value:function(e){this.deleteChildren(e),this.runOp({type:5,id:e})}}]),n}(fC);function xC(e,t,n){if(e.length>0){var i=e[e.length-1];if(0===i.type&&0===t.type&&wC.equal(i.path,n))return void Object.assign(i.props,t.props)}e.push($e($e({},t),{},{path:n}))}var wC,_C=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).ts=[],i.actual=[],i.reverse=[],i._current=e,i}return(0,d.Z)(n,[{key:"update",value:function(e,t){if(""!==e)throw new Error("");this._current=t}},{key:"push",value:function(e,t,n,i){xC(this.ts,t,e),xC(this.actual,n,e),xC(this.reverse,i,e)}},{key:"result",value:function(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}}]),n}(fC);function SC(e,t,n){return n instanceof XM?new yC(e,t,n):n instanceof YM?new bC(e,t,n):n instanceof FM?new Proxy(new vC(e,t,n),LC):null!==n&&"object"==typeof n?GM(n)?n:new Proxy(new pC(e,t,n),gC):n}function kC(e){var t=new _C(e);return[SC(t,"",e),t]}function AC(e,t){var n=o(kC(e),2),i=n[0],r=n[1];return t(i),r.result()}function MC(e){return e instanceof yC||e instanceof bC?e._current:null!==e&&"object"==typeof e?e[cC]:e}function CC(e,t){var n=[];if(!(t.length<=e.length))return null;for(var i=0;i<t.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}!function(e){function t(e,t){return(e instanceof XM||e instanceof yC)&&"string"==typeof t||(e instanceof YM||e instanceof bC)&&"string"==typeof t?e.data(t):"number"==typeof t&&Array.isArray(e)||"string"==typeof t&&"object"==typeof e&&null!==e?e[t]:void 0}function n(e,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i<n.length&&void 0!==e;)e=t(e,n[i]),i+=1;return e}e.equal=function(e,t){if(t.length!==e.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n+=1}return!0},e.removeOverridden=function(e,t,i){var r=n(i,e);if(void 0!==r&&"object"==typeof r&&null!==r){var a=$e({},t);return Object.keys(r).forEach((function(e){delete a[e]})),a}return t},e.zoomOnce=t,e.zoom=n}(wC||(wC={}));var EC,TC=(0,d.Z)((function e(){(0,c.Z)(this,e)})),PC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).id=e,i}return(0,d.Z)(n)}(TC),DC=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).data=e,i}return(0,d.Z)(n)}(TC);try{EC=new TextDecoder}catch(pK){}var OC,IC,RC,BC,NC,zC,FC,jC=0,UC=[],ZC=UC,VC=0,GC={},HC=0,WC=0,qC=[],XC={useRecords:!1,mapsAsObjects:!0},YC=(0,d.Z)((function e(){(0,c.Z)(this,e)})),QC=new YC;QC.name="MessagePack 0xC1";var KC=!1,JC=function(){function e(t){(0,c.Z)(this,e),t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}return(0,d.Z)(e,[{key:"unpack",value:function(t,n){var i=this;if(OC)return _E((function(){return SE(),i?i.unpack(t,n):e.prototype.unpack.call(XC,t,n)}));IC=n>-1?n:t.length,jC=0,VC=0,WC=0,BC=null,ZC=UC,NC=null,OC=t;try{FC=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw OC=null,t instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof e){if(GC=this,this.structures)return RC=this.structures,$C();(!RC||RC.length>0)&&(RC=[])}else GC=XC,(!RC||RC.length>0)&&(RC=[]);return $C()}},{key:"unpackMultiple",value:function(e,t){var n,i=0;try{KC=!0;var r=e.length,a=this?this.unpack(e,r):CE.unpack(e,r);if(!t){for(n=[a];jC<r;)i=jC,n.push($C());return n}for(t(a);jC<r;)if(i=jC,!1===t($C()))return}catch(r){throw r.lastPosition=i,r.values=n,r}finally{KC=!1,SE()}}},{key:"_mergeStructures",value:function(e,t){for(var n=0,i=(e=e||[]).length;n<i;n++){var r=e[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}for(var a in e.sharedLength=e.length,t||[])if(a>=0){var o=e[a],s=t[a];s&&(o&&((e.restoreStructures||(e.restoreStructures=[]))[a]=o),e[a]=s)}return this.structures=e}},{key:"decode",value:function(e,t){return this.unpack(e,t)}}]),e}();function $C(){try{if(!GC.trusted&&!KC){var e=RC.sharedLength||0;e<RC.length&&(RC.length=e)}var t=tE();if(jC==IC)RC.restoreStructures&&eE(),RC=null,OC=null,zC&&(zC=null);else{if(jC>IC){var n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}if(!KC)throw new Error("Data read, but end of buffer not reached")}return t}catch(t){throw RC.restoreStructures&&eE(),SE(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function eE(){for(var e in RC.restoreStructures)RC[e]=RC.restoreStructures[e];RC.restoreStructures=null}function tE(){var e,t=OC[jC++];if(t<160){if(t<128){if(t<64)return t;var n=RC[63&t]||GC.getStructures&&aE()[63&t];return n?(n.read||(n.read=iE(n,63&t)),n.read()):t}if(t<144){if(t-=128,GC.mapsAsObjects){for(var i={},r=0;r<t;r++)i[yE()]=tE();return i}for(var a=new Map,o=0;o<t;o++)a.set(tE(),tE());return a}t-=144;for(var s=new Array(t),l=0;l<t;l++)s[l]=tE();return s}if(t<192){var u=t-160;if(WC>=jC)return BC.slice(jC-HC,(jC+=u)-HC);if(0==WC&&IC<140){var c=u<16?vE(u):pE(u);if(null!=c)return c}return oE(u)}switch(t){case 192:return null;case 193:return NC?(e=tE())>0?NC[1].slice(NC.position1,NC.position1+=e):NC[0].slice(NC.position0,NC.position0-=e):QC;case 194:return!1;case 195:return!0;case 196:return mE(OC[jC++]);case 197:return e=FC.getUint16(jC),jC+=2,mE(e);case 198:return e=FC.getUint32(jC),jC+=4,mE(e);case 199:return gE(OC[jC++]);case 200:return e=FC.getUint16(jC),jC+=2,gE(e);case 201:return e=FC.getUint32(jC),jC+=4,gE(e);case 202:if(e=FC.getFloat32(jC),GC.useFloat32>2){var d=kE[(127&OC[jC])<<1|OC[jC+1]>>7];return jC+=4,(d*e+(e>0?.5:-.5)>>0)/d}return jC+=4,e;case 203:return e=FC.getFloat64(jC),jC+=8,e;case 204:return OC[jC++];case 205:return e=FC.getUint16(jC),jC+=2,e;case 206:return e=FC.getUint32(jC),jC+=4,e;case 207:return GC.int64AsNumber?(e=4294967296*FC.getUint32(jC),e+=FC.getUint32(jC+4)):e=FC.getBigUint64(jC),jC+=8,e;case 208:return FC.getInt8(jC++);case 209:return e=FC.getInt16(jC),jC+=2,e;case 210:return e=FC.getInt32(jC),jC+=4,e;case 211:return GC.int64AsNumber?(e=4294967296*FC.getInt32(jC),e+=FC.getUint32(jC+4)):e=FC.getBigInt64(jC),jC+=8,e;case 212:if(114==(e=OC[jC++]))return bE(63&OC[jC++]);var h=qC[e];if(h)return h.read?(jC++,h.read(tE())):h.noBuffer?(jC++,h()):h(OC.subarray(jC,++jC));throw new Error("Unknown extension "+e);case 213:return 114==(e=OC[jC])?(jC++,bE(63&OC[jC++],OC[jC++])):gE(2);case 214:return gE(4);case 215:return gE(8);case 216:return gE(16);case 217:return e=OC[jC++],WC>=jC?BC.slice(jC-HC,(jC+=e)-HC):sE(e);case 218:return e=FC.getUint16(jC),WC>=(jC+=2)?BC.slice(jC-HC,(jC+=e)-HC):lE(e);case 219:return e=FC.getUint32(jC),WC>=(jC+=4)?BC.slice(jC-HC,(jC+=e)-HC):uE(e);case 220:return e=FC.getUint16(jC),jC+=2,dE(e);case 221:return e=FC.getUint32(jC),jC+=4,dE(e);case 222:return e=FC.getUint16(jC),jC+=2,hE(e);case 223:return e=FC.getUint32(jC),jC+=4,hE(e);default:if(t>=224)return t-256;if(void 0===t){var f=new Error("Unexpected end of MessagePack data");throw f.incomplete=!0,f}throw new Error("Unknown MessagePack token "+t)}}var nE=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function iE(e,t){function n(){if(n.count++>2){var i=e.read=new Function("r","return function(){return {"+e.map((function(e){return nE.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()"})).join(",")+"}}")(tE);return 0===e.highByte&&(e.read=rE(t,e.read)),i()}for(var r={},a=0,o=e.length;a<o;a++){r[e[a]]=tE()}return r}return n.count=0,0===e.highByte?rE(t,n):n}var rE=function(e,t){return function(){var n=OC[jC++];if(0===n)return t();var i=e<32?-(e+(n<<5)):e+(n<<5),r=RC[i]||aE()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=iE(r,e)),r.read()}};function aE(){var e=_E((function(){return OC=null,GC.getStructures()}));return RC=GC._mergeStructures(e,RC)}var oE=cE,sE=cE,lE=cE,uE=cE;function cE(e){var t;if(e<16&&(t=vE(e)))return t;if(e>64&&EC)return EC.decode(OC.subarray(jC,jC+=e));var n=jC+e,i=[];for(t="";jC<n;){var r=OC[jC++];if(0===(128&r))i.push(r);else if(192===(224&r)){var a=63&OC[jC++];i.push((31&r)<<6|a)}else if(224===(240&r)){var o=63&OC[jC++],s=63&OC[jC++];i.push((31&r)<<12|o<<6|s)}else if(240===(248&r)){var l=(7&r)<<18|(63&OC[jC++])<<12|(63&OC[jC++])<<6|63&OC[jC++];l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l)}else i.push(r);i.length>=4096&&(t+=fE.apply(String,i),i.length=0)}return i.length>0&&(t+=fE.apply(String,i)),t}function dE(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=tE();return t}function hE(e){if(GC.mapsAsObjects){for(var t={},n=0;n<e;n++)t[yE()]=tE();return t}for(var i=new Map,r=0;r<e;r++)i.set(tE(),tE());return i}var fE=String.fromCharCode;function pE(e){for(var t=jC,n=new Array(e),i=0;i<e;i++){var r=OC[jC++];if((128&r)>0)return void(jC=t);n[i]=r}return fE.apply(String,n)}function vE(e){if(e<4){if(e<2){if(0===e)return"";var t=OC[jC++];return(128&t)>1?void(jC-=1):fE(t)}var n=OC[jC++],i=OC[jC++];if((128&n)>0||(128&i)>0)return void(jC-=2);if(e<3)return fE(n,i);var r=OC[jC++];return(128&r)>0?void(jC-=3):fE(n,i,r)}var a=OC[jC++],o=OC[jC++],s=OC[jC++],l=OC[jC++];if((128&a)>0||(128&o)>0||(128&s)>0||(128&l)>0)jC-=4;else{if(e<6){if(4===e)return fE(a,o,s,l);var u=OC[jC++];return(128&u)>0?void(jC-=5):fE(a,o,s,l,u)}if(e<8){var c=OC[jC++],d=OC[jC++];if((128&c)>0||(128&d)>0)return void(jC-=6);if(e<7)return fE(a,o,s,l,c,d);var h=OC[jC++];return(128&h)>0?void(jC-=7):fE(a,o,s,l,c,d,h)}var f=OC[jC++],p=OC[jC++],v=OC[jC++],m=OC[jC++];if((128&f)>0||(128&p)>0||(128&v)>0||(128&m)>0)jC-=8;else{if(e<10){if(8===e)return fE(a,o,s,l,f,p,v,m);var g=OC[jC++];return(128&g)>0?void(jC-=9):fE(a,o,s,l,f,p,v,m,g)}if(e<12){var L=OC[jC++],y=OC[jC++];if((128&L)>0||(128&y)>0)return void(jC-=10);if(e<11)return fE(a,o,s,l,f,p,v,m,L,y);var b=OC[jC++];return(128&b)>0?void(jC-=11):fE(a,o,s,l,f,p,v,m,L,y,b)}var x=OC[jC++],w=OC[jC++],_=OC[jC++],S=OC[jC++];if((128&x)>0||(128&w)>0||(128&_)>0||(128&S)>0)jC-=12;else{if(e<14){if(12===e)return fE(a,o,s,l,f,p,v,m,x,w,_,S);var k=OC[jC++];return(128&k)>0?void(jC-=13):fE(a,o,s,l,f,p,v,m,x,w,_,S,k)}var A=OC[jC++],M=OC[jC++];if(!((128&A)>0||(128&M)>0)){if(e<15)return fE(a,o,s,l,f,p,v,m,x,w,_,S,A,M);var C=OC[jC++];return(128&C)>0?void(jC-=15):fE(a,o,s,l,f,p,v,m,x,w,_,S,A,M,C)}jC-=14}}}}function mE(e){return GC.copyBuffers?Uint8Array.prototype.slice.call(OC,jC,jC+=e):OC.subarray(jC,jC+=e)}function gE(e){var t=OC[jC++];if(qC[t])return qC[t](OC.subarray(jC,jC+=e));throw new Error("Unknown extension type "+t)}var LE=new Array(4096);function yE(){var e=OC[jC++];if(!(e>=160&&e<192))return jC--,tE();if(e-=160,WC>=jC)return BC.slice(jC-HC,(jC+=e)-HC);if(!(0==WC&&IC<180))return oE(e);var t,n=4095&(e<<5^(e>1?FC.getUint16(jC):e>0?OC[jC]:0)),i=LE[n],r=jC,a=jC+e-3,o=0;if(i&&i.bytes==e){for(;r<a;){if((t=FC.getUint32(r))!=i[o++]){r=1879048192;break}r+=4}for(a+=3;r<a;)if((t=OC[r++])!=i[o++]){r=1879048192;break}if(r===a)return jC=r,i.string;a-=3,r=jC}for(i=[],LE[n]=i,i.bytes=e;r<a;)t=FC.getUint32(r),i.push(t),r+=4;for(a+=3;r<a;)t=OC[r++],i.push(t);var s=e<16?vE(e):pE(e);return i.string=null!=s?s:oE(e)}var bE=function(e,t){var n=tE(),i=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);var r=RC[e];return r&&r.isShared&&((RC.restoreStructures||(RC.restoreStructures=[]))[e]=r),RC[e]=n,n.read=iE(n,i),n.read()},xE="object"==typeof self?self:global;qC[0]=function(){},qC[0].noBuffer=!0,qC[101]=function(){var e=tE();return(xE[e[0]]||Error)(e[1])},qC[105]=function(e){var t=FC.getUint32(jC-4);zC||(zC=new Map);var n,i=OC[jC],r={target:n=i>=144&&i<160||220==i||221==i?[]:{}};zC.set(t,r);var a=tE();return r.used?Object.assign(n,a):(r.target=a,a)},qC[112]=function(e){var t=FC.getUint32(jC-4),n=zC.get(t);return n.used=!0,n.target},qC[115]=function(){return new Set(tE())};var wE=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((function(e){return e+"Array"}));function _E(e){var t,n=IC,i=jC,r=VC,a=HC,o=WC,s=BC,l=ZC,c=zC,d=NC,h=new Uint8Array(OC.slice(0,IC)),f=RC,p=RC.slice(0,RC.length),v=GC,m=KC,g=e();return IC=n,jC=i,VC=r,HC=a,WC=o,BC=s,ZC=l,zC=c,NC=d,OC=h,KC=m,(t=RC=f).splice.apply(t,[0,RC.length].concat(u(p))),GC=v,FC=new DataView(OC.buffer,OC.byteOffset,OC.byteLength),g}function SE(){OC=null,zC=null,RC=null}qC[116]=function(e){var t=e[0],n=wE[t];if(!n)throw new Error("Could not find typed array for code "+t);return new xE[n](Uint8Array.prototype.slice.call(e,1).buffer)},qC[120]=function(){var e=tE();return new RegExp(e[0],e[1])},qC[98]=function(e){var t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],n=jC;jC+=t-4,(NC=[tE(),tE()]).position0=0,NC.position1=0;var i=jC;jC=n;try{return tE()}finally{jC=i}},qC[255]=function(e){return 4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid")};for(var kE=new Array(147),AE=0;AE<256;AE++)kE[AE]=+("1e"+Math.floor(45.15-.30103*AE));var ME,CE=new JC({useRecords:!1}),EE=(CE.unpack,CE.unpackMultiple,CE.unpack,new Float32Array(1));new Uint8Array(EE.buffer,0,4);try{ME=new TextEncoder}catch(vK){}var TE,PE,DE,OE,IE,RE=typeof Buffer<"u",BE=RE?Buffer.allocUnsafeSlow:Uint8Array,NE=RE?Buffer:Uint8Array,zE=RE?4294967296:2144337920,FE=0,jE=null,UE=/[\u0080-\uFFFF]/,ZE=Symbol("record-id"),VE=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,e)).offset=0;var r,a,s,l,u,d=0,h=NE.prototype.utf8Write?function(e,t,n){return DE.utf8Write(e,t,n)}:!(!ME||!ME.encodeInto)&&function(e,t){return ME.encodeInto(e,DE.subarray(t)).written},f=(0,Ye.Z)(i);e||(e={});var p=e&&e.sequential,v=e.structures||e.saveStructures,m=e.maxSharedStructures;if(null==m&&(m=v?32:0),m>8160)throw new Error("Maximum maxSharedStructure is 8160");var g=e.maxOwnStructures;null==g&&(g=v?32:64),p&&!e.saveStructures&&(i.structures=[]);var L=m>32||g+m>64,y=m+64,b=m+g+64;if(b>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");var w=[],_=0,S=0;i.pack=i.encode=function(e,t){if(DE||(DE=new BE(8192),OE=new DataView(DE.buffer,0,8192),FE=0),(IE=DE.length-10)-FE<2048?(DE=new BE(DE.length),OE=new DataView(DE.buffer,0,DE.length),IE=DE.length-10,FE=0):FE=FE+7&2147483640,r=FE,u=f.structuredClone?new Map:null,f.bundleStrings?(jE=["",""],DE[FE++]=214,DE[FE++]=98,jE.position=FE-r,FE+=4):jE=null,a=f.structures){a.uninitialized&&(a=f._mergeStructures(f.getStructures()));var n=a.sharedLength||0;if(n>m)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+a.sharedLength);if(!a.transitions){a.transitions=Object.create(null);for(var i=0;i<n;i++){var o=a[i];if(o){for(var c=void 0,h=a.transitions,v=0,g=o.length;v<g;v++){var L=o[v];(c=h[L])||(c=h[L]=Object.create(null)),h=c}h[ZE]=i+64}}d=n}p||(a.nextId=n+64)}s&&(s=!1),l=a||[];try{if(k(e),jE){OE.setUint32(jE.position+r,FE-jE.position-r);var y=jE;jE=null,k(y[0]),k(y[1])}if(f.offset=FE,u&&u.idsToInsert){(FE+=6*u.idsToInsert.length)>IE&&M(FE),f.offset=FE;var b=function(e,t){var n,i=6*t.length,r=e.length-i;for(t.sort((function(e,t){return e.offset>t.offset?1:-1}));n=t.pop();){var a=n.offset,o=n.id;e.copyWithin(a+i,a,r);var s=a+(i-=6);e[s++]=214,e[s++]=105,e[s++]=o>>24,e[s++]=o>>16&255,e[s++]=o>>8&255,e[s++]=255&o,r=a}return e}(DE.subarray(r,FE),u.idsToInsert);return u=null,b}return t&YE?(DE.start=r,DE.end=FE,DE):DE.subarray(r,FE)}finally{if(a){if(S<10&&S++,_>1e4)a.transitions=null,S=0,_=0,w.length>0&&(w=[]);else if(w.length>0&&!p){for(var x=0,A=w.length;x<A;x++)w[x][ZE]=0;w=[]}if(s&&f.saveStructures){var C=a.sharedLength||m;a.length>C&&(a=a.slice(0,C));var E=DE.subarray(r,FE);return!1===f.saveStructures(a,d)?(f._mergeStructures(f.getStructures()),f.pack(e)):(d=C,E)}}t&QE&&(FE=r)}};var k=function e(t){FE>IE&&(DE=M(FE));var n,a=typeof t;if("string"===a){var s,l=t.length;if(jE&&l>=8&&l<4096){var c=UE.test(t);return jE[c?0:1]+=t,DE[FE++]=193,void e(c?-l:l)}s=l<32?1:l<256?2:l<65536?3:5;var d=3*l;if(FE+d>IE&&(DE=M(FE+d)),l<64||!h){var f,p,v,m=FE+s;for(f=0;f<l;f++)(p=t.charCodeAt(f))<128?DE[m++]=p:p<2048?(DE[m++]=p>>6|192,DE[m++]=63&p|128):55296===(64512&p)&&56320===(64512&(v=t.charCodeAt(f+1)))?(p=65536+((1023&p)<<10)+(1023&v),f++,DE[m++]=p>>18|240,DE[m++]=p>>12&63|128,DE[m++]=p>>6&63|128,DE[m++]=63&p|128):(DE[m++]=p>>12|224,DE[m++]=p>>6&63|128,DE[m++]=63&p|128);n=m-FE-s}else n=h(t,FE+s,d);n<32?DE[FE++]=160|n:n<256?(s<2&&DE.copyWithin(FE+2,FE+1,FE+1+n),DE[FE++]=217,DE[FE++]=n):n<65536?(s<3&&DE.copyWithin(FE+3,FE+2,FE+2+n),DE[FE++]=218,DE[FE++]=n>>8,DE[FE++]=255&n):(s<5&&DE.copyWithin(FE+5,FE+3,FE+3+n),DE[FE++]=219,OE.setUint32(FE,n),FE+=4),FE+=n}else if("number"===a)if(t>>>0===t)t<64?DE[FE++]=t:t<256?(DE[FE++]=204,DE[FE++]=t):t<65536?(DE[FE++]=205,DE[FE++]=t>>8,DE[FE++]=255&t):(DE[FE++]=206,OE.setUint32(FE,t),FE+=4);else if(t>>0===t)t>=-32?DE[FE++]=256+t:t>=-128?(DE[FE++]=208,DE[FE++]=t+256):t>=-32768?(DE[FE++]=209,OE.setInt16(FE,t),FE+=2):(DE[FE++]=210,OE.setInt32(FE,t),FE+=4);else{var g;if((g=i.useFloat32)>0&&t<4294967296&&t>=-2147483648){var L;if(DE[FE++]=202,OE.setFloat32(FE,t),g<4||(L=t*kE[(127&DE[FE])<<1|DE[FE+1]>>7])>>0===L)return void(FE+=4);FE--}DE[FE++]=203,OE.setFloat64(FE,t),FE+=8}else if("object"===a)if(t){if(u){var y=u.get(t);if(y){if(!y.id){var b=u.idsToInsert||(u.idsToInsert=[]);y.id=b.push(y)}return DE[FE++]=214,DE[FE++]=112,OE.setUint32(FE,y.id),void(FE+=4)}u.set(t,{offset:FE-r})}var w=t.constructor;if(w===Object)A(t,!0);else if(w===Array){(n=t.length)<16?DE[FE++]=144|n:n<65536?(DE[FE++]=220,DE[FE++]=n>>8,DE[FE++]=255&n):(DE[FE++]=221,OE.setUint32(FE,n),FE+=4);for(var _=0;_<n;_++)e(t[_])}else if(w===Map){(n=t.size)<16?DE[FE++]=128|n:n<65536?(DE[FE++]=222,DE[FE++]=n>>8,DE[FE++]=255&n):(DE[FE++]=223,OE.setUint32(FE,n),FE+=4);var S,k=(0,x.Z)(t);try{for(k.s();!(S=k.n()).done;){var C=o(S.value,2),E=C[0],T=C[1];e(E),e(T)}}catch(R){k.e(R)}finally{k.f()}}else{for(var P,D=function(){var n=PE[O];if(t instanceof n){var r=TE[O];if(r.write)return r.type&&(DE[FE++]=212,DE[FE++]=r.type,DE[FE++]=0),e(r.write.call((0,Ye.Z)(i),t)),{v:void 0};var a,o=DE,s=OE,l=FE;DE=null;try{a=r.pack.call((0,Ye.Z)(i),t,(function(e){return DE=o,o=null,(FE+=e)>IE&&M(FE),{target:DE,targetView:OE,position:FE-e}}),e)}finally{o&&(OE=s,FE=l,IE=(DE=o).length-10)}return a&&(a.length+FE>IE&&M(a.length+FE),FE=function(e,t,n,i){var r=e.length;switch(r){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:r<256?(t[n++]=199,t[n++]=r):r<65536?(t[n++]=200,t[n++]=r>>8,t[n++]=255&r):(t[n++]=201,t[n++]=r>>24,t[n++]=r>>16&255,t[n++]=r>>8&255,t[n++]=255&r)}return t[n++]=i,t.set(e,n),n+=r,n}(a,DE,FE,r.type)),{v:void 0}}},O=0,I=TE.length;O<I;O++)if(P=D())return P.v;A(t,!t.hasOwnProperty)}}else DE[FE++]=192;else if("boolean"===a)DE[FE++]=t?195:194;else if("bigint"===a){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))DE[FE++]=211,OE.setBigInt64(FE,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)DE[FE++]=207,OE.setBigUint64(FE,t);else{if(!i.largeBigIntToFloat)throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");DE[FE++]=203,OE.setFloat64(FE,Number(t))}FE+=8}else if("undefined"===a)i.encodeUndefinedAsNil?DE[FE++]=192:(DE[FE++]=212,DE[FE++]=0,DE[FE++]=0);else{if("function"!==a)throw new Error("Unknown type: "+a);e(i.writeFunction&&i.writeFunction())}},A=!1===i.useRecords?i.variableMapSize?function(e){var t,n=Object.keys(e),i=n.length;i<16?DE[FE++]=128|i:i<65536?(DE[FE++]=222,DE[FE++]=i>>8,DE[FE++]=255&i):(DE[FE++]=223,OE.setUint32(FE,i),FE+=4);for(var r=0;r<i;r++)k(t=n[r]),k(e[t])}:function(e,t){DE[FE++]=222;var n=FE-r;FE+=2;var i=0;for(var a in e)(t||e.hasOwnProperty(a))&&(k(a),k(e[a]),i++);DE[n+++r]=i>>8,DE[n+r]=255&i}:function(e){for(var t,n=Object.keys(e),r=l.transitions||(l.transitions=Object.create(null)),a=0,o=0,u=n.length;o<u;o++){var c=n[o];(t=r[c])||(t=r[c]=Object.create(null),a++),r=t}var d=r[ZE];if(d)d>=96&&L?(DE[FE++]=96+(31&(d-=96)),DE[FE++]=d>>5):DE[FE++]=d;else{(d=l.nextId)||(d=64),d<y&&i.shouldShareStructure&&!i.shouldShareStructure(n)?((d=l.nextOwnId)<b||(d=y),l.nextOwnId=d+1):(d>=b&&(d=y),l.nextId=d+1);var h=n.highByte=d>=96&&L?d-96>>5:-1;r[ZE]=d,l[d-64]=n,d<y?(n.isShared=!0,l.sharedLength=d-63,s=!0,h>=0?(DE[FE++]=96+(31&d),DE[FE++]=h):DE[FE++]=d):(h>=0?(DE[FE++]=213,DE[FE++]=114,DE[FE++]=96+(31&d),DE[FE++]=h):(DE[FE++]=212,DE[FE++]=114,DE[FE++]=d),a&&(_+=S*a),w.length>=g&&(w.shift()[ZE]=0),w.push(r),k(n))}for(var f=0,p=n.length;f<p;f++)k(e[n[f]])},M=function(e){var t;if(e>16777216){if(e-r>zE)throw new Error("Packed buffer would be larger than maximum buffer size");t=Math.min(zE,4096*Math.round(Math.max((e-r)*(e>67108864?1.25:2),4194304)/4096))}else t=1+(Math.max(e-r<<2,DE.length-1)>>12)<<12;var n=new BE(t);return OE=new DataView(n.buffer,0,t),DE.copy?DE.copy(n,0,r,e):n.set(DE.slice(r,e)),FE-=r,r=0,IE=n.length-10,DE=n};return i}return(0,d.Z)(n,[{key:"useBuffer",value:function(e){DE=e,OE=new DataView(DE.buffer,DE.byteOffset,DE.byteLength),FE=0}}]),n}(JC);function GE(e,t,n,i){var r=e.byteLength;if(r+1<256){var a=n(4+r),o=a.target,s=a.position;o[s++]=199,o[s++]=r+1}else if(r+1<65536){var l=n(5+r);o=l.target,s=l.position;o[s++]=200,o[s++]=r+1>>8,o[s++]=r+1&255}else{var u=n(7+r),c=(o=u.target,s=u.position,u.targetView);o[s++]=201,c.setUint32(s,r+1),s+=4}o[s++]=116,o[s++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function HE(e,t){var n=e.byteLength;if(n<256){var i=t(n+2),r=i.target,a=i.position;r[a++]=196,r[a++]=n}else if(n<65536){var o=t(n+3);r=o.target,a=o.position;r[a++]=197,r[a++]=n>>8,r[a++]=255&n}else{var s=t(n+5),l=(r=s.target,a=s.position,s.targetView);r[a++]=198,l.setUint32(a,n),a+=4}r.set(e,a)}function WE(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");PE.unshift(e.Class),TE.unshift(e)}!function(e){e.unpack?qC[e.type]=e.unpack:qC[e.type]=e}(e)}PE=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,YC],TE=[{pack:function(e,t,n){var i=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&i>=0&&i<4294967296){var r=t(6),a=r.target,o=r.targetView,s=r.position;a[s++]=214,a[s++]=255,o.setUint32(s,i)}else if(i>0&&i<17179869184){var l=t(10),u=l.target,c=l.targetView,d=l.position;u[d++]=215,u[d++]=255,c.setUint32(d,4e6*e.getMilliseconds()+(i/1e3/4294967296>>0)),c.setUint32(d+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());var h=t(3),f=h.target,p=(h.targetView,h.position);f[p++]=212,f[p++]=255,f[p++]=255}else{var v=t(15),m=v.target,g=v.targetView,L=v.position;m[L++]=199,m[L++]=12,m[L++]=255,g.setUint32(L,1e6*e.getMilliseconds()),g.setBigInt64(L+4,BigInt(Math.floor(i)))}}},{pack:function(e,t,n){var i=Array.from(e),r=t(this.structuredClone?3:0),a=r.target,o=r.position;this.structuredClone&&(a[o++]=212,a[o++]=115,a[o++]=0),n(i)}},{pack:function(e,t,n){var i=t(this.structuredClone?3:0),r=i.target,a=i.position;this.structuredClone&&(r[a++]=212,r[a++]=101,r[a++]=0),n([e.name,e.message])}},{pack:function(e,t,n){var i=t(this.structuredClone?3:0),r=i.target,a=i.position;this.structuredClone&&(r[a++]=212,r[a++]=120,r[a++]=0),n([e.source,e.flags])}},{pack:function(e,t){this.structuredClone?GE(e,16,t):HE(RE?Buffer.from(e):new Uint8Array(e),t)}},{pack:function(e,t){var n=e.constructor;n!==NE&&this.structuredClone?GE(e,wE.indexOf(n.name),t):HE(e,t)}},{pack:function(e,t){var n=t(1);n.target[n.position]=193}}];var qE,XE=new VE({useRecords:!1}),YE=(XE.pack,XE.pack,512),QE=1024,KE=new VE({structuredClone:!0});function JE(e){if(GM(e))return e;if(Array.isArray(e))return e.map(JE);if("object"==typeof e&&null!==e){var t,n={},i=(0,x.Z)(Object.keys(e).sort());try{for(i.s();!(t=i.n()).done;){var r=t.value;n[r]=JE(e[r])}}catch(a){i.e(a)}finally{i.f()}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}return e}WE({Class:FM.prototype.constructor,type:1,write:function(e){return $e({},e)},read:function(e){return Object.setPrototypeOf(e,FM.prototype),e}}),WE({Class:YM.prototype.constructor,type:2,write:function(e){return u(e)},read:function(e){return Object.setPrototypeOf(e,YM.prototype),e}}),WE({Class:XM.prototype.constructor,type:3,write:function(e){return u(e)},read:function(e){return Object.setPrototypeOf(e,XM.prototype),e}}),WE({Class:PC.prototype.constructor,type:4,write:function(e){return e.id},read:function(e){return new PC(e)}}),WE({Class:DC.prototype.constructor,type:5,write:function(e){return e.data},read:function(e){return new DC(e)}}),WE({Class:tC.prototype.constructor,type:6,write:function(e){return $e({},e)},read:function(e){return Object.setPrototypeOf(e,tC.prototype),e}}),function(e){function t(e){return KE.pack(e)}e.serialize=t,e.deserialize=function(e){return KE.unpack(e)},e.checksum=function(e){return function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}(t(JE(e))).toString()}}(qE||(qE={}));var $E,eT,tT,nT,iT,rT,aT,oT,sT,lT,uT,cT,dT,hT=(Ke(Wu={},"LookAt",[]),Ke(Wu,"Follow",["Create"]),Ke(Wu,"DragDrop",["Transition","Animation","Audio","Create"]),Ke(Wu,"MouseHover",["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition"]),Ke(Wu,"Scroll",["Transition","Animation","Create"]),Ke(Wu,"Start",["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition"]),Ke(Wu,"Conditional",["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"MouseDown",["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"MouseUp",["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"MousePress",["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"KeyDown",["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"KeyUp",["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Ke(Wu,"KeyPress",["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset"]),Ke(Wu,"GameControl",["Transition","Animation","Audio","Video","Create"]),Ke(Wu,"Collision",["Transition","Animation","Audio","Video","Create","Destroy","Reset"]),Ke(Wu,"Trigger",["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"]),Wu);(eT=$E||($E={})).is=function(e){return"MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"KeyPress"===e.type},eT.defaultData=function(e){return"MouseDown"===e||"MouseUp"===e||"MousePress"===e?{type:e,mode:"Object",disabled:!1,toggle:!1,actions:new YM}:{type:e,disabled:!1,key:void 0,toggle:!1,actions:new YM}},function(e){e.propertyDefaultData=function(e){return{type:"Property",value:[null!==e&&void 0!==e?e:null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}}(tT||(tT={})),function(e){e.comparisonDefaultData=function(e){return{type:"Comparison",operator:"==",lOperand:tT.propertyDefaultData(e),rOperand:$e({},tT.valueDefaultData)}},e.distanceDefaultData=function(e){return{type:"Distance",toObject:null!==e&&void 0!==e?e:null,fromObject:null!==e&&void 0!==e?e:null,distance:200}},e.stateDefaultData=function(e,t){return{type:"State",object:null!==e&&void 0!==e?e:null,state:null!==t&&void 0!==t?t:null}}}(nT||(nT={})),function(e){e.is=function(e){return"Conditional"===e.type},e.defaultData=function(e){return{type:"Conditional",disabled:!1,inActions:new YM,outActions:new YM,condition:nT.distanceDefaultData(e)}}}(iT||(iT={})),function(e){e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new YM,drop:new YM}}}(rT||(rT={})),function(e){e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new YM}}(aT||(aT={})),function(e){e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5}}(oT||(oT={})),function(e){e.is=function(e){return"MouseHover"===e.type},e.defaultData=function(){return{type:"MouseHover",disabled:!1,actions:new YM}}}(sT||(sT={})),function(e){e.is=function(e){return"Scroll"===e.type},e.defaultData=function(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new YM}}}(lT||(lT={})),function(e){e.is=function(e){return"Start"===e.type},e.defaultData=function(){return{type:"Start",disabled:!1,actions:new YM}}}(uT||(uT={})),function(e){e.is=function(e){return"Collision"===e.type},e.defaultData=function(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new YM}}}(cT||(cT={})),function(e){e.is=function(e){return"Trigger"===e.type},e.defaultData=function(e,t){return{type:"Trigger",disabled:!1,toggle:!1,target:"all",triggeringObjects:[],actions:new YM,triggerZone:"box",position:t.toArray(),rotation:[0,0,0],size:e.toArray(),radius:e.length()/2,helperVisible:!0}}}(dT||(dT={}));var fT,pT,vT,mT,gT,LT,yT,bT,xT,wT,_T,ST,kT,AT,MT="personal camera",CT="a218fcc3-276b-49b9-b485-49037fd14f5f",ET=5526619;!function(e){e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}}(fT||(fT={})),function(e){e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},e.div=function(e,t){return[e[0]/t[0],e[1]/t[1],e[2]/t[2]]},e.mul=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2]]},e.dist=function(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n]}}(pT||(pT={})),function(e){e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n,e[3]+(t[3]-e[3])*n]}}(vT||(vT={})),function(e){e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.isEqual=function(e,t){for(var n=0;n<16;n++)if(e[n]!==t[n])return!1;return!0},e.simplify=function(t){return null!==t&&void 0!==t?t:e.identity},e.applyMatrix4=function(e,t){for(var n=t.slice(0),i=0,r=t.length;i<r;i+=3){var a=e[3]*t[i]+e[7]*t[i+1]+e[11]*t[i+2]+e[15];n[i]=(e[0]*t[i]+e[4]*t[i+1]+e[8]*t[i+2]+e[12])/a,n[i+1]=(e[1]*t[i]+e[5]*t[i+1]+e[9]*t[i+2]+e[13])/a,n[i+2]=(e[2]*t[i]+e[6]*t[i+1]+e[10]*t[i+2]+e[14])/a}return n}}(mT||(mT={})),function(e){e.isRGB=function(e){return"object"==typeof e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:1}},e.clone=function(e){return{r:e.r,g:e.g,b:e.b}},e.fromHex=function(e){return{r:((e=Math.floor(e))>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255}},e.toHex=function(e){return 65536*Math.round(255*e.r)+256*Math.round(255*e.g)+Math.round(255*e.b)},e.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},e.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n}}}(gT||(gT={})),function(e){e.white=$e($e({},gT.white),{},{a:1}),e.transparent=$e($e({},gT.white),{},{a:0}),e.from0to1=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]}},e.fromHexAndA=function(e,t){return $e($e({},gT.fromHex(e)),{},{a:t})},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}},e.equals=function(e,t){return gT.equals(e,t)&&e.a===t.a},e.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n,a:e.a+(t.a-e.a)*n}}}(LT||(LT={})),function(e){e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}}(yT||(yT={})),function(e){e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}}(bT||(bT={})),function(e){e.defaultData={control1:[.5,0],control2:[.5,1]}}(xT||(xT={})),function(e){e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]}(wT||(wT={})),function(e){e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function(t){return e.all.includes(t)}}(_T||(_T={})),function(e){e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function(e){return"PerspectiveCamera"===e.type?e.perspective.zoom:e.orthographic.zoom}}(ST||(ST={})),function(e){e.defaultData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:2*Math.max(e[0],e[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[e[0]+e[0]*t,0,0]},grid:{count:[2,2,2],size:e.map((function(e){return e*(1+t)})),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}},e.merge=function(e,t){var n=$e({},e);if(FT.forEach((function(i){var r;Object.assign(n,Ke({},i,null!==(r=t[i])&&void 0!==r?r:e[i]))})),n.radial=$e({},e.radial),t.radial){var i=e.radial,r=t.radial;jT.forEach((function(e){var t;Object.assign(n.radial,Ke({},e,null!==(t=r[e])&&void 0!==t?t:i[e]))}))}if(n.linear=$e({},e.linear),t.linear){var a=e.linear,o=t.linear;UT.forEach((function(e){var t;Object.assign(n.linear,Ke({},e,null!==(t=o[e])&&void 0!==t?t:a[e]))}))}if(n.grid=$e({},e.grid),t.grid){var s=e.grid,l=t.grid;ZT.forEach((function(e){var t;Object.assign(n.grid,Ke({},e,null!==(t=l[e])&&void 0!==t?t:s[e]))}))}if(n.toObject=$e({},e.toObject),t.toObject){var u=e.toObject,c=t.toObject;VT.forEach((function(e){var t;Object.assign(n.toObject,Ke({},e,null!==(t=c[e])&&void 0!==t?t:u[e]))}))}if(n.randomnessObject=$e({},e.randomnessObject),t.randomnessObject){var d=e.randomnessObject,h=t.randomnessObject;GT.forEach((function(e){var t;Object.assign(n.randomnessObject,Ke({},e,null!==(t=h[e])&&void 0!==t?t:d[e]))}))}return n}}(kT||(kT={})),function(e){e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};var t=["radial","linear","grid","toObject","randomnessObject"];e.toOps=function(e,n){var i=[];void 0!==e.count&&i.push({type:0,path:n,props:{count:e.count}});var r,a=(0,x.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=e[o];s&&Object.keys(s).length>0&&i.push({type:0,path:[].concat(u(n),[o]),props:s})}}catch(l){a.e(l)}finally{a.f()}return i}}(AT||(AT={}));var TT,PT,DT,OT,IT,RT,BT,NT,zT,FT=["count"],jT=["radius","start","end","position","scale","rotation"],UT=["position","scale","rotation"],ZT=["count","size"],VT=["count","position","scale","rotation"],GT=["strength","scale","rotation","position","movement","seed","freqScale"];!function(e){e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function(t){return e.all.includes(t)}}(TT||(TT={})),function(e){e.defaultData=function(e){return function(e){if("PointLight"===e)return{type:e,color:LT.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if("SpotLight"===e)return{type:e,color:LT.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===e)return{type:e,color:LT.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(e)}}(PT||(PT={})),function(e){e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]}}(DT||(DT={})),function(e){e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function(e,t){return e.castShadow===t.castShadow&&e.receiveShadow===t.receiveShadow}}(OT||(OT={})),function(e){e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function(e,t){return e.flatShading===t.flatShading&&e.side===t.side&&e.wireframe===t.wireframe}}(IT||(IT={})),function(e){e.defaultData=$e($e({},IT.defaultData),OT.defaultData)}(RT||(RT={})),function(e){e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7}(BT||(BT={})),function(e){e.is=function(e){return"texture"===e||"video"===e||"color"===e||"depth"===e||"normal"===e||"gradient"===e||"noise"===e||"fresnel"===e||"rainbow"===e||"toon"===e||"outline"===e||"transmission"===e||"matcap"===e||"displace"===e||"pattern"===e||"light"===e}}(NT||(NT={})),function(e){e.is=function(e){return"phong"===e||"toon"===e||"lambert"===e||"physical"===e}}(zT||(zT={}));var HT,WT,qT,XT,YT=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],QT=["wrapping","image","video","name"];!function(e){e.patch=function(e,t){var n=t.texture,i=Li(t,qu);if(Object.assign(e,i),n){var r=e.texture;r&&Object.assign(r,n)}},e.defaultData=function(e,t){return"light"===e&&t?function(e){var t={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(e){case"phong":return $e($e({},t),{},{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6});case"toon":return $e($e({},t),{},{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1});case"lambert":return $e($e({},t),{},{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0});case"physical":return $e($e({},t),{},{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0})}}(t):function(e){var t={alpha:1,mode:0,isMask:!1,visible:!0};switch(e){case"texture":return $e($e({},t),{},{type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1});case"video":return $e($e({},t),{},{type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:BT.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1});case"color":return $e($e({},t),{},{type:"color",color:gT.fromHex(ET)});case"depth":return $e($e({},t),{},{type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200});case"normal":return $e($e({},t),{},{type:"normal",cnormal:[1,1,1]});case"gradient":return $e($e({},t),{},{type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]});case"noise":return $e($e({},t),{},{type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:$e($e({},gT.fromHex(6710886)),{},{a:1}),colorB:$e($e({},gT.fromHex(6710886)),{},{a:1}),colorC:$e($e({},gT.fromHex(16777215)),{},{a:1}),colorD:$e($e({},gT.fromHex(16777215)),{},{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1});case"fresnel":return $e($e({},t),{},{type:"fresnel",color:LT.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1});case"rainbow":return $e($e({},t),{},{type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]});case"toon":return $e($e({},t),{},{type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:LT.fromHexAndA(0,0),offset:[0,0,0]});case"outline":return $e($e({},t),{},{type:"outline",outlineColor:LT.fromHexAndA(0,1),contourColor:LT.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0});case"matcap":return $e($e({},t),{},{type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}});case"transmission":return $e($e({},t),{},{type:"transmission",thickness:10,ior:1.5,roughness:1});case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return $e($e({},t),{},{type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:$e($e({},gT.fromHex(0)),{},{a:1}),colorB:$e($e({},gT.fromHex(16777215)),{},{a:1}),frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6})}}(e)}}(HT||(HT={})),function(e){function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer2",i=new YM;return i.push({fi:0,data:HT.defaultData("light",e),id:t}),i.push({fi:1,data:HT.defaultData("color"),id:n}),{layers:i}}e.isMergable=function(e){return!e.layers.some((function(e){return"texture"===e.data.type&&0!==e.data.projection||"depth"===e.data.type&&!e.data.isWorldSpace||"noise"===e.data.type||"displace"===e.data.type}))},e.getHash=function(e){var t="";return e.layers.forEach((function(e){Object.entries(e.data).forEach((function(e){var n=o(e,2),i=n[0],r=n[1];t+="".concat(i).concat(r),Array.isArray(r)?r.forEach((function(e){return t+="".concat(e)})):"object"==typeof r?Object.values(r).forEach((function(e){t+="".concat("number"==typeof e?e.toFixed(4):e)})):t+="".concat(r)}))})),t},e.defaultEmptyData=function(){return{layers:new YM}},e.defaultData=function(){return t("phong",arguments.length>0&&void 0!==arguments[0]?arguments[0]:"layer1",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer2")},e.withName=function(e,t){return $e($e({},e),{},{name:t})},e.defaultTwoLayerData=t,e.defaultTwoLayerTextureData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phong",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",r=HT.defaultData("texture");Object.assign(r.texture,{image:e});var a=new YM;return a.push({fi:0,data:r,id:n}),a.push({fi:1,data:HT.defaultData("light",t),id:i}),{layers:a}},e.defaultTwoLayerVideoTextureData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phong",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",r=HT.defaultData("video");Object.assign(r.texture,{video:e});var a=new YM;return a.push({fi:0,data:r,id:n}),a.push({fi:1,data:HT.defaultData("light",t),id:i}),{layers:a}}}(WT||(WT={})),function(e){e.defaultData=function(){return{points:new YM,roundness:0,shapeHoles:[],isClosed:!1}}}(qT||(qT={})),function(e){e.defaultData=function(){return{points:new YM,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}}(XT||(XT={}));var KT,JT={type:"Ellipse",width:100,height:100,spikes:16,angle:360,innerRadius:0};!function(e){e.merge=function(e,t){var n=$e({},e);return iP.forEach((function(i){var r;Object.assign(n,Ke({},i,null!==(r=t[i])&&void 0!==r?r:e[i]))})),n}}(KT||(KT={}));var $T,eP,tP,nP={shape:JT,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},iP=["depth","offset","angle","twist","startScale","endScale"];!function(e){e.is2DParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e},e.isParametricMesh=function(e){return"PolygonGeometry"===e||"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"PathGeometry"===e||"VectorGeometry"===e||"ConeGeometry"===e||"CubeGeometry"===e||"CylinderGeometry"===e||"DodecahedronGeometry"===e||"HelixGeometry"===e||"IcosahedronGeometry"===e||"LatheGeometry"===e||"PyramidGeometry"===e||"SphereGeometry"===e||"PlaneGeometry"===e||"BackdropGeometry"===e||"TorusGeometry"===e||"TorusKnotGeometry"===e||"BooleanGeometry"===e||"TextGeometry"===e}}($T||($T={})),function(e){e.merge=function(e,t){var n=$e({},e);return Object.assign(n,t),"PathGeometry"===n.type&&"extrusion"in t&&t.extrusion&&(n.extrusion=$e({},e.extrusion),Object.assign(n.extrusion,KT.merge(n.extrusion,t.extrusion))),n}}(eP||(eP={})),function(e){e.defaultData=function(e){if("RectangleGeometry"===e)return{width:320,height:320,type:e,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("PathGeometry"===e)return{type:e,width:1,height:1,depth:1,path:XT.defaultData(),extrusion:nP};if("VectorGeometry"===e)return{width:1,height:1,type:e,subdivisions:12,shape:qT.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===e)return{type:e,operation:2,width:0,height:0,depth:0,phongAngle:35};if("TextGeometry"===e)return{type:e,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if("SphereGeometry"===e)return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI};throw new Error("not implemented")}}(tP||(tP={}));var rP,aP,oP,sP,lP,uP,cP,dP,hP,fP,pP,vP,mP,gP,LP,yP,bP,xP,wP,_P,SP,kP,AP,MP,CP,EP,TP,PP,DP,OP,IP,RP,BP=["width","height","depth"];function NP(e){e.layers.forEach((function(e){if("depth"===e.type&&void 0!==e.colorA){for(var t=e.colorA,n=e.colorB,i=[[t.r,t.g,t.b,t.a],[n.r,n.g,n.b,n.a]],r=[0,1],a=2;a<10;a++)i.push(i[1]),r.push(1);var o=$e($e({},cM(MC(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode")),{},{near:Math.max(0,e.near),far:Math.max(0,e.far),colors:i,steps:r,num:2,direction:[1,0,0],smooth:!1,gradientType:1});Object.assign(e,o)}else if("depth"===e.type&&1===e.gradientType&&(e.near<0||e.far<0)){var s=$e($e({},MC(e)),{},{near:Math.max(e.near,0),far:Math.max(e.far,0)});Object.assign(e,s)}}))}function zP(e,t){Object.values(e.shared.materials).forEach((function(e){return t(e)}))}function FP(e,t){e.scene.objects.traverse((function(e,n){"materials"in n?n.materials.forEach((function(e,i){void 0===e&&(n.materials[i]=WT.defaultData(),e=n.materials[i]),"string"!=typeof e&&t(e)})):"material"in n&&"string"!=typeof n.material&&t(n.material),"overrides"in n&&Object.values(n.overrides).forEach((function(e){e.material&&"string"!=typeof e.material&&t(e.material)}))}))}function jP(e){void 0===e.layers&&Object.assign(e,WT.defaultTwoLayerData("lambert"))}function UP(e){!e.layers||e.layers.forEach((function(e){if("depth"===e.type&&10===e.colors.length){var t=u(e.colors);t.push(e.colors[9]);var n=u(e.steps);n.push(e.steps[9]);var i=$e($e({},MC(e)),{},{colors:t,steps:n});Object.assign(e,i)}}))}function ZP(e){e.scene.objects.traverse((function(e,t){"materials"in t?t.materials.forEach((function(e){"string"!=typeof e&&UP(e)})):"material"in t&&"string"!=typeof t.material&&UP(t.material)})),Object.values(e.shared.materials).forEach((function(e){return UP(e)}))}function VP(e){e.layers&&e.layers.forEach((function(e){"depth"===e.type&&void 0!==e.num&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)}))}function GP(e){e.layers&&e.layers.forEach((function(e){(function(e){return"displace"!==e.type})(e)&&void 0===e.isMask&&(e.isMask=!1),("texture"===e.type||"video"===e.type)&&void 0===e.blending&&(e.blending=0),("noise"===e.type||"displace"===e.type&&"noise"===e.displacementType)&&(void 0===e.voronoiStyle&&(e.voronoiStyle=0),void 0===e.highCut&&(e.highCut=1),void 0===e.lowCut&&(e.lowCut=0),void 0===e.smoothness&&(e.smoothness=.3),void 0===e.seed&&(e.seed=0),void 0===e.quality&&(e.quality=1))}))}function HP(e){var t,n=null===(t=e.layers.find((function(e){return"light"===e.type})))||void 0===t?void 0:t.data;if("basic"===(null===n||void 0===n?void 0:n.category)){var i=HT.defaultData("light","phong"),r=n;Object.assign(r,i),r.visible=!1}}function WP(e){zP(e,HP),FP(e,HP)}function qP(e){e.layers.forEach((function(e){"light"===e.type&&"toon"!==e.category&&void 0===e.occlusion&&(e.occlusion=!0)}))}function XP(e){e.layers&&e.layers.forEach((function(e){"light"===e.type&&void 0===e.bumpMapIntensity&&(e.bumpMapIntensity=5)}))}function YP(e,t){if(t<1&&(FP(e,NP),zP(e,NP),e.schema=1),t<2&&(function(e){Object.assign(e.scene.publish,{orbitControls:$e($e({},kP.defaultData),MC(e.scene.publish.orbitControls))})}(e),e.schema=2),t<3&&(function(e){function t(e){if(e.layers)for(var t=0,n=Object.values(e.layers);t<n.length;t++){var i=n[t];if(i)for(var r=0,a=Object.entries(i);r<a.length;r++){var s=o(a[r],2),l=s[0],u=s[1];if((YT.includes(l)||"boolean"==typeof u)&&delete i[l],"texture"===l)for(var c=0,d=Object.entries(u);c<d.length;c++){var h=o(d[c],2),f=h[0],p=h[1];(QT.includes(f)||"boolean"==typeof p)&&delete u[f]}}}}e.scene.objects.traverse((function(e,n){n.states.forEach((function(e){var n=e;n.material?t(n.material):n.materials&&n.materials.forEach((function(e){t(e)}))}))}))}(e),e.schema=3),t<4&&(function(e){e.scene.publish.withBackground=!0}(e),e.schema=4),t<5&&(function(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}(e),e.schema=5),t<6&&(function(e){e.scene.objects.traverse((function(e,t){var n=t.cloner;n&&(n.radial.scale=n.radial.scale.map((function(e){return e+1})),n.linear.scale=n.linear.scale.map((function(e){return e+1})))}))}(e),e.schema=6),t<7&&(function(e){e.scene.objects.traverse((function(e,t){var n=t.geometry;n&&("DodecahedronGeometry"===n.type||"IcosahedronGeometry"===n.type)&&(n.detail=Math.round(n.detail))}))}(e),e.schema=7),t<8&&(e.schema=8),t<9&&(ZP(e),e.schema=9),t<10&&(function(e){e.scene.objects.traverse((function(e,t){"Mesh"===t.type&&("BooleanGeometry"===t.geometry.type||"SubdivGeometry"===t.geometry.type)&&(t.geometry.phongAngle=35)}))}(e),e.schema=10),t<11&&(function(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((function(e,t){("DirectionalLight"===t.type||"SpotLight"===t.type)&&(t.shadowResolution=1024,t.shadowRadius=1,t.depth=1e5)})),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),t<12&&(ZP(e),e.schema=12),t<13&&(function(e){e.shared.audios=hM({},FM.prototype)}(e),e.schema=13),t<14&&(function(e){var t=e.shared.materials;Object.entries(t).forEach((function(e){var n=o(e,2),i=n[0];n[1].layers||Object.assign(t,Ke({},i,{name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]}))}))}(e),e.schema=14),t<15&&(function(e){Object.entries(MC(e.shared.images)).filter((function(e){return!1===e[1].asset})).map((function(e){return e[0]})).forEach((function(t){delete e.shared.images[t]})),Object.entries(MC(e.shared.audios)).filter((function(e){return!1===e[1].asset})).map((function(e){return e[0]})).forEach((function(t){delete e.shared.audios[t]}))}(e),e.schema=15),t<16&&(function(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),t<17&&(FP(e,VP),zP(e,VP),e.schema=17),t<18&&(FP(e,jP),zP(e,jP),e.schema=18),t<19&&(function(e){Object.assign(e.scene.publish.settings,{video:$e($e({},AP.defaultData.settings.video),MC(e.scene.publish.settings.video))})}(e),e.schema=19),t<20&&(function(e){e.shared.fonts=hM({},FM.prototype)}(e),function(e){var t=[];e.scene.objects.traverse((function(n,i){var r=i;if("TextFrame"===r.type){var a=WT.defaultTwoLayerData("phong"),o="string"==typeof r.color?e.shared.colors[r.color]:r.color;a.layers[1].data.color={r:o.r,g:o.g,b:o.b},a.layers[1].data.alpha=r.alpha;var s=function(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}(r.font);void 0===e.shared.fonts[s]&&(e.shared.fonts[s]={name:s});var l=$e($e($e({name:r.name},pP.defaultData),gP.defaultData),{},{flatShading:!1,wireframe:!1,geometry:$e($e({},tP.defaultData("TextGeometry")),{},{width:r.width,height:r.height,font:s,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:1.40625*r.fontSize,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1}),material:a,states:MC(r.states),events:MC(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}),u=MC(e.scene.objects).parent(n);e.scene.objects.insertAfter(null!==u&&void 0!==u?u:null,n,[{id:n+"new",data:l,children:[]}]),t.push(n)}})),t.forEach((function(t){e.scene.objects.delete(t)}))}(e),e.schema=20),t<21&&(function(e){var t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((function(e,n){n.events.forEach((function(e){if(t[Number(e.type)])if(Object.assign(e,{type:t[Number(e.type)]}),"Audio"===e.type&&"audioEvent"in e&&(Object.assign(e,{playAudio:e.audioEvent}),delete e.audioEvent),"GameControl"===e.type)Object.assign(e,{gameActions:{idle:new YM,move:new YM,jump:new YM}});else{var n=new YM;Object.assign(e,{actions:n}),("MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type)&&"url"in e&&n.push({fi:0,id:rf.generateUUID(),data:{type:"Link",url:e.url,delay:0}}),"targets"in e&&(e.targets.forEach((function(e,t,i){var r={easing:e.easing,duration:e.duration};6===e.easing?Object.assign(r,cM(e,"mass","stiffness","damping","velocity")):5===e.easing&&Object.assign(r,{control1:$e({},e.control1),control2:$e({},e.control2)});var a={repeat:e.repeat?-1:0,delay:e.delay,delayDirection:e.delayDirection,direction:e.cycle&&e.rewind?"pingpong-rewind":e.cycle?"pingpong":"normal"},o=$e($e({state:e.state},a),r),s={allowSlerp:!0,type:"Transition",object:e.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new YM({fi:0,id:rf.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:rf.generateUUID(),data:o})};n.push({fi:i,id:t,data:s})})),delete e.targets)}}))}))}(e),function(e){e.scene.objects.traverse((function(e,t){function n(e,n){var i=new YM,r=[];if(t.events.forEach((function(e,t,a){var o;"Audio"===e.type&&e.trigger===n&&(r.push(t),"play"===e.interaction?o=$e($e({},cM(e,"interaction","audio","delay","volume","loop")),{},{triggerAfter:"after"in e?e.after:void 0,toggle:"after"in e?e.toggle:void 0,type:"Audio"}):("pause"===e.interaction||"stop"===e.interaction)&&(o=$e($e({},cM(e,"interaction","delay","object","playAudio")),{},{type:"Audio"})),o&&i.push({fi:a,id:t,data:o}))})),r.forEach((function(e){return t.events.delete(e)})),i.length){var a,o=null===(a=t.events.find((function(t){return t.type===e})))||void 0===a?void 0:a.data;o?"actions"in o&&o.actions.insertBefore(null,i):t.events.insertBefore(null,[{id:rf.generateUUID(),data:{type:e,actions:i}}])}}n("Start","start"),n("MouseDown","mouseDown"),n("MouseUp","mouseUp"),n("KeyDown","keyDown"),n("KeyUp","keyUp")}))}(e),e.schema=21),t<22&&(WP(e),e.schema=22),t<23&&(function(e){e.scene.objects.traverse((function(e,t){"Mesh"===t.type&&"SubdivGeometry"===t.geometry.type&&(t.geometry.scaleBaked||(t.geometry.scaleBaked=[1,1,1]))}))}(e),e.schema=23),t<24&&(function(e){e.scene.objects.traverse((function(e,t){("Empty"===t.type||"Mesh"===t.type)&&t.cloner&&!t.cloner.randomnessObject&&!t.cloner.toObject&&!t.cloner.randomness&&(t.cloner=$e($e({},t.cloner),{},{toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}))}))}(e),e.schema=24),(t<25||void 0===e.shared.videos)&&(function(e){e.shared.videos=hM({},FM.prototype)}(e),t<25&&(e.schema=25)),t<26&&(function(e){e.scene.objects.traverse((function(t,n){var i=e.scene.objects.unproxy().parent(t);if(i){var r=MC(e.scene.objects.data(i));r&&"Mesh"===r.type&&"BooleanGeometry"===r.geometry.type&&"Mesh"===n.type&&(n.visible=!0!==MC(n).booleanExclude)}}))}(e),e.schema=26),t<27&&(function(e){e.scene.objects.traverse((function(e,t){if("Mesh"===t.type){var n=t;"NonParametricGeometry"===t.geometry.type?void 0!==n.material&&delete n.material:void 0!==n.materials&&delete n.materials}}))}(e),e.schema=27),t<28&&(WP(e),e.schema=28),t<29&&(function(e){function t(e){Object.setPrototypeOf(e,tC.prototype),e.texture&&Object.setPrototypeOf(e.texture,tC.prototype)}function n(e){for(var n in Object.setPrototypeOf(e,tC.prototype),e)t(e[n])}e.scene.objects.traverse((function(e,t){t.states.forEach((function(e){var t=e;if(t.material){var i=MC(t.material).layers;n(i),t.material.layers=i}if(t.materials)for(var r=0;r<t.materials.length;r++){var a=t.materials[r],o=MC(a).layers;n(o),a.layers=o}}))}))}(e),e.schema=29),t<30&&(function(e){e.scene.objects.traverse((function(e,t){"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&!("material"in t)&&!("materials"in t)&&(t.material=WT.defaultTwoLayerData("phong"))}))}(e),e.schema=30),t<31&&(function(e){void 0===e.scene.publish.orbitControls.autoZoom&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((function(e,t){("OrthographicCamera"===t.type||"PerspectiveCamera"===t.type)&&(void 0===t.orthographic.autoZoom&&(t.orthographic.autoZoom=!1),void 0===t.orthographic.autoZoomFrustumSize&&(t.orthographic.autoZoomFrustumSize=790))}))}(e),e.schema=31),t<33&&(function(e){e.scene.objects.traverse((function(e,t){void 0===t.pathSnapping&&(t.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),void 0===t.pathSnapping.offset&&(t.pathSnapping.offset=0)}))}(e),e.schema=33),t<34&&(function(e){void 0===e.scene.publish.mouseEventTarget&&(e.scene.publish.mouseEventTarget="canvas"),void 0===e.scene.publish.settings.web.hint&&(e.scene.publish.settings.web.hint=!1)}(e),e.schema=34),t<35&&(function(e){var t=e.scene.publish.settings.video;"gif"===t.format&&t.fps>48&&(t.fps=15)}(e),e.schema=35),t<36&&(function(e){e.scene.objects.traverse((function(e,t){t.events.forEach((function(e){"GameControl"===e.type&&(e.resetYPosition=Math.abs(e.resetYPosition-t.position[1]))}))}))}(e),e.schema=36),t<37&&(function(e){var t=e.scene.environment.usePhysics;e.scene.objects.traverse((function(e,n){t&&null===n.physics?n.collision=!1:n.collision="visibility"}))}(e),e.schema=37),t<38&&(FP(e,GP),zP(e,GP),e.schema=38),t<39&&(function(e){e.scene.objects.traverse((function(e,t){t.events.forEach((function(e){"GameControl"===e.type&&(e.navmesh=RP.defaultDataThirdPerson.navmesh)}))}))}(e),e.schema=39),t<40&&(function(e){e.scene.styles||(e.scene.styles=EP.defaultData())}(e),e.schema=40),t<41&&(function(e){void 0===e.scene.environment.ambientLight.occlusion&&(e.scene.environment.ambientLight.occlusion=!1),void 0===e.scene.environment.ambientLight.aoFullRes&&(e.scene.environment.ambientLight.aoFullRes=!1),void 0===e.scene.environment.ambientLight.radius&&(e.scene.environment.ambientLight.radius=256),void 0===e.scene.environment.ambientLight.bias&&(e.scene.environment.ambientLight.bias=.5),void 0===e.scene.environment.ambientLight.aoColor&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),FP(e,qP),zP(e,qP)}(e),e.schema=41),t<42&&(function(e){e.scene.objects.traverse((function(e,t){t.events.forEach((function(e){"GameControl"===e.type&&Object.assign(e.gameActions,{run:new YM})}))}))}(e),e.schema=42),t<43&&(function(e){e.scene.objects.traverse((function(e,t){t.events.forEach((function(e){"GameControl"===e.type&&(e.keyAssignments=[].concat(u(e.keyAssignments),[["run","\u21e7"],["none","Ctrl"]]))}))}))}(e),e.schema=43),t<99){var n;FP(e,XP),zP(e,XP),null===e.scene.publish.playCamera&&(e.scene.publish.playCamera=MT);var i=MC(e.scene.objects),r=e.scene.objects;e.scene.publish.playPage=CT,r.insertBefore(null,null,[{id:CT,data:$e($e({},wP.defaultData),{},{backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:cM(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:cM(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:$e($e({},uP.defaultData),cM(e.scene.environment,"usePhysics","gravity")),camera:null!==(n=MC(e.scene.ownerCamera))&&void 0!==n?n:wP.defaultData.camera,name:"Scene"}),children:[]}]);var a,s=(0,x.Z)(i);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.id!==PP.TRASH_CAN_ID&&r.move(CT,l.fi,l.id)}}catch(h){s.e(h)}finally{s.f()}var c=0,d=0;e.shared.penumbraSize&&e.scene.objects.traverse((function(t,n){var i;"DirectionalLight"===n.type?(n.penumbraSize=e.shared.penumbraSize[Math.min(c,2)],c+=1):"SpotLight"===n.type&&(n.penumbraSize=e.shared.penumbraSize[3+Math.min(d,1)],d+=1),(void 0===n.physics||null===n.physics)&&"Instance"!==n.type&&(n.physics={},Object.assign(n.physics,DT.defaultData)),void 0!==n.physics&&(n.physics.enabled=null!==(i=n.collision)&&void 0!==i?i:"visibility",delete n.collision)})),e.schema=99}}function QP(e){e.layers&&e.layers.forEach((function(e){"light"===e.type&&void 0===e.alphaOverride&&(e.alphaOverride=1)}))}!function(e){e.defaultData={enabled:!1,useBackgroundColor:!1,color:gT.white,near:.1,far:2e3}}(rP||(rP={})),function(e){var t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:$e($e({},t),{},{blendFunction:16,granularity:15}),bloom:$e($e({},t),{},{blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3}),chromaticAberration:$e($e({},t),{},{offset:[2,2]}),vignette:$e($e({},t),{},{darkness:1,offset:0}),hueSaturation:$e($e({},t),{},{hue:3,saturation:0}),brightnessContrast:$e($e({},t),{},{brightness:.25,contrast:0}),depthOfField:$e($e({},t),{},{focalLength:2,focusDistance:2,bokehScale:2}),noise:$e($e({},t),{},{blendFunction:16})}}(aP||(aP={})),function(e){e.defaultData={softShadowQuality:"low"}}(oP||(oP={})),function(e){e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75}}(sP||(sP={})),function(e){e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}}}(lP||(lP={})),function(e){e.defaultData={usePhysics:!1,gravity:-10}}(uP||(uP={})),function(e){e.defaultData={playCamera:MT,gameControlObject:null}}(cP||(cP={})),function(e){e.defaultData={backgroundColor:LT.fromHexAndA(2960946,1),postprocessing:aP.defaultData,fog:rP.defaultData,globalPhysics:uP.defaultData,ambient:sP.defaultData,ao:lP.defaultData,shadow:oP.defaultData,publish:cP.defaultData}}(dP||(dP={})),function(e){e.isComponentRelated=function(e){return"Component"===e||"Instance"===e},e.isEmptyOrComponent=function(e){return"Empty"===e||"Instance"===e}}(hP||(hP={})),function(e){e.identity=$e($e({},yT.identity),{},{hiddenMatrix:mT.identity}),e.fromObject=function(e){return{position:e.position,rotation:e.rotation,scale:e.scale,hiddenMatrix:e.hiddenMatrix}},e.merge=function(e,t){return{position:(null===t||void 0===t?void 0:t.position)||e.position,rotation:(null===t||void 0===t?void 0:t.rotation)||e.rotation,scale:(null===t||void 0===t?void 0:t.scale)||e.scale,hiddenMatrix:(null===t||void 0===t?void 0:t.hiddenMatrix)||e.hiddenMatrix}},e.diff=function(e,t){return function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];void 0===e[i]&&delete e[i]}return e}({position:pT.isEqual(e.position,t.position)?void 0:t.position,rotation:pT.isEqual(e.rotation,t.rotation)?void 0:t.rotation,scale:pT.isEqual(e.scale,t.scale)?null:t.scale,hiddenMatrix:mT.isEqual(e.hiddenMatrix,t.hiddenMatrix)?void 0:t.hiddenMatrix})}}(fP||(fP={})),function(e){e.defaultData=$e($e({states:new YM,events:new YM,visible:!0,raycastLock:!1,physics:DT.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"}},fP.identity),{},{cloner:null})}(pP||(pP={})),function(e){e.defaultData=$e({type:"Empty"},pP.defaultData)}(vP||(vP={})),function(e){e.defaultData=$e({type:"Component"},pP.defaultData)}(mP||(mP={})),function(e){e.defaultData=$e($e({type:"Mesh"},pP.defaultData),RT.defaultData)}(gP||(gP={})),function(e){e.defaultData=$e($e($e({},pP.defaultData),fP.identity),{},{position:[0,0,ST.DefaultTargetOffset]},ST.defaultData)}(LP||(LP={})),function(e){e.defaultData=function(e){return $e($e({},pP.defaultData),PT.defaultData(e))},e.defaultDirectionalLightData=$e($e({},e.defaultData("DirectionalLight")),{},{position:[200,300,300],name:"Directional Light",intensity:.7})}(yP||(yP={})),function(e){function t(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n<t.length;){var i=e?e[t[n]]:void 0;if(t.length===n+1)return i;if(!i)return;e=i.descendants,n+=1}}e.resolveWithDes=t,e.resolve=function(e,n){var i=t(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);if(i){var r=Object.keys(i);if(1===r.length&&"descendants"===r[0])return}return i}}(bP||(bP={})),function(e){function t(e,t){return $e($e($e({},pP.defaultData),t),{},{component:e,overrides:new tC,physics:void 0,events:void 0,type:"Instance"})}e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"],e.ofComponent=t,e.fromComponentData=function(e){var n=fP.fromObject(e.data);return t(e.id,n)}}(xP||(xP={})),function(e){e.defaultData=$e($e($e({type:"Page"},pP.defaultData),{},{physics:$e($e({},DT.defaultData),{},{fusedBody:!1})},dP.defaultData),{},{camera:LP.defaultData})}(wP||(wP={})),function(e){e.defaultCamera=$e({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:mT.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:DT.defaultData,states:new YM,events:new YM,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0}},ST.defaultData),e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject=$e($e($e({name:"Rectangle"},pP.defaultData),gP.defaultData),{},{geometry:tP.defaultData("RectangleGeometry"),material:WT.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultBooleanObject=$e($e($e({name:"Boolean"},pP.defaultData),gP.defaultData),{},{geometry:tP.defaultData("BooleanGeometry"),material:WT.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultTextObject=$e($e($e({name:"Text"},pP.defaultData),gP.defaultData),{},{geometry:tP.defaultData("TextGeometry"),material:WT.defaultTwoLayerData("phong","layer1","layer2")})}(_P||(_P={})),function(e){e.newEmpty=function(e,t){var n={name:t};return"Mesh"===e.type?(n.geometry={},"material"in e&&(n.material={layers:new tC}),"materials"in e&&(n.materials=e.materials.map((function(e){return{layers:new tC}})))):_T.is(e.type)&&(n.perspective={},n.orthographic={}),n},e.toOps=function(e,t){var n,i=[],r={orthographic:0,perspective:0,geometry:0};function a(e,t){for(var n=0,r=Object.entries(t.layers);n<r.length;n++){var a=o(r[n],2),s=a[0],l=a[1],c=l.texture,d=Li(l,Xu);if(void 0!==c&&Object.keys(c).length>0){var h={path:[].concat(u(e),["layers",s,"texture"]),props:c,type:0};i.push(h)}if(Object.keys(d).length>0){var f={path:[].concat(u(e),["layers",s]),props:d,type:0};i.push(f)}}}for(var s=0,l=Object.entries(t);s<l.length;s++){var c=o(l[s],2),d=c[0],h=c[1];if("name"!==d)if("cloner"===d)i.push.apply(i,u(AT.toOps(h,["cloner"])));else if("pathSnapping"===d)i.push({path:[d],props:{slide:h.slide,offset:h.offset},type:0});else if("material"===d)a(["material"],h);else if("materials"===d)for(var f=0,p=Object.entries(h);f<p.length;f++){var v=o(p[f],2);a(["materials",v[0]],v[1])}else if(0===r[d]){if("geometry"===d&&void 0!==h.extrusion){var m={path:[d,"extrusion"],props:h.extrusion,type:0};i.push(m),delete(h=$e({},h)).extrusion}if(Object.keys(h).length>0){var g={path:[d],props:h,type:0};i.push(g)}}else void 0===n&&(n={path:[],props:{},type:0},i.push(n)),n.props[d]=h}return i},e.patch=function(e,t){var n,i,r,a,s,l,u,c;if(void 0===t)return e;var d=$e({},e);if(Object.assign(d,fP.merge(d,t)),Object.assign(d,{pathSnapping:Object.assign({},d.pathSnapping,{slide:null!==(n=null!==(i=null===(r=t.pathSnapping)||void 0===r?void 0:r.slide)&&void 0!==i?i:null===(a=d.pathSnapping)||void 0===a?void 0:a.slide)&&void 0!==n?n:0,offset:null!==(s=null!==(l=null===(u=t.pathSnapping)||void 0===u?void 0:u.offset)&&void 0!==l?l:null===(c=d.pathSnapping)||void 0===c?void 0:c.offset)&&void 0!==s?s:0})}),_T.is(e.type)){var h,f;d.orthographic=$e({},d.orthographic),d.perspective=$e({},d.perspective);var p=t;void 0!==(null===(h=p.orthographic)||void 0===h?void 0:h.zoom)&&(d.orthographic.zoom=p.orthographic.zoom),void 0!==(null===(f=p.perspective)||void 0===f?void 0:f.zoom)&&(d.perspective.zoom=p.perspective.zoom),void 0!==p.isUpVectorFlipped&&(d.isUpVectorFlipped=p.isUpVectorFlipped),void 0!==p.targetOffset&&(d.targetOffset=p.targetOffset)}else if("Mesh"===e.type)"geometry"in t&&Object.assign(d,{geometry:eP.merge(d.geometry,t.geometry)}),(t.material||t.materials)&&(d=function(e,t){if(void 0===t)return e;var n=$e({},e);return"material"in n&&"material"in t&&t.material&&(n.material=AC(n.material,(function(e){if("string"!=typeof e)for(var n=0,i=Object.entries(t.material.layers);n<i.length;n++){var r=o(i[n],2),a=r[0],s=r[1],l=e.layers.data(a);l&&HT.patch(l,s)}})).data),n.materials&&t.materials&&(n.materials=AC(n.materials,(function(e){for(var i=0;i<n.materials.length;i++){var r=t.materials[i];if("string"!=typeof r)for(var a=0,s=Object.entries(r.layers);a<s.length;a++){var l,u=o(s[a],2),c=u[0],d=u[1],h=null===(l=e[i])||void 0===l||null===(l=l.layers)||void 0===l?void 0:l.data(c);h&&HT.patch(h,d)}}})).data),n}(d,t)),d.cloner&&"cloner"in t&&Object.assign(d,{cloner:kT.merge(d.cloner,t.cloner)});else if("Empty"===e.type)d.cloner&&"cloner"in t&&Object.assign(d,{cloner:kT.merge(d.cloner,t.cloner)});else if(TT.is(e.type)){var v=t;void 0!==v.intensity&&(d.intensity=v.intensity),void 0!==v.color&&("string"==typeof v.color?d.color=v.color:d.color=gT.clone(v.color))}return d}}(SP||(SP={})),function(e){e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0}}(kP||(kP={})),function(e){e.defaultData={orbitControls:kP.defaultData,playPage:CT,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((function(e,t){var n=0,i=0;return t<5?i=-30:t<10&&(i=30),0===t||10===t||5===t?n=30:(4===t||11===t||9===t)&&(n=-30),[120,[n,i],"show"]})),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1}}(AP||(AP={})),function(e){e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""}}(MP||(MP={})),function(e){e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0}}(CP||(CP={})),function(e){e.defaultData=function(){return{mode:"line-art-both",prompt:"",negativePrompt:"",style:$e({},MP.defaultData),isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:CP.defaultData}},e.generateSeed=function(){return Math.round(1e5*Math.random())}}(EP||(EP={})),function(e){e.physicsEnabled=function(e){return void 0!==e.find((function(e){return"Page"===e.data.type&&e.data.globalPhysics.usePhysics}))},e.traverseModuleInstances=function(e,t,n){e.traverseFrom(t,(function(t,i){if("Instance"===i.type){var r=e.data(i.component);r&&n(t,i,r.events)}else n(t,i,i.events)}))}}(TP||(TP={})),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withLight:!0,withSquare:!0},t=[],n=_P.defaultMeshObject;!0===e.withLight&&t.push({fi:-1,data:yP.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),!0===e.withSquare&&t.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:n,children:[]});var i=new XM;return i.push({fi:1,id:CT,data:$e($e({},wP.defaultData),{},{name:"Scene 1"}),children:t}),i}function n(t){return $e($e({},e.defaultData),{},{objects:hM(t,XM.prototype)})}e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultData={objects:t(),publish:AP.defaultData,styles:EP.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new XM,publish:AP.defaultData,styles:EP.defaultData()}},e.emptyDataWithPage=function(e){return{objects:t(e),publish:AP.defaultData,styles:EP.defaultData()}},e.withObjs=n,e.withObj=function(e,t){return n([{id:e,data:t,children:[],fi:0}])}}(PP||(PP={})),function(e){e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"}}(DP||(DP={})),function(e){e.defaultColors=function(){var e={"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}};return hM(e,FM.prototype)},e.defaultImages=function(e){var t={};return null!==e&&void 0!==e&&e.withAITexture&&(t["a1b10010-844c-a8a3-11ec-0242ac2011ec"]=$e($e({},DP.emptyImage),{},{name:"AI generated image"})),hM(t,FM.prototype)},e.emptyData=function(){return{materials:new FM,images:new FM,videos:new FM,colors:new FM,audios:new FM,fonts:new FM}}}(OP||(OP={})),function(e){e.list=["idle","move","jump","run"]}(IP||(IP={})),function(e){e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25b2"],["rotPosY","\u25c0"],["rotNegX","\u25bc"],["rotNegY","\u25b6"],["jump","Space"],["run","\u21e7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new YM,move:new YM,jump:new YM,run:new YM},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:LT.fromHexAndA(3728051,1)}}}(RP||(RP={}));var KP=102;function JP(e){var t,n=null!==(t=e.schema)&&void 0!==t?t:0;n!==KP&&(console.warn("updating from ",n,"to ",KP),YP(e,n),n<100&&(void 0===e.scene.publish.joystickSizeAndXYOffset&&(e.scene.publish.joystickSizeAndXYOffset=AP.defaultData.joystickSizeAndXYOffset),e.schema=100),n<101&&(FP(e,QP),zP(e,QP),e.schema=101),n<102&&(function(e){e.scene.objects.traverse((function(e,t){var n=t.geometry;n&&"PathGeometry"===n.type&&(n.extrusion.capType="flat",n.extrusion.bevel=50,n.extrusion.bevelSides=6,"Custom"===n.extrusion.shape.type&&(n.extrusion.shape.shapeQuality="low"))}))}(e),e.schema=102))}function $P(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new cv,u=0,c=0;c<e.length;++c){var d=e[c],h=0;if(n!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var f in d.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[f]&&(a[f]=[]),a[f].push(d.attributes[f]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var p in d.morphAttributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[p]&&(o[p]=[]),o[p].push(d.morphAttributes[p])}if(t){var v=void 0;if(n)v=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;v=d.attributes.position.count}l.addGroup(u,v,c),u+=v}}if(n){for(var m=0,g=[],L=0;L<e.length;++L){for(var y=e[L].index,b=0;b<y.count;++b)g.push(y.getX(b)+m);m+=e[L].attributes.position.count}l.setIndex(g)}for(var x in a){var w=eD(a[x]);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+x+" attribute."),null;l.setAttribute(x,w)}for(var _ in o){var S=o[_][0].length;if(0===S)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[_]=[];for(var k=0;k<S;++k){for(var A=[],M=0;M<o[_].length;++M)A.push(o[_][M][k]);var C=eD(A);if(!C)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_+" morphAttribute."),null;l.morphAttributes[_].push(C)}}return l}function eD(e){for(var t,n,i,r=0,a=0;a<e.length;++a){var o=e[a];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=o.itemSize),n!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=o.array.length}for(var s=new t(r),l=0,u=0;u<e.length;++u)s.set(e[u].array,l),l+=e[u].array.length;return new $p(s,n,i)}var tD=Math.pow(2,-24),nD=(0,d.Z)((function e(){(0,c.Z)(this,e)}));function iD(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function rD(e){for(var t=-1,n=-1/0,i=0;i<3;i++){var r=e[i+3]-e[i];r>n&&(n=r,t=i)}return t}function aD(e,t){t.set(e)}function oD(e,t,n){for(var i,r,a=0;a<3;a++){var o=a+3;i=e[a],r=t[a],n[a]=i<r?i:r,i=e[o],r=t[o],n[o]=i>r?i:r}}function sD(e,t,n){for(var i=0;i<3;i++){var r=t[e+2*i],a=t[e+2*i+1],o=r-a,s=r+a;o<n[i]&&(n[i]=o),s>n[i+3]&&(n[i+3]=s)}}function lD(e){var t=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return 2*(t*n+n*i+i*t)}function uD(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,d=1/0,h=1/0,f=1/0,p=-1/0,v=-1/0,m=-1/0,g=null!==r,L=6*t,y=6*(t+n);L<y;L+=6){var b=e[L+0],x=e[L+1],w=b-x,_=b+x;w<a&&(a=w),_>l&&(l=_),g&&b<d&&(d=b),g&&b>p&&(p=b);var S=e[L+2],k=e[L+3],A=S-k,M=S+k;A<o&&(o=A),M>u&&(u=M),g&&S<h&&(h=S),g&&S>v&&(v=S);var C=e[L+4],E=e[L+5],T=C-E,P=C+E;T<s&&(s=T),P>c&&(c=P),g&&C<f&&(f=C),g&&C>m&&(m=C)}i[0]=a,i[1]=o,i[2]=s,i[3]=l,i[4]=u,i[5]=c,g&&(r[0]=d,r[1]=h,r[2]=f,r[3]=p,r[4]=v,r[5]=m)}var cD=32,dD=function(e,t){return e.candidate-t.candidate},hD=new Array(cD).fill().map((function(){return{count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}})),fD=new Float32Array(6);function pD(e,t){function n(e){f&&f(e/p)}function i(t,r,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!v&&m>=l&&(v=!0,c&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(e))),f<=d||m>=l)return n(r+f),t.offset=r,t.count=f,t;var g=function(e,t,n,i,r,a){var o=-1,s=0;if(0===a)-1!==(o=rD(t))&&(s=(t[o]+t[o+3])/2);else if(1===a)-1!==(o=rD(e))&&(s=function(e,t,n,i){for(var r=0,a=t,o=t+n;a<o;a++)r+=e[6*a+2*i];return r/n}(n,i,r,o));else if(2===a)for(var l=lD(e),c=1.25*r,d=6*i,h=6*(i+r),f=0;f<3;f++){var p=t[f],v=(t[f+3]-p)/cD;if(r<cD/4){var m=u(hD);m.length=r;for(var g=0,L=d;L<h;L+=6,g++){var y=m[g];y.candidate=n[L+2*f],y.count=0;for(var b=y.bounds,x=y.leftCacheBounds,w=y.rightCacheBounds,_=0;_<3;_++)w[_]=1/0,w[_+3]=-1/0,x[_]=1/0,x[_+3]=-1/0,b[_]=1/0,b[_+3]=-1/0;sD(L,n,b)}m.sort(dD);for(var S=r,k=0;k<S;k++)for(var A=m[k];k+1<S&&m[k+1].candidate===A.candidate;)m.splice(k+1,1),S--;for(var M=d;M<h;M+=6)for(var C=n[M+2*f],E=0;E<S;E++){var T=m[E];C>=T.candidate?sD(M,n,T.rightCacheBounds):(sD(M,n,T.leftCacheBounds),T.count++)}for(var P=0;P<S;P++){var D=m[P],O=D.count,I=r-D.count,R=D.leftCacheBounds,B=D.rightCacheBounds,N=0;0!==O&&(N=lD(R)/l);var z=0;0!==I&&(z=lD(B)/l);var F=1+1.25*(N*O+z*I);F<c&&(o=f,c=F,s=D.candidate)}}else{for(var j=0;j<cD;j++){var U=hD[j];U.count=0,U.candidate=p+v+j*v;for(var Z=U.bounds,V=0;V<3;V++)Z[V]=1/0,Z[V+3]=-1/0}for(var G=d;G<h;G+=6){var H=~~((n[G+2*f]-p)/v);H>=cD&&(H=cD-1);var W=hD[H];W.count++,sD(G,n,W.bounds)}var q=hD[cD-1];aD(q.bounds,q.rightCacheBounds);for(var X=cD-2;X>=0;X--){var Y=hD[X],Q=hD[X+1];oD(Y.bounds,Q.rightCacheBounds,Y.rightCacheBounds)}for(var K=0,J=0;J<cD-1;J++){var $=hD[J],ee=$.count,te=$.bounds,ne=hD[J+1].rightCacheBounds;0!==ee&&(0===K?aD(te,fD):oD(te,fD,fD));var ie=0,re=0;0!==(K+=ee)&&(ie=lD(fD)/l);var ae=r-K;0!==ae&&(re=lD(ne)/l);var oe=1+1.25*(ie*K+re*ae);oe<c&&(o=f,c=oe,s=$.candidate)}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(a," used."));return{axis:o,pos:s}}(t.boundingData,p,o,r,f,h);if(-1===g.axis)return n(r+f),t.offset=r,t.count=f,t;var L=function(e,t,n,i,r){for(var a=n,o=n+i-1,s=r.pos,l=2*r.axis;;){for(;a<=o&&t[6*a+l]<s;)a++;for(;a<=o&&t[6*o+l]>=s;)o--;if(!(a<o))return a;for(var u=0;u<3;u++){var c=e[3*a+u];e[3*a+u]=e[3*o+u],e[3*o+u]=c;var d=t[6*a+2*u+0];t[6*a+2*u+0]=t[6*o+2*u+0],t[6*o+2*u+0]=d;var h=t[6*a+2*u+1];t[6*a+2*u+1]=t[6*o+2*u+1],t[6*o+2*u+1]=h}a++,o--}}(s,o,r,f,g);if(L===r||L===r+f)n(r+f),t.offset=r,t.count=f;else{t.splitAxis=g.axis;var y=new nD,b=r,x=L-r;t.left=y,y.boundingData=new Float32Array(6),uD(o,b,x,y.boundingData,a),i(y,b,x,a,m+1);var w=new nD,_=L,S=f-x;t.right=w,w.boundingData=new Float32Array(6),uD(o,_,S,w.boundingData,a),i(w,_,S,a,m+1)}return t}!function(e,t){if(!e.index){var n,i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;n=i>65535?new Uint32Array(new r(4*i)):new Uint16Array(new r(2*i)),e.setIndex(new $p(n,1));for(var a=0;a<i;a++)n[a]=a}}(e,t);var r=new Float32Array(6),a=new Float32Array(6),o=function(e,t){var n=e.attributes.position,i=e.index.array,r=i.length/3,a=new Float32Array(6*r),o=n.normalized,s=n.array,l=n.offset||0,u=3;n.isInterleavedBufferAttribute&&(u=n.data.stride);for(var c=["getX","getY","getZ"],d=0;d<r;d++){var h=3*d,f=6*d,p=void 0,v=void 0,m=void 0;o?(p=i[h+0],v=i[h+1],m=i[h+2]):(p=i[h+0]*u+l,v=i[h+1]*u+l,m=i[h+2]*u+l);for(var g=0;g<3;g++){var L=void 0,y=void 0,b=void 0;o?(L=n[c[g]](p),y=n[c[g]](v),b=n[c[g]](m)):(L=s[p+g],y=s[v+g],b=s[m+g]);var x=L;y<x&&(x=y),b<x&&(x=b);var w=L;y>w&&(w=y),b>w&&(w=b);var _=(w-x)/2,S=2*g;a[f+S+0]=x+_,a[f+S+1]=_+(Math.abs(x)+_)*tD,x<t[g]&&(t[g]=x),w>t[g+3]&&(t[g+3]=w)}}return a}(e,r),s=e.index.array,l=t.maxDepth,c=t.verbose,d=t.maxLeafTris,h=t.strategy,f=t.onProgress,p=e.index.count/3,v=!1,m=[],g=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];var t,n=[],i=new Set,r=(0,x.Z)(e.groups);try{for(r.s();!(t=r.n()).done;){var a=t.value;i.add(a.start),i.add(a.start+a.count)}}catch(c){r.e(c)}finally{r.f()}for(var o=Array.from(i.values()).sort((function(e,t){return e-t})),s=0;s<o.length-1;s++){var l=o[s],u=o[s+1];n.push({offset:l/3,count:(u-l)/3})}return n}(e);if(1===g.length){var L=g[0],y=new nD;y.boundingData=r,function(e,t,n,i){for(var r=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0,c=6*t,d=6*(t+n);c<d;c+=6){var h=e[c+0];h<r&&(r=h),h>s&&(s=h);var f=e[c+2];f<a&&(a=f),f>l&&(l=f);var p=e[c+4];p<o&&(o=p),p>u&&(u=p)}i[0]=r,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u}(o,L.offset,L.count,a),i(y,L.offset,L.count,a),m.push(y)}else{var b,w=(0,x.Z)(g);try{for(w.s();!(b=w.n()).done;){var _=b.value,S=new nD;S.boundingData=new Float32Array(6),uD(o,_.offset,_.count,S.boundingData,a),i(S,_.offset,_.count,a),m.push(S)}}catch(k){w.e(k)}finally{w.f()}}return m}var vD=function(){function e(){(0,c.Z)(this,e),this.min=1/0,this.max=-1/0}return(0,d.Z)(e,[{key:"setFromPointsField",value:function(e,t){for(var n=1/0,i=-1/0,r=0,a=e.length;r<a;r++){var o=e[r][t];n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}},{key:"setFromPoints",value:function(e,t){for(var n=1/0,i=-1/0,r=0,a=t.length;r<a;r++){var o=t[r],s=e.dot(o);n=s<n?s:n,i=s>i?s:i}this.min=n,this.max=i}},{key:"isSeparated",value:function(e){return this.min>e.max||e.min>this.max}}]),e}();vD.prototype.setFromBox=function(){var e=new Rf;return function(t,n){for(var i=n.min,r=n.max,a=1/0,o=-1/0,s=0;s<=1;s++)for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){e.x=i.x*s+r.x*(1-s),e.y=i.y*l+r.y*(1-l),e.z=i.z*u+r.z*(1-u);var c=t.dot(e);a=Math.min(c,a),o=Math.max(c,o)}this.min=a,this.max=o}}();!function(){var e=new vD}();var mD=function(){var e=new Rf,t=new Rf,n=new Rf;return function(i,r,a){var o=i.start,s=e,l=r.start,u=t;n.subVectors(o,l),e.subVectors(i.end,i.start),t.subVectors(r.end,r.start);var c,d,h=n.dot(u),f=u.dot(s),p=u.dot(u),v=n.dot(s),m=s.dot(s)*p-f*f;d=(h+(c=0!==m?(h*f-v*p)/m:0)*f)/p,a.x=c,a.y=d}}(),gD=function(){var e=new af,t=new Rf,n=new Rf;return function(i,r,a,o){mD(i,r,e);var s,l,u=e.x,c=e.y;if(u>=0&&u<=1&&c>=0&&c<=1)return i.at(u,a),void r.at(c,o);if(u>=0&&u<=1)return c<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,a);if(c>=0&&c<=1)return u<0?i.at(0,a):i.at(1,a),void r.closestPointToPoint(a,!0,o);s=u<0?i.start:i.end,l=c<0?r.start:r.end;var d=t,h=n;return i.closestPointToPoint(l,!0,t),r.closestPointToPoint(s,!0,n),d.distanceToSquared(l)<=h.distanceToSquared(s)?(a.copy(d),void o.copy(l)):(a.copy(s),void o.copy(h))}}(),LD=function(){var e=new Rf,t=new Rf,n=new Uv,i=new mx;return function(r,a){var o=r.radius,s=r.center,l=a.a,u=a.b,c=a.c;if(i.start=l,i.end=u,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o||(i.start=l,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o)||(i.start=u,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o))return!0;var d=a.getPlane(n);if(Math.abs(d.distanceToPoint(s))<=o){var h=d.projectPoint(s,t);if(a.containsPoint(h))return!0}return!1}}();function yD(e){return Math.abs(e)<1e-15}var bD=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).isExtendedTriangle=!0,e.satAxes=new Array(4).fill().map((function(){return new Rf})),e.satBounds=new Array(4).fill().map((function(){return new vD})),e.points=[e.a,e.b,e.c],e.sphere=new np,e.plane=new Uv,e.needsUpdate=!0,e}return(0,d.Z)(n,[{key:"intersectsSphere",value:function(e){return LD(e,this)}},{key:"update",value:function(){var e=this.a,t=this.b,n=this.c,i=this.points,r=this.satAxes,a=this.satBounds,o=r[0],s=a[0];this.getNormal(o),s.setFromPoints(o,i);var l=r[1],u=a[1];l.subVectors(e,t),u.setFromPoints(l,i);var c=r[2],d=a[2];c.subVectors(t,n),d.setFromPoints(c,i);var h=r[3],f=a[3];h.subVectors(n,e),f.setFromPoints(h,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}]),n}(qp);bD.prototype.closestPointToSegment=function(){var e=new Rf,t=new Rf,n=new mx;return function(i){for(var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=i.start,l=i.end,u=this.points,c=1/0,d=0;d<3;d++){var h=(d+1)%3;n.start.copy(u[d]),n.end.copy(u[h]),gD(n,i,e,t),(r=e.distanceToSquared(t))<c&&(c=r,a&&a.copy(e),o&&o.copy(t))}return this.closestPointToPoint(s,e),(r=s.distanceToSquared(e))<c&&(c=r,a&&a.copy(e),o&&o.copy(s)),this.closestPointToPoint(l,e),(r=l.distanceToSquared(e))<c&&(c=r,a&&a.copy(e),o&&o.copy(l)),Math.sqrt(c)}}(),bD.prototype.intersectsTriangle=function(){var e=new bD,t=new Array(3),n=new Array(3),i=new vD,r=new vD,a=new Rf,o=new Rf,s=new Rf,l=new Rf,u=new mx,c=new mx,d=new mx;return function(h){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);var v=this.plane,m=h.plane;if(Math.abs(v.normal.dot(m.normal))>1-1e-10){var g=this.satBounds,L=this.satAxes;n[0]=h.a,n[1]=h.b,n[2]=h.c;for(var y=0;y<4;y++){var b=g[y],x=L[y];if(i.setFromPoints(x,n),b.isSeparated(i))return!1}var w=h.satBounds,_=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(var S=0;S<4;S++){var k=w[S],A=_[S];if(i.setFromPoints(A,t),k.isSeparated(i))return!1}for(var M=0;M<4;M++)for(var C=L[M],E=0;E<4;E++){var T=_[E];if(a.crossVectors(C,T),i.setFromPoints(a,t),r.setFromPoints(a,n),i.isSeparated(r))return!1}return f&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}for(var P=this.points,D=!1,O=0,I=0;I<3;I++){var R=P[I],B=P[(I+1)%3];u.start.copy(R),u.end.copy(B),u.delta(o);var N=D?c.start:c.end,z=yD(m.distanceToPoint(R));if(yD(m.normal.dot(o))&&z){c.copy(u),O=2;break}if((m.intersectLine(u,N)||z)&&!yD(N.distanceTo(B))){if(O++,D)break;D=!0}}if(1===O&&h.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(2!==O)return!1;for(var F=h.points,j=!1,U=0,Z=0;Z<3;Z++){var V=F[Z],G=F[(Z+1)%3];u.start.copy(V),u.end.copy(G),u.delta(s);var H=j?d.start:d.end,W=yD(v.distanceToPoint(V));if(yD(v.normal.dot(s))&&W){d.copy(u),U=2;break}if((v.intersectLine(u,H)||W)&&!yD(H.distanceTo(G))){if(U++,j)break;j=!0}}if(1===U&&this.containsPoint(d.end))return f&&(f.start.copy(d.end),f.end.copy(d.end)),!0;if(2!==U)return!1;if(c.delta(o),d.delta(s),o.dot(s)<0){var q=d.start;d.start=d.end,d.end=q}var X=c.start.dot(o),Y=c.end.dot(o),Q=d.start.dot(o),K=d.end.dot(o);return(X===K||Q===Y||Y<Q!==X<K)&&(f&&(l.subVectors(c.start,d.start),l.dot(o)>0?f.start.copy(c.start):f.start.copy(d.start),l.subVectors(c.end,d.end),l.dot(o)<0?f.end.copy(c.end):f.end.copy(d.end)),!0)}}(),bD.prototype.distanceToPoint=function(){var e=new Rf;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),bD.prototype.distanceToTriangle=function(){var e=new Rf,t=new Rf,n=["a","b","c"],i=new mx,r=new mx;return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=o||s?i:null;if(this.intersectsTriangle(a,l))return(o||s)&&(o&&l.getCenter(o),s&&l.getCenter(s)),0;for(var u=1/0,c=0;c<3;c++){var d=void 0,h=n[c],f=a[h];this.closestPointToPoint(f,e),(d=f.distanceToSquared(e))<u&&(u=d,o&&o.copy(e),s&&s.copy(f));var p=this[h];a.closestPointToPoint(p,e),(d=p.distanceToSquared(e))<u&&(u=d,o&&o.copy(p),s&&s.copy(e))}for(var v=0;v<3;v++){var m=n[v],g=n[(v+1)%3];i.set(this[m],this[g]);for(var L=0;L<3;L++){var y=n[L],b=n[(L+1)%3];r.set(a[y],a[b]),gD(i,r,e,t);var x=e.distanceToSquared(t);x<u&&(u=x,o&&o.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var xD=function(){function e(t,n,i){(0,c.Z)(this,e),this.isOrientedBox=!0,this.min=new Rf,this.max=new Rf,this.matrix=new dp,this.invMatrix=new dp,this.points=new Array(8).fill().map((function(){return new Rf})),this.satAxes=new Array(3).fill().map((function(){return new Rf})),this.satBounds=new Array(3).fill().map((function(){return new vD})),this.alignedSatBounds=new Array(3).fill().map((function(){return new vD})),this.needsUpdate=!1,t&&this.min.copy(t),n&&this.max.copy(n),i&&this.matrix.copy(i)}return(0,d.Z)(e,[{key:"set",value:function(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}},{key:"copy",value:function(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}]),e}();xD.prototype.update=function(){for(var e=this.matrix,t=this.min,n=this.max,i=this.points,r=0;r<=1;r++)for(var a=0;a<=1;a++)for(var o=0;o<=1;o++){var s=i[1*r|2*a|4*o];s.x=r?n.x:t.x,s.y=a?n.y:t.y,s.z=o?n.z:t.z,s.applyMatrix4(e)}for(var l=this.satBounds,u=this.satAxes,c=i[0],d=0;d<3;d++){var h=u[d],f=l[d],p=i[1<<d];h.subVectors(c,p),f.setFromPoints(h,i)}var v=this.alignedSatBounds;v[0].setFromPointsField(i,"x"),v[1].setFromPointsField(i,"y"),v[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},xD.prototype.intersectsBox=function(){var e=new vD;return function(t){this.needsUpdate&&this.update();var n=t.min,i=t.max,r=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(e.min=n.x,e.max=i.x,o[0].isSeparated(e)||(e.min=n.y,e.max=i.y,o[1].isSeparated(e))||(e.min=n.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(var s=0;s<3;s++){var l=a[s],u=r[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}(),xD.prototype.intersectsTriangle=function(){var e=new bD,t=new Array(3),n=new vD,i=new vD,r=new Rf;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);var o=this.satBounds,s=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(var l=0;l<3;l++){var u=o[l],c=s[l];if(n.setFromPoints(c,t),u.isSeparated(n))return!1}for(var d=a.satBounds,h=a.satAxes,f=this.points,p=0;p<3;p++){var v=d[p],m=h[p];if(n.setFromPoints(m,f),v.isSeparated(n))return!1}for(var g=0;g<3;g++)for(var L=s[g],y=0;y<4;y++){var b=h[y];if(r.crossVectors(L,b),n.setFromPoints(r,t),i.setFromPoints(r,f),n.isSeparated(i))return!1}return!0}}(),xD.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},xD.prototype.distanceToPoint=function(){var e=new Rf;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),xD.prototype.distanceToBox=function(){var e=["x","y","z"],t=new Array(12).fill().map((function(){return new mx})),n=new Array(12).fill().map((function(){return new mx})),i=new Rf,r=new Rf;return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(s||l)&&(a.getCenter(r),this.closestPointToPoint(r,i),a.closestPointToPoint(i,r),s&&s.copy(i),l&&l.copy(r)),0;for(var u=o*o,c=a.min,d=a.max,h=this.points,f=1/0,p=0;p<8;p++){var v=h[p];r.copy(v).clamp(c,d);var m=v.distanceToSquared(r);if(m<f&&(f=m,s&&s.copy(v),l&&l.copy(r),m<u))return Math.sqrt(m)}for(var g=0,L=0;L<3;L++)for(var y=0;y<=1;y++)for(var b=0;b<=1;b++){var x=(L+1)%3,w=(L+2)%3,_=1<<L|y<<x|b<<w,S=h[y<<x|b<<w],k=h[_];t[g].set(S,k);var A=e[L],M=e[x],C=e[w],E=n[g],T=E.start,P=E.end;T[A]=c[A],T[M]=y?c[M]:d[M],T[C]=b?c[C]:d[M],P[A]=d[A],P[M]=y?c[M]:d[M],P[C]=b?c[C]:d[M],g++}for(var D=0;D<=1;D++)for(var O=0;O<=1;O++)for(var I=0;I<=1;I++){r.x=D?d.x:c.x,r.y=O?d.y:c.y,r.z=I?d.z:c.z,this.closestPointToPoint(r,i);var R=r.distanceToSquared(i);if(R<f&&(f=R,s&&s.copy(i),l&&l.copy(r),R<u))return Math.sqrt(R)}for(var B=0;B<12;B++)for(var N=t[B],z=0;z<12;z++){var F=n[z];gD(N,F,i,r);var j=i.distanceToSquared(r);if(j<f&&(f=j,s&&s.copy(i),l&&l.copy(r),j<u))return Math.sqrt(j)}return Math.sqrt(f)}}();var wD=new Rf,_D=new Rf,SD=new Rf,kD=new af,AD=new af,MD=new af,CD=new Rf,ED=new Rf,TD=new Rf,PD=new Rf;function DD(e,t,n,i,r,a,o,s,l){wD.fromBufferAttribute(t,a),_D.fromBufferAttribute(t,o),SD.fromBufferAttribute(t,s);var u=function(e,t,n,i,r,a){return null===(a===Sc?e.intersectTriangle(i,n,t,!0,r):e.intersectTriangle(t,n,i,a!==kc,r))?null:{distance:e.origin.distanceTo(r),point:r.clone()}}(e,wD,_D,SD,PD,l);if(u){i&&(kD.fromBufferAttribute(i,a),AD.fromBufferAttribute(i,o),MD.fromBufferAttribute(i,s),u.uv=qp.getInterpolation(PD,wD,_D,SD,kD,AD,MD,new af)),r&&(kD.fromBufferAttribute(r,a),AD.fromBufferAttribute(r,o),MD.fromBufferAttribute(r,s),u.uv1=qp.getInterpolation(PD,wD,_D,SD,kD,AD,MD,new af)),n&&(CD.fromBufferAttribute(n,a),ED.fromBufferAttribute(n,o),TD.fromBufferAttribute(n,s),u.normal=qp.getInterpolation(PD,wD,_D,SD,CD,ED,TD,new Rf),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));var c={a:a,b:o,c:s,normal:new Rf,materialIndex:0};qp.getNormal(wD,_D,SD,c.normal),u.face=c,u.faceIndex=a}return u}function OD(e,t,n,i,r){var a=3*i,o=e.index.getX(a),s=e.index.getX(a+1),l=e.index.getX(a+2),u=e.attributes,c=DD(n,u.position,u.normal,u.uv,u.uv1,o,s,l,t);return c?(c.faceIndex=i,r&&r.push(c),c):null}function ID(e,t,n,i){var r=e.a,a=e.b,o=e.c,s=t,l=t+1,u=t+2;n&&(s=n.getX(t),l=n.getX(t+1),u=n.getX(t+2)),r.x=i.getX(s),r.y=i.getY(s),r.z=i.getZ(s),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),o.x=i.getX(u),o.y=i.getY(u),o.z=i.getZ(u)}function RD(e,t,n,i,r,a,o){for(var s=n.index,l=n.attributes.position,u=e,c=t+e;u<c;u++)if(ID(o,3*u,s,l),o.needsUpdate=!0,i(o,u,r,a))return!0;return!1}var BD=function(){function e(t){(0,c.Z)(this,e),this._getNewPrimitive=t,this._primitives=[]}return(0,d.Z)(e,[{key:"getPrimitive",value:function(){var e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}},{key:"releasePrimitive",value:function(e){this._primitives.push(e)}}]),e}();function ND(e,t){return 65535===t[e+15]}function zD(e,t){return t[e+6]}function FD(e,t){return t[e+14]}function jD(e){return e+8}function UD(e,t){return t[e+6]}var ZD=new zf,VD=new Rf,GD=["x","y","z"];function HD(e,t,n,i,r){var a=2*e,o=KD,s=JD,l=$D;if(ND(a,s)){!function(e,t,n,i,r,a){for(var o=i,s=i+r;o<s;o++)OD(e,t,n,o,a)}(t,n,i,zD(e,l),FD(a,s),r)}else{var u=jD(e);YD(u,o,i,VD)&&HD(u,t,n,i,r);var c=UD(e,l);YD(c,o,i,VD)&&HD(c,t,n,i,r)}}function WD(e,t,n,i){var r=2*e,a=KD,o=JD,s=$D;if(ND(r,o))return function(e,t,n,i,r){for(var a=1/0,o=null,s=i,l=i+r;s<l;s++){var u=OD(e,t,n,s);u&&u.distance<a&&(o=u,a=u.distance)}return o}(t,n,i,zD(e,s),FD(r,o));var l,u,c=function(e,t){return t[e+7]}(e,s),d=GD[c],h=i.direction[d]>=0;h?(l=jD(e),u=UD(e,s)):(l=UD(e,s),u=jD(e));var f=YD(l,a,i,VD)?WD(l,t,n,i):null;if(f){var p=f.point[d];if(h?p<=a[u+c]:p>=a[u+c+3])return f}var v=YD(u,a,i,VD)?WD(u,t,n,i):null;return f&&v?f.distance<=v.distance?f:v:f||v||null}var qD=function(){var e,t,n=[],i=new BD((function(){return new zf}));return function(){e=i.getPrimitive(),t=i.getPrimitive(),n.push(e,t);var a=r.apply(void 0,arguments);i.releasePrimitive(e),i.releasePrimitive(t),n.pop(),n.pop();var o=n.length;return o>0&&(t=n[o-1],e=n[o-2]),a};function r(n,i,a,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function c(e){for(var t=2*e,n=JD,i=$D;!ND(t,n);)t=2*(e=jD(e));return zD(e,i)}function d(e){for(var t=2*e,n=JD,i=$D;!ND(t,n);)t=2*(e=UD(e,i));return zD(e,i)+FD(t,n)}var h=2*n,f=KD,p=JD,v=$D;if(ND(h,p)){var m=zD(n,v),g=FD(h,p);return iD(n,f,e),o(m,g,!1,u,l+n,e)}var L,y,b,x,w=jD(n),_=UD(n,v),S=w,k=_;if(s&&(x=t,iD(S,f,b=e),iD(k,f,x),L=s(b),(y=s(x))<L)){S=_,k=w;var A=L;L=y,y=A,b=x}b||iD(S,f,b=e);var M,C=a(b,ND(2*S,p),L,u+1,l+S);if(2===C){var E=c(S);M=o(E,d(S)-E,!0,u+1,l+S,b)}else M=C&&r(S,i,a,o,s,l,u+1);if(M)return!0;iD(k,f,x=t);var T,P=a(x,ND(2*k,p),y,u+1,l+k);if(2===P){var D=c(k);T=o(D,d(k)-D,!0,u+1,l+k,x)}else T=P&&r(k,i,a,o,s,l,u+1);return!!T}}(),XD=function(){var e=new bD,t=new bD,n=new dp,i=new xD,r=new xD;return function a(o,s,l,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=2*o,h=KD,f=JD,p=$D;if(null===c&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,u),c=i),!ND(d,f)){var v=o+8,m=p[o+6];return iD(v,h,ZD),!!(c.intersectsBox(ZD)&&a(v,s,l,u,c)||(iD(m,h,ZD),c.intersectsBox(ZD)&&a(m,s,l,u,c)))}var g=s,L=g.index,y=g.attributes.position,b=l.index,x=l.attributes.position,w=zD(o,p),_=FD(d,f);if(n.copy(u).invert(),l.boundsTree)return iD(o,h,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:function(e){return r.intersectsBox(e)},intersectsTriangle:function(e){e.a.applyMatrix4(u),e.b.applyMatrix4(u),e.c.applyMatrix4(u),e.needsUpdate=!0;for(var n=3*w,i=3*(_+w);n<i;n+=3)if(ID(t,n,L,y),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});for(var S=3*w,k=_+3*w;S<k;S+=3){ID(e,S,L,y),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(var A=0,M=b.count;A<M;A+=3)if(ID(t,A,b,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}();function YD(e,t,n,i){return iD(e,t,ZD),n.intersectBox(ZD,i)}var QD,KD,JD,$D,eO=[];function tO(e){QD&&eO.push(QD),QD=e,KD=new Float32Array(e),JD=new Uint16Array(e),$D=new Uint32Array(e)}function nO(){QD=null,KD=null,JD=null,$D=null,eO.length&&tO(eO.pop())}var iO=Symbol("skip tree generation"),rO=new zf,aO=new zf,oO=new dp,sO=new xD,lO=new xD,uO=new Rf,cO=new Rf,dO=new Rf,hO=new Rf,fO=new Rf,pO=new zf,vO=new BD((function(){return new bD})),mO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,c.Z)(this,e),!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((n=Object.assign(Ke({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null},iO,!1),n)).useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,n[iO]||(this._roots=function(e,t){for(var n,i,r,a=pD(e,t),o=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,l=0;l<a.length;l++){var u=a[l],c=new s(32*d(u));n=new Float32Array(c),i=new Uint32Array(c),r=new Uint16Array(c),h(0,u),o.push(c)}return o;function d(e){return e.count?1:1+d(e.left)+d(e.right)}function h(e,t){for(var a=e/4,o=e/2,s=!!t.count,l=t.boundingData,u=0;u<6;u++)n[a+u]=l[u];if(s){var c=t.offset,d=t.count;return i[a+6]=c,r[o+14]=d,r[o+15]=65535,e+32}var f,p=t.left,v=t.right,m=t.splitAxis;if((f=h(e+32,p))/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[a+6]=f/4,f=h(f,v),i[a+7]=m,f}}(t,n),!t.boundingBox&&n.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new zf))),this.geometry=t}return(0,d.Z)(e,[{key:"refit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&Array.isArray(e)&&(e=new Set(e));for(var t,n,i,r,a=this.geometry,o=a.index.array,s=a.attributes.position,l=0,u=this._roots,c=0,d=u.length;c<d;c++)t=u[c],n=new Uint32Array(t),i=new Uint16Array(t),r=new Float32Array(t),h(0,l),l+=t.byteLength;function h(t,a){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=2*t;if(65535===i[u+15]){for(var c=n[t+6],d=1/0,f=1/0,p=1/0,v=-1/0,m=-1/0,g=-1/0,L=3*c,y=3*(c+i[u+14]);L<y;L++){var b=o[L],x=s.getX(b),w=s.getY(b),_=s.getZ(b);x<d&&(d=x),x>v&&(v=x),w<f&&(f=w),w>m&&(m=w),_<p&&(p=_),_>g&&(g=_)}return(r[t+0]!==d||r[t+1]!==f||r[t+2]!==p||r[t+3]!==v||r[t+4]!==m||r[t+5]!==g)&&(r[t+0]=d,r[t+1]=f,r[t+2]=p,r[t+3]=v,r[t+4]=m,r[t+5]=g,!0)}var S=t+8,k=n[t+6],A=S+a,M=k+a,C=l,E=!1,T=!1;e?C||(E=e.has(A),T=e.has(M),C=!E&&!T):(E=!0,T=!0);var P=C||T,D=!1;(C||E)&&(D=h(S,a,C));var O=!1;P&&(O=h(k,a,C));var I=D||O;if(I)for(var R=0;R<3;R++){var B=S+R,N=k+R,z=r[B],F=r[B+3],j=r[N],U=r[N+3];r[t+R]=z<j?z:j,r[t+R+3]=F>U?F:U}return I}}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots[t],i=new Uint32Array(n),r=new Uint16Array(n);!function t(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=2*a,l=65535===r[s+15];if(l){var u=i[a+6],c=r[s+14];e(o,l,new Float32Array(n,4*a,6),u,c)}else{var d=a+8,h=i[a+6],f=i[a+7];e(o,l,new Float32Array(n,4*a,6),f)||(t(d,o+1),t(h,o+1))}}(0)}},{key:"raycast",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_c,n=this._roots,i=this.geometry,r=[],a=t.isMaterial,o=Array.isArray(t),s=i.groups,l=a?t.side:t,u=0,c=n.length;u<c;u++){var d=o?t[s[u].materialIndex].side:l,h=r.length;if(tO(n[u]),HD(0,i,d,e,r),nO(),o)for(var f=s[u].materialIndex,p=h,v=r.length;p<v;p++)r[p].face.materialIndex=f}return r}},{key:"raycastFirst",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_c,n=this._roots,i=this.geometry,r=t.isMaterial,a=Array.isArray(t),o=null,s=i.groups,l=r?t.side:t,u=0,c=n.length;u<c;u++){var d=a?t[s[u].materialIndex].side:l;tO(n[u]);var h=WD(0,i,d,e);nO(),null!=h&&(null==o||h.distance<o.distance)&&(o=h,a&&(h.face.materialIndex=s[u].materialIndex))}return o}},{key:"intersectsGeometry",value:function(e,t){var n,i=this.geometry,r=!1,a=(0,x.Z)(this._roots);try{for(a.s();!(n=a.n()).done;){if(tO(n.value),r=XD(0,i,e,t),nO(),r)break}}catch(o){a.e(o)}finally{a.f()}return r}},{key:"shapecast",value:function(e,t,n){var i=this.geometry;if(e instanceof Function){if(t){var r=t;t=function(e,t,n,i){var a=3*t;return r(e,a,a+1,a+2,n,i)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}var a=vO.getPrimitive(),o=e,s=o.boundsTraverseOrder,l=o.intersectsBounds,u=o.intersectsRange,c=o.intersectsTriangle;if(u&&c){var d=u;u=function(e,t,n,r,o){return!!d(e,t,n,r,o)||RD(e,t,i,c,n,r,a)}}else u||(u=c?function(e,t,n,r){return RD(e,t,i,c,n,r,a)}:function(e,t,n){return n});var h,f=!1,p=0,v=(0,x.Z)(this._roots);try{for(v.s();!(h=v.n()).done;){var m=h.value;if(tO(m),f=qD(0,i,l,u,s,p),nO(),f)break;p+=m.byteLength}}catch(g){v.e(g)}finally{v.f()}return vO.releasePrimitive(a),f}},{key:"bvhcast",value:function(e,t,n){var i=n.intersectsRanges,r=n.intersectsTriangles,a=this.geometry.index,o=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;oO.copy(t).invert();var u=vO.getPrimitive(),c=vO.getPrimitive();if(r){var d=function(e,n,i,d,h,f,p,v){for(var m=i,g=i+d;m<g;m++){ID(c,3*m,s,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(var L=e,y=e+n;L<y;L++)if(ID(u,3*L,a,o),u.needsUpdate=!0,r(u,c,L,m,h,f,p,v))return!0}return!1};if(i){var h=i;i=function(e,t,n,i,r,a,o,s){return!!h(e,t,n,i,r,a,o,s)||d(e,t,n,i,r,a,o,s)}}else i=d}e.getBoundingBox(aO),aO.applyMatrix4(t);var f=this.shapecast({intersectsBounds:function(e){return aO.intersectsBox(e)},intersectsRange:function(t,n,r,a,o,s){return rO.copy(s),rO.applyMatrix4(oO),e.shapecast({intersectsBounds:function(e){return rO.intersectsBox(e)},intersectsRange:function(e,r,s,l,u){return i(t,n,e,r,a,o,l,u)}})}});return vO.releasePrimitive(u),vO.releasePrimitive(c),f}},{key:"intersectsBox",value:function(e,t){return sO.set(e.min,e.max,t),sO.needsUpdate=!0,this.shapecast({intersectsBounds:function(e){return sO.intersectsBox(e)},intersectsTriangle:function(e){return sO.intersectsTriangle(e)}})}},{key:"intersectsSphere",value:function(e){return this.shapecast({intersectsBounds:function(t){return e.intersectsBox(t)},intersectsTriangle:function(t){return t.intersectsSphere(e)}})}},{key:"closestPointToGeometry",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;e.boundingBox||e.computeBoundingBox(),sO.set(e.boundingBox.min,e.boundingBox.max,t),sO.needsUpdate=!0;var o=this.geometry,s=o.attributes.position,l=o.index,u=e.attributes.position,c=e.index,d=vO.getPrimitive(),h=vO.getPrimitive(),f=cO,p=dO,v=null,m=null;i&&(v=hO,m=fO);var g=1/0,L=null,y=null;return oO.copy(t).invert(),lO.matrix.copy(oO),this.shapecast({boundsTraverseOrder:function(e){return sO.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<g&&n<a&&(t&&(lO.min.copy(e.min),lO.max.copy(e.max),lO.needsUpdate=!0),!0)},intersectsRange:function(n,i){if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:function(e){return lO.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<g&&n<a},intersectsRange:function(e,a){for(var o=3*e,b=3*(e+a);o<b;o+=3){ID(h,o,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(var x=3*n,w=3*(n+i);x<w;x+=3){ID(d,x,l,s),d.needsUpdate=!0;var _=d.distanceToTriangle(h,f,v);if(_<g&&(p.copy(f),m&&m.copy(v),g=_,L=x/3,y=o/3),_<r)return!0}}}});for(var o=0,b=c?c.count:u.count;o<b;o+=3){ID(h,o,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(var x=3*n,w=3*(n+i);x<w;x+=3){ID(d,x,l,s),d.needsUpdate=!0;var _=d.distanceToTriangle(h,f,v);if(_<g&&(p.copy(f),m&&m.copy(v),g=_,L=x/3,y=o/3),_<r)return!0}}}}),vO.releasePrimitive(d),vO.releasePrimitive(h),g===1/0?null:(n.point?n.point.copy(p):n.point=p.clone(),n.distance=g,n.faceIndex=L,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4(oO),p.applyMatrix4(oO),i.distance=p.sub(i.point).length(),i.faceIndex=y),n)}},{key:"closestPointToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=n*n,a=i*i,o=1/0,s=null;if(this.shapecast({boundsTraverseOrder:function(t){return uO.copy(e).clamp(t.min,t.max),uO.distanceToSquared(e)},intersectsBounds:function(e,t,n){return n<o&&n<a},intersectsTriangle:function(t,n){t.closestPointToPoint(e,uO);var i=e.distanceToSquared(uO);return i<o&&(cO.copy(uO),o=i,s=n),i<r}}),o===1/0)return null;var l=Math.sqrt(o);return t.point?t.point.copy(cO):t.point=cO.clone(),t.distance=l,t.faceIndex=s,t}},{key:"getBoundingBox",value:function(e){return e.makeEmpty(),this._roots.forEach((function(t){iD(0,new Float32Array(t),pO),e.union(pO)})),e}}],[{key:"serialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),e.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});n=$e({cloneBuffers:!0},n);var i,r=t.geometry,a=t._roots,o=r.getIndex();return i=n.cloneBuffers?{roots:a.map((function(e){return e.slice()})),index:o.array.slice()}:{roots:a,index:o.array},i}},{key:"deserialize",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"==typeof i)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),e.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});i=$e({setIndex:!0},i);var r=t.index,a=t.roots,o=new e(n,$e($e({},i),{},Ke({},iO,!0)));if(o._roots=a,i.setIndex){var s=n.getIndex();if(null===s){var l=new $p(t.index,1,!1);n.setIndex(l)}else s.array!==r&&(s.array.set(r),s.needsUpdate=!0)}return o}}]),e}(),gO=ac(oc()),LO=.5*(Math.sqrt(3)-1),yO=(3-Math.sqrt(3))/6,bO=1/6,xO=(Math.sqrt(5),Math.sqrt(5),function(e){return 0|Math.floor(e)}),wO=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),_O=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function SO(){var e=kO(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random),t=new Float64Array(e).map((function(e){return wO[e%12*2]})),n=new Float64Array(e).map((function(e){return wO[e%12*2+1]}));return function(i,r){var a,o,s=0,l=0,u=0,c=(i+r)*LO,d=xO(i+c),h=xO(r+c),f=(d+h)*yO,p=i-(d-f),v=r-(h-f);p>v?(a=1,o=0):(a=0,o=1);var m=p-a+yO,g=v-o+yO,L=p-1+2*yO,y=v-1+2*yO,b=255&d,x=255&h,w=.5-p*p-v*v;if(w>=0){var _=b+e[x];s=(w*=w)*w*(t[_]*p+n[_]*v)}var S=.5-m*m-g*g;if(S>=0){var k=b+a+e[x+o];l=(S*=S)*S*(t[k]*m+n[k]*g)}var A=.5-L*L-y*y;if(A>=0){var M=b+1+e[x+1];u=(A*=A)*A*(t[M]*L+n[M]*y)}return 70*(s+l+u)}}function kO(e){for(var t=new Uint8Array(512),n=0;n<256;n++)t[n]=n;for(var i=0;i<255;i++){var r=i+~~(e()*(256-i)),a=t[i];t[i]=t[r],t[r]=a}for(var o=256;o<512;o++)t[o]=t[o-256];return t}var AO,MO=new qp,CO=function(){function e(t){(0,c.Z)(this,e),this.weightAttribute=null;var n=t.geometry;if(!n.isBufferGeometry||3!==n.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");n.index&&(n=n.toNonIndexed()),this.geometry=n,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}return(0,d.Z)(e,[{key:"build",value:function(){for(var e=this.positionAttribute,t=new Float32Array(e.count/3),n=0;n<e.count;n+=3){var i=1;MO.a.fromBufferAttribute(e,n),MO.b.fromBufferAttribute(e,n+1),MO.c.fromBufferAttribute(e,n+2),i*=MO.getArea(),t[n/3]=i}this.distribution=new Float32Array(e.count/3);for(var r=0,a=0;a<t.length;a++)r+=t[a],this.distribution[a]=r;return this}},{key:"setRandomGenerator",value:function(e){return this.randomFunction=e,this}},{key:"sample",value:function(e,t){if(this.distribution){var n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,e,t)}}},{key:"binarySearch",value:function(e){if(!this.distribution)return 0;for(var t=this.distribution,n=0,i=t.length-1,r=-1;n<=i;){var a=Math.ceil((n+i)/2);if(0===a||t[a-1]<=e&&t[a]>e){r=a;break}e<t[a]?i=a-1:n=a+1}return r}},{key:"sampleFace",value:function(e,t,n){var i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),MO.a.fromBufferAttribute(this.positionAttribute,3*e),MO.b.fromBufferAttribute(this.positionAttribute,3*e+1),MO.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(MO.a,i).addScaledVector(MO.b,r).addScaledVector(MO.c,1-(i+r)),MO.getNormal(n),this}}]),e}(),EO=ac(sc()),TO=new dp,PO=new dp,DO=new dp;!function(e){e.is=function(e){return e&&e.__isSPEObject}}(AO||(AO={}));var OO,IO=function(e){return function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).previousModelViewMatrix=new dp,e.copyPreviousMatrix=!0,e.hiddenMatrix=new dp,e.matrixWorldRigid=new dp,e.shearScale=new dp,e.shearScaleInv=new dp,e}return(0,d.Z)(n,[{key:"__isSPEObject",get:function(){return!0}},{key:"isDescendantOf",value:function(e){e instanceof Bp&&(e=e.uuid);for(var t=this;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.updateMatrixWorld(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t){var i,r=(0,x.Z)(this.children);try{for(r.s();!(i=r.n()).done;){i.value.updateWorldMatrix(!1,!0)}}catch(a){r.e(a)}finally{r.f()}}}},{key:"traverseChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(0,x.Z)(this.children);try{for(i.s();!(t=i.n()).done;){var r=t.value;AO.is(r)&&r.traverseObject(e,n+1)}}catch(a){i.e(a)}finally{i.f()}}},{key:"traverseObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t)){var n,i=(0,x.Z)(this.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;AO.is(r)&&r.traverseObject(e,t+1)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"updateMatrixWorldSVD",value:function(){var e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],n=(0,EO.SVD)(t),i=n.u,r=n.v,a=n.q,o=TO.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=PO.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=DO.copy(s).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),a.every((function(e){return Math.abs(a[0]-e)<.01}))?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}},{key:"attach",value:function(e,t){this.updateWorldMatrix(!0,!1);var n=(new dp).copy(this.matrixWorld).invert();return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof dp?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this}},{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.hasNonUniformScale=e.hasNonUniformScale,this}},{key:"onAfterRender",value:function(e,t,n,i,r,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}}]),n}(e)},RO=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(IO(Bp)),BO=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).object=e,i.matrixAutoUpdate=!1,i.hasNonUniformScale=e.hasNonUniformScale,i}return(0,d.Z)(n,[{key:"raycast",value:function(e,t){}},{key:"expand",value:function(){for(var e=0,t=this.object.entityChildren(e);t;){var i,r=this.children[e];(null===(i=r)||void 0===i?void 0:i.object)!==t&&(r&&this.remove(r),r=new n(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}},{key:"visible",get:function(){var e;return void 0!==this.playModeVisible?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&!0===(null===(e=this.object.dataPatched.cloner)||void 0===e?void 0:e.hideBase)},set:function(e){}},{key:"castShadow",get:function(){return this.object.castShadow},set:function(e){}},{key:"receiveShadow",get:function(){return this.object.receiveShadow},set:function(e){}},{key:"isMesh",get:function(){return function(e){return"Mesh"===e.type}(this.object)}},{key:"isLight",get:function(){return this.object.isLight}},{key:"layers",get:function(){return this.object.layers},set:function(e){}},{key:"isCamera",get:function(){return!1}},{key:"geometry",get:function(){if(this.object.geometry)return this.object.geometry}},{key:"material",get:function(){if(this.object.material)return this.object.material}}]),n}(RO),NO=new Rf,zO=new Rf,FO=new dp,jO=[new Rf(-1,1,1),new Rf(-1,-1,1),new Rf(1,-1,1),new Rf(1,1,1),new Rf(-1,1,-1),new Rf(-1,-1,-1),new Rf(1,-1,-1),new Rf(1,1,-1)],UO=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],ZO=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],VO=function(e,t,n){e.updateEntityBoxSize(NO,zO),FO.copy(t).multiply(e.matrixWorld),0===zO.x&&0===zO.y&&0===zO.z?n.push(new Rf(NO.x,NO.y,NO.z).applyMatrix4(FO)):jO.forEach((function(e){n.push(e.clone().multiply(zO).add(NO).applyMatrix4(FO))}))},GO=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).matrix=new dp,e.vertices=[],e.faces=[],e.edges=[],e.centerEdges=[],e}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map((function(e){return e.clone()})),this.faces=e.faces.map((function(e){return e.clone()})),this.edges=e.edges.map((function(e){return e.clone()})),this.centerEdges=e.centerEdges.map((function(e){return e.clone()})),this}},{key:"setFromObjectSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);var n=(new dp).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}},{key:"expandByObjectSize",value:function(e,t){var n=[];return!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2])?e.traverseEntity((function(e){if(e.visible||e.cloner&&e.data.visible){if(!("geometry"in e))return void n.push(new Rf);VO(e,t,n)}})):VO(e,t,n),this.setFromPoints(n)}},{key:"getCenter",value:function(e){return(e=Au((0,p.Z)(n.prototype),"getCenter",this).call(this,e)).applyMatrix4(this.matrix),e}},{key:"getPositionToCenter",value:function(e){return(e=Au((0,p.Z)(n.prototype),"getCenter",this).call(this,e)).applyMatrix4(FO.copy(this.matrix).setPosition(0,0,0)),e}},{key:"computeVertices",value:function(){this.getSize(zO).multiplyScalar(.5),this.getCenter(NO),FO.copy(this.matrix).setPosition(NO),this.vertices=jO.map((function(e){return e.clone().multiply(zO).applyMatrix4(FO)}))}},{key:"computeEdges",value:function(){var e=this;this.vertices.length>0&&this.computeVertices(),this.edges=UO.map((function(t){var n=o(t,2),i=n[0],r=n[1];return new mx(e.vertices[i],e.vertices[r])})),this.centerEdges=this.edges.map((function(e){return e.getCenter(new Rf)}))}},{key:"computeFaces",value:function(){var e=this;this.vertices.length>0&&this.computeVertices(),this.faces=ZO.map((function(t){var n=o(t,2),i=n[0],r=n[1];return e.vertices[i].clone().add(e.vertices[r]).multiplyScalar(.5)}))}}]),n}(zf),HO={Cloner:function(){},changeEntityProptotype:function(){},createEntity:function(){}},WO=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this)}return(0,d.Z)(n,[{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=this.getCurveLengths(),r=i[i.length-1]/i.length,a=0,o=this.curves;a<o.length;a++)for(var s=o[a],l=0===a?i[a]:i[a]-i[a-1],u=Math.ceil(t*l/r),c=s.getPoints(u),d=0;d<c.length;d++){var h=c[d];e&&e.equals(h)||(n.push(h),e=h)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}}]),n}(py),qO=.001;function XO(e,t,n){return t.clone().sub(e).cross(t.clone().sub(n)).length()<=qO}function YO(e,t){var n=g(Rf,u(e.position)),i=g(Rf,u(e.controlNext.position)),r=g(Rf,u(t.controlPrevious.position)),a=g(Rf,u(t.position));return XO(n,i,a)&&XO(n,r,a)}function QO(e){for(var t=e.points.map((function(e){return g(Rf,u(e.data.position))})),n=[e.points[0]],i=g(Rf,u(n[0].data.position)),r=0;r<e.points.length-1;r++)XO(i,t[r],t[r+1])||(n.push(e.points[r]),i=t[r]);n.push(e.points[e.points.length-1]);for(var a=e.isClosed,o=n.length-(a?0:1),s=n.length,l=[],c=0;c<s;c++){var d=n[c].data,h=g(Rf,u(d.position)),f=g(Rf,u(d.controlPrevious.position)),p=g(Rf,u(d.controlNext.position)),v={position:h,baseRoundness:d.roundness,controlPrevious:f,controlNext:p};if(0!==d.roundness&&(e.isClosed||0!==c&&c!==s-1)){var m=a&&c==s-1?0:c+1,L=n[a&&0==c?s-1:c-1].data,y=n[m].data,b=g(Rf,u(L.position)),x=g(Rf,u(y.position)),w=b.clone().sub(h).normalize(),_=x.clone().sub(h).normalize();Object.assign(v,{prevDir:w,nextDir:_});var S=YO(L,d),k=YO(d,y);if(S&&k){var A=w.clone().add(_).normalize(),M=A.clone().cross(w).length()/w.dot(A);l[c]=$e($e({},v),{},{tan:M,removedLength:d.roundness/M})}else l[c]=$e($e({},v),{},{removedLength:0})}else l[c]=$e($e({},v),{},{removedLength:0})}for(var C=0;C<o;C++){var E=a&&C===s-1?0:C+1,T=l[C],P=l[E];if(0!==T.removedLength||0!==P.removedLength){var D=T.position.distanceTo(P.position);T.removedLength=Math.min(T.removedLength,D/2),P.removedLength=Math.min(P.removedLength,D/2)}}for(var O=[],I=0;I<o;I++){var R=I,B=a&&I===s-1?0:I+1,N=l[R],z=l[B],F=null;if(YO(n[R].data,n[B].data)){var j=N.position.clone(),U=z.position.clone();(0!==N.removedLength||0!==z.removedLength)&&(N.nextDir&&j.add(N.nextDir.clone().setLength(N.removedLength)),z.prevDir&&U.add(z.prevDir.clone().setLength(z.removedLength))),j.distanceTo(U)>qO&&(F=new sy(j,j.clone().lerp(U,.3),U.clone().lerp(j,.3),U))}else N.position.distanceTo(z.position)>qO&&(F=new sy(N.position,N.controlNext,z.controlPrevious,z.position));O[2*I+1]=F}for(var Z=0;Z<s;Z++){var V=l[Z];if(0!==V.removedLength){var G=V.position,H=V.prevDir.clone().multiplyScalar(V.removedLength).add(G),W=V.nextDir.clone().multiplyScalar(V.removedLength).add(G),q=V.tan*V.removedLength,X=V.prevDir.clone().add(V.nextDir).normalize(),Y=H.clone().lerp(W,.5),Q=H.distanceTo(W)/2,K=X.clone().multiplyScalar(Math.sqrt(Math.pow(q,2)-Math.pow(Q,2))).add(Y),J=X.clone().multiplyScalar(-q).add(K),$=G.distanceTo(J)/G.distanceTo(Y),ee=V.prevDir.clone().multiplyScalar($*G.distanceTo(H)).add(G),te=ee.clone().lerp(J,2),ne=H.clone().lerp(ee,4/3),ie=W.clone().lerp(te,4/3);O[2*Z]=new sy(H,ne,ie,W)}else O[2*Z]=null}var re=new WO;return O.forEach((function(e){e&&re.add(e)})),re}!function(e){e.is=function(e){return e&&e.__isEntity}}(OO||(OO={}));var KO=function(e){return OO.is(e)},JO={type:"completeState",isfromEntity:!0},$O=function(e){return function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).raycastLock=!1,e.scaleLock=!1,e.disposed=!1,e.stateSelection=null,e.instances=[],e.prevState=null,e.currentState=null,e.reversibleToState=null,e.currentTransitionEvent=null,e.previousAction=null,e._singleBBox=new GO,e._recursiveBBox=new GO,e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0,e._needApplyPathSnapping=!0,e.attachedPaths=new Set,e}return(0,d.Z)(n,[{key:"__isEntity",get:function(){return!0}},{key:"entityChildren",value:function(e){var t=this.children[e];if(OO.is(t))return t}},{key:"entityChildrenCount",value:function(){for(var e=this.children.length;e--;)if(OO.is(this.children[e]))return e+1;return 0}},{key:"isConcreteEntity",get:function(){return"string"==typeof this.identity}},{key:"isVirtualEntity",get:function(){return"string"!=typeof this.identity}},{key:"isInstanceRoot",get:function(){return this.isConcreteEntity&&"Instance"===this.data.type}},{key:"nearestInstanceSelfOrParent",value:function(){for(var e=this;"Instance"!==e.data.type;){var t=e.parent;if(!OO.is(t))return;e=t}return e}},{key:"forInstancesRec",value:function(e){this.instances.forEach((function(t){t.disposed||e(t),t.forInstancesRec(e)}))}},{key:"super_Entity",value:function(e,t){"string"==typeof e&&(this.uuid=e),this.identity=e,this.data=t,this.matrixAutoUpdate=!1,this.dataPatched=this.data}},{key:"changeSelectedState",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==this.data.states.length||i){var r,a=(0,x.Z)(this.data.states);try{for(a.s();!(r=a.n()).done;){var o=r.value;SP.toOps(this.data,o.data).forEach((function(e){var i=JM.replaceProps(e,n.data);n.dataPatched=n.data,n.updateByPatchedOp(i,n.data,t)}))}}catch(l){a.e(l)}finally{a.f()}if(null!==e){var s=this.data.states.data(e);s&&(this.dataPatched=SP.patch(this.data,s),SP.toOps(this.data,s).forEach((function(e){n.updateByPatchedOp(e,n.dataPatched,t)})))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}},{key:"singleBBox",get:function(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}},{key:"recursiveBBox",get:function(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}},{key:"updateEntityBoxSize",value:function(e,t){e.setScalar(0),t.setScalar(0)}},{key:"resetBBoxNeedsUpdateSelf",value:function(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}},{key:"resetBBoxNeedsUpdate",value:function(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors((function(e){KO(e)&&e.resetBBoxNeedsUpdateSelf()})),this.traverseEntity((function(e){e.resetBBoxNeedsUpdateSelf()}))}},{key:"find",value:function(e){var t;return this.traverseEntity((function(n){n.uuid===e&&(t=n)})),t}},{key:"traverseSortNextHelper",value:function(){var e=this.parent;if(e){var t=e.children,n=t.indexOf(this)+1;if(OO.is(t[n]))return t[n];if(OO.is(e))return e.traverseSortNextHelper()}}},{key:"sortNext",value:function(){var e=this.children;return this.children.length>0&&OO.is(this.children[0])?e[0]:this.traverseSortNextHelper()}},{key:"goUp",value:function(e){for(var t=this;e>0&&null!==t;)t=t.parent,e-=1;return t}},{key:"hasAnccestorOrSelf",value:function(e){return this===e||this.hasAnccestor(e)}},{key:"hasAnccestor",value:function(e){for(var t=this.parent;t;){if(e===t)return!0;t=t.parent}return!1}},{key:"countToAccestor",value:function(e){for(var t=0,n=this;n!==e;){if(null===n)return-1;n=n.parent,t+=1}return t}},{key:"forEachEntity",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;KO(i)&&e(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"traverseEntityAncestors",value:function(e){this.traverseAncestors((function(t){OO.is(t)&&e(t)}))}},{key:"traverseConcreteEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t)){var n,i=(0,x.Z)(this.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;KO(r)&&r.isConcreteEntity&&r.traverseEntity(e,t+1)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"traverseEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t)){var n,i=(0,x.Z)(this.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;KO(r)&&r.traverseEntity(e,t+1)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"traverseVisibleEntity",value:function(e){e(this);var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;KO(i)&&i.visible&&i.traverseVisibleEntity(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"updateMatrix",value:function(){Au((0,p.Z)(n.prototype),"updateMatrix",this).call(this),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}},{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.dataPatched=e.dataPatched,this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}},{key:"hasEntityChild",value:function(){return this.children.some((function(e){return KO(e)}))}},{key:"isAncestorOf",value:function(e){if(this.uuid===e)return!1;var t=!1;return this.traverseEntity((function(n){n.uuid===e&&(t=!0)})),t}},{key:"toObjectTransformState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.updateWorldMatrix(!0,!1);var t={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return aM(t,e)}},{key:"updateTransformState",value:function(e){var t,n=this,i=!1;return e.position&&(this.position.fromArray(e.position),i=!0),e.rotation&&(this.rotation.fromArray(e.rotation),i=!0),e.scale&&(i=!0,this.scale.fromArray(e.scale)),void 0!==e.hiddenMatrix&&(i=!0,this.hiddenMatrix.fromArray(null!==(t=e.hiddenMatrix)&&void 0!==t?t:mT.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors((function(e){e.invalidateClonerTransform(n)}))),e.position&&e.rotation&&e.scale&&void 0!==e.hiddenMatrix&&this.updateWorldMatrix(!1,!0),i}},{key:"dispose",value:function(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}},{key:"disposeChildrenRecursively",value:function(){var e,t=(0,x.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;OO.is(n)&&n.disposeRecursively()}}catch(i){t.e(i)}finally{t.f()}}},{key:"disposeRecursively",value:function(){this.dispose(),this.children.forEach((function(e){OO.is(e)&&e.disposeRecursively()}))}},{key:"toState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=$e({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(e));return aM(t,e)}},{key:"updateByObjUpdateOp",value:function(e,t){this.updateByOp({type:0,props:e,path:[]},$e($e({},this.data),e),t,!1)}},{key:"updateByOp",value:function(e,t,n,i){var r=this.data;this.data=t;var a=e,s=CC(e.path,["states","*"]);if(null!==s){if(0===e.type){var l=o(s,1)[0];if((null===this||void 0===this?void 0:this.stateSelection)===l){var c=$e({},e.props);if(delete c.name,Object.values(e.props).some((function(e){return void 0===e}))){var d=this.data;if(void 0!==d){var h=wC.zoom(d,e.path.slice(2));if(h)for(var f in e.props)void 0===e.props[f]&&f in h&&(c[f]=h[f])}}a=$e($e({},e),{},{props:c,path:e.path.slice(2)})}}}else if(0===e.type){var p=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==p){if(void 0!==e.props.name&&p.name){var v=p;v.name;p=Li(v,Yu)}if(void 0!==e.props.material&&"material"in p){var m=p;m.material;p=Li(m,Qu)}var g=wC.removeOverridden(e.path,e.props,p);a=$e($e({},e),{},{props:g})}}if(this.updateByPatchedOpBase(a,SP.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),CC(e.path,["overrides"])){var L=[],y=u(e.path);for(L.push(y[1]),y.splice(0,2);y.length>0&&"descendants"===y[0];)L.push(y[1]),y.splice(0,2);if(void 0===L[L.length-1]){if(0===e.type)for(var b=0,w=Object.keys(e.props);b<w.length;b++){var _=w[b];L[L.length-1]=_;var S=n.scene.findInstance([this.uuid].concat(L));S&&(S.overrideData=e.props[_],S.updateState(KM.apply(S.component.data,S.overrideData),n))}}else{var k=n.scene.findInstance([this.uuid].concat(L));if(k){var A=wC.zoom(k.component.data,y);if(0===(e=$e($e({},e),{},{path:y})).type){var M=e.props;if(A)for(var C=0,E=Object.entries(e.props);C<E.length;C++){var T=o(E[C],2),P=T[0];void 0===T[1]&&(M===e.props&&(M=$e({},e.props)),M[P]=A[P])}e=$e($e({},e),{},{props:M})}k.overrideData=bP.resolve(t.overrides,L),k.updateByOp(e,$M.applySimple(k.data,e),n,!1)}}}else if(this.instances.length>0){var D;if(0===e.path.length&&0===e.type){var O,I,R=(0,x.Z)(xP.rootOverrideProps);try{for(R.s();!(I=R.n()).done;){var B=I.value;B in e.props&&(void 0===O&&(O={}),O[B]=e.props[B])}}catch(j){R.e(j)}finally{R.f()}O&&(D=$e($e({},e),{},{props:O}))}else{var N,z=(0,x.Z)(xP.rootOverrideProps);try{for(z.s();!(N=z.n()).done;){var F=N.value;if(CC(e.path,[F])){D=e;break}}}catch(j){z.e(j)}finally{z.f()}}void 0!==D&&this.instances.forEach((function(e){if(e.isInstanceRoot){var t=KM.filterOp(e.overrideData,D);t&&e.updateByOp(t,$M.applySimple(e.data,t),n,!0)}})),this.instances.forEach((function(i){if(!i.isInstanceRoot){var a,o=KM.filterOp(i.overrideData,e);if(o)a=r===i.data&&e===o?t:$M.applySimple(i.data,o),i.updateByOp(o,a,n,!0)}}))}}},{key:"updateByPatchedOpBase",value:function(e,t,n){if(this.dataPatched=t,0===e.path.length&&0===e.type)void 0!==e.props.type&&!_T.is(e.props.type)&&HO.changeEntityProptotype(this,t,n);else if(1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&"type"in e.props){HO.changeEntityProptotype(this,t,n);var i,r=(0,x.Z)(this.children);try{for(r.s();!(i=r.n()).done;){var a=i.value;OO.is(a)&&a.updateVisible()}}catch(o){r.e(o)}finally{r.f()}}this.updateByPatchedOp(e,t,n)}},{key:"updateByPatchedOp",value:function(e,t,n){if(0===e.path.length&&0===e.type&&this.updateState(e.props,n),null!==CC(e.path,["pathSnapping"])&&this.updatePathSnapping(t.pathSnapping),null!==CC(e.path,["cloner"])){var i=$M.drop(e,1);0===i.path.length&&0===i.type&&!0===i.props.disabled?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(t.cloner,n.scene):(this.setFromClonerState(t.cloner,n),this.expandCloner(n.scene)),this.updateVisible()}}},{key:"updatePathSnapping",value:function(e){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}},{key:"updatedPathSnapping",get:function(){return this._updatedPathSnapping}},{key:"applyPathSnapping",value:function(e){var t,n,i,r,a,o,s,l,u,c,d=null!==(t=null===(n=this._updatedPathSnapping)||void 0===n?void 0:n.pathId)&&void 0!==t?t:this.dataPatched.pathSnapping.pathId,h=null!==(i=null!==(r=null===(a=this._updatedPathSnapping)||void 0===a?void 0:a.slide)&&void 0!==r?r:this.dataPatched.pathSnapping.slide)&&void 0!==i?i:0,f=null!==(o=null===(s=this._updatedPathSnapping)||void 0===s?void 0:s.offset)&&void 0!==o?o:this.dataPatched.pathSnapping.offset,p=null!==(l=null===(u=this._updatedPathSnapping)||void 0===u?void 0:u.orientation)&&void 0!==l?l:this.dataPatched.pathSnapping.orientation;if(null!==d){var v=e.find(d);if(v&&!1!==this._needApplyPathSnapping){this._needApplyPathSnapping=!1;var m=v.data;if(!(m.geometry.path.points.length<=1)){var g=QO(m.geometry.path),L=(h+f)%1;h+f===1&&0===L&&(L=1);var y=g.getPointAt(L),b=this.parent?null===(c=this.parent)||void 0===c?void 0:c.matrixWorld:new dp;v.updateMatrixWorld();var x=(new dp).multiplyMatrices(b.clone().invert(),v.matrixWorld);y.applyMatrix4(x);var w={position:y.toArray(),rotation:m.rotation};if("tangential"===p){var _=(new dp).extractRotation(v.matrixWorld),S=g.getTangentAt(L).applyMatrix4(_).add(y),k=(new dp).lookAt(y,S,new Rf(0,1,0)),A=(new xp).setFromRotationMatrix(k);w=$e($e({},w),{},{rotation:[A.x,A.y,A.z]})}this.updateTransformState(w),this.traverseEntity((function(e){e._cameraType&&e.dispatchEvent(JO)}))}}}}},{key:"updateVisible",value:function(){var e,t;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||null!==(e=this.dataPatched.cloner.disabled)&&void 0!==e&&e||!0!==(null===(t=this.dataPatched.cloner)||void 0===t?void 0:t.hideBase))}},{key:"updateState_Entity",value:function(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),void 0!==e.visible&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),t&&"cloner"in e&&void 0!==e.cloner&&(this.setFromClonerState(e.cloner,t),this.updateVisible()),this.updateTransformState(e)}},{key:"attachedSurfaceCloners",get:function(){return this.children.filter((function(e){return e instanceof HO.Cloner&&"toObject"===e.parameters.type}))}},{key:"setFromClonerState",value:function(e,t){this.disposed||(null===e||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):void 0===this.cloner?(this.cloner=new HO.Cloner(this,e),t.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,t.scene))}},{key:"expandCloner",value:function(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}},{key:"invalidateClonerTransform",value:function(e){this.cloner&&this.cloner.invalidateTransform(e)}}]),n}(IO(e))},eI=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o,s=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters),l=s.width/2,u=null!==(i=s.radiusTop)&&void 0!==i?i:l,c=null!==(r=s.radiusBottom)&&void 0!==r?r:l;return u===c?(u=l,c=l):u>c?c=c*l/(u=l):(u=u*l/c,c=l),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(a=s.height)&&void 0!==a?a:s.width),depth:Math.abs(null!==(o=s.depth)&&void 0!==o?o:s.width),radiusTop:u,radiusBottom:c})}}},{key:"build",value:function(e){var t,n=e.parameters,i=n.width,r=n.depth,a=n.height,o=n.radialSegments,s=n.heightSegments,l=n.openEnded,u=n.thetaStart,c=n.thetaLength,d=n.radiusTop,h=n.radiusBottom,f=n.cornerRadius,p=n.cornerSegments,v=n.hollow;return(t=f||v?new iI(d,h,a,o,s,l,u,c*Math.PI/180,f,f,p,v):new gy(d,h,a,o,s,l,u,c*Math.PI/180)).scale(1,1,r/i),Object.assign(t,{userData:$e($e({},e),{},{type:"CylinderGeometry"})})}}]),e}();function tI(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function nI(e){return new af(e.y,-e.x)}var iI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,d,h,f,p,v){var m,g=arguments.length>12&&void 0!==arguments[12]&&arguments[12];(0,c.Z)(this,n),(m=t.call(this)).type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,i=void 0!==i?i:1,r=r||1,a=Math.floor(a)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,d=void 0!==d?d:2*Math.PI,s&&(h=0,f=0);var L=[],y=[],b=[],w=[],_=0,S=r/2,k=new Rf,A=new Rf;g&&0==e&&(e=h),g&&0==i&&(i=f);var M=new af(e,S),C=new af(i,-S),E=null,T=null,P=null,D=null,O=M.clone().sub(C),I=0,R=0,B=0;v>0&&(I=Math.min(e,i)*(1-v),R=e-I,B=i-I);var N=M.clone();N.x-=I;var z=Math.PI-O.angle(),F=O.angle(),j=Math.tan(F/2),U=Math.tan(z/2),Z=j+U,V=v?Z:U,G=v?Z:j;if(h=Math.min(h,(e-R)/V,O.length()/Z),f=Math.min(f,(i-B)/G,O.length()/Z),h>0){var H=h/j;E=M.clone().sub(new af(H,h)),v&&((P=E.clone()).x-=I-Z*h),M.sub(O.clone().setLength(H))}if(f>0){var W=f/U;T=C.clone().sub(new af(W,-f)),C.add(O.clone().setLength(W)),v&&((D=T.clone()).x-=I-Z*f,N.sub(O.clone().setLength(W)))}for(var q=(O=M.clone().sub(C)).length()<.5,X=[],Y=0;Y<=a;Y++){var Q=[],K=Y/a,J=K*d+l,$=new af(Math.sin(J),Math.cos(J));if(D&&T?(he(Q,K,$,z,f,D,-1,!0),he(Q,K,$,F,f,T,-1,!1)):T?(fe(Q,$,T.x,0,-1),he(Q,K,$,F,f,T,-1,!1)):s||fe(Q,$,i,B,-1),tI(nI(O).normalize(),$,k),!q)for(var ee=0;ee<=o;ee++){var te=ee/o;tI(O.clone().multiplyScalar(te).add(C),$,A),y.push(A.x,A.y,A.z),b.push(k.x,k.y,k.z),w.push(K,.5+A.y/r),Q.push(_++)}if(P&&E?(he(Q,K,$,z,h,E,1,!1),he(Q,K,$,F,h,P,1,!0)):E?(he(Q,K,$,z,h,E,1,!1),fe(Q,$,E.x,0,1)):s||fe(Q,$,e,R,1),v&&!q){tI(nI(O).multiplyScalar(-1).normalize(),$,k);for(var ne=0;ne<=o;ne++){var ie=ne/o;tI(O.clone().multiplyScalar(-ie).add(N),$,A),y.push(A.x,A.y,A.z),b.push(k.x,k.y,k.z),w.push(K,.5+A.y/r),Q.push(_++)}}v&&!s&&Q.push(Q[0]),X.push(Q)}for(var re=0;re<X.length-1;re++)for(var ae=0;ae<X[0].length-1;ae++)if(!s||!v||ae!=o){var oe=X[re][ae],se=X[re+1][ae],le=X[re+1][ae+1],ue=X[re][ae+1],ce=y[3*le+0],de=y[3*le+2];L.push(oe,se,ue),(0!=ce||0!=de)&&L.push(se,le,ue)}function he(e,t,n,i,a,o,s,l){for(var u=0;u<p+1;u++){var c=u/p,d=s<0?c:1-c;l&&(d-=1),d*=i;var h=new af(Math.sin(d),Math.cos(d)*s);tI(h.clone().multiplyScalar(a).add(o),n,A),y.push(A.x,A.y,A.z),tI(h,n,k),b.push(k.x,k.y,k.z),w.push(t,.5+A.y/r),e.push(_++)}}function fe(e,t,n,i,r){var a=new Rf,o=new af,s=[n,i];r<0&&s.reverse();for(var l=0,u=s;l<u.length;l++){var c=u[l];o.set(c,S*r),tI(o,t,a),y.push(a.x,a.y,a.z),b.push(0,r,0),w.push(.5,.5),e.push(_++)}}function pe(t,n,r){var a=new af(Math.sin(r),Math.cos(r)),o=new af(-Math.cos(r),Math.sin(r)),s=new Rf,l=t<0?function(e,t,n){return L.push(e,t,n)}:function(e,t,n){return L.push(e,n,t)};tI(new af((e+i+R+B)/4,0),a,s),y.push(s.x,s.y,s.z),b.push(o.x,0,o.y),w.push(.5,.5);var c,d=_++,h=(0,x.Z)(n);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=y.slice(3*f,3*f+3);y.push.apply(y,u(p)),b.push(o.x,0,o.y);var v=w.slice(2*f,2*f+2);w.push.apply(w,u(v)),_++}}catch(g){h.e(g)}finally{h.f()}for(var m=d+1;m<_-1;m++)l(d,m,m+1);l(d,_-1,d+1)}return d<2*Math.PI&&(pe(-1,X[0],l),pe(1,X[X.length-1],l+d)),m.setIndex(L),m.setAttribute("position",new nv(y,3)),m.setAttribute("normal",new nv(b,3)),m.setAttribute("uv",new nv(w,2)),m}return(0,d.Z)(n)}(cv),rI=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t,n=e.parameters,i=n.width,r=n.depth,a=n.height,o=n.radialSegments,s=n.heightSegments,l=n.openEnded,u=n.thetaStart,c=n.thetaLength,d=n.cornerRadiusTop,h=n.cornerRadiusBottom,f=n.cornerSegments;return(t=d>0||h>0||c<360?new iI(0,i/2,a,o,s,l,u,c*Math.PI/180,d,h,f,0,!0):new Ly(i/2,a,o,s,l)).scale(1,1,r/i),Object.assign(t,{userData:$e($e({},e),{},{type:"ConeGeometry"})})}}]),e}(),aI=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t,n=e.parameters,i=n.width,r=n.height,a=n.depth,o=n.widthSegments,s=n.heightSegments,l=n.depthSegments,u=n.cornerRadius,c=n.cornerSegments;return t=0==u?new Av(i,r,a,o,s,l):new sI(i,r,a,o,s,l,u,c),Object.assign(t,{userData:$e($e({},e),{},{type:"CubeGeometry"})})}}]),e}(),oI=Math.PI/2,sI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4;(0,c.Z)(this,n),(e=t.call(this)).type="BoxGeometry";var h=(0,Ye.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l),d=Math.floor(d),u=Math.min(u,i/2,r/2,a/2);var f=[],p=[],v=[],m=[],g=0,L=0;function y(e,t,n,i,r,a,o,s,l,c,d){for(var y=(a-2*u)/l,b=(o-2*u)/c,x=a/2-u,w=o/2-u,_=s/2,S=l+1,k=c+1,A=0,M=0,C=new Rf,E=0;E<k;E++)for(var T=E*b-w,P=0;P<S;P++){var D=P*y-x;C[e]=D*i,C[t]=T*r,C[n]=_,p.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,v.push(C.x,C.y,C.z),m.push(P/l),m.push(1-E/c),A+=1}for(var O=0;O<c;O++)for(var I=0;I<l;I++){var R=g+I+S*O,B=g+I+S*(O+1),N=g+(I+1)+S*(O+1),z=g+(I+1)+S*O;f.push(R,B,z),f.push(B,N,z),M+=6}h.addGroup(L,M,d),L+=M,g+=A}function b(e,t,n,i,r,a,o,s,l,c,y){for(var b=(o-2*u)/c,x=o/2-u,w=s/2-u,_=l/2,S=c+1,k=0,A=0,M=new Rf,C=new Rf,E=0;E<d+1;E++){var T=E/d*oI,P=Math.sin(T)*u,D=(1-Math.cos(T))*u,O=Math.sin(T),I=Math.cos(T);M[t]=(w+P)*r,M[n]=(_-D)*a,C[e]=0,C[t]=O*Math.sign(M[t]),C[n]=I*Math.sign(M[n]);for(var R=0;R<S;R++){var B=R*b-x;M[e]=B*i,p.push(M.x,M.y,M.z),v.push(C.x,C.y,C.z),m.push(R/c),m.push(0),k+=1}}for(var N=0;N<d;N++)for(var z=0;z<c;z++){var F=g+z+S*N,j=g+z+S*(N+1),U=g+(z+1)+S*(N+1),Z=g+(z+1)+S*N;f.push(F,j,Z),f.push(j,U,Z),A+=6}h.addGroup(L,A,y),L+=A,g+=k}function x(e,t,n){var o=new Rf,s=new Rf(i/2,r/2,a/2);s.subScalar(u);for(var l=[],c=e*t*n>0?function(e,t,n){return f.push(e,t,n)}:function(e,t,n){return f.push(e,n,t)},h=0;h<=d;h++){for(var L=[],y=oI*(1-h/d),b=Math.cos(y),x=Math.sin(y),w=0,_=0;_<=h;_++){var S=Math.cos(w),k=Math.sin(w);o.x=b*S,o.y=x,o.z=b*k;var A=s.clone().addScaledVector(o,u);p.push(e*A.x,t*A.y,n*A.z),v.push(e*o.x,t*o.y,n*o.z),m.push(0,0),L.push(g++),w+=oI/h}l.push(L)}for(var M=l.length-1,C=0;C<M;C++){var E=l[C],T=l[C+1],P=E.length-1;c(E[0],T[1],T[0]);for(var D=1;D<=P;D++)c(E[D-1],E[D],T[D]),c(E[D],T[D+1],T[D])}}return y("z","y","x",-1,-1,a,r,i,l,s,0),y("z","y","x",1,-1,a,r,-i,l,s,1),y("x","z","y",1,1,i,a,r,o,l,2),y("x","z","y",1,-1,i,a,-r,o,l,3),y("x","y","z",1,-1,i,r,a,o,s,4),y("x","y","z",-1,-1,i,r,-a,o,s,5),u>0&&(b("z","y","x",-1,-1,1,a,r,i,l,0),b("z","y","x",1,-1,-1,a,r,i,l,1),b("z","y","x",-1,1,-1,a,r,i,l,1),b("z","y","x",1,1,1,a,r,i,l,0),b("x","y","z",-1,-1,-1,i,r,a,o,0),b("x","y","z",1,-1,1,i,r,a,o,1),b("x","y","z",-1,1,1,i,r,a,o,0),b("x","y","z",1,1,-1,i,r,a,o,1),b("y","x","z",-1,-1,1,r,i,a,s,0),b("y","x","z",1,-1,-1,r,i,a,s,1),b("y","x","z",1,1,1,r,i,a,s,1),b("y","x","z",-1,1,-1,r,i,a,s,0),x(1,1,1),x(-1,1,1),x(1,-1,1),x(-1,-1,1),x(1,1,-1),x(-1,1,-1),x(1,-1,-1),x(-1,-1,-1)),e.setIndex(f),e.setAttribute("position",new nv(p,3)),e.setAttribute("normal",new nv(v,3)),e.setAttribute("uv",new nv(m,2)),e}return(0,d.Z)(n)}(cv),lI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;(0,c.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometryRound";var h=[],f=[],p=[];return function(){0==(l=Math.min(.99999,l))&&(d=0);for(var e={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[a],t=new Rf,n=t.clone(),c=new qp,f=l*s,v=s-f,m=d+1,g=new Rf,L=function(e,t){return g.subVectors(e,t).normalize()},y=function(e,t){return Array(e).fill(void 0).map(t)},b=y(i.length/3,(function(e,t){return(new Rf).fromArray(i,3*t).setLength(s)})),x=[],w=1e6,_=function(){for(var e,t,n,i=b[S],a=[],s=1e10,l=-1;-1!=(l=r.indexOf(S,l+1));){var u=l-l%3;e=r[u+(l+1)%3],t=r[u+(l+2)%3],n=i.distanceToSquared(b[e]),s=Math.min(s,n),a.push([e,t,n])}s+=1e-6;for(var c=[],d=0,h=a.length,f=0;f<h;f++){var p,v=o(a[d],3);e=v[0],t=v[1],n=v[2];var m=1==(null===(p=x[e])||void 0===p?void 0:p.includes(S));n<=s&&c.push(e+ +m*w),d=a.findIndex((function(e){return e[0]==t}))}x.push(c)},S=0;S<b.length;S++)_();for(var k,A,M=[],C=0,E=0,T=3==e,P=0;P<=d;P++){k=P*(P+1)/2,A=(P+1)*(P+2)/2;for(var D=0;D<d-P;D++)C=k+D+P+2,E=A+D+P+3,M.push.apply(M,[k,A].concat(u(T?[E,k]:[C,A]),[E,C])),k=C,A=E;M.push(k,A,k+d+2)}for(var O=t.clone(),I=t.clone(),R=t.clone(),B=t.clone(),N=t.clone(),z=[],F=y(b.length,(function(){return y(e,(function(){return t.clone()}))})),j=0;j<b.length;j++){t.copy(b[j]).normalize(),O.copy(t).multiplyScalar(v);for(var U=x[j],Z=0;Z<U.length;Z++){var V=U[Z],G=U[(Z+1)%e];c.setFromPointsAndIndices(b,j,V%w,G%w),c.b.sub(c.a).setLength(1e10).add(c.a),c.c.sub(c.a).setLength(1e10).add(c.a),c.closestPointToPoint(O,F[j][Z])}var H=[],W=[],q=[],X=new Rf;0==d&&u(F[j]).reduce((function(e,t){return e.add(t)}),X).multiplyScalar(1/e);for(var Y=0;Y<e;Y++){var Q=[],K=(Y-1+e)%e,J=F[j][K],$=F[j][Y];t.copy(J).sub(O),n.copy($).sub(O);var ee=O.angleTo(t),te=t.angleTo(n),ne=Math.cos(ee)*f;0==d?I.copy(X):I.copy(O).setLength(v+ne),W.push(ne);for(var ie=[I,J,$],re=0;re<2;re++){var ae=ie[re],oe=ie[re+1];B.subVectors(ae,O),N.subVectors(oe,O),R.crossVectors(B,N).normalize();for(var se=0;se<m;se++){var le=[ee,te][re]*se/m;t.copy(B).applyAxisAngle(R,le).add(O),H.push(t.clone()),re&&(L(t,O),Q.push([0==se?ae:t.clone(),g.clone()]))}re&&(L(oe,O),Q.push([oe,g.clone()]))}q.push(Q)}z.push(q);for(var ue=2*m,ce=function(){for(var n=ue*de,i=ue*((de+1)%e),r=[H[n]],a=1;a<m;a++){B=H[n+a],N=H[i+a],r.push(B);for(var o=1,s=a-2+1;o<=s;o++)t.lerpVectors(B,N,o/(s+1)),t.sub(O).setLength(W[de]).add(O),r.push(t.clone());r.push(N)}for(var l=0;l<m;l++)r.push(H[l+m+n]);r.push(H[i+m]);var c=M.map((function(e){return r[e]}));h.push.apply(h,u(c.map((function(e){return[e.x,e.y,e.z]})).flat())),p.push.apply(p,u(c.map((function(e){return L(e,O),[g.x,g.y,g.z]})).flat()))},de=0;de<e;de++)ce()}for(var he=[],fe=function(t){for(var n=0;n<e;n++){var i=x[t][n];if(i<w){for(var r=x[i].findIndex((function(e){return e%w==t})),a=z[t][n],o=z[i][r],s=0;s<m;s++){var l=a[s],u=o[m-s],c=a[s+1];[l,u,c,c,u,o[m-(s+1)]].forEach((function(e){h.push(e[0].x,e[0].y,e[0].z),p.push(e[1].x,e[1].y,e[1].z)}))}he.push(a[0][0],o[m][0],a[m][0],o[0][0])}}},pe=0;pe<x.length;pe++)fe(pe);for(;he.length;){var ve,me=void 0,ge=void 0,Le=void 0,ye=o(he.splice(0,2),2);ve=ye[0],me=ye[1];for(var be=[ve];ve!=me;)be.push(me),Le=(ge=he.indexOf(me))%2,me=he.splice(ge-Le,2)[1-Le];g.subVectors(be[0],be[1]).cross(t.subVectors(be[0],be[2])).normalize();var xe=g.dot(be[0])<0;xe&&g.negate();for(var we=1;we<=be.length-2;we++)[be[we+ +xe],be[we+1-+xe],be[0]].forEach((function(e){h.push(e.x,e.y,e.z),p.push(g.x,g.y,g.z)}))}}(),function(){for(var e=new Rf,t=0;t<h.length;t+=3){e.x=h[t+0],e.y=h[t+1],e.z=h[t+2];var n=_(e)/2/Math.PI+.5,i=S(e)/Math.PI+.5;f.push(n,1-i)}for(var r=new Rf,a=new Rf,o=new Rf,s=new Rf,l=new af,u=new af,c=new af,d=function(e,t,n,i){i<0&&1===e.x&&(f[t]=e.x-1),0===n.x&&0===n.z&&(f[t]=i/2/Math.PI+.5)},p=0,v=0;p<h.length;p+=9,v+=6){r.set(h[p+0],h[p+1],h[p+2]),a.set(h[p+3],h[p+4],h[p+5]),o.set(h[p+6],h[p+7],h[p+8]),l.set(f[v+0],f[v+1]),u.set(f[v+2],f[v+3]),c.set(f[v+4],f[v+5]),s.copy(r).add(a).add(o).divideScalar(3);var m=_(s);d(l,v+0,r,m),d(u,v+2,a,m),d(c,v+4,o,m)}for(var g=0;g<f.length;g+=6){var L=f[g+0],y=f[g+2],b=f[g+4],x=Math.max(L,y,b),w=Math.min(L,y,b);x>.9&&w<.1&&(L<.2&&(f[g+0]+=1),y<.2&&(f[g+2]+=1),b<.2&&(f[g+4]+=1))}function _(e){return Math.atan2(e.z,-e.x)}function S(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}(),e.setAttribute("position",new nv(h,3)),e.setAttribute("normal",new nv(p,3)),e.setAttribute("uv",new nv(f,2)),(0,Xe.Z)(e)}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}}]),n}(cv),uI=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.detail,o=t.corner,s=t.cornerSides,l=0===a&&0!==o?new cI(.5*n,o,s):new by(.5*n,a);return l.scale(1,i/n,r/n),Object.assign(l,{userData:$e($e({},e),{},{type:"DodecahedronGeometry"})})}}]),e}(),cI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;(0,c.Z)(this,n);var o=(1+Math.sqrt(5))/2,s=1/o,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-o,0,-s,o,0,s,-o,0,s,o,-s,-o,0,-s,o,0,s,-o,0,s,o,0,-o,0,-s,o,0,-s,-o,0,s,o,0,s],u="DodecahedronGeometry";return(e=t.call(this,l,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],u,i,r,a)).type=u,e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.corner,e.cornerSides)}}]),n}(lI),dI=1e-12,hI=function(){function e(t){(0,c.Z)(this,e),this.position=new af,this.startPosition=new af,this.uuid=rf.generateUUID(),this.position=t.clone()}return(0,d.Z)(e,[{key:"start",value:function(){this.reset()}},{key:"reset",value:function(){this.startPosition.copy(this.position)}},{key:"applyOffset",value:function(e){this.position.copy(this.startPosition).add(e)}},{key:"copy",value:function(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}},{key:"clone",value:function(){return new e(this.position).copy(this)}},{key:"toJSON",value:function(){return[this.position.x,this.position.y]}}]),e}(),fI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e.position)).parent=e,i}return(0,d.Z)(n,[{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this}},{key:"clone",value:function(){return new n(this.parent).copy(this)}}]),n}(hI),pI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,i)).controls=[],r.roundness=0,r.areControlsDirectionsMirrored=!0,r.uuid=e,r.controls.push(new fI((0,Ye.Z)(r)),new fI((0,Ye.Z)(r))),r}return(0,d.Z)(n,[{key:"getOppositeControl",value:function(e){var t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}},{key:"applyOffsetToControls",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=this.controls.length;n<i;n++){var r=this.controls[n];this.position.distanceTo(r.position)<=t?r.position.copy(this.position):r.applyOffset(e)}}},{key:"controlsMoved",value:function(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}},{key:"clone",value:function(){return new n(this.uuid,this.position).copy(this)}},{key:"toJSON",value:function(){return Au((0,p.Z)(n.prototype),"toJSON",this).call(this).concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}},{key:"computeTangents",value:function(){var e,t;return[null===(e=this.curveBefore)||void 0===e?void 0:e.getTangentAt(1),null===(t=this.curveAfter)||void 0===t?void 0:t.getTangentAt(0)]}},{key:"computeNormals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,n=o(this.computeTangents(),2),i=n[0],r=n[1];return i&&r&&(vI(i,e),vI(r,t)),[e,t]}},{key:"computeTangent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,t=o(this.computeTangents(),2),n=t[0],i=t[1];return n&&i&&e.copy(n).add(i).normalize(),e}},{key:"computeNormal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,t=o(this.computeNormals(),2),n=t[0],i=t[1];return e.copy(n).add(i).normalize(),e}}],[{key:"create",value:function(e,t){var i,r,a=new n(e,g(af,u(t.position)));return(i=a.controls[0].position).set.apply(i,u(t.controlPrevious.position)),(r=a.controls[1].position).set.apply(r,u(t.controlNext.position)),a.roundness=t.roundness,a.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,a}}]),n}(hI);function vI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af,n=e.length();return t.set(-e.y/n,e.x/n)}var mI=new af,gI=new af,LI=new af,yI=new af,bI=new af,xI=new af,wI=new Rf,_I=new Rf;function SI(e){var t=new af;t.addVectors(e.v0,mI.subVectors(e.v1,e.v0).multiplyScalar(2/3));var n=new af;return n.addVectors(e.v2,gI.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new oy(e.v0,t,n,e.v2)}function kI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(e-t)<n}function AI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<n}function MI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<n}function CI(e,t,n){var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),a=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((r*r+i*i-a*a)/(2*r*i))}function EI(e,t,n){return RI(e,t)&&RI(t,n)&&TI(e.position,t.position,n.position)}function TI(e,t,n){return 0===mI.copy(t).sub(e).cross(gI.copy(n).sub(e))}function PI(e,t,n,i,r){var a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(n,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return i.set(s+l,o+u),r.set(s-l,o-u),[i,r]}function DI(e,t,n){return e.distanceTo(n)<t.distanceTo(n)?t:e}function OI(e,t,n,i,r,a){var o,s=t.x-e.x,l=t.y-e.y,u=n.x-e.x,c=n.y-e.y,d=Math.sqrt((s+u)*(s+u)+(l+c)*(l+c));return CI(t,e,n)>Math.PI&&(d*=-1),o=kI(c,l)?(l+c)*(i/d-.5)*8/3/(s-u):(s+u)*(i/d-.5)*8/3/(c-l),r.set(t.x-o*l,t.y+o*s),a.set(n.x+o*c,n.y-o*u),[r,a]}function II(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function RI(e,t){return TI(e.position,e.controls[1].position,t.position)&&TI(e.position,t.controls[0].position,t.position)}function BI(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],r=0,a=e.length;r<a;r++){var o=e[r],s=0;if(n&&void 0!==o.roundedCurveCorner){var l=.5*NI(o.roundedCurveCorner,t);r>0&&(i[r-1]+=l),s+=l}void 0!==o.curveAfter&&(s+=NI(o.curveAfter,t)),i.push(s)}return e.length>0&&n&&void 0!==e[0].roundedCurveCorner&&(i[e.length-1]+=.5*NI(e[0].roundedCurveCorner,t)),i}function NI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e&&e instanceof YL?2*t:e&&(e instanceof ly||e instanceof uy)?1:e&&e instanceof hy?t*e.points.length:t}var zI,FI,jI=new af,UI=new af,ZI=new af,VI=new af,GI=new af,HI=new af,WI=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,c.Z)(this,n),(e=t.call(this)).points=[],e.shapeHoles=[],e.plane=new Uv(new Rf(0,0,-1)),e.subdivision=0,e.controlSnapDistance=4,e.pointIDs=0,e.isMesh2D=!1,e._roundness=0,e.isClosed=!1,e.useCubicForRoundedCorners=!0,e.uuid=rf.generateUUID(),e.needsUpdate=!1,e.roundedCurves=[],e._width=i,e._height=r,e}return(0,d.Z)(n,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"roundness",get:function(){return this._roundness},set:function(e){if(this._roundness!==e){this._roundness=e;for(var t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}},{key:"getPointsIndexesByIds",value:function(e){var t=this;return e.map((function(e){return t.getPointIndexById(e)})).filter((function(e){return e>=0}))}},{key:"getPointIndexById",value:function(e){var t=this.points.length,n=this.points.findIndex((function(t){return t.uuid===e}));if(n<0)for(var i=t,r=0,a=this.shapeHoles.length;r<a;r++){var o=this.shapeHoles[r],s=o.points.length,l=o.getPointIndexById(e);if(!(l<0))return l+i;i+=s}return n}},{key:"getLineIndexById",value:function(e){return this.getPointIndexById(e)}},{key:"getBezierPoint",value:function(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0)for(var t=this.points.length,n=0,i=this.shapeHoles.length;n<i;n++){var r=this.shapeHoles[n],a=e-t;if(a<=r.points.length-1)return r.points[a];t+=r.points.length}throw new Error("This shape does not have a point for this index: "+e)}},{key:"getBezierPointIndex",value:function(e){var t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(var n=0,i=this.shapeHoles.length;n<i;n++){var r=this.shapeHoles[n],a=r.points.indexOf(e);if(a>=0)return t+a;t+=r.points.length}return-1}},{key:"getAllPoints",value:function(){var e,t=(e=[]).concat.apply(e,u(this.shapeHoles.map((function(e){return e.points}))));return[].concat(u(this.points),u(t))}},{key:"applySize",value:function(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}},{key:"applyScale",value:function(e,t){for(var n=jI.set(e,t),i=0,r=this.points.length;i<r;i++){var a=this.points[i];a.position.multiply(n),a.controls[0].position.multiply(n),a.controls[1].position.multiply(n)}for(var o=0,s=this.shapeHoles.length;o<s;o++)this.shapeHoles[o].applyScale(e,t);this._update()}},{key:"createPoint",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf.generateUUID();t=e instanceof af?e:new af(e,n);var r=new pI(i,t);return r.roundness=this.roundness,r}},{key:"addPoint",value:function(e){this.points.push(e),this.needsUpdate=!0}},{key:"addPointAt",value:function(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}},{key:"getPointByUuid",value:function(e){for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];if(i.uuid===e)return i}for(var r=0,a=this.shapeHoles.length;r<a;r++){var o=this.shapeHoles[r].getPointByUuid(e);if(o)return o}}},{key:"getFirstPoint",value:function(){return this.points[0]}},{key:"getLastPoint",value:function(){return this.points[this.points.length-1]}},{key:"removePoint",value:function(e){var t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}},{key:"removePointById",value:function(e){var t=this.points.find((function(t){return t.uuid===e}));t&&this.removePoint(t)}},{key:"update",value:function(){for(var e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}},{key:"extractShapePointsToBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);var i=n?this.roundedCurveDivisions:this.curveDivisions;return function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=_I.set(0,0,0),o=0,s=[],l=0;l<t.length;l++){var u=t[l],c=mI,d=NI(u,i);s.push(d);for(var h=0;h<=d;h++)if(u instanceof oy||u instanceof cy||u instanceof ly){if(u.getPoint(h/d,c),a.set(c.x,c.y,0),void 0!==n&&MI(n,a))continue;void 0===n&&(n=wI),n.copy(a),e.setXYZ(o,a.x,a.y,a.z),o++}}r&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++)}(e,n?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((function(e,t){return e+t}),0)+1}},{key:"computeCurveDivisions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return this.curveDivisions=BI(this.points,e,!1),this.roundedCurveDivisions=BI(this.points,e,!0),this.curveDivisions}},{key:"extractFilteredShapePointsToBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 2*function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=_I.set(0,0,0),o=0,s=[],l=0;l<t.length;l++)if(!1!==n[l]){var u=void 0,c=t[l],d=mI,h=NI(c,i);s.push(h);for(var f=0;f<=h;f++)if(c instanceof oy||c instanceof cy||c instanceof ly){var p;if(c.getPoint(f/h,d),a.set(d.x,d.y,0),null!==(p=u)&&void 0!==p&&p.equals(a))continue;void 0===u?u=wI:(e.setXYZ(o,u.x,u.y,u.z),o++,e.setXYZ(o,a.x,a.y,a.z),o++),u.copy(a)}}return r&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),s}(e,this.curves,t,n,this.autoClose).reduce((function(e,t){return e+t}),0)}},{key:"extractShapePointsToFlatArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0,o=0;o<t.length;o++)for(var s=t[o],l=NI(s,i),u=mI,c=0;c<=l;c++)if(s instanceof oy||s instanceof cy||s instanceof ly){if(s.getPoint(c/l,u),void 0!==n&&AI(n,u,dI))continue;void 0===n&&(n=gI),n.copy(u),e.push(u.x,u.y),a++}return kI(e[0],e[e.length-2],dI)&&kI(e[1],e[e.length-1],dI)&&(e.pop(),e.pop()),r&&a>1&&!(kI(e[a-1],e[1],dI)&&kI(e[a-2],e[0],dI))&&(e.push(e[0],e[1]),a++),e}(e,this.roundedCurves,t,this.autoClose)}},{key:"getCurveIndexFromVertexId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);var i=t?this.roundedCurveDivisions:this.curveDivisions,r=0;t&&void 0!==this.points[0].roundedCurveCorner&&(r=.5*NI(this.points[0].roundedCurveCorner,this.subdivision));var a=e-r;a<0&&(a+=i.reduce((function(e,t){return e+t}),0));for(var o=0,s=i.length;o<s;o++){var l=i[o];if(a<n+l)return[o,(a-n+1)/l];n+=l}return[0,1]}},{key:"getCurveT",value:function(e,t,n){var i=this.points[e],r=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,o=a[e];if(II(i,r)){var s=i.position.distanceTo(r.position);return i.position.distanceTo(jI.set(n.x,n.y))/s}for(var l=0,u=0;u<e;u++)l+=a[u];return(t-l)/o}},{key:"dispose",value:function(){}},{key:"_applyCurveForPoint",value:function(e,t){II(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);var n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;var i=n.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}},{key:"_update",value:function(){if(this.curves=[],this.roundedCurves=[],this.points.length){for(var e=0,t=this.points.length;e<t;e++){var n=this.points[e];if(0===e)this.moveTo(n.position.x,n.position.y);else{var i=this.points[e-1];this._applyCurveForPoint(n,i)}}var r=this.getLastPoint();if(null!==r&&void 0!==r&&r.curveAfter&&(r.curveAfter=void 0),this.isClosed){var a=this.points[0],s=this.points[this.points.length-1];this._applyCurveForPoint(a,s)}if(this.points.length>2)for(var l=0,u=0,c=this.points.length;u<c;u++){var d,h,f=this.points[u],p=null!==(d=this.points[u-1])&&void 0!==d?d:this.points[this.points.length-1],v=null!==(h=this.points[u+1])&&void 0!==h?h:this.points[0],m=f.roundness,g=p&&v&&EI(p,f,v);if(!f.controlsMoved()&&m>0&&!g){var L=f.curveBefore,y=f.curveAfter;if(void 0===L||void 0===y)continue;var b=f.roundedCurveBefore,x=f.roundedCurveAfter,w=L.getLength(),_=y.getLength(),S=Math.min(m,.499*w),k=Math.min(m,.499*_),A=Math.min(S,k),M=1-A/w,C=A/_,E=L.getPointAt(M,jI),T=y.getPointAt(C,UI);this._subSplitCurve(L,b,M,E,void 0),this._subSplitCurve(y,x,C,void 0,T);var P=void 0;if(this.useCubicForRoundedCorners){var D=CI(E,f.position,T)/2,O=Math.tan(D)*E.distanceTo(f.position),I=o(PI(E,T,O,ZI,VI),2),R=o(OI(DI(I[0],I[1],f.position),E,T,O,GI,HI),2),B=R[0],N=R[1];P=new oy(E.clone(),B.clone(),N.clone(),T.clone())}else P=new cy(E.clone(),f.position.clone(),T.clone());f.roundedCurveCorner=P,this.roundedCurves.splice(u+l,0,P),l++}}}}},{key:"_subSplitCurve",value:function(e,t,n,i,r){if(!(e instanceof ly)){var a=e,o=t,s=a.getUtoTmapping(n,0),l=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,a=mI.subVectors(t,e).multiplyScalar(r).add(e),o=gI.subVectors(n,t).multiplyScalar(r).add(t),s=LI.subVectors(i,n).multiplyScalar(r).add(n),l=a,u=yI.subVectors(o,a).multiplyScalar(r).add(a),c=bI.subVectors(s,o).multiplyScalar(r).add(o),d=s,h=xI.subVectors(c,u).multiplyScalar(r).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,c.x,c.y,d.x,d.y,i.x,i.y]}(a.v0,a.v1,a.v2,a.v3,s);return void 0!==i&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),void 0!==r&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return void 0!==i&&t.v2.copy(i),void 0!==r&&t.v1.copy(r),t}},{key:"clone",value:function(){var e=new n(this._width,this._height);return e.points=this.points.map((function(e){return e.clone()})),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map((function(e){return e.clone()})),e}},{key:"toJSON",value:function(){return{points:this.points.reduce((function(e,t){return e.concat(t.toJSON())}),[]),shapeHoles:this.shapeHoles.map((function(e){return e.toJSON()})),isClosed:this.isClosed,roundness:this.roundness}}},{key:"fromJSON",value:function(e){var t;this.points=[],this.pointIDs=0;for(var i=e.points.length/7,r=0;r<i;r++){var a=7*r,o=e.points[a+0],s=e.points[a+1],l=e.points[a+2],u=e.points[a+3],c=e.points[a+4],d=e.points[a+5],h=e.points[a+6],f=new pI(rf.generateUUID(),new af(o,s));f.controls[0].position.set(l,u),f.controls[1].position.set(c,d),f.roundness=h,this.points.push(f)}return this.shapeHoles=null!==(t=e.shapeHoles)&&void 0!==t&&t.length?e.shapeHoles.map((function(e){var t=new n;return t.fromJSON(e),t})):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}},{key:"fromShape",value:function(e){var t=this,i=function(e,t){t instanceof oy&&t.v3.equals(e.position)&&e.controls[0].position.copy(t.v2)};return this.points=function(e){var n,r,a=[];for(n=0,r=e.length;n<r;n++)e[n]instanceof cy&&(e[n]=SI(e[n]));for(n=0,r=e.length;n<r;n++){var o=e[n],s=n>0?e[n-1]:null,l=void 0;o instanceof oy?(l=t.createPoint(o.v0)).controls[1].position.copy(o.v1):o instanceof ly&&(l=t.createPoint(o.v1)),void 0!==l&&(null!==s&&i(l,s),a.push(l))}var u=e[e.length-1],c=!1;return u instanceof oy?u.v3.equals(a[0].position)&&(a[0].controls[0].position.copy(u.v2),c=!0):u instanceof ly&&u.v2.equals(a[0].position)&&(c=!0),t.isClosed=c,a}(e.curves),e instanceof xy&&(this.shapeHoles=e.holes.map((function(e){var t=new n;return t.fromShape(e),t}))),this.update(),this}},{key:"updatePoint",value:function(e,t){var n=this.getPointByUuid(e);n&&(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.roundness&&(n.roundness=t.roundness),void 0!==t.areControlsDirectionsMirrored&&(n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}},{key:"updatePreviousControl",value:function(e,t){var n,i=null===(n=this.getPointByUuid(e))||void 0===n?void 0:n.controls[0];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}},{key:"updateNextControl",value:function(e,t){var n,i=null===(n=this.getPointByUuid(e))||void 0===n?void 0:n.controls[1];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}}],[{key:"createFromState",value:function(e,t,i){var r=new n;return r.isClosed=e.isClosed,r.points=e.points.map((function(e){return pI.create(e.id,e.data)})),"number"==typeof e.roundness&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map((function(e){return n.createFromState(e)})),void 0!==t&&void 0!==i&&r.applySize(t,i),r.update(),r}}]),n}(xy),qI=2*Math.PI;function XI(e,t,n,i,r){return{x:e.x*t+i,y:e.y*n+r}}function YI(e,t){var n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}function QI(e,t,n,i){var r=e*i-t*n<0?-1:1,a=Math.min(1,Math.max(-1,e*n+t*i));return r*Math.acos(a)}function KI(e){var t=e.px,n=e.py,i=e.cx,r=e.cy,a=e.rx,o=e.ry,s=e.largeArcFlag,l=e.sweepFlag,u=[];if(0===a||0===o)return[];var c=(t-i)/2,d=(n-r)/2;if(0===c&&0===d)return[];a=Math.abs(a),o=Math.abs(o);var h=Math.pow(c,2)/Math.pow(a,2)+Math.pow(d,2)/Math.pow(o,2);h>1&&(a*=Math.sqrt(h),o*=Math.sqrt(h));var f=function(e,t,n,i,r,a,o,s,l,u){var c=Math.pow(r,2),d=Math.pow(a,2),h=Math.pow(o,2),f=Math.pow(s,2),p=c*d-c*f-d*h;p<0&&(p=0),p/=c*f+d*h;var v=(p=Math.sqrt(p)*(l===u?-1:1))*r/a*s,m=p*-a/r*o,g=v+(e+n)/2,L=m+(t+i)/2,y=(o-v)/r,b=(s-m)/a,x=(-o-v)/r,w=(-s-m)/a,_=QI(1,0,y,b),S=QI(y,b,x,w);return!u&&S>0&&(S-=qI),u&&S<0&&(S+=qI),{centerx:g,centery:L,ang1:_,ang2:S}}(t,n,i,r,a,o,c,d,s,l),p=f.ang1,v=f.ang2,m=f.centerx,g=f.centery,L=Math.abs(v)/(qI/4);Math.abs(1-L)<1e-7&&(L=1);var y=Math.max(Math.ceil(L),1);v/=y;for(var b=0;b<y;b++)u.push(YI(p,v)),p+=v;return u.map((function(e){var t=XI(e[0],a,o,m,g),n=t.x,i=t.y,r=XI(e[1],a,o,m,g),s=r.x,l=r.y,u=XI(e[2],a,o,m,g);return{x1:n,y1:i,x2:s,y2:l,x:u.x,y:u.y}}))}function JI(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(zI||(zI={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(FI||(FI={}));var $I=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,n,i){JI(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,a=i.s-n.s;return r+a>0?r<a?n.t-t.t+(t.t-i.t)*(r/(r+a)):n.t-i.t+(i.t-t.t)*(a/(r+a)):0},e.edgeSign=function(t,n,i){JI(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,a=i.s-n.s;return r+a>0?(n.t-i.t)*r+(n.t-t.t)*a:0},e.transEval=function(t,n,i){JI(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,a=i.t-n.t;return r+a>0?r<a?n.s-t.s+(t.s-i.s)*(r/(r+a)):n.s-i.s+(i.s-t.s)*(a/(r+a)):0},e.transSign=function(t,n,i){JI(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,a=i.t-n.t;return r+a>0?(n.s-i.s)*r+(n.s-t.s)*a:0},e.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},e.interpolate=function(e,t,n,i){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+i)/2:t+e/(e+n)*(i-t):i+n/(e+n)*(t-i)},e.intersect=function(t,n,i,r,a){var o,s,l;e.vertLeq(t,n)||(l=t,t=n,n=l),e.vertLeq(i,r)||(l=i,i=r,r=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.vertLeq(i,n)?e.vertLeq(n,r)?((o=e.edgeEval(t,i,n))+(s=e.edgeEval(i,n,r))<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,n.s)):((o=e.edgeSign(t,i,n))+(s=-e.edgeSign(t,r,n))<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,r.s)):a.s=(i.s+n.s)/2,e.transLeq(t,n)||(l=t,t=n,n=l),e.transLeq(i,r)||(l=i,i=r,r=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.transLeq(i,n)?e.transLeq(n,r)?((o=e.transEval(t,i,n))+(s=e.transEval(i,n,r))<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,n.t)):((o=e.transSign(t,i,n))+(s=-e.transSign(t,r,n))<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,r.t)):a.t=(i.t+n.t)/2},e}(),eR=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},tR=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),nR=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},iR=function(){function e(){var e=new nR,t=new eR,n=new tR(0),i=new tR(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=i,i.next=i,i.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=i}return e.prototype.makeEdge_=function(e){var t=new tR(0),n=new tR(1);e.Sym.side<e.side&&(e=e.Sym);var i=e.Sym.next;return n.next=i,i.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},e.prototype.splice_=function(e,t){var n=e.Onext,i=t.Onext;n.Sym.Lnext=t,i.Sym.Lnext=e,e.Onext=i,t.Onext=n},e.prototype.makeVertex_=function(e,t,n){var i=e;JI(i,"Vertex can't be null!");var r=n.prev;i.prev=r,r.next=i,i.next=n,n.prev=i,i.anEdge=t;var a=t;do{a.Org=i,a=a.Onext}while(a!==t)},e.prototype.makeFace_=function(e,t,n){var i=e;JI(i,"Face can't be null");var r=n.prev;i.prev=r,r.next=i,i.next=n,n.prev=i,i.anEdge=t,i.trail=null,i.marked=!1,i.inside=n.inside;var a=t;do{a.Lface=i,a=a.Lnext}while(a!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},e.prototype.killVertex_=function(e,t){var n=e.anEdge,i=n;do{i.Org=t,i=i.Onext}while(i!==n);var r=e.prev,a=e.next;a.prev=r,r.next=a},e.prototype.killFace_=function(e,t){var n=e.anEdge,i=n;do{i.Lface=t,i=i.Lnext}while(i!==n);var r=e.prev,a=e.next;a.prev=r,r.next=a},e.prototype.makeEdge=function(){var e=new nR,t=new nR,n=new eR,i=this.makeEdge_(this.eHead);return this.makeVertex_(e,i,this.vHead),this.makeVertex_(t,i.Sym,this.vHead),this.makeFace_(n,i,this.fHead),i},e.prototype.splice=function(e,t){var n=!1,i=!1;if(e!==t){if(t.Org!==e.Org&&(i=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!i){var r=new nR;this.makeVertex_(r,t,e.Org),e.Org.anEdge=e}if(!n){var a=new eR;this.makeFace_(a,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var i=new eR;this.makeFace_(i,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var i=new nR;return this.makeVertex_(i,n,t.Org),t.Lface=n.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t.idx=e.idx,t.Sym.idx=e.Sym.idx,t},e.prototype.connect=function(e,t){var n=!1,i=this.makeEdge_(e),r=i.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(i,e.Lnext),this.splice_(r,t),i.Org=e.Dst,r.Org=t.Org,i.Lface=r.Lface=e.Lface,e.Lface.anEdge=r,!n){var a=new eR;this.makeFace_(a,i,e.Lface)}return i},e.prototype.zapFace=function(e){var t,n,i,r,a,o=e.anEdge;n=o.Lnext;do{n=(t=n).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(i=t.Sym).Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t))}while(t!=o);r=e.prev,(a=e.next).prev=r,r.next=a},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do{n++,t=t.Lnext}while(t!==e.anEdge);return n},e.prototype.mergeConvexFaces=function(e){var t,n,i,r,a;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(a=(n=t.anEdge).Org;i=n.Lnext,(r=n.Sym)&&r.Lface&&r.Lface.inside&&(this.countFaceVerts_(t)+this.countFaceVerts_(r.Lface)-2<=e&&$I.vertCCW(n.Lprev.Org,n.Org,r.Lnext.Lnext.Org)&&$I.vertCCW(r.Lprev.Org,r.Org,n.Lnext.Lnext.Org)&&(i=r.Lnext,this.delete(r),n=null,r=null)),!n||n.Lnext.Org!==a;)n=i;return!0},e.prototype.check=function(){var e,t,n,i,r,a,o=this.fHead,s=this.vHead,l=this.eHead;for(t=o,t=o;(e=t.next)!==o;t=e){JI(e.prev===t),r=e.anEdge;do{JI(r.Sym!==r),JI(r.Sym.Sym===r),JI(r.Lnext.Onext.Sym===r),JI(r.Onext.Sym.Lnext===r),JI(r.Lface===e),r=r.Lnext}while(r!==e.anEdge)}for(JI(e.prev===t&&null===e.anEdge),i=s,i=s;(n=i.next)!==s;i=n){JI(n.prev===i),r=n.anEdge;do{JI(r.Sym!==r),JI(r.Sym.Sym===r),JI(r.Lnext.Onext.Sym===r),JI(r.Onext.Sym.Lnext===r),JI(r.Org===n),r=r.Onext}while(r!==n.anEdge)}for(JI(n.prev===i&&null===n.anEdge),a=l,a=l;(r=a.next)!==l;a=r)JI(r.Sym.next===a.Sym),JI(r.Sym!==r),JI(r.Sym.Sym===r),JI(null!==r.Org),JI(null!==r.Dst),JI(r.Lnext.Onext.Sym===r),JI(r.Onext.Sym.Lnext===r);JI(r.Sym.next===a.Sym&&r.Sym===this.eHeadSym&&r.Sym.Sym===r&&null===r.Org&&null===r.Dst&&null===r.Lface&&null===r.Rface)},e}(),rR=function(){this.handle=null},aR=function(){this.key=null,this.node=0},oR=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new rR,this.handles[n]=new aR;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,n,i,r=this.nodes,a=this.handles;for(t=r[e].handle;;){if((i=e<<1)<this.size&&this.leq(a[r[i+1].handle].key,a[r[i].handle].key)&&++i,JI(i<=this.max),n=r[i].handle,i>this.size||this.leq(a[t].key,a[n].key)){r[e].handle=t,a[t].node=e;break}r[e].handle=n,a[n].node=e,e=i}},e.prototype.floatUp_=function(e){var t,n,i,r=this.nodes,a=this.handles;for(t=r[e].handle;;){if(n=r[i=e>>1].handle,0===i||this.leq(a[n].key,a[t].key)){r[e].handle=t,a[t].node=e;break}r[e].handle=n,a[n].node=e,e=i}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,n;if(2*(t=++this.size)>this.max){var i,r;for(this.max*=2,r=this.nodes.length,this.nodes.length=this.max+1,i=r;i<this.nodes.length;i++)this.nodes[i]=new rR;for(r=this.handles.length,this.handles.length=this.max+1,i=r;i<this.handles.length;i++)this.handles[i]=new aR}return 0===this.freeList?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,i=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),i},e.prototype.delete=function(e){var t,n=this.nodes,i=this.handles;JI(e>=1&&e<=this.max&&null!==i[e].key),n[t=i[e].node].handle=n[this.size].handle,i[n[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(i[n[t>>1].handle].key,i[n[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),i[e].key=null,i[e].node=this.freeList,this.freeList=e},e}(),sR=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},lR=function(){this.key=null,this.next=null,this.prev=null},uR=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new lR,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var n=new lR;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),cR=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,n){var i=e.event,r=t.eUp,a=n.eUp;return r.Dst===i?a.Dst===i?$I.vertLeq(r.Org,a.Org)?$I.edgeSign(a.Dst,r.Org,a.Org)<=0:$I.edgeSign(r.Dst,a.Org,r.Org)>=0:$I.edgeSign(a.Dst,i,a.Org)<=0:a.Dst===i?$I.edgeSign(r.Dst,i,r.Org)>=0:$I.edgeEval(r.Dst,i,r.Org)>=$I.edgeEval(a.Dst,i,a.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&JI(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,n){JI(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},e.topLeftRegion=function(t,n){var i,r=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===r);if(n.fixUpperEdge){if(null===(i=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,i),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(e,t,n){var i=new sR;return i.eUp=n,i.nodeUp=e.dict.insertBefore(t.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,n.activeRegion=i,i},e.isWindingInside=function(e,t){switch(e.windingRule){case zI.ODD:return 0!==(1&t);case zI.NONZERO:return 0!==t;case zI.POSITIVE:return t>0;case zI.NEGATIVE:return t<0;case zI.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,i){for(var r,a=null,o=n,s=n.eUp;o!==i;){if(o.fixUpperEdge=!1,(r=(a=e.regionBelow(o)).eUp).Org!=s.Org){if(!a.fixUpperEdge){e.finishRegion(t,o);break}r=t.mesh.connect(s.Lprev,r.Sym),e.fixUpperEdge(t,a,r)}s.Onext!==r&&(t.mesh.splice(r.Oprev,r),t.mesh.splice(s,r)),e.finishRegion(t,o),s=a.eUp,o=a}return s},e.addRightEdges=function(t,n,i,r,a,o){var s,l,u,c,d=!0;u=i;do{JI($I.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,n,u.Sym),u=u.Onext}while(u!==r);for(null===a&&(a=e.regionBelow(n).eUp.Rprev),l=n,c=a;(u=(s=e.regionBelow(l)).eUp.Sym).Org===c.Org;)u.Onext!==c&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(c.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(u,c),e.deleteRegion(t,l),t.mesh.delete(c)),d=!1,l=s,c=u;l.dirty=!0,JI(l.windingNumber-u.winding===s.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},e.vertexWeights=function(e,t,n){var i=$I.vertL1dist(t,e),r=$I.vertL1dist(n,e),a=.5*r/(i+r),o=.5*i/(i+r);e.coords[0]+=a*t.coords[0]+o*n.coords[0],e.coords[1]+=a*t.coords[1]+o*n.coords[1],e.coords[2]+=a*t.coords[2]+o*n.coords[2]},e.getIntersectData=function(t,n,i,r,a,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,i,r),e.vertexWeights(n,a,o)},e.checkForRightSplice=function(t,n){var i=e.regionBelow(n),r=n.eUp,a=i.eUp;if($I.vertLeq(r.Org,a.Org)){if($I.edgeSign(a.Dst,r.Org,a.Org)>0)return!1;$I.vertEq(r.Org,a.Org)?r.Org!==a.Org&&(t.pq.delete(r.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,r)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(r,a.Oprev),n.dirty=i.dirty=!0)}else{if($I.edgeSign(r.Dst,a.Org,r.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(r.Sym),t.mesh.splice(a.Oprev,r)}return!0},e.checkForLeftSplice=function(t,n){var i,r=e.regionBelow(n),a=n.eUp,o=r.eUp;if(JI(!$I.vertEq(a.Dst,o.Dst)),$I.vertLeq(a.Dst,o.Dst)){if($I.edgeSign(a.Dst,o.Dst,a.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,i=t.mesh.splitEdge(a),t.mesh.splice(o.Sym,i),i.Lface.inside=n.inside}else{if($I.edgeSign(o.Dst,a.Dst,o.Org)>0)return!1;n.dirty=r.dirty=!0,i=t.mesh.splitEdge(o),t.mesh.splice(a.Lnext,o.Sym),i.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var i,r,a=e.regionBelow(n),o=n.eUp,s=a.eUp,l=o.Org,u=s.Org,c=o.Dst,d=s.Dst,h=new nR;if(JI(!$I.vertEq(d,c)),JI($I.edgeSign(c,t.event,l)<=0),JI($I.edgeSign(d,t.event,u)>=0),JI(l!==t.event&&u!==t.event),JI(!n.fixUpperEdge&&!a.fixUpperEdge),l===u||Math.min(l.t,c.t)>Math.max(u.t,d.t))return!1;if($I.vertLeq(l,u)){if($I.edgeSign(d,l,u)>0)return!1}else if($I.edgeSign(c,u,l)<0)return!1;return e.debugEvent(t),$I.intersect(c,l,d,u,h),JI(Math.min(l.t,c.t)<=h.t),JI(h.t<=Math.max(u.t,d.t)),JI(Math.min(d.s,c.s)<=h.s),JI(h.s<=Math.max(u.s,l.s)),$I.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),i=$I.vertLeq(l,u)?l:u,$I.vertLeq(i,h)&&(h.s=i.s,h.t=i.t),$I.vertEq(h,l)||$I.vertEq(h,u)?(e.checkForRightSplice(t,n),!1):!$I.vertEq(c,t.event)&&$I.edgeSign(c,t.event,h)>=0||!$I.vertEq(d,t.event)&&$I.edgeSign(d,t.event,h)<=0?d===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(s.Sym,o),n=e.topLeftRegion(t,n),o=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),a),e.addRightEdges(t,n,o.Oprev,o,o,!0),!0):c===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(o.Lnext,s.Oprev),a=n,n=e.topRightRegion(n),r=e.regionBelow(n).eUp.Rprev,a.eUp=s.Oprev,s=e.finishLeftRegions(t,a,null),e.addRightEdges(t,n,s.Onext,o.Rprev,r,!0),!0):($I.edgeSign(c,t.event,h)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),$I.edgeSign(d,t.event,h)<=0&&(n.dirty=a.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(o.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,o),o.Org.s=h.s,o.Org.t=h.t,o.Org.pqHandle=t.pq.insert(o.Org),e.getIntersectData(t,o.Org,l,c,u,d),e.regionAbove(n).dirty=n.dirty=a.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var i,r,a=e.regionBelow(n);;){for(;a.dirty;)n=a,a=e.regionBelow(a);if(!n.dirty&&(a=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,i=n.eUp,r=a.eUp,i.Dst!==r.Dst&&e.checkForLeftSplice(t,n)&&(a.fixUpperEdge?(e.deleteRegion(t,a),t.mesh.delete(r),r=(a=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(i),i=(n=e.regionAbove(a)).eUp)),i.Org!==r.Org)if(i.Dst===r.Dst||n.fixUpperEdge||a.fixUpperEdge||i.Dst!==t.event&&r.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;i.Org===r.Org&&i.Dst===r.Dst&&(e.addWinding(r,i),e.deleteRegion(t,n),t.mesh.delete(i),n=e.regionAbove(a))}},e.connectRightVertex=function(t,n,i){var r,a=i.Onext,o=e.regionBelow(n),s=n.eUp,l=o.eUp,u=!1;s.Dst!==l.Dst&&e.checkForIntersect(t,n),$I.vertEq(s.Org,t.event)&&(t.mesh.splice(a.Oprev,s),n=e.topLeftRegion(t,n),a=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),o),u=!0),$I.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),u=!0),u?e.addRightEdges(t,n,i.Onext,a,a,!0):(r=$I.vertLeq(l.Org,s.Org)?l.Oprev:s,r=t.mesh.connect(i.Lprev,r),e.addRightEdges(t,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,i){var r,a,o,s,l;return r=n.eUp,$I.vertEq(r.Org,i)?(JI(!1),void e.spliceMergeVertices(t,r,i.anEdge)):$I.vertEq(r.Dst,i)?(JI(!1),n=e.topRightRegion(n),a=s=(o=(l=e.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(JI(a!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=a.Oprev),t.mesh.splice(i.anEdge,o),$I.edgeGoesLeft(a)||(a=null),void e.addRightEdges(t,n,o.Onext,s,a,!0)):(t.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(t.mesh.delete(r.Onext),n.fixUpperEdge=!1),t.mesh.splice(i.anEdge,r),void e.sweepEvent(t,i))},e.connectLeftVertex=function(t,n){var i,r,a,o,s,l,u=new sR;if(u.eUp=n.anEdge.Sym,i=t.dict.search(u).key,r=e.regionBelow(i)){if(o=i.eUp,s=r.eUp,0===$I.edgeSign(o.Dst,n,o.Org))return void e.connectLeftDegenerate(t,i,n);if(a=$I.vertLeq(s.Dst,o.Dst)?i:r,i.inside||a.fixUpperEdge){if(a===i)l=t.mesh.connect(n.anEdge.Sym,o.Lnext);else l=t.mesh.connect(s.Dnext,n.anEdge).Sym;a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,n)}else e.addRightEdges(t,i,n.anEdge,n.anEdge,null,!0)}},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var i=n.anEdge;null===i.activeRegion;)if((i=i.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var r=e.topLeftRegion(t,i.activeRegion);JI(null!==r);var a=e.regionBelow(r),o=a.eUp,s=e.finishLeftRegions(t,a,null);s.Onext===o?e.connectRightVertex(t,r,s):e.addRightEdges(t,r,s.Onext,o,o,!0)},e.addSentinel=function(e,t,n,i){var r=new sR,a=e.mesh.makeEdge();a.Org.s=n,a.Org.t=i,a.Dst.s=t,a.Dst.t=i,e.event=a.Dst,r.eUp=a,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=e.dict.insert(r)},e.initEdgeDict=function(t){t.dict=new uR(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],r=t.bmin[0]-n,a=t.bmax[0]+n,o=t.bmin[1]-i,s=t.bmax[1]+i;e.addSentinel(t,r,a,o),e.addSentinel(t,r,a,s)},e.doneEdgeDict=function(t){for(var n,i=0;null!==(n=t.dict.min().key);)n.sentinel||(JI(n.fixUpperEdge),JI(1===++i)),JI(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,i,r,a=t.mesh.eHead;for(n=a.next;n!==a;n=i)i=n.next,r=n.Lnext,$I.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,r,n),t.mesh.delete(n),r=(n=r).Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n))},e.initPriorityQ=function(e){var t,n,i,r=0;for(n=(i=e.mesh.vHead).next;n!==i;n=n.next)r++;for(r+=8,t=e.pq=new oR(r,$I.vertLeq),n=(i=e.mesh.vHead).next;n!==i;n=n.next)n.pqHandle=t.insert(n);return n===i&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,n){var i,r,a;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,JI((a=i.anEdge).Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,n){var i,r;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(i=t.pq.extractMin());){for(;null!==(r=t.pq.min())&&$I.vertEq(r,i);)r=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,r.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),dR=function(){function e(){this.mesh=new iR,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=zI.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,n,i,r,a,o,s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0],d=[0,0,0],h=[null,null,null],f=[null,null,null],p=this.mesh.vHead;t=p.next;for(var v=0;v<3;++v)r=t.coords[v],l[v]=r,f[v]=t,s[v]=r,h[v]=t;for(t=p.next;t!==p;t=t.next)for(var m=0;m<3;++m)(r=t.coords[m])<l[m]&&(l[m]=r,f[m]=t),r>s[m]&&(s[m]=r,h[m]=t);var g=0;if(s[1]-l[1]>s[0]-l[0]&&(g=1),s[2]-l[2]>s[g]-l[g]&&(g=2),l[g]>=s[g])return e[0]=0,e[1]=0,void(e[2]=1);for(o=0,n=f[g],i=h[g],u[0]=n.coords[0]-i.coords[0],u[1]=n.coords[1]-i.coords[1],u[2]=n.coords[2]-i.coords[2],t=p.next;t!==p;t=t.next)c[0]=t.coords[0]-i.coords[0],c[1]=t.coords[1]-i.coords[1],c[2]=t.coords[2]-i.coords[2],d[0]=u[1]*c[2]-u[2]*c[1],d[1]=u[2]*c[0]-u[0]*c[2],d[2]=u[0]*c[1]-u[1]*c[0],(a=d[0]*d[0]+d[1]*d[1]+d[2]*d[2])>o&&(o=a,e[0]=d[0],e[1]=d[1],e[2]=d[2]);o<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(u)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,n=this.mesh.fHead,i=this.mesh.vHead,r=0,a=n.next;a!==n;a=a.next)if(!((t=a.anEdge).winding<=0))do{r+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==a.anEdge);if(r<0){for(e=i.next;e!==i;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,n=this.mesh.vHead,i=[0,0,0],r=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),r=!0),e=this.sUnit,t=this.tUnit;var a=this.longAxis_(i);e[a]=0,e[(a+1)%3]=1,e[(a+2)%3]=0,t[a]=0,t[(a+1)%3]=0,t[(a+2)%3]=i[a]>0?1:-1;for(var o=n.next;o!==n;o=o.next)o.s=this.dot_(o.coords,e),o.t=this.dot_(o.coords,t);r&&this.checkOrientation_();for(var s=!0,l=n.next;l!==n;l=l.next)s?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,s=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var n,i;if((n=t.anEdge).Lnext===n||n.Lnext.Lnext===n)throw"Mono region invalid";for(;$I.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;$I.vertLeq(n.Org,n.Dst);n=n.Lnext);i=n.Lprev;for(;n.Lnext!==i;)if($I.vertLeq(n.Dst,i.Org)){for(;i.Lnext!==n&&($I.edgeGoesLeft(i.Lnext)||$I.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);)i=e.connect(i.Lnext,i).Sym;i=i.Lprev}else{for(;i.Lnext!==n&&($I.edgeGoesRight(n.Lprev)||$I.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)n=e.connect(n,n.Lprev).Sym;n=n.Lnext}if(i.Lnext===n)throw"Mono region invalid";for(;i.Lnext.Lnext!==n;)i=e.connect(i.Lnext,i).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},e.prototype.setWindingNumber_=function(e,t,n){for(var i,r=e.eHead.next;r!==e.eHead;r=i)i=r.next,r.Rface.inside!==r.Lface.inside?r.winding=r.Lface.inside?t:-t:n?e.delete(r):r.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,n,i){var r,a,o=0,s=0;n>3&&e.mergeConvexFaces(n);for(var l=e.vHead.next;l!==e.vHead;l=l.next)l.n=-1;for(var u=e.fHead.next;u!==e.fHead;u=u.next)if(u.n=-1,u.inside){r=u.anEdge,a=0;do{-1===(l=r.Org).n&&(l.n=s,s++),a++,r=r.Lnext}while(r!==u.anEdge);if(a>n)throw"Face vertex greater that support polygon";u.n=o,++o}this.elementCount=o,t===FI.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*i,this.vertexIndices=[],this.vertexIndices.length=s;for(l=e.vHead.next;l!==e.vHead;l=l.next)if(-1!==l.n){var c=l.n*i;this.vertices[c+0]=l.coords[0],this.vertices[c+1]=l.coords[1],i>2&&(this.vertices[c+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var d=0;for(u=e.fHead.next;u!==e.fHead;u=u.next)if(u.inside){r=u.anEdge,a=0;do{l=r.Org;this.elements[d++]=l.n,a++,r=r.Lnext}while(r!==u.anEdge);for(var h=a;h<n;++h)this.elements[d++]=-1;if(t===FI.CONNECTED_POLYGONS){r=u.anEdge;do{this.elements[d++]=this.getNeighbourFace_(r),r=r.Lnext}while(r!==u.anEdge);for(var f=a;f<n;++f)this.elements[d++]=-1}}},e.prototype.outputContours_=function(e,t){var n,i,r=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=e.fHead.next;o!==e.fHead;o=o.next)if(o.inside){i=n=o.anEdge;do{this.vertexCount++,n=n.Lnext}while(n!==i);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,l=0,u=0;r=0;for(o=e.fHead.next;o!==e.fHead;o=o.next)if(o.inside){a=0,i=n=o.anEdge;do{this.vertices[s++]=n.Org.coords[0],this.vertices[s++]=n.Org.coords[1],t>2&&(this.vertices[s++]=n.Org.coords[2]),this.vertexIndices[l++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,a++,n=n.Lnext}while(n!==i);this.elements[u++]=r,this.elements[u++]=a,r+=a}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new iR),e<2&&(e=2),e>3&&(e=3);for(var n=null,i=0;i<t.length;i+=e)null===n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[i+0],n.Org.coords[1]=t[i+1],n.Org.coords[2]=e>2?t[i+2]:0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(e,t,n,i,r,a){if(void 0===e&&(e=zI.ODD),void 0===t&&(t=FI.POLYGONS),void 0===a&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,r&&(this.normal[0]=r[0],this.normal[1]=r[1],this.normal[2]=r[2]),this.windingRule=e,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),cR.computeInterior(this,a);var o=this.mesh;return t===FI.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),t===FI.BOUNDARY_CONTOURS?this.outputContours_(o,i):this.outputPolymesh_(o,t,n,i),!0},e}();function hR(e){var t=e.windingRule,n=void 0===t?zI.ODD:t,i=e.elementType,r=void 0===i?FI.POLYGONS:i,a=e.polySize,o=void 0===a?3:a,s=e.vertexSize,l=void 0===s?2:s,u=e.normal,c=void 0===u?[0,0,1]:u,d=e.contours,h=void 0===d?[]:d,f=e.strict,p=void 0===f||f,v=e.debug,m=void 0!==v&&v;if(!h&&p)throw new Error("Contours can't be empty");if(h){var g=new dR;e.edgeCreateCallback&&(g.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(g.vertexIdCallback=e.vertexIdCallback);for(var L=0;L<h.length;L++)g.addContour(l||2,h[L]);return g.tesselate(n,r,o,l,c,p),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:m?g.mesh:void 0}}}zI.ODD,zI.NONZERO,zI.POSITIVE,zI.NEGATIVE,zI.ABS_GEQ_TWO,FI.POLYGONS,FI.CONNECTED_POLYGONS,FI.BOUNDARY_CONTOURS;var fR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,c.Z)(this,e),this.capacity=t,this.size=0,this.debug=n,this.debug&&console.log("allocating with cap ".concat(t));var i=t*e.eSize;this.buffer=new ArrayBuffer(i);var r=Float32Array.BYTES_PER_ELEMENT,a=0;this.positions=new Float32Array(this.buffer,a*r,3*t),a+=3*t,this.normals=new Float32Array(this.buffer,a*r,3*t),a+=3*t,this.uvs=new Float32Array(this.buffer,a*r,2*t)}return(0,d.Z)(e,[{key:"realloc",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t<this.size)throw Error("cannot shrink buffer");if(!(t<=this.capacity)||n){this.debug&&console.log("resizing from ".concat(this.capacity," \u2192 ").concat(t));var i=t*e.eSize,r=new ArrayBuffer(i),a=Float32Array.BYTES_PER_ELEMENT,o=0,s=new Float32Array(r,o*a,3*t);o+=3*t;var l=new Float32Array(r,o*a,3*t);o+=3*t;var u=new Float32Array(r,o*a,2*t);n?(s.set(this.positions.subarray(0,3*this.size)),l.set(this.normals.subarray(0,3*this.size)),u.set(this.uvs.subarray(0,2*this.size))):(s.set(this.positions),l.set(this.normals),u.set(this.uvs)),this.buffer=r,this.positions=s,this.normals=l,this.uvs=u,this.capacity=t}}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.size+e;if(t>this.capacity){for(var n=this.capacity;t>n;)n*=2;this.realloc(n)}var i=this.size;return this.size=t,i}},{key:"reserve",value:function(e){var t=this.size+e;t>this.capacity&&this.realloc(t)}},{key:"shrink",value:function(){this.debug&&console.log("shrinking ".concat(this.capacity," \u2192 ").concat(this.size)),this.realloc(this.size,!0)}}]),e}(),pR=fR;pR.eSize=8*Float32Array.BYTES_PER_ELEMENT;var vR=ac(uc()),mR={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},gR={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},LR={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},yR=function(e,t){return function(n){var i=o(n,2),r=i[0],a=i[1];return a<r&&(a+=t),(e>=r?e:e+t)<=a}},bR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zI.ODD,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,c.Z)(this,n),(r=t.call(this)).forPathBevel=h,r.type="ShapeGeometry",r.vertexCache={},r._shape=e,r._depth=i,r._curveSegments=s,r._bevelSegmentsInput=l;for(var f=r._shape.extractShapePointsToFlatArray([],s),p=r._shape.shapeHoles.map((function(e){for(var t=e.extractShapePointsToFlatArray([],s),n=[],i=t.length-1;i>=1;i-=2){var r=t[i-1],a=t[i-0];n.push(r,a)}return n})),v=[],m=[],g=0;g<f.length;g+=2)m.push([f[g],f[g+1]]);v.push(m);for(var L=0;L<p.length;L++){for(var y=p[L],b=[],x=0;x<y.length;x+=2)b.push([y[x],y[x+1]]);v.push(b)}var w,_,S=v[0].length?(0,vR.default)(v).distance:a;a<=0?(r._bevel=0,r._bevelSegments=0):(r._bevel=Math.min(a,S,i/2),r._bevelSegments=Math.floor(l));try{w=hR({windingRule:d,elementType:FI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[f]})}catch(kt){w=mR}try{_=hR({windingRule:zI.ODD,elementType:FI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:u(p)})}catch(At){_=gR}if(!w)throw new Error("error generating geometry");var k=w.elementCount;if(_){w.elementCount+=_.elementCount;for(var A=0;A<_.elements.length;A++){var M=_.elements[A],C=A%2===0?w.vertexCount:0;w.elements.push(M+C)}for(var E=0;E<_.vertexIndices.length;E++){var T=_.vertexIndices[E],P=w.vertexCount;w.vertexIndices.push(T+P)}for(var D=0;D<_.vertices.length;D++){var O=_.vertices[D];w.vertices.push(O)}}for(var I=1/0,R=-1/0,B=1/0,N=-1/0,z=0,F=w.vertexCount;z<F;z++){var j=2*z,U=w.vertices[j+0],Z=w.vertices[j+1];U<I&&(I=U),U>R&&(R=U),Z<B&&(B=Z),Z>N&&(N=Z)}r._minX=I,r._minY=B,r._width=R-I,r._height=N-B,r._buffer=new pR(r._computeBufferEstimatedSize(w));for(var V=[],G=[],H=w.elementCount-1;H>=0;H--){var W=H>=k,q=2*H,X=w.elements[q+0],Y=w.elements[q+1],Q=X+Y,K={start:X,count:Y,normals:[],continuous:[],concave:[]},J=X,$=Q-1,ee=X+1,te=r._shape.roundedCurves.length;do{var ne,ie=J-X,re=w.vertices[2*$+0],ae=w.vertices[2*$+1],oe=w.vertices[2*J+0],se=w.vertices[2*J+1],le=w.vertices[2*ee+0],ue=w.vertices[2*ee+1],ce=oe-re,de=se-ae,he=Math.sqrt(ce*ce+de*de);ce/=he,de/=he;var fe=oe-le,pe=se-ue,ve=Math.sqrt(fe*fe+pe*pe);fe/=ve,pe/=ve,K.normals[2*ie+0]=-pe,K.normals[2*ie+1]=fe,K.concave[ie]=ce*pe-de*fe>0;var me=w.vertexIndices[J];if(Array.isArray(me))K.continuous[ie]=!1;else{var ge=o(r._shape.getCurveIndexFromVertexId(me-1,!0),2),Le=ge[0],ye=ge[1];if(ye>0&&ye<1)K.continuous[ie]=!0;else{var be=1===ye?Le+1:Le-1;be=(be+te)%te;var xe=1===ye?0:1,we=r._shape.roundedCurves[Le].getTangent(ye),_e=r._shape.roundedCurves[be].getTangent(xe);K.continuous[ie]=we.dot(_e)>.95}}W&&(K.normals[2*ie+0]*=-1,K.normals[2*ie+1]*=-1),$=(ne=[J,ee,ee+1])[0],J=ne[1],(ee=ne[2])>=Q&&(ee-=Y)}while(ee!==X+1);var Se=[];Se.push({bevelI:0,angle:0,size:0,boundary:{vertices:w.vertices.slice(2*X,2*Q),vertexCount:Y,vertexIndices:new Array(Y).fill(!0).map((function(e,t){return[t,t]})),elements:[0,Y],elementCount:1,mesh:null},reverseMap:[],insetPoints:w.vertices.slice(2*X,2*Q)});for(var ke=0,Ae=function(){for(var e=Me/r._bevelSegments*Math.PI/2,t=(1-Math.cos(e))*r._bevel,n=[],i=[],a=[],l=[],u=0,c=0;c<Y;c++){var d=2*c,h=(c-1+Y)%Y*2,f=w.vertices[2*K.start+d+0],p=w.vertices[2*K.start+d+1],v=-K.normals[h+0]*t,m=-K.normals[h+1]*t,g=-K.normals[d+0]*t,L=-K.normals[d+1]*t;if(K.concave[c]||!K.concave[c]&&W){var y=Math.atan2(m,v),b=Math.atan2(L,g);b>y&&(b-=2*Math.PI);var x=b-y;if(K.continuous[c]||W){var _=y+x/2,S=Math.cos(_)*t,k=Math.sin(_)*t;n[2*u+0]=f+S*(W?-1:1),n[2*u+1]=p+k*(W?-1:1),l[u]=c,u++}else for(var A=Math.max(1,Math.floor(s/4*Math.abs(x)/Math.PI)),M=0;M<=A;M++){var C=y+x*(M/A),E=Math.cos(C)*t,T=Math.sin(C)*t;n[2*u+0]=f+E,n[2*u+1]=p+T,l[u]=c,u++}}else n[2*u+0]=f+v,n[2*u+1]=p+m,l[u]=c,i[c]=u,n[2*++u+0]=f,n[2*u+1]=p,l[u]=c,n[2*++u+0]=f+g,n[2*u+1]=p+L,l[u]=c,a[c]=u,u++}var P=hR({windingRule:zI.POSITIVE,elementType:FI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[n],edgeCreateCallback:function(e){var t=e.Org.idx,n=l[t],i=l[(t+1)%l.length];e.idx=[n,i],e.Sym.idx=[i,n]},vertexIdCallback:function(e){var t=e.Lprev.idx;return[t?t[1]:0,e.idx?e.idx[0]:0]}});if(!P)throw console.log("Error"),new Error("error generating bevel geometry for ".concat(Me,"'th loop"));if(!P.vertexCount){var D=(Me-1)/r._bevelSegments*Math.PI/2;return ke=(1-Math.sin(D))*r._bevel,1}for(var O=0;O<P.vertexIndices.length;O++){var I=o(P.vertexIndices[O],2),R=I[0],B=I[1];if(R!==B){var N=B;B<R&&(N+=Y);for(var z=R;z<N;z++){var F=z%Y,j=(z+1)%Y;if(!K.continuous[F]||!K.continuous[j]){P.vertexIndices[O]=[R,F],P.vertexIndices.splice(O+1,0,[j,B]),P.vertices.splice(2*(O+1),0,P.vertices[2*O],P.vertices[2*O+1]);break}}}}Se.push({bevelI:Me,angle:e,size:t,boundary:P,reverseMap:l,insetPoints:n})},Me=1;Me<=r._bevelSegments&&!Ae();Me++);for(var Ce=function(e,t,n){for(var i=0,r=e.boundary.vertexIndices.length;i<r&&n(e.boundary.vertexIndices[t]);)t=(t+1)%r,i++;return i},Ee=V.length,Te=1;Te<Se.length;Te++){var Pe=Se[Te-1],De=Se[Te],Oe=Pe.boundary.vertexIndices.length,Ie=De.boundary.vertexIndices.length;if(!Oe||!Ie)break;for(var Re=K.concave.length,Be=0,Ne=yR(Be,Y);!Pe.boundary.vertexIndices.filter(Ne).length||!De.boundary.vertexIndices.filter(Ne).length;)Be++,Ne=yR(Be,Y);var ze=Pe.boundary.vertexIndices.findIndex(Ne),Fe=De.boundary.vertexIndices.findIndex(Ne);do{ze=(ze+1)%Oe}while(Ne(Pe.boundary.vertexIndices[ze]));do{Fe=(Fe+1)%Ie}while(Ne(De.boundary.vertexIndices[Fe]));var je=Be=(Be+1)%Y,Ue=0,Ze=r._buildBevelVert(K,Pe,(ze-1+Oe)%Oe,void 0,Ue),Ve=r._buildBevelVert(K,De,(Fe-1+Ie)%Ie,void 0,Ue),Ge=void 0,He=void 0,We=!1;do{Ue=(Be||Re)/Re;var qe=Ce(Pe,ze,Ne=yR(Be,Y)),Xe=Ce(De,Fe,Ne),Qe=We;if(We=!1,qe&&!Xe){for(var Ke=0;Ke<qe;Ke++)Ge=r._buildBevelVert(K,Pe,(ze+Ke)%Oe,Ke/(qe-1),Ue),V.push(Ze.topN,Ge.topP,Ve.topN),!1===h&&V.push(Ge.bottomP,Ze.bottomN,Ve.bottomN),Ze=Ge;We=!0}else if(!qe&&Xe)for(var Je=0;Je<Xe;Je++)He=r._buildBevelVert(K,De,(Fe+Je)%Ie,Je/(Xe-1),Ue),V.push(Ve.topN,Ze.topP,He.topP),!1===h&&V.push(Ze.bottomP,Ve.bottomN,He.bottomP),Ve=He;else if(qe&&Xe)if(Ge=r._buildBevelVert(K,Pe,ze,0,Ue),He=r._buildBevelVert(K,De,Fe,0,Ue),Qe?(V.push(Ze.topN,He.topP,Ve.topN),V.push(Ze.topN,Ge.topP,He.topP),!1===h&&(V.push(He.bottomP,Ze.bottomN,Ve.bottomN),V.push(He.bottomP,Ge.bottomP,Ze.bottomN))):(V.push(Ve.topN,Ze.topN,Ge.topP),V.push(Ve.topN,Ge.topP,He.topP),!1===h&&(V.push(Ge.bottomP,Ze.bottomN,Ve.bottomN),V.push(Ge.bottomP,Ve.bottomN,He.bottomP))),Ze=Ge,Ve=He,qe===Xe)for(var $e=1;$e<qe;$e++)Ge=r._buildBevelVert(K,Pe,(ze+$e)%Oe,$e/(qe-1),Ue),He=r._buildBevelVert(K,De,(Fe+$e)%Ie,$e/(Xe-1),Ue),V.push(Ze.topN,Ge.topP,Ve.topN),V.push(Ve.topN,Ge.topP,He.topP),!1===h&&(V.push(Ge.bottomP,Ze.bottomN,Ve.bottomN),V.push(Ge.bottomP,Ve.bottomN,He.bottomP)),Ze=Ge,Ve=He;else if(qe>Xe)for(var et=qe/Xe,tt=0,nt=1;nt<qe;nt++)Ge=r._buildBevelVert(K,Pe,(ze+nt)%Oe,nt/(qe-1),Ue),V.push(Ze.topN,Ge.topP,Ve.topN),!1===h&&V.push(Ge.bottomP,Ze.bottomN,Ve.bottomN),Ze=Ge,nt>(tt+1)*et&&(tt++,He=r._buildBevelVert(K,De,(Fe+tt)%Ie,tt/(Xe-1),Ue),V.push(Ve.topN,Ge.topP,He.topP),!1===h&&V.push(Ge.bottomP,Ve.bottomN,He.bottomP),Ve=He);else for(var it=Xe/qe,rt=0,at=1;at<Xe;at++)He=r._buildBevelVert(K,De,(Fe+at)%Ie,at/(Xe-1),Ue),V.push(Ve.topN,Ge.topP,He.topP),!1===h&&V.push(Ge.bottomP,Ve.bottomN,He.bottomP),Ve=He,at>(rt+1)*it&&(rt++,Ge=r._buildBevelVert(K,Pe,(ze+rt)%Oe,rt/(qe-1),Ue),V.push(Ze.topN,Ge.topP,Ve.topN),!1===h&&V.push(Ge.bottomP,Ze.bottomN,Ve.bottomN),Ze=Ge);ze=(ze+qe)%Oe,Fe=(Fe+Xe)%Ie,Be=(Be+1)%Re}while(Be!==je)}if(!1===h&&r._depth>2*r._bevel&&r._buildWall(Se,K,V),W){for(var ot=[],st=V.length-1;st>=Ee+2;st-=3){var lt=V[st-2],ut=V[st-1],ct=V[st-0];ot.push(ct,ut,lt)}V.splice.apply(V,[Ee,V.length-Ee].concat(ot))}if(W){for(var dt=[],ht=Se[Se.length-1].boundary.vertices.length-1;ht>=1;ht-=2){var ft=Se[Se.length-1].boundary.vertices[ht-1],pt=Se[Se.length-1].boundary.vertices[ht-0];dt.push(ft,pt)}G.push(dt)}if(!W){var vt=Se[Se.length-1],mt=void 0;try{mt=hR({windingRule:Se.length>1?zI.POSITIVE:zI.ODD,elementType:FI.POLYGONS,vertexSize:2,strict:!0,contours:[vt.insetPoints].concat(G)})}catch(Mt){mt=LR}if(!mt)throw new Error("Error generating geometry for surface");0===p.length&&r._bevel<S&&Object.assign((0,Ye.Z)(r),{useNgonForTopBottomFaceDuringBake:!0});for(var gt=0;gt<3*mt.elementCount;gt+=3){var Lt=r._buildSurfaceVert(mt,mt.elements[gt+0],ke),yt=r._buildSurfaceVert(mt,mt.elements[gt+1],ke),bt=r._buildSurfaceVert(mt,mt.elements[gt+2],ke);V.push(Lt.top,yt.top,bt.top),!1===h&&V.push(bt.bottom,yt.bottom,Lt.bottom)}}r.vertexCache={}}r._buffer.shrink();var xt=new $p(Uint32Array.from(V),1),wt=new $p(r._buffer.positions,3),_t=new $p(r._buffer.normals,3),St=new $p(r._buffer.uvs,2);return wt.needsUpdate=!0,_t.needsUpdate=!0,St.needsUpdate=!0,xt.needsUpdate=!0,r.setAttribute("position",wt),r.setAttribute("normal",_t),r.setAttribute("uv",St),r.setIndex(xt),r}return(0,d.Z)(n,[{key:"_computeBufferEstimatedSize",value:function(e){return 2*e.vertexCount*(2+this._bevelSegments)}},{key:"_buildWall",value:function(e,t,n){for(var i=e[0],r=0,a=i.boundary.vertexCount;r<a;r++){var o=this._buildBevelVert(t,i,r),s=this._buildBevelVert(t,i,(r+1)%a);n.push(s.topP,o.topN,o.bottomN),n.push(s.topP,o.bottomN,s.bottomP)}}},{key:"_buildSurfaceVert",value:function(e,t,n){var i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];var r=e.vertices[2*t+0],a=e.vertices[2*t+1],o=(r-this._minX)/this._width,s=(a-this._minY)/this._height;this.forPathBevel&&(s=1);var l=this._buffer.get(this.forPathBevel?1:2),u=3*l,c=2*l,d={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=r,this._buffer.positions[u+1]=a,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-n,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[c+0]=o,this._buffer.uvs[c+1]=s,!1===this.forPathBevel&&(this._buffer.positions[u+3]=r,this._buffer.positions[u+4]=a,this._buffer.positions[u+5]=n,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[c+2]=o,this._buffer.uvs[c+3]=s),this.vertexCache[i]=d,d}},{key:"_buildBevelVert",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0,a="".concat(t.bevelI,":").concat(n);if(a in this.vertexCache&&0!==r&&1!==r&&(!r||r===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];var s,l,u,c,d=o(t.boundary.vertexIndices[n],2),h=d[0],f=d[1];h!==f?(l=h,s=f,c=!1,u=e.continuous[l]&&e.continuous[s]):(l=((s=h)-1+e.count)%e.count,c=e.concave[s]&&t.bevelI>0,u=e.continuous[s]||c);var p=Math.cos(t.angle),v=Math.sin(t.angle),m=2*n,g=2*s,L=2*l,y=t.boundary.vertices[m+0],b=t.boundary.vertices[m+1],x=(1-v)*this._bevel,w=(y-this._minX)/this._width,_=(b-this._minY)/this._height;this.forPathBevel&&(void 0!==r&&(w=r),_=1);var S=e.normals[g+0],k=e.normals[g+1],A=e.normals[L+0],M=e.normals[L+1];if(c){S+=(A-S)*(1-i),k+=(M-k)*(1-i);var C=Math.sqrt(S*S+k*k);S/=C,k/=C}var E=this.forPathBevel?this._buffer.get(u?1:2):this._buffer.get(u?2:4),T=3*E,P=2*E,D={i:n,fi:s,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1,pathBevelUCoord:r};return this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=b,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=S*p,this._buffer.normals[T+1]=k*p,this._buffer.normals[T+2]=v,this._buffer.uvs[P+0]=w,this._buffer.uvs[P+1]=_,!1===this.forPathBevel&&(this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=b,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=S*p,this._buffer.normals[T+4]=k*p,this._buffer.normals[T+5]=-v,this._buffer.uvs[P+2]=_,this._buffer.uvs[P+3]=w),u||(this.forPathBevel?(E+=1,T+=3,P+=2):(E+=2,T+=6,P+=4),D.topP=E+0,D.bottomP=E+1,this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=b,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=A*p,this._buffer.normals[T+1]=M*p,this._buffer.normals[T+2]=v,this._buffer.uvs[P+0]=w,this._buffer.uvs[P+1]=_,!1===this.forPathBevel&&(this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=b,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=A*p,this._buffer.normals[T+4]=M*p,this._buffer.normals[T+5]=-v,this._buffer.uvs[P+2]=_,this._buffer.uvs[P+3]=w)),this.vertexCache[a]=D,D}},{key:"clone",value:function(){var e=new n(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=kA(this.userData),e}}]),n}(cv),xR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r,a,o,s,l,d,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,n),(d=t.call(this)).type="ShapeGeometry",d.windingRule=zI.ODD,d.elementType=FI.POLYGONS,d.polySize=3,d.vertexSize=2,d.strict=!0,d._shape=e,d._curveSegments=h,d._triangulationOptions=Object.assign({windingRule:zI.ODD,elementType:FI.POLYGONS,polySize:3,vertexSize:2,strict:!0},f);for(var p,v,m,g=d._shape.extractShapePointsToFlatArray([],d._curveSegments),L=d._shape.shapeHoles.map((function(e){return e.extractShapePointsToFlatArray([],d._curveSegments)})),y=!0,b=!0,x=0,w=g.length/2;x<w;x++){var _=2*x,S=g[_+0],k=g[_+1];if(void 0!==v&&S!==v&&(y=!1),void 0!==m&&k!==m&&(b=!1),v=S,m=k,!y&&!b)break}if(!y&&!b)try{p=hR({contours:[g].concat(u(L)),windingRule:d._triangulationOptions.windingRule,elementType:d._triangulationOptions.elementType,polySize:d._triangulationOptions.polySize,vertexSize:d._triangulationOptions.vertexSize,strict:d._triangulationOptions.strict})}catch(J){p=mR}var A=null!==(i=null===(r=p)||void 0===r?void 0:r.vertexCount)&&void 0!==i?i:1,M=null!==(a=null===(o=p)||void 0===o?void 0:o.elementCount)&&void 0!==a?a:1;if(d._positionAttribute=new $p(new Float32Array(3*A),3),d._normalAttribute=new $p(new Float32Array(3*A),3),d._uvAttribute=new $p(new Float32Array(2*A),2),d._indexAttribute=new $p(new Uint32Array(3*M),1),p){for(var C=1/0,E=-1/0,T=1/0,P=-1/0,D=0,O=A;D<O;D++){var I=2*D,R=p.vertices[I+0],B=p.vertices[I+1];R<C&&(C=R),R>E&&(E=R),B<T&&(T=B),B>P&&(P=B)}for(var N=E-C,z=P-T,F=0,j=A;F<j;F++){var U=2*F,Z=p.vertices[U+0],V=p.vertices[U+1],G=(Z-C)/N,H=(V-T)/z;d._positionAttribute.setXYZ(F,Z,V,0),d._normalAttribute.setXYZ(F,0,0,1),d._uvAttribute.setXY(F,G,H)}for(var W=0,q=M;W<q;W++){var X=3*W,Y=p.elements[X+0],Q=p.elements[X+1],K=p.elements[X+2];d._indexAttribute.setX(X+0,Y),d._indexAttribute.setX(X+1,Q),d._indexAttribute.setX(X+2,K)}}return d.setAttribute("position",d._positionAttribute),d.setAttribute("normal",d._normalAttribute),d.setAttribute("uv",d._uvAttribute),d.setIndex(d._indexAttribute),d.setDrawRange(0,3*(null!==(s=null===(l=p)||void 0===l?void 0:l.elementCount)&&void 0!==s?s:1)),d}return(0,d.Z)(n,[{key:"clone",value:function(){var e=new n(this._shape,this._curveSegments);return e.userData=kA(this.userData),e}}]),n}(cv),wR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zI.ODD;return(0,c.Z)(this,n),(r=t.call(this,e,i,a,o,s,l)).type="ShapeGeometry",r}return(0,d.Z)(n,[{key:"_computeBufferEstimatedSize",value:function(e){return 2*e.vertexCount*(2+this._bevelSegments)}},{key:"_buildWall",value:function(e,t,n){for(var i=e[0],r=0,a=i.boundary.vertexCount;r<a;r++){var o=this._buildBevelVert(t,i,r),s=this._buildBevelVert(t,i,(r+1)%a);n.push(s.topP,o.topN,o.bottomN),n.push(s.topP,o.bottomN,s.bottomP)}}},{key:"clone",value:function(){var e=new n(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=kA(this.userData),e}}]),n}(bR),_R=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o,s,l,u,c,d=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:zI.ODD},e.parameters),h=Math.abs(d.width),f=Math.abs(null!==(i=d.height)&&void 0!==i?i:d.width),p=Math.abs(null!==(r=d.depth)&&void 0!==r?r:0),v=null!==(a=e.shape)&&void 0!==a?a:null===t||void 0===t?void 0:t.shape,m=null!==(o=null===(s=v)||void 0===s?void 0:s.roundness)&&void 0!==o?o:d.roundness;void 0!==v&&(v instanceof WI?(v.width!==h||v.height!==f)&&v.applySize(h,f):v=new WI(h,f).fromJSON(v),void 0!==(null===(l=e.parameters)||void 0===l?void 0:l.roundness)&&(null===(u=e.parameters)||void 0===u?void 0:u.roundness)>0&&v.update());var g=null!==(c=v)&&void 0!==c?c:new WI(h,f);return{parameters:Object.assign(d,{width:h,height:f,depth:p,roundness:m}),shape:g}}},{key:"build",value:function(e){var t,n=e.parameters,i=n.depth,r=n.extrudeBevelSize,a=n.extrudeBevelSegments,o=n.subdivisions,s=n.roundness,l=n.windingRule;return e.shape.roundness=s,t=i<=0?new xR(e.shape,o,{windingRule:l}):new wR(e.shape,i,r,o,a,l),Object.assign(t,{userData:$e($e({},e),{},{type:"VectorGeometry"})})}}]),e}(),SR=2*Math.PI,kR=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof WI?e.shape:new WI,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.spikes,a=t.angle,o=t.innerRadius,s=t.depth,l=t.extrudeBevelSize,u=t.extrudeBevelSegments,c=e.shape,d=function(e,t,n,i,r,a){if(i>=SR)return r>30||r%4===0?(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=.5522847498,s=t*o,l=n*o;e.addPoint(CR(r-t,a,r-t,a-l,r-t,a+l)),e.addPoint(CR(r,a+n,r-s,a+n,r+s,a+n)),e.addPoint(CR(r+t,a,r+t,a+l,r+t,a-l)),e.addPoint(CR(r,a-n,r+s,a-n,r-s,a-n)),i>0&&TR(e,t,n,i)}(e,t,n,a),Math.round(r/4)):AR(e,i,r,t,n,a);i=Math.max(i,.001);var o={x:0,y:n},s=i+.5*Math.PI,l={x:Math.cos(s)*t,y:Math.sin(s)*n},u=KI({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%u.length===0?function(e,t,n,i,r,a,o,s){var l=Math.round(r/i.length);e.addPoint(MR(t,n));for(var u=0,c=i.length;u<c;u++){var d=i[u],h=e.points[u],f=MR(d.x,d.y);h.controls[1].position.set(d.x1,d.y1),f.controls[0].position.set(d.x2,d.y2),e.addPoint(f)}return s>0?ER(e,a,o,s):e.addPoint(MR(0,0)),l}(e,o.x,o.y,u,r,t,n,a):AR(e,i,r,t,n,a)}(c,.5*n,.5*i,a*Math.PI/180,r,o);c.isClosed=!0,c.update();var h=_R.create({shape:c,parameters:{subdivisions:d,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(h,{userData:$e($e({},e),{},{type:"EllipseGeometry"})})}}]),e}();function AR(e,t,n,i,r,a){for(var o=-t/n,s=0;s<=n;s++){var l=o*s,u=Math.sin(l)*i,c=Math.cos(l)*r;e.addPoint(MR(u,c))}return t<SR?a>0?ER(e,i,r,a):e.addPoint(MR(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&TR(e,i,r,a)),1}function MR(e,t){return new pI(rf.generateUUID(),new af(e,t))}function CR(e,t,n,i,r,a){var o=MR(e,t);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,a),o}function ER(e,t,n,i){PR(e,t,n,i).forEach((function(t){return e.addPoint(t)}))}function TR(e,t,n,i){var r=PR(e,t,n,i),a=new WI;r.forEach((function(e){return a.addPoint(e)})),a.isClosed=!0,e.shapeHoles.push(a)}function PR(e,t,n,i){var r=i*t/100,a=r*(Math.abs(n)/Math.abs(t)),o=new af(r/t,a/n),s=e.points.map((function(e){var t=e.clone();return t.uuid=rf.generateUUID(),t})).reverse();return s.forEach((function(e){e.position.multiply(o);var t=e.controls[0].position.clone().multiply(o),n=e.controls[1].position.clone().multiply(o);e.controls[0].position.copy(n),e.controls[1].position.copy(t)})),s}var DR=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),o=Math.abs(a.width),s=Math.abs(null!==(i=a.height)&&void 0!==i?i:o),l=Math.abs(null!==(r=a.depth)&&void 0!==r?r:o),u=Math.abs(Math.min(o,l))/2;return{parameters:Object.assign(a,{width:o,height:s,depth:l,radius:u,segments:Math.round(a.segments),pathSegments:Math.round(a.pathSegments),cornerSegments:Math.round(a.cornerSegments)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.radius,o=t.revolutions,s=t.segments,l=t.pathRadius,u=t.pathType,c=t.pathSegments,d=t.cornerRadius,h=t.cornerSegments,f=new IR(!1,n,i,r,a,o,s,l,u,c,d,h);return Object.assign(f,{userData:$e($e({},e),{},{type:"HelixGeometry"})})}}]),e}(),OR=new tv([0,0,0],1),IR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;if((0,c.Z)(this,n),e=t.call(this),0===s)return(0,Xe.Z)(e);var p=i&&1===s;p&&(f=0),h>100&&(h=100),0===h&&(f=0);var v,m,g,L,y,b,x,w,_=function(){return new Rf},S=new Rf,k=_(),A=_(),M=_(),C=_(),E=_(),T=_(),P=_(),D=_(),O=_(),I=_(),R=_(),B=r-2*u+.001,N=B/s,z=Math.ceil(l*s),F=z+1,j=B/z,U=-B/2,Z=d+1,V=2*Math.PI/d,G=Math.PI/2/f,H=Math.min((1-h/100)*u,u-.01),W=u-H,q=0,X=2*f+2,Y=Z*X/2,Q=Y+Z*F,K=Z*(F+X),J=[3,3,2].map((function(e){return Array(K*e).fill(0)})),$=o(J,3),ee=$[0],te=$[1],ne=$[2],ie=[],re=a-u;function ae(e,t){var n=Math.PI/2;b=t*j,w=2*Math.PI*(b%N)/N+n,b+=U,x=Math.sin(w)*re,y=Math.cos(w)*re,i?e.set(y,x,b):e.set(y,b,x)}ae(S,-1e-10),ae(k,0),C.copy(S),ae(S,1);for(var oe=S.distanceTo(k),se=p?0:W+H,le=oe*z+2*se,ue=H,ce=le-se,de=function(){ae(A,he),R.subVectors(A,C).normalize(),C.copy(A),O.copy(A).setComponent(+i+1,0).normalize(),I.crossVectors(R,O).normalize();for(var e=0===he,t=he===z,n=e?3*Math.PI/2:G,r=e?ue:ce,a=e?Z:Q,o=e?0:K-Z,s=R.clone().multiplyScalar(e?-W:W).add(A),l=R.clone().multiplyScalar(e?-1:1).normalize(),c=0;c<Z;c++){var h=c*V;if(E.addVectors(S.copy(O).multiplyScalar(u*Math.cos(h)),k.copy(I).multiplyScalar(u*Math.sin(h))),T.copy(E).normalize(),e||t){p||(q=o+c,[0,1,2].forEach((function(e){ee[3*q+e]=s.getComponent(e),te[3*q+e]=l.getComponent(e)})),ne[2*q]=+t,ne[2*q+1]=c/d),k.copy(T).multiplyScalar(H),M.addVectors(A,k);for(var v=0;v<f;v++){var m=v*G+n;P.addVectors(S.copy(R).multiplyScalar(W*Math.sin(m)),k.copy(T).multiplyScalar(W*Math.cos(m))),D.copy(P).normalize(),k.addVectors(M,P),P.normalize(),q=a+v*Z+c,[0,1,2].forEach((function(e){ee[3*q+e]=k.getComponent(e),te[3*q+e]=D.getComponent(e)}));var g=+e+Math.sin(m);ne[2*q]=(r+W*g)/le,ne[2*q+1]=c/d}}k.addVectors(A,E),q=Y+he*Z+c,[0,1,2].forEach((function(e){ee[3*q+e]=k.getComponent(e),te[3*q+e]=T.getComponent(e)})),ne[2*q]=(se+he*oe)/le,ne[2*q+1]=c/d}},he=0;he<=z;he++)de();for(var fe=F+2*f+2,pe=fe-1,ve=+p;ve<=pe-1;ve++)for(var me=p&&ve===pe-1,ge=0;ge<Z-1;ge++)m=(v=ve*Z+ge)+1,g=(me?ge:v)+Z,L=(me?ge+1:m)+Z,0===ve?ie.push(m,L,g):ve===fe-2?ie.push(v,m,g):ie.push(v,m,g,m,L,g);return e.setIndex(ie),e.setAttribute("position",new nv(ee,3)),e.setAttribute("normal",new nv(te,3)),e.setAttribute("uv",new nv(ne,2)),(0,Xe.Z)(e)}return(0,d.Z)(n,[{key:"getClosedTorusIndicesForBooleanOrSubdiv",value:function(){for(var e,t,n,i,r=this.userData.parameters,a=Math.ceil(r.tubularSegments),o=r.radialSegments+1,s=Array.from(this.getIndex().array),l=6*(a-1)*r.radialSegments,u=a,c=u===a,d=0;d<r.radialSegments;d++)t=(e=u*o+d)+1,n=(c?d:e)+o,i=(c?d+1:t)+o,s[l++]=e,s[l++]=t,s[l++]=n,s[l++]=t,s[l++]=i,s[l++]=n;return s.length=l,OR.array=s,OR.count=s.length,OR}}]),n}(cv),RR=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.detail,o=t.corner,s=t.cornerSides,l=0===a&&0!==o?new BR(.5*n,o,s):new Qy(.5*n,a);return l.scale(1,i/n,r/n),Object.assign(l,{userData:$e($e({},e),{},{type:"IcosahedronGeometry"})})}}]),e}(),BR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;(0,c.Z)(this,n);var o=(1+Math.sqrt(5))/2,s=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],l="IcosahedronGeometry";return(e=t.call(this,s,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l,i,r,a)).type=l,e}return(0,d.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.corner,e.cornerSides)}}]),n}(lI),NR=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o;(null!==(n=null===(i=e.parameters)||void 0===i?void 0:i.points)&&void 0!==n?n:[]).forEach((function(e){Array.isArray(e)&&(e.x=e[0],e.y=e[1])}));var s=Object.assign({},null!==(r=null===t||void 0===t?void 0:t.parameters)&&void 0!==r?r:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(a=s.height)&&void 0!==a?a:s.width),depth:Math.abs(null!==(o=s.depth)&&void 0!==o?o:s.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.points,i=t.segments,r=t.verticalSegments,a=new xy;a.moveTo(n[0].x,n[0].y),a.bezierCurveTo(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y);var o=new my(a.extractPoints(r).shape,i);return o.rotateZ(Math.PI),Object.assign(o,{userData:$e($e({},e),{},{type:"LatheGeometry"})})}}]),e}(),zR=new dp,FR=new Bp,jR=new Rf,UR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).uuid=rf.generateUUID(),e.name="",e.type="Geometry",e.vertices=[],e.colors=[],e.faces=[],e.faceVertexUvs=[[]],e.morphTargets=[],e.morphNormals=[],e.skinWeights=[],e.skinIndices=[],e.lineDistances=[],e.boundingBox=null,e.boundingSphere=null,e.elementsNeedUpdate=!1,e.verticesNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,e.groupsNeedUpdate=!1,e}return(0,d.Z)(n,[{key:"applyMatrix4",value:function(e){for(var t=(new of).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(var r=0,a=this.faces.length;r<a;r++){var o=this.faces[r];o.normal.applyMatrix3(t).normalize();for(var s=0,l=o.vertexNormals.length;s<l;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}},{key:"rotateX",value:function(e){return zR.makeRotationX(e),this.applyMatrix4(zR),this}},{key:"rotateY",value:function(e){return zR.makeRotationY(e),this.applyMatrix4(zR),this}},{key:"rotateZ",value:function(e){return zR.makeRotationZ(e),this.applyMatrix4(zR),this}},{key:"translate",value:function(e,t,n){return zR.makeTranslation(e,t,n),this.applyMatrix4(zR),this}},{key:"scale",value:function(e,t,n){return zR.makeScale(e,t,n),this.applyMatrix4(zR),this}},{key:"lookAt",value:function(e){return FR.lookAt(e),FR.updateMatrix(),this.applyMatrix4(FR.matrix),this}},{key:"fromBufferGeometry",value:function(e){var t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position,a=i.normal,o=i.color,s=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.count;u++)t.vertices.push((new Rf).fromBufferAttribute(r,u)),void 0!==o&&t.colors.push((new wf).fromBufferAttribute(o,u));function c(e,n,i,r){var u=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],c=void 0===a?[]:[(new Rf).fromBufferAttribute(a,e),(new Rf).fromBufferAttribute(a,n),(new Rf).fromBufferAttribute(a,i)],d=new VR(e,n,i,c,u,r);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([(new af).fromBufferAttribute(s,e),(new af).fromBufferAttribute(s,n),(new af).fromBufferAttribute(s,i)]),void 0!==l&&t.faceVertexUvs[1].push([(new af).fromBufferAttribute(l,e),(new af).fromBufferAttribute(l,n),(new af).fromBufferAttribute(l,i)])}var d=e.groups;if(d.length>0)for(var h=0;h<d.length;h++)for(var f=d[h],p=f.start,v=p,m=p+f.count;v<m;v+=3)void 0!==n?c(n.getX(v),n.getX(v+1),n.getX(v+2),f.materialIndex):c(v,v+1,v+2,f.materialIndex);else if(void 0!==n)for(var g=0;g<n.count;g+=3)c(n.getX(g),n.getX(g+1),n.getX(g+2));else for(var L=0;L<r.count;L+=3)c(L,L+1,L+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jR).negate(),this.translate(jR.x,jR.y,jR.z),this}},{key:"normalize",value:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new dp;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this}},{key:"computeFaceNormals",value:function(){for(var e=new Rf,t=new Rf,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}}},{key:"computeVertexNormals",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)t[n]=new Rf;if(e)for(var r=new Rf,a=new Rf,o=0,s=this.faces.length;o<s;o++){var l=this.faces[o],u=this.vertices[l.a],c=this.vertices[l.b],d=this.vertices[l.c];r.subVectors(d,c),a.subVectors(u,c),r.cross(a),t[l.a].add(r),t[l.b].add(r),t[l.c].add(r)}else{this.computeFaceNormals();for(var h=0,f=this.faces.length;h<f;h++){var p=this.faces[h];t[p.a].add(p.normal),t[p.b].add(p.normal),t[p.c].add(p.normal)}}for(var v=0,m=this.vertices.length;v<m;v++)t[v].normalize();for(var g=0,L=this.faces.length;g<L;g++){var y=this.faces[g],b=y.vertexNormals;3===b.length?(b[0].copy(t[y.a]),b[1].copy(t[y.b]),b[2].copy(t[y.c])):(b[0]=t[y.a].clone(),b[1]=t[y.b].clone(),b[2]=t[y.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeFlatVertexNormals",value:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeMorphNormals",value:function(){for(var e=0,t=this.faces.length;e<t;e++){var i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(var r=0,a=i.vertexNormals.length;r<a;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}var o=new n;o.faces=this.faces;for(var s=0,l=this.morphTargets.length;s<l;s++){if(!this.morphNormals[s]){this.morphNormals[s]={},this.morphNormals[s].faceNormals=[],this.morphNormals[s].vertexNormals=[];for(var u=this.morphNormals[s].faceNormals,c=this.morphNormals[s].vertexNormals,d=0,h=this.faces.length;d<h;d++){var f=new Rf,p={a:new Rf,b:new Rf,c:new Rf};u.push(f),c.push(p)}}var v=this.morphNormals[s];o.vertices=this.morphTargets[s].vertices,o.computeFaceNormals(),o.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var L=this.faces[m],y=v.faceNormals[m],b=v.vertexNormals[m];y.copy(L.normal),b.a.copy(L.vertexNormals[0]),b.b.copy(L.vertexNormals[1]),b.c.copy(L.vertexNormals[2])}}for(var x=0,w=this.faces.length;x<w;x++){var _=this.faces[x];_.normal=_.__originalFaceNormal,_.vertexNormals=_.__originalVertexNormals}}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new zf),this.boundingBox.setFromPoints(this.vertices)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new np),this.boundingSphere.setFromPoints(this.vertices)}},{key:"merge",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0!==t&&(i=(new of).getNormalMatrix(t));for(var d=0,h=o.length;d<h;d++){var f=o[d].clone();void 0!==t&&f.applyMatrix4(t),a.push(f)}for(var p=0,v=c.length;p<v;p++)u.push(c[p].clone());for(var m=0,g=l.length;m<g;m++){var L=l[m],y=void 0,b=void 0,x=L.vertexNormals,w=L.vertexColors,_=new VR(L.a+r,L.b+r,L.c+r);_.normal.copy(L.normal),void 0!==i&&_.normal.applyMatrix3(i).normalize();for(var S=0,k=x.length;S<k;S++)y=x[S].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),_.vertexNormals.push(y);_.color.copy(L.color);for(var A=0,M=w.length;A<M;A++)b=w[A],_.vertexColors.push(b.clone());_.materialIndex=L.materialIndex+n,s.push(_)}for(var C=0,E=e.faceVertexUvs.length;C<E;C++){var T=e.faceVertexUvs[C];void 0===this.faceVertexUvs[C]&&(this.faceVertexUvs[C]=[]);for(var P=0,D=T.length;P<D;P++){for(var O=T[P],I=[],R=0,B=O.length;R<B;R++)I.push(O[R].clone());this.faceVertexUvs[C].push(I)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)}},{key:"mergeMesh",value:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}},{key:"mergeVertices",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},n=[],i=[],r=Math.pow(10,e),a=0,o=this.vertices.length;a<o;a++){var s=this.vertices[a],l=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r);void 0===t[l]?(t[l]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[t[l]]}for(var u=[],c=0,d=this.faces.length;c<d;c++){var h=this.faces[c];h.a=i[h.a],h.b=i[h.b],h.c=i[h.c];for(var f=[h.a,h.b,h.c],p=0;p<3;p++)if(f[p]===f[(p+1)%3]){u.push(c);break}}for(var v=u.length-1;v>=0;v--){var m=u[v];this.faces.splice(m,1);for(var g=0,L=this.faceVertexUvs.length;g<L;g++)this.faceVertexUvs[g].splice(m,1)}var y=this.vertices.length-n.length;return this.vertices=n,y}},{key:"setFromPoints",value:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Rf(i.x,i.y,i.z||0))}return this}},{key:"sortFacesByMaterialIndex",value:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(var s=0;s<t;s++){var l=e[s]._id;i&&i.push(a[l]),r&&r.push(o[l])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},u=[],c={},d=[],h={},f=0;f<this.faces.length;f++){var p=this.faces[f],v=void 0!==this.faceVertexUvs[0][f],m=p.normal.length()>0,g=p.vertexNormals.length>0,L=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=S(b,0,0),b=S(b,1,!0),b=S(b,2,!1),b=S(b,3,v),b=S(b,4,m),b=S(b,5,g),b=S(b,6,L),b=S(b,7,y),o.push(b),o.push(p.a,p.b,p.c),o.push(p.materialIndex),v){var x=this.faceVertexUvs[0][f];o.push(M(x[0]),M(x[1]),M(x[2]))}if(m&&o.push(k(p.normal)),g){var w=p.vertexNormals;o.push(k(w[0]),k(w[1]),k(w[2]))}if(L&&o.push(A(p.color)),y){var _=p.vertexColors;o.push(A(_[0]),A(_[1]),A(_[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function k(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=d.length/2,d.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=i,e.data.normals=s,u.length>0&&(e.data.colors=u),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,i=t.length;n<i;n++)this.vertices.push(t[n].clone());for(var r=e.colors,a=0,o=r.length;a<o;a++)this.colors.push(r[a].clone());for(var s=e.faces,l=0,u=s.length;l<u;l++)this.faces.push(s[l].clone());for(var c=0,d=e.faceVertexUvs.length;c<d;c++){var h=e.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var f=0,p=h.length;f<p;f++){for(var v=h[f],m=[],g=0,L=v.length;g<L;g++){var y=v[g];m.push(y.clone())}this.faceVertexUvs[c].push(m)}}for(var b=e.morphTargets,x=0,w=b.length;x<w;x++){var _={};if(_.name=b[x].name,void 0!==b[x].vertices){_.vertices=[];for(var S=0,k=b[x].vertices.length;S<k;S++)_.vertices.push(b[x].vertices[S].clone())}if(void 0!==b[x].normals){_.normals=[];for(var A=0,M=b[x].normals.length;A<M;A++)_.normals.push(b[x].normals[A].clone())}this.morphTargets.push(_)}for(var C=e.morphNormals,E=0,T=C.length;E<T;E++){var P={};if(void 0!==C[E].vertexNormals){P.vertexNormals=[];for(var D=0,O=C[E].vertexNormals.length;D<O;D++){var I=C[E].vertexNormals[D],R={};R.a=I.a.clone(),R.b=I.b.clone(),R.c=I.c.clone(),P.vertexNormals.push(R)}}if(void 0!==C[E].faceNormals){P.faceNormals=[];for(var B=0,N=C[E].faceNormals.length;B<N;B++)P.faceNormals.push(C[E].faceNormals[B].clone())}this.morphNormals.push(P)}for(var z=e.skinWeights,F=0,j=z.length;F<j;F++)this.skinWeights.push(z[F].clone());for(var U=e.skinIndices,Z=0,V=U.length;Z<V;Z++)this.skinIndices.push(U[Z].clone());for(var G=e.lineDistances,H=0,W=G.length;H<W;H++)this.lineDistances.push(G[H]);var q=e.boundingBox;null!==q&&(this.boundingBox=q.clone());var X=e.boundingSphere;return null!==X&&(this.boundingSphere=X.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}},{key:"toBufferGeometry",value:function(){var e=(new ZR).fromGeometry(this),t=new cv,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",qR.call(new $p(n,3),e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);t.setAttribute("normal",qR.call(new $p(i,3),e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);t.setAttribute("color",HR.call(new $p(r,3),e.colors))}if(e.uvs.length>0){var a=new Float32Array(2*e.uvs.length);t.setAttribute("uv",WR.call(new $p(a,2),e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",WR.call(new $p(o,2),e.uvs2))}for(var s in t.groups=e.groups,e.morphTargets){for(var l=[],u=e.morphTargets[s],c=0,d=u.length;c<d;c++){var h=u[c],f=new nv(3*h.data.length,3);f.name=h.name,l.push(qR.call(f,h.data))}t.morphAttributes[s]=l}if(e.skinIndices.length>0){var p=new nv(4*e.skinIndices.length,4);t.setAttribute("skinIndex",XR.call(p,e.skinIndices))}if(e.skinWeights.length>0){var v=new nv(4*e.skinWeights.length,4);t.setAttribute("skinWeight",XR.call(v,e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}},{key:"computeTangents",value:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")}},{key:"computeLineDistances",value:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}},{key:"applyMatrix",value:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}],[{key:"createBufferGeometryFromObject",value:function(e){var t=new cv,n=e.geometry;if(e.isPoints||e.isLine){var i=new nv(3*n.vertices.length,3),r=new nv(3*n.colors.length,3);if(t.setAttribute("position",qR.call(i,n.vertices)),t.setAttribute("color",HR.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){var a=new nv(n.lineDistances.length,1);t.setAttribute("lineDistance",GR.call(a,n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}}]),n}(Vh);UR.prototype.isGeometry=!0;var ZR=function(){function e(){(0,c.Z)(this,e),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return(0,d.Z)(e,[{key:"computeGroups",value:function(e){var t,n,i,r=[],a=e.faces;for(n=0;n<a.length;n++){var o=a[n];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*n-t.start,r.push(t)),t={start:3*n,materialIndex:i})}void 0!==t&&(t.count=3*n-t.start,r.push(t)),this.groups=r}},{key:"fromGeometry",value:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){c=[];for(var f=0;f<h;f++)c[f]={name:d[f].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,v=e.skinWeights,m=p.length===i.length,g=v.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var L=0;L<n.length;L++){var y=n[L];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=y.normal;this.normals.push(x,x,x)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=y.color;this.colors.push(_,_,_)}if(!0===a){var S=r[0][L];void 0!==S?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",L),this.uvs.push(new af,new af,new af))}if(!0===o){var k=r[1][L];void 0!==k?this.uvs2.push(k[0],k[1],k[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",L),this.uvs2.push(new af,new af,new af))}for(var A=0;A<l;A++){var M=s[A].vertices;t[A].data.push(M[y.a],M[y.b],M[y.c])}for(var C=0;C<h;C++){var E=d[C].vertexNormals[L];c[C].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(v[y.a],v[y.b],v[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}]),e}(),VR=function(){function e(t,n,i,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,c.Z)(this,e),this.a=t,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new Rf,this.vertexNormals=Array.isArray(r)?r:[],this.color=a&&a.isColor?a:new wf,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o}return(0,d.Z)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var i=0,r=e.vertexColors.length;i<r;i++)this.vertexColors[i]=e.vertexColors[i].clone();return this}}]),e}();function GR(e){return this.array.set(e),this}function HR(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new wf),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}function WR(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new af),t[n++]=a.x,t[n++]=a.y}return this}function qR(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Rf),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}function XR(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ef),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}var YR=["a","b","c"];function QR(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function KR(e,t,n){var i=Math.min(e,t)+"_"+Math.max(e,t);return n.get(i)}function JR(e,t,n,i,r,a){var o,s=Math.min(e,t),l=Math.max(e,t),u=s+"_"+l;i.has(u)?o=i.get(u):(o={a:n[s],b:n[l],newEdge:null,faces:[]},i.set(u,o));o.faces.push(r),a[e].edges.push(o),a[t].edges.push(o)}function $R(e,t,n,i,r){e.push(new VR(t,n,i,void 0,void 0,r))}function eB(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function tB(e,t,n,i){e.push([t.clone(),n.clone(),i.clone()])}var nB=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,c.Z)(this,e),this.subdivisions=t}return(0,d.Z)(e,[{key:"modify",value:function(e){(e=e instanceof cv?(new UR).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}},{key:"_smooth",value:function(e){var t,n,i,r,a,o=new Rf,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],c=void 0!==u&&u.length>0,d=[],h=new Map;!function(e,t,n,i){var r,a,o;for(r=0,a=e.length;r<a;r++)n[r]={edges:[]};for(r=0,a=t.length;r<a;r++)JR((o=t[r]).a,o.b,e,i,o,n),JR(o.b,o.c,e,i,o,n),JR(o.c,o.a,e,i,o,n)}(s,l,d,h);for(var f,p,v,m,g,L,y,b=[],x=0,w=Array.from(h.keys());x<w.length;x++){var _=w[x];for(p=h.get(_),v=new Rf,g=3/8,L=1/8,2!=(y=p.faces.length)&&(g=.5,L=0),v.addVectors(p.a,p.b).multiplyScalar(g),o.set(0,0,0),r=0;r<y;r++){for(m=p.faces[r],a=0;a<3&&((f=s[QR(m,YR[a])])===p.a||f===p.b);a++);f&&o.add(f)}o.multiplyScalar(L),v.add(o),p.newEdge=b.length,b.push(v)}var S,k,A,M,C,E,T,P=[];for(n=0,i=s.length;n<i;n++){for(E=s[n],3==(t=(C=d[n].edges).length)?S=3/16:t>3&&(S=3/(8*t)),k=1-t*Number(S),A=S,t<=2&&(2==t&&(k=3/4,A=1/8)),T=E.clone().multiplyScalar(k),o.set(0,0,0),r=0;r<t;r++)f=(M=C[r]).a!==E?M.a:M.b,o.add(f);o.multiplyScalar(Number(A)),T.add(o),P.push(T)}var D,O,I,R,B,N,z,F=P.concat(b),j=P.length,U=[],Z=[],V=new af,G=new af,H=new af;for(n=0,i=l.length;n<i;n++)m=l[n],$R(U,D=Number(KR(m.a,m.b,h).newEdge)+j,O=Number(KR(m.b,m.c,h).newEdge)+j,I=Number(KR(m.c,m.a,h).newEdge)+j,m.materialIndex),$R(U,m.a,D,I,m.materialIndex),$R(U,m.b,O,D,m.materialIndex),$R(U,m.c,I,O,m.materialIndex),c&&(B=(R=u[n])[0],N=R[1],z=R[2],V.set(eB(B.x,N.x),eB(B.y,N.y)),G.set(eB(N.x,z.x),eB(N.y,z.y)),H.set(eB(B.x,z.x),eB(B.y,z.y)),tB(Z,V,G,H),tB(Z,B,V,H),tB(Z,N,G,V),tB(Z,z,H,G));e.vertices=F,e.faces=U,c&&(e.faceVertexUvs[0]=Z)}}]),e}(),iB=new Rf,rB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=null!==(n=null!==(i=e.geometry)&&void 0!==i?i:null===t||void 0===t?void 0:t.geometry)&&void 0!==n?n:(new cv).copy(new Av(100,100,100));void 0===t?(a.computeBoundingBox(),a.boundingBox.getSize(iB),r={width:iB.x,height:iB.y,depth:iB.z,subdivisions:0}):r=t.parameters;var o=$e($e({},r),e.parameters);return{parameters:{width:Math.abs(o.width),height:Math.abs(o.height),depth:Math.abs(o.depth),subdivisions:Math.abs(o.subdivisions)},geometry:a}}},{key:"build",value:function(e){var t,n=e.parameters,i=n.width,r=n.height,a=n.depth,o=n.subdivisions,s=null!==(t=e.geometry)&&void 0!==t?t:(new cv).copy(new Av(100,100,100)),l=s.userData.parameters;void 0===l?(s.computeBoundingBox(),s.boundingBox.getSize(iB)):iB.set(l.width,l.height,l.depth),(i!==iB.x||r!==iB.y||a!==iB.z)&&s.scale(0===iB.x?1:i/iB.x,0===iB.y?1:r/iB.y,0===iB.z?1:a/iB.z);var u=s.originalGeometry;try{o>0?(void 0===u||(null===l||void 0===l?void 0:l.subdivisions)!==o)&&(void 0===u&&(u=s),s=new nB(o).modify(u).toBufferGeometry()):(void 0!==u&&(s=u),u=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals())}catch(c){void 0!==u&&(s=u),u=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals()}return void 0!==u&&Object.assign(s,{originalGeometry:u}),delete e.geometry,Object.assign(s,{userData:$e($e({},e),{},{type:"NonParametricGeometry"})})}},{key:"loadFromUrl",value:function(e,t,n){var i=this;new Zb(n).load(e,(function(e){var n=i.normalizeInputs({geometry:e});e.boundingBox.getSize(iB);var r=100/iB.x;Object.assign(n.parameters,{width:100,height:iB.y*r,depth:iB.z*r}),t(i.build(n))}))}}]),e}(),aB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof WI?e.shape:new WI,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}},{key:"build",value:function(e){for(var t=e.parameters,n=t.width,i=t.height,r=t.spikes,a=t.cornerRadius,o=t.depth,s=t.extrudeBevelSize,l=t.extrudeBevelSegments,u=e.shape,c=.5*n,d=.5*i,h=2*Math.PI/r,f=0;f<r;f++){var p=h*f,v=0+Math.sin(p)*c,m=0+Math.cos(p)*d;u.addPoint(u.createPoint(v,m))}u.isClosed=!0;for(var g=0,L=u.points.length;g<L;g++)u.points[g].roundness=a;u.roundness=a,u.update();var y=_R.create({shape:u,parameters:{roundness:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(y,{userData:$e($e({},e),{},{type:"PolygonGeometry"})})}}]),e}(),oB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.radialSegments,o=t.heightSegments,s=t.openEnded,l=t.cornerRadius,u=t.cornerSegments,c=new cB(.5*n,i,a,o,s,l,u);return c.scale(1,1,r/n),Object.assign(c,{userData:$e($e({},e),{},{type:"PyramidGeometry"})})}}]),e}();function sB(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function lB(e,t,n,i,r,a){var o=t.clone().sub(e),s=n.clone().sub(e),l=o.angleTo(s);if(o.normalize(),s.normalize(),i===r){var u=o.add(s).normalize();a.copy(e).addScaledVector(u,i/Math.sin(l/2))}else{var c=o.angleTo(s);a.copy(e),a.addScaledVector(o,r/Math.sin(c)),a.addScaledVector(s,i/Math.sin(c))}}function uB(e,t,n){var i=e.clone().sub(t),r=n.clone().sub(t);return i.projectOnVector(r),i.add(t)}var cB=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4;(0,c.Z)(this,n),e=t.call(this),a=Math.floor(Math.max(3,a)),s=Math.floor(s),d=Math.floor(d);var h,f=[],p=[],v=[],m=[],g=0,L=r/2,y=Math.PI/a,b=i*Math.cos(Math.PI/a),x=2*Math.PI/a,w=(a-2)*Math.PI/a,_=Math.PI-w,S=new Rf(0,-L,0),k=new Rf(0,L,0),A=new af(i,-L),M=new af(b,-L),C=new af(0,k.y).sub(M),E=new af(0,k.y).sub(A),T=new af(C.y,-C.x).normalize(),P=new af(E.y,-E.x).normalize(),D=i*Math.cos(Math.PI/a)*Math.tan((Math.PI-C.angle())/2)-1e-8;u=Math.min(u,D);var O=new Rf(T.x,T.y,0),I=new Rf(Math.cos(x)*O.x,O.y,Math.sin(x)*O.x);h=O.angleTo(I);var R=u/Math.tan((Math.PI-C.angle())/2),B=u/Math.tan((Math.PI-h)/2),N=new Rf;if(!l){p.push(S.x,S.y,S.z),v.push(0,-1,0),m.push(0,0);var z=g++,F=[],j=A.clone(),U=R/Math.cos(Math.PI/a);j.x-=U;for(var Z=0;Z<a;Z++){var V=Z/a*Math.PI*2+y;sB(j,new af(Math.sin(V),Math.cos(V)),N),p.push(N.x,N.y,N.z),v.push(0,-1,0),m.push(0,0),F.push(g++)}for(var G=0;G<F.length;G++)f.push(F[G],z,F[(G+1)%F.length])}for(var H=[],W=new Rf,q=new Rf,X=new Rf,Y=new Rf,Q=new Rf,K=new Rf,J=0;J<a;J++){var $=J/a*Math.PI*2+y,ee=(J+.5)/a*Math.PI*2+y,te=(J+1)/a*Math.PI*2+y,ne=new af(Math.sin($),Math.cos($)),ie=new af(Math.sin(ee),Math.cos(ee)),re=new af(Math.sin(te),Math.cos(te));sB(A,ne,q),sB(A,re,X),sB(T,ie,W),lB(k,q,X,B,B,Y),p.push(Y.x,Y.y,Y.z),lB(q,k,X,B,R,Q),p.push(Q.x,Q.y,Q.z),lB(X,q,k,R,B,K),p.push(K.x,K.y,K.z),v.push(W.x,W.y,W.z),v.push(W.x,W.y,W.z),v.push(W.x,W.y,W.z),m.push(0,0),m.push(0,0),m.push(0,0);var ae=g++,oe=g++,se=g++;if(f.push(ae,oe,se),u>0){var le=q.clone().add(X).multiplyScalar(.5),ue=k.clone().sub(le).normalize(),ce=S.clone().sub(le).normalize().add(ue).normalize().multiplyScalar(-1);je(le,K.clone().sub(Q),ce,C.angle());var de,he=void 0,fe=new Rf;sB(P,re,fe);var pe=K.clone().add(Y).multiplyScalar(.5),ve=o(je(pe=uB(pe,X,k),K.clone().sub(Y),fe,h,Y.y),2);de=ve[0],he=ve[1];var me=de,ge=me.clone().setY(0).normalize(),Le=new Rf(0,-1,0),ye=ge.clone().cross(Le);Ue(me,ge,Le,ye),H.concat(he);var be=C.angle(),xe=Math.PI-be,we=k.clone();we.y-=u/Math.sin(be-Math.PI/2);for(var _e=new Rf,Se=[],ke=0;ke<d;ke++){for(var Ae=[],Me=Math.PI/2-xe*ke/d,Ce=Math.cos(Me),Ee=Math.sin(Me),Te=ee,Pe=0;Pe<=ke;Pe++){var De=Math.cos(Te),Oe=Math.sin(Te);W.x=Ce*Oe,W.y=Ee,W.z=Ce*De,_e.copy(we).addScaledVector(W,u),p.push(_e.x,_e.y,_e.z),v.push(W.x,W.y,W.z),m.push(0,0),Ae.push(g++),Te+=2*Math.PI/ke/a}Se.push(Ae)}he.reverse(),Se.push(he);for(var Ie=Se.length-1,Re=0;Re<Ie;Re++){var Be=Se[Re],Ne=Se[Re+1],ze=Be.length-1;f.push(Ne[1],Be[0],Ne[0]);for(var Fe=1;Fe<=ze;Fe++)f.push(Be[Fe],Be[Fe-1],Ne[Fe]),f.push(Ne[Fe+1],Be[Fe],Ne[Fe])}}}function je(e,t,n,i,r){var a=-i/2,o=(Math.PI-i)/2,s=t.clone().normalize().cross(n);e.addScaledVector(n,-u/Math.sin(o));for(var l=new Rf,c=new Rf,h=g,L=[],y=0;y<=d;y++){var b=a+y/d*i;c.set(0,0,0),c.addScaledVector(s,Math.sin(b)),c.addScaledVector(n,Math.cos(b));for(var x=0;x<=1;x++){var w=x/1-.5;if(l.copy(e),l.addScaledVector(t,w),l.addScaledVector(c,u),null!=r){var _=Math.max(0,l.y-r);l.addScaledVector(t,-_/t.y)}p.push(l.x,l.y,l.z),v.push(c.x,c.y,c.z),m.push(0,0),0===x&&L.push(g),g++}}for(var S=0;S<d;S++)for(var k=0;k<1;k++){var A=h+k+2*S,M=A+2,C=M+1,E=A+1;f.push(A,M,E),f.push(M,C,E)}return[e.clone().addScaledVector(t,.5),L]}function Ue(e,t,n,i){for(var r=Math.PI/2,a=E.angle()-r,o=[],s=new Rf,l=new Rf,c=0;c<=d;c++){for(var h=[],L=c/d,y=0;y<=c;y++){var b=((c?y/c:0)-.5)*_,x=Math.cos(b),w=Math.sin(b),S=(r+Math.atan(Math.tan(a)*x))*L,k=Math.cos(S),A=Math.sin(S);s.set(0,0,0),s.addScaledVector(t,A*x),s.addScaledVector(n,k),s.addScaledVector(i,A*w),l.copy(e).addScaledVector(s,u),p.push(l.x,l.y,l.z),v.push(s.x,s.y,s.z),m.push(0,0),h.push(g++)}o.push(h)}for(var M=o.length-1,C=0;C<M;C++){var T=o[C],P=o[C+1],D=T.length-1;f.push(T[0],P[1],P[0]);for(var O=1;O<=D;O++)f.push(T[O-1],T[O],P[O]),f.push(T[O],P[O+1],P[O])}}return e.setIndex(f),e.setAttribute("position",new nv(p,3)),e.setAttribute("normal",new nv(v,3)),e.setAttribute("uv",new nv(m,2)),e}return(0,d.Z)(n)}(cv),dB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),s=Object.assign(null!==(i=null===t||void 0===t?void 0:t.ui)&&void 0!==i?i:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof WI?e.shape:new WI,parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(a=o.depth)&&void 0!==a?a:0)}),ui:s}}},{key:"build",value:function(e){var t=e.shape,n=e.parameters,i=n.width,r=n.height,a=n.cornerRadius,o=n.cornerType,s=n.depth,l=n.extrudeBevelSize,u=n.extrudeBevelSegments,c={x:.5*i,y:.5*r},d={x:-c.x,y:-c.y},h={x:c.x,y:c.y};function f(e,t,n){return t>i&&n>r?Math.min(e*i/t,e*r/n):t>i?e*i/t:n>r?e*r/n:e}var p=[];p[0]=0===a[0]?0:f(a[0],a[0]+a[3],a[0]+a[1]),p[1]=0===a[1]?0:f(a[1],a[1]+a[2],a[1]+a[0]),p[2]=0===a[2]?0:f(a[2],a[2]+a[1],a[2]+a[3]),p[3]=0===a[3]?0:f(a[3],a[3]+a[0],a[3]+a[2]);var v=d.x,m=h.x,g=h.y,L=d.y;t.addPoint(t.createPoint(v,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,L)),t.addPoint(t.createPoint(v,L)),t.isClosed=!0;for(var y=!0,b=0,x=t.points.length;b<x;b++)t.points[b].roundness=p[b],b>0&&p[b]!==p[b-1]&&(y=!1);y&&(t.roundness=p[0]),t.useCubicForRoundedCorners=1!==o,t.update();var w=_R.create({shape:t,parameters:{depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(w,{userData:$e($e({},e),{},{type:"RectangleGeometry"})})}}]),e}(),hB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=void 0===n?100:n,r=t.height,a=void 0===r?i:r,o=t.depth,s=void 0===o?i:o,l=t.widthSegments,u=void 0===l?64:l,c=t.heightSegments,d=void 0===c?64:c,h=t.phiStart,f=t.phiLength,p=t.thetaStart,v=t.thetaLength,m=new Ky(.5*i,u,d,h,f,p,v);return m.scale(1,a/i,s/i),Object.assign(m,{userData:$e($e({},e),{},{type:"SphereGeometry"})})}}]),e}(),fB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(null!==(i=r.height)&&void 0!==i?i:r.width),depth:0})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=void 0===n?100:n,r=t.height,a=void 0===r?i:r,o=t.widthSegments,s=void 0===o?8:o,l=t.heightSegments,u=new qv(i,a,s,void 0===l?8:l);return u.scale(1,1,1),Object.assign(u,{userData:$e($e({},e),{},{type:"PlaneGeometry"})})}}]),e}(),pB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.angle,o=t.cornerRadius,s=t.cornerSegments,l=new vB(n,i,r,a,o,s);return Object.assign(l,{userData:$e($e({},e),{},{type:"BackdropGeometry"})})}}]),e}(),vB=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:90,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:24;(0,c.Z)(this,n),(e=t.call(this)).type="BackdropGeometry";var d=[],h=[],f=[],p=.001;0==l&&(u=1),u=Math.max(1,Math.floor(u)),l=Math.min(l,100),s=Math.min(180-p,s),s*=Math.PI/180;var v=[],m=Math.PI/2,g=function(){return new Rf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)},L=g(),y=g(),b=r/2,x=i/2,w=a/2,_=-x,S=+x,k=[g(_,-b,+w),g(_,-b,-w),g(_,+b,-w)],A=k[0],M=k[1],C=k[2],E=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.sin(e-Math.PI/(+t+1))},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.cos(e-Math.PI/(+t+1))};C.y=Math.sin(s)*r-b;var P=Math.cos(s)*r-w,D=A.z-p;s<=m?(C.z=Math.min(P,D),C.z==D&&(C.y-=(P-D)/Math.tan(m-s))):M.z=Math.min(M.z-P-w,A.z-p),L.subVectors(A,M),y.subVectors(C,M);var O=Math.min(L.length(),y.length())*l/100,I=O*Math.tan(s/2),R=O/Math.cos(s/2),B=L.clone().normalize().add(y.normalize()).setLength(R).add(M);L.set(0,E(s,!0),T(s,!0)),v.push([C,L.clone()]);for(var N=(Math.PI-s)/u,z=0;z<=u;z++){var F=m+s+z*N;L.set(0,Math.sin(F)*I,Math.cos(F)*I),L.add(B),y.set(0,E(F),T(F)),v.push([L.clone(),y.clone()])}v.push([A,g(0,1,0)]);var j=Math.sin(N/2)*I*2,U=v.length-1,Z=v[0][0].distanceTo(v[1][0]),V=Z+j*u+v[U-1][0].distanceTo(v[U][0]);v[0].push(1);for(var G=0;G<=u;G++)v[G+1].push(1-(Z+G*j)/V);v[U].push(0);for(var H,W,q,X=o(v[0],3),Y=X[0],Q=X[1],K=X[2],J=1;J<v.length;J++){var $;H=($=o(v[J],3))[0],W=$[1],q=$[2],d.push(_,Y.y,Y.z,_,H.y,H.z,S,Y.y,Y.z,S,Y.y,Y.z,_,H.y,H.z,S,H.y,H.z),h.push(0,Q.y,Q.z,0,W.y,W.z,0,Q.y,Q.z,0,Q.y,Q.z,0,W.y,W.z,0,W.y,W.z),f.push(0,K,0,q,1,K,1,K,0,q,1,q),Y=H,Q=W,K=q}return e.setAttribute("position",new nv(d,3)),e.setAttribute("normal",new nv(h,3)),e.setAttribute("uv",new nv(f,2)),e}return(0,d.Z)(n)}(cv),mB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof WI?e.shape:new WI,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.innerRadiusPercent,a=t.spikes,o=t.cornerRadius,s=t.angle,l=t.depth,u=t.extrudeBevelSize,c=t.extrudeBevelSegments,d=e.shape,h=.5*n,f=.5*i,p=s*Math.PI/360/a,v=Math.PI/2*3*-1,m=h*r/100,g=f*r/100;if(3===a&&50===r){p=2*Math.PI/a;for(var L=0;L<a;L++){var y=p*L,b=0+Math.sin(y)*h,x=0+Math.cos(y)*f;d.addPoint(d.createPoint(b,x))}}else for(var w=0;w<a;w++){var _=0+Math.cos(v)*h,S=0+Math.sin(v)*f;d.addPoint(d.createPoint(_,S)),v+=p,_=0+Math.cos(v)*m,S=0+Math.sin(v)*g,d.addPoint(d.createPoint(_,S)),v+=p}d.isClosed=!0;for(var k=0,A=d.points.length;k<A;k++)d.points[k].roundness=o;d.roundness=o,d.update();var M=_R.create({shape:d,parameters:{roundness:o,depth:l,extrudeBevelSize:u,extrudeBevelSegments:c}});return Object.assign(M,{userData:$e($e({},e),{},{type:"StarGeometry"})})}}]),e}(),gB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=new qv(n,i);return Object.assign(r,{userData:$e($e({},e),{},{type:"TextFrameGeometry"})})}}]),e}(),LB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:32,tubularSegments:64,arc:2*Math.PI,cornerRadius:30,cornerSegments:8},e.parameters),o=Math.abs(a.width),s=Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),l=Math.round(Math.abs(null!==(r=a.depth)&&void 0!==r?r:.25*a.width));return{parameters:Object.assign(a,{width:o,height:s,depth:l})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.height,r=t.depth,a=t.radialSegments,o=t.tubularSegments,s=function(e,t,n,i,r,a,o,s,l,u,c){var d;return d=[n,t],t=d[0],n=d[1],o=t/2,r/=2*Math.PI,1==r&&(u=0),new IR(!0,e,t,n,i,r,a,o,s,l,u,c)}(n,i,r,.5*n,t.arc,o,0,0,a,t.cornerRadius,t.cornerSegments);return s.scale(1,i/n,1),Object.assign(s,{userData:$e($e({},e),{},{type:"TorusGeometry"})})}}]),e}();var yB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(i=o.height)&&void 0!==i?i:o.width),depth:Math.abs(null!==(r=o.depth)&&void 0!==r?r:o.width),tube:null!==(a=o.tube)&&void 0!==a?a:.125*o.width})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=t.tube,r=t.tubularSegments,a=t.radialSegments,o=t.p,s=t.q,l=.5*n;l!==i&&(l-=i);var u=new Jy(l,i,r,a,o,s);return Object.assign(u,{userData:$e($e({},e),{},{type:"TorusKnotGeometry"})})}}]),e}(),bB=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof WI?e.shape:new WI,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width*(a.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}},{key:"build",value:function(e){var t=e.parameters,n=t.width,i=void 0===n?100:n,r=t.height,a=t.cornerRadius,o=t.depth,s=t.extrudeBevelSize,l=t.extrudeBevelSegments,u=t.isRect,c=e.shape,d=.5*i,h=.5*r;u?(c.addPoint(c.createPoint(-d,h)),c.addPoint(c.createPoint(d,-h)),c.addPoint(c.createPoint(-d,-h))):(c.addPoint(c.createPoint(0,h)),c.addPoint(c.createPoint(d,-h)),c.addPoint(c.createPoint(-d,-h))),c.isClosed=!0;for(var f=0,p=c.points.length;f<p;f++)c.points[f].roundness=a;c.roundness=a,c.update();var v=_R.create({shape:c,parameters:{roundness:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(v,{userData:$e($e({},e),{},{type:"TriangleGeometry"})})}}]),e}();var xB=new dp,wB=new dp;var _B=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"create",value:function(e){return this.build(this.normalizeInputs(e))}},{key:"normalizeInputs",value:function(e,t){var n,i,r,a,o,s=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),l=Math.abs(s.width),u=Math.abs(null!==(i=s.height)&&void 0!==i?i:s.width),c=Math.abs(null!==(r=s.depth)&&void 0!==r?r:0),d=null!==(a=null===t||void 0===t?void 0:t.shapeData)&&void 0!==a?a:kR.create({parameters:JT}).userData.shape;return{path:null!==(o=e.path)&&void 0!==o?o:XT.defaultData(),parameters:Object.assign(s,{width:l,height:u,depth:c,extrusion:$e($e({},nP),s.extrusion)}),shapeData:d}}},{key:"build",value:function(e){if(e.path.points.length>=2){var t=new SB(e);return Object.assign(t,{userData:$e($e({},e),{},{type:"PathGeometry"})})}return Object.assign(new cv,{userData:$e($e({},e),{},{type:"PathGeometry"})})}}]),e}(),SB=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).type="PathExtrusionGeometry",i.inputs=e,i.build(),i}return(0,d.Z)(n,[{key:"_isGeometryClosed",value:function(){return this.inputs.path.isClosed&&1===this.inputs.parameters.extrusion.depth}},{key:"_isOpenEnded",value:function(){var e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&1===e.depth)||!function(e,t){var n=2*Math.PI;return(e%n+n)%n===(t%n+n)%n}(e.twist,0)||e.startScale!==e.endScale}},{key:"build",value:function(){var e=this,t=this._extractPathPoints();if(!(t.length<2)){for(var n=this._computeBasisMatrices(t),i=this.inputs.parameters.extrusion,r=i.depth,a=i.offset,o=this.inputs.path.isClosed?t.length:t.length-1,s=Math.floor(a*o),l=this.inputs.path.isClosed?Math.ceil((r+a)*o):Math.ceil(Math.min(1,r+a)*o),c=Math.min(Math.max(2,l-s+1),o+2),d=[],h=[],f=0;f<c;f++){var p=this.inputs.path.isClosed?(f+s)%t.length:Math.min(f+s,t.length-1);d.push(t[p].clone()),h.push(n[p].clone())}var v=function(e,t,n){d[e]=d[e].clone().lerp(d[t],n),h[e]=function(e,t,n){var i=[new Rf,new Rf,new Rf],r=[new Rf,new Rf,new Rf];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(r[0],r[1],r[2]),i.forEach((function(e,t){var i=r[t],a=rf.lerp(e.length(),i.length(),n);e.lerp(i,n).setLength(a)})),(new dp).makeBasis(i[0],i[1],i[2])}(h[e],h[t],n)},m=0,g=a*o%1;(!this.inputs.path.isClosed||r<=1)&&(g||0===a)&&v(0,1,m=g);var L=0,y=(a+r)*o%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&a+r<1)&&y&&(L=y,v(d.length-1,d.length-2,1-L)),0===r){var b=d.length-1;d[b].copy(d[0]),h[b].copy(h[0])}this._applyPathModifiers(h,m,L);var x=this.inputs.parameters.extrusion,w=x.bevel,_=x.bevelSides,S=w>0?this.inputs.parameters.extrusion.capType:"flat",k=5;"Custom"===this.inputs.parameters.extrusion.shape.type&&(k="low"===this.inputs.parameters.extrusion.shape.shapeQuality?5:12);var A,M=this._computeShapePoints(k),C=M.regions,E=M.infos,T=M.vertices,P=0;"round"===S&&(P=(A=new bR(this.inputs.shapeData,2*w,w,k,_,void 0,!0)).getAttribute("position").count);var D=0,O=0;E.sort((function(e,t){return e.start-t.start})),E.forEach((function(e){e.verticesStart=D,e.verticesCount=e.continuous.reduce((function(e,t,n){return e+(0!==n&&t?1:2)}),0),O+=e.verticesCount,D=O}));var I,R=O*c,B=0;if(this._isOpenEnded()&&"flat"===S){try{I=hR({windingRule:zI.ODD,elementType:FI.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:C})}catch(G){I=LR}B=I.vertexCount}var N=R+2*B+2*P,z=R+2*B,F={positions:new Float32Array(3*N),normals:new Float32Array(3*N),uvs:new Float32Array(2*N)},j=[];if(E.forEach((function(t){e._extrudeRegion(t,T,h,d,F,j,e._isGeometryClosed()&&!e._isOpenEnded())})),I&&(this._closeEnd(I,R,j,F,h[0],d[0],!1),this._closeEnd(I,R+B,j,F,h[h.length-1],d[d.length-1],!0)),A){F.positions.set(A.getAttribute("position").array,3*z),F.normals.set(A.getAttribute("normal").array,3*z),F.uvs.set(A.getAttribute("uv").array,2*z);var U=j.length;j.push.apply(j,u(A.getIndex().array.map((function(e){return e+z})))),z+=P,F.positions.set(A.getAttribute("position").array,3*z),F.normals.set(A.getAttribute("normal").array,3*z),F.uvs.set(A.getAttribute("uv").array,2*z);var Z=j.length;j.push.apply(j,u(A.getIndex().array.map((function(e){return e+z})))),this.setAttribute("position",new $p(F.positions,3)),this.setAttribute("normal",new $p(F.normals,3)),this.setAttribute("uv",new $p(F.uvs,2)),this.setIndex(j);var V=xB;V.copy(h[h.length-1]).setPosition(d[d.length-1]),this.applyMatrix4OnRange(V,z,N),V.copy(h[0]).setPosition(d[0]).multiply(wB.makeScale(1,1,-1)),this.applyMatrix4OnRange(V,z-P,z),this.reverseIndicesOnRange(U,Z)}else this.setAttribute("position",new $p(F.positions,3)),this.setAttribute("normal",new $p(F.normals,3)),this.setAttribute("uv",new $p(F.uvs,2)),this.setIndex(j)}}},{key:"_extractPathPoints",value:function(){var e=QO(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];var t=[e[0]];return e.forEach((function(e){t[t.length-1].distanceToSquared(e)>.001&&t.push(e)})),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}},{key:"_computeBasisMatrices",value:function(e){for(var t=[],n=e.length,i=this.inputs.path.isClosed,r=new Rf,a=new Rf,o=new Rf,s=new Rf,l=new Rf(0,1,0),u=0;u<n;u++){var c=e[u],d=void 0;d=0===u?i?e[e.length-2]:c.clone().multiplyScalar(2).sub(e[1]):e[u-1];var h=void 0;h=u===n-1?i?e[1]:c.clone().multiplyScalar(2).sub(e[u-1]):e[u+1];var f=c.clone().sub(d).normalize(),p=h.clone().sub(c).normalize(),v=f.clone().add(p).normalize();o.copy(v),0===u&&(v.equals(l)||v.clone().negate().equals(l))&&l.set(0,0,1);var m=l.clone().cross(v).normalize(),g=v.clone().cross(m).normalize();l.copy(g),s.copy(m),0===u&&(r.copy(g),a.copy(v));var L=(new dp).makeBasis(m,g,v);t.push(L)}var y=i?a:o,b=i?r:new Rf(0,1,0),x=y.clone().cross(s).normalize(),w=Math.acos(b.dot(x));if(isNaN(w))return t;var _=b.clone().cross(x);y.dot(_)>0&&(w*=-1);for(var S=1;S<t.length;S++){var k=(new dp).makeRotationZ(w*S/t.length);t[S].multiply(k)}return t}},{key:"_applyPathModifiers",value:function(e,t,n){var i=e.length,r=this.inputs.parameters.extrusion,a=r.angle,o=r.twist,s=r.startScale,l=r.endScale,u=new dp,c=new dp;return e.forEach((function(e,r){var d=0===r?0:r===i-1?1:(r-t)/(i-(0===n?0:1)-(t+(1-n)));u.makeRotationZ(rf.lerp(a,a+o,d));var h=rf.lerp(s,l,d);c.makeScale(h,h,h),e.multiply(u).multiply(c)})),e}},{key:"_computeShapePoints",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zI.ODD,r=this.inputs.shapeData,a=r.extractShapePointsToFlatArray([],n),s=r.shapeHoles.map((function(e){for(var t=e.extractShapePointsToFlatArray([],n),i=[],r=t.length-1;r>=1;r-=2){var a=t[r-1],o=t[r-0];i.push(a,o)}return i}));try{e=hR({windingRule:i,elementType:FI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch(se){e=mR}try{t=hR({windingRule:zI.ODD,elementType:FI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:u(s)})}catch(le){t=gR}if(!e)throw new Error("error generating geometry");var l=e.elementCount;if(t){e.elementCount+=t.elementCount;for(var c=0;c<t.elements.length;c++){var d=t.elements[c],h=c%2===0?e.vertexCount:0;e.elements.push(d+h)}for(var f=0;f<t.vertexIndices.length;f++){var p=t.vertexIndices[f],v=e.vertexCount;e.vertexIndices.push(p+v)}for(var m=0;m<t.vertices.length;m++){var g=t.vertices[m];e.vertices.push(g)}}for(var L=1/0,y=-1/0,b=1/0,x=-1/0,w=0,_=e.vertexCount;w<_;w++){var S=2*w,k=e.vertices[S+0],A=e.vertices[S+1];k<L&&(L=k),k>y&&(y=k),A<b&&(b=A),A>x&&(x=A)}for(var M=[],C=e.elementCount-1;C>=0;C--){var E=C>=l,T=2*C,P=e.elements[T+0],D=e.elements[T+1],O=P+D,I={start:P,count:D,normals:[],isHole:E,continuous:[],verticesStart:0,verticesCount:0};M.push(I);var R=P,B=O-1,N=P+1,z=r.roundedCurves.length;do{var F,j=R-P,U=e.vertices[2*B+0],Z=e.vertices[2*B+1],V=e.vertices[2*R+0],G=e.vertices[2*R+1],H=e.vertices[2*N+0],W=e.vertices[2*N+1],q=V-U,X=G-Z,Y=Math.sqrt(q*q+X*X);q/=Y,X/=Y;var Q=V-H,K=G-W,J=Math.sqrt(Q*Q+K*K);Q/=J,K/=J,I.normals[2*j+0]=-K,I.normals[2*j+1]=Q;var $=e.vertexIndices[R];if(Array.isArray($))I.continuous[j]=!1;else{var ee=o(r.getCurveIndexFromVertexId($-1,!0),2),te=ee[0],ne=ee[1];if(ne>0&&ne<1)I.continuous[j]=!0;else{var ie=1===ne?te+1:te-1;ie=(ie+z)%z;var re=1===ne?0:1,ae=r.roundedCurves[te].getTangent(ne),oe=r.roundedCurves[ie].getTangent(re);I.continuous[j]=ae.dot(oe)>.95}}E&&(I.normals[2*j+0]*=-1,I.normals[2*j+1]*=-1),B=(F=[R,N,N+1])[0],R=F[1],(N=F[2])>=O&&(N-=D)}while(N!==P+1)}return{regions:[a].concat(u(s)),infos:M,vertices:e.vertices}}},{key:"_insertVertex",value:function(e,t,n,i,r){var a=2*t,o=3*t;e.positions[o+0]=n.x,e.positions[o+1]=n.y,e.positions[o+2]=n.z,e.normals[o+0]=i.x,e.normals[o+1]=i.y,e.normals[o+2]=i.z,e.uvs[a+0]=r.x,e.uvs[a+1]=r.y}},{key:"_extrudeRegion",value:function(e,t,n,i,r,a,o){var s=this,l=new Rf,u=new Rf,c=new Rf,d=new Rf,h=new af;n.forEach((function(a,o){for(var f=i[o],p=e.verticesStart*n.length+e.verticesCount*o,v=0;v<e.count;v++){var m=2*(e.start+v);if(l.set(t[m+0],t[m+1],0),c.copy(l).applyMatrix4(a).add(f),e.continuous[v])d.set(e.normals[2*v+0],e.normals[2*v+1],0);else{var g=0===v?2*(e.start+e.count-1):m-2;u.set(t[g+0],t[g+1],0),d.copy(l).sub(u),d.set(-d.y,d.x,0),e.isHole||d.negate()}if(d.applyMatrix4(a).normalize(),h.set(0===v?1:v/e.count,o/(n.length-1)),s._insertVertex(r,p,c,d,h),p++,!e.continuous[v]||0===v){if(0===v)d.set(e.normals[2*v+0],e.normals[2*v+1],0),h.set(0,o/(n.length-1));else{var L=v===e.count-1?2*e.start:m+2;u.set(t[L+0],t[L+1],0),d.copy(u).sub(l),d.set(-d.y,d.x,0),e.isHole||d.negate()}d.applyMatrix4(a).normalize(),s._insertVertex(r,p,c,d,h),p++}}}));for(var f=n.length-1,p=0;p<f;p++)for(var v=e.verticesStart*n.length+e.verticesCount*p,m=e.verticesStart*n.length+e.verticesCount*(p+1),g=0,L=0;L<e.count;L++){(!e.continuous[L]||0===L)&&g++;var y=L===e.count-1?0:g+1,b=v+g,x=v+y,w=m+y,_=m+g;e.isHole?a.push(b,w,x,b,_,w):a.push(b,x,w,b,w,_),g++}}},{key:"_closeEnd",value:function(e,t,n,i,r,a,o){for(var s=e.vertexCount,l=new Rf(0,0,o?-1:1).applyMatrix4(r),u=new Rf,c=new af,d=0;d<s;d++){var h=2*d;u.set(e.vertices[h+0],e.vertices[h+1],0).applyMatrix4(r).add(a),this._insertVertex(i,t+d,u,l,c)}for(var f=e.elements,p=0;p<e.elementCount;p++){var v=3*p,m=f[v+0]+t,g=f[v+(o?1:2)]+t,L=f[v+(o?2:1)]+t;n.push(m,g,L)}}},{key:"applyMatrix4OnRange",value:function(e,t,n){var i,r,a,o,s=e.elements,l=(new of).getNormalMatrix(e).elements,u=this.attributes.position,c=this.attributes.normal;if(u&&c){for(var d=u.array,h=c.array,f=u.itemSize,p=t*f,v=n*f;p<v;p+=f)i=d[p+0],r=d[p+1],a=d[p+2],o=1/(s[3]*i+s[7]*r+s[11]*a+s[15]),d[p+0]=(s[0]*i+s[4]*r+s[8]*a+s[12])*o,d[p+1]=(s[1]*i+s[5]*r+s[9]*a+s[13])*o,d[p+2]=(s[2]*i+s[6]*r+s[10]*a+s[14])*o,i=h[p+0],r=h[p+1],a=h[p+2],h[p+0]=l[0]*i+l[3]*r+l[6]*a,h[p+1]=l[1]*i+l[4]*r+l[7]*a,h[p+2]=l[2]*i+l[5]*r+l[8]*a;u.needsUpdate=!0,c.needsUpdate=!0}}},{key:"reverseIndicesOnRange",value:function(e,t){var n=this.index;if(n){for(var i=e;i<t;i+=3){var r=n.getX(i),a=n.getX(i+1),o=n.getX(i+2);n.setXYZ(i,o,a,r)}n.needsUpdate=!0}}}]),n}(cv);function kB(){var e=new cv;return e.setAttribute("position",new $p(new Float32Array([]),3)),e.setIndex(new $p(new Uint16Array([]),1)),e}var AB=kB().attributes,MB=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this)).charWidths=[],r.charCoords=[],r.wrappedText=[],r.isLowResolution=!1,r.vectorShapes=[],Object.assign(r.attributes,AB),r.userData={parameters:e,type:"TextGeometry"};var a=i.getFont(e.font);return null!==a&&void 0!==a&&a.isLoaded?(r.font=a,r.update(e)):r.updateFont(e.font,i).then((function(){r.update(e),null===i||void 0===i||i.requestRender()})),r}return(0,d.Z)(n,[{key:"updateFont",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t,n){var i;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.getFont(t),e.t0=i,!e.t0){e.next=6;break}return this.font=i,e.next=6,i.loadingPromise;case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=this,n=this.font;if(this.userData={parameters:e,type:"TextGeometry"},null!==n&&void 0!==n&&n.isLoaded){var i=e.width,r=e.height,a=e.depth,s=e.extrudeBevelSize,l=e.extrudeBevelSegments,u=e.text,c=e.textTransform,d=function(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:e.text;var r,a=[""],o="",s=(0,x.Z)(n);try{for(s.s();!(r=s.n()).done;){var l=r.value;o+=l," "===l||"\n"===l?(a[a.length-1]+=o,o="","\n"===l&&a.push("")):t.getTextWidth(a[a.length-1]+o,e)>e.width&&(a[a.length-1].length&&a.push(""),t.getTextWidth(a[a.length-1]+o,e)>e.width&&(1===o.length?(a[a.length-1]+=o,o=""):(a[a.length-1]+=o.slice(0,-1),o=o[o.length-1],a.push(""))))}}catch(u){s.e(u)}finally{s.f()}return a[a.length-1]+=o,a}(e,n,2===c?u.toUpperCase():3===c?u.toLowerCase():u),h=n.generateShapes(d,e),f=h.shapes,p=h.charWidths,v=h.charCoords,m=.5*i,g=.5*r,L=f.map((function(e){return(new WI).fromShape(e)}));this.vectorShapes=L;var y=L.map((function(e){return _R.create({shape:e,parameters:{depth:a,extrudeBevelSegments:l,extrudeBevelSize:s,windingRule:a<=0?zI.NONZERO:zI.ODD,subdivisions:t.isLowResolution&&a>0?1:12}})})),b=y.length?$P(y):kB();b.translate(-m,g,0),this.dispose(),this.wrappedText=d,this.charCoords=v,this.charWidths=p,this.deleteAttribute("extrudeNormal"),Object.entries(b.attributes).forEach((function(e){var n=o(e,2),i=n[0],r=n[1];t.setAttribute(i,r)})),this.setIndex(b.index),this.computeBoundingSphere()}else console.warn("Cannot update text because its font is not loaded")}},{key:"clone",value:function(){var e=hM(new cv,n.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}},{key:"copy",value:function(e){var t=this;return Object.entries(e.attributes).forEach((function(e){var n=o(e,2),i=n[0],r=n[1];t.setAttribute(i,r)})),this.setIndex(e.index),this.userData={parameters:$e({},e.userData.parameters),type:"TextGeometry"},this}},{key:"setText",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.font,!e.t0){e.next=4;break}return e.next=4,this.font.loadingPromise;case 4:return e.next=6,this.update($e($e({},this.userData.parameters),{},{text:t}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"text",get:function(){var e;return null!==(e=this.userData.parameters.text)&&void 0!==e?e:""}}]),n}(cv);var CB,EB,TB=new Promise((function(e){CB=e})),PB=!1;function DB(){if(!PB)return EB||(EB=function(){return e.apply(this,arguments)}(),EB);function e(){return e=(0,ju.Z)((0,Fu.Z)().mark((function e(){var t,i,r,a,s,l;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://unpkg.com/@splinetool/modelling-wasm@0.9.418/build",e.next=3,Promise.all([n.e(526).then(n.bind(n,526)),fetch("".concat("https://unpkg.com/@splinetool/modelling-wasm@0.9.418/build","/process.wasm")).then((function(e){return e.arrayBuffer()}))]);case 3:return t=e.sent,i=o(t,2),r=i[0],a=i[1],s=r.default,e.next=10,s({wasmBinary:a});case 10:l=e.sent,CB(l),PB=!0;case 12:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}}function OB(e,t,n){var i,r={parameters:e,type:e.type};if("PathGeometry"===e.type)r.path=e.path;else if("VectorGeometry"===e.type){var a=WI.createFromState(e.shape,e.width,e.height);r.shape=a}else if("NonParametricGeometry"===e.type)e.data.groups&&e.data.groups.forEach((function(e){var t;return e.materialIndex=Math.max(null!==(t=e.materialIndex)&&void 0!==t?t:0,0)})),r.geometry=(new Zb).parse(e);else{if("SubdivGeometry"===e.type)return new ZB(e,n);if("TextGeometry"===e.type)return new MB(e,t)}try{i=hN(r)}catch(a){console.error(a)}if(!i){var o=WI.createFromState(qT.defaultData(),100,100);r.shape=o,i=hN(r)}return i}var IB=new dp;function RB(e,t,n,i){for(var r,a,o,s=e.position.array,l=e.normal.array,u=IB.makeScale(t,n,i).invert().elements,c=0,d=s.length;c<d;c+=3)s[c]*=t,s[c+1]*=n,s[c+2]*=i,r=l[c],a=l[c+1],o=l[c+2],l[c]=u[0]*r+u[4]*a+u[8]*o,l[c+1]=u[1]*r+u[5]*a+u[9]*o,l[c+2]=u[2]*r+u[6]*a+u[10]*o;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var BB,NB=new zf,zB=new Rf;TB.then((function(e){BB=e}));var FB=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),jB=new Uint32Array([0,1,2,3]),UB=new Uint8Array([4]),ZB=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).data=e,r.flatShading=i,r.subdivPointer=0,r.rebuild(),r.freeSubdivPointer(),r}return(0,d.Z)(n,[{key:"mutateDirectlyScaleBaked",value:function(e,t){this.freeSubdivPointer();var n=this.data.scaleBaked,i=pT.div(t,n);this.subdividedGeometry&&RB.apply(void 0,[this.subdividedGeometry.attributes].concat(u(i))),this.originalGeometry&&RB.apply(void 0,[this.originalGeometry.attributes].concat(u(i))),this.data=e;var r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(zB.fromArray(i));var a=zB.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=a/2}},{key:"ensureSubdivPointer",value:function(){return 0===this.subdivPointer&&this.rebuild(),this.subdivPointer}},{key:"rebuild",value:function(){var e,t,i,r,a;try{var o=n.build(this.data,void 0,!this.flatShading,void 0);i=o.originalGeometry,r=o.subdividedGeometry,a=o.subdivPointer}catch(l){i=new Av(100,100,100),a=0}this.subdivPointer=a,this.originalGeometry=i,this.subdividedGeometry=null!==(e=r)&&void 0!==e?e:void 0;var s=null!==(t=this.subdividedGeometry)&&void 0!==t?t:this.originalGeometry;Object.assign(this,s),this.calcBoundingBox()}},{key:"freeSubdivPointer",value:function(){this.subdivPointer&&(n.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this),this.freeSubdivPointer()}},{key:"calcBoundingBox",value:function(){var e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new np,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));var t=e.attributes.position,n=e.boundingSphere.center;NB.setFromBufferAttribute(t),NB.getCenter(n),e.boundingSphere.radius=n.distanceTo(NB.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),NB.getSize(zB);var i={width:zB.x,height:zB.y,depth:zB.z};return this.userData.parameters=i,i}}],[{key:"build",value:function(e,t,i,r){var a,o,s,l,u=null!==(a=null===e||void 0===e?void 0:e.phongAngle)&&void 0!==a?a:35;!1===i&&(u=-1),t&&(BB.free_bvh(t),BB.free_subdivision_surface(t));try{o=n.allocate(e,r)}catch(c){console.error(c,e),o=n.allocate({positionWASM:FB,indexWASM:jB,verticesPerFaceWASM:UB},r)}if(BB.set_destination_refinement_level(o,0),s=n.buildLevel(o,!0,u),e.subdivisions>0)try{BB.set_destination_refinement_level(o,e.subdivisions),l=n.buildLevel(o,!1,u)}catch(d){try{BB.set_destination_refinement_level(o,e.subdivisions-1),l=n.buildLevel(o,!1,u)}catch(h){l=null}}else l=null;return{subdivPointer:o,originalGeometry:s,subdividedGeometry:l}}},{key:"primitiveToQuads",value:function(e,t,n){var i;e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);var r,a,o,s=void 0!==e.shape||void 0!==e.path?t.geometry:OB(e,n,!1);r="TorusGeometry"===e.type&&e.arc===2*Math.PI?s.getClosedTorusIndicesForBooleanOrSubdiv():s.getIndex();var l,u=GB(s.getAttribute("position"),r);if(a=u.positions,o=u.triIndices,"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){var c=e.radialSegments*e.heightSegments*3*2;l=[c,c+3*e.radialSegments]}return{positions:a,indices:(i=YB(a,o,s,l)).indices,verticesPerFace:i.verticesPerFace}}},{key:"allocate",value:function(e,t){var n,i,r,a,o,s=[],l=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,a=e.indexWASM,o=e.verticesPerFaceWASM):(r=FB,a=jB,o=UB);var c,d=r.length,h=a.length,f=o.length,p=r.length+s.length+l.length,v=a.length+o.length,m=p*Float32Array.BYTES_PER_ELEMENT+v*Uint32Array.BYTES_PER_ELEMENT,g=p*Float32Array.BYTES_PER_ELEMENT,L=(Uint32Array.BYTES_PER_ELEMENT,BB._malloc(m)),y=new Float32Array(BB.HEAPF32.buffer,L,p),b=new Uint32Array(BB.HEAPU32.buffer,L+g,v);y.set(r,0),y.set(s,r.length),y.set(l,r.length+s.length),b.set(a,0),b.set(o,a.length),null!==e&&void 0!==e&&null!==(n=e.scaleBaked)&&void 0!==n&&n.some((function(e){return 1!==e}))&&(c=(i=new dp).makeScale.apply(i,u(e.scaleBaked))),t&&(c?c.premultiply(t):c=t);var x=c?BB.alloc_subdivision_surface2(L,d,L+g,h,L+g+a.length*Uint32Array.BYTES_PER_ELEMENT,f,c.elements):BB.alloc_subdivision_surface(L,d,L+g,h,L+g+a.length*Uint32Array.BYTES_PER_ELEMENT,f);return BB._free(L),x}},{key:"buildLevel",value:function(e,t,n,i,r){var a=r?BB.get_mesh_data2(e,t?BB.Level.CONTROL:BB.Level.REFINED,n,r.elements):BB.get_mesh_data(e,t?BB.Level.CONTROL:BB.Level.REFINED,n),o=BB.HEAPU32.subarray(a>>2,8+(a>>2)),s=o.subarray(4,8),l=0,u=BB.HEAPU32[o[l]>>2],c=BB.HEAPF32.subarray(u>>2,(u>>2)+s[l]);l++;var d=BB.HEAPU32[o[l]>>2],h=BB.HEAPF32.subarray(d>>2,(d>>2)+s[l]);l++;var f=BB.HEAPU32[o[l]>>2],p=BB.HEAPU32.subarray(f>>2,(f>>2)+s[l]);l++;var v=BB.HEAPU32[o[l]>>2],m=BB.HEAPU32.subarray(v>>2,(v>>2)+s[l]);if(l++,void 0===i){var g=new cv;if(g.setIndex(new tv(m,1)),g.setAttribute("position",new nv(c,3)),g.setAttribute("normal",new nv(h,3)),t){g.setAttribute("faceMap",new tv(p,1));var L=new Float32Array(h.length/3*4).fill(0);g.setAttribute("color",new $p(L,4))}return BB.free_mesh_data(a),g.userData.type="SubdivGeometry",g}i.getAttribute("position").copyArray(c),i.getAttribute("normal").copyArray(h),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,BB.free_mesh_data(a)}},{key:"freeSubdivPointer",value:function(e){BB.free_bvh(e),BB.free_subdivision_surface(e)}},{key:"buildControlCageWireframe",value:function(e,t,n){var i=BB.get_wireframe_data_for_base_level(e),r=BB.HEAPU32.subarray(i>>2,4+(i>>2)),a=r.subarray(2,4),o=0,s=BB.HEAPU32[r[o]>>2],l=BB.HEAPF32.subarray(s>>2,(s>>2)+a[o]);o++;var u=BB.HEAPU32[r[o]>>2],c=BB.HEAPU32.subarray(u>>2,(u>>2)+a[o]);if(void 0===t){var d=new cv;d.setAttribute("position",new nv(l,3));for(var h=new Float32Array(l.length),f=0,p=l.length;f<p;)h[f++]=n.r,h[f++]=n.g,h[f++]=n.b;return d.setAttribute("color",new $p(h,3)),d.setIndex(new tv(c,1)),BB.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(l),t.attributes.position.needsUpdate=!0,BB.free_wireframe_data_for_base_level(i)}},{key:"updateCollabMesh",value:function(e,t,n){var i=0===t;i||BB.set_destination_refinement_level(e,t);var r=n?BB.get_topological_data2(e,i?BB.Level.CONTROL:BB.Level.REFINED,n.elements):BB.get_topological_data(e,i?BB.Level.CONTROL:BB.Level.REFINED),a=BB.HEAPU32.subarray(r>>2,6+(r>>2)),o=a.subarray(3,6),s=0,l=BB.HEAPU32[a[s]>>2],u=new Float32Array(BB.HEAPF32.subarray(l>>2,(l>>2)+o[s]));s++;var c=BB.HEAPU32[a[s]>>2],d=new Uint32Array(BB.HEAPU32.subarray(c>>2,(c>>2)+o[s]));s++;var h=BB.HEAPU32[a[s]>>2],f=new Uint8Array(BB.HEAPU32.subarray(h>>2,(h>>2)+o[s]));return BB.free_topological_data(r),{positions:u,indices:d,verticesPerFace:f}}}]),n}(cv),VB=["getX","getY","getZ"];function GB(e,t){for(var n={},i=t?t.count:e.count,r=0,a=[],o=[],s=0;s<i;s++){for(var l=t?t.getX(s):s,u="",c=0;c<3;c++)u+="".concat(~~(1e4*e[VB[c]](l)),",");if(u in n)a.push(n[u]);else{for(var d=0;d<3;d++)o.push(e[VB[d]](l));n[u]=r,a.push(r),r++}}for(var h=[],f=0;f<a.length;f+=3)a[f]===a[f+1]||a[f]===a[f+2]||a[f+1]===a[f+2]||h.push(a[f],a[f+1],a[f+2]);return{positions:o,triIndices:h}}var HB=new Rf,WB=new Rf,qB=new Rf,XB=new Rf;function YB(e,t,n,i){var r=[],a=[];if(void 0!==n.userData.shape&&0===n.userData.parameters.depth&&0===n.userData.shape.shapeHoles.length){var o=n.userData.shape.extractShapePointsToFlatArray([]),s=n.userData.parameters.spikes;if("EllipseGeometry"===n.userData.type&&s<=24&&s%4===0&&n.userData.parameters.angle>=360){var l=o.length/2/s;o=o.filter((function(e,t){return Math.floor(t/2)%l===0}))}for(var u=0,c=0;c<o.length;c+=2)u+=(o[c]-o[(0===c?o.length:c)-2])*(o[c+1]+o[(0===c?o.length:c)-1]);e.length=0;var d=0;if(u<0)for(var h=0;h<o.length;h+=2)e.push(o[h],o[h+1],0),r.push(d++);else for(var f=o.length-2;f>=0;f-=2)e.push(o[f],o[f+1],0),r.push(d++);return a.push(d),{indices:r,verticesPerFace:a}}for(var p=new Float32Array([n.userData.parameters.depth])[0],v=0;v<t.length;){if(n.useNgonForTopBottomFaceDuringBake){var m=0;if((e[3*t[v]+2]===p||0===e[3*t[v]+2])&&m++,(e[3*t[v+1]+2]===p||0===e[3*t[v+1]+2])&&m++,(e[3*t[v+2]+2]===p||0===e[3*t[v+2]+2])&&m++,3===m)break}if(t[v+1]===t[v+3]&&t[v+2]===t[v+5]||t[v+0]===t[v+3]&&t[v+2]===t[v+4]){HB.set(e[3*t[v]],e[3*t[v]+1],e[3*t[v]+2]),WB.set(e[3*t[v+1]],e[3*t[v+1]+1],e[3*t[v+1]+2]),qB.set(e[3*t[v+4]],e[3*t[v+4]+1],e[3*t[v+4]+2]),XB.set(e[3*t[v+5]],e[3*t[v+5]+1],e[3*t[v+5]+2]),WB.sub(HB).normalize(),qB.sub(HB).normalize(),XB.sub(HB).normalize();var g=WB.cross(qB).dot(XB);Math.abs(g)>.005||i&&i.some((function(e,t){return t%2!==1&&(v>=i[t]&&v<i[t+1])}))?(r.push(t[v],t[v+1],t[v+2]),a.push(3),v+=3):(r.push(t[v],t[v+1],t[v+4],t[v+5]),a.push(4),v+=6)}else r.push(t[v],t[v+1],t[v+2]),a.push(3),v+=3}if(n.useNgonForTopBottomFaceDuringBake){for(var L=[],y=[],b=0,x=0,w=0;x<e.length;x+=3,w++)0===e[x+2]&&(L.push(w),b++),e[x+2]===p&&y.push(w);if(0===n.userData.parameters.extrudeBevelSize){var _=y[0];y[0]=y[1],y[1]=_}L.reverse(),r.push.apply(r,L.concat(y)),a.push(b,b)}return{indices:r,verticesPerFace:a}}var QB={};!function(e,t){for(var n in t)$u(e,n,{get:t[n],enumerable:!0})}(QB,{calcBoolean:function(){return oN},calcBooleanTopological:function(){return aN},freeMeshSet:function(){return cN},getMeshSet:function(){return sN},hasOpenEdges:function(){return lN},transformMeshSet:function(){return uN}});var KB,JB,$B,eN,tN=new Promise((function(e){KB=e}));function nN(){if(JB)return JB;function e(){return e=(0,ju.Z)((0,Fu.Z)().mark((function e(){var t,i,r,a,s,l;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://unpkg.com/@splinetool/boolean-wasm@0.9.418/build",e.next=3,Promise.all([n.e(232).then(n.bind(n,232)),fetch("".concat("https://unpkg.com/@splinetool/boolean-wasm@0.9.418/build","/boolean.wasm")).then((function(e){return e.arrayBuffer()}))]);case 3:return t=e.sent,i=o(t,2),r=i[0],a=i[1],s=r.default,e.next=10,s({wasmBinary:a});case 10:l=e.sent,KB(l);case 12:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return JB=function(){return e.apply(this,arguments)}(),JB}function iN(e){var t=e.length,n=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(e[0])?n:i,a=$B._malloc(r);return(Number.isInteger(e[0])?new Uint32Array($B.HEAPU32.buffer,a,t):new Float32Array($B.HEAPF32.buffer,a,t)).set(e,0),a}function rN(e){switch(e){case 0:return $B.OP.UNION;case 1:return $B.OP.INTERSECTION;case 2:return $B.OP.A_MINUS_B;case 3:return $B.OP.B_MINUS_A;case 4:return $B.OP.SYMMETRIC_DIFFERENCE;case 5:return $B.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function aN(e,t){void 0===eN&&(eN=$B.init_csg());var n=iN(e),i=$B.csg_calc_topological(eN,n,e.length,rN(t));$B._free(n);var r=$B.HEAPU32.subarray(i>>2,6+(i>>2)),a=r.subarray(3,6),o=0,s=$B.HEAPU32[r[o]>>2],l=new Float32Array($B.HEAPF32.subarray(s>>2,(s>>2)+a[o]));o++;var u=$B.HEAPU32[r[o]>>2],c=new Uint32Array($B.HEAPU32.subarray(u>>2,(u>>2)+a[o]));o++;var d=$B.HEAPU32[r[o]>>2],h=new Uint8Array($B.HEAPU32.subarray(d>>2,(d>>2)+a[o]));return $B.free_mesh_data(i),{positions:l,indices:c,verticesPerFace:h}}function oN(e,t,n,i){void 0===eN&&(eN=$B.init_csg());var r=iN(e),a=$B.csg_calc(eN,r,e.length,i,rN(t));$B._free(r);var o=$B.HEAPU32.subarray(a>>2,5+(a>>2)),s=o.subarray(2,5),l=0,u=$B.HEAPU32[o[l]>>2],c=$B.HEAPF32.subarray(u>>2,(u>>2)+s[l]);l++;var d=$B.HEAPU32[o[l]>>2],h=$B.HEAPF32.subarray(d>>2,(d>>2)+s[l]),f=s[++l];n.setAttribute("position",new nv(c,3)),n.setAttribute("normal",new nv(h,3));var p=$B.HEAPF32.subarray(5+(a>>2),5+(a>>2)+6);return null===n.boundingSphere&&(n.boundingSphere=new np),n.boundingSphere.center.set(p[0],p[1],p[2]),n.boundingSphere.radius=Math.pow(Math.pow(p[3],2)+Math.pow(p[4],2)+Math.pow(p[5],2),.5),n.userData.parameters={width:2*p[3],height:2*p[4],depth:2*p[5]},$B.free_mesh_data(a),f}function sN(e,t,n){if(void 0===$B)return-1;var i,r,a;if(t&&void 0!==e.userData.positions){var o=e.userData;a=o.verticesPerFace.length,i=o.positions,r=Array(o.verticesPerFace.reduce((function(e,t){return e+t}),0)+a);for(var s=0,l=0,u=0;s<o.verticesPerFace.length;s++){r[u++]=o.verticesPerFace[s];for(var c=0;c<o.verticesPerFace[s];c++)r[u++]=o.indices[l++]}}else{var d=function(e,t,n){var i,r;r="TorusGeometry"===e.userData.parameters.type&&e.userData.parameters.arc===2*Math.PI?e.getClosedTorusIndicesForBooleanOrSubdiv():e.getIndex();var a,o=GB(e.getAttribute("position"),r),s=o.positions,l=o.triIndices;if(t&&n){var u=YB(s,l,e),c=u.indices,d=u.verticesPerFace;a=d.length,i=[];for(var h=0,f=0;h<a;h++){i.push(d[h]);for(var p=0;p<d[h];p++)i.push(c[f++])}}else{var v=l.length;i=Array(v+v/3),a=0;for(var m=0,g=0;g<i.length;)i[g++]=3,a++,i[g++]=l[m++],i[g++]=l[m++],i[g++]=l[m++]}return{positions:s,faceIndices:i,nFaces:a}}(e,t,n);i=d.positions,r=d.faceIndices,a=d.nFaces}var h=i.length,f=r.length,p=i.length,v=r.length,m=p*Float32Array.BYTES_PER_ELEMENT+v*Uint32Array.BYTES_PER_ELEMENT,g=p*Float32Array.BYTES_PER_ELEMENT,L=(Uint32Array.BYTES_PER_ELEMENT,$B._malloc(m)),y=new Float32Array($B.HEAPF32.buffer,L,p),b=new Uint32Array($B.HEAPU32.buffer,L+g,v);return y.set(i,0),b.set(r,0),$B.get_csg_mesh(L,h,L+g,f,a)}function lN(e){return $B.has_open_edges(e)}function uN(e,t){$B.transform_csg_mesh(e,t.elements)}function cN(e){$B.free_csg_mesh(e)}tN.then((function(e){return $B=e}));var dN={ConeGeometry:rI,CubeGeometry:aI,CylinderGeometry:eI,DodecahedronGeometry:uI,EllipseGeometry:kR,HelixGeometry:DR,IcosahedronGeometry:RR,LatheGeometry:NR,NonParametricGeometry:rB,PolygonGeometry:aB,PyramidGeometry:oB,RectangleGeometry:dB,SphereGeometry:hB,PlaneGeometry:fB,BackdropGeometry:pB,StarGeometry:mB,TextFrameGeometry:gB,TorusGeometry:LB,TorusKnotGeometry:yB,TriangleGeometry:bB,PathGeometry:_B,VectorGeometry:_R},hN=function(e){return dN[e.type].create(e)};function fN(e){return null!==e&&"booleanOp"in e}var pN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).booleanMeshSetAddress=-1,e.booleanWasTransformed=!1,e.booleanMatrixInvOld=new dp,e}return(0,d.Z)(n,[{key:"updateVisible",value:function(){Au((0,p.Z)(n.prototype),"updateVisible",this).call(this),this.visible=!fN(this.parent)&&this.visible,fN(this.parent)&&this.parent.invalidateDownstreamBooleanData()}},{key:"freeBooleanPointer",value:function(){-1!==this.booleanMeshSetAddress&&(QB.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}},{key:"invalidateDownstreamBooleanData",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.booleanWasTransformed=!0:this.freeBooleanPointer(),fN(this.parent)?this.parent.invalidateDownstreamBooleanData():this}},{key:"invalidateUpstreamBooleanData",value:function(){this.freeBooleanPointer();var e,t=(0,x.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var i=e.value;i instanceof n&&(i.freeBooleanPointer(),fN(i)&&i.invalidateUpstreamBooleanData())}}catch(r){t.e(r)}finally{t.f()}}},{key:"updateTransformState",value:function(e){var t=Au((0,p.Z)(n.prototype),"updateTransformState",this).call(this,e);return t&&fN(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}}]),n}($O(Sv)),vN=new zf;function mN(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.count,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,d=t;d<n;d++){var h=e.getX(d),f=e.getY(d),p=e.getZ(d);h<a&&(a=h),f<o&&(o=f),p<s&&(s=p),h>l&&(l=h),f>u&&(u=f),p>c&&(c=p)}vN.min.set(a,o,s),vN.max.set(l,u,c),vN.getCenter(i),vN.getSize(r).multiplyScalar(.5)}var gN=new cv,LN=new Qp,yN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,gN,LN)).super_Entity(e,i),r}return(0,d.Z)(n,[{key:"updateState",value:function(e,t){this.updateState_Entity(e,t)}},{key:"updateEntityBoxSize",value:function(e,t){var i=this.geometry.getAttribute("position");void 0!==i?mN(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):Au((0,p.Z)(n.prototype),"updateEntityBoxSize",this).call(this,e,t)}}]),n}(pN),bN=function(){function e(t){var n;(0,c.Z)(this,e),t=null!==(n=t)&&void 0!==n?n:{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}return(0,d.Z)(e,[{key:"value",get:function(){return this.node.value},set:function(e){this.node.value=e}}]),e}(),xN=function(){function e(t){(0,c.Z)(this,e),this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=rf.generateUUID(),this.type=t,this.name=""}return(0,d.Z)(e,[{key:"analyze",value:function(e,t){var n;t=null!==(n=t)&&void 0!==n?n:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}},{key:"analyzeAndFlow",value:function(e,t,n){var i;return n=null!==(i=n)&&void 0!==i?i:{},this.analyze(e,n),this.flow(e,t,n)}},{key:"flow",value:function(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:{},e.addFlow(n.slot,n.cache,n.context);var r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}},{key:"build",value:function(e,t,n){var i;t=null!==(i=t)&&void 0!==i?i:this.getType(e,t);var r=e.getNodeData(null!==n&&void 0!==n?n:this);return e.analyzing&&this.appendDepsNode(e,r,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)}},{key:"updateFrame",value:function(e){}},{key:"generateReadonly",value:function(e,t,n,i,r,a){return""}},{key:"generate",value:function(e,t,n,i,r){return""}},{key:"parse",value:function(e,t,n,i){}},{key:"appendDepsNode",value:function(e,t,n){t.deps=(t.deps||0)+1;var i=e.getTypeLength(n);(i>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=i,t.output=n)}},{key:"setName",value:function(e){this.name=e}},{key:"getName",value:function(){return this.name}},{key:"getType",value:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}},{key:"getHash",value:function(){var t,n,i="{";for(t in this)(n=this[t])instanceof e&&(i+='"'+t+'":'+n.getHash()+",");if(this.hashProperties)for(var r=0;r<this.hashProperties.length;r++)n=this[t=this.hashProperties[r]],i+='"'+t+'":"'+String(n)+'",';return i+='"id":"'+this.uuid+'"}'}}]),e}(),wN=function(){function e(){(0,c.Z)(this,e),this.nodes={},this.keywords={}}return(0,d.Z)(e,[{key:"add",value:function(e){this.nodes[e.name]=e}},{key:"addKeyword",value:function(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}}},{key:"remove",value:function(e){delete this.nodes[e.name]}},{key:"removeKeyword",value:function(e){delete this.keywords[e]}},{key:"get",value:function(e){return this.nodes[e]}},{key:"getKeyword",value:function(e,t){return this.keywords[e].callback(t)}},{key:"getKeywordData",value:function(e){return this.keywords[e]}},{key:"contains",value:function(e){return void 0!==this.nodes[e]}},{key:"containsKeyword",value:function(e){return void 0!==this.keywords[e]}}]),e}(),_N=new wN,SN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a;return(0,c.Z)(this,n),(a=t.call(this,e)).scope="",i=null!==(r=i)&&void 0!==r?r:{},a.shared=void 0===i.shared||i.shared,a.unique=void 0!==i.unique&&i.unique,a}return(0,d.Z)(n,[{key:"build",value:function(e,t,i,r){var a;if(t=null!==(a=t)&&void 0!==a?a:this.getType(e),this.getShared(e,t)){var o,s=this.getUnique(e,t);s&&void 0===this.uuid&&(this.uuid=rf.generateUUID()),i=e.getUUID(null!==(o=i)&&void 0!==o?o:this.getUUID(),!s);var l=e.getNodeData(i),u=l.output||this.getType(e);if(e.analyzing)return(l.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,l,t),this.generate(e,t,i)):Au((0,p.Z)(n.prototype),"build",this).call(this,e,t,i);if(s)return l.name=l.name||Au((0,p.Z)(n.prototype),"build",this).call(this,e,t,i),l.name;if(!this.getLabel()&&(!this.getShared(e,u)||e.context.ignoreCache||1===l.deps))return Au((0,p.Z)(n.prototype),"build",this).call(this,e,t,i);i=this.getUUID(!1);var c=this.getTemp(e,i);if(c)return e.format(c,u,t);c=Au((0,p.Z)(n.prototype),"generate",this).call(this,e,t,i,l.output,r);var d=this.generate(e,u,i);return e.addNodeCode(c+" = "+d+";"),e.format(c,u,t)}return Au((0,p.Z)(n.prototype),"build",this).call(this,e,t,i)}},{key:"getShared",value:function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}},{key:"getUnique",value:function(e,t){return this.unique}},{key:"setLabel",value:function(e){return this.label=e,this}},{key:"getLabel",value:function(){return this.label}},{key:"getUUID",value:function(e){var t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}},{key:"getTemp",value:function(e,t){t=t||this.uuid;var n=e.getVars()[t];return n?n.name:void 0}},{key:"generate",value:function(e,t,n,i,r){var a;return this.getShared(e,t)||console.error("TempNode is not shared"),n=null!==(a=n)&&void 0!==a?a:this.uuid,e.getTempVar(n,null!==i&&void 0!==i?i:this.getType(e),r,this.getLabel()).name}}]),n}(xN),kN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a;return(0,c.Z)(this,n),(i=null!==(r=i)&&void 0!==r?r:{}).shared=void 0!==i.shared&&i.shared,(a=t.call(this,e,i)).readonly=!1,a}return(0,d.Z)(n,[{key:"setReadonly",value:function(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}},{key:"getReadonly",value:function(){return this.readonly}},{key:"generate",value:function(e,t,n,i,r,a){var o,s;n=e.getUUID(null!==(o=n)&&void 0!==o?o:this.getUUID()),i=null!==(s=i)&&void 0!==s?s:this.getType(e);var l=e.getNodeData(n);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,i,r,a):e.isShader("vertex")?(l.vertex||(l.vertex=e.createVertexUniform(i,this,r,a,this.getLabel())),e.format(l.vertex.name,i,t)):(l.fragment||(l.fragment=e.createFragmentUniform(i,this,r,a,this.getLabel())),e.format(l.fragment.name,i,t))}}]),n}(SN),AN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v2")).nodeType="Vector2",e.value=i instanceof af?i:new af(i,r),e}return(0,d.Z)(n,[{key:"x",get:function(){return this.value.x},set:function(e){this.value.x=e}},{key:"y",get:function(){return this.value.y},set:function(e){this.value.y=e}},{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}}]),n}(kN),MN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v3")).nodeType="Vector3",e.value=i instanceof Rf?i:new Rf(i,r,a),e}return(0,d.Z)(n,[{key:"x",get:function(){return this.value.x},set:function(e){this.value.x=e}},{key:"y",get:function(){return this.value.y},set:function(e){this.value.y=e}},{key:"z",get:function(){return this.value.z},set:function(e){this.value.z=e}},{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}}]),n}(kN),CN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,e,i,r)).isColorA=!0,o.a=a,o}return(0,d.Z)(n,[{key:"setRGBA",value:function(e,t,i,r){Au((0,p.Z)(n.prototype),"setRGB",this).call(this,e,t,i),this.a=r}},{key:"copy",value:function(e){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e),this.a="a"in e?e.a:1,this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b,this.a)}},{key:"setStyle",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb";if("transparent"===e)return this.setRGBA(0,0,0,0),this;if(t=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="rgba"===a?parseFloat(r[4]):1,Au((0,p.Z)(n.prototype),"setStyle",this).call(this,e,i);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="hsla"===a?parseFloat(r[4]):1,Au((0,p.Z)(n.prototype),"setStyle",this).call(this,e,i)}}return Au((0,p.Z)(n.prototype),"setStyle",this).call(this,e,i)}},{key:"x",get:function(){return this.r},set:function(e){this.r=e}},{key:"y",get:function(){return this.g},set:function(e){this.g=e}},{key:"z",get:function(){return this.b},set:function(e){this.b=e}},{key:"w",get:function(){return this.a},set:function(e){this.a=e}}]),n}(wf),EN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v4")).nodeType="Vector4",i.value=e instanceof CN?e:new CN(e.r,e.g,e.b,e.a),i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}}]),n}(kN),TN=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,PN=/[a-z_0-9]+/gi,DN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o){var s;return(0,c.Z)(this,n),(s=t.call(this,o)).src="",s.nodeType="Function",s.useKeywords=!0,s.includes=[],s.extensions={},s.keywords={},s.isMethod=void 0===o,s.isInterface=!1,s.parse(e,i,r,a),s}return(0,d.Z)(n,[{key:"getShared",value:function(e,t){return!this.isMethod}},{key:"getType",value:function(e){return e.getTypeByFormat(this.type)}},{key:"getInputByName",value:function(e){if(this.inputs)for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]}},{key:"getIncludeByName",value:function(e){if(this.includes)for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]}},{key:"generate",value:function(e,t,n,i,r){var a,o=0,s=this.src;if(this.includes)for(var l=0;l<this.includes.length;l++)e.include(this.includes[l],this);for(var u in this.extensions)e.extensions[u]=!0;for(var c=[];a=PN.exec(this.src);)c.push(a);for(var d=0;d<c.length;d++){var h=c[d],f=h[0],p=!this.isMethod||!this.getInputByName(f),v=f;if(this.keywords[f]||this.useKeywords&&p&&_N.containsKeyword(f)){var m=this.keywords[f];if(!m){var g=_N.getKeywordData(f);g.cache&&(m=e.keywords[f]),m=m||_N.getKeyword(f,e),g.cache&&(e.keywords[f]=m)}v=m.build(e)}f!==v&&"."!==s[h.index+o-1]&&(s=s.substring(0,h.index+o)+v+s.substring(h.index+f.length+o),o+=v.length-f.length),void 0===this.getIncludeByName(v)&&_N.contains(v)&&e.include(_N.get(v))}return"source"===t?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}},{key:"parse",value:function(e,t,n,i){if(this.src=e||"",this.includes=null!==t&&void 0!==t?t:[],this.extensions=null!==n&&void 0!==n?n:{},this.keywords=null!==i&&void 0!==i?i:{},this.isMethod){var r=TN.exec(this.src);if(this.inputs=[],r&&4==r.length){this.type=r[1],this.name=r[2];var a=r[3].match(PN);if(a)for(var o=0;o<a.length;){var s=a[o++],l=void 0;"in"===s||"out"===s||"inout"===s?l=a[o++]:(l=s,s="");var u=a[o++];this.inputs.push({name:u,type:l,qualifier:s})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}}]),n}(SN),ON=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,IN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return(0,c.Z)(this,n),(e=t.call(this)).src="",e.useDefine=!1,e.nodeType="Const",e.parse(i||n.PI,void 0,void 0,void 0,r),e}return(0,d.Z)(n,[{key:"getType",value:function(e){return e.getTypeByFormat(this.type)}},{key:"parse",value:function(e,t,n,i,r){this.src=e||"";var a,o,s="",l=ON.exec(e);this.useDefine=null!==r&&void 0!==r?r:"#"===this.src.charAt(0),l&&l.length>1?(o=l[1],a=l[2],s=l[3]):(a=this.src,o="f"),this.name=a,this.type=o,this.value=s}},{key:"build",value:function(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}},{key:"generate",value:function(e,t,n,i,r){return e.format(this.name,this.getType(e),t)}}]),n}(SN),RN=IN;RN.PI="PI",RN.PI2="PI2",RN.RECIPROCAL_PI="RECIPROCAL_PI",RN.RECIPROCAL_PI2="RECIPROCAL_PI2",RN.LOG2="LOG2",RN.EPSILON="EPSILON";var BN=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),NN=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),zN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,c.Z)(this,n),(e=t.call(this)).inputs=[],e.src="",e.nodeType="Struct",e.parse(i),e}return(0,d.Z)(n,[{key:"getType",value:function(e){return e.getTypeByFormat(this.name)}},{key:"getInputByName",value:function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]}},{key:"generate",value:function(e,t,n,i,r){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}},{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.src=e,this.inputs=[];var t=BN.exec(e);if(t){for(var n,i=t[2];n=NN.exec(i);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name}}]),n}(SN),FN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v2",{shared:!1})).nodeType="UV",i.index=null!==e&&void 0!==e?e:0,i}return(0,d.Z)(n,[{key:"generate",value:function(e,t){e.requires.uv[this.index]=!0;var n=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(i,this.getType(e),t)}}]),n}(SN);_N.addKeyword("uv",(function(){return new FN})),_N.addKeyword("uv2",(function(){return new FN(1)}));var jN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,"v4")).nodeType="ColorSpace",r.input=e,r.method=null!==i&&void 0!==i?i:n.LINEAR_TO_LINEAR,r.hashProperties=["method"],r}return(0,d.Z)(n,[{key:"generate",value:function(e,t){var i,r=this.input.build(e,"v4"),a=this.getType(e),o=n.Nodes[this.method],s=e.include(o);if(s===n.LINEAR_TO_LINEAR)return e.format(r,a,t);if(2===(null===(i=o.inputs)||void 0===i?void 0:i.length)){var l=this.factor.build(e,"f");return e.format(s+"( "+r+", "+l+" )",a,t)}return e.format(s+"( "+r+" )",a,t)}},{key:"fromEncoding",value:function(e){var t=n.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}},{key:"fromDecoding",value:function(e){var t=n.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}}],[{key:"getEncodingComponents",value:function(e){switch(e){case Ph:return["Linear"];case Dh:return["sRGB"];default:return[]}}}]),n}(SN),UN=jN;UN.Nodes={LinearToLinear:new DN(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new DN(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new DN(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},UN.LINEAR_TO_LINEAR="LinearToLinear",UN.SRGB_TO_LINEAR="sRGBToLinear",UN.LINEAR_TO_SRGB="LinearTosRGB";var ZN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return(0,c.Z)(this,n),(e=t.call(this,i,s,o,a,r)).nodeType="Expression",e}return(0,d.Z)(n)}(DN),VN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cf,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v4",{shared:!0})).nodeType="Texture",e.value=i,e.uv=null!==r&&void 0!==r?r:new FN,e.bias=a,e.project=void 0!==o&&o,e}return(0,d.Z)(n,[{key:"getTexture",value:function(e,t){return Au((0,p.Z)(n.prototype),"generate",this).call(this,e,t,this.value.uuid,"t")}},{key:"generate",value:function(e,t){var n;if("sampler2D"===t)return this.getTexture(e,t);var i,r,a=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),i=this.project?"texture2DProj":s?"tex2DBias":"tex2D",r=s?i+"( "+a+", "+o+", "+s+" )":i+"( "+a+", "+o+" )";var l={include:e.isShader("vertex"),ignoreCache:!0},u=this.getType(e);return e.addContext(l),this.colorSpace=null!==(n=this.colorSpace)&&void 0!==n?n:new UN(new ZN("",u)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,u),e.removeContext(),e.format(r,u,t)}}]),n}(kN),GN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"f")).nodeType="Float",i.value=null!==e&&void 0!==e?e:0,i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format(this.value+(this.value%1?"":".0"),i,t)}}]),n}(kN),HN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).inputs=[],r.nodeType="FunctionCall",r.value=e,r.inputs=null!==i&&void 0!==i?i:[],r}return(0,d.Z)(n,[{key:"getFunction",value:function(){return this.value}},{key:"getType",value:function(e){return this.value.getType(e)}},{key:"generate",value:function(e,t,n,i,r){i=this.getType(e);var a=this.value,o=a.build(e,t)+"( ",s=[];if(a.inputs){for(var l=0;l<a.inputs.length;l++){var u=a.inputs[l],c=this.inputs[l]||this.inputs[u.name];s.push(c.build(e,e.getTypeByFormat(u.type)))}o+=s.join(", ")+" )"}return e.format(o,i,t)}}]),n}(SN),WN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.ADD;return(0,c.Z)(this,n),(r=t.call(this)).nodeType="Operator",r.type=e.type,r.a=e,r.b=i,r.op=a,r}return(0,d.Z)(n,[{key:"getType",value:function(e){var t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}},{key:"generate",value:function(e,t){var n=this.getType(e);this.type=n;var i=this.a.build(e,n),r=this.b.build(e,n);return e.format("( "+i+" "+this.op+" "+r+" )",n,t)}}]),n}(SN),qN=WN;qN.ADD="+",qN.SUB="-",qN.MUL="*",qN.DIV="/";var XN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.ABS,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return(0,c.Z)(this,n),(i=t.call(this)).nodeType="Math",i.a=e,"string"!=typeof r?i.b=r:o=r,"string"!=typeof a?i.c=a:o=a,i.method=o,i.hashProperties=["method"],i}return(0,d.Z)(n,[{key:"getNumInputs",value:function(e){switch(this.method){case n.MIX:case n.CLAMP:case n.REFRACT:case n.SMOOTHSTEP:case n.FACEFORWARD:return 3;case n.MIN:case n.MAX:case n.MOD:case n.STEP:case n.REFLECT:case n.DISTANCE:case n.DOT:case n.CROSS:case n.POW:return 2;default:return 1}}},{key:"getInputType",value:function(e){var t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>i?this.a.getType(e):n>i?this.b.getType(e):this.c.getType(e)}},{key:"getType",value:function(e){switch(this.method){case n.LENGTH:case n.DISTANCE:case n.DOT:return"f";case n.CROSS:return"v3"}return this.getInputType(e)}},{key:"generate",value:function(e,t){var i,r,a,o=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,l=this.c?e.getTypeLength(this.c.getType(e)):0,u=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case n.NEGATE:return e.format("( -"+this.a.build(e,u)+" )",u,t);case n.INVERT:return e.format("( 1.0 - "+this.a.build(e,u)+" )",u,t);case n.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case n.STEP:i=this.a.build(e,1===o?"f":u),r=this.b.build(e,u);break;case n.MIN:case n.MAX:case n.MOD:i=this.a.build(e,u),r=this.b.build(e,1===s?"f":u);break;case n.REFRACT:i=this.a.build(e,u),r=this.b.build(e,u),a=this.c.build(e,"f");break;case n.MIX:i=this.a.build(e,u),r=this.b.build(e,u),a=this.c.build(e,1===l?"f":u);break;default:i=this.a.build(e,u),this.b&&(r=this.b.build(e,u)),this.c&&(a=this.c.build(e,u))}var d=[];d.push(i),r&&d.push(r),a&&d.push(a);var h=this.getNumInputs(e);if(d.length!==h)throw Error('Arguments not match used in "'.concat(this.method,'". Require ').concat(h,", currently ").concat(d.length,"."));return e.format(this.method+"( "+d.join(", ")+" )",c,t)}}]),n}(SN),YN=XN;YN.RAD="radians",YN.DEG="degrees",YN.EXP="exp",YN.EXP2="exp2",YN.LOG="log",YN.LOG2="log2",YN.SQRT="sqrt",YN.INV_SQRT="inversesqrt",YN.FLOOR="floor",YN.CEIL="ceil",YN.NORMALIZE="normalize",YN.FRACT="fract",YN.SATURATE="saturate",YN.SIN="sin",YN.COS="cos",YN.TAN="tan",YN.ASIN="asin",YN.ACOS="acos",YN.ARCTAN="atan",YN.ABS="abs",YN.SIGN="sign",YN.LENGTH="length",YN.NEGATE="negate",YN.INVERT="invert",YN.MIN="min",YN.MAX="max",YN.MOD="mod",YN.STEP="step",YN.REFLECT="reflect",YN.DISTANCE="distance",YN.DOT="dot",YN.CROSS="cross",YN.POW="pow",YN.MIX="mix",YN.CLAMP="clamp",YN.REFRACT="refract",YN.SMOOTHSTEP="smoothstep",YN.FACEFORWARD="faceforward";var QN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,"v4")).nodeType="TextureCubeUV",a.value=e,a.uv=i,a.bias=r,a}return(0,d.Z)(n,[{key:"bilinearCubeUV",value:function(e,t,i,r){var a,o,s,l,u=new HN(n.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=null!==(a=this.colorSpaceTL)&&void 0!==a?a:new UN(new ZN("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(u.build(e)+".tl"),this.colorSpaceTR=null!==(o=this.colorSpaceTR)&&void 0!==o?o:new UN(new ZN("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(u.build(e)+".tr"),this.colorSpaceBL=null!==(s=this.colorSpaceBL)&&void 0!==s?s:new UN(new ZN("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(u.build(e)+".bl"),this.colorSpaceBR=null!==(l=this.colorSpaceBR)&&void 0!==l?l:new UN(new ZN("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(u.build(e)+".br");var c={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(c),this.colorSpaceTLExp=new ZN(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new ZN(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new ZN(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new ZN(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();var d=new ZN("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return d.keywords.cubeUV_TL=this.colorSpaceTLExp,d.keywords.cubeUV_TR=this.colorSpaceTRExp,d.keywords.cubeUV_BL=this.colorSpaceBLExp,d.keywords.cubeUV_BR=this.colorSpaceBRExp,d.keywords.cubeUV=u,d}},{key:"generate",value:function(e,t){if(e.isShader("fragment")){var i=this.uv,r=this.bias||e.context.roughness,a=new HN(n.Nodes.roughnessToMip,[r]),o=new YN(a,n.Nodes.m0,n.Nodes.cubeUV_maxMipLevel,YN.CLAMP),s=new YN(o,YN.FLOOR),l=new YN(o,YN.FRACT),u=this.bilinearCubeUV(e,this.value,i,s),c=this.bilinearCubeUV(e,this.value,i,new qN(s,new GN(1).setReadonly(!0),qN.ADD)),d=new YN(u,c,l,YN.MIX);return e.format(d.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}}]),n}(SN),KN=QN;KN.Nodes=function(){var e=new zN("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new RN("float cubeUV_maxMipLevel 8.0",!0),n=new RN("float cubeUV_minMipLevel 4.0",!0),i=new RN("float cubeUV_maxTileSize 256.0",!0),r=new RN("float cubeUV_minTileSize 16.0",!0),a=new DN("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");a.useKeywords=!1;var o=new DN("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");o.useKeywords=!1;var s=new DN("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,a,o,t,n,i,r]);s.useKeywords=!1;var l=new RN("float r0 1.0",!0),u=new RN("float v0 0.339",!0),c=new RN("float m0 -2.0",!0),d=new RN("float r1 0.8",!0),h=new RN("float v1 0.276",!0),f=new RN("float m1 -1.0",!0),p=new RN("float r4 0.4",!0),v=new RN("float v4 0.046",!0),m=new RN("float m4 2.0",!0),g=new RN("float r5 0.305",!0),L=new RN("float v5 0.016",!0),y=new RN("float m5 3.0",!0),b=new RN("float r6 0.21",!0),x=new RN("float v6 0.0038",!0),w=new RN("float m6 4.0",!0);return{bilinearCubeUV:s,roughnessToMip:new DN("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,u,c,d,h,f,p,v,m,g,L,y,b,x,w]),m0:c,cubeUV_maxMipLevel:t}}();var JN=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v3")).nodeType="Normal",i.scope=null!==e&&void 0!==e?e:n.VIEW,i}return(0,d.Z)(n,[{key:"getShared",value:function(){return this.scope===n.WORLD}},{key:"build",value:function(e,t,i,r){var a=e.context[this.scope+"Normal"];return a?a.build(e,t,i,r):Au((0,p.Z)(n.prototype),"build",this).call(this,e,t,i)}},{key:"generate",value:function(e,t,i,r,a){var o;switch(this.scope){case n.VIEW:o=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case n.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case n.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal")}return e.format(o,this.getType(e),t)}}]),n}(SN),$N=JN;$N.LOCAL="local",$N.WORLD="world",$N.VIEW="view",$N.NORMAL="normal",_N.addKeyword("viewNormal",(function(){return new $N($N.VIEW)})),_N.addKeyword("localNormal",(function(){return new $N($N.NORMAL)})),_N.addKeyword("worldNormal",(function(){return new $N($N.WORLD)}));var ez=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v3")).nodeType="Position",i.scope=null!==e&&void 0!==e?e:n.LOCAL,i}return(0,d.Z)(n,[{key:"getType",value:function(){return this.scope===n.PROJECTION?"v4":this.type}},{key:"getShader",value:function(){switch(this.scope){case n.LOCAL:case n.WORLD:return!1}return!0}},{key:"generate",value:function(e,t,i,r,a){var o;switch(this.scope){case n.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case n.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case n.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case n.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(o,this.getType(),t)}}]),n}(SN),tz=ez;tz.LOCAL="local",tz.WORLD="world",tz.VIEW="view",tz.PROJECTION="projection",_N.addKeyword("position",(function(){return new tz})),_N.addKeyword("worldPosition",(function(){return new tz(tz.WORLD)})),_N.addKeyword("viewPosition",(function(){return new tz(tz.VIEW)}));var nz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v3")).nodeType="Reflect",i.scope=null!==e&&void 0!==e?e:n.CUBE,i}return(0,d.Z)(n,[{key:"getUnique",value:function(e){return!e.context.viewNormal}},{key:"getType",value:function(){return this.scope===n.SPHERE?"v2":this.type}},{key:"generate",value:function(e,t){var i=this.getUnique(e);if(e.isShader("fragment")){var r;switch(this.scope){case n.VECTOR:var a=new $N($N.VIEW),o=e.context.roughness,s=a.build(e,"v3"),l=new tz(tz.VIEW).build(e,"v3"),u=o?o.build(e,"f"):void 0,c="reflect( -normalize( ".concat(l," ), ").concat(s," )");u&&(c="normalize( mix( ".concat(c,", ").concat(s,", ").concat(u," * ").concat(u," ) )"));var d="inverseTransformDirection( ".concat(c,", viewMatrix )");i?(e.addNodeCode("vec3 reflectVec = ".concat(d,";")),r="reflectVec"):r=d;break;case n.CUBE:var h=new n(n.VECTOR).build(e,"v3"),f="vec3( -"+h+".x, "+h+".yz )";i?(e.addNodeCode("vec3 reflectCubeVec = ".concat(f,";")),r="reflectCubeVec"):r=f;break;case n.SPHERE:var p="normalize( ( viewMatrix * vec4( "+new n(n.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode("vec2 reflectSphereVec = ".concat(p,";")),r="reflectSphereVec"):r=p}return e.format(r,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}}]),n}(SN),iz=nz;iz.CUBE="cube",iz.SPHERE="sphere",iz.VECTOR="vector";var rz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new VN,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v4")).nodeType="TextureCube",e.value=i,e.radianceNode=new KN(e.value,null!==r&&void 0!==r?r:new iz(iz.VECTOR),a),e.irradianceNode=new KN(e.value,new $N($N.WORLD),new GN(1).setReadonly(!0)),e}return(0,d.Z)(n,[{key:"generate",value:function(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}}]),n}(SN),az=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bv,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v4",{shared:!0})).nodeType="CubeTexture",e.value=i,e.uv=null!==r&&void 0!==r?r:new iz,e.bias=a,e}return(0,d.Z)(n,[{key:"getTexture",value:function(e,t){return Au((0,p.Z)(n.prototype),"generate",this).call(this,e,t,this.value.uuid,"tc")}},{key:"generate",value:function(e,t){var n,i;if("samplerCube"===t)return this.getTexture(e,t);var r,a=this.getTexture(e,t),o=null===(n=this.uv)||void 0===n?void 0:n.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),r=s?"texCubeBias( "+a+", "+o+", "+s+" )":"texCube( "+a+", "+o+" )";var l={include:e.isShader("vertex"),ignoreCache:!0},u=this.getType(e);return e.addContext(l),this.colorSpace=null!==(i=this.colorSpace)&&void 0!==i?i:new UN(new ZN("",u)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,u),e.removeContext(),e.format(r,u,t)}}]),n}(kN),oz=["x","y","z","w"],sz=["float","vec2","vec3","vec4"],lz={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},uz={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},cz=function(){function e(){(0,c.Z)(this,e),this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){var i=this.getIncludes(t,n);if(!i)return"";var r="";i=i.sort(e);for(var a=0;a<i.length;a++)i[a].src&&(r+=i[a].src+"\n");return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}return(0,d.Z)(e,[{key:"build",value:function(e,t){this.addVertexParsCode("\nuniform int frameIndex;\nuniform vec2 resolution;\nuniform mat4 previousModelViewMatrix;\nuniform mat4 previousProjectionMatrix;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n"),this.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n\nuniform int frameIndex;\nuniform vec2 resolution;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos) {\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n"),this.buildShader("vertex",e),this.buildShader("fragment",t);for(var n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){var i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode("\n// TODO: This could be generated CPU side and passed to the shader every frame\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\n// TODO: Pass correct view size\nvec2 offset = haltonSequence[frameIndex];\noffset.x /= resolution.x;\noffset.y /= resolution.y;\n\nvec4 currentPosition = gl_Position;\nvec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);\n\n// We want to calculate the velocity with unjittered positions\n// so that things that are not moving get a velocity = 0\nvCurrentPosition = currentPosition;\nvPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);\n#ifdef OUTLINE_COMPENSATION\nvPreviousPosition.xy += OUTLINE_COMPENSATION;\n#endif\ngl_Position = currentPositionJittered;\n\n"),this.addFragmentFinalCode("\nvec2 oldPos = vPreviousPosition.xy;\n    oldPos /= vPreviousPosition.w;\n    oldPos.xy = (oldPos.xy+1.)/2.0;\n\nvec2 newPos = vCurrentPosition.xy;\n    newPos /= vCurrentPosition.w;\n    newPos.xy = (newPos.xy+1.)/2.0;\n\nvec2 velocity = (newPos - oldPos);\n\n// NOTE: We use the blue channel to avoid temporal reprojection\n// with incorrect velocity if the fragment is transparent.\ngVelocity = vec4(velocity, gl_FragColor.a < 1.0 ? 0.0 : 1.0, 1.);\n")),this}},{key:"buildShader",value:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}},{key:"setMaterial",value:function(e,t){return this.defines={},this}},{key:"addFlow",value:function(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}},{key:"removeFlow",value:function(){return this.removeSlot().removeCache().removeContext()}},{key:"addCache",value:function(e){return this.cache=null!==e&&void 0!==e?e:"",this.caches.push(this.cache),this}},{key:"removeCache",value:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}},{key:"addContext",value:function(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}},{key:"removeContext",value:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}},{key:"addSlot",value:function(e){return this.slot=e||"",this.slots.push(this.slot),this}},{key:"removeSlot",value:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}},{key:"addFragmentVariable",value:function(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode("".concat(t," ").concat(e,";")),this.fragmentVariables[e]="")}},{key:"addFragmentParsVariable",value:function(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode("".concat(t," ").concat(e,";")),this.fragmentParsVariables[e]="")}},{key:"addVertexParsVariable",value:function(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode("".concat(t," ").concat(e,";")),this.vertexParsVariables[e]="")}},{key:"addVertexCode",value:function(e){this.addCode(e,"vertex")}},{key:"addFragmentCode",value:function(e){this.addCode(e,"fragment")}},{key:"addCode",value:function(e,t){this.code[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}},{key:"addVertexNodeCode",value:function(e){this.addNodeCode(e,"vertex")}},{key:"addFragmentNodeCode",value:function(e){this.addNodeCode(e,"fragment")}},{key:"addNodeCode",value:function(e,t){this.nodeCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}},{key:"clearNodeCode",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:this.shader;var n=this.nodeCode[e];return this.nodeCode[e]="",n}},{key:"clearVertexNodeCode",value:function(){return this.clearNodeCode("vertex")}},{key:"clearFragmentNodeCode",value:function(){return this.clearNodeCode("fragment")}},{key:"addVertexFinalCode",value:function(e){this.addFinalCode(e,"vertex")}},{key:"addFragmentFinalCode",value:function(e){this.addFinalCode(e,"fragment")}},{key:"addFinalCode",value:function(e,t){this.finalCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}},{key:"addVertexParsCode",value:function(e){this.addParsCode(e,"vertex")}},{key:"addFragmentParsCode",value:function(e){this.addParsCode(e,"fragment")}},{key:"addParsCode",value:function(e,t){this.parsCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}},{key:"addVaryCode",value:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}},{key:"isCache",value:function(e){return-1!==this.caches.indexOf(e)}},{key:"isSlot",value:function(e){return-1!==this.slots.indexOf(e)}},{key:"define",value:function(e,t){this.defines[e]=void 0===t?1:t}},{key:"require",value:function(e){this.requires[e]=!0}},{key:"isDefined",value:function(e){return void 0!==this.defines[e]}},{key:"getVar",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"varying",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=this.getVars(i),s=o[e];if(!s){var l=o.length;s={name:n||"node"+r+l+(a?"_"+a:""),type:t},o.push(s),o[e]=s}return s}},{key:"getTempVar",value:function(e,t,n,i){return this.getVar(e,t,n,this.shader,"T",i)}},{key:"getAttribute",value:function(e,t){if(!this.attributes[e]){var n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}},{key:"getCode",value:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}},{key:"getVarListCode",value:function(e,t){var n;t=null!==(n=t)&&void 0!==n?n:"";for(var i="",r=0,a=e.length;r<a;++r){var o=e[r],s=o.type,l=o.name,u=o.size,c=this.getFormatByType(s);if(void 0===c)throw new Error("Node pars "+c+" not found.");c.includes("[]")?i+=t+" "+c.substring(0,c.length-2)+" "+l+"[".concat(u,"];\n"):i+=t+" "+c+" "+l+";\n"}return i}},{key:"getVars",value:function(e){return this.inputs.vars[null!==e&&void 0!==e?e:this.shader]}},{key:"getNodeData",value:function(e){var t=e instanceof xN?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}},{key:"createUniform",value:function(e,t,n,i,r,a){if(t.includes("[]")){var o=this.inputs.arrayUniforms,s=o.list.length,l=new bN({type:t,size:n.size,name:i||"nodeUA"+s+(a?"_"+a:""),node:n,needsUpdate:r});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}var u=this.inputs.uniforms,c=u.list.length,d=new bN({type:t,name:i||"nodeU"+c+(a?"_"+a:""),node:n,needsUpdate:r});return u.list.push(d),u[e].push(d),u[e][d.name]=d,this.uniforms[d.name]=d,d}},{key:"createVertexUniform",value:function(e,t,n,i,r){return this.createUniform("vertex",e,t,n,i,r)}},{key:"createFragmentUniform",value:function(e,t,n,i,r){return this.createUniform("fragment",e,t,n,i,r)}},{key:"include",value:function(e,t,n){var i;if(e="string"==typeof e?_N.get(e):e,!1===this.context.include)return e.name;e instanceof DN?i=this.includes.functions:e instanceof RN?i=this.includes.consts:e instanceof zN&&(i=this.includes.structs);var r=i[this.shader]=i[this.shader]||[];if(e){var a,o=r[e.name];if(o||(o=r[e.name]={node:e,deps:[]},r.push(o),o.src=e.build(this,"source")),e instanceof DN&&t&&r[t.name]&&-1===r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),null!==(a=e.includes)&&void 0!==a&&a.length)){var s=0;do{this.include(e.includes[s++],t)}while(s<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")}},{key:"colorToVectorProperties",value:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}},{key:"colorToVector",value:function(e){return e.replace(/c/g,"v3")}},{key:"getIncludes",value:function(e,t){return this.includes[e][t||this.shader]}},{key:"getConstructorFromLength",value:function(e){return sz[e-1]}},{key:"isTypeMatrix",value:function(e){return/^m/.test(e)}},{key:"getTypeLength",value:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}},{key:"getTypeFromLength",value:function(e){return 1===e?"f":"v"+e}},{key:"findNode",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<arguments.length;i++){var r=t[i];if(null!==r&&void 0!==r&&r.isNode)return r}}},{key:"resolve",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<arguments.length;i++){var r=t[i];if(void 0!==r){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case dd:case hd:return new az(r);case vd:return new rz(new VN(r));default:return new VN(r)}else{if(r.isVector2)return new AN(r);if(r.isVector3)return new MN(r);if(r.isVector4)return new EN(r)}}}}},{key:"format",value:function(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}},{key:"getTypeByFormat",value:function(e){return lz[e]||e}},{key:"getFormatByType",value:function(e){return uz[e]||e}},{key:"getUUID",value:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}},{key:"getElementByIndex",value:function(e){return oz[e]}},{key:"getIndexByElement",value:function(e){return oz.indexOf(e)}},{key:"isShader",value:function(e){return this.shader===e}},{key:"setShader",value:function(e){return this.shader=e,this}},{key:"mergeDefines",value:function(e){for(var t in e)this.defines[t]=e[t];return this.defines}},{key:"mergeUniform",value:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms}},{key:"getTextureEncodingFromMap",value:function(e){var t;return e?e.isTexture&&(t=e.encoding):t=Ph,t===Ph&&this.context.gamma&&(t=Dh),t}}]),e}(),dz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"c")).nodeType="Color",e.value=i instanceof CN?i:new CN(i||0,r,a,o),e}return(0,d.Z)(n,[{key:"setRGBA",value:function(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}},{key:"generate",value:function(e,t,n,i,r,a){var o,s;n=e.getUUID(null!==(o=n)&&void 0!==o?o:this.getUUID()),i=null!==(s=i)&&void 0!==s?s:this.getType(e);var l=e.getNodeData(n),u=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){var c=this.alpha.build(e,"f");e.addFragmentNodeCode("accumAlpha += ( 1.0 - accumAlpha ) * ".concat(c,";"))}return u?this.generateReadonly(e,t,n,i,r,a):e.isShader("vertex")?(l.vertex||(l.vertex=e.createVertexUniform(i,this,r,a,this.getLabel())),e.format(l.vertex.name,i,t)):(l.fragment||(l.fragment=e.createFragmentUniform(i,this,r,a,this.getLabel())),e.format(l.fragment.name,i,t))}},{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}}]),n}(kN),hz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"i")).nodeType="Int",i.value=Math.floor(null!==e&&void 0!==e?e:0),i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format(this.value.toString(),i,t)}}]),n}(kN),fz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"b")).nodeType="Bool",i.value=null!==e&&void 0!==e&&e,i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i){return e.format(this.value?"true":"false",i,t)}}]),n}(kN),pz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"f[]")).nodeType="FloatArray",e.size=i,e.value=Array.isArray(r)?r:"number"==typeof r?new Array(i).fill(r):new Array(i).fill(0),e}return(0,d.Z)(n)}(kN),vz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(kN),mz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"v3")).image=e,i._value=new Rf,i}return(0,d.Z)(n,[{key:"value",get:function(){var e,t;return this._value.x=this.image.isVideo?null!==(e=this.image.img.videoWidth)&&void 0!==e?e:0:this.image.img.width,this._value.y=this.image.isVideo?null!==(t=this.image.img.videoHeight)&&void 0!==t?t:0:this.image.img.height,this._value}}]),n}(vz),gz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,"t")).image=e,r.wrap=i,r}return(0,d.Z)(n,[{key:"value",get:function(){return this.image.getTexture(this.wrap)}}]),n}(vz),Lz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"m3")).nodeType="Matrix3",i.value=null!==e&&void 0!==e?e:new of,i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}},{key:"elements",get:function(){return this.value.elements},set:function(e){this.value.fromArray(e)}}]),n}(kN),yz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,"m4")).nodeType="Matrix4",i.value=null!==e&&void 0!==e?e:new dp,i}return(0,d.Z)(n,[{key:"generateReadonly",value:function(e,t,n,i,r,a){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}},{key:"elements",get:function(){return this.value.elements},set:function(e){this.value.fromArray(e)}}]),n}(kN);function bz(e,t,n){e.setUvTransform(n[0],n[1],t[0],t[1],0,0,0)}var xz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,new of)).repeat=e,r.offset=i,bz(r.value,e,i),r}return(0,d.Z)(n,[{key:"updateMatrix",value:function(){bz(this.value,this.repeat,this.offset)}}]),n}(Lz),wz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;return(0,c.Z)(this,n),(e=t.call(this,"v4[]")).nodeType="Vector4Array",e.size=i,e.value=Array.isArray(r)?r:r instanceof Ef?new Array(i).fill(r):new Array(i).fill(new Ef(0)),e}return(0,d.Z)(n)}(kN),_z=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,"v3")).nodeType="Blend",o.a=e,o.b=i,o.alpha=r,o.mode=a,o}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){var n=[];return n.push(this.a.build(e,"c")),n.push(this.b.build(e,"c")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),e.format("spe_blend("+n.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Sz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,"v3")).nodeType="CustomColor",r.color=e,r.alpha=i,r.calpha="g".concat(r.uuid.toString().replace(/-/g,""),"_calpha"),r}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){var i=e.include(n.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");var r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?"luminance(".concat(this.mask.build(e,"v3"),")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),kz=Sz;kz.Nodes={customColor:new DN("vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color;\n\t\t\t}")};var Az=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,"v3")).nodeType="CustomNormal",r.cnormal=e,r.alpha=i,r.calpha="g".concat(r.uuid.toString().replace(/-/g,""),"_calpha"),r}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){var i=e.include(n.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");var r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Mz=Az;Mz.Nodes={customNormal:new DN("vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var Cz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f,p){var v;return(0,c.Z)(this,n),(v=t.call(this,"v3")).nodeType="CustomTexture",v.texture=e,v.textureSize=i,v.crop=r,v.projection=a,v.axis=o,v.side=s,v.size=l,v.blending=u,v.mat=d,v.isMask=p,v.alpha=h,v.mode=f,v.calpha="g".concat(v.uuid.toString().replace(/-/g,""),"_calpha"),v}return(0,d.Z)(n,[{key:"generate",value:function(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;var i,r="g".concat(this.uuid.toString().replace(/-/g,""));switch(this.projection.value){case 3:i=e.include(n.Nodes.cylindrical);break;case 2:i=e.include(n.Nodes.spherical);break;case 1:var a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=["zy","xz","xy"][this.axis.value],s=new DN("\n\t\tvec3 ".concat(r,"_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 projected = (1. + (position.").concat(o,")) / 2.;\n\t\t\t\tvec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t").concat(2===this.side.value?"":"lalpha *= step(0.0, ".concat(1===this.side.value?"-1.0 * ":"","dot(vObjectNormal, mat * ").concat(a,"));"),"\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"));i=e.include(s);break;case 4:i=e.include(n.Nodes.triplanar);break;default:i=e.include(n.Nodes.uv)}e.addFragmentVariable(this.calpha,"float");var l=[];if(l.push("normal"),l.push(this.texture.generate(e,"t")),l.push(this.textureSize.build(e,"v2")),l.push(this.crop.build(e,"f")),l.push(this.mat.build(e,"mat3")),l.push(this.size.build(e,"v2")),l.push(this.blending.build(e,"f")),l.push(this.isMask.build(e,"b")),l.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),l.push(this.alpha.build(e,"f")),l.push(this.mode.build(e,"i")),l.push(this.calpha),4===this.projection.value){var u="".concat(r,"_writeUvs"),c=u+"0",d=u+"1",h=u+"2",f="".concat(r,"_triplanarWeights");e.addFragmentVariable(c,"vec2"),e.addFragmentVariable(d,"vec2"),e.addFragmentVariable(h,"vec2"),e.addFragmentVariable(f,"vec3"),l.push(c),l.push(d),l.push(h),l.push(f)}else{var p="".concat(r,"_writeUvs");e.addFragmentVariable(p,"vec2"),l.push(p)}return e.format(i+"("+l.join(",")+")",this.getType(e),t)}}]),n}(SN),Ez=Cz;Ez.Nodes={cylindrical:new DN("\nvec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\t\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new DN("\nvec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new DN("vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"),triplanar:new DN("vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {\n\t\t\t\tvec3 p = position;\n\t\t\t\tvec2 uv0 = (1.0 + p.xy) / 2.0;     \n\t\t\t\tvec2 uv1 = (1.0 + p.zy) / 2.0;\t\t\n\t\t\t\tvec2 uv2 = (1.0 + p.xz) / 2.0;\t\t\n\t\n\t\t\t\tuv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\n\t\t\t\t// Write out all sets of UVs that we generated\n\t\t\t\twriteUvs0 = uv0;\n\t\t\t\twriteUvs1 = uv1;\n\t\t\t\twriteUvs2 = uv2;\n\t\t\t\twriteWeights = weights;\n\n\t\t\t\t// Derivatives for LOD\n\t\t\t\tvec2 df0 = fwidth(uv0);\n\t\t\t\tvec2 df1 = fwidth(uv1);\n\t\t\t\tvec2 df2 = fwidth(uv2);\n\t\t\t\tif (df0.x > 0.5) df0.x = 0.0;\n\t\t\t\tif (df1.x > 0.5) df1.x = 0.0;\n\t\t\t\tif (df2.x > 0.5) df2.x = 0.0;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                \tvec4 tmp = \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#else\n                \tvec4 tmp = \n\t\t\t\t\t\ttextureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttextureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttextureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\n\t\t\t\t// Apply cropping across all 3 planes\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;//n * 0.5 + 0.5;\n\t\t\t}\t\t\t\n\t\t\t")};var Tz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f,p){var v;return(0,c.Z)(this,n),(v=t.call(this,"v3")).nodeType="Depth",v.gradientType=e,v.smooth=i,v.near=r,v.far=a,v.isVector=o,v.isWorldSpace=s,v.origin=l,v.direction=u,v.colors=d,v.steps=h,v.isMask=p,v.alpha=f,v.calpha="g".concat(v.uuid.toString().replace(/-/g,""),"_calpha"),v}return(0,d.Z)(n,[{key:"generate",value:function(e,t){var i="g".concat(this.uuid.toString().replace(/-/g,"")),r=new DN("vec3 ".concat(i,"_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[").concat(i,"_MAX_COLORS], float steps[").concat(i,"_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ").concat(i,"_IS_VECTOR\n                   #ifdef ").concat(i,"_LINEAR\n                       #ifdef ").concat(i,"_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ").concat(i,"_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ").concat(i,"_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ").concat(i,"_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ").concat(i,"_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a * mask;\n               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t   \n               return color.rgb;\n\t\t\t}"),[n.Nodes.vectorLinearWorldSpaceDepth,n.Nodes.vectorLinearObjectSpaceDepth,n.Nodes.vectorSphericalObjectSpaceDepth,n.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define("".concat(i,"_MAX_COLORS"),this.colors.value.length),this.smooth.value&&e.define("".concat(i,"_SMOOTH")),this.isVector.value>.5&&e.define("".concat(i,"_IS_VECTOR")),0===this.gradientType.value&&e.define("".concat(i,"_LINEAR")),this.isWorldSpace.value>.5&&e.define("".concat(i,"_WORLDSPACE")),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");var a=e.include(r),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.isMask.build(e,"b")),o.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(a+"("+o.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Pz=Tz;Pz.Nodes={vectorLinearWorldSpaceDepth:new DN("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new DN("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new DN("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new DN("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var Dz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u){var d;return(0,c.Z)(this,n),(d=t.call(this,"v3")).nodeType="Fresnel",d.color=e,d.bias=i,d.scale=r,d.intensity=a,d.factor=o,d.isMask=u,d.alpha=s,d.mode=l,d.calpha="g".concat(d.uuid.toString().replace(/-/g,""),"_calpha"),d}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");var n=new DN("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\t\tfloat lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn color;\n\t\t\t\t}"),i=e.include(n),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Oz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d){var h;return(0,c.Z)(this,n),(h=t.call(this,"v3")).nodeType="Gradient",h.gradientType=e,h.smooth=i,h.colors=r,h.steps=a,h.offset=o,h.morph=s,h.angle=l,h.isMask=d,h.alpha=u,h.calpha="g".concat(h.uuid.toString().replace(/-/g,""),"_calpha"),h}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");var i=e.include(n.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Iz=Oz;Iz.Nodes={gradient:new DN("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var Rz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,"v3")).nodeType="Matcap",o.texture=e,o.isMask=a,o.alpha=i,o.mode=r,o.calpha="g".concat(o.uuid.toString().replace(/-/g,""),"_calpha"),o}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");var i=e.include(n.Nodes.matcap);e.require("normal"),e.requires.normal=!0;var r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Bz=Rz;Bz.Nodes={matcap:new DN("vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tvec3 viewDir = normalize( vViewPosition );\n\t\t\t\t\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\t\t\t\t\tvec3 y = cross( viewDir, x );\n\t\t\t\t\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\t\t\t\t\tvec4 matcapColor = texture2D( matcapTex, uv );\n\n\t\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\t\n\t\t\t\t\treturn matcapColor.rgb;\n            \t}")};var Nz,zz=((Nz=zz||{}).SIMPLEX="simplex3d",Nz.SIMPLEX_FRACTAL="simplex3dFractal",Nz.ASHIMA="simplexAshima",Nz.FBM="fbm",Nz.PERLIN="perlin",Nz.VORONOI="voronoi",Nz),Fz=function(){var e=new DN("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new DN("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new RN("float F3 0.3333333"),t.keywords.G3=new RN("float G3 0.1666667");var n=new DN("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),i=new DN("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new DN("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new DN("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[i,r]),o=new DN("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new DN("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new DN("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[s]),u=new DN("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);u.keywords.NUM_OCTAVES=new RN("int NUM_OCTAVES ".concat(5));var c=new DN("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new DN("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[i,r,c]),h=new DN("float hashwithoutsine13(vec3 p3)\n\t\t{\n\t\t\tp3  = fract(p3 * .1031);\n\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t}"),f=new DN("vec3 hashwithoutsine33(vec3 p3)\n\t\t{\n\t\t\tp3 = fract(p3 * vec3(.1031, .1030, .0973));\n\t\t\tp3 += dot(p3, p3.yxz+33.33);\n\t\t\treturn fract((p3.xxy + p3.yxx)*p3.zyx);\n\t\t}"),p=new DN("float metric(in vec3 p)\n\t\t{\n\t\t\t// L2 \n\t\t\treturn length(p);\n\n\t\t\t// Chebyshev \n\t\t\t// vec3 a = abs(p);\n\t\t\t// return max(a.x, max(a.y, a.z));\n\t\t}"),v=new DN("float smin( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(b, a, h) - correction;\n\t\t}"),m=new DN("float smax( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(a, b, h) + correction;\n\t\t}"),g=new DN("float remap(float value, float input_min, float input_max, float output_min, float output_max) {\n\t\t\t// Compute width of each interval\n\t\t\tfloat input_width = input_max - input_min;\n\t\t\tfloat output_width = output_max - output_min;\n\t\t\n\t\t\t// Convert input range into a 0-1 range \n\t\t\tfloat scaled = (value - input_min) / input_width;\n\t\t\n\t\t\t// Convert the 0-1 range into a value in output range\n\t\t\treturn output_min + (scaled * output_width);\n\t\t}");return{simplex:t,simplexFractal:n,simplexAshima:a,fbm:u,perlin:d,voronoi:new DN('float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) \n\t\t{\n\t\t\t// Integer and fractional parts of this point\'s coordinates\n\t\t\tivec3 p = ivec3(floor(x));\n\t\t\tvec3 f = fract(x);\n\n\t\t\t// Different variables that we will use to construct noise:\n\t\t\t//\n\t\t\t// f1: distance to the closest feature point\n\t\t\t// f2: distance to the second closest feature point\n\t\t\t// e: distance to the closest edge (cell boundary)\n\t\t\t//\n\t\t\t// We also compute "smooth" versions of all of the above quantites, essentially\n\t\t\t// replacing "hard" minimums with "smooth" minimums (described by IQ)\n\t\t\tfloat f1_smooth = 8.0;\n\t\t\tfloat f1 = 8.0;\n\t\t\tfloat f2_smooth = 8.0;\n\t\t\tfloat f2 = 8.0;\n\t\t\tfloat e_smooth = 8.0;\n\t\t\tfloat e = 8.0;\n\n\t\t\t// Variables stored from closest cell\n\t\t\tivec3 mb;\n\t\t\tvec3 mr; \n\n\t\t\tint steps = quality;\n\t\t\t\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d = length(r);\n\t\t\t\t\n\t\t\t\tf1_smooth = smin(d, f1_smooth, smoothness);\n\n\t\t\t\t// Store un-smoothed distances too \n\t\t\t\tif (d < f1) \n\t\t\t\t{\n\t\t\t\t\tf2 = f1;\n\t\t\t\t\tf1 = d;\n\n\t\t\t\t\tmb = ivec3(x, y, z);\n\t\t\t\t\tmr = r;\n\t\t\t\t} \n\t\t\t\telse if (d < f2) \n\t\t\t\t{\n\t\t\t\t\tf2 = d;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\t\n\t\t\tfloat id = hashwithoutsine13(vec3(p + mb) + seed);\n\n\t\t\t// Second pass for edge distance  \n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\t// Start search at the cell that contains the closest point to "x" (found in 1st pass)\n\t\t\t\tivec3 b = mb + ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d1 = dot(0.5 * (mr + r), (r - mr)); \t\t\t\t// IQ normalizes "r - mr" but that breaks things for the smooth version?\n\t\t\t\tfloat d2 = dot(0.5 * (mr + r), normalize(r - mr));\n\n\t\t\t\te_smooth = smin(d1, e_smooth, smoothness);\n\n\t\t\t\te = min(e, d2);\n\n\t\t\t\t// Also compute a smooth version of F2 in this pass\n\t\t\t\t{\n\t\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\t\tif (b != mb) \n\t\t\t\t\t{\n\t\t\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\t\t\tfloat d = length(r);\n\n\t\t\t\t\t\tf2_smooth = smin(d, f2_smooth, smoothness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Different visualization modes \n\t\t\tif (style == 0) \n\t\t\t{\n\t\t\t\treturn f1_smooth;\n\t\t\t}\n\t\t\tif (style == 1) \n\t\t\t{\n\t\t\t\treturn f2_smooth;\n\t\t\t}\n\t\t\tif (style == 2) \n\t\t\t{\n\t\t\t\treturn f2_smooth - f1_smooth;\n\t\t\t\t\n\t\t\t\t// "Pebbles" also cool\n\t\t\t\t//return step(0.2, f2_smooth - f1_smooth);\n\t\t\t}\n\t\t\tif (style == 3) \n\t\t\t{\n\t\t\t\t// This one is really good for rock / stone effects\n\t\t\t\tfloat a = f1; \n\t\t\t\tfloat b = f2;\n\t\t\t\tfloat k = 3.0;\n\t\t\t\tfloat h = max(k - abs(a - b), 0.0) / k;\n\t\t\t\tfloat final = min(a, b) - h * h * k * (1.0 / 4.0);\n\t\t\t\treturn final;\n\t\t\t}\n\t\t\tif (style == 4) \n\t\t\t{\n\t\t\t\t// Some random adjustments to make this style stand out more \n\t\t\t\treturn exp(5.0 * e_smooth);\n\t\t\t}\n\t\t\tif (style == 5) \n\t\t\t{\n\t\t\t\treturn pow(f1_smooth, 3.0);\n\t\t\t}\n\t\t\tif (style == 6) \n\t\t\t{\t\t\t\t\n\t\t\t\tconst float eps = 0.0125;\n\n\t\t\t\t// Thicker lines as the user increases the smoothness slider\n\t\t\t\tfloat thickness = smoothness * 0.25 + eps;\n\n\t\t\t\t// Blurrier lines as the user increases the smoothness slider\n\t\t\t\tfloat blur = pow(smoothness, 3.0) * 0.25 + eps;\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\tthickness - thickness * blur, \n\t\t\t\t\tthickness + thickness * blur, \n\t\t\t\t\te\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (style == 7) \n\t\t\t{\n\t\t\t\treturn hashwithoutsine13(vec3(p + mb) + seed);\n\t\t\t}\n\t\t}\n\t',[h,f,p,v,m,g])}}(),jz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f,p,v,m,g,L,y,b,x){var w;return(0,c.Z)(this,n),(w=t.call(this,"v3")).nodeType="Noise",w.scale=e,w.size=i,w.move=r,w.fA=a,w.fB=o,w.distortion=s,w.colorA=l,w.colorB=u,w.colorC=d,w.colorD=h,w.noiseType=p,w.voronoiStyle=m,w.highCut=g,w.lowCut=L,w.smoothness=y,w.seed=b,w.quality=x,w.isMask=v,w.alpha=f,w.calpha="g".concat(w.uuid.toString().replace(/-/g,""),"_calpha"),w}return(0,d.Z)(n,[{key:"generate",value:function(e,t,n,i,r){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");var a=Object.values(zz)[this.noiseType.value],o="voronoi"==a?"\n\t\tfloat v = ".concat(a,'(st + move, voronoiStyle, smoothness, seed, quality);\n\n\t\t// Apply clipping to colors\n\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t// Note that the voronoi mode only uses colors "A" and "C" from the UI \n\t\tvec4 color = mix(colorA, colorC, v); \n\t\t'):"\n\t\tvec3 q = vec3(".concat(a,"(st),\n\t\t\t\t\t   ").concat(a,"(st + vec3(1.0)),\n\t\t\t\t\t   ").concat(a,"(st + vec3(1.0)));\n\t\tvec3 r = vec3(").concat(a,"(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t  ").concat(a,"(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t  ").concat(a,"(st * q));\n\t\tfloat f = ").concat(a,"(st + r);\n\t\tvec4 color;\n\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\t\t"),s=new DN("vec3 ".concat(a,"customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) \n\t\t\t{\n                // Prevent scale of zero \n\t\t\t\tscale = max(abs(scale), 0.001);\n\n\t\t\t\tvec3 st = position / size;\n\t\t\t\tst /= scale;\n\n\t\t\t\t").concat(o,"\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}"),[Fz.simplex,Fz.simplexFractal,Fz.simplexAshima,Fz.fbm,Fz.perlin,Fz.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}}]),n}(SN);jz.numOctaves=5;var Uz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f,p,v,m,g,L){var y;return(0,c.Z)(this,n),(y=t.call(this,"v3")).nodeType="Outline",y.firstTime=!0,y.outlineColor=e,y.contourColor=i,y.outlineWidth=r,y.contourWidth=a,y.contourThreshold=o,y.outlineThreshold=s,y.contourFrequency=l,y.outlineSmoothing=u,y.contourDirection=d,y.positionalLines=h,y.compensation=f,y.resolution=p,y.normalMap=v,y.depthMap=m,y.pixelRatio=g,y.alpha=L,y.calpha="g".concat(y.uuid.toString().replace(/-/g,""),"_calpha"),y}return(0,d.Z)(n,[{key:"generate",value:function(e,t){var i="g".concat(this.uuid.toString().replace(/-/g,""));if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION","".concat(i,"_offset")),this.firstTime){var r=this.outlineWidth.build(e,"f"),a=this.resolution.build(e,"v2"),o=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(a,"uniform vec2"),e.addVertexParsVariable(o,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode("\n                vID = randomColor.r;\n                vec2 ".concat(i,"_offset = vec2(0.0);\n                if (").concat(o,") {\n                    vec4 ").concat(i,"_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ").concat(i,"_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    ").concat(i,"_offset = normalize(").concat(i,"_clipNormal.xy) / ").concat(a," * (").concat(r," / 2.0) * ").concat(i,"_clipPosition.w * 2.0 * ").concat(s,";\n                    ").concat(i,"_clipPosition.xy += ").concat(i,"_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ").concat(i,"_clipPosition;\n                }\n            "))}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");var l=e.include(n.Nodes.outline),u=[];return u.push(this.outlineColor.build(e,"c")),u.push(this.contourColor.build(e,"c")),u.push(this.outlineWidth.build(e,"f")),u.push(this.contourWidth.build(e,"f")),u.push(this.contourThreshold.build(e,"f")),u.push(this.outlineThreshold.build(e,"f")),u.push(this.contourFrequency.build(e,"f")),u.push(this.outlineSmoothing.build(e,"f")),u.push(this.contourDirection.build(e,"v3")),u.push(this.positionalLines.build(e,"b")),u.push(this.resolution.build(e,"v2")),u.push(this.normalMap.getTexture(e,"t")),u.push(this.depthMap.getTexture(e,"t")),u.push(this.pixelRatio.build(e,"f")),u.push(this.compensation.build(e,"b")),u.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),this.firstTime=!this.firstTime,e.format(l+"("+u.join(",")+")",this.getType(e),t)}return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}}]),n}(SN),Zz=Uz;Zz.Nodes=function(){var e=new DN("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    vec2 texelSize = (vec2(1.0) / resolution);\n    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);\n\tuvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);\n\tuvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);\n\tuvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);\n\tuvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);\n\tuvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);\n\tuvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);\n  \tvec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new DN("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                //resultAlpha = 1.0;\n                //result = vec3(sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha * mask;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\t \n                 return result;\n             }",[e])}}();var Vz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f,p,v,m,g,L,y,b){var x;return(0,c.Z)(this,n),(x=t.call(this,"v3")).nodeType="Pattern",x.style=e,x.projection=i,x.axis=r,x.blending=a,x.offset=o,x.colorA=s,x.colorB=l,x.frequency=u,x.size=d,x.variation=h,x.smoothness=f,x.zigzag=p,x.rotation=v,x.vertical=m,x.horizontal=g,x.sides=L,x.isMask=b,x.alpha=y,x.calpha="g".concat(x.uuid.toString().replace(/-/g,""),"_calpha"),x}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("fragment")){var i;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float"),this.style.value){case 0:default:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave"}var r="g".concat(this.uuid.toString().replace(/-/g,"")),a=new DN("float hashwithoutsine12(vec2 p)\n\t\t\t\t{\n\t\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * .1031);\n\t\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t\t}"),o=new DN("vec2 rotate_uv(in vec2 uv, float a, bool repeat) \n\t\t\t\t{\n\t\t\t\t\tconst float mid = 0.5;\n\t\t\t\t\tfloat radians = a * (PI / 180.0);\n\t\t\t\t\tvec2 rotated = vec2(\n\t\t\t\t\t\tcos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,\n\t\t\t\t\t\tcos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid\n\t\t\t\t\t);\n\t\t\t\t\treturn repeat ? fract(rotated): rotated;\n\t\t\t\t}"),s="";if(4===this.projection.value){var l=2===this.style.value?"".concat(i,"(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),u=2===this.style.value?"".concat(i,"(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),c=2===this.style.value?"".concat(i,"(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)");s="\n\t\t\t\tvec3 p = position;\n\t\t\t\tfloat factor = 0.0125;\n\t\t\t\tvec2 uv0 = fract(p.xy * factor);\n\t\t\t\tvec2 uv1 = fract(p.zy * factor);\n\t\t\t\tvec2 uv2 = fract(p.xz * factor);\n\t\t\t\t\n\t\t\t\tuv0 = rotate_uv(uv0 + offset, rotation, true);\n\t\t\t\tuv1 = rotate_uv(uv1 + offset, rotation, true);\n\t\t\t\tuv2 = rotate_uv(uv2 + offset, rotation, true);\n\t\n\t\t\t\tfloat d0 = ".concat(l,";\n\t\t\t\tfloat d1 = ").concat(u,";\n\t\t\t\tfloat d2 = ").concat(c,";\n\t\t\t\t\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\t\t\t\td0 *= weights.z;\n\t\t\t\td1 *= weights.x;\n\t\t\t\td2 *= weights.y;\n\t\t\t\tfloat draw = d0 + d1 + d2;\n\t\n\t\t\t\tvec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;\n\t\t\t\t")}else{var d=2===this.style.value?"".concat(i,"(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),h="";0===this.axis.value?h="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.z);\n\t\t\t\t\tfloat phi = acos(p.x / radius);":1===this.axis.value?h="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.x, p.z);\n\t\t\t\t\tfloat phi = acos(p.y / radius);":(this.axis.value,h="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.x);\n\t\t\t\t\tfloat phi = acos(p.z / radius);");var f="";switch(this.projection.value){case 0:f="custom_uv = vUv.st;";break;case 1:case 3:default:break;case 2:f="\n\t\t\t\t\t\t\tvec3 p = position;\n\t\t\t\t\t\t\t".concat(h,"\n\t\t\t\t\t\t\tcustom_uv = vec2(theta, phi);\n\t\t\t\t\t\t\tcustom_uv /= PI;\n\t\t\t\t\t\t\t")}s="\n\t\t\t\tvec2 custom_uv;\n\t\t\t\t".concat(f,"\n\t\n\t\t\t\tcustom_uv += offset;\n\t\t\t\tcustom_uv = fract(custom_uv);\n\t\t\t\tcustom_uv = rotate_uv(custom_uv, rotation, true);\n\t\n\t\t\t\tfloat draw = ").concat(d,";\n\t\t\t\t")}var p=new DN("vec3 ".concat(r,"_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\t\tconst float TWO_PI = PI * 2.0;\n\t\t\t\t\tfloat smoothness_remapped = pow(smoothness, 5.0);\t\n\n\t\t\t\t\t").concat(s,"\n\n\t\t\t\t\t// Construct final output color\n\t\t\t\t\tvec4 color = mix(colorA, colorB, draw);\n\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t// Apply cuts\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(vertical.x, custom_uv.y) * \n\t\t\t\t\t\tstep(custom_uv.y, vertical.y);\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(horizontal.x, abs(custom_uv.x)) * \n\t\t\t\t\t\tstep(abs(custom_uv.x), horizontal.y);\n\n\t\t\t\t\t// Accumulate alpha \n\t\t\t\t\tfloat lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t\t}"),[o,a,n.DrawFunctions.circle,n.DrawFunctions.ring,n.DrawFunctions.polygon,n.DrawFunctions.cross,n.DrawFunctions.diamond,n.DrawFunctions.checkerboard,n.DrawFunctions.line,n.DrawFunctions.wave]),v=e.include(p),m=[];return m.push("normal"),m.push(this.blending.build(e,"f")),m.push(this.style.build(e,"i")),m.push(this.offset.build(e,"v2")),m.push(this.colorA.build(e,"v4")),m.push(this.colorB.build(e,"v4")),m.push(this.frequency.build(e,"v2")),m.push(this.size.build(e,"f")),m.push(this.variation.build(e,"f")),m.push(this.smoothness.build(e,"f")),m.push(this.zigzag.build(e,"f")),m.push(this.rotation.build(e,"f")),m.push(this.vertical.build(e,"v2")),m.push(this.horizontal.build(e,"v2")),m.push(this.sides.build(e,"i")),m.push(this.isMask.build(e,"b")),m.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),m.push(this.alpha.build(e,"f")),m.push(this.calpha),e.format(v+"("+m.join(",")+")",this.getType(e),t)}return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}}]),n}(SN),Gz=Vz;Gz.DrawFunctions=function(){var e=new DN("float hashwithoutsine12(vec2 p) {\n\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * 0.1031);\n\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t}"),t=new DN("vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {\n                // Create tiles in UV-space\n                uv *= frequency;\n\n                // Integer coords\n                vec2 i = floor(uv);\n\n                // Offset every other row based on zigzag param, then compute fractional coords\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = fract(uv);\n\n\t\t\t\t// Rotate the tile itself:\n\t\t\t\t// const float mid = 0.5;\n\t\t\t\t// f = vec2(\n\t\t\t\t// \tcos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,\n\t\t\t\t// \tcos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid\n\t\t\t\t// );\n\t\t\t\t// f = fract(f);\n\n                f = f * 2.0 - 1.0;\n\n\t\t\t\t// Recompute integer coords after shifting - then, random value per tile \n\t\t\t\ti = floor(uv);\n\t\t\t\tfloat rand = (hashwithoutsine12(i) * 5.0 + 1.0);\n\t\t\t\tfloat jitter = mix(1.0, rand, variation);\n\t\t\t\tf *= jitter;\n\n                return f;\n            }",[e]);return{tileAndCenter:t,circle:new DN("float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(\n                    -smoothness, \n                     smoothness, \n                     length(f) - size\n                );\n            }",[t]),ring:new DN("float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\n\t\t\t\tfloat d = length(f);\n                const float inner_width = 0.5;\n\n                float outer = smoothstep(-smoothness, smoothness, d - size);\n                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);\n\t\t\t\treturn outer + (1.0 - inner);   \n            }",[t]),polygon:new DN("float sdf_ngon(in vec2 p, in float r, in int n) {\n                float an = (PI * 2.0) / float(n);\n                float he = r * tan(0.5 * an);\n                \n                // Rotate to first sector\n                p = -p.yx; \n                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);\n                vec2  cs = vec2(cos(bn), sin(bn));\n                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;\n            \n                // Side of polygon\n                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);\n            }\n            \n            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));\n            }",[t]),cross:new DN("float sdf_cross(in vec2 p, in vec2 b, float r ) {\n                p = abs(p); \n\t\t\t\tp = (p.y > p.x) ? p.yx : p.xy;\n                vec2  q = p - b;\n                float k = max(q.y, q.x);\n                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n                return sign(k) * length(max(w, 0.0)) + r;\n            }\n            \n            // Avoid namespace conflicts \n            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));\n            }",[t]),diamond:new DN("float ndot(vec2 a, vec2 b) { \n                return a.x*b.x - a.y*b.y; \n            }\n            \n            float sdf_diamond(in vec2 p, in vec2 b) {\n                p = abs(p);\n                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);\n                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));\n                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);\n            }\n\n            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\t            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));\n            }",[t]),checkerboard:new DN("float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                uv *= frequency;\n                vec2 i = floor(uv);\n\n                float offset = mod(i.y, 2.0);\n\n                uv.x += offset + zigzag * offset;\n                float x = floor(uv.x);\n                \n                return mod(x, 2.0);\n            }"),line:new DN("float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);\n\t\t\t\t\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat row = floor(uv * frequency).y;\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(row));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\ts - smoothness, \n\t\t\t\t\ts + smoothness, \n\t\t\t\t\tabs(f.y)\n\t\t\t\t);\n            }",[t]),wave:new DN("// Uses bisection \n            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {\n                // Convert all data to a primitive cosine wave\n                p = c * (p - vec2(d, a));\n                \n                const float TWO_PI = PI * 2.0;\n\n                // Reduce to principal half cycle\n                p.x = mod(p.x, TWO_PI); \n                if (p.x > PI) {\n                    p.x = TWO_PI - p.x;\n                }\n            \n                // Find zero of derivative (minimize distance)\n                float xa = 0.0;\n                float xb = TWO_PI;\n\n                // 24 bit precision\n                for (int i = 0; i < 24; i++) {\n                    float x = 0.5 * (xa + xb);\n                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));\n                    if (y < 0.0) xa = x; \n                    else xb = x;\n                }\n                float x = 0.5 * (xa + xb);\n                \n                // Compute distance    \n                vec2 q = vec2(x, b * c * cos(x));\n                return length(p - q) / c;\n            }\n\n            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                float repeat = frequency.x;\n                uv *= repeat;\n                vec2 i = floor(uv);\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = vec2(uv.x, fract(uv.y));\n\n                // Generalized cosine: y(x) = a + b * cos(cx + d)\n                const float amplitude = 0.125;\n                float wave_frequency = frequency.y * 0.1;\n                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);\n\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(i.y));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);\n            }")}}();var Hz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u){var d;return(0,c.Z)(this,n),(d=t.call(this,"v3")).nodeType="Rainbow",d.filmThickness=e,d.movement=i,d.wavelengths=r,d.noiseStrength=a,d.noiseScale=o,d.offset=s,d.isMask=u,d.alpha=l,d.calpha="g".concat(d.uuid.toString().replace(/-/g,""),"_calpha"),d}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");var i=e.include(n.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Wz=Hz;Wz.Nodes=function(){var e=new DN("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[Fz.simplex]);return{rainbow:new DN("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n\t\t\t\tfloat rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n\n\t\t\t\tfloat lalpha = alpha * rainbowContribution * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn res;\n             }",[e])}}();var qz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h){var f;return(0,c.Z)(this,n),(f=t.call(this,"v3")).nodeType="Toon",f.positioning=e,f.colors=i,f.steps=r,f.source=a,f.isWorldSpace=o,f.noiseStrength=s,f.noiseScale=l,f.shadowColor=u,f.offset=d,f.alpha=h,f.calpha="g".concat(f.uuid.toString().replace(/-/g,""),"_calpha"),f}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");var i=e.include(n.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Xz=qz;Xz.Nodes=function(){var e=new DN("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new DN("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),n=new DN("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),i=new DN("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),r=new DN('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[i]);return{toon:new DN('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotLightCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplex3d(st),\n\t\t\t\t\t// \tsimplex3d(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplex3d(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[Fz.simplex,e,n,r])}}();var Yz={textureBicubic:new DN("float w0( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n        }\n    \n        float w1( float a ) {\n            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n        }\n    \n        float w2( float a ){\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n        }\n    \n        float w3( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * a * a );\n        }\n    \n        // g0 and g1 are the two amplitude functions\n        float g0( float a ) {\n            return w0( a ) + w1( a );\n        }\n    \n        float g1( float a ) {\n            return w2( a ) + w3( a );\n        }\n    \n        // h0 and h1 are the two offset functions\n        float h0( float a ) {\n            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n        }\n    \n        float h1( float a ) {\n            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n        }\n    \n        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n            uv = uv * texelSize.zw + 0.5;\n    \n            vec2 iuv = floor( uv );\n            vec2 fuv = fract( uv );\n    \n            float g0x = g0( fuv.x );\n            float g1x = g1( fuv.x );\n            float h0x = h0( fuv.x );\n            float h1x = h1( fuv.x );\n            float h0y = h0( fuv.y );\n            float h1y = h1( fuv.y );\n    \n            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n    \n            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + \n                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n        }\n\n        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n            vec2 fLodSizeInv = 1.0 / fLodSize;\n            vec2 cLodSizeInv = 1.0 / cLodSize;\n            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n            return mix( fSample, cSample, fract( lod ) );\n        }")};var Qz=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u){var d;return(0,c.Z)(this,n),(d=t.call(this,"v3")).nodeType="Transmission",d.thickness=e,d.ior=i,d.roughness=r,d.transmissionSamplerSize=a,d.transmissionSamplerMap=o,d.transmissionDepthMap=s,d.aspectRatio=l,d.alpha=u,d.calpha="g".concat(d.uuid.toString().replace(/-/g,""),"_calpha"),d}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,tF.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");var i=e.include(n.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),Kz=Qz;Kz.Nodes=function(){var e=new DN("vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n\t\t\t\t// Special case for blur == 0.0\n\t\t\t\tif (lod == 0.0) {\n\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\treturn texture2DLodEXT( sp, U, 0.0).rgb;\n\t\t\t\t\t#else\n\t\t\t\t\treturn textureLod( sp, U, 0.0).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec2 texelSize = vec2(1.0) / resolution;\n                vec2 halton = haltonSequence[frameIndex];\n                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n                float temporalAngle  = temporalOffset * PI2;\n\t\t\t\tvec3 res = vec3(0.0);\n                vec2 uv = vec2(0.0);\n                vec2 offset = vec2(0.0);\n                vec2 vogelSample = vec2(0.0);\n                for (int i = 0; i < NUM_SAMPLES; i++) {\n                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;\n                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20\n                    uv = U + offset;\n                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    res += textureLod(sp, uv, lod).rgb;\n                }\n                return res / float(NUM_SAMPLES);\n            }"),t=new DN("vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        \n\t\t\t\t// Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t        // The thickness is specified in local space\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),n=new DN("float applyIorToRoughness( float roughness, float ior ) {\n\t\t\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t\t\t}"),i=new DN('vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\t\t\t// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see\n\t\t\t\t// also the code in convertTransmission.ts, which runs during export\n\t\t\t\t#ifdef IS_THREEJS_EXPORT\n\t\t\t\t\tfloat lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);\n\t\t\t\t\treturn textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;\n\t\t\t\t#else\n\t\t\t\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t\t\t\tfloat lod = applyIorToRoughness(roughness, ior);\n\t\t\t\t\treturn blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t\t\t\t#endif\n\t\t\t}',[Yz.textureBicubic,n,e]),r=new DN("vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\n\t\t\t\tvec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n\t\t\t\tvec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n\t\t\t\tunrefractedCoords += 1.0;\n\t\t\t\tunrefractedCoords /= 2.0;\n\n\t\t\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\t\t\treturn getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    \t\t}",[i,t]);return{transmission:new DN("vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                \n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn transmission;\n            }",[r])}}();var Jz=function(e){return e.NOISE="noise",e.MAP="map",e}(Jz||{}),$z=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u,d,h,f){var p;return(0,c.Z)(this,n),(p=t.call(this,"v3")).displacementTypeIndex=new hz(0),p.nodeType="VertexDisplacement",p.intensity=e,p.movementOrTexture=i,"map"===Object.values(Jz)[p.displacementTypeIndex.value]&&(p.mat=new Lz(p.movementOrTexture.value.matrix)),p.cropOrOffset=r,p.scale=h,p.noiseFunctionIndex=f,p.voronoiStyle=a,p.smoothness=o,p.seed=s,p.highCut=l,p.lowCut=u,p.quality=d,p}return(0,d.Z)(n,[{key:"generate",value:function(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");var i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(Jz)[this.displacementTypeIndex.value]){case"map":i=e.include(n.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break;case"noise":var a=Object.values(zz)[this.noiseFunctionIndex.value],o=new DN("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),s="voronoi"==a?"\n\t\t\t\t\tfloat v = ".concat(a,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);\n\t\t\t\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\t\t\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\t\t\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t\t\t\treturn p + n * v * intensity;\n\t\t\t\t\t"):"\n\t\t\t\t\treturn p + n * ".concat(a,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t"),l=new DN("vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {\n\t\t\t\t\t\t\t".concat(s,"\n\t\t\t\t\t\t}"),[Fz.simplex,Fz.simplexFractal,Fz.simplexAshima,Fz.fbm,Fz.perlin,Fz.voronoi]),u=new DN("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[l,o]);i=e.include(u),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"))}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}}]),n}(SN),eF=$z;eF.Nodes=function(){var e=new DN("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new DN("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new DN("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();for(var tF={normalRenderTarget:new VN,normalRenderTargetDepth:new VN,transmissionRenderTarget:new VN,aspectRatio:new AN,transmissionSize:new AN(2048,2048),transmissionRenderTargetDepth:new VN,aoRenderTarget:new VN,aoEnabled:new fz,pixelRatioNode:new GN(1),resolution:new AN,penumbraSize:new pz(5,.5),frameIndex:new hz(0),transmissionLod:new hz(2)},nF=0,iF=Object.values(tF);nF<iF.length;nF++){iF[nF].isRenderGlobal=!0}var rF,aF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"basic")).nodeType="Basic",e.color=new dz(ET),e.shadingAlpha=new GN(1),e.shadingBlend=new hz(0),e.previousModelViewMatrix=new yz,e.previouseProjectionMatrix=new yz,e}return(0,d.Z)(n,[{key:"category",get:function(){return"phong"}},{key:"generate",value:function(e){var t;if(e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({resolution:tF.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Tv.merge([Yv.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{void 0===this.color&&(this.color=new dz(ET)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});var r=this.color.flow(e,"c",{slot:"color"}),a=this.alpha?this.alpha.flow(e,"f"):void 0,o=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==a,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));var l=["#include <normal_fragment_begin>",r.code];a&&l.push(a.code,"#ifdef ALPHATEST"," if ( "+a.result+" <= ALPHATEST ) discard;","#endif"),s?l.push(s.code,"vec3 outgoingLight = ".concat(r.result,";"),"vec3 finalColor = spe_blend(outgoingLight, ".concat(s.result,", 1.0, SPE_BLENDING_NORMAL);")):l.push("vec3 finalColor = ".concat(r.result,";"));var u="1.0";this.mask&&(this.mask.analyze(e),u="luminance(".concat(this.mask.flow(e,"v3").result,")")),a?l.push("gl_FragColor = vec4( finalColor, accumAlpha * ".concat(a.result," * ").concat(u," );")):l.push("gl_FragColor = vec4("+r.result+", 1.0 );"),o&&l.push("gl_FragColor.a *= ".concat(o.result,";")),l.push("#include <fog_fragment>","#include <dithering_fragment>"),t=l.join("\n")}return t}}]),n}(xN),oF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"lambert")).nodeType="Lambert",e.color=new dz(ET),e.emissive=new dz(0),e.emissiveIntensity=new GN(1),e.previousModelViewMatrix=new yz,e.previouseProjectionMatrix=new yz,e.shadingAlpha=new GN(1),e.shadingBlend=new hz(0),e.occlusion=new fz(!0),e}return(0,d.Z)(n,[{key:"category",get:function(){return"lambert"}},{key:"build",value:function(e){var t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({resolution:tF.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Tv.merge([Yv.fog,Yv.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t"),i.push("\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:tF.penumbraSize}),e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({aoMap:tF.aoRenderTarget}),e.mergeUniform({aoEnabled:tF.aoEnabled}),void 0===this.color&&(this.color=new dz(ET)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);var r=this.color.flow(e,"c",{slot:"color"}),a=this.emissive.flow(e,"c",{slot:"emissive"}),o=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.occlusion.flow(e,"b",{slot:"occlusion"}),l=this.shadingAlpha.flow(e,"f"),u=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==d,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));var f=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];f.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),d&&f.push(d.code,"#ifdef ALPHATEST","if ( "+d.result+" <= ALPHATEST ) discard;","#endif"),f.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),a&&f.push(a.code,"reflectedLight.directDiffuse += "+a.result+" * "+o.result+";"),f.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");var p="1.0";this.mask&&(this.mask.analyze(e),p="luminance(".concat(this.mask.flow(e,"v3").result,")")),f.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(l.result," * ").concat(p," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(l.result," * ").concat(p,", ").concat(u.result," );\n\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),c&&f.push(c.code,"outgoingLight = spe_blend(outgoingLight, ".concat(c.result,", 1.0, SPE_BLENDING_NORMAL);")),d?f.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(d.result," );")):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&f.push("gl_FragColor.a *= ".concat(h.result,";")),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join("\n")}return t}}]),n}(xN),sF={dHdxy:new DN("vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {\n\n            // Gradient of UVs w.r.t. X coordinate (in screen-space)\n            vec2 dSTdx = dFdx(bumpMapUv);\n\n            // Gradient of UVs w.r.t. Y coordinate (in screen-space)\n            vec2 dSTdy = dFdy(bumpMapUv);\n            \n            // Forward differencing\n            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);\n            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;\n            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;\n            \n            return vec2( dBx, dBy );\n        }"),perturbNormalArb:new DN("vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n            vec3 vSigmaX = dFdx( surf_pos.xyz );\n            vec3 vSigmaY = dFdy( surf_pos.xyz );\n            vec3 vN = surf_norm; // normalized\n            \n            vN = normalize(vN);\n\n            vec3 R1 = cross( vSigmaY, vN );\n            vec3 R2 = cross( vN, vSigmaX );\n\n            R1 = normalize(R1);\n            R2 = normalize(R2);\n    \n            float fDet = dot( vSigmaX, R1 ) * faceDirection;\n    \n            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n            return normalize( abs( fDet ) * vN - vGrad );\n        }")},lF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"phong")).nodeType="Phong",e.color=new dz(ET),e.specular=new dz(1118481),e.shininess=new GN(30),e.previousModelViewMatrix=new yz,e.previouseProjectionMatrix=new yz,e.shadingAlpha=new GN(1),e.shadingBlend=new hz(0),e.occlusion=new fz(!0),e}return(0,d.Z)(n,[{key:"category",get:function(){return"phong"}},{key:"build",value:function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({resolution:tF.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Tv.merge([Yv.fog,Yv.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:tF.penumbraSize}),e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({aoMap:tF.aoRenderTarget}),e.mergeUniform({aoEnabled:tF.aoEnabled}),void 0===this.color&&(this.color=new dz(ET)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);var r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);var a=this.color.flow(e,"c",{slot:"color"}),o=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),l=this.shadingAlpha.flow(e,"f"),u=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==d,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));var f=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];if(this.bumpMap){e.include(sF.dHdxy),e.include(sF.perturbNormalArb);var p=this.bumpMap.texture.flow(e,"t"),v=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";g=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(p.result,", uv0, ").concat(m,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(p.result,", uv1, ").concat(m,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(p.result,", uv2, ").concat(m,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(p.result,", bumpMapCachedUv, ").concat(m,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),f.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(v.result,";\n\t\t\t\t\t").concat(g,"\n\t\t\t\t\t"))}f.push(a.code,"\tvec3 diffuseColor = "+a.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",o.code,"\tvec3 specular = "+o.result+";",s.code,"\tfloat shininess = max( 0.0001, "+s.result+" );","\tfloat specularStrength = 1.0;"),d&&f.push(d.code,"#ifdef ALPHATEST","if ( "+d.result+" <= ALPHATEST ) discard;","#endif"),f.push("material.diffuseColor = diffuseColor;"),f.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");var L="1.0";this.mask&&(this.mask.analyze(e),L="luminance(".concat(this.mask.flow(e,"v3").result,")")),f.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(l.result," * ").concat(L," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(l.result," * ").concat(L,", ").concat(u.result," );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),c&&f.push(c.code,"outgoingLight = spe_blend(outgoingLight, ".concat(c.result,", 1.0, SPE_BLENDING_NORMAL);")),d?f.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(d.result,");")):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&f.push("gl_FragColor.a *= ".concat(h.result,";")),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join("\n")}return t}}]),n}(xN),uF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"standard")).nodeType="Standard",e.color=new dz(ET),e.roughness=new GN(.3),e.metalness=new GN(0),e.reflectivity=new GN(.5),e.previousModelViewMatrix=new yz,e.previouseProjectionMatrix=new yz,e.shadingAlpha=new GN(1),e.shadingBlend=new hz(0),e.occlusion=new fz(!0),e}return(0,d.Z)(n,[{key:"category",get:function(){return"physical"}},{key:"build",value:function(e){var t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({resolution:tF.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Tv.merge([Yv.fog,Yv.lights])),Yv.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:tF.penumbraSize}),e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({aoMap:tF.aoRenderTarget}),e.mergeUniform({aoEnabled:tF.aoEnabled});var r={gamma:!0};void 0===this.color&&(this.color=new dz(ET)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);var a=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);var o=this.color.flow(e,"c",{slot:"color",context:r}),s=this.roughness.flow(e,"f"),l=this.metalness.flow(e,"f"),u=this.shadingAlpha.flow(e,"f"),c=this.shadingBlend.flow(e,"i"),d=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,f=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,p=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==h,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));var v=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(sF.dHdxy),e.include(sF.perturbNormalArb);var m=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),L=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";y=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(m.result,", uv0, ").concat(L,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(m.result,", uv1, ").concat(L,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(m.result,", uv2, ").concat(L,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(m.result,", bumpMapCachedUv, ").concat(L,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),v.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(g.result,";\n\t\t\t\t\t").concat(y,"\n\t\t\t\t\t"))}if(v.push(o.code,"\tvec3 diffuseColor = "+o.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",l.code,"\tfloat metalnessFactor = "+l.result+";"),this.roughnessMap){var b=this.roughnessMap.texture.flow(e,"t"),x=this.roughnessMap.flow(e,"v3"),w="";w=4===this.roughnessMap.projection.value?"\n\t\t\t\t\tfloat roughnessChange = 1.0;\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tfloat r0 = luminance(texture(").concat(b.result,", uv0).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r1 = luminance(texture(").concat(b.result,", uv1).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r2 = luminance(texture(").concat(b.result,", uv2).rgb) * roughnessScale;\n\n\t\t\t\t\t\troughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);\n\t\t\t\t\t}\n\t\t\t\t\tfloat roughnessFactor = roughnessChange * ").concat(s.result,";\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 roughnessMapCachedUv = g".concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\n\t\t\t\t\tvec4 vals = texture(").concat(b.result,",  roughnessMapCachedUv);\n\t\t\t\t\tfloat roughnessFactor = luminance(vals.rgb) * ").concat(s.result,";\n\t\t\t\t\t"),v.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(x.result,";\n\n\t\t\t\t\tconst float roughnessScale = 1.0;\n\n\t\t\t\t\t").concat(w,"\n\t\t\t\t"))}else v.push(s.code,"\tfloat roughnessFactor = "+s.result+";");h&&v.push(h.code,"#ifdef ALPHATEST","\tif ( "+h.result+" <= ALPHATEST ) discard;","#endif"),v.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),v.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),p?v.push(p.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+p.result+" ) ), diffuseColor, metalnessFactor );"):v.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),v.push("#include <lights_fragment_begin>"),v.push("#include <lights_fragment_end>"),v.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");var _="1.0";this.mask&&(this.mask.analyze(e),_="luminance(".concat(this.mask.flow(e,"v3").result,")")),v.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(u.result," * ").concat(_," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(u.result," * ").concat(_,", ").concat(c.result," );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),d&&v.push(d.code,"outgoingLight = spe_blend(outgoingLight, ".concat(d.result,", 1.0, SPE_BLENDING_NORMAL);")),h?v.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(h.result," );")):v.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),f&&v.push("gl_FragColor.a *= ".concat(f.result,";")),v.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=v.join("\n")}return t}}]),n}(xN),cF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"toon")).nodeType="Toon",e.color=new dz(ET),e.specular=new dz(1118481),e.shininess=new GN(30),e.previousModelViewMatrix=new yz,e.previouseProjectionMatrix=new yz,e.shadingAlpha=new GN(1),e.shadingBlend=new hz(0),e}return(0,d.Z)(n,[{key:"category",get:function(){return"toon"}},{key:"build",value:function(e){var t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({resolution:tF.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Tv.merge([Yv.fog,Yv.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:tF.penumbraSize}),e.mergeUniform({frameIndex:tF.frameIndex}),e.mergeUniform({aoMap:tF.aoRenderTarget}),e.mergeUniform({aoEnabled:tF.aoEnabled}),void 0===this.color&&(this.color=new dz(ET)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);var r=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));var h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];if(this.bumpMap){e.include(sF.dHdxy),e.include(sF.perturbNormalArb);var f=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";m=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(f.result,", uv0, ").concat(v,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(f.result,", uv1, ").concat(v,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(f.result,", uv2, ").concat(v,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(f.result,", bumpMapCachedUv, ").concat(v,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),h.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(p.result,";\n\t\t\t\t\t").concat(m,"\n\t\t\t\t\t"))}h.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"\tvec3 specular = "+a.result+";",o.code,"\tfloat shininess = max( 0.0001, "+o.result+" );","\tfloat specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");var g="1.0";this.mask&&(this.mask.analyze(e),g="luminance(".concat(this.mask.flow(e,"v3").result,")")),h.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(s.result," * ").concat(g," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(s.result," * ").concat(g,", ").concat(l.result," );\n\t\t\t\t}\n\t\t\t\t")),u&&h.push(u.code,"outgoingLight = spe_blend(outgoingLight, ".concat(u.result,", 1.0, SPE_BLENDING_NORMAL);")),c?h.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(c.result," );")):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&h.push("gl_FragColor.a *= ".concat(d.result,";")),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}}]),n}(xN),dF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;(0,c.Z)(this,e),this.timeout=t,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}return(0,d.Z)(e,[{key:"log",value:function(){}},{key:"remove",value:function(e){var t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}},{key:"scheduleCleanup",value:function(){var e=this;this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout((function(){e.hasClean=!1,e.log("cleaning");for(var t=Date.now(),n=e.head.next;n.time<t-e.timeout;)e.dispose(n.src,n.data),e.cache.delete(n.src),(n=n.next).prev=e.head,e.head.next=n;e.head.next!==e.tail?e.scheduleCleanup():e.log("no more cleanup")}),this.timeout+1e3))}},{key:"has",value:function(e){var t;return null===(t=this.cache.get(e))||void 0===t?void 0:t.data}},{key:"load",value:function(e){var t=Date.now(),n=this.cache.get(e);return void 0===n?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}}]),e}(),hF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"create",value:function(e){return URL.createObjectURL(new Blob([e]))}},{key:"dispose",value:function(e,t){URL.revokeObjectURL(t)}}]),n}(dF);function fF(e){return"string"==typeof e?e:(rF||(rF=new hF),rF.load(e))}var pF=function(){function e(t,n){(0,c.Z)(this,e),this.data=t,this.cache=n,this.refCount=0}return(0,d.Z)(e,[{key:"deref",value:function(){this.refCount,this.refCount-=1,0===this.refCount&&(this.cache.remove(this),this.dispose())}},{key:"dispose",value:function(){this.refCount,0}}]),e}(),vF=function(){function e(){(0,c.Z)(this,e),this.cache=new Map}return(0,d.Z)(e,[{key:"remove",value:function(e){this.cache.delete(e.data),0}},{key:"load",value:function(e){var t=this.cache.get(e);return void 0===t&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}}]),e}(),mF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,e,i.imageHolderCache)).data=e,r.shared=i,r.loaded=!1,r.isVideo=!1,r.isVideo="video"===e.type,r.updateSrc(e.data),r}return(0,d.Z)(n,[{key:"updateSrc",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t){var n,i,r,a=this;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(typeof document>"u")){e.next=2;break}return e.abrupt("return");case 2:if(this.disposeTextures(),this.loaded=!1,n=function(){a.loaded=!0;for(var e=0,t=[1e3,1001,1002];e<t.length;e++){var n=a[t[e]];n&&(n.image=a.img,n.needsUpdate=!0)}a.shared.requestRender()},!this.isVideo){e.next=17;break}if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,"string"==typeof t){e.next=13;break}return(i=new FileReader).readAsDataURL(new Blob([t],{type:"video/mp4"})),e.next=10,new Promise((function(e){i.onloadend=function(t){var n;r=null===(n=t.target)||void 0===n?void 0:n.result,e(null)}}));case 10:this.img.src=r,e.next=14;break;case 13:this.img.src=t;case 14:this.img.onloadeddata=function(){n()},e.next=18;break;case 17:this.img=new Image,this.img.src=fF(t),this.img.onload=n;case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTexture",value:function(e){var t,n=this[e];return n||(t=this.isVideo?new qL(this.img,void 0,e,e):new Cf(this.img,void 0,e,e),this.loaded&&(t.needsUpdate=!0),this[e]=t,t)}},{key:"disposeTextures",value:function(){var e,t,n;null!==(e=this[1e3])&&void 0!==e&&e.dispose(),this[1e3]=void 0,null!==(t=this[1001])&&void 0!==t&&t.dispose(),this[1001]=void 0,null!==(n=this[1002])&&void 0!==n&&n.dispose(),this[1002]=void 0}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this),this.disposeTextures()}}]),n}(pF),gF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(mF);function LF(e,t){return t.color(e)}function yF(e,t){switch(e.type){case"fresnel":return function(e,t){var n=e.bias,i=e.scale,r=e.intensity,a=e.factor,o=e.color;e.isMask;return $e($e({},bF(e)),{},{color:LF(o,t),bias:n,scale:i,intensity:r,factor:a})}(e,t);case"gradient":return function(e){var t=e.gradientType,n=e.smooth,i=e.colors,r=e.steps,a=e.angle,o=e.offset,s=e.morph;return $e($e({},bF(e)),{},{gradientType:t,smooth:n,colors:i.map((function(e){return new Ef(e[0],e[1],e[2],e[3])})),num:i.length,steps:r,offset:g(af,u(o)),morph:g(af,u(s)),angle:a})}(e);case"depth":return function(e){var t=e.gradientType,n=e.near,i=e.far,r=e.isVector,a=e.isWorldSpace,o=e.origin,s=e.direction,l=e.colors,c=e.steps,d=e.smooth;return $e($e({},bF(e)),{},{gradientType:t,near:n,far:i,isVector:r,isWorldSpace:a,origin:g(Rf,u(o)),direction:s?g(Rf,u(s)):new Rf(1,0,0),colors:l.map((function(e){return void 0!==e?new Ef(e[0],e[1],e[2],e[3]):new Ef(0,0,0,0)})),steps:c.slice(0,l.length),smooth:d})}(e);case"normal":return function(e){var t=e.cnormal;return $e($e({},bF(e)),{},{cnormal:new Rf(t[0],t[1],t[2])})}(e);case"noise":return function(e,t){return $e($e({},bF(e)),{},{scale:e.scale,move:e.move,fA:g(af,u(e.fA)),fB:g(af,u(e.fB)),size:g(Rf,u(e.size)),distortion:g(af,u(e.distortion)),colorA:LF(e.colorA,t),colorB:LF(e.colorB,t),colorC:LF(e.colorC,t),colorD:LF(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality})}(e,t);case"rainbow":return function(e){return $e($e({},bF(e)),{},{filmThickness:e.filmThickness,movement:e.movement,wavelengths:g(Rf,u(e.wavelengths)),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:g(Rf,u(e.offset))})}(e);case"toon":return function(e,t){return $e($e({},bF(e)),{},{positioning:e.positioning,colors:e.colors.map((function(e){return new Ef(e[0],e[1],e[2],e[3])})),num:e.colors.length,steps:e.steps,source:g(Rf,u(e.source)),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:LF(e.shadowColor,t),offset:g(Rf,u(e.offset))})}(e,t);case"outline":return function(e,t){return $e($e({},bF(e)),{},{outlineColor:LF(e.outlineColor,t),contourColor:LF(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:g(Rf,u(e.contourDirection)),positionalLines:e.positionalLines,compensation:e.compensation})}(e,t);case"transmission":return function(e,t){return $e($e({},bF(e)),{},{thickness:e.thickness,ior:e.ior,roughness:e.roughness})}(e);case"color":return function(e,t){return $e($e({},bF(e)),{},{color:LF(e.color,t)})}(e,t);case"pattern":return function(e,t){return $e($e({},bF(e)),{},{style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:g(af,u(e.offset)),colorA:LF(e.colorA,t),colorB:LF(e.colorB,t),frequency:g(af,u(e.frequency)),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:g(af,u(e.vertical)),horizontal:g(af,u(e.horizontal)),sides:e.sides})}(e,t)}}function bF(e){var t=e.alpha,n=e.mode,i=e.isMask;return $e($e({},function(e){return{type:e.type}}(e)),{},{alpha:t,mode:n,isMask:i})}var xF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(CN),wF={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},_F={depth:["colors"]};function SF(e,t,n){if("isMask"===t)return!0;var i=wF[e.type],r=_F[e.type];if(void 0!==r){var a=e.color;if(r.includes(t)){var o,s=null===(o=a[t])||void 0===o||null===(o=o.value)||void 0===o?void 0:o.length;if(void 0!==s&&s!==n.length)return!0}}return void 0!==i&&i.includes(t)}function kF(e,t,n){var i=n.uniforms["f".concat(n.id,"_texture")];if(!i)return!1;var r=e;if("image"in r){var a=r.image,o=t.image(a),s=i;s.image instanceof gF||s.image.deref(),s.image=o}if("video"in r){var l=r.video,u=t.video(l),c=i;c.image instanceof gF||c.image.deref(),c.image=u}"wrapping"in r&&(i.wrap=r.wrapping);if("repeat"in r||"offset"in r){var d=n.uniforms["f".concat(n.id,"_").concat("mat")];"repeat"in r&&(d.repeat=r.repeat),"offset"in r&&(d.offset=r.offset),d.updateMatrix()}return!1}var AF=function(){function e(t,n,i,r){for(var a in(0,c.Z)(this,e),this.id=t,this.uuid=n,this.data=i,this.uniforms={},r)this.uniforms["f".concat(this.id,"_").concat(a)]=r[a];for(var o in i)DF(o,this,i)}return(0,d.Z)(e,[{key:"type",get:function(){return this.data.type}},{key:"updateByOp",value:function(e,t,n){var i=e;if(void 0===i.path[0]){if(0===i.type)return"type"in i.props||"category"in i.props||"visible"in i.props?(n.scene.markNeedsUpdateRendererDirty(),!0):function(e,t,n,i){for(var r=!1,a=0,s=Object.entries(e);a<s.length;a++){var l=o(s[a],2),c=l[0],d=l[1];if("bumpMap"!==c&&"roughnessMap"!==c){if(c&&void 0!==d)if(DF(c,n,i))"visible"===c&&"light"===n.type&&(r=!0);else{n.visible=i.visible;var h=n.uniforms["f".concat(n.id,"_").concat(c)];if(h&&!(h instanceof vz))switch(r=r||SF(n,c,d),h.constructor){case dz:if("string"==typeof d){var f=t.getColor(d);f&&(h.value=f);break}var p=d;h.value instanceof xF?h.value=new CN(p.r,p.g,p.b,p.a):h.setRGBA(p);break;case EN:if("string"==typeof d){var v=t.getColor(d);v&&(h.value=v);break}var m=d;h.value instanceof xF?h.value=new CN(m.r,m.g,m.b,m.a):h.value.setRGBA(m.r,m.g,m.b,m.a);break;case AN:var L=d;h.value.setX(L[0]),h.value.setY(L[1]);break;case MN:var y=d;h.value.setX(y[0]),h.value.setY(y[1]),h.value.setZ(y[2]);break;case VN:kF(d,t,n);break;case wz:h.value=d.map((function(e){return g(Ef,u(e))}));break;default:h.value=d}}}else r=!0}return r}(i.props,n.shared,this,t)}else if("texture"===i.path[0])return!("texture"in t)&&!("video"in t)||kF(i.props,n.shared,this);return!1}},{key:"dispose",value:function(){if(TF(this)){var e=this.uniforms["f".concat(this.id,"_texture")];if(!e)return!1;var t=e;t.image instanceof gF||t.image.deref()}}},{key:"hasValueByKey",value:function(e){return void 0!==this.uniforms[e]}},{key:"hasValue",value:function(e){return this.hasValueByKey("f".concat(this.id,"_").concat(e))}},{key:"setValue",value:function(e,t){var n="f".concat(this.id,"_").concat(e);this.hasValueByKey(n)&&void 0!==t&&(this.uniforms[n].value=t)}},{key:"getNode",value:function(e){var t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t]}},{key:"getValue",value:function(e){var t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t].value}},{key:"getName",value:function(e){var t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log("Layer.getName: error ".concat(e))}},{key:"getNames",value:function(){var e=[];for(var t in this.uniforms){var n=this.getName(t);n&&e.push(n)}return e}}],[{key:"create",value:function(e,t,n,i){if("light"===n.type)return EF.createLigherLayer(e,t,n,i);if("texture"===n.type||"video"===n.type){var r,a,o,s,l,c,d,h="texture"===n.type?i.image(n.texture.image):i.video(n.texture.video),f=new gz(h,n.texture.wrapping),p=new mz(h),v=new xz(n.texture.repeat,n.texture.offset),m=new GN(n.crop?1:0),L=new hz(null!==(r=n.projection)&&void 0!==r?r:0),y=new hz(null!==(a=["x","y","z"].indexOf(n.axis))&&void 0!==a?a:0),b=new hz(null!==(o=n.side)&&void 0!==o?o:0),x=new AN(n.size?new af(n.size[0],n.size[1]):new af(100,100)),w=new GN(null!==(s=n.blending)&&void 0!==s?s:0),_=new GN(null!==(l=n.alpha)&&void 0!==l?l:1),S=new hz(null!==(c=n.mode)&&void 0!==c?c:0),k=new fz(null!==(d=n.isMask)&&void 0!==d&&d),A=new Ez(f,p,m,L,y,b,x,w,v,_,S,k),M=new ZN(A.calpha,"f");return new MF(e,t,n,{texture:f,textureSize:p,crop:m,projection:L,axis:y,side:b,size:x,blending:w,mat:v,alpha:_,mode:S,isMask:k},A,S,M,k)}if("matcap"===n.type){var C,E,T,P=i.image(n.texture.image),D=new gz(P,n.texture.wrapping),O=new GN(null!==(C=n.alpha)&&void 0!==C?C:1),I=new hz(null!==(E=n.mode)&&void 0!==E?E:0),R=new fz(null!==(T=n.isMask)&&void 0!==T&&T),B=new Bz(D,O,I,R),N=new ZN(B.calpha,"f");return new MF(e,t,n,{texture:D,alpha:O,mode:I,isMask:R},B,I,N,R)}if("displace"===n.type){if("noise"===n.displacementType){var z,F,j,U,Z,V,G,H,W,q,X=new MN(g(Rf,u(n.offset))),Y=new GN(null!==(z=n.scale)&&void 0!==z?z:10),Q=new GN(null!==(F=n.intensity)&&void 0!==F?F:8),K=new GN(null!==(j=n.movement)&&void 0!==j?j:1),J=new hz(null!==(U=n.noiseType)&&void 0!==U?U:0),$=new hz(null!==(Z=n.voronoiStyle)&&void 0!==Z?Z:0),ee=new GN(null!==(V=n.smoothness)&&void 0!==V?V:.5),te=new GN(null!==(G=n.seed)&&void 0!==G?G:0),ne=new GN(null!==(H=n.highCut)&&void 0!==H?H:1),ie=new GN(null!==(W=n.lowCut)&&void 0!==W?W:0),re=new hz(null!==(q=n.quality)&&void 0!==q?q:1),ae=new eF(Q,K,X,$,ee,te,ne,ie,re,Y,J);return new CF(e,t,n,{offset:X,scale:Y,intensity:Q,movement:K,noiseType:J,voronoiStyle:$,smoothness:ee,seed:te,highCut:ne,lowCut:ie,quality:re},ae)}throw new Error}return function(e,t,n,i){var r=yF(n,i);return function(e,t,n,i){switch(e.type){case"color":var r,a=new dz(null!==(r=i.color)&&void 0!==r?r:ET),o=PF(i),s=new kz(a,o.alpha),l=new ZN(s.calpha,"f");return new MF(t,n,e,$e({color:a},o),s,o.mode,l,o.isMask);case"fresnel":var u,c,d,h,f,p=new dz(null!==(u=i.color)&&void 0!==u?u:16777215),v=new GN(null!==(c=i.bias)&&void 0!==c?c:.1),m=new GN(null!==(d=i.scale)&&void 0!==d?d:1),g=new GN(null!==(h=i.intensity)&&void 0!==h?h:2),L=new GN(null!==(f=i.factor)&&void 0!==f?f:1),y=PF(i),b=new Dz(p,v,m,g,L,y.alpha,y.mode,y.isMask),x=new ZN(b.calpha,"f");return new MF(t,n,e,$e({color:p,bias:v,scale:m,intensity:g,factor:L},y),b,y.mode,x,y.isMask);case"rainbow":var w,_,S,k,A,M,C=new GN(null!==(w=i.filmThickness)&&void 0!==w?w:30),E=new GN(null!==(_=i.movement)&&void 0!==_?_:0),T=new MN(null!==(S=i.wavelengths)&&void 0!==S?S:new Rf(0,0,0)),P=new GN(null!==(k=i.noiseStrength)&&void 0!==k?k:0),D=new GN(null!==(A=i.noiseScale)&&void 0!==A?A:1),O=new MN(null!==(M=i.offset)&&void 0!==M?M:new Rf(0,0,0)),I=PF(i),R=new Wz(C,E,T,P,D,O,I.alpha,I.isMask),B=new ZN(R.calpha,"f");return new MF(t,n,e,$e({filmThickness:C,movement:E,wavelengths:T,noiseStrength:P,noiseScale:D,offset:O},I),R,I.mode,B,I.isMask);case"transmission":var N,z,F,j=new GN(null!==(N=i.thickness)&&void 0!==N?N:10),U=new GN(null!==(z=i.ior)&&void 0!==z?z:1.5),Z=new GN(null!==(F=i.roughness)&&void 0!==F?F:.5),V=tF.transmissionSize,G=tF.transmissionRenderTarget,H=tF.transmissionRenderTargetDepth,W=window.innerWidth,q=window.innerHeight,X=W>=q?new AN(q/W,1):new AN(1,W/q),Y=PF(i),Q=new Kz(j,U,Z,V,G,H,X,Y.alpha),K=new ZN(Q.calpha,"f");return new MF(t,n,e,$e({thickness:j,ior:U,roughness:Z,aspectRatio:X},Y),Q,Y.mode,K,Y.isMask);case"toon":var J,$,ee,te,ne,ie,re,ae,oe=new hz(null!==(J=i.positioning)&&void 0!==J?J:0);i.colors?re=new wz(i.colors.length,i.colors):(re=new wz(10,new Ef(0,0,0,1))).value[1]=new Ef(1,1,1,1),i.steps?ae=new pz(i.steps.length,i.steps):(ae=new pz(10,1)).value[0]=0;var se=new MN(null!==($=i.source)&&void 0!==$?$:new Rf(0,0,0)),le=new fz(null===(ee=i.isWorldSpace)||void 0===ee||ee),ue=new GN(null!==(te=i.noiseStrength)&&void 0!==te?te:0),ce=new GN(null!==(ne=i.noiseScale)&&void 0!==ne?ne:1),de=new EN(i.shadowColor),he=new MN(null!==(ie=i.offset)&&void 0!==ie?ie:new Rf(0,0,0)),fe=PF(i),pe=new Xz(oe,re,ae,se,le,ue,ce,de,he,fe.alpha),ve=new ZN(pe.calpha,"f");return new MF(t,n,e,$e({positioning:oe,colors:re,steps:ae,source:se,isWorldSpace:le,noiseStrength:ue,noiseScale:ce,shadowColor:de,offset:he},fe),pe,fe.mode,ve,fe.isMask);case"outline":var me,ge,Le,ye,be,xe,we,_e,Se,ke,Ae,Me=new dz(null!==(me=i.outlineColor)&&void 0!==me?me:16777215),Ce=new dz(null!==(ge=i.contourColor)&&void 0!==ge?ge:16777215),Ee=new GN(null!==(Le=i.outlineWidth)&&void 0!==Le?Le:.1),Te=new GN(null!==(ye=i.contourWidth)&&void 0!==ye?ye:.1),Pe=new GN(null!==(be=i.outlineThreshold)&&void 0!==be?be:.1),De=new GN(null!==(xe=i.contourThreshold)&&void 0!==xe?xe:.1),Oe=new GN(null!==(we=i.outlineSmoothing)&&void 0!==we?we:.1),Ie=new GN(null!==(_e=i.contourFrequency)&&void 0!==_e?_e:.1),Re=new MN(null!==(Se=i.contourDirection)&&void 0!==Se?Se:new Rf(0,1,0)),Be=new fz(null!==(ke=i.positionalLines)&&void 0!==ke&&ke),Ne=new fz(null===(Ae=i.compensation)||void 0===Ae||Ae),ze=tF.normalRenderTarget,Fe=tF.normalRenderTargetDepth,je=tF.pixelRatioNode,Ue=tF.resolution,Ze=PF(i),Ve=new Zz(Me,Ce,Ee,Te,Pe,De,Oe,Ie,Re,Be,Ne,Ue,ze,Fe,je,Ze.alpha),Ge=new ZN(Ve.calpha,"f");return new MF(t,n,e,$e({outlineColor:Me,contourColor:Ce,outlineWidth:Ee,contourWidth:Te,outlineThreshold:Pe,contourThreshold:De,outlineSmoothing:Oe,contourFrequency:Ie,contourDirection:Re,positionalLines:Be,compensation:Ne},Ze),Ve,Ze.mode,Ge,Ze.isMask);case"depth":var He,We,qe,Xe,Ye,Qe,Ke,Je,et,tt,nt=new hz(null!==(He=i.gradientType)&&void 0!==He?He:0),it=new fz(null!==(We=i.smooth)&&void 0!==We&&We),rt=new GN(null!==(qe=i.near)&&void 0!==qe?qe:50),at=new GN(null!==(Xe=i.far)&&void 0!==Xe?Xe:200),ot=new GN(null!==(Ye=i.isVector)&&void 0!==Ye?Ye:1),st=new GN(null!==(Qe=i.isWorldSpace)&&void 0!==Qe?Qe:0),lt=new MN(null!==(Ke=i.origin)&&void 0!==Ke?Ke:new Rf),ut=new MN(null!==(Je=i.direction)&&void 0!==Je?Je:new Rf);i.colors?et=new wz(i.colors.length,i.colors):(et=new wz(2,new Ef(0,0,0,1))).value[1]=new Ef(1,1,1,1),i.steps?tt=new pz(i.steps.length,i.steps):(tt=new pz(2,1)).value[0]=0;var ct=PF(i),dt=new Pz(nt,it,rt,at,ot,st,lt,ut,et,tt,ct.alpha,ct.isMask),ht=new ZN(dt.calpha,"f");return new MF(t,n,e,$e({gradientType:nt,smooth:it,near:rt,far:at,isVector:ot,isWorldSpace:st,origin:lt,direction:ut,colors:et,steps:tt},ct),dt,ct.mode,ht,ct.isMask);case"noise":var ft,pt,vt,mt,gt,Lt,yt,bt,xt,wt,_t,St,kt,At=new GN(null!==(ft=i.scale)&&void 0!==ft?ft:1),Mt=new MN(null!==(pt=i.size)&&void 0!==pt?pt:new Rf(100,100,100)),Ct=new GN(null!==(vt=i.move)&&void 0!==vt?vt:1),Et=new AN(null!==(mt=i.fA)&&void 0!==mt?mt:new af(1.7,9.2)),Tt=new AN(null!==(gt=i.fB)&&void 0!==gt?gt:new af(8.3,2.8)),Pt=new AN(null!==(Lt=i.distortion)&&void 0!==Lt?Lt:new af(1,1)),Dt=new EN(i.colorA),Ot=new EN(i.colorB),It=new EN(i.colorC),Rt=new EN(i.colorD),Bt=new hz(null!==(yt=i.noiseType)&&void 0!==yt?yt:0),Nt=new hz(null!==(bt=i.voronoiStyle)&&void 0!==bt?bt:0),zt=new GN(null!==(xt=i.highCut)&&void 0!==xt?xt:1),Ft=new GN(null!==(wt=i.lowCut)&&void 0!==wt?wt:0),jt=new GN(null!==(_t=i.smoothness)&&void 0!==_t?_t:.5),Ut=new GN(null!==(St=i.seed)&&void 0!==St?St:.5),Zt=new hz(null!==(kt=i.quality)&&void 0!==kt?kt:1),Vt=PF(i),Gt=new jz(At,Mt,Ct,Et,Tt,Pt,Dt,Ot,It,Rt,Vt.alpha,Bt,Vt.isMask,Nt,zt,Ft,jt,Ut,Zt),Ht=new ZN(Gt.calpha,"f");return new MF(t,n,e,$e($e({scale:At,size:Mt,move:Ct,fA:Et,fB:Tt,distortion:Pt,colorA:Dt,colorB:Ot,colorC:It,colorD:Rt,noiseType:Bt},Vt),{},{voronoiStyle:Nt,highCut:zt,lowCut:Ft,smoothness:jt,seed:Ut,quality:Zt}),Gt,Vt.mode,Ht,Vt.isMask);case"normal":var Wt,qt=new MN(null!==(Wt=i.cnormal)&&void 0!==Wt?Wt:new Rf(1,1,1)),Xt=PF(i),Yt=new Mz(qt,Xt.alpha),Qt=new ZN(Yt.calpha,"f");return new MF(t,n,e,$e({cnormal:qt},Xt),Yt,Xt.mode,Qt,Xt.isMask);case"gradient":var Kt,Jt,$t,en,tn,nn,rn,an=new hz(null!==(Kt=i.gradientType)&&void 0!==Kt?Kt:0),on=new fz(null!==(Jt=i.smooth)&&void 0!==Jt&&Jt);i.colors?nn=new wz(i.colors.length,i.colors):(nn=new wz(10,new Ef(0,0,0,1))).value[1]=new Ef(1,1,1,1),i.steps?rn=new pz(i.steps.length,i.steps):(rn=new pz(10,1)).value[0]=0;var sn=new AN(null!==($t=i.offset)&&void 0!==$t?$t:new af(0,0)),ln=new AN(null!==(en=i.morph)&&void 0!==en?en:new af(0,0)),un=new GN(null!==(tn=i.angle)&&void 0!==tn?tn:0),cn=PF(i),dn=new Iz(an,on,nn,rn,sn,ln,un,cn.alpha,cn.isMask),hn=new ZN(dn.calpha,"f");return new MF(t,n,e,$e({gradientType:an,smooth:on,colors:nn,steps:rn,offset:sn,morph:ln,angle:un},cn),dn,cn.mode,hn,cn.isMask);case"pattern":var fn,pn,vn,mn,gn,Ln,yn,bn,xn,wn,_n,Sn,kn,An,Mn=new hz(null!==(fn=i.style)&&void 0!==fn?fn:0),Cn=new hz(null!==(pn=i.projection)&&void 0!==pn?pn:0),En=new hz(null!==(vn=["x","y","z"].indexOf(i.axis))&&void 0!==vn?vn:0),Tn=new GN(null!==(mn=i.blending)&&void 0!==mn?mn:0),Pn=new AN(null!==(gn=i.offset)&&void 0!==gn?gn:new af(0,0)),Dn=new EN(i.colorA),On=new EN(i.colorB),In=new AN(null!==(Ln=i.frequency)&&void 0!==Ln?Ln:new af(10,10)),Rn=new GN(null!==(yn=i.size)&&void 0!==yn?yn:.5),Bn=new GN(null!==(bn=i.variation)&&void 0!==bn?bn:0),Nn=new GN(null!==(xn=i.smoothness)&&void 0!==xn?xn:.5),zn=new GN(null!==(wn=i.zigzag)&&void 0!==wn?wn:0),Fn=new GN(null!==(_n=i.rotation)&&void 0!==_n?_n:0),jn=new AN(null!==(Sn=i.vertical)&&void 0!==Sn?Sn:new af(0,1)),Un=new AN(null!==(kn=i.horizontal)&&void 0!==kn?kn:new af(0,1)),Zn=new hz(null!==(An=i.sides)&&void 0!==An?An:6),Vn=PF(i),Gn=new Gz(Mn,Cn,En,Tn,Pn,Dn,On,In,Rn,Bn,Nn,zn,Fn,jn,Un,Zn,Vn.alpha,Vn.isMask),Hn=new ZN(Gn.calpha,"f");return new MF(t,n,e,$e({style:Mn,projection:Cn,axis:En,blending:Tn,offset:Pn,colorA:Dn,colorB:On,frequency:In,size:Rn,variation:Bn,smoothness:Nn,zigzag:zn,rotation:Fn,vertical:jn,horizontal:Un,sides:Zn},Vn),Gn,Vn.mode,Hn,Vn.isMask);default:var Wn=new dz(1,0,0,1),qn=PF(i),Xn=new kz(Wn,qn.alpha),Yn=new ZN(Xn.calpha,"f");return new MF(t,n,e,$e({color:Wn},qn),Xn,qn.mode,Yn,qn.isMask)}}(n,e,t,r)}(e,t,n,i)}}]),e}(),MF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,u){var d;return(0,c.Z)(this,n),(d=t.call(this,e,i,r,a)).params=a,d.color=o,d.mode=s,d.alpha=l,d.isMask=u,d}return(0,d.Z)(n)}(AF),CF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o){var s;return(0,c.Z)(this,n),(s=t.call(this,e,i,r,a)).position=o,s}return(0,d.Z)(n)}(AF),EF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o){var s;return(0,c.Z)(this,n),(s=t.call(this,e,i,r,o)).node=a,s}return(0,d.Z)(n,[{key:"category",get:function(){return this.node.category}}],[{key:"createLigherLayer",value:function(e,t,i,r){var a,o,s=new GN(i.alpha),l=new hz(i.mode),u=new GN(i.bumpMapIntensity),c=new GN(i.alphaOverride);if(i.visible)if("lambert"===i.category){var d,h;a=new oF;var f=new dz(null!==(d=r.color(i.emissive))&&void 0!==d?d:0),p=new fz(null===(h=i.occlusion)||void 0===h||h);o={emissive:f,occlusion:p},a.emissive=f,a.occlusion=p}else if("toon"===i.category){var v,m;a=new cF;var g=new GN(null!==(v=i.shininess)&&void 0!==v?v:30),L=new dz(null!==(m=r.color(i.specular))&&void 0!==m?m:1118481);o={shininess:g,specular:L},a.shininess=g,a.specular=L}else if("physical"===i.category){var y,b,x,w;a=new uF;var _=new GN(null!==(y=i.roughness)&&void 0!==y?y:.3),S=new GN(null!==(b=i.metalness)&&void 0!==b?b:0),k=new GN(null!==(x=i.reflectivity)&&void 0!==x?x:.5),A=new fz(null===(w=i.occlusion)||void 0===w||w);o={roughness:_,metalness:S,reflectivity:k,occlusion:A},a.roughness=_,a.metalness=S,a.reflectivity=k,a.occlusion=A}else{var M,C,E;a=new lF;var T=new GN(null!==(M=i.shininess)&&void 0!==M?M:30),P=new dz(void 0!==i.specular&&null!==(C=r.color(i.specular))&&void 0!==C?C:1118481),D=new fz(null===(E=i.occlusion)||void 0===E||E);o={shininess:T,specular:P,occlusion:D},a.shininess=T,a.specular=P,a.occlusion=D}else a=new aF,o={};return a.alpha=new GN(1),a.shadingAlpha=s,a.shadingBlend=l,a.bumpMapIntensity=u,a.alphaOverride=c,o.alpha=a.shadingAlpha,o.mode=a.shadingBlend,o.bumpMapIntensity=a.bumpMapIntensity,o.alphaOverride=a.alphaOverride,new n(e,t,i,a,o)}}]),n}(AF);function TF(e){var t=e instanceof AF?e.type:e;return"texture"===t||"video"===t||"displace_map"===t||"matcap"===t}function PF(e){var t,n,i;return{alpha:new GN(null!==(t=e.alpha)&&void 0!==t?t:1),mode:new hz(null!==(n=e.mode)&&void 0!==n?n:0),isMask:new fz(null!==(i=e.isMask)&&void 0!==i&&i)}}function DF(e,t,n){if("displace"===n.type&&("intensity"===e||"visible"===e)){var i=t.uniforms["f".concat(t.id,"_intensity")];return i?(i.value=n.intensity*(n.visible?1:0),i):void 0}if("displace"!==n.type&&("alpha"===e||"visible"===e)){var r=t.uniforms["f".concat(t.id,"_alpha")];if(!r)return;if(r.value=n.alpha*(n.visible?1:0),"outline"===n.type&&"visible"===e){var a=t.uniforms["f".concat(t.id,"_compensation")];a&&(a.value=n.compensation&&n.visible)}return r}}function OF(e,t){var n=0,i=e.layers.find((function(e){return"light"===e.data.type}));if(i&&i.data.alphaOverride<1)return!0;var r,a=(0,x.Z)(e.layers);try{for(a.s();!(r=a.n()).done;){var o=r.value;if("displace"!==o.data.type&&o.data.isMask)return!0;if("displace"!==o.data.type&&"alpha"in o.data&&"light"!==o.data.type&&"fresnel"!==o.data.type&&"texture"!==o.data.type&&"matcap"!==o.data.type&&"rainbow"!==o.data.type&&"outline"!==o.data.type&&"pattern"!==o.data.type){var s=o.data.visible?o.data.alpha:0;if(1===s&&"depth"===o.data.type||"gradient"===o.data.type){var l,u=(0,x.Z)(o.data.colors);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(c[3]<1){s=c[3];break}}}catch(m){u.e(m)}finally{u.f()}}else if(1===s&&"noise"===o.data.type){var d=t.color(o.data.colorA).a,h=t.color(o.data.colorB).a,f=t.color(o.data.colorC).a,p=t.color(o.data.colorD).a,v=Math.min(d,Math.min(h,Math.min(f,p)));v<1&&(s=v)}n+=(1-n)*s}}}catch(m){a.e(m)}finally{a.f()}return n<1}var IF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,void 0)).flatShading=!1,e.needsJitter=!0,e.cacheKey="",e.fog=!0,e.dithering=!0,e.vertexColors=!0,e.transparent=!0,e}return(0,d.Z)(n,[{key:"customProgramCacheKey",value:function(){return this.cacheKey}}]),n}(Pv),RF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this)).flatShading=e,o.side=i,o.wireframe=r,o.root=a,o}return(0,d.Z)(n,[{key:"updateAfterBuild",value:function(){var e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}},{key:"onBeforeCompile",value:function(e,t){this.root.onBeforeCompile(e)}},{key:"data",get:function(){return this.root.data}},{key:"category",get:function(){return this.root.category}},{key:"hasAO",get:function(){return this.root.hasAO}},{key:"getFlavor",value:function(e,t,n){return this.root.getFlavor(e,t,n)}},{key:"layers",get:function(){return this.root.layers}},{key:"fragment",get:function(){return this.root.fragment}},{key:"getLayersOfType",value:function(e){return this.root.getLayersOfType(e)}},{key:"getLayerByUuid",value:function(e){return this.root.getLayerByUuid(e)}},{key:"updateByOp",value:function(e,t,n){this.root.updateByOp(e,t,n)}},{key:"nodeMaterialDispose",value:function(){this.root.nodeMaterialDispose()}}]),n}(IF),BF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).data=e,r.layerIdGen=0,r.flavors=[],r.masks={},r.type="NodeMaterial",r.updaters=[],r.reset0(e,i),r}return(0,d.Z)(n,[{key:"nodeMaterial",get:function(){return this}},{key:"getFlavor",value:function(e,t,n){var i=n?6:(e?3:0)+t;if(0===i)return this;void 0===this.flavors&&(this.flavors=[]),i-=1;var r=this.flavors[i];return void 0===r&&(r=new RF(e,t,n,this),this.flavors[i]=r,r.flatShading=e,r.side=t,r.updateAfterBuild()),r}},{key:"fragment",get:function(){return this.lightLayer.node}},{key:"category",get:function(){return this.lightLayer.category}},{key:"hasAO",get:function(){var e,t;return null!==(e=null===(t=this.lightLayer.getNode("occlusion"))||void 0===t?void 0:t.value)&&void 0!==e&&e}},{key:"reset",value:function(e,t){this.data!==e&&this.reset0(e,t)}},{key:"reset0",value:function(e,t){var n,i,r=this;this.data=e;var a=null!==(n=e.layers)&&void 0!==n?n:WT.defaultTwoLayerData("phong").layers;try{this.layers=a.map((function(e){return AF.create(r.layerIdGen++,e.id,e.data,t.shared)}))}catch(o){this.layers=[]}this.layers.reverse(),this.name=null!==(i=e.name)&&void 0!==i?i:"Untitled Material",this.onUpdate(),this.transparent=OF(e,t.shared)}},{key:"getLayersOfType",value:function(e){return this.layers.filter((function(t){return t.type===e}))}},{key:"getLayerByUuid",value:function(e){return this.layers.find((function(t){return t.uuid===e}))}},{key:"onUpdate",value:function(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find((function(e){return e instanceof EF})),void 0===this.lightLayer&&(this.lightLayer=new EF(0,"",$e($e({},HT.defaultData("light","phong")),{},{visible:!1}),new aF,{})),this.dispose();var e,t=(0,x.Z)(this.flavors);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(i){t.e(i)}finally{t.f()}this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}},{key:"applyTextureMaps",value:function(){var e=this.layers.find((function(e){return e instanceof EF}));if(e){var t=e.data,n=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(var r=0;r<this.layers.length;++r){var a=this.layers[r];a instanceof MF&&a.color instanceof Ez&&(a.uuid===n&&(e.node.bumpMap=a.color),a.uuid===i&&(e.node.roughnessMap=a.color))}}}},{key:"updateByOp",value:function(e,t,n){if(void 0!==t?this.data=t:t=this.data,this.transparent=OF(t,n.shared),"layers"===e.path[0]){this.data=t;var i=n.shared,r=e.path[1];if(void 0===r){if(this.layers.reverse(),4===e.type){var a=AF.create(this.layerIdGen++,e.id,e.data,n.shared);this.layers.splice(e.localIndex,0,a),n.scene.markNeedsUpdateRendererDirty()}else if(5===e.type)this.layers.splice(e.localIndex,1)[0].dispose(),n.scene.markNeedsUpdateRendererDirty();else if(6===e.type){var o=this.layers.findIndex((function(t){return t.uuid===e.id})),s=this.layers[o];this.layers.splice(o,1),this.layers.splice(e.localIndex,0,s),n.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{0===e.type&&void 0!==e.props.occlusion&&n.scene.markNeedsUpdateRendererDirty();var l=this.layers.find((function(e){return e.uuid===r}));if(l){var u=t.layers.data(r);if(l.updateByOp($e($e({},e),{},{path:e.path.slice(2)}),u,n)){var c=AF.create(this.layerIdGen++,r,u,i);this.layers.splice(this.layers.findIndex((function(e){return e.uuid===r})),1,c),this.onUpdate()}}}}else this.reset(t,n)}},{key:"applyMasks",value:function(){for(var e=0;e<this.layers.length;++e){var t=this.layers[e];t instanceof MF?t.color.mask=void 0:t instanceof EF&&(t.node.mask=void 0)}for(var n=0;n<this.layers.length;++n){var i=this.layers[n];if(i instanceof MF&&i.isMask.value&&i.data.visible&&n>0){var r=n-1,a=this.layers[r];a instanceof EF?a.node.mask=new qN(i.color,i.alpha,qN.MUL):a instanceof MF&&(a.isMask.value||(a.color.mask=new qN(i.color,i.alpha,qN.MUL)))}}}},{key:"blendColors",value:function(){var e=this.layers.findIndex((function(e){return e instanceof MF})),t=this.layers.findIndex((function(e){return e instanceof EF}));if(-1!==e&&e<t){for(var n=this.layers[e].color,i=e+1;i<t;++i){var r=this.layers[i];if(r instanceof MF){if(r.isMask.value)continue;n=new _z(n,r.color,r.alpha,r.mode)}}this.fragment.color=n}else this.fragment.color=void 0}},{key:"blendAfterColors",value:function(){var e=new ZN("outgoingLight","f"),t=this.layers.findIndex((function(e){return e instanceof EF}));if(this.layers.length>t+1){for(var n=t+1;n<this.layers.length;++n){var i=this.layers[n];if(i instanceof MF){if(i.isMask.value)continue;e=new _z(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}},{key:"blendPositions",value:function(){var e=this.layers.filter((function(e){return e instanceof CF}));if(e.length>0){for(var t=e[0].position,n=1;n<e.length;++n)e[n]&&(t=new qN(t,e[n].position,qN.ADD),t=new qN(t,new GN(.5).setReadonly(!0),qN.MUL));this.fragment.position=t}else this.fragment.position=void 0}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"onBeforeCompile",value:function(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}},{key:"clampUniformsForPreview",value:function(e,t){var n,i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=(0,x.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("displace"===a.type){var o=i(a.uniforms["f".concat(a.id,"_intensity")].value,e,t);a.uniforms["f".concat(a.id,"_intensity")].value=o}}}catch(s){r.e(s)}finally{r.f()}}},{key:"computeCacheKey",value:function(){var e,t="[",n=(0,x.Z)(this.data.layers);try{var i=function(){var n=e.value.data;if("light"===n.type)t+='"'.concat(n.visible?n.category.toUpperCase():"Basic",'"');else{var i,r,a=(null!==(i=wF[n.type])&&void 0!==i?i:[]).map((function(e){return n[e]})),o=(null!==(r=_F[n.type])&&void 0!==r?r:[]).map((function(e){var t,i;return null!==(t=null===(i=n[e])||void 0===i?void 0:i.length)&&void 0!==t?t:0})),s=[].concat(u(a),u(o)),l="isMask"in n&&n.isMask,c='"'.concat(n.type,"-").concat(n.visible,"-").concat(l,'"');s.length?t+="[".concat(c,', "').concat(s.join('","'),'"],'):t+=c}};for(n.s();!(e=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}return t=t.slice(0,-1)+"]"}},{key:"updateFrame",value:function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}},{key:"build",value:function(){var e=new cz;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;var t,n=(0,x.Z)(this.flavors);try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&i.updateAfterBuild()}}catch(r){n.e(r)}finally{n.f()}return this}},{key:"nodeMaterialDispose",value:function(){this.layers.forEach((function(e){return e.dispose()})),Au((0,p.Z)(n.prototype),"dispose",this).call(this);var e,t=(0,x.Z)(this.flavors);try{for(t.s();!(e=t.n()).done;){var i=e.value;i&&i.dispose()}}catch(r){t.e(r)}finally{t.f()}}},{key:"assetsLoaded",value:function(){var e,t=(0,x.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n instanceof MF){var i=n.params.texture;if(i instanceof gz&&!i.image.loaded)return!1}}}catch(r){t.e(r)}finally{t.f()}return!0}},{key:"getHash",value:function(){var e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}"}}]),n}(IF);Object.defineProperties(IF.prototype,{properties:{get:function(){return this.fragment.properties}}});var NF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(BF),zF=ac(cc()),FF=new Map;function jF(e){if("string"==typeof e)return e;var t=FF.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},FF.set(e,t)),t.url}var UF,ZF,VF=function(){function e(t){var n,i=this,r=t.src,a=t.volume,o=t.delay,s=t.loop;(0,c.Z)(this,e),this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=function(){i.loopsRemaining===1/0?i.replay():i.loopsRemaining>1?(i.replay(),i.loopsRemaining--):(i._status="stopped",i.loopsRemaining=i._loop)},n="string"==typeof r?{src:r}:{src:jF(r),format:"wav"},this.sound=new zF.Howl(n),this.sound.on("end",this.onEnd),this.src=r,void 0!==a&&(this.volume=a),void 0!==o&&(this.delay=o),void 0!==s&&(this.loop=s)}return(0,d.Z)(e,[{key:"status",get:function(){return this._status}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e,this.sound.volume(e)}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e,this.loopsRemaining=e}},{key:"replay",value:function(){var e=this;this.clearDelay(),this.delayTimerId=window.setTimeout((function(){e.sound.play(),e.clearDelay()}),this.delay)}},{key:"fade",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout((function(){t.sound.fade(t._volume,0,n),t.clearFade()}),e)):this.sound.fade(this._volume,0,n)}},{key:"on",value:function(e,t,n){this.sound.on(e,t,n)}},{key:"off",value:function(e,t,n){this.sound.off(e,t,n)}},{key:"play",value:function(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}},{key:"pause",value:function(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}},{key:"stop",value:function(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}},{key:"clearFade",value:function(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}},{key:"clearDelay",value:function(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},{key:"dispose",value:function(){this.off(),this.stop(),this.clearFade(),this.clearDelay()}}]),e}(),GF=function(){function e(){(0,c.Z)(this,e),this.type="ShapePath",this.color=new wf,this.subPaths=[],this.currentPath=null}return(0,d.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new vy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){var n;return null!==(n=this.currentPath)&&void 0!==n&&n.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r;return null!==(r=this.currentPath)&&void 0!==r&&r.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o;return null!==(o=this.currentPath)&&void 0!==o&&o.bezierCurveTo(e,t,n,i,r,a),this}},{key:"splineThru",value:function(e){var t;return null!==(t=this.currentPath)&&void 0!==t&&t.splineThru(e),this}},{key:"toShapes",value:function(){var e=this,t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},n={loc:t.ORIGIN,t:0};function i(e,i,a,o){var s=e.x,l=i.x,u=a.x,c=o.x,d=e.y,h=i.y,f=a.y,p=o.y,v=(c-u)*(d-f)-(p-f)*(s-u),m=(p-f)*(l-s)-(c-u)*(h-d),g=v/m,L=((l-s)*(d-f)-(h-d)*(s-u))/m;if(0===m&&0!==v||g<=0||g>=1||L<0||L>1)return null;if(0===v&&0===m){for(var y=0;y<2;y++){if(r(0===y?a:o,e,i),n.loc===t.ORIGIN){var b=0===y?a:o;return{x:b.x,y:b.y,t:n.t}}if(n.loc===t.BETWEEN)return{x:+(s+n.t*(l-s)).toPrecision(10),y:+(d+n.t*(h-d)).toPrecision(10),t:n.t}}return null}for(var x=0;x<2;x++)if(r(0===x?a:o,e,i),n.loc===t.ORIGIN){var w=0===x?a:o;return{x:w.x,y:w.y,t:n.t}}return{x:+(s+g*(l-s)).toPrecision(10),y:+(d+g*(h-d)).toPrecision(10),t:g}}function r(e,i,r){var a,o=r.x-i.x,s=r.y-i.y,l=e.x-i.x,u=e.y-i.y,c=o*u-l*s;if(e.x===i.x&&e.y===i.y)return n.loc=t.ORIGIN,void(n.t=0);if(e.x===r.x&&e.y===r.y)return n.loc=t.DESTINATION,void(n.t=1);c<-Number.EPSILON?n.loc=t.LEFT:c>Number.EPSILON?n.loc=t.RIGHT:o*l<0||s*u<0?n.loc=t.BEHIND:Math.sqrt(o*o+s*s)<Math.sqrt(l*l+u*u)?n.loc=t.BEYOND:(a=0!==o?l/o:u/s,n.loc=t.BETWEEN,n.t=a)}function a(e,t,n){var r=new af;t.getCenter(r);var a=[];return n.forEach((function(t){t.boundingBox.containsPoint(r)&&function(e,t){for(var n=[],r=[],a=1;a<e.length;a++)for(var o=e[a-1],s=e[a],l=function(){var e=t[u-1],a=t[u],l=i(o,s,e,a);null!==l&&void 0===n.find((function(e){return e.t<=l.t+Number.EPSILON&&e.t>=l.t-Number.EPSILON}))&&(n.push(l),r.push(new af(l.x,l.y)))},u=1;u<t.length;u++)l();return r}(e,t.points).forEach((function(e){a.push({identifier:t.identifier,isCW:t.isCW,point:e})}))})),a.sort((function(e,t){return e.point.x-t.point.x})),a}var o=0,s=999999999,l=-999999999,u=[];this.subPaths.forEach((function(e){for(var t=e.getPoints(),n=-999999999,i=999999999,r=-999999999,a=999999999,c=0;c<t.length;c++){var d=t[c];d.y>n&&(n=d.y),d.y<i&&(i=d.y),d.x>r&&(r=d.x),d.x<a&&(a=d.x)}l<=r&&(l=r+1),s>=a&&(s=a-1),t.length&&u.push({curves:e.curves,points:t,isCW:qy.isClockWise(t),identifier:o++,boundingBox:new fx(new af(a,i),new af(r,n))})}));var c=u.map((function(t){var n;return function(e,t,n,i,r){(null==r||""===r)&&(r="nonzero");var o=new af;e.boundingBox.getCenter(o);var s=a([new af(n,o.y),new af(i,o.y)],e.boundingBox,t);s.sort((function(e,t){return e.point.x-t.point.x}));var l=[],u=[];s.forEach((function(t){t.identifier===e.identifier?l.push(t):u.push(t)}));for(var c=l[0].point.x,d=[],h=0;h<u.length&&u[h].point.x<c;)d.length>0&&d[d.length-1]===u[h].identifier?d.pop():d.push(u[h].identifier),h++;if(d.push(e.identifier),"evenodd"===r){var f=d.length%2===0,p=d[d.length-2];return{identifier:e.identifier,isHole:f,for:p}}if("nonzero"===r){for(var v=!0,m=null,g=null,L=0;L<d.length;L++){var y=d[L];t[y]&&(v?(g=t[y].isCW,v=!1,m=y):g!==t[y].isCW&&(g=t[y].isCW,v=!0))}return{identifier:e.identifier,isHole:v,for:m}}console.warn('fill-rule: "'+r+'" is currently not implemented.')}(t,u,s,l,null===(n=e.userData)||void 0===n?void 0:n.style.fillRule)})),d=[];return u.forEach((function(e){var t=c[e.identifier];if(t&&!t.isHole){var n=new xy;n.curves=e.curves,c.filter((function(t){return(null===t||void 0===t?void 0:t.isHole)&&t.for===e.identifier})).forEach((function(e){if(e){var t=u[e.identifier],i=new vy;i.curves=t.curves,n.holes.push(i)}})),d.push(n)}})),d}}]),e}(),HF=new Promise((function(e){UF=e})),WF=!1;function qF(){if(!WF)return ZF||(ZF=function(){return e.apply(this,arguments)}(),ZF);function e(){return e=(0,ju.Z)((0,Fu.Z)().mark((function e(){var t;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(237).then(n.bind(n,237));case 2:t=e.sent,UF(t),WF=!0;case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}}var XF=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,[{key:"load",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t,n){var i,r,a=arguments;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:function(){},e.next=3,HF;case 3:r=e.sent,(0,r.load)(t,(function(e,t){e||!t?i(null!==e&&void 0!==e?e:"Something went wrong"):n(t)}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t){var n,i,r,a,o,s;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HF;case 2:return n=e.sent,i=n.parse,r=n.Bidi,e.prev=5,a=i(t),o=new r,s=function(e){return a.charToGlyphIndex(e.char)},e.abrupt("return",(o.registerModifier("glyphIndex",null,s),o.applyFeatures(a,a.defaultRenderOptions.features),{font:a,bidi:o}));case 10:e.prev=10,e.t0=e.catch(5),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function YF(e){return QF.apply(this,arguments)}function QF(){return QF=(0,ju.Z)((0,Fu.Z)().mark((function e(t){return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.arrayBuffer();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),QF.apply(this,arguments)}var KF=new XF;function JF(e){return $F.apply(this,arguments)}function $F(){return $F=(0,ju.Z)((0,Fu.Z)().mark((function e(t){var n,i,r,a;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,!t.url){e.next=9;break}return e.next=4,YF(t.url);case 4:n=e.sent,i=t.url,r=t.url.startsWith("/"),e.next=10;break;case 9:t.data&&(n=t.data.buffer);case 10:if(!n){e.next=16;break}return e.next=13,KF.parse(n);case 13:if(!(a=e.sent)){e.next=16;break}return e.abrupt("return",{font:a.font,url:i,intercepted:r,arr:n,bidi:a.bidi});case 16:case"end":return e.stop()}}),e)}))),$F.apply(this,arguments)}function ej(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var tj=function(){function e(t){var n,i=this;(0,c.Z)(this,e),this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=null!==(n=t.isUserFont)&&void 0!==n&&n,this._loadingPromise=JF(t).then((function(e){e&&(i._arrayBuffer=e.arr,i._url=e.url,i.font=e.font,i._intercepted=e.intercepted,i._isLoaded=!0,i._bidi=e.bidi)}))}return(0,d.Z)(e,[{key:"update",value:function(e){var t,n=this;this._isLoaded=!1,this._isUserFont=null!==(t=e.isUserFont)&&void 0!==t&&t,this._loadingPromise=JF(e).then((function(e){e&&(n._arrayBuffer=e.arr,n._url=e.url,n.font=e.font,n._intercepted=e.intercepted,n._isLoaded=!0,n._bidi=e.bidi)}))}},{key:"url",get:function(){return this._url}},{key:"intercepted",get:function(){return this._intercepted}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"loadingPromise",get:function(){return this._loadingPromise}},{key:"reverseLigaturesTable",value:function(e,t,n){if(!this._bidi)return[];var i=this._bidi;i.getTextGlyphs(t);for(var r=i.tokenizer.tokens,a=[],o=0,s=n.length===r.length,l=0;l<n.length;l++){var u=n[l].index,c=String.fromCharCode(n[l].unicode),d=r[o];if(ej(u,d)||s)a.push({char:c,index:u,replacements:[d.state.glyphIndex],replacementChars:[d.char]}),o++;else{for(var h=d.char,f="",p=[d.state.glyphIndex],v=[],m=!1;!m;)o++,h+=f=t.charAt(o),p.push(e.charToGlyphIndex(f)),1===(v=e.stringToGlyphs(h)).length&&v[0].index===u&&(m=!0),o>t.length&&(m=!0);a.push({char:c,index:u,replacements:p,replacementChars:Array.from(h)}),o++}}return a}},{key:"generateShapes",value:function(e,t){var n=this;if(this._isLoaded){for(var i,r=this.font,a=t.fontSize/this.unitsPerEm,o=t.fontSize*t.lineHeight,s=e.map((function(e){return n.getTextWidth(e,t)})),l=t.width,c=this.getCharWidth("\n",t),d=1===t.horizontalAlign?c:0,h=this.computeSpaceWidthForLine(e,0,t),f=this.getLineInitialOffsetX(s[0],l,t.horizontalAlign,e[0],c),p=this.getLineInitialOffsetY(o,e.length,t.height,a,t.verticalAlign),v=[],m=e.map((function(e){return[]})),g=e.map((function(e){return[]})),L=0;L<e.length;L++){var y=e[L],b=[];try{b=r.stringToGlyphs(y,{features:{liga:!0}})}catch(_){console.warn(_)}f=this.getLineInitialOffsetX(s[L],l,t.horizontalAlign,y,c);var x=[];try{x=this.reverseLigaturesTable(r,y,b)}catch(_){console.warn(_)}h=this.computeSpaceWidthForLine(e,L,t);for(var w=function(){var e=b[_],o=0===e.index?"\n":e.unicode?String.fromCharCode(e.unicode):void 0,s=x[_],l=0,u=0;0===_&&2===t.horizontalAlign&&void 0!==e.leftSideBearing&&(u=-e.leftSideBearing*a),i&&(l=r.getKerningValue(e,i)*a),f+=u+l;var c=0;if("\n"===o)c=d;else if(" "===o)c=h;else{var y=n.createPath(e,a,f,p,t);y&&(c=y.offsetX-(l+u),v.push(y.path))}if(1===s.replacements.length)g[L].push([f,p]),m[L].push(c);else for(var w=s.replacements.map((function(e){var t;return(null!==(t=r.glyphs.get(e).advanceWidth)&&void 0!==t?t:0)*a})),S=w.reduce((function(e,t){return e+t}),0),k=w.map((function(e){return e/S})),A=f,M=0;M<k.length;M++){var C=c*k[M];g[L].push([A,p]),m[L].push(C),A+=C}f+=c,i=e},_=0;_<b.length;_++)w();p-=o}for(var S=[],k=0,A=v.length;k<A;k++)S.push.apply(S,u(v[k].toShapes()));return{shapes:S,charWidths:m,lineWidths:s,charCoords:g}}}},{key:"isUserFont",get:function(){return this._isUserFont}},{key:"arrayBuffer",get:function(){return this._arrayBuffer}},{key:"ascender",get:function(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:0}},{key:"descender",get:function(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:0}},{key:"familyName",get:function(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontFamily)&&void 0!==e?e:""}},{key:"subfamilyName",get:function(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontSubfamily)&&void 0!==e?e:""}},{key:"unitsPerEm",get:function(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.unitsPerEm)&&void 0!==e?e:1}},{key:"getLineInitialOffsetX",value:function(e,t,n,i,r){return(3===n||2===n)&&i.indexOf("\n")>=0&&(e-=r),3===n?.5*t-.5*e:2===n?t-e:0}},{key:"getLineInitialOffsetY",value:function(e,t,n,i,r){var a=t*e,o=e-Math.abs(this.ascender-this.descender)*i,s=-this.ascender*i-o/2;return 3===r?-(n-a-s):2===r?-(.5*n-.5*a-s):s}},{key:"createPath",value:function(e,t,n,i,r){var a,o=e.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(o){var s=new GF,l=(null!==(a=e.advanceWidth)&&void 0!==a?a:1)*t;if(e){var u,c=(0,x.Z)(o.commands);try{for(c.s();!(u=c.n()).done;){var d,h=u.value,f=null===(d=s.currentPath)||void 0===d?void 0:d.currentPoint;if(!f||"Z"===h.type||f.x!==h.x||-f.y!==h.y)switch(h.type){case"M":s.moveTo(h.x,-h.y);break;case"L":s.lineTo(h.x,-h.y);break;case"Q":s.quadraticCurveTo(h.x1,-h.y1,h.x,-h.y);break;case"C":s.bezierCurveTo(h.x1,-h.y1,h.x2,-h.y2,h.x,-h.y)}}}catch(p){c.e(p)}finally{c.f()}}return s.subPaths.forEach((function(e){var t=function(e){if(e.length){var t=e[0];if(t instanceof ly)return t.v1;if(t instanceof oy||t instanceof cy)return t.v0}}(e.curves);void 0!==t&&e.currentPoint.distanceTo(t)>0&&e.lineTo(t.x,t.y)})),{offsetX:l+r.fontSize*r.letterSpacing,path:s}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".")}},{key:"getCharWidth",value:function(e,t){var n,i;return null!==(n=null===(i=this.font)||void 0===i?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==n?n:0}},{key:"getTextWidth",value:function(e,t){var n,i;return null!==(n=null===(i=this.font)||void 0===i?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==n?n:0}},{key:"computeSpaceWidthForLine",value:function(e,t,n){var i=this.getCharWidth(" ",n),r=e[t];if(r){var a=this.countSpaces(r.trimEnd());if(4===n.horizontalAlign&&t<e.length-1&&a)return(n.width-(this.getTextWidth(r,n)-a*i))/a}return i}},{key:"countSpaces",value:function(e){return(e.match(/ /g)||[]).length}}]),e}();var nj=function(){function e(){(0,c.Z)(this,e),this.objects=new Map,this.unreachable=new Set}return(0,d.Z)(e,[{key:"getCached",value:function(e){return this.objects.get(e)}},{key:"size",get:function(){return this.objects.size}},{key:"get",value:function(e,t){var n=this.objects.get(e);return void 0===n?(n=this.createObject(e,t),this.objects.set(e,n)):n.isShared=!0,n}},{key:"mutateIfUnique",value:function(e,t){var n=this.objects.get(e);if(n&&!0!==n.isShared)return this.objects.delete(e),this.objects.set(t,n),n}},{key:"startGc",value:function(){this.unreachable=new Set(this.objects.keys())}},{key:"markAsReachable",value:function(e,t){t===this.objects.get(e)&&this.unreachable.delete(e)}},{key:"endGc",value:function(){var e=this;this.unreachable.forEach((function(t){e.disposeObject(e.objects.get(t)),e.objects.delete(t)})),this.unreachable.clear()}},{key:"dispose",value:function(){var e=this;this.objects.forEach((function(t){e.disposeObject(t)})),this.objects.clear()}}]),e}(),ij=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).flatShading=e,i}return(0,d.Z)(n,[{key:"disposeObject",value:function(e){e.dispose()}},{key:"createObject",value:function(e,t){var n=OB(e,t,this.flatShading);return n.computeBoundingSphere(),n}}]),n}(nj),rj={markNeedsUpdateRendererDirty:function(){}},aj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).shared=e,i}return(0,d.Z)(n,[{key:"create",value:function(e){return new mF(e,this.shared)}}]),n}(vF),oj=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,c.Z)(this,e),this.geometryCache=new ij(!0),this.geometryCache2=new ij(!1),this.imageHolderCache=new aj(this),this.thisContext={scene:rj,shared:this},this.deletedMaterial=new NF(WT.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new gF(DP.emptyImage,this),this.deletedVideo=new gF(BT.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.requestRender=function(){n._requestRender&&n._requestRender()},i.images)for(var r=0,a=Object.entries(i.images);r<a.length;r++){var s=o(a[r],2),l=s[0],u=s[1];this.addImage(l,u)}if(i.videos)for(var d=0,h=Object.entries(i.videos);d<h.length;d++){var f=o(h[d],2),p=f[0],v=f[1];this.addVideo(p,v)}if(i.audios)for(var m=0,g=Object.entries(i.audios);m<g.length;m++){var L=o(g[m],2),y=L[0],b=L[1];this.addAudio(y,b.data)}this.reset(t)}return(0,d.Z)(e,[{key:"setRequestRender",value:function(e){this._requestRender=e}},{key:"reset",value:function(e){for(var t=0,n=Object.entries(e.images);t<n.length;t++){var i=o(n[t],2),r=i[0],a=i[1];this.addImage(r,a)}for(var s=0,l=Object.entries(e.videos);s<l.length;s++){var u=o(l[s],2),c=u[0],d=u[1];this.addVideo(c,d)}for(var h=0,f=Object.entries(e.colors);h<f.length;h++){var p=o(f[h],2),v=p[0],m=p[1];this.addColor(v,m)}for(var g=0,L=Object.entries(e.materials);g<L.length;g++){var y=o(L[g],2),b=y[0],x=y[1];this.addMaterial(b,new NF(x,this.thisContext))}for(var w=0,_=Object.entries(e.audios);w<_.length;w++){var S=o(_[w],2),k=S[0],A=S[1];this.addAudio(k,A.data)}for(var M=0,C=Object.entries(e.fonts);M<C.length;M++){var E=o(C[M],2),T=E[0],P=E[1];this.addFont(T,P)}}},{key:"addMaterial",value:function(e,t){t.uuid=e,this.materials[e]?(this.materials[e].reset(t.data,this.thisContext),t.dispose()):this.materials[e]=t}},{key:"deleteMaterial",value:function(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}},{key:"getMaterial",value:function(e){return this.materials[e]}},{key:"getMaterialOrDeletedPlaceholder",value:function(e){var t;return null!==(t=this.materials[e])&&void 0!==t?t:this.deletedMaterial}},{key:"material",value:function(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):null==e?(console.error("material is undefined or null"),this.deletedMaterial):new BF(e,this.thisContext)}},{key:"getMaterials",value:function(){return this.materials}},{key:"addImage",value:function(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new gF(t,this),!1)}},{key:"deleteImage",value:function(e){var t=this.images[e];t&&(t.dispose(),delete this.images[e])}},{key:"getDefaultImage",value:function(){return this.images.image_0}},{key:"getImage",value:function(e){var t;return null!==(t=this.images[e])&&void 0!==t?t:this.deletedImage}},{key:"image",value:function(e){return"string"==typeof e?this.getImage(e):this.imageHolderCache.load(e)}},{key:"addVideo",value:function(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new gF(t,this),!1)}},{key:"deleteVideo",value:function(e){var t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}},{key:"getVideo",value:function(e){var t;return null!==(t=this.videos[e])&&void 0!==t?t:this.deletedVideo}},{key:"video",value:function(e){return"string"==typeof e?this.getVideo(e):this.imageHolderCache.load(e)}},{key:"addColor",value:function(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):(this.colors[e]=new xF(t.r,t.g,t.b,"a"in t?t.a:1),!1)}},{key:"updateColor",value:function(e,t){if(this.colors[e]){var n,i,r,a;this.onColorOrImageUpdate&&this.onColorOrImageUpdate();var o=this.colors[e];return this.colors[e].r=null!==(n=t.r)&&void 0!==n?n:o.r,this.colors[e].g=null!==(i=t.g)&&void 0!==i?i:o.g,this.colors[e].b=null!==(r=t.b)&&void 0!==r?r:o.b,this.colors[e].a=null!==(a=t.a)&&void 0!==a?a:o.a,!0}return!1}},{key:"deleteColor",value:function(e){this.colors[e]&&delete this.colors[e]}},{key:"getColor",value:function(e){return this.colors[e]}},{key:"color",value:function(e){var t;if("string"!=typeof e)return new CN(e.r,e.g,e.b,"a"in e?e.a:1);var n=this.getColor(e);return n?t=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new CN(0,0,0,0)),t}},{key:"addAudio",value:function(e,t){this.audios[e]=t}},{key:"getAudio",value:function(e){var t=this.audios[e];if(t instanceof VF)return t;var n=new VF({src:t});return this.audios[e]=n,n}},{key:"deleteAudio",value:function(e){var t=this.audios[e];t&&(t instanceof VF&&t.dispose(),delete this.audios[e])}},{key:"addFont",value:function(e,t){var n=this;this.fonts[e]=new tj(t),this.fonts[e].loadingPromise.then((function(){return n.requestRender()}))}},{key:"getFont",value:function(e){return this.fonts[e]}},{key:"deleteFont",value:function(e){this.fonts[e]&&delete this.fonts[e]}},{key:"dispose",value:function(){var e=this;Object.keys(this.materials).forEach((function(t){return e.deleteMaterial(t)})),this._requestRender=void 0,Object.values(this.audios).forEach((function(e){e instanceof VF&&e.dispose()})),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}}]),e}(),sj=(new oj(OP.emptyData()),function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"updateByPatchedOp",value:function(e,t,i){if(Au((0,p.Z)(n.prototype),"updateByPatchedOp",this).call(this,e,t,i),null!==function(e,t){var n=[];if(t.length!==e.length)return null;for(var i=0;i<e.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}(e.path,["materials"])&&0===e.type&&Array.isArray(this.material))for(var r=0,a=Object.entries(e.props);r<a.length;r++){var s=o(a[r],2),l=s[0],u=s[1],c=i.shared.material(u);this.material[Number(l)]=c}else if(CC(e.path,["material"])&&this.material instanceof IF)"material"in t&&"string"!=typeof t.material&&this.material.updateByOp($M.drop(e,1),t.material,i);else if(CC(e.path,["materials","*"])&&Array.isArray(this.material)){var d=e.path[1];if("materials"in t&&d<this.material.length){var h=t.materials[d];"string"!=typeof h&&this.material[d].updateByOp($M.drop(e,2),h,i)}}}},{key:"needsAO",get:function(){return void 0!==this.material&&(Array.isArray(this.material)?this.material[0]:this.material).hasAO}},{key:"updateState",value:function(e,t){var i,r;Au((0,p.Z)(n.prototype),"updateState",this).call(this,e,t),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow);var a=this.dataPatched;if("NonParametricGeometry"!==(null===(i=e.geometry)||void 0===i?void 0:i.type)&&"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe),t.scene.markNeedsUpdateRendererDirty()),"NonParametricGeometry"===(null===(r=e.geometry)||void 0===r?void 0:r.type)&&("materials"in e&&void 0!==e.materials?(this.disposeMaterial(),this.material=e.materials.map((function(e){return t.shared.material(e).getFlavor(a.flatShading,a.side,a.wireframe)})),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe)],t.scene.markNeedsUpdateRendererDirty())),void 0!==e.flatShading||void 0!==e.wireframe||void 0!==e.side)if(Array.isArray(this.material))for(var o=0;o<this.material.length;o++)this.material[o]=this.material[o].getFlavor(a.flatShading,a.side,a.wireframe);else this.material=this.material.getFlavor(a.flatShading,a.side,a.wireframe)}},{key:"disposeMaterial",value:function(){this.material&&yM(this.material).forEach((function(e){e instanceof IF&&(e instanceof NF||e.nodeMaterialDispose())}))}},{key:"dispose",value:function(){this.disposeMaterial(),Au((0,p.Z)(n.prototype),"dispose",this).call(this)}}]),n}(yN)),lj=new Rf,uj=new Ef,cj=new Ef,dj=new Rf,hj=new dp,fj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,i)).data=i,a.localGeometry=void 0,i.bindMode&&i.bindMatrix&&(a.isSkinnedMesh=!0,a.bindMode=i.bindMode,a.bindMatrix=(new dp).fromArray(i.bindMatrix),a.bindMatrixInverse=new dp),a}return(0,d.Z)(n,[{key:"chooseGeoemtryCache",value:function(e){return e.geometryCache}},{key:"markGeometryAsReachable",value:function(e){this.geometryCreateDeleyed instanceof cv&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}},{key:"geometry",get:function(){if(void 0!==this.localGeometry)return this.localGeometry;if(this.geometryCreateDeleyed instanceof oj){var e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed},set:function(e){this.localGeometry=e}},{key:"is2DAndNoDepth",get:function(){var e=this.dataPatched.geometry;return $T.is2DParametricMesh(e.type)&&0===e.depth}},{key:"is2DType",get:function(){return $T.is2DParametricMesh(this.geometry.userData.type)}},{key:"isNonParametric",get:function(){return"NonParametricGeometry"===this.geometry.userData.type}},{key:"updateByPatchedOp",value:function(e,t,i){Au((0,p.Z)(n.prototype),"updateByPatchedOp",this).call(this,e,t,i),CC(e.path,["geometry"])&&this.updateByPatchedOpGeometry($M.drop(e,1),t.geometry,i)}},{key:"removeInteractionGeometry",value:function(){var e;null!==(e=this.localGeometry)&&void 0!==e&&e.dispose(),this.localGeometry=void 0}},{key:"updateGeometryInteractions",value:function(e,t){this.invalidateDownstreamBooleanData();var n=this.data.geometry.type;if("NonParametricGeometry"===n||"SubdivGeometry"===n){var i,r,a,s,l,u=e;if(void 0===this.localGeometry){var c=$e($e({},this.data.geometry),u);this.localGeometry=OB(c,t,this.data.flatShading)}u.scaleBaked?(a=(i=o(u.scaleBaked,3))[0],s=i[1],l=i[2]):(a=(r=u).width,s=r.height,l=r.depth);var d=this.localGeometry.userData;void 0!==d.sxPrev&&RB(this.localGeometry.attributes,a/d.sxPrev,s/d.syPrev,l/d.szPrev),d.sxPrev=a,d.syPrev=s,d.szPrev=l}else{var h,f=$e($e({},this.data.geometry),e);null!==(h=this.localGeometry)&&void 0!==h&&h.dispose(),this.localGeometry=OB(f,t,this.data.flatShading)}}},{key:"refreshAttachedCloners",value:function(e){var t,n=(0,x.Z)(this.attachedSurfaceCloners);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.scene.addPendingUpdateCloner(i.object)}}catch(r){n.e(r)}finally{n.f()}}},{key:"refreshAttachedPaths",value:function(e){var t,n=(0,x.Z)(this.attachedPaths);try{var i=function(){var n=t.value;e.scene.addPendingCommand((function(){return n.updateShape()}))};for(n.s();!(t=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}}},{key:"createGeometryDelayed",value:function(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}},{key:"updateByPatchedOpGeometry",value:function(e,t,n){var i,r=!1;0===e.type&&0===e.path.length&&tM(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof ZB&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),r||(null!==(i=n.scene)&&void 0!==i&&i.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}},{key:"updateGeometryOnStateUpdate",value:function(e,t){this.createGeometryDelayed(t)}},{key:"updateState",value:function(e,t){void 0!==e.geometry&&this.updateGeometryOnStateUpdate(e.geometry,t),Au((0,p.Z)(n.prototype),"updateState",this).call(this,e,t)}},{key:"updateGeometryGroupsIfNeeded",value:function(){var e,t;Array.isArray(this.material)&&0===this.geometry.groups.length&&this.geometry.addGroup(0,Math.max(null!==(e=null===(t=this.geometry.getIndex())||void 0===t?void 0:t.count)&&void 0!==e?e:0,this.geometry.getAttribute("position").count),0)}},{key:"updateEntityBoxSize",value:function(e,t){var n,i,r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,.5*r.depth):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,null!==(n=r.depth)&&void 0!==n?n:0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,null!==(i=r.depth)&&void 0!==i?i:0).multiplyScalar(.5)}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(e){for(var t=new Ef,n=this.geometry.attributes.skinWeight,i=0,r=n.count;i<r;i++){t.fromBufferAttribute(n,i);var a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),n.setXYZW(i,t.x,t.y,t.z,t.w)}}},{key:"boneTransform",value:function(e,t){var n=this.skeleton;if(void 0!==n){var i=this.geometry;uj.fromBufferAttribute(i.attributes.skinIndex,e),cj.fromBufferAttribute(i.attributes.skinWeight,e),lj.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a=cj.getComponent(r);if(0!==a){var o=uj.getComponent(r);hj.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(dj.copy(lj).applyMatrix4(hj),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}}]),n}(sj);function pj(e){if(Array.isArray(e.material)){var t,n=(0,x.Z)(e.material);try{for(n.s();!(t=n.n()).done;){if(0===t.value.getLayersOfType("outline").length)return}}catch(i){n.e(i)}finally{n.f()}}else if(!(e.material instanceof IF)||0===e.material.getLayersOfType("outline").length)return;e instanceof fj&&e.is2DAndNoDepth?function(e){if(!e.geometry.attributes.extrudeNormals&&e.geometry.attributes.position){for(var t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=new Rf,r=0;r<t.length;r+=3)i.set(t[r],t[r+1],t[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;e.geometry.setAttribute("extrudeNormal",new nv(n,3))}}(e):function(e){if(!e.geometry.attributes.extrudeNormal&&e.geometry.attributes.position&&e.geometry.attributes.normal){for(var t=new Map,n=e.geometry.attributes,r=n.position.array,a=n.normal.array,o=new Float32Array(r.length),s=0;s<r.length;s+=3){var l,u="".concat(r[s],"_").concat(r[s+1],"_").concat(r[s+2]),c=new Rf(a[s],a[s+1],a[s+2]);t.has(u)?null===(l=t.get(u))||void 0===l||l.normals.push(c):t.set(u,{normals:[c],result:new Rf})}t.forEach((function(e,t){var n,r=(0,x.Z)(e.normals);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.result.add(a)}}catch(i){r.e(i)}finally{r.f()}e.result.divideScalar(e.normals.length)}));for(var d=0;d<r.length;d+=3){var h,f="".concat(r[d],"_").concat(r[d+1],"_").concat(r[d+2]),p=null===(h=t.get(f))||void 0===h?void 0:h.result;p&&(o[d]=p.x,o[d+1]=p.y,o[d+2]=p.z)}e.geometry.setAttribute("extrudeNormal",new nv(o,3))}}(e)}function vj(e){if(e.geometry.attributes.position){for(var t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),r=[rf.seededRandom(i),rf.seededRandom(i+1e4),rf.seededRandom(i+2e4)],a=0;a<t.length;a++)n[a]=r[a%3];e.geometry.setAttribute("randomColor",new $p(n,3))}}TB.then((function(e){e}));var mj=new zf,gj=new Rf;function Lj(e){var t=!1;return e.scene.objects.traverse((function(e,n){"Mesh"===n.type&&"SubdivGeometry"===n.geometry.type&&(t=!0)})),t}var yj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,i,r)).data=i,a.hiddenMatrixOld=new dp,a.smoothShading=!0,a.skipReactionUpdate=!1,a}return(0,d.Z)(n,[{key:"chooseGeoemtryCache",value:function(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}},{key:"subdivPointerNew",get:function(){return void 0!==this.localGeometry?this.subdivPointer:this.geometry.ensureSubdivPointer()}},{key:"originalGeometryNew",get:function(){return void 0!==this.localGeometry?this.originalGeometry:this.geometry.originalGeometry}},{key:"phongAngle",get:function(){var e;return null!==(e=this.data.geometry.phongAngle)&&void 0!==e?e:45}},{key:"updateEntityBoxSize",value:function(e,t){var n,i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,null!==(n=i.depth)&&void 0!==n?n:0).multiplyScalar(.5)}},{key:"createGeometryByControls",value:function(e){var t,n,i,r;if(!0!==this.skipReactionUpdate){var a=null===(t=this.localGeometry)||void 0===t?void 0:t.uuid,o=ZB.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0),s=o.originalGeometry,l=o.subdividedGeometry,u=o.subdivPointer;this.subdivPointer=u,void 0!==s&&(null!==(n=this.originalGeometry)&&void 0!==n&&n.dispose(),this.originalGeometry=s),void 0!==l&&(null!==(i=this.subdividedGeometry)&&void 0!==i&&i.dispose(),this.subdividedGeometry=null!==l&&void 0!==l?l:void 0),this.localGeometry=null!==(r=this.subdividedGeometry)&&void 0!==r?r:this.originalGeometry,pj(this),vj(this),this.calcBoundingBox(),a&&(this.localGeometry.uuid=a)}}},{key:"updateState",value:function(e,t){if(Au((0,p.Z)(n.prototype),"updateState",this).call(this,e,t),void 0!==e.flatShading){var i=this.material;this.material=i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}},{key:"updateMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ZB.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ZB.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}},{key:"updateTopology",value:function(){var e;this.originalGeometry.dispose(),this.originalGeometry=ZB.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ZB.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=null!==(e=this.subdividedGeometry)&&void 0!==e?e:this.originalGeometry}},{key:"raycast",value:function(e,t){var n=this.localGeometry;this.localGeometry=this.originalGeometryNew,yN.prototype.raycast.call(this,e,t),this.localGeometry=n}},{key:"activateSVDCompensation",value:function(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}},{key:"deactivateSVDCompensation",value:function(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}},{key:"calcBoundingBox",value:function(){var e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new np,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));var t=e.attributes.position,n=e.boundingSphere.center;mj.setFromBufferAttribute(t),mj.getCenter(n),e.boundingSphere.radius=n.distanceTo(mj.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),mj.getSize(gj),this.hasNonUniformScale&&gj.divide(this.scale);var i={width:gj.x,height:gj.y,depth:gj.z};return this.geometry.userData.parameters=i,i}},{key:"updateBoundingSphere",value:function(e){var t=this.originalGeometry;mj.min.set(e[0],e[2],e[4]),mj.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(mj.min.applyMatrix4(this.shearScaleInv),mj.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new np);var n=t.boundingSphere.center;mj.getCenter(n),t.boundingSphere.radius=n.distanceTo(mj.max)}},{key:"freeSubdivPointer",value:function(){var e,t;this.subdivPointer&&(ZB.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,null!==(e=this.originalGeometry)&&void 0!==e&&e.dispose(),null===(t=this.subdividedGeometry)||void 0===t||t.dispose()}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this),this.freeSubdivPointer()}},{key:"updateByPatchedOpGeometry",value:function(e,t,i){Au((0,p.Z)(n.prototype),"updateByPatchedOpGeometry",this).call(this,e,t,i),this.localGeometry&&this.createGeometryByControls(t)}}]),n}(fj),bj={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},xj={polygon_center:0,edge:1,vertex:2},wj=function(e,t){return function(n,i){return t&&0!==n&&0!==e?e*i/100:0}},_j=function(e,t){var n=Math.abs(t),i=-1*n;return(e- -1)*(n-i)/2+i};var Sj=new Rf,kj=new Rf,Aj=new Rf,Mj=new Rf;function Cj(e,t){var n=Aj.fromArray(e),i=Mj.fromArray(t);kj.copy(i).sub(n);var r=kj.length();return kj.normalize().multiplyScalar(.5*r),Sj.copy(n).add(kj).toArray()}var Ej=new qp,Tj=new Rf,Pj=new Rf,Dj=new Rf;var Oj=function(e){return.5*(1-Math.cos(e*Math.PI))},Ij=function(){function e(){(0,c.Z)(this,e),this.perlin=new Array(4096)}return(0,d.Z)(e,[{key:"noise",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==this.perlin){this.perlin=new Array(4096);for(var i=0;i<4096;i++)this.perlin[i]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var r,a,o,s,l,u=Math.floor(e),c=Math.floor(t),d=Math.floor(n),h=e-u,f=t-c,p=n-d,v=0,m=.5,g=0;g<4;g++){var L=u+(c<<4)+(d<<8);r=Oj(h),a=Oj(f),o=this.perlin[4095&L],o+=r*(this.perlin[L+1&4095]-o),s=this.perlin[L+16&4095],o+=a*((s+=r*(this.perlin[L+16+1&4095]-s))-o),L+=256,s=this.perlin[4095&L],s+=r*(this.perlin[L+1&4095]-s),l=this.perlin[L+16&4095],s+=a*((l+=r*(this.perlin[L+16+1&4095]-l))-s),v+=(o+=Oj(p)*(s-o))*m,m*=.5,u<<=1,c<<=1,d<<=1,(h*=2)>=1&&(u++,h--),(f*=2)>=1&&(c++,f--),(p*=2)>=1&&(d++,p--)}return v}},{key:"noiseSeed",value:function(e){var t=function(){var e,t;return{setSeed:function(n){t=e=(null!==n&&void 0!==n?n:4294967296*Math.random())>>>0},getSeed:function(){return e},rand:function(){return(t=(1664525*t+1013904223)%4294967296)/4294967296}}}();t.setSeed(e),this.perlin=new Array(4096);for(var n=0;n<4096;n++)this.perlin[n]=t.rand()}}]),e}(),Rj=Ij,Bj=new Rf,Nj=new dp,zj=new cp;function Fj(e){var t=!1;return e.scene.objects.traverse((function(e,n){"Mesh"===n.type&&"TextGeometry"===n.geometry.type&&(t=!0)})),t}var jj,Uj,Zj,Vj,Gj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,i,r)).data=i,a}return(0,d.Z)(n,[{key:"textGeometry",get:function(){return this.geometry}},{key:"charWidths",get:function(){return this.textGeometry.charWidths}},{key:"charCoords",get:function(){return this.textGeometry.charCoords}},{key:"wrappedText",get:function(){return this.textGeometry.wrappedText}},{key:"font",get:function(){return this.textGeometry.font}},{key:"initialOffsetY",get:function(){var e,t,n=this.dataPatched;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,n.geometry.height,this.fontScale,n.geometry.verticalAlign))&&void 0!==e?e:0}},{key:"fontScale",get:function(){var e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}},{key:"AD",get:function(){return Math.abs(this.ascender-this.descender)}},{key:"ascender",get:function(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:1)*this.fontScale}},{key:"descender",get:function(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:1)*this.fontScale}},{key:"lineHeight",get:function(){var e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}},{key:"raycast",value:function(e,t){var n=this.matrixWorld;if(!isNaN(e.ray.origin.x)&&0!==this.scale.x&&0!==this.scale.y&&0!==this.scale.z&&(Nj.copy(n).invert(),zj.copy(e.ray).applyMatrix4(Nj),zj.intersectBox(this.singleBBox,Bj))){var i=Bj.applyMatrix4(n),r=e.ray.origin.distanceTo(i);t.push({distance:r,point:i.clone(),object:this})}}}]),n}(fj),Hj=1e-4,Wj=new Rf,qj=new Rf;TB.then((function(e){Uj=[(jj=e).get_face_center,jj.get_edge_midpoint,jj.get_vertex_position],Zj=[jj.get_face_normal,jj.get_edge_normal,jj.get_vertex_normal],Vj=[jj.face_count,jj.edge_count,jj.vertex_count]}));var Xj=new dp,Yj=new dp,Qj=new Rf,Kj=new Rf,Jj=new Rf,$j=new Rf,eU=new Rf,tU=new Rf,nU=new Rj,iU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).parameters=i,r.objectForSample=void 0,r._pendingMediaLoad=!1,r.object=e,r}return(0,d.Z)(n,[{key:"resetOnMove",value:function(){this.removeFromParent(),this.parent=null}},{key:"expandClones",value:function(e){if(null===this.parent)this.updateState(this.parameters,e);else{var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof BO&&i.expand()}}catch(r){n.e(r)}finally{n.f()}}}},{key:"invalidateTransform",value:function(e){this.matrixWorldNeedsUpdate=!0,this.traverse((function(t){t instanceof BO&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)}))}},{key:"onObjUpdateMatrix",value:function(){"toObject"!==this.parameters.type&&(this.matrixWorldNeedsUpdate=!0)}},{key:"update",value:function(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}var e,t=(0,x.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD())}}catch(i){t.e(i)}finally{t.f()}}},{key:"_updateCount",value:function(e){var t;if(t=void 0!==e?e:"grid"===this.parameters.type?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,"toObject"===this.parameters.type&&!this.parameters.toObject.object&&(t=0),"toObject"===this.parameters.type&&this.objectForSample){for(var n=0,i=this.children.length;n<i;++n)this.remove(this.children[0]);var r=this.children;if(r.length===t)return;if(r.length<t)for(var a=0,o=t-r.length;a<o;++a){var s=new BO(this.object);s.expand(),this.add(s)}else for(var l=0,u=r.length-t;l<u;++l)this.remove(r[l])}else{if(this.children.length===t)return;if(this.children.length<t)for(var c=0,d=t-this.children.length;c<d;++c){var h=new BO(this.object);h.expand(),this.add(h)}else for(var f=0,p=this.children.length-t;f<p;++f)this.remove(this.children[0])}}},{key:"_updateRadial",value:function(e){var t,n,i=e.radial,r=i.start*rf.DEG2RAD,a=r-i.end*rf.DEG2RAD,s=new xp(i.rotation[0],i.rotation[1],i.rotation[2]);switch(i.axis){case"z":n=new Rf(0,0,1);break;case"y":n=new Rf(0,1,0);break;default:n=new Rf(1,0,0)}var l=null!==(t=e.randomnessObject)&&void 0!==t?t:kT.defaultData([1,1,1]).randomnessObject,u="perlin"===l.noiseType;nU.noiseSeed(l.seed);var c,d=SO((0,gO.default)(l.seed)),h=wj(l.strength,this.parameters.randomness),f=(0,x.Z)(this.children.entries());try{for(f.s();!(c=f.n()).done;){var p=o(c.value,2),v=p[0],m=p[1],g=v*(l.freqScale/10)+l.movement,L=u?nU.noise(g):d(g,g),y=v+1;m.scale.x=i.scale[0]+h(y,_j(L,l.scale[0]))||Hj,m.scale.y=i.scale[1]+h(y,_j(L,l.scale[1]))||Hj,m.scale.z=i.scale[2]+h(y,_j(L,l.scale[2]))||Hj,m.position.setScalar(0);var b=a/e.count*v-r;switch(i.axis){case"x":m.rotation.set(0,b,0);break;case"y":m.rotation.set(0,0,b);break;case"z":m.rotation.set(b,0,0)}m.translateOnAxis(n,i.radius),m.position.x+=i.position[0]+h(y,_j(L,l.position[0])),m.position.y+=i.position[1]+h(y,_j(L,l.position[1])),m.position.z+=i.position[2]+h(y,_j(L,l.position[2]));var w=h(y,_j(L,l.rotation[0])),_=h(y,_j(L,l.rotation[1])),S=h(y,_j(L,l.rotation[2]));!0===i.alignment?(m.rotation.x+=s.x+w,m.rotation.y+=s.y+_,m.rotation.z+=s.z+S):m.rotation.set(s.x+w,s.y+_,s.z+S)}}catch(k){f.e(k)}finally{f.f()}}},{key:"_updateLinear",value:function(e){var t;if("linear"!==e.type)throw new Error;var n=e.linear,i=new xp(n.rotation[0],n.rotation[1],n.rotation[2]),r=null!==(t=e.randomnessObject)&&void 0!==t?t:kT.defaultData([1,1,1]).randomnessObject,a="perlin"===r.noiseType;nU.noiseSeed(r.seed);var s,l=SO((0,gO.default)(r.seed)),u=wj(r.strength,this.parameters.randomness),c=(0,x.Z)(this.children.entries());try{for(c.s();!(s=c.n()).done;){var d=o(s.value,2),h=d[0],f=d[1],p=h*(r.freqScale/10)+r.movement,v=a?nU.noise(p):l(p,p),m=h+1,g=u(m,_j(v,r.rotation[0])),L=u(m,_j(v,r.rotation[1])),y=u(m,_j(v,r.rotation[2]));f.scale.x=1+(n.scale[0]-1)*h+u(m,_j(v,r.scale[0]))||Hj,f.scale.y=1+(n.scale[1]-1)*h+u(m,_j(v,r.scale[1]))||Hj,f.scale.z=1+(n.scale[2]-1)*h+u(m,_j(v,r.scale[2]))||Hj,f.rotation.x=i.x*h+g,f.rotation.y=i.y*h+L,f.rotation.z=i.z*h+y,f.position.x=n.position[0]*h+u(m,_j(v,r.position[0])),f.position.y=n.position[1]*h+u(m,_j(v,r.position[1])),f.position.z=n.position[2]*h+u(m,_j(v,r.position[2]))}}catch(b){c.e(b)}finally{c.f()}}},{key:"_updateGrid",value:function(e){var t,n=0,i=e.grid,r=null!==(t=e.randomnessObject)&&void 0!==t?t:kT.defaultData([1,1,1]).randomnessObject,a=wj(r.strength,this.parameters.randomness),o="perlin"===r.noiseType;nU.noiseSeed(r.seed);var s=function(){var e=kO(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random),t=new Float64Array(e).map((function(e){return _O[e%12*3]})),n=new Float64Array(e).map((function(e){return _O[e%12*3+1]})),i=new Float64Array(e).map((function(e){return _O[e%12*3+2]}));return function(r,a,o){var s,l,u,c,d,h,f,p,v,m,g=.3333333333333333*(r+a+o),L=xO(r+g),y=xO(a+g),b=xO(o+g),x=(L+y+b)*bO,w=r-(L-x),_=a-(y-x),S=o-(b-x);w>=_?_>=S?(d=1,h=0,f=0,p=1,v=1,m=0):w>=S?(d=1,h=0,f=0,p=1,v=0,m=1):(d=0,h=0,f=1,p=1,v=0,m=1):_<S?(d=0,h=0,f=1,p=0,v=1,m=1):w<S?(d=0,h=1,f=0,p=0,v=1,m=1):(d=0,h=1,f=0,p=1,v=1,m=0);var k=w-d+bO,A=_-h+bO,M=S-f+bO,C=w-p+2*bO,E=_-v+2*bO,T=S-m+2*bO,P=w-1+.5,D=_-1+.5,O=S-1+.5,I=255&L,R=255&y,B=255&b,N=.6-w*w-_*_-S*S;if(N<0)s=0;else{var z=I+e[R+e[B]];s=(N*=N)*N*(t[z]*w+n[z]*_+i[z]*S)}var F=.6-k*k-A*A-M*M;if(F<0)l=0;else{var j=I+d+e[R+h+e[B+f]];l=(F*=F)*F*(t[j]*k+n[j]*A+i[j]*M)}var U=.6-C*C-E*E-T*T;if(U<0)u=0;else{var Z=I+p+e[R+v+e[B+m]];u=(U*=U)*U*(t[Z]*C+n[Z]*E+i[Z]*T)}var V=.6-P*P-D*D-O*O;if(V<0)c=0;else{var G=I+1+e[R+1+e[B+1]];c=(V*=V)*V*(t[G]*P+n[G]*D+i[G]*O)}return 32*(s+l+u+c)}}((0,gO.default)(r.seed));if(!0===i.useCenter)for(var l={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},u=new Rf(i.size[0]*(i.count[0]-l.x)*.5,i.size[1]*(i.count[1]-l.y)*.5,i.size[2]*(i.count[2]-l.z)*.5),c=0;c<i.count[0];c++)for(var d=0;d<i.count[1];d++)for(var h=0;h<i.count[2];h++){var f=[(c+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement,(h+1)*(r.freqScale/10)+r.movement],p=o?nU.noise.apply(nU,f):s.apply(void 0,f),v=this.children[n++];v.scale.x=1+a(n,_j(p,r.scale[0]))||Hj,v.scale.y=1+a(n,_j(p,r.scale[1]))||Hj,v.scale.z=1+a(n,_j(p,r.scale[2]))||Hj;var m=a(n,_j(p,r.rotation[0])),g=a(n,_j(p,r.rotation[1])),L=a(n,_j(p,r.rotation[2]));v.rotation.set(m,g,L),v.position.x=i.size[0]*c-u.x+a(n,_j(p,r.position[0])),v.position.y=i.size[1]*d-u.y+a(n,_j(p,r.position[1])),v.position.z=i.size[2]*h-u.z+a(n,_j(p,r.position[2]))}else for(var y=0;y<i.count[0];y++)for(var b=0;b<i.count[1];b++)for(var x=0;x<i.count[2];x++){var w=[(y+1)*(r.freqScale/10)+r.movement,(b+1)*(r.freqScale/10)+r.movement,(x+1)*(r.freqScale/10)+r.movement],_=o?nU.noise.apply(nU,w):s.apply(void 0,w),S=this.children[n++];S.scale.x=1+a(n,_j(_,r.scale[0]))||Hj,S.scale.y=1+a(n,_j(_,r.scale[1]))||Hj,S.scale.z=1+a(n,_j(_,r.scale[2]))||Hj;var k=a(n,_j(_,r.rotation[0])),A=a(n,_j(_,r.rotation[1])),M=a(n,_j(_,r.rotation[2]));S.rotation.set(k,A,M),S.position.x=i.size[0]*y+a(n,_j(_,r.position[0])),S.position.y=-i.size[1]*b+a(n,_j(_,r.position[1])),S.position.z=-i.size[2]*x+a(n,_j(_,r.position[2]))}}},{key:"_updateToObject",value:function(e){var t,n;if("toObject"!==e.type)throw new Error;var i=e.toObject,r=new xp(i.rotation[0],i.rotation[1],i.rotation[2]),a=null!==(t=e.randomnessObject)&&void 0!==t?t:kT.defaultData([1,1,1]).randomnessObject,s="perlin"===a.noiseType;nU.noiseSeed(a.seed);var l=SO((0,gO.default)(a.seed)),u=wj(a.strength,this.parameters.randomness);if(i.object){if(this.objectForSample){if(this.objectForSample instanceof Gj){if(null===(n=this.objectForSample.font)||void 0===n||!n.isLoaded||void 0===this.objectForSample.geometry.attributes.position)return void(this._pendingMediaLoad=!0);this._pendingMediaLoad=!1}if(void 0===this.objectForSample.geometry&&this.objectForSample.isAncestorOf(this.object.uuid))console.warn('Oh no! The object "'.concat(this.object.name,'" (').concat(this.object.uuid,") seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead."));else{var c=this.getSubdivData(),d=[],h=function(e){var t=e.length,n=e.map((function(e){return e[0]})).reduce((function(e,t){return e+t}),0),i=e.map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0),r=e.map((function(e){return e[2]})).reduce((function(e,t){return e+t}),0);return[n/t,i/t,r/t]},f=function(e){return Math.round(1e6*e)/1e6};c.forEach((function(e){var t=c.filter((function(t){return f(e.pos[0])===f(t.pos[0])&&f(e.pos[1])===f(t.pos[1])&&f(e.pos[2])===f(t.pos[2])}));t.length>1?d.push({pos:e.pos,norm:h(t.map((function(e){return e.norm})))}):d.push(e)}));var p=function(e){for(var t=[],n={},i=0,r=e.length;i<r;i++){var a=JSON.stringify(e[i].pos.map((function(e){return Math.round(1e4*e)/1e4})));n[a]||(t.push(e[i]),n[a]=!0)}return t}(d);if(c.length>0){var v=Math.round(p.length*i.count/100);this._updateCount(v)}this.objectForSample.updateMatrixWorld();var m=new CO(this.objectForSample).build(),g=bj[i.axis],L=this.children;m.setRandomGenerator((0,gO.default)(this.object.uuid+i.seed));var y,b=(0,x.Z)(L.entries());try{for(b.s();!(y=b.n()).done;){var w=o(y.value,2),_=w[0],S=w[1],k=_*(a.freqScale/10)+a.movement,A=s?nU.noise(k):l(k,k),M=_+1,C=u(M,_j(A,a.rotation[0])),E=u(M,_j(A,a.rotation[1])),T=u(M,_j(A,a.rotation[2]));"random"===i.spreadType?m.sample(Jj,$j):(p.length&&(Jj.fromArray(p[_].pos),$j.fromArray(p[_].norm)),this.objectForSample instanceof yj&&Jj.applyMatrix4(Xj.copy(this.objectForSample.matrixWorld).invert())),Jj.applyMatrix4(this.object.hiddenMatrix.clone().invert()),S.position.copy(Jj),Qj.fromArray(g);var P="normal"===i.align?$j:this.object.getWorldDirection(tU),D=Kj.fromArray(i.position);Kj.x+=Kj.x+u(M,_j(A,a.position[0])),Kj.y+=Kj.y+u(M,_j(A,a.position[1])),Kj.z+=Kj.z+u(M,_j(A,a.position[2]));var O=Math.acos(P.dot(Qj)),I=eU.crossVectors(Qj,P).normalize(),R=Yj.makeRotationAxis(I,O),B=P.clone().cross(this.object.up).normalize(),N=B.clone().cross(P).normalize(),z=(new dp).makeBasis(B,P,N),F=new Rf(Qj.y,Qj.z,Qj.x).normalize(),j=F.clone().cross(Qj).normalize(),U=(new dp).makeBasis(F,Qj,j).invert(),Z=(new dp).multiplyMatrices(z,U);S.rotation.setFromRotationMatrix(Z),D.applyMatrix4(R),S.position.add(D),S.rotation.x=S.rotation.x+r.x+C,S.rotation.y=S.rotation.y+r.y+E,S.rotation.z=S.rotation.z+r.z+T,S.scale.setScalar(1),S.scale.x=S.scale.x+i.scale[0]+u(M,_j(A,a.scale[0]))||Hj,S.scale.y=S.scale.y+i.scale[1]+u(M,_j(A,a.scale[1]))||Hj,S.scale.z=S.scale.z+i.scale[2]+u(M,_j(A,a.scale[2]))||Hj,S.scale.multiply(this.object.scale),S.hiddenMatrix=this.object.hiddenMatrix}}catch(W){b.e(W)}finally{b.f()}}}}else{var V,G=(0,x.Z)(this.children.entries());try{for(G.s();!(V=G.n()).done;){var H=o(V.value,2)[1];H.position.set(0,0,0),H.scale.setScalar(1),H.rotation.set(0,0,0)}}catch(W){G.e(W)}finally{G.f()}this.objectForSample=void 0}}},{key:"getSubdivData",value:function(){if(!this.objectForSample)return[];var e=this.parameters.toObject.spreadType;if("random"===e)return[];if(this.objectForSample instanceof yj){for(var t=this.objectForSample,n=xj[e],i=Vj[n],r=Uj[n],a=Zj[n],o=[],s=i(t.subdivPointerNew),l=0;l<=s-1;l++){var u=r(t.subdivPointerNew,l),c=a(t.subdivPointerNew,l);Wj.fromArray(u).applyMatrix4(t.matrixWorld),qj.fromArray(c),o.push({pos:Wj.toArray(),norm:qj.toArray()})}return o}return(this.objectForSample.geometry.index?function(e){for(var t=[],n=0;n<=e.index.count;n++)if(Tj.fromArray(e.index.array,3*n),Ej.setFromAttributeAndIndices(e.attributes.position,Tj.x,Tj.y,Tj.z),Ej.getNormal(Pj),Ej.getMidpoint(Dj),!(isNaN(Dj.x)||isNaN(Dj.y)||isNaN(Dj.z))){var i=Ej.a,r=Ej.b,a=Ej.c,o=i.toArray(),s=r.toArray(),l=a.toArray(),u=i.distanceTo(r),c=r.distanceTo(a),d=a.distanceTo(i),h=Cj(o,s),f=Cj(s,l),p=Cj(l,o),v=[u,c,d],m=Math.max.apply(Math,v),g=v.filter((function(e){return Math.round(e)===Math.round(m)})).length>1,L=[],y=Ej.getMidpoint(Dj).toArray();m===u&&!g&&(L=[f,p,p],y=h),m===c&&!g&&(L=[h,p,p],y=f),m===d&&!g&&(L=[h,f,f],y=p),g&&(L=[h,f,p]),t.push({vertices:[o,s,l],faceCenters:L,midpoint:y,norm:Ej.getNormal(Pj).toArray()})}return t}(this.objectForSample.geometry):function(e){for(var t=[],n=e.attributes.position,i=0;i<n.count;i++){Ej.setFromAttributeAndIndices(n,3*i,3*i+1,3*i+2),Ej.getNormal(Pj),Ej.getMidpoint(Dj);var r=Ej.a.toArray(),a=Ej.b.toArray(),o=Ej.c.toArray();t.push({vertices:[r,a,o],faceCenters:[Cj(r,a),Cj(a,o),Cj(o,r)],midpoint:Dj.toArray(),norm:Pj.toArray()})}return t}(this.objectForSample.geometry)).map((function(t,n){return"polygon_center"===e?{pos:t.midpoint,norm:t.norm}:"vertex"===e?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:"edge"===e?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]})).flat()}},{key:"updateState",value:function(e,t){var n;if(this.parameters=kA(e),"toObject"!==this.parameters.type)(null===this.parent||this.parent!==this.object)&&(this.removeFromParent(),null!==(n=this.object.parent)&&void 0!==n&&n.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(null===this.parent||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();var i=t.find(this.parameters.toObject.object);this.objectForSample=i instanceof yN?i:void 0,this.matrix=new dp,this.hiddenMatrix=new dp,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}},{key:"pendingMediaLoad",get:function(){return this._pendingMediaLoad}}]),n}(IO(Bp)),rU=function(e){var t;return t=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(e),t.geometryHelper=new Av(30,30,30),t},aU=new cp,oU=new np,sU=new dp,lU=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t,o=e.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),oU.copy(a.boundingSphere),oU.applyMatrix4(o),!1!==n.ray.intersectsSphere(oU)&&(sU.copy(o).invert(),aU.copy(n.ray).applyMatrix4(sU),null===a.boundingBox||!1!==aU.intersectsBox(a.boundingBox))){var s,l,u,c,d,h,f=a.index,p=a.attributes.position,v=a.drawRange;if(!1===r){for(d=Math.max(0,v.start),h=Math.min(f.count,v.start+v.count);d<h;d+=3)if(l=f.getX(d),u=f.getX(d+1),c=f.getX(d+2),s=A(e,n,aU,p,l,u,c))return s.faceIndex=Math.floor(d/3),void i.push(s)}else for(var m=a.attributes.position,g=new Rf,L=new Rf,y=new Rf,b=new Rf,x=1/((e.scale.x+e.scale.y+e.scale.z)/3),w=x*x,_=Math.max(0,v.start),S=Math.min(m.count,v.start+v.count)-1;_<S;_+=2)if(g.fromBufferAttribute(m,_),L.fromBufferAttribute(m,_+1),!(aU.distanceSqToSegment(g,L,b,y)>w)){b.applyMatrix4(e.matrixWorld);var k=n.ray.origin.distanceTo(b);k<n.near||k>n.far||i.push({distance:k,point:y.clone().applyMatrix4(e.matrixWorld),object:e})}}function A(e,t,n,i,r,a,o){var s=new Rf,l=new Rf,u=new Rf,c=new Rf,d=new Rf;if(s.fromBufferAttribute(i,r),l.fromBufferAttribute(i,a),u.fromBufferAttribute(i,o),null===n.intersectTriangle(s,l,u,!1,c))return null;d.copy(c),d.applyMatrix4(e.matrixWorld);var h=t.ray.origin.distanceTo(d);return h<t.near||h>t.far?null:{faceIndex:1,distance:h,point:d.clone(),object:e}}},uU=new Rf,cU=new Dv,dU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n);var r=new cv,a=new NL({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={},u=new wf(15711266),d=new wf(15711266),h=new wf(2857471);function f(e,t,n){p(e,n),p(t,n)}function p(e,t){o.push(0,0,0),s.push(t.r,t.g,t.b),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}return f("n1","n2",u),f("n2","n4",u),f("n4","n3",u),f("n3","n1",u),f("f1","f2",u),f("f2","f4",u),f("f4","f3",u),f("f3","f1",u),f("n1","f1",u),f("n2","f2",u),f("n3","f3",u),f("n4","f4",u),f("p","n1",d),f("p","n2",d),f("p","n3",d),f("p","n4",d),f("u1","u2",h),f("u2","u3",h),f("u3","u1",h),r.setAttribute("position",new nv(o,3)),r.setAttribute("color",new nv(s,3)),(i=t.call(this,r,a)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update(),i}return(0,d.Z)(n,[{key:"update",value:function(){var e=this.geometry,t=this.pointMap;cU.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];var n=.8;hU("n1",t,e,cU,-1,-1,n),hU("n2",t,e,cU,1,-1,n),hU("n3",t,e,cU,-1,1,n),hU("n4",t,e,cU,1,1,n);var i=n;hU("f1",t,e,cU,-1,-1,i),hU("f2",t,e,cU,1,-1,i),hU("f3",t,e,cU,-1,1,i),hU("f4",t,e,cU,1,1,i);hU("u1",t,e,cU,.35,1.1,.8),hU("u2",t,e,cU,-.35,1.1,.8),hU("u3",t,e,cU,0,1.55,.8),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(WL);function hU(e,t,n,i,r,a,o){uU.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],uU.x,uU.y,uU.z)}var fU,pU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).object=e,i.object=e,i.name="CombinedCameraHelper: ".concat(e.uuid),i}return(0,d.Z)(n,[{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.updateTarget()}},{key:"updateTarget",value:function(){var e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}},{key:"raycast",value:function(e,t){lU(this.object,this.geometry,e,t,!0)}}]),n}(rU(dU));!function(e){e.is=function(e){return"objectHelper"in e}}(fU||(fU={}));var vU=function(e,t){return function(e){(0,h.Z)(i,e);var n=(0,f.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=n.apply(this,arguments)).objectHelper=new t((0,Ye.Z)(e)),e.gizmos={},e}return(0,d.Z)(i,[{key:"geometryHelper",get:function(){return t.geometryHelper}},{key:"raycast",value:function(e,t){this.objectHelper.raycast(e,t)}},{key:"showGizmos",value:function(){for(var e in this.gizmos){var t=this.gizmos[e];t instanceof Cx&&(t.visible=!0)}}},{key:"updateEntityBoxSize",value:function(e,t){this.objectHelper.visible&&this.geometryHelper instanceof Av?(e.setScalar(0),t.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):Au((0,p.Z)(i.prototype),"updateEntityBoxSize",this).call(this,e,t)}},{key:"hideGizmos",value:function(){for(var e in this.gizmos){var t=this.gizmos[e];t instanceof Cx&&(t.visible=!1)}}}]),i}($O(e))},mU=new Rf,gU=new Rf,LU=new If,yU=new Rf,bU=new Rf,xU=new Rf,wU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e($e({},LP.defaultData),{},{name:""});(0,c.Z)(this,n),(e=t.call(this))._cameraType="OrthographicCamera",e.targetOffset=ST.DefaultTargetOffset,e.isUpVectorFlipped=!1,e.angleOffsetFromUp=0,e.wasMovedByUser=!1,e.wasMovedBySwitchCameraAction=!1,e.super_Entity(i,r),e.previousProjectionMatrix=new dp,e.matrixAutoUpdate=!0,e.width=window.innerWidth,e.height=window.innerHeight;var a=e.width,o=e.height;return e.orthoCamera=new rm(-.5*a,.5*a,.5*o,-.5*o,-5e4,1e4),e.perspCamera=new Ov(45,a/o,50,1e4),e.left=e.orthoCamera.left,e.right=e.orthoCamera.right,e.top=e.orthoCamera.top,e.bottom=e.orthoCamera.bottom,e.far=e.orthoCamera.far,e.view=e.orthoCamera.view,e.aspect=e.perspCamera.aspect,e.focus=e.perspCamera.focus,e.filmGauge=e.perspCamera.filmGauge,e.filmOffset=e.perspCamera.filmOffset,e.objectHelper.update(),e}return(0,d.Z)(n,[{key:"isPerspectiveCamera",get:function(){return"PerspectiveCamera"===this.cameraType}},{key:"isOrthographicCamera",get:function(){return!this.isPerspectiveCamera}},{key:"cameraType",get:function(){return this._cameraType},set:function(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}},{key:"fov",get:function(){return this.perspCamera.fov},set:function(e){this.perspCamera.fov=e}},{key:"setNear",value:function(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}},{key:"setZoom",value:function(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}},{key:"near",get:function(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near},set:function(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}},{key:"zoom",get:function(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom},set:function(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}},{key:"lookAt",value:function(e,t,i){"number"==typeof e&&(e=new Rf(e,t,i)),Au((0,p.Z)(n.prototype),"lookAt",this).call(this,e),this.getWorldPosition(mU),this.targetOffset=mU.distanceTo(e)}},{key:"getTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf;return this.getWorldDirection(gU),this.getWorldPosition(mU),gU.multiplyScalar(this.targetOffset),e.copy(mU).add(gU),e}},{key:"getDistanceToTarget",value:function(){var e=this.getTarget();return this.getWorldPosition(mU),mU.distanceTo(e)}},{key:"updateUp",value:function(){this.getWorldQuaternion(LU),yU.set(0,0,1).applyQuaternion(LU),bU.copy(Bp.DEFAULT_UP),this.isUpVectorFlipped&&bU.negate(),bU.applyQuaternion(LU),xU.copy(Bp.DEFAULT_UP).projectOnPlane(yU),this.angleOffsetFromUp=xU.angleTo(bU),this.angleOffsetFromUp*=xU.cross(bU).dot(yU)>=0?1:-1}},{key:"updateTransformState",value:function(e){var t=Au((0,p.Z)(n.prototype),"updateTransformState",this).call(this,e);return void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}},{key:"getViewFrontToObject",value:function(e){var t=e.getWorldPosition(new Rf),n=e.getWorldDirection(new Rf).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}},{key:"getViewToTarget",value:function(e){var t=this.getWorldDirection(new Rf).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}},{key:"getViewToObject",value:function(e){var t=new Rf;e.getWorldPosition(t);return this.getViewToTarget(t)}},{key:"setViewplaneSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.aspect=e/t,n){var i=e>t?this.aspect:1,r=e>t?1:this.aspect;this.left=-395*i,this.right=395*i,this.top=1/r*395,this.bottom=1/r*-395}else this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t;this.updateProjectionMatrix()}},{key:"copyViewPlaneSize",value:function(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}},{key:"toOrthographic",value:function(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}},{key:"toPerspective",value:function(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}},{key:"setFocalLength",value:function(e){this.perspCamera.setFocalLength(e),this.toPerspective()}},{key:"getFocalLength",value:function(){return this.perspCamera.getFocalLength()}},{key:"getEffectiveFOV",value:function(){return this.perspCamera.getEffectiveFOV()}},{key:"getFilmWidth",value:function(){return this.perspCamera.getFilmWidth()}},{key:"getFilmHeight",value:function(){return this.perspCamera.getFilmHeight()}},{key:"setViewOffset",value:function(e,t,n,i,r,a){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,n,i,r,a):this.orthoCamera.setViewOffset(e,t,n,i,r,a)}},{key:"clearViewOffset",value:function(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}},{key:"copyHistory",value:function(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}},{key:"updateProjectionMatrix",value:function(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Au((0,p.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"copy",value:function(e,t){return Au((0,p.Z)(n.prototype),"copy",this).call(this,e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}},{key:"toCameraState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return aM(t,e)}},{key:"updateCameraSubtype",value:function(e,t){var n="perspective"===e?"PerspectiveCamera":"OrthographicCamera";void 0!==t.zoom&&this.setZoom(n,t.zoom),void 0!==t.near&&this.setNear(n,t.near),void 0!==t.fov&&"PerspectiveCamera"===n&&(this.fov=t.fov)}},{key:"updateState",value:function(e,t){this.updateCameraState(e,t)}},{key:"updateCameraState",value:function(e,t){this.updateState_Entity(e,t),void 0!==e.far&&(this.far=e.far),void 0!==e.orthographic&&this.updateCameraSubtype("orthographic",e.orthographic),void 0!==e.perspective&&this.updateCameraSubtype("perspective",e.perspective),void 0!==e.type&&(this.cameraType=e.type),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}},{key:"updateByPatchedOp",value:function(e,t,i){Au((0,p.Z)(n.prototype),"updateByPatchedOp",this).call(this,e,t,i),1===e.path.length&&0===e.type&&this.updateCameraSubtype(e.path[0],e.props)}},{key:"toState",value:function(e){return $e($e($e({},Au((0,p.Z)(n.prototype),"toState",this).call(this,e)),this.toCameraState(e)),{},{type:this.cameraType})}}]),n}(vU(Dv,pU)),_U=new dp,SU=new dp;function kU(e){var t=!1;return e.scene.objects.traverse((function(e,n){var i;"BooleanGeometry"===(null===(i=n.geometry)||void 0===i?void 0:i.type)&&(t=!0)})),t}var AU,MU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a,o;return(0,c.Z)(this,n),(o=t.call(this,e,i)).data=i,o.meshSetAddresses=[],o.needsTransformForDownstream=!1,o.geometry=new cv,o.onAfterRender=function(e,t,i,r,s,l){Au((a=(0,Ye.Z)(o),(0,p.Z)(n.prototype)),"onAfterRender",a).call(a,e,t,i,r,s,l),o.recomputeBoolean()},o.geometry.userData.parameters={width:0,height:0,depth:0},o}return(0,d.Z)(n,[{key:"booleanOp",get:function(){return this.data.geometry.operation}},{key:"phongAngle",get:function(){var e;return null!==(e=this.data.geometry.phongAngle)&&void 0!==e?e:45}},{key:"isLOD",get:function(){return this.recomputeBoolean(),!1}},{key:"updateByPatchedOp",value:function(e,t,i){Au((0,p.Z)(n.prototype),"updateByPatchedOp",this).call(this,e,t,i),1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&void 0!==e.props.operation&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}},{key:"freeBooleanPointer",value:function(){Au((0,p.Z)(n.prototype),"freeBooleanPointer",this).call(this),this.geometry.dispose()}},{key:"recomputeBoolean",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(-1===this.booleanMeshSetAddress||e){for(var i=0;i<this.children.length;i++){var r=this.children[i];r instanceof n&&!0===r.dataPatched.visible&&r.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(var a=0;a<this.children.length;a++){var o,s=this.children[a];if(s instanceof yN&&!0===s.dataPatched.visible&&(null===(o=s.geometry.attributes.position)||void 0===o?void 0:o.count)>0&&s.geometry.drawRange.count>0){if(_U.multiplyMatrices(s.hiddenMatrix,s.matrix),-1===s.booleanMeshSetAddress){var l;if((null!==(l=s.geometry.index)&&void 0!==l?l:s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=QB.getMeshSet(s.geometry,!0===e,t)),-1===s.booleanMeshSetAddress)return;QB.transformMeshSet(s.booleanMeshSetAddress,_U),s.booleanMatrixInvOld.copy(_U).invert(),s.booleanWasTransformed=!1}else s instanceof n&&!0===s.needsTransformForDownstream?(QB.transformMeshSet(s.booleanMeshSetAddress,_U),s.needsTransformForDownstream=!1):!0===s.booleanWasTransformed&&(QB.transformMeshSet(s.booleanMeshSetAddress,SU.multiplyMatrices(_U,s.booleanMatrixInvOld)),s.booleanMatrixInvOld.copy(_U).invert(),s.booleanWasTransformed=!1);!1===QB.hasOpenEdges(s.booleanMeshSetAddress)||a===this.children.length-1&&2===this.booleanOp?(this.meshSetAddresses.push(s.booleanMeshSetAddress),s.geometry.userData.wasFilteredFromBoolean=!1):s.geometry.userData.wasFilteredFromBoolean=!0}}if(0===this.meshSetAddresses.length)return this.geometry.setAttribute("position",new nv([],0)),void this.geometry.setDrawRange(0,0);if(!0===e)return QB.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);var u=this.geometry;u.dispose(),this.geometry=new cv,this.geometry.userData=u.userData,this.geometry.boundingSphere=u.boundingSphere;try{this.booleanMeshSetAddress=QB.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(i){this.booleanMeshSetAddress=0,console.error(i)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,pj(this),vj(this)}}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this),this.geometry.dispose()}}]),n}(sj);!function(e){e.is=function(e){return OO.is(e)&&e instanceof Ab}}(AU||(AU={}));var CU=function(e,t){return function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"updateState_Light",value:function(e,t){this.updateState_Entity(e,t),void 0!==e.color&&(this.color=t.shared.color(e.color)),void 0!==e.intensity&&(this.intensity=e.intensity),void 0!==e.depth&&(this.shadow.camera.far=e.depth,this.shadow.needsUpdate=!0),void 0!==e.shadows&&(this.castShadow=e.shadows)}}]),n}(vU(e,t))},EU=function(e){return e instanceof yN},TU=function(e){return null!==e&&e instanceof MU},PU=function(e){return fU.is(e)},DU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(0,c.Z)(this,n),(i=t.call(this,r)).object=e,i.object.updateMatrixWorld(),i.name="EmptyObjectHelper: ".concat(e.uuid),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.object.isBone&&(i.visible=!1),i}return(0,d.Z)(n,[{key:"raycast",value:function(e,t){lU(this.object,n.geometryHelper,e,t)}},{key:"update",value:function(){}}]),n}(rU(Ex)),OU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).super_Entity(e,i),r.objectHelper.update(),r}return(0,d.Z)(n,[{key:"updateState",value:function(e,t){this.updateState_Entity(e,t)}}]),n}(vU(gL,DU)),IU=Xv.lights_fragment_begin,RU=Xv.shadowmask_pars_fragment,BU=null,NU=new Pv({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n\nvoid main()\n{\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}}),zU=0,FU=1,jU="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",UU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,c.Z)(this,n),(e=t.call(this,{name:"BokehMaterial",defines:{PASS:i?"2":"1"},uniforms:{kernel64:new sx(null),kernel16:new sx(null),inputBuffer:new sx(null),cocBuffer:new sx(null),texelSize:new sx(new af),scale:new sx(1)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:jU})).toneMapped=!1,r&&(e.defines.FOREGROUND="1"),e.generateKernel(),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"cocBuffer",set:function(e){this.uniforms.cocBuffer.value=e}},{key:"setCoCBuffer",value:function(e){this.uniforms.cocBuffer.value=e}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(e){return this.uniforms.scale.value=e}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"generateKernel",value:function(){for(var e=new Float32Array(128),t=new Float32Array(32),n=0,i=0,r=0;r<80;++r){var a=2.39996323*r,o=Math.sqrt(r)/Math.sqrt(80),s=o*Math.cos(a),l=o*Math.sin(a);r%5===0?(t[i++]=s,t[i++]=l):(e[n++]=s,e[n++]=l)}for(var u=[],c=[],d=0;d<128;)u.push(new Ef(e[d++],e[d++],e[d++],e[d++]));for(var h=0;h<32;)c.push(new Ef(t[h++],t[h++],t[h++],t[h++]));this.uniforms.kernel64.value=u,this.uniforms.kernel16.value=c}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t)}},{key:"setSize",value:function(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}]),n}(Pv);function ZU(e,t,n){return e*(t-n)-t}function VU(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var GU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,{name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new sx(null),focusDistance:new sx(0),focusRange:new sx(0),cameraNear:new sx(.3),cameraFar:new sx(1e3)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:jU})).toneMapped=!1,i.uniforms.focalLength=i.uniforms.focusRange,i.adoptCameraSettings(e),i}return(0,d.Z)(n,[{key:"near",get:function(){return this.uniforms.cameraNear.value}},{key:"far",get:function(){return this.uniforms.cameraFar.value}},{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.depthBuffer=e,this.depthPacking=t}},{key:"focusDistance",get:function(){return this.uniforms.focusDistance.value},set:function(e){this.uniforms.focusDistance.value=e}},{key:"worldFocusDistance",get:function(){return-ZU(this.focusDistance,this.near,this.far)},set:function(e){this.focusDistance=VU(-e,this.near,this.far)}},{key:"getFocusDistance",value:function(e){this.uniforms.focusDistance.value=e}},{key:"setFocusDistance",value:function(e){this.uniforms.focusDistance.value=e}},{key:"focalLength",get:function(){return this.focusRange},set:function(e){this.focusRange=e}},{key:"focusRange",get:function(){return this.uniforms.focusRange.value},set:function(e){this.uniforms.focusRange.value=e}},{key:"worldFocusRange",get:function(){return-ZU(this.focusRange,this.near,this.far)},set:function(e){this.focusRange=VU(-e,this.near,this.far)}},{key:"getFocalLength",value:function(e){return this.focusRange}},{key:"setFocalLength",value:function(e){this.focusRange=e}},{key:"adoptCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ov?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}}]),n}(Pv),HU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af;return(0,c.Z)(this,n),(e=t.call(this,{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new sx(null),texelSize:new sx(new af),halfTexelSize:new sx(new af),kernel:new sx(0),scale:new sx(1)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"})).toneMapped=!1,e.setTexelSize(i.x,i.y),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.inputBuffer=e}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(){return this.uniforms.scale.value}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"getKernel",value:function(){return null}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e}},{key:"setKernel",value:function(e){this.kernel=e}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},{key:"setSize",value:function(e,t){var n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}}]),n}(Pv),WU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,{name:"CopyMaterial",uniforms:{inputBuffer:new sx(null),opacity:new sx(1)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:jU})).toneMapped=!1,e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}]),n}(Pv),qU=2,XU=0,YU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qU;return(0,c.Z)(this,n),(e=t.call(this,{name:"EdgeDetectionMaterial",defines:{THREE_REVISION:hc.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new sx(null),depthBuffer:new sx(null),predicationBuffer:new sx(null),texelSize:new sx(i)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"})).toneMapped=!1,e.edgeDetectionMode=r,e}return(0,d.Z)(n,[{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.depthBuffer=e,this.depthPacking=t}},{key:"edgeDetectionMode",get:function(){return Number(this.defines.EDGE_DETECTION_MODE)},set:function(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getEdgeDetectionMode",value:function(){return this.edgeDetectionMode}},{key:"setEdgeDetectionMode",value:function(e){this.edgeDetectionMode=e}},{key:"localContrastAdaptationFactor",get:function(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)},set:function(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}},{key:"getLocalContrastAdaptationFactor",value:function(){return this.localContrastAdaptationFactor}},{key:"setLocalContrastAdaptationFactor",value:function(e){this.localContrastAdaptationFactor=e}},{key:"edgeDetectionThreshold",get:function(){return Number(this.defines.EDGE_THRESHOLD)},set:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}},{key:"getEdgeDetectionThreshold",value:function(){return this.edgeDetectionThreshold}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionThreshold=e}},{key:"predicationMode",get:function(){return Number(this.defines.PREDICATION_MODE)},set:function(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getPredicationMode",value:function(){return this.predicationMode}},{key:"setPredicationMode",value:function(e){this.predicationMode=e}},{key:"predicationBuffer",set:function(e){this.uniforms.predicationBuffer.value=e}},{key:"setPredicationBuffer",value:function(e){this.uniforms.predicationBuffer.value=e}},{key:"predicationThreshold",get:function(){return Number(this.defines.PREDICATION_THRESHOLD)},set:function(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationThreshold",value:function(){return this.predicationThreshold}},{key:"setPredicationThreshold",value:function(e){this.predicationThreshold=e}},{key:"predicationScale",get:function(){return Number(this.defines.PREDICATION_SCALE)},set:function(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationScale",value:function(){return this.predicationScale}},{key:"setPredicationScale",value:function(e){this.predicationScale=e}},{key:"predicationStrength",get:function(){return Number(this.defines.PREDICATION_STRENGTH)},set:function(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationStrength",value:function(){return this.predicationStrength}},{key:"setPredicationStrength",value:function(e){this.predicationStrength=e}},{key:"setSize",value:function(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}]),n}(Pv),QU={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},KU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,c.Z)(this,n),(o=t.call(this,{name:"EffectMaterial",defines:{THREE_REVISION:hc.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new sx(null),depthBuffer:new sx(null),resolution:new sx(new af),texelSize:new sx(new af),cameraNear:new sx(.3),cameraFar:new sx(1e3),aspect:new sx(1),time:new sx(0)},blending:Ac,depthWrite:!1,depthTest:!1,dithering:s})).toneMapped=!1,e&&o.setShaderParts(e),i&&o.setDefines(i),r&&o.setUniforms(r),o.adoptCameraSettings(a),o}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"depthBuffer",get:function(){return this.uniforms.depthBuffer.value},set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",get:function(){return Number(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.depthBuffer=e,this.depthPacking=t}},{key:"setShaderParts",value:function(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(QU.FRAGMENT_HEAD,e.get(QU.FRAGMENT_HEAD)).replace(QU.FRAGMENT_MAIN_UV,e.get(QU.FRAGMENT_MAIN_UV)).replace(QU.FRAGMENT_MAIN_IMAGE,e.get(QU.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(QU.VERTEX_HEAD,e.get(QU.VERTEX_HEAD)).replace(QU.VERTEX_MAIN_SUPPORT,e.get(QU.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}},{key:"setDefines",value:function(e){var t,n=(0,x.Z)(e.entries());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.defines[i[0]]=i[1]}}catch(r){n.e(r)}finally{n.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function(e){var t,n=(0,x.Z)(e.entries());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.uniforms[i[0]]=i[1]}}catch(r){n.e(r)}finally{n.f()}return this}},{key:"setExtensions",value:function(e){this.extensions={};var t,n=(0,x.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.extensions[i]=!0}}catch(r){n.e(r)}finally{n.f()}return this}},{key:"encodeOutput",get:function(){return void 0!==this.defines.ENCODE_OUTPUT},set:function(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function(e){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function(e){this.encodeOutput=e}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.time.value+=e}},{key:"adoptCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ov?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function(e,t){var n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}}],[{key:"Section",get:function(){return QU}}]),n}(Pv),JU=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.Z)(this,n),(e=t.call(this,{name:"LuminanceMaterial",defines:{THREE_REVISION:hc.replace(/\D+/g,"")},uniforms:{inputBuffer:new sx(null),threshold:new sx(0),smoothing:new sx(1),range:new sx(null)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:jU})).toneMapped=!1,e.colorOutput=i,e.luminanceRange=r,e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}},{key:"getThreshold",value:function(){return this.threshold}},{key:"setThreshold",value:function(e){this.threshold=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}},{key:"getSmoothingFactor",value:function(){return this.smoothing}},{key:"setSmoothingFactor",value:function(e){this.smoothing=e}},{key:"useThreshold",get:function(){return this.threshold>0||this.smoothing>0},set:function(e){}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function(e){return this.colorOutput}},{key:"setColorOutputEnabled",value:function(e){this.colorOutput=e}},{key:"useRange",get:function(){return null!==this.luminanceRange},set:function(e){this.luminanceRange=null}},{key:"luminanceRange",get:function(){return this.uniforms.range.value},set:function(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function(){return this.luminanceRange}},{key:"setLuminanceRange",value:function(e){this.luminanceRange=e}}]),n}(Pv),$U=0,eZ=1,tZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,c.Z)(this,n),(e=t.call(this,{name:"MaskMaterial",uniforms:{maskTexture:new sx(i),inputBuffer:new sx(null),strength:new sx(1)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:jU})).toneMapped=!1,e.setColorChannel(zU),e.setMaskFunction($U),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"maskTexture",set:function(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==kd&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}},{key:"setMaskTexture",value:function(e){this.maskTexture=e}},{key:"colorChannel",set:function(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}},{key:"setColorChannel",value:function(e){this.colorChannel=e}},{key:"maskFunction",set:function(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}},{key:"setMaskFunction",value:function(e){this.maskFunction=e}},{key:"inverted",get:function(){return void 0!==this.defines.INVERTED},set:function(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"strength",get:function(){return this.uniforms.strength.value},set:function(e){this.uniforms.strength.value=e}},{key:"getStrength",value:function(){return this.strength}},{key:"setStrength",value:function(e){this.strength=e}}]),n}(Pv),nZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new af,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new af;return(0,c.Z)(this,n),(e=t.call(this,{name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new sx(null),searchTexture:new sx(null),areaTexture:new sx(null),resolution:new sx(r),texelSize:new sx(i)},blending:Ac,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"})).toneMapped=!1,e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"searchTexture",get:function(){return this.uniforms.searchTexture.value},set:function(e){this.uniforms.searchTexture.value=e}},{key:"areaTexture",get:function(){return this.uniforms.areaTexture.value},set:function(e){this.uniforms.areaTexture.value=e}},{key:"setLookupTextures",value:function(e,t){this.searchTexture=e,this.areaTexture=t}},{key:"orthogonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_INT)},set:function(e){var t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}},{key:"setOrthogonalSearchSteps",value:function(e){this.orthogonalSearchSteps=e}},{key:"diagonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)},set:function(e){var t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function(e){this.diagonalSearchSteps=e}},{key:"diagonalDetection",get:function(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"isDiagonalDetectionEnabled",value:function(){return this.diagonalDetection}},{key:"setDiagonalDetectionEnabled",value:function(e){this.diagonalDetection=e}},{key:"cornerRounding",get:function(){return Number(this.defines.CORNER_ROUNDING)},set:function(e){var t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function(e){this.cornerRounding=e}},{key:"cornerDetection",get:function(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},{key:"isCornerRoundingEnabled",value:function(){return this.cornerDetection}},{key:"setCornerRoundingEnabled",value:function(e){this.cornerDetection=e}},{key:"setSize",value:function(e,t){var n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.resolution.value.set(e,t)}}]),n}(Pv),iZ=new Dv,rZ=null;var aZ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ML,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iZ;(0,c.Z)(this,e),this.name=t,this.renderer=null,this.scene=n,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return(0,d.Z)(e,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var t=this.screen;null!==t?t.material=e:((t=new Sv(function(){if(null===rZ){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(rZ=new cv).setAttribute?(rZ.setAttribute("position",new $p(e,3)),rZ.setAttribute("uv",new $p(t,2))):(rZ.addAttribute("position",new $p(e,3)),rZ.addAttribute("uv",new $p(t,2)))}return rZ}(),e)).frustumCulled=!1,null===this.scene&&(this.scene=new ML),this.scene.add(t),this.screen=t)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){}},{key:"render",value:function(e,t,n,i,r){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t,n){}},{key:"dispose",value:function(){for(var e=0,t=Object.keys(this);e<t.length;e++){var n=t[e],i=this[n];if(null!==i&&"function"==typeof i.dispose){if(i instanceof ML||i===this.renderer)continue;this[n].dispose()}}}}]),e}(),oZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,c.Z)(this,n),(i=t.call(this,"CopyPass")).fullscreenMaterial=new WU,i.needsSwap=!1,i.renderTarget=e,void 0===e&&(i.renderTarget=new Tf(1,1,{minFilter:wd,magFilter:wd,stencilBuffer:!1,depthBuffer:!1}),i.renderTarget.texture.name="CopyPass.Target"),i.autoResize=r,i}return(0,d.Z)(n,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}},{key:"initialize",value:function(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==kd?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Dh&&(this.renderTarget.texture.encoding=Dh))}}]),n}(aZ),sZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"ClearMaskPass",null,null)).needsSwap=!1,e}return(0,d.Z)(n,[{key:"render",value:function(e,t,n,i,r){var a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}}]),n}(aZ),lZ=new wf,uZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,c.Z)(this,n),(e=t.call(this,"ClearPass",null,null)).needsSwap=!1,e.color=i,e.depth=r,e.stencil=a,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return(0,d.Z)(n,[{key:"setClearFlags",value:function(e,t,n){this.color=e,this.depth=t,this.stencil=n}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,t,n,i,r){var a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==a,u=o>=0;l?(lZ.copy(e.getClearColor(lZ)),e.setClearColor(a,u?o:s)):u&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(lZ,s):u&&e.setClearAlpha(s)}}]),n}(aZ),cZ=-1,dZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cZ,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cZ,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,c.Z)(this,n),(i=t.call(this)).resizable=e,i.base=new af(1,1),i.preferred=new af(r,a),i.target=i.preferred,i.s=o,i}return(0,d.Z)(n,[{key:"width",get:function(){var e=this.base,t=this.preferred,n=this.scale;return t.width!==cZ?t.width:t.height!==cZ?Math.round(t.height*(e.width/Math.max(e.height,1))):Math.round(e.width*n)},set:function(e){this.preferredWidth=e}},{key:"height",get:function(){var e=this.base,t=this.preferred,n=this.scale;return t.height!==cZ?t.height:t.width!==cZ?Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):Math.round(e.height*n)},set:function(e){this.preferredHeight=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"scale",get:function(){return this.s},set:function(e){this.s!==e&&(this.s=e,this.preferred.setScalar(cZ),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}},{key:"baseWidth",get:function(){return this.base.width},set:function(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getBaseWidth",value:function(){return this.base.width}},{key:"setBaseWidth",value:function(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"baseHeight",get:function(){return this.base.height},set:function(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getBaseHeight",value:function(){return this.baseHeight}},{key:"setBaseHeight",value:function(e){this.baseHeight=e}},{key:"setBaseSize",value:function(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"preferredWidth",get:function(){return this.preferred.width},set:function(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getPreferredWidth",value:function(){return this.preferredWidth}},{key:"setPreferredWidth",value:function(e){this.preferredWidth=e}},{key:"preferredHeight",get:function(){return this.preferred.height},set:function(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getPreferredHeight",value:function(){return this.preferredHeight}},{key:"setPreferredHeight",value:function(e){this.preferredHeight=e}},{key:"setPreferredSize",value:function(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"copy",value:function(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}}],[{key:"AUTO_SIZE",get:function(){return cZ}}]),n}(Vh),hZ=!1,fZ=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,c.Z)(this,e),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=function(e){if(e.isMesh){var n;if(e.material.flatShading)switch(e.material.side){case kc:n=t.materialsFlatShadedDoubleSide;break;case Sc:n=t.materialsFlatShadedBackSide;break;default:n=t.materialsFlatShaded}else switch(e.material.side){case kc:n=t.materialsDoubleSide;break;case Sc:n=t.materialsBackSide;break;default:n=t.materials}t.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++t.meshCount}}}return(0,d.Z)(e,[{key:"setMaterial",value:function(e){if(this.disposeMaterials(),this.material=e,null!==e){for(var t=this.materials=[e.clone(),e.clone(),e.clone()],n=0,i=t;n<i.length;n++){var r=i[n];r.uniforms=Object.assign({},e.uniforms),r.side=_c}t[2].skinning=!0,this.materialsBackSide=t.map((function(t){var n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=Sc,n})),this.materialsDoubleSide=t.map((function(t){var n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=kc,n})),this.materialsFlatShaded=t.map((function(t){var n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((function(t){var n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Sc,n})),this.materialsFlatShadedDoubleSide=t.map((function(t){var n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=kc,n}))}}},{key:"render",value:function(e,t,n){var i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,hZ){var r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);var a,o=(0,x.Z)(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;s[0].material=s[1]}}catch(u){o.e(u)}finally{o.f()}this.meshCount!==r.size&&r.clear()}else{var l=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=l}e.shadowMap.enabled=i}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide),n=(0,x.Z)(t);try{for(n.s();!(e=n.n()).done;){e.value.dispose()}}catch(i){n.e(i)}finally{n.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return hZ},set:function(e){hZ=e}}]),e}(),pZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,c.Z)(this,n),(r=t.call(this,"RenderPass",e,i)).needsSwap=!1,r.clearPass=new uZ,r.overrideMaterialManager=null===a?null:new fZ(a),r.ignoreBackground=!1,r.skipShadowMapUpdate=!1,r.selection=null,r}return(0,d.Z)(n,[{key:"renderToScreen",get:function(){return Au((0,p.Z)(n.prototype),"renderToScreen",this)},set:function(e){Gu((0,p.Z)(n.prototype),"renderToScreen",e,this,!0),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new fZ(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,t,n,i,r){var a=this.scene,o=this.camera,s=this.selection,l=o.layers.mask,u=a.background,c=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;null!==s&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=c}}]),n}(aZ),vZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.resolutionScale,s=void 0===o?1:o,l=a.width,u=void 0===l?dZ.AUTO_SIZE:l,d=a.height,h=void 0===d?dZ.AUTO_SIZE:d,f=a.renderTarget;(0,c.Z)(this,n),(r=t.call(this,"DepthPass")).needsSwap=!1,r.renderPass=new pZ(e,i,new lL({depthPacking:Ih}));var p=r.renderPass;p.skipShadowMapUpdate=!0,p.ignoreBackground=!0;var v=p.getClearPass();v.overrideClearColor=new wf(16777215),v.overrideClearAlpha=1,r.renderTarget=f,void 0===r.renderTarget&&(r.renderTarget=new Tf(1,1,{minFilter:yd,magFilter:yd,stencilBuffer:!1}),r.renderTarget.texture.name="DepthPass.Target");var m=r.resolution=new dZ((0,Ye.Z)(r),u,h,s);return m.addEventListener("change",(function(e){return r.setSize(m.baseWidth,m.baseHeight)})),r}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,t,n,i,r){var a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}}]),n}(aZ),mZ=(new Float32Array([255/256/Math.pow(256,3),255/256/Math.pow(256,2),255/256/256,255/256]),{SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18}),gZ=new Map([[mZ.SKIP,null],[mZ.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[mZ.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[mZ.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[mZ.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[mZ.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[mZ.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[mZ.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[mZ.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[mZ.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[mZ.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[mZ.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[mZ.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[mZ.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),LZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,c.Z)(this,n),(i=t.call(this)).f=e,i.opacity=new sx(r),i}return(0,d.Z)(n,[{key:"getOpacity",value:function(){return this.opacity.value}},{key:"setOpacity",value:function(e){this.opacity.value=e}},{key:"blendFunction",get:function(){return this.f},set:function(e){this.f=e,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function(){return this.blendFunction}},{key:"setBlendFunction",value:function(e){this.blendFunction=e}},{key:"getShaderCode",value:function(){return gZ.get(this.blendFunction)}}]),n}(Vh),yZ=0,bZ=1,xZ=2,wZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.attributes,s=void 0===o?yZ:o,l=a.blendFunction,u=void 0===l?mZ.SCREEN:l,d=a.defines,h=void 0===d?new Map:d,f=a.uniforms,p=void 0===f?new Map:f,v=a.extensions,m=void 0===v?null:v,g=a.vertexShader,L=void 0===g?null:g;return(0,c.Z)(this,n),(r=t.call(this)).name=e,r.renderer=null,r.attributes=s,r.fragmentShader=i,r.vertexShader=L,r.defines=h,r.uniforms=p,r.extensions=m,r.blendMode=new LZ(u),r.blendMode.addEventListener("change",(function(e){return r.setChanged()})),r}return(0,d.Z)(n,[{key:"getName",value:function(){return this.name}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getBlendMode",value:function(){return this.blendMode}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e,this.setChanged()}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"setFragmentShader",value:function(e){this.fragmentShader=e,this.setChanged()}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"setVertexShader",value:function(e){this.vertexShader=e,this.setChanged()}},{key:"setChanged",value:function(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function(e){}},{key:"update",value:function(e,t,n){}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t,n){}},{key:"dispose",value:function(){for(var e=0,t=Object.keys(this);e<t.length;e++){var n=t[e],i=this[n];if(null!==i&&"function"==typeof i.dispose){if(i instanceof ML||i===this.renderer)continue;this[n].dispose()}}}}]),n}(Vh);function _Z(e,t,n){var i,r=(0,x.Z)(t);try{for(r.s();!(i=r.n()).done;){var a,o=i.value,s="$1"+e+o.charAt(0).toUpperCase()+o.slice(1),l=new RegExp("([^\\.])(\\b"+o+"\\b)","g"),u=(0,x.Z)(n.entries());try{for(u.s();!(a=u.n()).done;){var c=a.value;null!==c[1]&&n.set(c[0],c[1].replace(l,s))}}catch(d){u.e(d)}finally{u.f()}}}catch(d){r.e(d)}finally{r.f()}}function SZ(e,t,n,i,r,a,o){var s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==s.get("fragment")&&/mainImage/.test(s.get("fragment")),c=void 0!==s.get("fragment")&&/mainUv/.test(s.get("fragment")),d=[],h=[],f=!1,p=!1;if(void 0===s.get("fragment"))console.error("Missing fragment shader",t);else if(c&&0!==(o&xZ))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||c){var v=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=KU.Section;if(c){var g="\t".concat(e,"MainUv(UV);\n");n.set(m.FRAGMENT_MAIN_UV,n.get(m.FRAGMENT_MAIN_UV)+g),f=!0}if(null!==s.get("vertex")&&/mainSupport/.test(s.get("vertex"))){var L="\t".concat(e,"MainSupport(");L+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?"vUv);\n":");\n",n.set(m.VERTEX_MAIN_SUPPORT,n.get(m.VERTEX_MAIN_SUPPORT)+L),d=d.concat(u(s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)).map((function(e){return e[1]}))),h=h.concat(d).concat(u(s.get("vertex").matchAll(v)).map((function(e){return e[1]})))}h=h.concat(u(s.get("fragment").matchAll(v)).map((function(e){return e[1]}))),h=h.concat(u(t.defines.keys()).map((function(e){return e.replace(/\([\w\s,]*\)/g,"")}))),h=h.concat(u(t.uniforms.keys())),t.uniforms.forEach((function(t,n){return a.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)})),t.defines.forEach((function(t,n){return r.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)})),_Z(e,h,r),_Z(e,h,s);var y=t.blendMode;if(i.set(y.blendFunction,y),l){var b="".concat(e,"MainImage(color0, UV, ");0!==(o&bZ)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(s.get("fragment"))&&(b+="depth, ",p=!0),b+="color1);\n\t";var x=e+"BlendOpacity";a.set(x,y.opacity),b+="color0 = blend".concat(y.blendFunction,"(color0, color1, ").concat(x,");\n\n\t"),n.set(m.FRAGMENT_MAIN_IMAGE,n.get(m.FRAGMENT_MAIN_IMAGE)+b),b="uniform float ".concat(x,";\n\n"),n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+b)}n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+s.get("fragment")+"\n"),null!==s.get("vertex")&&n.set(m.VERTEX_HEAD,n.get(m.VERTEX_HEAD)+s.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:d,transformedUv:f,readDepth:p}}var kZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n);for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return(i=t.call(this,"EffectPass")).fullscreenMaterial=new KU(null,null,null,e),i.effects=a.sort((function(e,t){return t.attributes-e.attributes})),i.skipRendering=!1,i.uniformCount=0,i.varyingCount=0,i.minTime=1,i.maxTime=Number.POSITIVE_INFINITY,i}return(0,d.Z)(n,[{key:"encodeOutput",get:function(){return this.fullscreenMaterial.encodeOutput},set:function(e){this.fullscreenMaterial.encodeOutput=e}},{key:"dithering",get:function(){return this.fullscreenMaterial.dithering},set:function(e){var t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}},{key:"verifyResources",value:function(){var e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}},{key:"updateMaterial",value:function(){var e,t=KU.Section,n=new Map([[t.FRAGMENT_HEAD,""],[t.FRAGMENT_MAIN_UV,""],[t.FRAGMENT_MAIN_IMAGE,""],[t.VERTEX_HEAD,""],[t.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,a=new Map,o=new Set,s=0,l=0,u=0,c=!1,d=!1,h=(0,x.Z)(this.effects);try{for(h.s();!(e=h.n()).done;){var f=e.value;if(f.blendMode.blendFunction===mZ.SKIP)u|=f.getAttributes()&bZ;else if(0!==(u&f.getAttributes()&xZ))console.error("Convolution effects cannot be merged",f);else{u|=f.getAttributes();var p=SZ("e"+s++,f,n,i,r,a,u);if(l+=p.varyings.length,c=c||p.transformedUv,d=d||p.readDepth,null!==f.extensions){var v,m=(0,x.Z)(f.extensions);try{for(m.s();!(v=m.n()).done;){var g=v.value;o.add(g)}}catch(S){m.e(S)}finally{m.f()}}}}}catch(S){h.e(S)}finally{h.f()}var L,y=/\bblend\b/g,b=(0,x.Z)(i.values());try{for(b.s();!(L=b.n()).done;){var w=L.value,_=w.getShaderCode().replace(y,"blend".concat(w.blendFunction));n.set(t.FRAGMENT_HEAD,n.get(t.FRAGMENT_HEAD)+_+"\n")}}catch(S){b.e(S)}finally{b.f()}if(0!==(u&bZ)){if(d){n.set(t.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+n.get(t.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(c){n.set(t.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+n.get(t.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")}else r.set("UV","vUv");n.forEach((function(e,t,n){return n.set(t,e.trim().replace(/^#/,"\n#"))})),this.uniformCount=a.size,this.varyingCount=l,this.skipRendering=0===s,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(n).setExtensions(o).setUniforms(a).setDefines(r)}},{key:"recompile",value:function(){this.updateMaterial(),this.verifyResources()}},{key:"getDepthTexture",value:function(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;var n,i=(0,x.Z)(this.effects);try{for(i.s();!(n=i.n()).done;){n.value.setDepthTexture(e,t)}}catch(r){i.e(r)}finally{i.f()}}},{key:"render",value:function(e,t,n,i,r){var a,o=(0,x.Z)(this.effects);try{for(o.s();!(a=o.n()).done;){a.value.update(e,t,i)}}catch(l){o.e(l)}finally{o.f()}if(!this.skipRendering||this.renderToScreen){var s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=i,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}},{key:"setSize",value:function(e,t){this.fullscreenMaterial.setSize(e,t);var n,i=(0,x.Z)(this.effects);try{for(i.s();!(n=i.n()).done;){n.value.setSize(e,t)}}catch(r){i.e(r)}finally{i.f()}}},{key:"initialize",value:function(e,t,n){var i=this;this.renderer=e;var r,a=(0,x.Z)(this.effects);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.initialize(e,t,n),o.addEventListener("change",(function(e){return i.handleEvent(e)}))}}catch(s){a.e(s)}finally{a.f()}this.updateMaterial(),this.verifyResources(),void 0!==n&&n!==kd&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this);var e,t=(0,x.Z)(this.effects);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(i){t.e(i)}finally{t.f()}}},{key:"handleEvent",value:function(e){if("change"===e.type)this.recompile()}}]),n}(aZ),AZ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],MZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.resolutionScale,a=void 0===r?.5:r,o=i.width,s=void 0===o?dZ.AUTO_SIZE:o,l=i.height,u=void 0===l?dZ.AUTO_SIZE:l,d=i.kernelSize,h=void 0===d?OZ.LARGE:d;(0,c.Z)(this,n),(e=t.call(this,"KawaseBlurPass")).renderTargetA=new Tf(1,1,{minFilter:wd,magFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.renderTargetA.texture.name="Blur.Target.A",e.renderTargetB=e.renderTargetA.clone(),e.renderTargetB.texture.name="Blur.Target.B";var f=e.resolution=new dZ((0,Ye.Z)(e),s,u,a);return f.addEventListener("change",(function(t){return e.setSize(f.baseWidth,f.baseHeight)})),e.blurMaterial=new HU,e.ditheredBlurMaterial=new HU,e.ditheredBlurMaterial.uniforms.scale=e.blurMaterial.uniforms.scale,e.ditheredBlurMaterial.dithering=!0,e.dithering=!1,e.kernelSize=h,e}return(0,d.Z)(n,[{key:"getResolution",value:function(){return this.resolution}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"scale",get:function(){return this.blurMaterial.scale},set:function(e){this.blurMaterial.scale=e}},{key:"getScale",value:function(){return this.blurMaterial.scale}},{key:"setScale",value:function(e){this.blurMaterial.scale=e}},{key:"getKernelSize",value:function(){return this.kernelSize}},{key:"setKernelSize",value:function(e){this.kernelSize=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,t,n,i,r){var a,o,s=this.scene,l=this.camera,u=this.renderTargetA,c=this.renderTargetB,d=AZ[this.kernelSize],h=this.blurMaterial,f=t;for(this.fullscreenMaterial=h,a=0,o=d.length-1;a<o;++a){var p=0===(1&a)?u:c;h.kernel=d[a],h.inputBuffer=f.texture,e.setRenderTarget(p),e.render(s,l),f=p}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=d[a],h.inputBuffer=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,l)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t);var i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}},{key:"initialize",value:function(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==kd?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Dh&&(this.renderTargetA.texture.encoding=Dh,this.renderTargetB.texture.encoding=Dh))}}],[{key:"AUTO_SIZE",get:function(){return dZ.AUTO_SIZE}}]),n}(aZ),CZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.width,a=void 0===r?dZ.AUTO_SIZE:r,o=i.height,s=void 0===o?dZ.AUTO_SIZE:o,l=i.renderTarget,u=i.luminanceRange,d=i.colorOutput;(0,c.Z)(this,n),(e=t.call(this,"LuminancePass")).fullscreenMaterial=new JU(d,u),e.needsSwap=!1,e.renderTarget=l,void 0===e.renderTarget&&(e.renderTarget=new Tf(1,1,{minFilter:wd,magFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.renderTarget.texture.name="LuminancePass.Target",e.renderTarget.texture.generateMipmaps=!1);var h=e.resolution=new dZ((0,Ye.Z)(e),a,s);return h.addEventListener("change",(function(t){return e.setSize(h.baseWidth,h.baseHeight)})),e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"render",value:function(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},{key:"initialize",value:function(e,t,n){void 0!==n&&n!==kd&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}]),n}(aZ),EZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,"MaskPass",e,i)).needsSwap=!1,r.clearPass=new uZ(!1,!1,!0),r.inverse=!1,r}return(0,d.Z)(n,[{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,t,n,i,r){var a=e.getContext(),o=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,d=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(n),e.render(s,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}}]),n}(aZ),TZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return(0,c.Z)(this,n),(i=t.call(this,"ShaderPass")).fullscreenMaterial=e,i.inputBufferUniform=null,i.setInput(r),i}return(0,d.Z)(n,[{key:"setInput",value:function(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){var t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}},{key:"render",value:function(e,t,n,i,r){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}},{key:"initialize",value:function(e,t,n){void 0!==n&&n!==kd&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}]),n}(aZ),PZ=.001,DZ=function(){function e(){(0,c.Z)(this,e),this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}return(0,d.Z)(e,[{key:"setFixedDeltaEnabled",value:function(e){return this.fixedDeltaEnabled=e,this}},{key:"isAutoResetEnabled",value:function(e){return this.autoReset}},{key:"setAutoResetEnabled",value:function(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}},{key:"getDelta",value:function(){return this.delta*PZ}},{key:"getFixedDelta",value:function(){return this.fixedDelta*PZ}},{key:"setFixedDelta",value:function(e){return this.fixedDelta=1e3*e,this}},{key:"getElapsed",value:function(){return this.elapsed*PZ}},{key:"getTimescale",value:function(){return this.timescale}},{key:"setTimescale",value:function(e){return this.timescale=e,this}},{key:"update",value:function(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}},{key:"reset",value:function(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now())}},{key:"dispose",value:function(){this.setAutoResetEnabled(!1)}}]),e}(),OZ={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},IZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.blendFunction,a=void 0===r?mZ.SCREEN:r,o=i.luminanceThreshold,s=void 0===o?.9:o,l=i.luminanceSmoothing,u=void 0===l?.025:l,d=i.resolutionScale,h=void 0===d?.5:d,f=i.intensity,p=void 0===f?1:f,v=i.width,m=void 0===v?dZ.AUTO_SIZE:v,g=i.height,L=void 0===g?dZ.AUTO_SIZE:g,y=i.kernelSize,b=void 0===y?OZ.LARGE:y;(0,c.Z)(this,n),(e=t.call(this,"BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:a,uniforms:new Map([["map",new sx(null)],["intensity",new sx(p)]])})).renderTarget=new Tf(1,1,{minFilter:wd,magFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.renderTarget.texture.name="Bloom.Target",e.renderTarget.texture.generateMipmaps=!1,e.uniforms.get("map").value=e.renderTarget.texture,e.luminancePass=new CZ({renderTarget:e.renderTarget,colorOutput:!0}),e.luminanceMaterial.threshold=s,e.luminanceMaterial.smoothingFactor=u,e.blurPass=new MZ({resolutionScale:h,width:m,height:L,kernelSize:b});var x=e.blurPass.getResolution();return x.addEventListener("change",(function(t){return e.setSize(x.baseWidth,x.baseHeight)})),e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"resolution",get:function(){return this.blurPass.resolution}},{key:"getResolution",value:function(){return this.blurPass.resolution}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"getLuminancePass",value:function(){return this.luminancePass}},{key:"luminanceMaterial",get:function(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return console.warn(this.name,"distinction was removed"),1},set:function(e){console.warn(this.name,"distinction was removed")}},{key:"intensity",get:function(){return this.uniforms.get("intensity").value},set:function(e){this.uniforms.get("intensity").value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"update",value:function(e,t,n){var i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}},{key:"initialize",value:function(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e.outputEncoding===Dh&&(this.renderTarget.texture.encoding=Dh))}}]),n}(wZ),RZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.blendFunction,r=void 0===i?mZ.NORMAL:i,a=e.brightness,o=void 0===a?0:a,s=e.contrast,l=void 0===s?0:s;return(0,c.Z)(this,n),t.call(this,"BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:r,uniforms:new Map([["brightness",new sx(o)],["contrast",new sx(l)]])})}return(0,d.Z)(n,[{key:"brightness",get:function(){return this.uniforms.get("brightness").value},set:function(e){this.uniforms.get("brightness").value=e}},{key:"getBrightness",value:function(e){return this.brightness}},{key:"setBrightness",value:function(e){this.brightness=e}},{key:"contrast",get:function(){return this.uniforms.get("contrast").value},set:function(e){this.uniforms.get("contrast").value=e}},{key:"getContrast",value:function(e){return this.contrast}},{key:"setContrast",value:function(e){this.contrast=e}}]),n}(wZ),BZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mZ.NORMAL;return(0,c.Z)(this,n),t.call(this,"ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}return(0,d.Z)(n)}(wZ),NZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.blendFunction,r=void 0===i?mZ.NORMAL:i,a=e.offset,o=void 0===a?new af(.001,5e-4):a;return(0,c.Z)(this,n),t.call(this,"ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:r,attributes:xZ,uniforms:new Map([["offset",new sx(o)]])})}return(0,d.Z)(n,[{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}},{key:"getOffset",value:function(){return this.offset}},{key:"setOffset",value:function(e){this.offset=e}}]),n}(wZ),zZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.blendFunction,o=void 0===a?mZ.NORMAL:a,s=r.worldFocusDistance,l=r.worldFocusRange,u=r.focusDistance,d=void 0===u?0:u,h=r.focalLength,f=void 0===h?.1:h,p=r.focusRange,v=void 0===p?f:p,m=r.bokehScale,g=void 0===m?1:m,L=r.width,y=void 0===L?dZ.AUTO_SIZE:L,b=r.height,x=void 0===b?dZ.AUTO_SIZE:b;(0,c.Z)(this,n),(i=t.call(this,"DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:o,attributes:bZ,uniforms:new Map([["nearColorBuffer",new sx(null)],["farColorBuffer",new sx(null)],["nearCoCBuffer",new sx(null)],["scale",new sx(1)]])})).camera=e,i.renderTarget=new Tf(1,1,{minFilter:wd,magFilter:wd,stencilBuffer:!1,depthBuffer:!1}),i.renderTarget.texture.name="DoF.Intermediate",i.renderTarget.texture.generateMipmaps=!1,i.renderTargetMasked=i.renderTarget.clone(),i.renderTargetMasked.texture.name="DoF.Masked.Far",i.renderTargetNear=i.renderTarget.clone(),i.renderTargetNear.texture.name="DoF.Bokeh.Near",i.uniforms.get("nearColorBuffer").value=i.renderTargetNear.texture,i.renderTargetFar=i.renderTarget.clone(),i.renderTargetFar.texture.name="DoF.Bokeh.Far",i.uniforms.get("farColorBuffer").value=i.renderTargetFar.texture,i.renderTargetCoC=i.renderTarget.clone(),i.renderTargetCoC.texture.name="DoF.CoC",i.renderTargetCoCBlurred=i.renderTargetCoC.clone(),i.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",i.uniforms.get("nearCoCBuffer").value=i.renderTargetCoCBlurred.texture,i.cocPass=new TZ(new GU(e));var w=i.cocMaterial;w.focusDistance=d,w.focusRange=v,void 0!==s&&(w.worldFocusDistance=s),void 0!==l&&(w.worldFocusRange=l),i.blurPass=new MZ({kernelSize:OZ.MEDIUM,width:y,height:x});var _=i.blurPass.getResolution();_.addEventListener("change",(function(e){return i.setSize(_.getBaseWidth(),_.getBaseHeight())})),i.maskPass=new TZ(new tZ(i.renderTargetCoC.texture));var S=i.maskPass.fullscreenMaterial;return S.maskFunction=eZ,S.colorChannel=FU,i.bokehNearBasePass=new TZ(new UU(!1,!0)),i.bokehNearBasePass.fullscreenMaterial.cocBuffer=i.renderTargetCoCBlurred.texture,i.bokehNearFillPass=new TZ(new UU(!0,!0)),i.bokehNearFillPass.fullscreenMaterial.cocBuffer=i.renderTargetCoCBlurred.texture,i.bokehFarBasePass=new TZ(new UU(!1,!1)),i.bokehFarBasePass.fullscreenMaterial.cocBuffer=i.renderTargetCoC.texture,i.bokehFarFillPass=new TZ(new UU(!0,!1)),i.bokehFarFillPass.fullscreenMaterial.cocBuffer=i.renderTargetCoC.texture,i.target=null,i.bokehScale=g,i}return(0,d.Z)(n,[{key:"cocTexture",get:function(){return this.renderTargetCoC.texture}},{key:"cocMaterial",get:function(){return this.cocPass.fullscreenMaterial}},{key:"circleOfConfusionMaterial",get:function(){return this.cocMaterial}},{key:"getCircleOfConfusionMaterial",value:function(){return this.circleOfConfusionMaterial}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"resolution",get:function(){return this.blurPass.getResolution()}},{key:"getResolution",value:function(){return this.blurPass.getResolution()}},{key:"bokehScale",get:function(){return this.uniforms.get("scale").value},set:function(e){for(var t=0,n=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];t<n.length;t++){n[t].fullscreenMaterial.setScale(e)}this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}},{key:"getBokehScale",value:function(){return this.bokehScale}},{key:"setBokehScale",value:function(e){this.bokehScale=e}},{key:"getTarget",value:function(){return this.target}},{key:"setTarget",value:function(e){this.target=e}},{key:"calculateFocusDistance",value:function(e){var t=this.camera;return VU(-t.position.distanceTo(e),t.near,t.far)}},{key:"setDepthTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}},{key:"update",value:function(e,t,n){var i=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(null!==this.target){var s=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=s}this.cocPass.render(e,null,r),this.blurPass.render(e,r,a),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t);var i=n.width,r=n.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach((function(n){return n.setSize(e,t)})),(a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred]).forEach((function(e){return e.setSize(i,r)})),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((function(e){return e.fullscreenMaterial.setSize(i,r)}))}},{key:"initialize",value:function(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((function(i){return i.initialize(e,t,n)})),this.blurPass.initialize(e,t,kd),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e.outputEncoding===Dh&&(this.renderTarget.texture.encoding=Dh,this.renderTargetNear.texture.encoding=Dh,this.renderTargetFar.texture.encoding=Dh,this.renderTargetMasked.texture.encoding=Dh))}}]),n}(wZ),FZ=(new Rf,new dp,function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.blendFunction,a=void 0===r?mZ.NORMAL:r,o=i.hue,s=void 0===o?0:o,l=i.saturation,u=void 0===l?0:l;return(0,c.Z)(this,n),(e=t.call(this,"HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:a,uniforms:new Map([["hue",new sx(new Rf)],["saturation",new sx(u)]])})).hue=s,e}return(0,d.Z)(n,[{key:"saturation",get:function(){return this.uniforms.get("saturation").value},set:function(e){this.uniforms.get("saturation").value=e}},{key:"getSaturation",value:function(){return this.saturation}},{key:"setSaturation",value:function(e){this.saturation=e}},{key:"hue",get:function(){var e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)},set:function(e){var t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}},{key:"getHue",value:function(){return this.hue}},{key:"setHue",value:function(e){this.hue=e}}]),n}(wZ)),jZ=(new wf,function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.blendFunction,a=void 0===r?mZ.SCREEN:r,o=i.premultiply,s=void 0!==o&&o;return(0,c.Z)(this,n),(e=t.call(this,"NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:a})).premultiply=s,e}return(0,d.Z)(n,[{key:"premultiply",get:function(){return this.defines.has("PREMULTIPLY")},set:function(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},{key:"isPremultiplied",value:function(){return this.premultiply}},{key:"setPremultiplied",value:function(e){this.premultiply=e}}]),n}(wZ)),UZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return(0,c.Z)(this,n),(e=t.call(this,"PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new sx(!1)],["d",new sx(new af)]])})).resolution=new af,e.d=0,e.granularity=i,e}return(0,d.Z)(n,[{key:"granularity",get:function(){return this.d},set:function(e){var t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}},{key:"getGranularity",value:function(){return this.granularity}},{key:"setGranularity",value:function(e){this.granularity=e}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}}]),n}(wZ),ZZ=(Math.PI,new Rf,new Rf,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),VZ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",GZ=0,HZ=1,WZ=2,qZ=3,XZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.preset,s=void 0===o?HZ:o,l=a.edgeDetectionMode,u=void 0===l?qU:l,d=a.predicationMode,h=void 0===d?XU:d;(0,c.Z)(this,n),e=t.call(this,"SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:mZ.NORMAL,attributes:xZ|bZ,uniforms:new Map([["weightMap",new sx(null)]])}),arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(s=arguments[2]),arguments.length>3&&(u=arguments[3])),e.renderTargetEdges=new Tf(1,1,{minFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.renderTargetEdges.texture.name="SMAA.Edges",e.renderTargetWeights=e.renderTargetEdges.clone(),e.renderTargetWeights.texture.name="SMAA.Weights",e.uniforms.get("weightMap").value=e.renderTargetWeights.texture,e.clearPass=new uZ(!0,!1,!1),e.clearPass.overrideClearColor=new wf(0),e.clearPass.overrideClearAlpha=1,e.edgeDetectionPass=new TZ(new YU),e.edgeDetectionMaterial.edgeDetectionMode=u,e.edgeDetectionMaterial.predicationMode=h,e.weightsPass=new TZ(new nZ);var f=new bb;return f.onLoad=function(){var t=new Cf(i);t.name="SMAA.Search",t.magFilter=yd,t.minFilter=yd,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!0,e.weightsMaterial.searchTexture=t;var n=new Cf(r);n.name="SMAA.Area",n.magFilter=wd,n.minFilter=wd,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!1,e.weightsMaterial.areaTexture=n,e.dispatchEvent({type:"load"})},f.itemStart("search"),f.itemStart("area"),void 0!==i&&void 0!==r?(f.itemEnd("search"),f.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",(function(){return f.itemEnd("search")})),r.addEventListener("load",(function(){return f.itemEnd("area")})),i.src=ZZ,r.src=VZ),e.applyPreset(s),e}return(0,d.Z)(n,[{key:"edgesTexture",get:function(){return this.renderTargetEdges.texture}},{key:"getEdgesTexture",value:function(){return this.edgesTexture}},{key:"weightsTexture",get:function(){return this.renderTargetWeights.texture}},{key:"getWeightsTexture",value:function(){return this.weightsTexture}},{key:"edgeDetectionMaterial",get:function(){return this.edgeDetectionPass.fullscreenMaterial}},{key:"colorEdgesMaterial",get:function(){return this.edgeDetectionMaterial}},{key:"getEdgeDetectionMaterial",value:function(){return this.edgeDetectionMaterial}},{key:"weightsMaterial",get:function(){return this.weightsPass.fullscreenMaterial}},{key:"getWeightsMaterial",value:function(){return this.weightsMaterial}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsMaterial.orthogonalSearchSteps=e}},{key:"applyPreset",value:function(e){var t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case GZ:t.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case HZ:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case WZ:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case qZ:t.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0}}},{key:"setDepthTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oh;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}},{key:"update",value:function(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}},{key:"dispose",value:function(){var e=this.weightsMaterial,t=e.searchTexture,i=e.areaTexture;null!==t&&null!==i&&(t.dispose(),i.dispose()),Au((0,p.Z)(n.prototype),"dispose",this).call(this)}}],[{key:"searchImageDataURL",get:function(){return ZZ}},{key:"areaImageDataURL",get:function(){return VZ}}]),n}(wZ),YZ=0,QZ=1,KZ=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.blendFunction,r=void 0===i?mZ.NORMAL:i,a=e.technique,o=void 0===a?YZ:a,s=(e.eskil,e.offset),l=void 0===s?.5:s,u=e.darkness,d=void 0===u?.5:u;return(0,c.Z)(this,n),t.call(this,"VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:r,defines:new Map([["VIGNETTE_TECHNIQUE",o.toFixed(0)]]),uniforms:new Map([["offset",new sx(l)],["darkness",new sx(d)]])})}return(0,d.Z)(n,[{key:"technique",get:function(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))},set:function(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}},{key:"eskil",get:function(){return this.technique===QZ},set:function(e){this.technique=e?QZ:YZ}},{key:"getTechnique",value:function(){return this.technique}},{key:"setTechnique",value:function(e){this.technique=e}},{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}},{key:"getOffset",value:function(){return this.offset}},{key:"setOffset",value:function(e){this.offset=e}},{key:"darkness",get:function(){return this.uniforms.get("darkness").value},set:function(e){this.uniforms.get("darkness").value=e}},{key:"getDarkness",value:function(){return this.darkness}},{key:"setDarkness",value:function(e){this.darkness=e}}]),n}(wZ);new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),new Map([[$Z(0,0,0,0),new Float32Array([0,0,0,0])],[$Z(0,0,0,1),new Float32Array([0,0,0,1])],[$Z(0,0,1,0),new Float32Array([0,0,1,0])],[$Z(0,0,1,1),new Float32Array([0,0,1,1])],[$Z(0,1,0,0),new Float32Array([0,1,0,0])],[$Z(0,1,0,1),new Float32Array([0,1,0,1])],[$Z(0,1,1,0),new Float32Array([0,1,1,0])],[$Z(0,1,1,1),new Float32Array([0,1,1,1])],[$Z(1,0,0,0),new Float32Array([1,0,0,0])],[$Z(1,0,0,1),new Float32Array([1,0,0,1])],[$Z(1,0,1,0),new Float32Array([1,0,1,0])],[$Z(1,0,1,1),new Float32Array([1,0,1,1])],[$Z(1,1,0,0),new Float32Array([1,1,0,0])],[$Z(1,1,0,1),new Float32Array([1,1,0,1])],[$Z(1,1,1,0),new Float32Array([1,1,1,0])],[$Z(1,1,1,1),new Float32Array([1,1,1,1])]]);function JZ(e,t,n){return e+(t-e)*n}function $Z(e,t,n,i){var r=JZ(e,t,.75),a=JZ(n,i,.75);return JZ(r,a,.875)}var eV=(0,d.Z)((function e(t,n){(0,c.Z)(this,e),this.enabled=!1,this.effect=new t(n),Object.defineProperty(this,"opacity",{enumerable:!0,set:function(e){this.effect.blendMode.opacity.value=e},get:function(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set:function(e){this.effect.blendMode.setBlendFunction(Number(e))},get:function(){return this.effect.blendMode.blendFunction}}),this.blendFunction=mZ.NORMAL})),tV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,IZ)).blendFunction=mZ.SCREEN,e}return(0,d.Z)(n,[{key:"intensity",get:function(){return this.effect.intensity},set:function(e){this.effect.intensity=e}},{key:"luminanceThreshold",get:function(){return this.effect.luminanceMaterial.threshold},set:function(e){this.effect.luminanceMaterial.threshold=e}},{key:"luminanceSmoothing",get:function(){return this.effect.luminanceMaterial.smoothing},set:function(e){this.effect.luminanceMaterial.smoothing=e}},{key:"blurScale",get:function(){return this.effect.blurPass.scale},set:function(e){this.effect.blurPass.scale=e}},{key:"kernelSize",get:function(){return this.effect.blurPass.kernelSize},set:function(e){this.effect.blurPass.kernelSize=e}}]),n}(eV),nV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,RZ)}return(0,d.Z)(n,[{key:"contrast",get:function(){return this.effect.uniforms.get("contrast").value},set:function(e){this.effect.uniforms.get("contrast").value=e}},{key:"brightness",get:function(){return this.effect.uniforms.get("brightness").value},set:function(e){this.effect.uniforms.get("brightness").value=e}}]),n}(eV),iV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,NZ)).effect.offset=new af(.01,.01),e}return(0,d.Z)(n,[{key:"offset",get:function(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]},set:function(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}}]),n}(eV),rV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,BZ)}return(0,d.Z)(n)}(eV),aV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,FZ))._hue=0,e}return(0,d.Z)(n,[{key:"hue",get:function(){return this._hue},set:function(e){this._hue=e,this.effect.setHue(e)}},{key:"saturation",get:function(){return this.effect.uniforms.get("saturation").value},set:function(e){this.effect.uniforms.get("saturation").value=e}}]),n}(eV),oV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,jZ)).blendFunction=mZ.OVERLAY,e}return(0,d.Z)(n)}(eV),sV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,KZ)}return(0,d.Z)(n,[{key:"eskil",get:function(){return this.effect.eskil},set:function(e){this.effect.eskil=e}},{key:"darkness",get:function(){return this.effect.uniforms.get("darkness").value},set:function(e){this.effect.uniforms.get("darkness").value=e}},{key:"offset",get:function(){return this.effect.uniforms.get("offset").value},set:function(e){this.effect.uniforms.get("offset").value=e}}]),n}(eV),lV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,zZ,e)}return(0,d.Z)(n,[{key:"focalLength",get:function(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value},set:function(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}},{key:"focusDistance",get:function(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value},set:function(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}},{key:"bokehScale",get:function(){return this.effect.bokehScale},set:function(e){this.effect.bokehScale=e}}]),n}(eV),uV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,UZ)}return(0,d.Z)(n,[{key:"granularity",get:function(){return this.effect.getGranularity()},set:function(e){this.effect.setGranularity(e)}}]),n}(eV),cV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{name:"PassthroughMaterial",uniforms:{inputBuffer:new sx(null)},blending:Ac,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}",fragmentShader:"#define GLSLIFY 1\nlayout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}"})}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}}]),n}(Pv),dV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,"TAAResolvePass")).MRTCompatible=!0,e.needsSwap=!1,e.passThroughMaterial=new cV,e.resolutionVector=new af,e.resolveMaterial=new Pv({name:"TAAResolveMaterial",uniforms:{inputBuffer:new sx(null),historyBuffer:new sx(null),velocityBuffer:new sx(null),depthBuffer:new sx(null),resolution:new sx(new af)},blending:Ac,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\n#include <common>\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;\n#define USE_YCOCG\n#define USE_CATMULL_ROM\nconst float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){\n#ifdef USE_YCOCG\nvec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);\n#else\nreturn texture(tex,uv);\n#endif\n}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){\n#ifdef CHOOSE_LONGEST_MOTION_VECTOR\nfloat longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;\n#else\nfloat closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;\n#endif\n}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);\n#ifdef USE_CATMULL_ROM\nvec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);\n#else\nvec4 previousColor=sample_color(historyBuffer,previousPixelPos);\n#endif\n#ifdef USE_YCOCG\npreviousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);\n#endif\nvec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);\n#ifdef USE_YCOCG\nvec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;\n#endif\nvec4 previousColorClipped=clamp(previousColor,cmin,cmax);\n#ifdef LUMINANCE_DIFFERENCES\n#ifdef USE_YCOCG\nfloat lum0=currentColor.r;float lum1=previousColorClipped.r;\n#else\nfloat lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);\n#endif\nfloat unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));\n#else\nconst float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);\n#endif\n#ifdef USE_YCOCG\ngl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);\n#else\ngl_FragColor=result;\n#endif\n}"}),e.historyRenderTarget=new Tf(1024,1024,{minFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.historyRenderTarget.texture.name="TAA.History",e.resultRenderTarget=new Tf(1024,1024,{minFilter:wd,stencilBuffer:!1,depthBuffer:!1}),e.resultRenderTarget.texture.name="TAA.Output",e}return(0,d.Z)(n,[{key:"setSize",value:function(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}},{key:"render",value:function(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);var n=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(n),e.render(this.scene,this.camera)}},{key:"dispose",value:function(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}}]),n}(aZ),hV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,"TransmissionPass",void 0,i)).MRTCompatible=!0,a.depthPass=new vZ(e,i,{renderTarget:r.transmissionDepthTarget}),a.passThroughMaterial=new cV,a.splineScene=e,a.needsSwap=!1,a}return(0,d.Z)(n,[{key:"updatePasses",value:function(e){this.passThroughMaterial=new cV,this.depthPass=new vZ(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}},{key:"setCamera",value:function(e){this.camera=e}},{key:"setScene",value:function(e){this.splineScene=e}},{key:"render",value:function(e,t,n){var i=this.camera.layers.mask,r=e;r.setRenderTarget(r.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],r.clear(),r.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,n),r.shadowMap.needsUpdate=!1,r.shadowMap.autoUpdate=!1;var a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}}]),n}(aZ),fV=new ML,pV=new Pv({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        layout(location = 1) out vec4 gVelocity;\n\n        void main() {\n            gl_FragColor = vec4(0.0);\n\t\t\tgVelocity = vec4(0.0);\n        }\n    "}),vV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,"OpaquePass",null!==i&&void 0!==i?i:fV,r)).MRTCompatible=!0,a.hasTransmissionPass=!1,a.clear=!0,a.clearColorOnly=!1,a.clearDepth=!1,a.needsSwap=!1,a.originalMaterials=new Map,a.MRTCompatible=e,a}return(0,d.Z)(n,[{key:"setCamera",value:function(e){this.camera=e}},{key:"setScene",value:function(e){this.scene=null!==e&&void 0!==e?e:fV}},{key:"getScene",value:function(){return this.scene}},{key:"render",value:function(e,t){var n=this;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse((function(e){e.layers.isEnabled(3)&&e instanceof yN&&(n.originalMaterials.set(e.id,e.material),e.material=pV)})),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);var i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((function(e,t){var i=n.scene.getObjectById(t);i&&(i.material=e)}))}}]),n}(aZ),mV=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.depthBuffer,r=void 0===i||i,a=n.stencilBuffer,o=void 0!==a&&a,s=n.multisampling,l=void 0===s?0:s,u=n.frameBufferType,d=void 0===u?0:u;(0,c.Z)(this,e),this.renderer=t,this.helperStartIndex=0,this.copyPass=new oZ,this.depthTexture=null,this.timer=new DZ,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(r,o,d,l,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(r,o,d,l,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(r,o,d,l,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(t)}return(0,d.Z)(e,[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var t,n,i=e.getSize(new af),r=null!==(t=null===(n=e.getContext().getContextAttributes())||void 0===n?void 0:n.alpha)&&void 0!==t&&t,a=this.inputBuffer.texture[0].type;a===kd&&e.outputEncoding===Dh&&(this.inputBuffer.texture[0].encoding=Dh,this.outputBuffer.texture[0].encoding=Dh,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);var o,s=(0,x.Z)(this.passes);try{for(s.s();!(o=s.n()).done;){o.value.initialize(e,r,a)}}catch(l){s.e(l)}finally{s.f()}}}},{key:"replaceRenderer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(e),t&&null!==i&&(i.removeChild(n.domElement),i.appendChild(e.domElement)),n}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new bL(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ud,e.type=Rd):e.type=Td,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,t=(0,x.Z)(this.passes);try{for(t.s();!(e=t.n()).done;){e.value.setDepthTexture(null)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"createBuffer",value:function(e,t,n,i,r,a){var o,s=this.renderer,l=null===s?new af:s.getDrawingBufferSize(new af),u={minFilter:wd,magFilter:wd,wrapS:gd,wrapT:gd,stencilBuffer:t,depthBuffer:e};return i>0?(o=new Tf(l.width,l.height,u)).samples=i:(r?(o=new Of(l.width,l.height,2,u)).texture[1].type=Dd:o=new Tf(l.width,l.height,u),o.depthTexture=new bL(2048,2048),o.depthTexture.type=Pd),n===kd&&null!==s&&s.outputEncoding===Dh&&(Array.isArray(o.texture)?o.texture.forEach((function(e){return e.encoding=Dh})):o.texture.encoding=Dh),Array.isArray(o.texture)?o.texture.forEach((function(e,t){e.name="EffectComposer.Buffer ".concat(r," ").concat(t),e.generateMipmaps=!1})):(o.texture.name="EffectComposer.Buffer ".concat(r),o.texture.generateMipmaps=!1),o.name=a,o}},{key:"addPass",value:function(e,t){var n,i,r,a=this.passes,o=this.renderer,s=o.getDrawingBufferSize(new af),l=null!==(n=null===(i=o.getContext().getContextAttributes())||void 0===i?void 0:i.alpha)&&void 0!==n&&n;if(e.MRTCompatible&&(r=this.inputBuffer.texture[0].type),e.MRTCompatible||(r=this.inputBuffer.texture.type),e.setRenderer(o),e.setSize(s.width,s.height),e.initialize(o,l,r),this.autoRenderToScreen&&(a.length>0&&(a[a.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?a.splice(t,0,e):a.push(e),this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var u,c=this.createDepthTexture(),d=(0,x.Z)(a);try{for(d.s();!(u=d.n()).done;)(e=u.value).setDepthTexture(c)}catch(h){d.e(h)}finally{d.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"setHelperStartIndex",value:function(e){this.helperStartIndex=e}},{key:"removePass",value:function(e){var t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){t.reduce((function(e,t){return e||t.needsDepthTexture}),!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var t,n,i,r,a=this.renderer,o=this.copyPass,s=this.inputBuffer,l=this.outputBuffer,u=this.inputBufferSingle,c=this.outputBufferSingle,d=!1;void 0===e&&(e=this.timer.update().getDelta());var h,f=(0,x.Z)(this.passes);try{for(f.s();!(h=f.n()).done;){var p=h.value;p.enabled&&(p.MRTCompatible?p.render(a,s,l,e,d):p.render(a,u,c,e,d),p.needsSwap&&(d&&(o.renderToScreen=p.renderToScreen,t=a.getContext(),(n=a.state.buffers.stencil).setFunc(t.NOTEQUAL,1,4294967295),o.render(a,s,l,e,d),n.setFunc(t.EQUAL,1,4294967295)),i=s,r=u,s=l,u=c,l=i,c=r),p instanceof EZ?d=!0:p instanceof sZ&&(d=!1))}}catch(v){f.e(v)}finally{f.f()}}},{key:"setSize",value:function(e,t,n){var i=this.renderer;if(this._width=e,this._height=t,void 0===e||void 0===t){var r=i.getSize(new af);e=r.width,t=r.height}i.setSize(e,t,n);var a=i.getDrawingBufferSize(new af);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height),this.inputBufferSingle.setSize(a.width,a.height),this.outputBufferSingle.setSize(a.width,a.height);var o,s=(0,x.Z)(this.passes);try{for(s.s();!(o=s.n()).done;){o.value.setSize(a.width,a.height)}}catch(l){s.e(l)}finally{s.f()}}},{key:"reset",value:function(){var e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}},{key:"dispose",value:function(){var e,t=(0,x.Z)(this.passes);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),null!==this.inputBufferSingle&&this.inputBufferSingle.dispose(),null!==this.outputBufferSingle&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}]),e}(),gV=new Pv({name:"CombineMaterial",uniforms:{inputBufferA:new sx(null),inputBufferB:new sx(null)},blending:Ac,depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n    vUv = position.xy * 0.5 + 0.5;\n}\n",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D inputBufferA;\n    uniform sampler2D inputBufferB;\n\n    // TODO: Why do we need these when postpro of framemode is enabled???\n    layout(location = 1) out vec4 gVelocity;\n\n    void main() {\n\tvec4 resA = texture2D(inputBufferA, vUv);\n\tvec4 resB = texture2D(inputBufferB, vUv);\n    float a = resA.a + resB.a * ( 1.0 - resA.a );\n\n\tvec4 res;\n\tres.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));\n\tres.a = resA.a + resB.a * (1.0 - resA.a);\n\tgl_FragColor = res;\n    gVelocity = vec4(0.0);\n    }\n"}),LV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,"HelperPass",void 0,e)).MRTCompatible=!1,i.fullscreenMaterial=gV,i.helperPass=new vV(!1,void 0,i.camera),i.helperPass.hasTransmissionPass=!1,i.helperPass.clear=!1,i.helperPass.renderToScreen=!1,i.helperPassOnTop=new vV(!1,void 0,i.camera),i.helperPassOnTop.hasTransmissionPass=!1,i.helperPassOnTop.clear=!1,i.helperPassOnTop.renderToScreen=!1;var r=new XZ({preset:GZ,edgeDetectionMode:qU});return i.effectPass=new kZ(i.camera,r),i.rt=new Tf(10,10,{minFilter:wd,magFilter:wd,wrapS:gd,wrapT:gd,depthBuffer:!0}),i}return(0,d.Z)(n,[{key:"setSize",value:function(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}},{key:"sceneHelpers",get:function(){return this.helperPass.getScene()},set:function(e){this.helperPass.setScene(e)}},{key:"sceneHelpersOnTop",get:function(){return this.helperPassOnTop.getScene()},set:function(e){this.helperPassOnTop.setScene(e)}},{key:"setCamera",value:function(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}},{key:"initialize",value:function(e,t,i){Au((0,p.Z)(n.prototype),"initialize",this).call(this,e,t,i),this.effectPass.initialize(e,t,i)}},{key:"dispose",value:function(){Au((0,p.Z)(n.prototype),"dispose",this).call(this),this.rt.dispose(),this.effectPass.dispose()}},{key:"render",value:function(e,t,n){this.rt.depthTexture=t.depthTexture;var i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,n),this.fullscreenMaterial.uniforms.inputBufferA.value=n.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}}]),n}(aZ),yV=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],bV=new Pv({vertexShader:"#define GLSLIFY 1\n#include <skinning_pars_vertex>\nout vec3 n;void main(){\n#include <beginnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <skinning_vertex>\nvec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}",fragmentShader:"#define GLSLIFY 1\nin vec3 n;void main(){gl_FragColor=vec4(n,1.0);}"}),xV=new Pv({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){\n#ifdef DEBUG\nfloat d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);\n#else\nvec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;\n#endif\n}",uniforms:{texture_ao_lrez:new sx(null),texture_depth_lrez:new sx(null),texture_depth_hrez:new sx(null),near:new sx(null),far:new sx(null)}}),wV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,"AmbientOcclusionPass",void 0,i)).fogEnabled=!1,r.fogNear=1,r.fogFar=1e3,r.frameIndex=0,r._runHalfRes=!0,r._width=1,r._height=1;var a=1024,o=1024;r.gBuffer=new Tf(a,o,{type:Pd,depthTexture:new bL(a,o),minFilter:wd,magFilter:wd}),r.depthBufferHighRes=new Tf(a,o,{depthTexture:new bL(a,o)}),r.aoBuffer=new Tf(a,o,{minFilter:wd,magFilter:wd}),r.splineScene=e,r.splineCamera=i;for(var s=new Float32Array(2*yV.length),l=0;l<yV.length;l++){var u=2*l;s[u+0]=yV[l][0],s[u+1]=yV[l][1]}r.blueNoiseInDiskTexture=new DL(s,yV.length,1,Gd,Pd),r.blueNoiseInDiskTexture.wrapS=md,r.blueNoiseInDiskTexture.wrapT=md,r.blueNoiseInDiskTexture.needsUpdate=!0,r.hbaoMaterial=new Pv({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}\n#define USE_GBUFFER_NORMALS\nvoid main(){vec3 view_space_p=get_view_position(v_uv);\n#ifdef USE_GBUFFER_NORMALS\nvec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;\n#else\nvec3 view_space_n=-rebuild_normal(v_uv,view_space_p);\n#endif\nfloat radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}",uniforms:{near:new sx(null),far:new sx(null),fov:new sx(null),proj_info:new sx(new Ef),is_ortho:new sx(!1),resolution:new sx(new af),radius_of_influence:new sx(8),radius_in_screen_space:new sx(1),exponent:new sx(1),ao_color:new sx(new Rf),bias:new sx(.5),texture_depth:new sx(null),texture_normals:new sx(null),texture_blue_noise:new sx(null),texture_blue_noise_in_disk:new sx(r.blueNoiseInDiskTexture),frame_index:new sx(0),fog_enabled:new sx(!1),fog_near:new sx(1),fog_far:new sx(1e3)}}),r.radius=128,r.aoColor={r:0,g:0,b:0},r.bias=.5,r.hbaoMaterial.uniforms.texture_depth.value=r.gBuffer.depthTexture,r.hbaoMaterial.uniforms.texture_normals.value=r.gBuffer.texture,r.needsSwap=!0,r.aaBuffer=new Tf(a,o,{minFilter:wd,magFilter:wd,wrapS:gd,wrapT:gd,depthBuffer:!1,type:Pd});var d=new XZ({preset:qZ,edgeDetectionMode:qU});return r.effectPass=new kZ(r.camera,d),r}return(0,d.Z)(n,[{key:"initialize",value:function(e,t,i){Au((0,p.Z)(n.prototype),"initialize",this).call(this,e,t,i),this.effectPass.initialize(e,t,i)}},{key:"setBlueNoiseTexture",value:function(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);var n=this._runHalfRes?.5:1,i=e*n,r=t*n;this.gBuffer.setSize(i,r),this.aoBuffer.setSize(i,r),this.hbaoMaterial.uniforms.resolution.value.set(i,r),this.aaBuffer.setSize(i,r),this.effectPass.setSize(i,r)}},{key:"runHalfRes",get:function(){return this._runHalfRes},set:function(e){this._runHalfRes=e,this.setSize(this._width,this._height)}},{key:"setCamera",value:function(e){this.splineCamera=e}},{key:"setScene",value:function(e){this.splineScene=e}},{key:"render",value:function(e,t,n){this.splineScene.overrideMaterial=bV;var i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;var r=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/r[0],o=2/r[5],s=-(1-r[8])/r[0],l=-(1+r[9])/r[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,o,s,l);var u=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(2*Math.tan(.5*u)),d=.5*this.hbaoMaterial.uniforms.radius_of_influence.value*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;var h=this.splineCamera.orthoCamera.projectionMatrix.elements,f=2/h[0],p=2/h[5],v=-(1+h[12])/h[0],m=-(1-h[13])/h[5];this.hbaoMaterial.uniforms.proj_info.value.set(f,p,v,m);var g=this.hbaoMaterial.uniforms.resolution.value.y/p*.5,L=this.hbaoMaterial.uniforms.radius_of_influence.value*g;this.hbaoMaterial.uniforms.radius_in_screen_space.value=L,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=xV,xV.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,xV.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,xV.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}},{key:"dispose",value:function(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}}]),n}(aZ),_V=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,new Pv({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tMap;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uCoords;\n\n// Draws a rectangle at center <st> with size <size>\nfloat rectangle(vec2 st, vec2 size) {\n    size = vec2(0.5) - size * 0.5;\n    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));\n    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));\n\n    return uv.x * uv.y;\n}\n\nuniform vec2 uSize;\nuniform float uScale;\nuniform float uDPR;\nuniform float uCurrent;\nuniform vec3 uSceneColor;\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n    screenUv *= 1.0 / uDPR;\n\n    vec2 center = vec2(0.5, -0.5);\n    vec2 outsideUv = screenUv;\n    outsideUv += center;\n    outsideUv -= uCoords.xy / uResolution.xy;\n    outsideUv = (outsideUv - 0.5) + 0.5;\n    outsideUv -= center;\n    vec2 s = (uSize / uResolution) * uScale;\n    float isOutside = 1.0 - rectangle(outsideUv, s);\n    \n    vec2 mid = vec2(0.5);\n    vec2 insideUv = (screenUv - mid + s * mid) / s;\n    vec4 background = texture2D(tInput, screenUv);\n    vec4 image = texture2D(tMap, insideUv);\n    gl_FragColor = mix(image, background, isOutside);\n}\n",uniforms:{tInput:new sx(null),tMap:new sx(null),uResolution:new sx(new af),uSize:new sx(new af),uCoords:new sx(new af),uScale:new sx(1),uSceneColor:new sx(new wf(16711680)),uDPR:new sx(1),uCurrent:new sx(0)}}),"tInput")).needsSwap=!0,e}return(0,d.Z)(n,[{key:"uniforms",get:function(){return this.fullscreenMaterial.uniforms}},{key:"texture",get:function(){return this.uniforms.tMap.value},set:function(e){this.uniforms.tMap.value=e}}]),n}(TZ),SV=[],kV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this,new Pv({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D toScene;\nuniform sampler2D fromScene;\nuniform vec2 resolution;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nuniform float mixRatio;\nuniform sampler2D tMixTexture;\nuniform int useTexture;\nuniform float threshold;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( fromScene, screenUv );\n\tvec4 texel2 = texture2D( toScene, screenUv );\n\n\tif (useTexture==1) {\n\t\t\n\t\tvec4 transitionTexel = texture2D( tMixTexture, screenUv );\n\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\n\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixf );\n\t} else {\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixRatio );\n\t\t\n\t}\n}\n",uniforms:{toScene:new sx(null),fromScene:new sx(null),uResolution:new sx(new af),uDPR:new sx(1),mixRatio:new sx(0),threshold:new sx(.1),useTexture:new sx(0),tMixTexture:{value:SV[0]}}}),"toScene")).needsSwap=!0,e}return(0,d.Z)(n,[{key:"uniforms",get:function(){return this.fullscreenMaterial.uniforms}},{key:"texture",get:function(){return this.uniforms.fromScene.value},set:function(e){this.uniforms.fromScene.value=e}}]),n}(TZ);function AV(e,t){return t&&t.enabled&&e.push(t.effect),e}var MV=function(e){return Object.values(mZ).includes(e)?e:mZ.NORMAL},CV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this)).postprocessingState=aP.defaultData,i._scene=new ML,i._camera=new wU,i.effects=new Map,i.blueNoiseTexture=new DL,i._renderToScreen=!0,i.clock=new Vb,i.renderer=e,i.debug=!1,i.effects.set("bloom",new tV),i.effects.set("chromaticAberration",new iV),i.effects.set("vignette",new sV),i.effects.set("noise",new oV),i.effects.set("colorAverage",new rV),i.effects.set("hueSaturation",new aV),i.effects.set("brightnessContrast",new nV),i.effects.set("depthOfField",new lV),i.effects.set("pixelation",new uV),i.effectComposer=new mV(i.renderer),i.effectComposer.autoRenderToScreen=!1,i.opaquePass=new vV(!0,i.scene,i.camera),i.opaquePass.clear=!0,i.transmissionPass=new hV(i.scene,i.camera,i.renderer),i.aoPass=new wV(i.scene,i.camera),i.taaPass=new dV,i.taaPass.renderToScreen=!1,i.helperPass=new LV(i.camera),i.helperPass.renderToScreen=!1,i.overlayPass=new _V,i.overlayPass.enabled=!1,i.sceneTransitionPass=new kV,i.sceneTransitionPass.enabled=!1,i._initCopyPass(),i._initPasses(),i}return(0,d.Z)(n,[{key:"overlayTexture",get:function(){return this.overlayPass.texture},set:function(e){void 0!==e?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}},{key:"sceneHelpers",get:function(){return this.helperPass.sceneHelpers},set:function(e){this.helperPass.sceneHelpers=e}},{key:"sceneHelpersOnTop",get:function(){return this.helperPass.sceneHelpersOnTop},set:function(e){this.helperPass.sceneHelpersOnTop=e}},{key:"scene",get:function(){return this._scene},set:function(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}},{key:"camera",get:function(){return this._camera},set:function(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}},{key:"updateRenderToScreen",value:function(){for(var e=!1,t=this.effectComposer.passes.length-1;t>=0;t--){var n=this.effectComposer.passes[t];!0!==n.enabled||e||!this._renderToScreen?n.renderToScreen=!1:(n.renderToScreen=!0,e=!0)}}},{key:"disableHelpers",value:function(){this.helperPass.enabled=!1,this.updateRenderToScreen()}},{key:"enableHelpers",value:function(){this.helperPass.enabled=!0,this.updateRenderToScreen()}},{key:"updateBlueNoiseTexture",value:function(e){this.blueNoiseTexture=new DL(e,128,128),this.blueNoiseTexture.wrapS=md,this.blueNoiseTexture.wrapT=md,this.blueNoiseTexture.minFilter=yd,this.blueNoiseTexture.magFilter=yd,this.blueNoiseTexture.needsUpdate=!0}},{key:"setAmbientOcclusionParams",value:function(e,t,n,i,r,a,o,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=n,this.aoPass.aoColor=i,this.aoPass.fogEnabled=r,this.aoPass.fogNear=a,this.aoPass.fogFar=o,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}},{key:"setTransmissionPassEnabled",value:function(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}},{key:"_initPasses",value:function(){var e,t;if(null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){var n=[this.effects.get("pixelation")].reduce(AV,[]);n.length>0&&(this.uvEffectPass=g(kZ,[this.camera].concat(u(n))),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));var i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(AV,[]);i.length>0&&(this.effectPass=g(kZ,[this.camera].concat(u(i))),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}},{key:"_initCopyPass",value:function(){if(!this._savePass){var e=new af;this.renderer.getDrawingBufferSize(e),this._rt=new Tf(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:md,wrapT:md}),this._rt.samples=0,this._savePass=new oZ(this._rt,!1),this._savePass.renderToScreen=!1}}},{key:"setCopyPass",value:function(e){this._rt=e,this._savePass=new oZ(this._rt,!1),this.renderToScreen=!1}},{key:"renderToScreen",get:function(){return this._renderToScreen},set:function(e){if(this._renderToScreen!==e){var t=this.effectComposer;!t||(!0===e?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}}},{key:"sceneTransitionFromTexture",set:function(e){e!==this.sceneTransitionPass.texture&&(null!==e?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}},{key:"texture",get:function(){return this._rt&&this._rt.texture}},{key:"renderTarget",get:function(){return this._rt}},{key:"updatePostprocessing",value:function(e){var t=e.enabled,n=Li(e,Ku),i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(var r=0,a=Object.entries(n);r<a.length;r++){var s=a[r],l=s[1],u=this.effects.get(s[0]);if(u){u.enabled!==l.enabled&&(i=!0),u.enabled=l.enabled;for(var c=0,d=Object.entries(l);c<d.length;c++){var h=o(d[c],2),f=h[0],p=h[1];"blendFunction"===f?u.blendFunction=MV(p):u[f]=p}}}this.postprocessingState=e,i&&this._initPasses()}},{key:"render",value:function(){this.effectComposer.render(this.clock.getDelta())}},{key:"setScissor",value:function(e,t,n,i){e instanceof Ef?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,n,i),this.effectComposer.outputBuffer.scissor.set(e,t,n,i));var r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(e,t,n,i)}},{key:"setScissorTest",value:function(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}},{key:"setViewport",value:function(e,t,n,i){e instanceof Ef?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,n,i),this.effectComposer.outputBuffer.viewport.set(e,t,n,i))}},{key:"resize",value:function(e,t,n){if(this.effectComposer.setSize(e,t,n),this._rt){var i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}},{key:"dispose",value:function(){var e,t;null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.dispose()}}]),n}(Vh),EV=new Cf,TV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,e))._pixelRatio=i.getPixelRatio(),i.viewportWidth=1,i.viewportHeight=1,i.resolution=new af,i.pipeline=new CV((0,Ye.Z)(i)),i.dummyCamra=new wU,i.sceneTransitionDuration=0,i.sceneTransitionTimeRemaining=-1,i.isXRCopyPassSet=!1,i.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i.getContext(),a=0;e&&(a|=r.COLOR_BUFFER_BIT),t&&(a|=r.DEPTH_BUFFER_BIT),n&&(a|=r.STENCIL_BUFFER_BIT),r.clear(a),r.clearBufferfv(r.COLOR,1,[0,0,0,1])},i.autoClear=!1;var r=i.setPixelRatio.bind((0,Ye.Z)(i)),a=i.setSize.bind((0,Ye.Z)(i));i.shadowMap.enabled=!0,i.shadowMap.type=bc;var o=i.getContext();if(o&&"drawingBufferColorSpace"in o)try{o.drawingBufferColorSpace="display-p3"}catch(Nz){console.warn(Nz)}return i.setPixelRatio=function(e){i._pixelRatio!==e&&(i._pixelRatio=e,r(e))},i.setSize=function(e,t){var n,r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(i.viewportWidth!==e||i.viewportHeight!==t)&&(i.viewportWidth=e,i.viewportHeight=t,a(e,t,o),null!==(n=i.normalRenderTarget)&&void 0!==n&&n.setSize(e*i._pixelRatio,t*i._pixelRatio),i._resizeTransmission(e,t),null!==(r=i.transmissionDepthTarget)&&void 0!==r&&r.setSize(e*i._pixelRatio/2,t*i._pixelRatio/2),i.pipeline.resize(e,t,o))},i._superDispose=i.dispose,i.dispose=i._currentDispose,i}return(0,d.Z)(n,[{key:"createAORenderTarget",value:function(){void 0===this.aoRenderTarget&&(this.aoRenderTarget=new Tf(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:wd,magFilter:wd,wrapS:gd,wrapT:gd,depthBuffer:!1}))}},{key:"_resizeTransmission",value:function(e,t){var n,i;null!==(n=this.transmissionRenderTarget)&&void 0!==n&&n.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),null===(i=this.aoRenderTarget)||void 0===i||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}},{key:"hdTransmission",get:function(){return 1===tF.transmissionLod.value},set:function(e){tF.transmissionLod.value=!0===e?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}},{key:"createTransmissionRenderTarget",value:function(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new Tf(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Sd,magFilter:wd,wrapS:gd,wrapT:gd,depthBuffer:!1}),this.transmissionDepthTarget=new Tf(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:yd,magFilter:yd,depthBuffer:!1}))}},{key:"createNormalRenderTarget",value:function(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new Tf(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:yd,magFilter:yd,type:Pd,depthTexture:new bL(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}},{key:"renderNormal",value:function(e,t,n){this.normalRenderTarget&&(this.setClearColor(0),n.layers.enable(8),n.layers.disable(0),n.layers.disable(3),t.traverseEntity((function(e){e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!1)})),this.setRenderTarget(this.normalRenderTarget),this.clear(),NU.uniforms.depthContrast.value=n instanceof wU?(n.far-n.near)/1e4:1,t.overrideMaterial=NU,this.render(t,n),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?iG:null,n.layers.enable(0),n.layers.enable(3),t.traverseEntity((function(e){e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!0)})))}},{key:"renderSplineSceneWithDummyCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.dummyCamra.updateCameraState(t.dataPatched);var i=t.height,r=t.width,a=this.viewportWidth/this.viewportHeight;r<i?r=i*a:i=r/a,this.dummyCamra.setViewplaneSize(r,i);for(var o=0;o<n;o++)this.renderSplineScene(e,this.dummyCamra)}},{key:"renderSplineScene",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.sceneHelpers,r=void 0===i?void 0:i,a=n.sceneHelpersOnTop,o=void 0===a?void 0:a,s=n.overrideTransmission,l=void 0===s?void 0:s,u=n.overrideNormal,c=void 0===u?void 0:u,d=e instanceof aG?e.activePage:e,h=d.visible;d.visible=!0;var f=d.scene;this.xr.enabled&&(!1===this.isXRCopyPassSet&&null!==this.getRenderTarget()&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(d.bgColor,d.bgColor.a),d.penumbraSizeArray.forEach((function(e,t){tF.penumbraSize.value[t]=e})),tF.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?tF.resolution.value.set(this.resolution.x,this.resolution.y):tF.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==c?(tF.normalRenderTarget.value=c,tF.normalRenderTargetDepth.value=EV):f.needsNormal()&&(this.createNormalRenderTarget(),tF.normalRenderTarget.value=this.normalRenderTarget.texture,tF.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(f,d,t));var p=d.data.ao,v=p.occlusion;v&&(this.createAORenderTarget(),tF.aoRenderTarget.value=this.aoRenderTarget.texture),tF.aoEnabled.value=v,this.pipeline.setAmbientOcclusionParams(p.occlusion,p.radius,p.bias,d.aoColor,null!==d.fog,d.backupFog.near,d.backupFog.far,p.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);var m=!1;if(void 0!==l)tF.transmissionRenderTarget.value=l,tF.transmissionRenderTargetDepth.value=EV,this.pipeline.setTransmissionPassEnabled(!1);else{var g=f.needsTransmission();g&&(void 0===this.transmissionRenderTarget&&(m=!0),this.createTransmissionRenderTarget(),tF.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,tF.aspectRatio.value=function(e,t){return e>=t?new af(t/e,1):new af(1,e/t)}(this.viewportWidth,this.viewportHeight),tF.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(g)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=o,this.pipeline.scene=d,this.pipeline.camera=t,m&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==d.postprocessing&&(this.pipeline.updatePostprocessing(d.postprocessing),!r&&!o&&this.pipeline.disableHelpers()),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),d.overrideMaterial=f.wireframeState?iG:null,this.pipeline.render(),tF.frameIndex.value=(tF.frameIndex.value+1)%16,t instanceof wU&&t.copyHistory(),d.visible=h}},{key:"renderFromSceneForSceneTransitionPass",value:function(e,t,n){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=n,this.sceneTransitionTimeRemaining=n,this.pipeline.renderToScreen=!0;var i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}},{key:"_currentDispose",value:function(){var e,t,n,i,r;this._superDispose(),this.pipeline.dispose(),null!==(e=this.aoRenderTarget)&&void 0!==e&&e.dispose(),null!==(t=this.transmissionRenderTarget)&&void 0!==t&&t.dispose(),null!==(n=this.transmissionDepthTarget)&&void 0!==n&&n.dispose(),null!==(i=this.normalRenderTarget)&&void 0!==i&&i.dispose(),null===(r=this.normalRenderTarget)||void 0===r||null===(r=r.depthTexture)||void 0===r||r.dispose()}}]),n}(SL),PV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10066329;return(0,c.Z)(this,n),(i=t.call(this,e,r,a)).object=e,i.added=!1,i.name="DirectionalLightHelper: ".concat(e.uuid),i}return(0,d.Z)(n,[{key:"raycast",value:function(e,t){lU(this.object,n.geometryHelper,e,t)}}]),n}(rU(_x)),DV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6710886;return(0,c.Z)(this,n),(i=t.call(this,e,r,a)).object=e,i.name="PointLightHelper: ".concat(e.uuid),i}return(0,d.Z)(n,[{key:"raycast",value:function(e,t){lU(this.object,n.geometryHelper,e,t)}}]),n}(rU(yx)),OV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6710886;return(0,c.Z)(this,n),(i=t.call(this,e,r)).object=e,i.name="SpotLightHelper: ".concat(e.uuid),i}return(0,d.Z)(n,[{key:"raycast",value:function(e,t){lU(this.object,n.geometryHelper,e,t)}},{key:"update",value:function(){if(void 0!==this.object){var e=n._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);var r=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(var a=0,o=this.cone.material.length;a<o;a++)this.cone.material[a].color.set(r);else this.cone.material.color.set(r)}}}]),n}(rU(Lx)),IV=OV;IV._vector=new Rf;var RV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n),(a=t.call(this)).super_Entity(e,i),a.castShadow=!0,a.shadow.mapSize.width=2048,a.shadow.mapSize.height=2048,a.shadow.normalBias=1,a.layers.enable(3);var o=a.shadow.camera;o.top=1250,o.bottom=-1250,o.right=1250,o.left=-1250,o.near=-1e4,o.far=2500;var s=new Ax(a.shadow.camera);return s.visible=!1,a.gizmos.shadowmap=s,a}return(0,d.Z)(n,[{key:"update",value:function(){for(var e in this.shadow.camera.updateProjectionMatrix(),this.gizmos){var t=this.gizmos[e];t instanceof Ax&&t.update()}}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.objectHelper&&this.objectHelper.update()}},{key:"updateState",value:function(e,t){this.updateState_Light(e,t);var n=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;void 0!==e.size&&function(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),n&&this.update()}}]),n}(CU(jb,PV)),BV=new Rf,NV=new Rf,zV=new If,FV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n),(a=t.call(this)).super_Entity(e,i),a.castShadow=!0,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a.shadow.normalBias=1,a.layers.enable(3);var o=a.shadow.camera;o.fov=2*rf.RAD2DEG*a.angle,o.aspect=1,o.near=100,o.far=2500;var s=new Ax(a.shadow.camera);return s.visible=!1,a.gizmos.shadowmap=s,a.update(),a}return(0,d.Z)(n,[{key:"update",value:function(){for(var e in this.shadow.camera.updateProjectionMatrix(),this.gizmos){var t=this.gizmos[e];t instanceof Ax&&t.update()}}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),NV.setFromMatrixPosition(this.matrixWorld),zV.setFromRotationMatrix(this.matrixWorld),BV.copy(this.up).applyQuaternion(zV).negate().multiplyScalar(this.distance),this.target.position.copy(NV).add(BV),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}},{key:"updateState",value:function(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}}]),n}(CU(Ob,IV)),jV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).data=i,r.bgColor=new CN(1,1,1,1),r.fog=null,r.backupFog=new AL(16777215,.1,2e3),r.fogUseBGColor=!1,r.isActive=!1,r.aoColor=new wf,r.penumbraSizeArrayCache=null,r.super_Entity(e,i),r.personalCamera=new wU(MT,$e($e($e({},LP.defaultData),i.camera),{},{name:"Personal Camera"})),r.personalCamera.objectHelper.visible=!1,r.add(r.personalCamera),r.activeCamera=r.personalCamera,r.ambientLight=new Mb(13882323,8553090,.75),r.ambientLight.name="Default Ambient Light",r.ambientLight.layers.enable(3),r.ambientLight.removeFromParent(),r.add(r.ambientLight),r}return(0,d.Z)(n,[{key:"scene",get:function(){return this.parent}},{key:"postprocessing",get:function(){return this.data.postprocessing}},{key:"updateVisible",value:function(){}},{key:"setBackgroundColor",value:function(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}},{key:"updateAmbientLight",value:function(e,t){void 0!==e.color&&(this.ambientLight.color=LF(e.color,t)),void 0!==e.intensity&&(this.ambientLight.intensity=e.intensity),void 0!==e.enabled&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}},{key:"onDeactive",value:function(){this.isActive=!1}},{key:"onActive",value:function(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}},{key:"forceMaterialsUpdate",value:function(){this.traverseEntity((function(e){if(e instanceof sj)if(Array.isArray(e.material)){var t,n=(0,x.Z)(e.material);try{for(n.s();!(t=n.n()).done;){t.value.needsUpdate=!0}}catch(i){n.e(i)}finally{n.f()}}else e.material.needsUpdate=!0,e.material.dispose()}))}},{key:"updateShadow",value:function(e){void 0!==e.softShadowQuality&&this.isActive&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";if(BU===e)return!1;BU=e;var t=function(e){switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}}(e);Xv.shadowmap_pars_fragment=function(e){return"\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ".concat(e,";\nconst int gShadowSamples = ").concat(e,";\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, ",5," - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        vec2 halton = haltonSequence[frameIndex];\n        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n        float temporalAngle  = temporalOffset * PI2;\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n")}(t);var n=IU.slice();n=(n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + ".concat(3,", spotShadowMap[ i ]"))).replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Xv.lights_fragment_begin=n;var i=RU.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Xv.shadowmask_pars_fragment=i,!0}(e.softShadowQuality)&&this.forceMaterialsUpdate()}},{key:"updateFog",value:function(e,t){(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive)&&(this.scene.fog=this.fog);this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=LF(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}},{key:"updateAo",value:function(e,t){void 0!==e.aoColor&&(this.aoColor=LF(e.aoColor,t))}},{key:"updateByOp",value:function(e,t,i,r){Au((0,p.Z)(n.prototype),"updateByOp",this).call(this,e,t,i,r);var a=t;CC(e.path,["fog"])?this.updateFog(a.fog,i.shared):CC(e.path,["ao"])?this.updateAo(a.ao,i.shared):CC(e.path,["ambient"])?this.updateAmbientLight(a.ambient,i.shared):CC(e.path,["shadow"])&&this.updateShadow(a.shadow)}},{key:"updateState",value:function(e,t){this.updateState_Entity(e,t),void 0!==e.backgroundColor&&this.setBackgroundColor(LF(e.backgroundColor,t.shared)),void 0!==e.fog&&this.updateFog(e.fog,t.shared),void 0!==e.ambient&&this.updateAmbientLight(e.ambient,t.shared),void 0!==e.ao&&this.updateAo(e.ao,t.shared),void 0!==e.shadow&&this.updateShadow(e.shadow)}},{key:"raycast",value:function(e,t){Au((0,p.Z)(n.prototype),"raycast",this).call(this,e,t)}},{key:"switchActiveCamera",value:function(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}},{key:"playCamera",get:function(){var e,t;return null!==(e=null===(t=this.scene)||void 0===t?void 0:t.find(this.data.publish.playCamera))&&void 0!==e?e:this.personalCamera}},{key:"switchToPlayCamera",value:function(){this.switchActiveCamera(this.playCamera)}},{key:"penumbraSizeArray",get:function(){return null===this.penumbraSizeArrayCache&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}},{key:"updatePenumbraSizeArray",value:function(){var e=this;this.penumbraSizeArrayCache=new Array(5).fill(.5);var t=0,n=0;this.traverseEntity((function(i){if(!i.visible)return!0;i instanceof RV&&i.visible&&t<3&&(e.penumbraSizeArrayCache[t]=i.data.penumbraSize,t+=1),i instanceof FV&&i.visible&&t<2&&(e.penumbraSizeArrayCache[3+n]=i.data.penumbraSize,n+=1)}))}},{key:"raycastWithClones",value:function(e){var t=this,n=[];return function i(r){var a,o=(0,x.Z)(r.children);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.cloner;OO.is(s)&&(s.visible||(null===l||void 0===l?void 0:l.object.data.visible))&&((EU(s)||PU(s)&&t.scene.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,n),tG(s,e,n,!0)),i(s))}}catch(u){o.e(u)}finally{o.f()}}(this),n}}]),n}($O(ML)),UV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;(0,c.Z)(this,n),(a=t.call(this)).super_Entity(e,i),a.castShadow=!0,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a.shadow.normalBias=1,a.layers.enable(3);var o=a.shadow.camera;o.fov=90,o.aspect=1,o.near=100,o.far=2500;var s=new Rf(-o.far+a.position.x,-o.far+a.position.y,-o.far+a.position.z),l=new Rf(o.far+a.position.x,o.far+a.position.y,o.far+a.position.z),u=new zf(s,l),d=new Cx(u,new wf(16755200));return d.visible=!1,a.gizmos.shadowmap=d,a.update(),a}return(0,d.Z)(n,[{key:"update",value:function(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(var e in this.gizmos){var t=this.gizmos[e];if(t instanceof Cx){var n=this.shadow.camera,i=new Rf(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new Rf(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);t.box.set(i,r),t.updateMatrixWorld(!0)}}}},{key:"updateMatrixWorld",value:function(e){Au((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.objectHelper&&this.objectHelper.update()}},{key:"updateState",value:function(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}}]),n}(CU(zb,DV)),ZV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"forceComputeSize",get:function(){return!0}},{key:"shape",get:function(){return this.geometry.userData.shape}},{key:"updateEntityBoxSize",value:function(e,t){var i=this.geometry.getAttribute("position");void 0!==i?mN(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):Au((0,p.Z)(n.prototype),"updateEntityBoxSize",this).call(this,e,t)}}]),n}(fj),VV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,i,r))._shapeId=null,a._context=r,a}return(0,d.Z)(n,[{key:"updateState",value:function(e,t){Au((0,p.Z)(n.prototype),"updateState",this).call(this,e,t),this.updateShape()}},{key:"updateShape",value:function(){var e,t=this,n=this.data.geometry.extrusion.shape;if("Custom"===n.type){var i=n.shapeId;if(i!==this._shapeId&&this.detachShape(),i){var r;this._shapeId=i;var a=this._context.scene.find(i);null!==a&&void 0!==a&&a.data&&(a.attachedPaths.add(this),e=null===(r=a.geometry.userData)||void 0===r?void 0:r.shape),e||this._context.scene.addPendingCommand((function(){return t.updateShape()}))}}else{var o;switch(n.type){case"Rectangle":o=dB;break;case"Ellipse":o=kR;break;case"Polygon":o=aB;break;case"Star":o=mB;break;default:throw new Error("Unknown shape type: ".concat(n.type))}e=o.create({parameters:n}).userData.shape}var s=this.geometry;e&&s.inputs&&(s.inputs.shapeData=e,s.build(),this.attachedSurfaceCloners.forEach((function(e){return e.update()})))}},{key:"detachShape",value:function(){var e;null!==this._shapeId&&(null===(e=this._context.scene.find(this._shapeId))||void 0===e||e.attachedPaths.delete(this))}},{key:"createGeometryDelayed",value:function(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}},{key:"updateTransformState",value:function(e){return Au((0,p.Z)(n.prototype),"updateTransformState",this).call(this,e)}},{key:"updateGeometryInteractions",value:function(e,t){Au((0,p.Z)(n.prototype),"updateGeometryInteractions",this).call(this,e,t),this.updateShape()}},{key:"updateEntityBoxSize",value:function(e,t){var i=this.geometry.getAttribute("position");void 0!==i?mN(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):Au((0,p.Z)(n.prototype),"updateEntityBoxSize",this).call(this,e,t)}}]),n}(fj),GV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;return(0,c.Z)(this,n),a=t.call(this),"Instance"===i.type&&"string"==typeof e&&(i=a.transformAssignData(i,r)),a.super_Entity(e,i),a.objectHelper.update(),a}return(0,d.Z)(n,[{key:"isComponentRoot",get:function(){return"Component"===this.data.type&&"string"==typeof this.identity}},{key:"isInstanceRoot",get:function(){return"Instance"===this.data.type&&"string"==typeof this.identity}},{key:"transformAssignData",value:function(e,t){var n=t.scene.data.objects.get(e.component);if(n){var i,r,a,o=(0,x.Z)(xP.rootOverrideProps);try{for(o.s();!(a=o.n()).done;){var s=a.value;void 0===e[s]?(void 0===i&&(i=$e({},e)),i[s]=n.data[s]):(void 0===r&&(r={}),r[s]=e[s],void 0===i&&(i=$e({},e)),i[s]=KM.apply(n.data[s],e[s]))}}catch(l){o.e(l)}finally{o.f()}return this.overrideData=r,i}return $e($e($e({},pP.defaultData),e),cM(pP.defaultData,xP.rootOverrideProps))}},{key:"updateByOp",value:function(e,t,i,r){var a,o;if(this.isInstanceRoot&&!r)if(t=this.transformAssignData(t,i),0===e.type&&0===e.path.length&&this.component){var s,l=(0,x.Z)(xP.rootOverrideProps);try{for(l.s();!(s=l.n()).done;){var u=s.value;u in e.props&&void 0===e.props[u]&&(void 0===o&&(o=$e($e({},e),{},{props:$e({},e.props)})),o.props[u]=this.component.data[u])}}catch(d){l.e(d)}finally{l.f()}}else if(0===e.type&&e.path.length>0&&xP.rootOverrideProps.includes(e.path[0])){var c=e.path[0];void 0===o&&(o=$e($e({},e),{},{path:[],props:Ke({},c,t[c])}))}Au((0,p.Z)(n.prototype),"updateByOp",this).call(this,null!==(a=o)&&void 0!==a?a:e,t,i,r)}},{key:"updateState",value:function(e,t){this.updateState_Entity(e,t)}},{key:"expandInstanceChildren",value:function(e){var t=this.data;if(void 0===this.component){var n,i=null!==(n=e.scene.find(t.component))&&void 0!==n?n:null,r=!1;if(i!==this.oldComponent){if(this.oldComponent){var a,o=0,s=(0,x.Z)(this.children);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(!OO.is(l))break;e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(l),HV(l),o+=1}}catch(p){s.e(p)}finally{s.f()}this.children.splice(0,o)}r=!0}if(i){var u={};qV(e,[this.uuid],t.overrides,this,i,i,0,r,u);var c,d=(0,x.Z)(this.children);try{for(d.s();!(c=d.n()).done;){var h=c.value;if(OO.is(h)){var f=h.data;"Empty"===f.type&&f.animations&&h.traverseEntity((function(t){if(t instanceof fj&&t.isSkinnedMesh){var n=t.dataPatched;if(n.bones&&n.boneInverses){var i=n.bones.map((function(t){return e.scene.find(u[t])})),r=n.boneInverses.map((function(e){return(new dp).fromArray(e)})),a=new RL(i,r);t.bind(a,t.bindMatrix)}}else t.matrixAutoUpdate=!0}))}}}catch(p){d.e(p)}finally{d.f()}}this.oldComponent=this.component}}}]),n}(vU(gL,DU));function HV(e){if(e.component){var t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);var n,i=(0,x.Z)(e.children);try{for(i.s();!(n=i.n()).done;){var r=n.value;OO.is(r)&&HV(r)}}catch(a){i.e(a)}finally{i.f()}}}function WV(e,t,n,i){return e.component===t&&tM(e.identity,i)?e.overrideData===n?2:1:0}function qV(e,t,n,i,r,a,o,s,l){if(o>50)return!1;if(i.component!==r){if(i.component){var c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}r.instances.push(i),i.component=r}r instanceof GV&&r.isInstanceRoot&&r.expandInstanceChildren(e);var d,h=0,f=(0,x.Z)(r.children);try{for(f.s();!(d=f.n()).done;){var p=d.value;if(OO.is(p)){var v=[].concat(u(t),u("string"==typeof p.identity?[p.identity]:p.identity)),m=bP.resolve(n,v,1);null==m||m instanceof tC||(Object.setPrototypeOf(m,tC.prototype),console.error("wrong prototype"));var g=null,L=void 0;if(!s){var y,b=i.children[h];if(null!==(g=OO.is(b)?b:null)){var w=WV(g,p,m,v);L=w>=1?g.stateSelection:void 0,2!==w&&(g=null)}if(null===g&&null!==(g=null!==(y=e.scene.findInstance(v))&&void 0!==y?y:null)){var _=WV(g,p,m,v);if(L=_>=1?g.stateSelection:void 0,2!==_)g=null;else{var S=g.parent.children.indexOf(g);g.parent.children.splice(S,1),i.children.splice(h,0,g),g.parent===i?S<=h&&console.error("not possible"):(g.parent=i,g.matrixWorldNeedsUpdate=!0,g.resetBBoxNeedsUpdate(),g.updateVisible(),e.pendingDeletes.delete(g))}}}if(null===g){var k=m?KM.apply(p.data,m):p.data;_T.is(k.type)&&(k=$e($e({},k),{},{type:"Empty"})),(g=HO.createEntity(v,k,e)).overrideData=m,i.add(g),i.children.splice(i.children.length-1,1),i.children.splice(h,0,g),g.updateState(g.data,e),L&&g.changeSelectedState(L,e),e.scene.registerInstanceAndSetUuid(g)}if(g.isBone)l[g.identity[g.identity.length-1]]=g.uuid;h+=1,qV(e,t,n,g,p,a,o+1,s,l)}}}catch(C){f.e(C)}finally{f.f()}if(!s){for(var A=h;;){var M=i.children[h];if(!OO.is(M))break;e.pendingDeletes.add(M),h+=1}i.children.splice(A,h-A)}return!0}var XV=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).super_Entity(e,i),r.objectHelper.update(),r.matrixAutoUpdate=!0,r}return(0,d.Z)(n,[{key:"updateState",value:function(e,t){this.updateState_Entity(e,t)}}]),n}(vU(PL,DU));function YV(e,t,n){return"Mesh"===t.type?function(e,t,n){return"TextGeometry"===t.geometry.type?new Gj(e,t,n):"SubdivGeometry"===t.geometry.type?new yj(e,t,n):"PathGeometry"===t.geometry.type?new VV(e,t,n):"VectorGeometry"===t.geometry.type?new ZV(e,t,n):"BooleanGeometry"===t.geometry.type?new MU(e,t,n):new fj(e,t,n)}(e,t,n):"Empty"===t.type?new OU(e,t):"Bone"===t.type?new XV(e,t):"Page"===t.type?new jV(e,t):"PointLight"===t.type?new UV(e,t,n):"SpotLight"===t.type?new FV(e,t,n):"DirectionalLight"===t.type?new RV(e,t,n):"Component"===t.type||"Instance"===t.type?new GV(e,t,n):_T.is(t.type)?new wU(e,t):(console.error(t),new OU(e,t))}function QV(e,t){var n=!1,i=t.getLayersOfType("transmission"),r=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),n=!0,vj(e),pj(e)),0===i.length&&0===r.length&&e.layers.set(0),e instanceof sj&&e.needsAO&&e.layers.enable(5),n}function KV(e,t){if(!t.layers)return!1;var n=!1,i=t.getLayersOfType("transmission").filter((function(e){return e.data.visible})),r=t.getLayersOfType("outline").filter((function(e){return e.data.visible}));return i.length>0&&(e.layers.set(3),r.length>0&&e.layers.enable(8),n=!0),0===i.length&&0===r.length&&e.layers.set(0),e.needsAO&&e.layers.enable(5),n}HO.createEntity=YV,HO.changeEntityProptotype=function(e,t,n){var i=YV(e.identity,t,n),r=e.children,a=e.attachedPaths,o=e.parent,s=e.component,l=e.instances,c=e.overrideData,d=e.uuid,h=e.stateSelection;e.dispose();for(var f=0,p=Object.keys(e);f<p.length;f++){delete e[p[f]]}Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(var v=0,m=Object.keys(i);v<m.length;v++){var g=m[v];e[g]=i[g]}e.children=[].concat(u(e.children),u(r)),e.attachedPaths=a,e.parent=o,e.component=s,e.instances=l,e.uuid=d,e.overrideData=c,e.updateState(e.data,n),h&&e.changeSelectedState(h,n),e.resetBBoxNeedsUpdate()},HO.Cloner=iU;var JV=new lx,$V=new dp,eG=new cp;function tG(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.cloner;if(r){var a,o=(0,x.Z)(r.children);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=$V.copy(s.matrixWorld).invert(),u=eG.copy(t.ray).applyMatrix4(l),c=e.matrixWorld;u.applyMatrix4(c);var d=JV;d.set(u.origin,u.direction),d.near=t.near,d.far=t.far;var h=d.intersectObject(e,!1);h.length>0&&n.push($e($e({},h[0]),{},{object:i?s:e}))}}catch(f){o.e(f)}finally{o.f()}}}var nG=function(){function e(){(0,c.Z)(this,e),this._constraints=new Map}return(0,d.Z)(e,[{key:"setConstraint",value:function(e,t){null===t?this._constraints.delete(e):this._constraints.set(e,t)}},{key:"removeDependencies",value:function(e){this._constraints.delete(e)}},{key:"applyConstraints",value:function(e){var t=this,n=new Set;this._constraints.forEach((function(i,r){for(var a=[r,i],o=i;t._constraints.has(o);)o=t._constraints.get(o),n.has(o)||a.push(o);for(var s=a.length-2;s>=0;s--)if(!n.has(a[s])){var l=e.find(a[s]);l?l.applyPathSnapping(e):console.warn("missing entity ".concat(a[s])),n.add(a[s])}}))}},{key:"findDependency",value:function(e,t){for(var n=e;this._constraints.has(n);)if((n=this._constraints.get(n))===t)return!0;return!1}}]),e}(),iG=new Qp;iG.wireframe=!0;var rG=new Rf,aG=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).data=e,r.enableHelpers=!1,r.wireframeState=!1,r.needsTransmissionDirty=!0,r.needsNormalDirty=!0,r._needsTransmission=!1,r._needsNormal=!1,r.geometryCacheChanged=!1,r.entityByUuid={},r.entityIdentityToEntity={},r.toExpandCloner=new Set,r.toUpdateCloner=new Set,r.pendingCommands=[],r.pathConstraints=new nG,r.errorPage=new jV("fdasfa",$e($e({},wP.defaultData),{},{name:""})),r.needsRecomputeInstances=!1,r.init(e,i),r.matrixAutoUpdate=!1,r}return(0,d.Z)(n,[{key:"markGeometryCacheDirty",value:function(){this.geometryCacheChanged=!0}},{key:"markNeedsUpdateRendererDirty",value:function(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}},{key:"needsTransmission",value:function(){return this.needsTransmissionDirty&&(this._needsTransmission=function(e){var t=!1;return e.traverseEntity((function(e){if(e instanceof sj)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)KV(e,e.material[n])&&(t=!0);else KV(e,e.material)&&(t=!0)})),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}},{key:"needsNormal",value:function(){return this.needsNormalDirty&&(this._needsNormal=function(e){var t=!1;return e.traverseEntity((function(e){if(e instanceof sj)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)QV(e,e.material[n])&&(t=!0);else QV(e,e.material)&&(t=!0)})),t}(this),this.needsNormalDirty=!1),this._needsNormal}},{key:"registerInstanceAndSetUuid",value:function(e){var t=e.identity.join("-"),n=this.entityIdentityToEntity[t];n&&(e.uuid=n.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}},{key:"markPenumbraSizeDirty",value:function(){var e,t=(0,x.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n instanceof jV&&(n.penumbraSizeArrayCache=null)}}catch(i){t.e(i)}finally{t.f()}}},{key:"findInstance",value:function(e){return this.entityIdentityToEntity[e.join("-")]}},{key:"bgColor",get:function(){return this.activePage.bgColor}},{key:"postprocessing",get:function(){return this.activePage.data.postprocessing}},{key:"getWithSortKey",value:function(e){var t=this.find(e);if(void 0!==t){for(var n=[],i=t;i!==this;){var r=i,a=(i=i.parent).children.indexOf(r);n.splice(0,0,a)}return{entity:t,sortKey:n}}}},{key:"getAllSorted",value:function(e){var t,n=[],i=(0,x.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=this.getWithSortKey(r.id);void 0!==a&&n.push(a)}}catch(o){i.e(o)}finally{i.f()}return n.sort((function(e,t){return function(e,t){for(var n=0;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(e.sortKey,t.sortKey)})),n.map((function(e){return e.entity}))}},{key:"nonExistOrDescendantOf",value:function(e,t){var n=this.find(e);if(void 0===n)return!0;for(;n;){if(n.uuid===t)return!0;n=n.parent}return!1}},{key:"find",value:function(e){if(this.activePage&&this.activePage.personalCamera.parent){if("f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera"===e)return this.activePage.personalCamera;if(e===MT)return this.activePage.personalCamera}if(""!==e&&void 0!==e){var t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}}},{key:"debugEnsureEntity",value:function(e){var t=this.find(e);t?Array.isArray(t.identity)&&void 0===this.findInstance(t.identity)&&console.error("not found instance"):console.error("not found")}},{key:"addPendingExpandCloner",value:function(e){this.toExpandCloner.add(e)}},{key:"addPendingUpdateCloner",value:function(e){this.toUpdateCloner.add(e)}},{key:"markToExpandCloner",value:function(e){var t=this;this.toExpandCloner.add(e),e.traverseEntityAncestors((function(e){t.toExpandCloner.add(e)}))}},{key:"doPendingExpandCloner",value:function(){var e=this;this.toExpandCloner.forEach((function(t){t.expandCloner(e)})),this.toExpandCloner.clear()}},{key:"doPendingUpdateCloner",value:function(){this.toUpdateCloner.forEach((function(e){var t;null===(t=e.cloner)||void 0===t||t.update()})),this.toUpdateCloner.clear()}},{key:"doPendingUpdates",value:function(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}},{key:"addPendingCommand",value:function(e){this.pendingCommands.push(e)}},{key:"applyPendingCommands",value:function(){this.pendingCommands.forEach((function(e){return e()})),this.pendingCommands.length=0}},{key:"updateTreeByOp",value:function(e,t){if(0===e.path.length&&7===e.type){var n=null===e.parent?this:this.find(e.parent);if(void 0===n)throw new Error("unexpected");var i=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);i.updateVisible(),i.resetBBoxNeedsUpdate(),EU(i)&&TU(i.parent)&&(i.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markToExpandCloner(i),this.markPenumbraSizeDirty()}else if(0===e.path.length&&8===e.type){var r=this.find(e.id);if(void 0===r)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);var a=r.parent;this.markNeedsRecomputeInstancesForAncessors(a),this.markNeedsRecomputeInstancesForChildren(r),this.markPenumbraSizeDirty(),r.parent.remove(r),TU(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),EU(r)&&(r.freeBooleanPointer(),a instanceof MU&&a.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof VV&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),this.pathConstraints.removeDependencies(r.uuid)}else if(0===e.path.length&&9===e.type){var o,s=this.find(e.id);if(void 0===s)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(s);var l=s.parent;this.markNeedsRecomputeInstancesForAncessors(l),null!==(o=s.cloner)&&void 0!==o&&o.resetOnMove(),this.markToExpandCloner(s);var u=null===e.parent?this:this.find(e.parent);if(void 0===u)throw new Error("unexpected");u.add(s),this.markNeedsRecomputeInstancesForAncessors(u),this.markToExpandCloner(s),s.invalidateClonerTransform(s),s.updateVisible(),s.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();var c=e.localIndex;u.children.splice(c,0,u.children.pop()),EU(s)&&(s.invalidateUpstreamBooleanData(),TU(s.parent)?s.parent.invalidateDownstreamBooleanData().recomputeBoolean():l instanceof MU&&l.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}},{key:"playPage",get:function(){var e;return null!==(e=this.find(this.data.publish.playPage))&&void 0!==e?e:this.errorPage}},{key:"updatePage",value:function(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof jV&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)))}}catch(r){n.e(r)}finally{n.f()}}},{key:"updateEntityByOp",value:function(e,t,n,i){if(0===t.type){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){var r=t.props.rest;t=$e($e({},t),{},{props:r}),this.markNeedsRecomputeInstances()}"pathSnapping"===t.path[0]&&void 0!==t.props.pathId&&this.pathConstraints.setConstraint(e,t.props.pathId)}var a=this.find(e);if(a)try{(function(e,t,n,i){e.updateByOp(t,n,i,!1)})(a,t,n,{scene:this,shared:i}),a instanceof fj&&a.updateGeometryGroupsIfNeeded()}catch(r){console.error(r)}}},{key:"activeCamera",get:function(){return this.activePage.activeCamera}},{key:"switchActiveCamera",value:function(e){this.activePage.switchActiveCamera(e)}},{key:"init",value:function(e,t){this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity((function(e){TU(e)&&e.recomputeBoolean(),e instanceof wU&&e.updateUp()})),this.doPendingExpandCloner(),this.applyPendingCommands()}},{key:"markNeedsRecomputeInstances",value:function(){this.needsRecomputeInstances=!0}},{key:"markNeedsRecomputeInstancesForChildren",value:function(e){var t=this;e.traverseEntity((function(e){("Component"===e.data.type||"Instance"===e.data.type)&&t.markNeedsRecomputeInstances()}))}},{key:"markNeedsRecomputeInstancesForAncessors",value:function(e){var t=this;OO.is(e)&&("Component"===e.data.type&&this.markNeedsRecomputeInstances(),e.traverseAncestors((function(e){OO.is(e)&&"Component"===e.data.type&&t.markNeedsRecomputeInstances()})))}},{key:"relativeizeInner",value:function(e,t,n,i,r,a,o){var s=this;if(e){var l=i.find(e);l&&l!==i&&r.forInstancesRec((function(i){i.data=AC(i.data,(function(r){var l=r.events.data(o.id),c=i.goUp(a);if(c){var d=[].concat(u(yM(c.identity)),[e]).join("-"),h=s.entityIdentityToEntity[d];if(h){var f=h.uuid;wC.zoom(l,t)[n]=f}else console.warn("cannot find instance")}})).data}))}}},{key:"rewriteActions",value:function(e,t,n,i,r,a){var o=this;e.forEach((function(e){("Transition"===e.data.type||"Animation"===e.data.type)&&o.relativeizeInner(e.data.object,[].concat(u(t),[e.id]),"object",n,i,r,a)}))}},{key:"rewriteEventsBeforeGoToPlayMode",value:function(){var e=this;this.traverseEntity((function(t){if(t instanceof GV&&"string"==typeof t.identity&&"Component"===t.data.type)return t.traverseEntity((function(n,i){n.data.events.forEach((function(r){if("GameControl"===r.data.type){var a=!1;if(n.forInstancesRec((function(e){e.data=AC(e.data,(function(t){e.isInstanceRoot||(t.events.delete(r.id),a=!0)})).data})),!1===a){var o,s=(0,x.Z)(IP.list);try{for(s.s();!(o=s.n()).done;){var l=o.value;e.rewriteActions(r.data.gameActions[l],["gameActions",l],t,n,i,r)}}catch(u){s.e(u)}finally{s.f()}}}else"Conditional"===r.data.type?("Distance"===r.data.condition.type?(e.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",t,n,i,r),e.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",t,n,i,r)):"State"===r.data.condition.type?e.relativeizeInner(r.data.condition.object,["condition"],"object",t,n,i,r):"Comparison"===r.data.condition.type&&("Property"===r.data.condition.lOperand.type&&e.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,t,n,i,r),"Property"===r.data.condition.rOperand.type&&e.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,t,n,i,r)),e.rewriteActions(r.data.inActions,["inActions"],t,n,i,r),e.rewriteActions(r.data.outActions,["outActions"],t,n,i,r)):"actions"in r.data&&e.rewriteActions(r.data.actions,["actions"],t,n,i,r)}))})),!0}))}},{key:"expandInstances",value:function(e,t,n){var i=this,r=new Set;this.traverseEntity((function(a){if(a instanceof GV&&a.isInstanceRoot)return a.expandInstanceChildren({scene:i,shared:e,pendingDeletes:r}),t||a.resetBBoxNeedsUpdate(),n&&a.traverseEntity((function(e){n.addClip(e)})),!0}));var a,o=(0,x.Z)(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),HV(s)}}catch(l){o.e(l)}finally{o.f()}}},{key:"recomputeInstances",value:function(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity((function(e){e instanceof GV&&e.isInstanceRoot&&(e.component=void 0)})),this.expandInstances(e,!1,t))}},{key:"disposeAndUnregisterEntityRecursivelyIfNotReregistered",value:function(e){var t=this;e.traverseEntity((function(e){var n="string"==typeof e.identity?e.identity:e.identity.join("-");t.entityIdentityToEntity[n]===e&&(delete t.entityByUuid[e.uuid],delete t.entityIdentityToEntity[n]),e.dispose()}))}},{key:"clearScene",value:function(){var e,t=(0,x.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;OO.is(n)&&n.disposeRecursively()}}catch(i){t.e(i)}finally{t.f()}this.children.length=0}},{key:"resetAfterClear",value:function(e,t){this.init(e,t)}},{key:"raycast",value:function(e){return this.raycast1(e,!1)}},{key:"raycast1",value:function(e,t){var n=this,i=[];return function r(a){var o,s=(0,x.Z)(a.children);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.cloner;if(OO.is(l)&&!l.raycastLock&&(l.visible||null!==u&&void 0!==u&&u.object.data.visible))if(!0===t&&l.isInstanceRoot){var c=[];if(e.intersectObject(l,!0,c),c.length){var d=c[0];d.object=l,d.point.applyMatrix4(d.object.matrixWorld);var h=l.matrixWorld.clone().invert();d.point.applyMatrix4(h),i.push(d)}}else(EU(l)||PU(l)&&n.enableHelpers&&l.objectHelper.visible)&&(e.intersectObject(l,!1,i),tG(l,e,i)),r(l)}}catch(f){s.e(f)}finally{s.f()}}(this),i}},{key:"raycastWithClones",value:function(e){var t=this,n=[];return function i(r){var a,o=(0,x.Z)(r.children);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.cloner;OO.is(s)&&(s.visible||(null===l||void 0===l?void 0:l.object.data.visible))&&((EU(s)||PU(s)&&t.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,n),tG(s,e,n,!0)),i(s))}}catch(u){o.e(u)}finally{o.f()}}(this),n}},{key:"forEachEntity",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;OO.is(i)&&e(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"traverseConcreteEntity",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;OO.is(i)&&i.isConcreteEntity&&i.traverseEntity(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"traverseEntity",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;OO.is(i)&&i.traverseEntity(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"traverseObject",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;AO.is(i)&&i.traverseObject(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"traverseVisibleEntity",value:function(e){var t,n=(0,x.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;OO.is(i)&&i.visible&&i.traverseVisibleEntity(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"dispose",value:function(){this.clearScene()}},{key:"createChildrenObjects",value:function(e,t,n){var i,r=0,a=(0,x.Z)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.createObject(o.id,o.data,o.children,t,r,n),r+=1}}catch(s){a.e(s)}finally{a.f()}}},{key:"registerObjectCreatedInLegacy",value:function(e){this.entityByUuid[e.uuid]=e}},{key:"unregisterObject",value:function(e){delete this.entityByUuid[e.uuid];var t,n=(0,x.Z)(e.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.unregisterObject(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"createObject",value:function(e,t,n,i,r,a){var o,s=this,l={scene:this,shared:a},u=YV(e,t,l);return u&&(this.entityByUuid[e]=u,i.add(u),i.children.splice(r,0,i.children.pop()),n.length>0&&(u.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,u,a)),u.updateState(t,l),u instanceof fj&&u.updateGeometryGroupsIfNeeded(),u.updateVisible(),u.cloner&&this.toExpandCloner.add(u),null!==(o=t.pathSnapping)&&void 0!==o&&o.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),"Empty"===t.type&&t.animations&&u.traverseEntity((function(e){if(e instanceof fj&&e.isSkinnedMesh){var t=e.dataPatched;if(t.bones&&t.boneInverses){var n=t.bones.map((function(e){return s.find(e)})),i=t.boneInverses.map((function(e){return(new dp).fromArray(e)})),r=new RL(n,i);e.bind(r,e.bindMatrix)}}else e.matrixAutoUpdate=!0})),u}},{key:"getCenter",value:function(e){for(var t=[],n=0,i=e.length;n<i;++n){var r=e[n],a=r.id,o=r.recursive,s=this.find(a),l=o?s.recursiveBBox:s.singleBBox;t.push.apply(t,u(l.vertices))}var c=new zf;return c.setFromPoints(t),c.getCenter(rG),rG}},{key:"copyMatrixWorld",value:function(e,t){if(null!==e){var n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}else t.identity()}},{key:"copyParentMatrixWorld",value:function(e,t){var n;if(null!==e){var i=null===(n=this.find(e))||void 0===n?void 0:n.parent;i?t.copy(i.matrixWorld):t.identity()}else t.identity()}},{key:"traverseMaterial",value:function(e){this.traverseEntity((function(t){if(t instanceof yN)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)t.material[n]instanceof IF&&e(t.material[n]);else t.material instanceof IF&&e(t.material)}))}},{key:"updateCanvasSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.activeCamera.setViewplaneSize(e,t,n)}}]),n}(ML),oG=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},sG=function(e){return e*(Math.PI/180)},lG=function(e){return e*(180/Math.PI)},uG=new Map,cG=function(e){uG.has(e)&&clearTimeout(uG.get(e)),uG.set(e,setTimeout(e,100))},dG=function(e,t,n){for(var i,r=t.split(/[ ,]+/g),a=0;a<r.length;a+=1)i=r[a],e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent&&e.attachEvent(i,n)},hG=function(e,t,n){for(var i,r=t.split(/[ ,]+/g),a=0;a<r.length;a+=1)i=r[a],e.removeEventListener?e.removeEventListener(i,n):e.detachEvent&&e.detachEvent(i,n)},fG=function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},pG=function(){if(!(typeof window>"u"))return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},vG=function(e,t){t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},mG=function(e,t,n){var i=gG(e);for(var r in i)if(i.hasOwnProperty(r))if("string"==typeof t)i[r]=t+" "+n;else{for(var a="",o=0,s=t.length;o<s;o+=1)a+=t[o]+" "+n+", ";i[r]=a.slice(0,-2)}return i},gG=function(e){var t={};return t[e]="",["webkit","Moz","o"].forEach((function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},LG=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},yG=function(e,t){if(e.length)for(var n=0,i=e.length;n<i;n+=1)t(e[n]);else t(e)};typeof window<"u"&&(bG="ontouchstart"in window,xG=!!window.PointerEvent,wG=!!window.MSPointerEvent);var bG,xG,wG,_G,SG={start:"mousedown",move:"mousemove",end:"mouseup"},kG={};function AG(){}xG?_G={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:wG?_G={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:bG?(_G={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},kG=SG):_G=SG,AG.prototype.on=function(e,t){var n,i=this,r=e.split(/[ ,]+/g);i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)n=r[a],i._handlers_[n]=i._handlers_[n]||[],i._handlers_[n].push(t);return i},AG.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},AG.prototype.trigger=function(e,t){var n,i=this,r=e.split(/[ ,]+/g);i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)n=r[a],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach((function(e){e.call(i,{type:n,target:i},t)}))},AG.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?n[i]=t[i]:e.hasOwnProperty(i)&&(n[i]=e[i]);return n}(t.options,e))},AG.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},dG(e,_G[t],n._domHandlers_[t]),kG[t]&&dG(e,kG[t],n._domHandlers_[t]),n},AG.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},hG(e,_G[t],n._domHandlers_[t]),kG[t]&&hG(e,kG[t],n._domHandlers_[t]),delete n._domHandlers_[t],this};var MG=AG;function CG(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=CG.id,CG.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}CG.prototype=new MG,CG.constructor=CG,CG.id=0,CG.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},CG.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=function(e,t){var n=gG(e);for(var i in n)n.hasOwnProperty(i)&&(n[i]=t);return n}("borderRadius","50%"),n=mG("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},LG(i.el,n),"circle"===this.options.shape&&LG(i.back,t),LG(i.front,t),this.applyStyles(i),this},CG.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},CG.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},CG.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},CG.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},CG.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime)),t},CG.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.options.restJoystick){var n=t.options.restJoystick,i={};i.x=!0===n||!1!==n.x?0:t.instance.frontPosition.x,i.y=!0===n||!1!==n.y?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t},CG.prototype.setPosition=function(e,t){var n=this;n.frontPosition={x:t.x,y:t.y};var i=n.options.fadeTime+"ms",r={};r.front=mG("transition",["top","left"],i);var a={front:{}};a.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(a),n.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(n),n.restCallback()}),n.options.fadeTime)},CG.prototype.restCallback=function(){var e=this,t={};t.front=mG("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},CG.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},CG.prototype.computeDirection=function(e){var t,n,i,r=e.angle.radian,a=Math.PI/4,o=Math.PI/2;if(r>a&&r<3*a&&!e.lockX?t="up":r>-a&&r<=a&&!e.lockY?t="left":r>3*-a&&r<=-a&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(n=r>-o&&r<o?"left":"right"),e.lockX||(i=r>0?"up":"down"),e.force>this.options.threshold){var s,l={};for(s in this.direction)this.direction.hasOwnProperty(s)&&(l[s]=this.direction[s]);var u={};for(s in this.direction={x:n,y:i,angle:t},e.direction=this.direction,l)l[s]===this.direction[s]&&(u[s]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+n,e),u.y||this.trigger("plain:"+i,e),u.angle||this.trigger("dir dir:"+t,e)}else this.resetDirection();return e};var EG=CG;function TG(e,t){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=e,n.id=TG.id,TG.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(t),("static"===n.options.mode||"semi"===n.options.mode)&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);var i=getComputedStyle(n.options.zone.parentElement);return i&&"flex"===i.display&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}TG.prototype=new MG,TG.constructor=TG,TG.id=0,TG.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var n=0,i=t.length;n<i;n+=1)if(t[n].identifier===e)return t[n];return!1}},TG.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},TG.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},TG.prototype.createNipple=function(e,t){var n=this,i=n.manager.scroll,r={},a=n.options,o=n.parentIsFlex?i.x:i.x+n.box.left,s=n.parentIsFlex?i.y:i.y+n.box.top;if(e.x&&e.y)r={x:e.x-o,y:e.y-s};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",a.zone.appendChild(l);var u=l.getBoundingClientRect();a.zone.removeChild(l),r=e,e={x:u.left+i.x,y:u.top+i.y}}var c=new EG(n,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(vG(c.ui.el,r),vG(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c},TG.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},TG.prototype.bindNipple=function(e){var t,n=this,i=function(e,i){t=e.type+" "+i.id+":"+e.type,n.trigger(t,i)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},TG.prototype.pressureFn=function(e,t,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==r&&(t.trigger("pressure",n),i.trigger("pressure "+t.identifier+":pressure",n),r=n)}.bind(i),100)},TG.prototype.onstart=function(e){var t=this,n=t.options,i=e;e=fG(e),t.updateBox();return yG(e,(function(r){t.actives.length<n.maxNumberOfNipples?t.processOnStart(r):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach((function(n){if(Object.values(i.touches).findIndex((function(e){return e.identifier===n}))<0){var r=[e[0]];r.identifier=n,t.processOnEnd(r)}})),t.actives.length<n.maxNumberOfNipples&&t.processOnStart(r))})),t.manager.bindDocument(),!1},TG.prototype.processOnStart=function(e){var t,n=this,i=n.options,r=n.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},s=n.getOrCreate(r,o);s.identifier!==r&&n.manager.removeIdentifier(s.identifier),s.identifier=r;var l=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),a>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(s))>=0&&n.idles.splice(t,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==i.mode)l(s);else{if(!(oG(o,s.position)<=i.catchDistance))return s.destroy(),void n.processOnStart(e);l(s)}return s},TG.prototype.getOrCreate=function(e,t){var n,i=this,r=i.options;return/(semi|static)/.test(r.mode)?(n=i.idles[0])?(i.idles.splice(0,1),n):"semi"===r.mode?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):n=i.createNipple(t,e)},TG.prototype.processOnMove=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),a=t.manager.scroll;if(function(e){return isNaN(e.buttons)?0!==e.pressure:0!==e.buttons}(e)){if(!r)return console.error("Found zombie joystick with ID "+i),void t.manager.removeIdentifier(i);if(n.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:a.x+o.left,y:a.y+o.top}}r.identifier=i;var s=r.options.size/2,l={x:e.pageX,y:e.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var u,c,d=oG(l,r.position),h=function(e,t){var n=t.x-e.x,i=t.y-e.y;return lG(Math.atan2(i,n))}(l,r.position),f=sG(h),p=d/s,v={distance:d,position:l};if("circle"===r.options.shape?(u=Math.min(d,s),c=function(e,t,n){var i={x:0,y:0};return n=sG(n),i.x=e.x-t*Math.cos(n),i.y=e.y-t*Math.sin(n),i}(r.position,u,h)):(c=function(e,t,n){return{x:Math.min(Math.max(e.x,t.x-n),t.x+n),y:Math.min(Math.max(e.y,t.y-n),t.y+n)}}(l,r.position,s),u=oG(c,r.position)),n.follow){if(d>s){var m=l.x-c.x,g=l.y-c.y;r.position.x+=m,r.position.y+=g,r.el.style.top=r.position.y-(t.box.top+a.y)+"px",r.el.style.left=r.position.x-(t.box.left+a.x)+"px",d=oG(l,r.position)}}else l=c,d=u;var L=l.x-r.position.x,y=l.y-r.position.y;r.frontPosition={x:L,y:y},n.dataOnly||vG(r.ui.front,r.frontPosition);var b={identifier:r.identifier,position:l,force:p,pressure:e.force||e.pressure||e.webkitForce||0,distance:d,angle:{radian:f,degree:h},vector:{x:L/s,y:-y/s},raw:v,instance:r,lockX:n.lockX,lockY:n.lockY};(b=r.computeDirection(b)).angle={radian:sG(180-h),degree:180-h},r.trigger("move",b),t.trigger("move "+r.id+":move",b)}else this.processOnEnd(e)},TG.prototype.processOnEnd=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),a=t.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide((function(){"dynamic"===n.mode&&(r.trigger("removed",r),t.trigger("removed "+r.id+":removed",r),t.manager.trigger("removed "+r.id+":removed",r),r.destroy())})),clearInterval(t.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),t.trigger("end "+r.id+":end",r),t.ids.indexOf(r.identifier)>=0&&t.ids.splice(t.ids.indexOf(r.identifier),1),t.actives.indexOf(r)>=0&&t.actives.splice(t.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?t.idles.push(r):t.nipples.indexOf(r)>=0&&t.nipples.splice(t.nipples.indexOf(r),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[a.id]=a.identifier))},TG.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},TG.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach((function(e){e.destroy()})),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var PG=TG;function DG(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=pG(),t.config(e),t.prepareCollections();var n=function(){var e;t.collections.forEach((function(n){n.forEach((function(n){e=n.el.getBoundingClientRect(),n.position={x:t.scroll.x+e.left,y:t.scroll.y+e.top}}))}))};if(typeof window>"u")return t.collections;dG(window,"resize",(function(){cG(n)}));var i=function(){t.scroll=pG()};return dG(window,"scroll",(function(){cG(i)})),t.collections}DG.prototype=new MG,DG.constructor=DG,DG.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every((function(e){return!(n=e.get(t))})),n}},DG.prototype.create=function(e){return this.createCollection(e)},DG.prototype.createCollection=function(e){var t=this,n=new PG(t,e);return t.bindCollection(n),t.collections.push(n),n},DG.prototype.bindCollection=function(e){var t,n=this,i=function(e,i){t=e.type+" "+i.id+":"+e.type,n.trigger(t,i)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},DG.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},DG.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},DG.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},DG.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},DG.prototype.onmove=function(e){return this.onAny("move",e),!1},DG.prototype.onend=function(e){return this.onAny("end",e),!1},DG.prototype.oncancel=function(e){return this.onAny("end",e),!1},DG.prototype.onAny=function(e,t){var n,i=this,r="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=fG(t);var a=function(e,t,n){n.ids.indexOf(t)>=0&&(n[r](e),e._found_=!0)};return yG(t,(function(e){n=i.getIdentifier(e),yG(i.collections,a.bind(null,e,n)),e._found_||i.removeIdentifier(n)})),!1},DG.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach((function(e){e.destroy()})),e.off()},DG.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var OG=new DG,IG=function(e){return OG.create(e)},RG=new Map,BG=new Map,NG=function(){function e(t,n,i,r){(0,c.Z)(this,e),this.data=n;var a=n.audio,o=n.volume,s=n.delay,l=n.loop;if(!a)throw new Error("Missing property");var u="string"==typeof a?r.getAudio(a).src:a.data;this.audioPlayer=new VF({src:u,volume:o,delay:s,loop:l}),BG.has(i.uuid)?BG.get(i.uuid).push(this):BG.set(i.uuid,[this]),RG.set(t,this)}return(0,d.Z)(e,[{key:"playByToggle",value:function(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}},{key:"dispose",value:function(){this.audioPlayer.stop()}}]),e}(),zG=function(){function e(t){(0,c.Z)(this,e),this.data=t}return(0,d.Z)(e,[{key:"dispatch",value:function(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}},{key:"pauseAudio",value:function(e){var t=this,n=RG.get(e);!n||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){n.audioPlayer[t.data.interaction](),t.disposeDelay()}),this.data.delay)):n.audioPlayer[this.data.interaction]())}},{key:"pauseAllAudiosFromObject",value:function(e){var t=this,n=BG.get(e);null===n||void 0===n||!n.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){n.forEach((function(e){return e.audioPlayer[t.data.interaction]()})),t.disposeDelay()}),this.data.delay)):n.forEach((function(e){return e.audioPlayer[t.data.interaction]()})))}},{key:"pauseAllAudios",value:function(){var e=this,t=u(BG.values());!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){t.forEach((function(t){t.forEach((function(t){t.audioPlayer[e.data.interaction]()}))})),e.disposeDelay()}),this.data.delay)):t.forEach((function(t){t.forEach((function(t){t.audioPlayer[e.data.interaction]()}))})))}},{key:"disposeDelay",value:function(){clearTimeout(this.timeoutId),delete this.timeoutId}},{key:"dispose",value:function(){clearTimeout(this.timeoutId),delete this.timeoutId}}]),e}(),FG=function(){function e(t,n,i,r){if((0,c.Z)(this,e),this.data=n,"play"===n.interaction)this.interaction=new NG(t,n,i,r);else{if("pause"!==n.interaction&&"stop"!==n.interaction)throw new Error("Missing property");this.interaction=new zG(n)}}return(0,d.Z)(e,[{key:"dispatchBasic",value:function(){this.interaction instanceof NG?this.interaction.playByToggle():this.interaction.dispatch()}},{key:"dispatchConditional",value:function(){this.interaction instanceof NG?this.interaction.audioPlayer.play():this.interaction.dispatch()}},{key:"dispatchGameControl",value:function(e){this.interaction instanceof NG&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}},{key:"dispose",value:function(){this.interaction.dispose()}}]),e}(),jG=function(e,t){return t.some((function(t){return t instanceof RegExp?t.test(e):t===e}))};function UG(e,t){if(t=$e({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},t),e=e.trim(),/^data:/i.test(e))return function(e,t){var n=t.stripHash,i=Zu(/^data:([^,]*?),([^#]*?)(?:#(.*))?$/,{type:1,data:2,hash:3}).exec(e);if(!i)throw new Error("Invalid URL: ".concat(e));var r=i.groups,a=r.type,s=r.data,l=r.hash,c=a.split(";");l=n?"":l;var d=!1;"base64"===c[c.length-1]&&(c.pop(),d=!0);var h=(c.shift()||"").toLowerCase(),f=u(c.map((function(e){var t=o(e.split("=").map((function(e){return e.trim()})),2),n=t[0],i=t[1],r=void 0===i?"":i;return"charset"===n&&"us-ascii"===(r=r.toLowerCase())?"":"".concat(n).concat(r?"=".concat(r):"")})).filter(Boolean));return d&&f.push("base64"),(f.length>0||h&&"text/plain"!==h)&&f.unshift(h),"data:".concat(f.join(";"),",").concat(d?s.trim():s).concat(l?"#".concat(l):"")}(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");var n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));var i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===i.protocol&&(i.protocol="http:"),t.forceHttps&&"http:"===i.protocol&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){for(var r=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,s="";;){var l=r.exec(i.pathname);if(!l)break;var c=l[0],d=l.index;s+=i.pathname.slice(a,d).replace(/\/{2,}/g,"/"),s+=c,a=d+c.length}s+=i.pathname.slice(a,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=s}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch(L){}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){var h=i.pathname.split("/"),f=h[h.length-1];jG(f,t.removeDirectoryIndex)&&(h=h.slice(0,-1),i.pathname=h.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(var p=0,v=u(i.searchParams.keys());p<v.length;p++){var m=v[p];jG(m,t.removeQueryParameters)&&i.searchParams.delete(m)}if(!0===t.removeQueryParameters&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch(y){}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));var g=e;return e=i.toString(),!t.removeSingleSlash&&"/"===i.pathname&&!g.endsWith("/")&&""===i.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===i.pathname)&&""===i.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var ZG=function(){function e(t,n){var i=t.url,r=t.context;if((0,c.Z)(this,e),this.eventManager=n,!i)throw new Error("Missing property");this.url=i.startsWith("mailto:")?i:UG(i,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=null!==r&&void 0!==r?r:"tab"}return(0,d.Z)(e,[{key:"dispatch",value:function(){var e;pM?window.location.assign(this.url):("tab"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank","width=".concat(window.innerWidth,", height=").concat(window.innerHeight)):window.open(this.url,"_parent"),null!==(e=this.eventManager.controlsManager.orbitControls)&&void 0!==e&&e.onPointerUp(xM[0]),xM.splice(0,xM.length))}}]),e}(),VG=function(){function e(t,n,i){var r=this;(0,c.Z)(this,e),this.data=t,this.page=n,this.eventManager=i,this.timeoutIdQueue=[],this.dispatchInner=function(){r.objects.forEach(r.destroyCallback)},this.destroyCallback=function(e){var t;r.timeoutIdQueue.shift();var n=r.page.scene.find(e);if(void 0!==n){var i=r.controlsManager.sharedGameControlGlobals.rapierWorld,a=!i||(null===(t=n.dataPatched.physics)||void 0===t?void 0:t.fusedBody);if(n.cloner){var o,s=(0,x.Z)(n.cloner.children);try{for(s.s();!(o=s.n()).done;){var l,u=o.value;a?(u.playModeVisible=!1,u.rigidBody&&"positioned"===(null===(l=n.dataPatched.physics)||void 0===l?void 0:l.rigidBody)&&(r.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(u.rigidBody.collider(0).handle),i.removeRigidBody(u.rigidBody),u.rigidBody=void 0),u.bvhGeometry&&(u.bvhGeometry=void 0)):void 0===r.clone||r.clone===u?(u.playModeVisible=!1,u.rigidBody&&(r.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(u.rigidBody.collider(0).handle),i.removeRigidBody(u.rigidBody),u.rigidBody=void 0)):void 0===u.playModeVisible&&(u.playModeVisible=!0)}}catch(c){s.e(c)}finally{s.f()}(a||void 0===r.clone||!1===r.clone)&&(n.visible=!1,n.rigidBody&&(r.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),i.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0))}else n.rigidBody&&(r.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),i.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0),n.visible=!1;r.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=void 0===i?r.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter((function(e){return void 0!==e.bvhGeometry})):r.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter((function(e){return void 0!==e.rigidBody})),r.eventManager.requestRender()}},this.objects=u(t.objects),this.controlsManager=i.controlsManager}return(0,d.Z)(e,[{key:"dispatch",value:function(e){this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()}},{key:"dispatchFromStart",value:function(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))}},{key:"dispose",value:function(){this.timeoutIdQueue.forEach((function(e){return window.clearTimeout(e)}))}}]),e}(),GG=function(){function e(t,n,i){(0,c.Z)(this,e),this.page=t,this.eventManager=i,this.sharedAssets=n}return(0,d.Z)(e,[{key:"dispatch",value:function(){var e;LW(this.page,this.sharedAssets,!0),this.eventManager.reset(),null!==(e=this.eventManager.controlsManager.gameControl)&&void 0!==e&&e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender()}}]),e}(),HG={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},WG={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},qG=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],XG={CSS:{},springs:{}};function YG(e,t,n){return Math.min(Math.max(e,t),n)}function QG(e,t){return e.indexOf(t)>-1}function KG(e,t){return e.apply(null,t)}var JG={arr:function(e){return Array.isArray(e)},obj:function(e){return QG(Object.prototype.toString.call(e),"Object")},pth:function(e){return JG.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||JG.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return JG.hex(e)||JG.rgb(e)||JG.hsl(e)},key:function(e){return!HG.hasOwnProperty(e)&&!WG.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function $G(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function eH(e,t){var n=$G(e),i=YG(JG.und(n[0])?1:n[0],.1,100),r=YG(JG.und(n[1])?100:n[1],.1,100),a=YG(JG.und(n[2])?10:n[2],.1,100),o=YG(JG.und(n[3])?0:n[3],.1,100),s=Math.sqrt(r/i),l=a/(2*Math.sqrt(r*i)),u=l<1?s*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*s-o)/u:-o+s;function h(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*s)*(c*Math.cos(u*n)+d*Math.sin(u*n)):(c+d*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?h:function(){var t=XG.springs[e];if(t)return t;for(var n=1/6,i=0,r=0;;)if(1===h(i+=n)){if(++r>=16)break}else r=0;var a=i*n*1e3;return XG.springs[e]=a,a}}function tH(e){return void 0===e&&(e=10),function(t){return Math.ceil(YG(t,1e-6,1)*e)*(1/e)}}var nH=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function i(e){return 3*e}function r(e,r,a){return((t(r,a)*e+n(r,a))*e+i(r))*e}function a(e,r,a){return 3*t(r,a)*e*e+2*n(r,a)*e+i(r)}return function(t,n,i,o){if(0<=t&&t<=1&&0<=i&&i<=1){var s=new Float32Array(11);if(t!==n||i!==o)for(var l=0;l<11;++l)s[l]=r(l*e,t,i);return function(e){return t===n&&i===o||0===e||1===e?e:r(u(e),n,o)}}function u(n){for(var o=0,l=1;10!==l&&s[l]<=n;++l)o+=e;--l;var u=o+(n-s[l])/(s[l+1]-s[l])*e,c=a(u,t,i);return c>=.001?function(e,t,n,i){for(var o=0;o<4;++o){var s=a(t,n,i);if(0===s)return t;t-=(r(t,n,i)-e)/s}return t}(n,u,t,i):0===c?u:function(e,t,n,i,a){var o,s,l=0;do{(o=r(s=t+(n-t)/2,i,a)-e)>0?n=s:t=s}while(Math.abs(o)>1e-7&&++l<10);return s}(n,o,o+e,t,i)}}}(),iH=function(){var e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=YG(e,1,10),i=YG(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,n){t[e]=function(){return function(e){return Math.pow(e,n+2)}}})),Object.keys(t).forEach((function(n){var i=t[n];e["easeIn"+n]=i,e["easeOut"+n]=function(e,t){return function(n){return 1-i(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?i(e,t)(2*n)/2:1-i(e,t)(-2*n+2)/2}}})),e}();function rH(e,t){if(JG.fnc(e))return e;var n=e.split("(")[0],i=iH[n],r=$G(e);switch(n){case"spring":return eH(e,t);case"cubicBezier":return KG(nH,r);case"steps":return KG(tH,r);default:return KG(i,r)}}function aH(e){try{return document.querySelectorAll(e)}catch(t){return}}function oH(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,r=[],a=0;a<n;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&r.push(o)}return r}function sH(e){return e.reduce((function(e,t){return e.concat(JG.arr(t)?sH(t):t)}),[])}function lH(e){return JG.arr(e)?e:(JG.str(e)&&(e=aH(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function uH(e,t){return e.some((function(e){return e===t}))}function cH(e){var t={};for(var n in e)t[n]=e[n];return t}function dH(e,t){var n=cH(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function hH(e,t){var n=cH(e);for(var i in t)n[i]=JG.und(e[i])?t[i]:e[i];return n}function fH(e){return JG.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):JG.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):JG.hsl(e)?function(e){var t,n,i,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(r[1],10)/360,o=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,l=r[4]||1;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==o)t=n=i=s;else{var c=s<.5?s*(1+o):s+o-s*o,d=2*s-c;t=u(d,c,a+1/3),n=u(d,c,a),i=u(d,c,a-1/3)}return"rgba("+255*t+","+255*n+","+255*i+","+l+")"}(e):void 0}function pH(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function vH(e,t){return JG.fnc(e)?e(t.target,t.id,t.total):e}function mH(e,t){return e.getAttribute(t)}function gH(e,t,n){if(uH([n,"deg","rad","turn"],pH(t)))return t;var i=XG.CSS[t+n];if(!JG.und(i))return i;var r=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(r),r.style.position="absolute",r.style.width=100+n;var o=100/r.offsetWidth;a.removeChild(r);var s=o*parseFloat(t);return XG.CSS[t+n]=s,s}function LH(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?gH(e,r,n):r}}function yH(e,t){return JG.dom(e)&&!JG.inp(e)&&(mH(e,t)||JG.svg(e)&&e[t])?"attribute":JG.dom(e)&&uH(qG,t)?"transform":JG.dom(e)&&"transform"!==t&&LH(e,t)?"css":null!=e[t]?"object":void 0}function bH(e){if(JG.dom(e)){for(var t,n=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map;t=i.exec(n);)r.set(t[1],t[2]);return r}}function xH(e,t,n,i){var r=QG(t,"scale")?1:0+function(e){return QG(e,"translate")||"perspective"===e?"px":QG(e,"rotate")||QG(e,"skew")?"deg":void 0}(t),a=bH(e).get(t)||r;return n&&(n.transforms.list.set(t,a),n.transforms.last=t),i?gH(e,a,i):a}function wH(e,t,n,i){switch(yH(e,t)){case"transform":return xH(e,t,i,n);case"css":return LH(e,t,n);case"attribute":return mH(e,t);default:return e[t]||0}}function _H(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=pH(e)||0,r=parseFloat(t),a=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+a+i;case"-":return r-a+i;case"*":return r*a+i}}function SH(e,t){if(JG.col(e))return fH(e);if(/\s/g.test(e))return e;var n=pH(e),i=n?e.substr(0,e.length-n.length):e;return t?i+t:i}function kH(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function AH(e){for(var t,n=e.points,i=0,r=0;r<n.numberOfItems;r++){var a=n.getItem(r);r>0&&(i+=kH(t,a)),t=a}return i}function MH(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*mH(e,"r")}(e);case"rect":return function(e){return 2*mH(e,"width")+2*mH(e,"height")}(e);case"line":return function(e){return kH({x:mH(e,"x1"),y:mH(e,"y1")},{x:mH(e,"x2"),y:mH(e,"y2")})}(e);case"polyline":return AH(e);case"polygon":return function(e){var t=e.points;return AH(e)+kH(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function CH(e,t){var n=t||{},i=n.el||function(e){for(var t=e.parentNode;JG.svg(t)&&JG.svg(t.parentNode);)t=t.parentNode;return t}(e),r=i.getBoundingClientRect(),a=mH(i,"viewBox"),o=r.width,s=r.height,l=n.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:s/l[3]}}function EH(e,t){function n(n){void 0===n&&(n=0);var i=t+n>=1?t+n:0;return e.el.getPointAtLength(i)}var i=CH(e.el,e.svg),r=n(),a=n(-1),o=n(1);switch(e.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}function TH(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=SH(JG.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:JG.str(e)||t?i.split(n):[]}}function PH(e){return oH(e?sH(JG.arr(e)?e.map(lH):lH(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function DH(e){var t=PH(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:bH(e)}}}))}function OH(e,t){var n=cH(t);if(/^spring/.test(n.easing)&&(n.duration=eH(n.easing)),JG.arr(e)){var i=e.length;2===i&&!JG.obj(e[0])?e={value:e}:JG.fnc(t.duration)||(n.duration=t.duration/i)}var r=JG.arr(e)?e:[e];return r.map((function(e,n){var i=JG.obj(e)&&!JG.pth(e)?e:{value:e};return JG.und(i.delay)&&(i.delay=n?0:t.delay),JG.und(i.endDelay)&&(i.endDelay=n===r.length-1?t.endDelay:0),i})).map((function(e){return hH(e,n)}))}function IH(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=hH(function(e){for(var t=oH(sH(e.map((function(e){return Object.keys(e)}))),(function(e){return JG.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},i=function(i){var r=t[i];n[r]=e.map((function(e){var t={};for(var n in e)JG.key(n)?n==r&&(t.value=e[n]):t[n]=e[n];return t}))},r=0;r<t.length;r++)i(r);return n}(i),t)),t)JG.key(r)&&n.push({name:r,tweens:OH(t[r],e)});return n}function RH(e,t){var n;return e.tweens.map((function(i){var r=function(e,t){var n={};for(var i in e){var r=vH(e[i],t);JG.arr(r)&&(r=r.map((function(e){return vH(e,t)})),1===r.length&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),a=r.value,o=JG.arr(a)?a[1]:a,s=pH(o),l=wH(t.target,e.name,s,t),u=n?n.to.original:l,c=JG.arr(a)?a[0]:u,d=pH(c)||pH(l),h=s||d;return JG.und(o)&&(o=u),r.from=TH(c,h),r.to=TH(_H(o,c),h),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=rH(r.easing,r.duration),r.isPath=JG.pth(a),r.isColor=JG.col(r.from.original),r.isColor&&(r.round=1),n=r,r}))}var BH={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var a="";i.list.forEach((function(e,t){a+=t+"("+e+") "})),e.style.transform=a}}};function NH(e,t){DH(e).forEach((function(e){for(var n in t){var i=vH(t[n],e),r=e.target,a=pH(i),o=wH(r,n,a,e),s=_H(SH(i,a||pH(o)),o),l=yH(r,n);BH[l](r,n,s,e.transforms,!0)}}))}function zH(e,t){return oH(sH(e.map((function(e){return t.map((function(t){return function(e,t){var n=yH(e.target,t.name);if(n){var i=RH(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(e,t)}))}))),(function(e){return!JG.und(e)}))}function FH(e,t){var n=e.length,i=function(e){return e.timelineOffset?e.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map((function(e){var t,n,r,a,o=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,s=null!==(n=e.pingPongDelayCorrection)&&void 0!==n?n:0,l=null!==(r=e.pingPongEndDelayCorrection)&&void 0!==r?r:0;return i(e)+o+s+l+e.duration*(null!==(a=e.loop)&&void 0!==a?a:1)}))):t.duration,r.delay=n?Math.min.apply(Math,e.map((function(e){var t,n,r=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,a=null!==(n=e.pingPongDelayCorrection)&&void 0!==n?n:0;return i(e)+r+a+e.delay}))):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map((function(e){var t,n,r,a,o=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,s=null!==(n=e.pingPongDelayCorrection)&&void 0!==n?n:0,l=null!==(r=e.pingPongEndDelayCorrection)&&void 0!==r?r:0;return i(e)+o+s+e.duration*(null!==(a=e.loop)&&void 0!==a?a:1)-e.endDelay-l}))):t.endDelay,r}var jH=0;var UH,ZH=[],VH=[],GH=function(){function e(){UH=requestAnimationFrame(t)}function t(t){var n=ZH.length;if(n){for(var i=0;i<n;){var r=ZH[i];r.paused?(ZH.splice(i,1),n-=1):(r.tick(t),i++)}e()}else UH=cancelAnimationFrame(UH)}return e}();function HH(e){void 0===e&&(e={});var t,n,i=0,r=0,a=0,o=0,s=null;function l(e){var t=window.Promise&&new Promise((function(e){return s=e}));return e.finished=t,t}var u=function(e){var t=dH(HG,e),n=dH(WG,e),i=IH(n,e),r=DH(e.targets),a=zH(r,i),o=FH(a,n),s=jH;return jH++,hH(t,{id:s,children:[],animatables:r,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}(e);l(u);function c(){var e=u.direction;"alternate"!==e&&(u.direction="normal"!==e?"normal":"reverse"),u.reversed=!u.reversed,n.forEach((function(e){(1===e.loop||e.loop%2===0)&&(e.reversed=u.reversed)}))}function d(e){return u.reversed?u.duration-e:e}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(u.reversed?t.seek(t.duration*t.loop-(e-t.timelineOffset-t.pingPongDelayCorrection),n):t.seek(e-t.timelineOffset-t.startOnceDelay-t.pingPongDelayCorrection,n))}function f(e){var t=0,n=u.animations,i=n.length;for("alternate"!==u.direction&&"alternate"===(null===(r=u.parent)||void 0===r?void 0:r.direction)?!1===(null===(a=u.parent)||void 0===a?void 0:a.rewind)&&!0===u.reversePlayback&&!1===u.rewind&&(e=null!==(o=u.parent)&&void 0!==o&&o.reversed&&"alternate"===u.direction?u.duration-u.delay+u.endDelay-e:u.duration+u.delay-u.endDelay-e):m(!1,null===(s=u.parent)||void 0===s?void 0:s.rewind,u.rewind,null===(l=u.parent)||void 0===l?void 0:l.reversePlayback,u.reversePlayback)&&(e=null!==(c=u.parent)&&void 0!==c&&c.reversed&&"alternate"===u.direction?u.duration-u.delay+u.endDelay-e:u.duration+u.delay-u.endDelay-e);t<i;){var r,a,o,s,l,c,d,h=n[t],f=h.animatable,p=h.tweens,v=p.length-1,g=p[v];v&&(g=oH(p,(function(t){return e<t.end}))[0]||g);var L=void 0;L=null!==(d=u.parent)&&void 0!==d&&d.reversed&&"alternate"===u.direction?YG(e-g.start-g.endDelay,0,g.duration)/g.duration:YG(e-g.start-g.delay,0,g.duration)/g.duration;for(var y=isNaN(L)?1:g.easing(L),b=g.to.strings,x=g.round,w=[],_=g.to.numbers.length,S=void 0,k=0;k<_;k++){var A,M,C,E=void 0,T=void 0,P=void 0;"alternate"!==u.direction?!1===(null===(A=u.parent)||void 0===A?void 0:A.rewind)&&!0===u.reversePlayback&&!1===u.rewind?(T=g.to.numbers[k],P=g.from.numbers[k]||0):(P=g.to.numbers[k],T=g.from.numbers[k]||0):m(!0,null===(M=u.parent)||void 0===M?void 0:M.rewind,u.rewind,null===(C=u.parent)||void 0===C?void 0:C.reversePlayback,u.reversePlayback)?(T=g.to.numbers[k],P=g.from.numbers[k]||0):(P=g.to.numbers[k],T=g.from.numbers[k]||0),E=g.isPath?EH(g.value,y*P):T+y*(P-T),x&&(g.isColor&&k>2||(E=Math.round(E*x)/x)),w.push(E)}var D=b.length;if(D){S=b[0];for(var O=0;O<D;O++){b[O];var I=b[O+1],R=w[O];isNaN(R)||(S+=I?R+I:R+" ")}}else S=w[0];BH[h.type](f.target,h.property,S,f.transforms),h.currentValue=S,t++}}function p(e){u[e]&&!u.passThrough&&u[e](u)}var v={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function m(e,t,n,i,r){return v[e<<4|t<<3|n<<2|i<<1|r]}function g(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=u.duration,v=u.delay,m=a-u.endDelay;(null===(t=u.parent)||void 0===t?void 0:t.reversed)&&"alternate"===u.direction&&(v=u.endDelay,m=a-u.delay);var g=d(e);if(u.progress=YG(g/a*100,0,100),r||(u.reversePlayback=g<u.currentTime),o&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u.reversed)for(var i=o;i--;)h(e,n[i],t);else for(var r=0;r<o;r++)h(e,n[r],t)}(g,r),!u.began&&u.currentTime>=0&&(u.began=!0,p("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,p("loopBegin")),(u.reversed||g>=0)&&g<=v&&0!==u.currentTime&&(f(0),p("change")),(g>=m&&u.currentTime!==a+u.pingPongDelayCorrection||!a)&&(f(a),p("change")),g>v&&g<m?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,p("changeBegin")),f(g),p("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,p("change"),o&&p("timelineChangeComplete")):u.began&&g>m&&p("changeComplete"),u.currentTime=YG(g,0,a+u.pingPongDelayCorrection),u.began&&p("update"),e>=a)if(u.remaining&&!0!==u.remaining&&u.remaining--,u.remaining){i+=o?u.duration/HH.speed:u.duration;var L,y=(0,x.Z)(n);try{for(y.s();!(L=y.n()).done;){var b=L.value;b.setStartTime(0),b.remaining=b.loop}}catch(w){y.e(w)}finally{y.f()}p("loopComplete"),u.loopBegan=!1,"alternate"===u.direction?c():o&&(u.direction="normal",u.reversed=!1,n.forEach((function(e){return e.reversed=!1})))}else u.paused=!0,u.completed||(u.completed=!0,p("loopComplete"),p("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)))}return u.reset=function(){var e=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed="reverse"===e,u.remaining=u.loop,n=u.children;for(var t=o=n.length;t--;)u.children[t].reset();(u.reversed&&!0!==u.loop||"alternate"===e&&1===u.loop)&&u.remaining++,f(u.reversed?u.duration:0)},u.setStartTime=function(e){i=e},u.set=function(e,t){return NH(e,t),u},u.tick=function(e){a=e,i||(i=a),g((a+(r-i))*HH.speed)},u.seek=function(e){g(e-i,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},u.pause=function(e){u.paused=!0,o&&(t=null!==e&&void 0!==e?e:performance.now())},u.play=function(e){!u.paused||(u.completed&&u.reset(),u.paused=!1,ZH.push(u),o&&void 0!==t&&(i+=(null!==e&&void 0!==e?e:performance.now())-t),UH||GH())},u.reverse=function(){c(),u.completed=!u.reversed,i=0,r=d(u.currentTime)*(1/HH.speed)},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function WH(e,t){for(var n=t.length;n--;)uH(e,t[n].animatable.target)&&t.splice(n,1)}typeof document<"u"&&document.addEventListener("visibilitychange",(function(e){document.hidden?(ZH.forEach((function(t){return t.pause(e.timeStamp)})),VH=ZH.slice(0),HH.running=ZH=[]):VH.forEach((function(t){return t.play(e.timeStamp)}))})),HH.version="3.2.0",HH.speed=1,HH.running=ZH,HH.remove=function(e){for(var t=PH(e),n=ZH.length;n--;){var i=ZH[n],r=i.animations,a=i.children;WH(t,r);for(var o=a.length;o--;){var s=a[o],l=s.animations;WH(t,l),!l.length&&!s.children.length&&a.splice(o,1)}!r.length&&!a.length&&i.pause()}},HH.get=wH,HH.set=NH,HH.convertPx=gH,HH.path=function(e,t){var n=JG.str(e)?aH(e)[0]:e,i=t||100;return function(e){return{property:e,el:n,svg:CH(n),totalLength:MH(n)*(i/100)}}},HH.setDashoffset=function(e){var t=MH(e);return e.setAttribute("stroke-dasharray",t),t},HH.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?rH(t.easing):null,r=t.grid,a=t.axis,o=t.from||0,s="first"===o,l="center"===o,u="last"===o,c=JG.arr(e),d=parseFloat(c?e[0]:e),h=c?parseFloat(e[1]):0,f=pH(c?e[1]:e)||0,p=t.start||0+(c?d:0),v=[],m=0;return function(e,t,g){if(s&&(o=0),l&&(o=(g-1)/2),u&&(o=g-1),!v.length){for(var L=0;L<g;L++){if(r){var y=l?(r[0]-1)/2:o%r[0],b=l?(r[1]-1)/2:Math.floor(o/r[0]),x=y-L%r[0],w=b-Math.floor(L/r[0]),_=Math.sqrt(x*x+w*w);"x"===a&&(_=-x),"y"===a&&(_=-w),v.push(_)}else v.push(Math.abs(o-L));m=Math.max.apply(Math,v)}i&&(v=v.map((function(e){return i(e/m)*m}))),"reverse"===n&&(v=v.map((function(e){return a?e<0?-1*e:-e:Math.abs(m-e)})))}return p+(c?(h-d)/m:d)*(Math.round(100*v[t])/100)+f}},HH.timeline=function(e){void 0===e&&(e={});var t=HH(e);return t.duration=0,t.add=function(n,i){var r=ZH.indexOf(t),a=t.children;function o(e){e.passThrough=!0}r>-1&&ZH.splice(r,1);for(var s=0;s<a.length;s++)o(a[s]);var l=hH(n,dH(WG,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=JG.und(i)?u:_H(i,u),o(t);var c=HH(l);o(c),a.push(c),c.parent=t;var d=FH(a,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,!0===c.loop&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},HH.easing=rH,HH.penner=iH,HH.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var qH=HH,XH=new Rf,YH=new Rf,QH=new If;function KH(e,t,n,i,r){var a=n[e]?n[e]:void 0,o=i[e];if(null!=o){var s=null!==a&&void 0!==a?a:t[e],l=o;return s!==l?{update:function(n){var i=rf.lerp(s,l,n);t[e]=r?Math.trunc(i):i},start:function(){t[e]=s},end:function(){t[e]=l}}:void 0}}function JH(e,t,n,i,r){var a=n[e]?n[e]:void 0,o=i[e];if(o){var s=t[e],l=u(null!==a&&void 0!==a?a:s),c=u(o);return l.length!==c.length||tM(l,c)?void 0:{update:function(n){l.forEach((function(i,a){var o=rf.lerp(i,c[a],n);t[e][a]=r?Math.trunc(o):o}))},start:function(){Object.assign(t[e],l)},end:function(){Object.assign(t[e],c)}}}}function $H(e,t,n,i){var r=n[e]?n[e]:void 0,a=i[e];if(a){var o=t[e],s=r?(new Rf).fromArray(r):o.clone(),l=(new Rf).fromArray(a);return s.equals(l)?void 0:{update:function(e){o.lerpVectors(s,l,e)},start:function(){o.copy(s)},end:function(){o.copy(l)}}}}function eW(e,t,n,i){return"number"==typeof t[e]?KH(e,t,null!==n&&void 0!==n?n:{},i):Array.isArray(t[e])?JH(e,t,null!==n&&void 0!==n?n:{},i):void 0}function tW(e,t,n,i){var r=[];if(!("geometry"in n))return r;var a=e.geometry.userData.parameters,o="geometry"in t?t.geometry:{},s=n.geometry;if(e instanceof yj){var l=function(e,t,n,i){var r;if(void 0!==n.scaleBaked){var a=null!==(r=t.scaleBaked)&&void 0!==r?r:e.data.geometry.scaleBaked,o=n.scaleBaked;if(!pT.isEqual(a,o)){var s=[];return s.push({update:function(t){e.updateGeometryInteractions({scaleBaked:[rf.lerp(a[0],o[0],t),rf.lerp(a[1],o[1],t),rf.lerp(a[2],o[2],t)]},i),e.invalidateDownstreamBooleanData()},start:function(){e.updateGeometryInteractions({scaleBaked:a},i),e.invalidateDownstreamBooleanData()},end:function(){e.updateGeometryInteractions({scaleBaked:o},i),e.invalidateDownstreamBooleanData()}}),s}}}(e,o,s,i);l&&r.push.apply(r,u(l))}else{var c={};if(Object.assign(c,cM(a,BP)),BP.forEach((function(e){var t=eW(e,c,o,s);t&&r.push(t)})),e instanceof VV){Object.assign(c,{extrusion:$e({},a.extrusion)});var d=function(e,t,n){var i;if(n.extrusion){var r=e.extrusion,a=null!==(i=t.extrusion)&&void 0!==i?i:{},o=n.extrusion,s=[];return iP.forEach((function(e){var t=eW(e,r,a,o);t&&s.push(t)})),s}}(c,o,s);d&&r.push.apply(r,u(d))}r.length&&r.push({update:function(t){e.updateGeometryInteractions(c,i),e.updateGeometryGroupsIfNeeded()},start:function(t){e.updateGeometryInteractions(c,i),e.updateGeometryGroupsIfNeeded()},end:function(t){e.updateGeometryInteractions(c,i),e.updateGeometryGroupsIfNeeded()}})}return r}function nW(e,t,n,i){var r=[];if(void 0!==n.intensity){var a=KH("intensity",e,t,n);a&&r.push(a)}if(void 0!==n.color){var o=function(e,t,n,i,r){var a=n[e]?n[e]:void 0,o=i[e];if(o){var s=t[e],l=a?"string"==typeof a?r.getColor(a).clone():(new wf).setRGB(a.r,a.g,a.b):s.clone(),u="string"==typeof o?r.getColor(o).clone():(new wf).setRGB(o.r,o.g,o.b);if(!l.equals(u)){var c=s.clone();return t[e]=c,{update:function(e){c.lerpColors(l,u,e)},start:function(){c.copy(l)},end:function(){c.copy(u)}}}}}("color",e,t,n,i);o&&r.push(o)}return r}function iW(e,t,n,i){var r=[],a=OF(n,i)||!!t.layers&&OF(t,i);r.push(function(e,t){return{update:function(){e.transparent=t}}}(e,a));var o,s=(0,x.Z)(e.layers);try{for(s.s();!(o=s.n()).done;){var l,c,d,h=o.value,f=null===(l=t.layers)||void 0===l?void 0:l.data(h.uuid),p=n.layers.data(h.uuid);if(p&&(null===(c=h.visible)||void 0===c||c)&&(null===(d=p.visible)||void 0===d||d)){var v,m=h.getNames().filter((function(e){return!YT.some((function(t){return e.includes(t)}))})),g=(0,x.Z)(m);try{for(g.s();!(v=g.n()).done;){var L=v.value;try{var y=h.getValue(L),b=void 0;if("colors"===L)b=cW(h,f,p,L);else if(Array.isArray(y))"steps"===L&&(b=uW(h,f,p,L));else if("number"==typeof y)b=rW(h,f,p,L);else{if("boolean"==typeof y)continue;y instanceof af?b=aW(h,f,p,L):y instanceof Rf?b=oW(h,f,p,L):y instanceof CN?b=lW(h,f,p,L,i):y instanceof wf?b=sW(h,f,p,L,i):"isTexture"in y&&(b=dW(h,f,p,L))}b&&(Array.isArray(b)?r.push.apply(r,u(b)):r.push(b))}catch(y){console.error("lerpMaterial: unexpected material layer for ".concat(L),y)}}}catch(w){g.e(w)}finally{g.f()}}}}catch(w){s.e(w)}finally{s.f()}return r}function rW(e,t,n,i){if(e.hasValue(i)&&i in n){var r=t?t[i]:e.getValue(i),a=n[i];return r!==a?{update:function(t){e.setValue(i,rf.lerp(r,a,t))},start:function(){e.setValue(i,r)},end:function(){e.setValue(i,a)}}:void 0}}function aW(e,t,n,i){if(e.hasValue(i)&&i in n){var r=e.getValue(i),a=t?(new af).fromArray(t[i]):r.clone(),o=(new af).fromArray(n[i]);return a.equals(o)?void 0:{update:function(e){r.lerpVectors(a,o,e)},start:function(){r.copy(a)},end:function(){r.copy(o)}}}}function oW(e,t,n,i){if(e.hasValue(i)&&i in n){var r=e.getValue(i),a=t?(new Rf).fromArray(t[i]):r.clone(),o=(new Rf).fromArray(n[i]);return a.equals(o)?void 0:{update:function(e){r.lerpVectors(a,o,e)},start:function(){r.copy(a)},end:function(){r.copy(o)}}}}function sW(e,t,n,i,r){if(e.hasValue(i)&&i in n){var a=t?t[i]:void 0,o=n[i],s=e.getValue(i),l=a?"string"==typeof a?r.getColor(a).clone():(new wf).setRGB(a.r,a.g,a.b):s.clone(),u="string"==typeof o?r.getColor(o).clone():(new wf).setRGB(o.r,o.g,o.b);if(!l.equals(u)){var c=s.clone();return{update:function(t){e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,t)},start:function(){c.copy(l)},end:function(){c.copy(u)}}}}}function lW(e,t,n,i,r){if(e.hasValue(i)&&i in n){var a=t?t[i]:void 0,o=n[i],s=e.getValue(i),l=a?"string"==typeof a?r.getColor(a).clone():(new wf).setRGB(a.r,a.g,a.b):s.clone(),u="string"==typeof o?r.getColor(o).clone():new CN(o.r,o.g,o.b,o.a);if(!l.equals(u)){var c=s.clone();return{update:function(t){e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,t)},start:function(){c.copy(l)},end:function(){c.copy(u)}}}}}function uW(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(e.hasValue(i)&&i in n){for(var r=[],a=e.getValue(i),o=t?t[i]:a,s=n[i],l=function(e){var t=o[e],n=s[e];t!==n&&r.push({update:function(i){a[e]=rf.lerp(t,n,i)},start:function(){a[e]=t},end:function(){a[e]=n}})},u=0;u<a.length;++u)l(u);return r.length?r:void 0}}function cW(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"colors";if(e.hasValue(i)&&i in n){for(var r=[],a=e.getValue(i),o=t?t[i]:a.map((function(e){return e.toArray()})),s=n[i],l=function(e){var t=u(o[e]),n=u(s[e]);vT.isEqual(t,n)||r.push({update:function(i){a[e].fromArray(vT.lerp(t,n,i))},start:function(){a[e].fromArray(t)},end:function(){a[e].fromArray(n)}})},c=0;c<a.length;++c)l(c);return r.length?r:void 0}}function dW(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"texture";if(e.hasValue(i)&&i in n){var r=e.getNode("mat");if(r){var a=t?t[i]:r,o=n[i],s=u(a.repeat),l=u(a.offset),c=u(o.repeat),d=u(o.offset);return fT.isEqual(s,c)&&fT.isEqual(l,d)?void 0:{update:function(e){r.repeat=fT.lerp(s,c,e),r.offset=fT.lerp(l,d,e),r.updateMatrix()},start:function(){r.repeat=u(s),r.offset=u(l),r.updateMatrix()},end:function(){r.repeat=u(c),r.offset=u(d),r.updateMatrix()}}}}}var hW=new Rf,fW=new xp;function pW(e,t,n,i){var r,a,o,s,l,u,c,d,h,f,p,v,m,g,L,y,b=[],x={slide:(null!==(r=null!==(a=t.pathSnapping)&&void 0!==a?a:e.updatedPathSnapping)&&void 0!==r?r:e.dataPatched.pathSnapping).slide,offset:(null!==(o=null!==(s=t.pathSnapping)&&void 0!==s?s:e.updatedPathSnapping)&&void 0!==o?o:e.dataPatched.pathSnapping).offset};if((L=KH("slide",x,null!==(l=null!==(u=t.pathSnapping)&&void 0!==u?u:e.updatedPathSnapping)&&void 0!==l?l:e.dataPatched.pathSnapping,null!==(c=n.pathSnapping)&&void 0!==c?c:e.dataPatched.pathSnapping))&&b.push(L),(y=KH("offset",x,null!==(d=null!==(h=t.pathSnapping)&&void 0!==h?h:e.updatedPathSnapping)&&void 0!==d?d:e.dataPatched.pathSnapping,null!==(f=n.pathSnapping)&&void 0!==f?f:e.dataPatched.pathSnapping))&&b.push(y),!L&&!y&&((p=$H("position",e,t,n))&&b.push(p),(v=$H("scale",e,t,n))&&b.push(v),m=function(e,t,n,i){var r=null!==t&&void 0!==t&&t.rotation?t.rotation:void 0,a=n.rotation;if(!a)return;var o=r?(new Rf).fromArray(r):(new Rf).setFromEuler(e.rotation),s=(new Rf).fromArray(a);if(o.equals(s))return;var l=hW.subVectors(s,o);if(i&&l.toArray().every((function(e){return Math.abs(e)<2*Math.PI}))){var u=(new If).setFromEuler(fW.setFromVector3(o)),c=(new If).setFromEuler(fW.setFromVector3(s));return{update:function(t){!function(e,t,n,i){if(0===i)return n.copy(e);if(1===i)return n.copy(t);var r=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(r>=1)return n.copy(e);var a=1-r*r;if(a<=Number.EPSILON){var o=1-i;return n.w=o*e.w+i*t.w,n.x=o*e.x+i*t.x,n.y=o*e.y+i*t.y,n.z=o*e.z+i*t.z,n.normalize(),n}var s=Math.sqrt(a),l=Math.atan2(s,r),u=Math.sin((1-i)*l)/s,c=Math.sin(i*l)/s;n.w=e.w*u+t.w*c,n.x=e.x*u+t.x*c,n.y=e.y*u+t.y*c,n.z=e.z*u+t.z*c}(u,c,e.quaternion,t)},start:function(){e.rotation.setFromVector3(o)},end:function(){e.rotation.setFromVector3(s)}}}return{update:function(t){hW.lerpVectors(o,s,t),e.rotation.setFromVector3(hW)},start:function(){e.rotation.setFromVector3(o)},end:function(){e.rotation.setFromVector3(s)}}}(e,t,n,i),m&&b.push(m),g=function(e,t,n,i){var r=n[e]?n[e]:void 0,a=i[e];if(a){var o=t[e],s=r?(new dp).fromArray(r):o.clone(),l=new Rf,u=new If,c=new Rf;s.decompose(l,u,c);var d=(new dp).fromArray(a),h=new Rf,f=new If,p=new Rf;return d.decompose(h,f,p),s.equals(d)?void 0:{update:function(e){QH.slerpQuaternions(u,f,e),XH.lerpVectors(l,h,e),YH.lerpVectors(c,p,e),o.compose(XH,QH,YH)},start:function(){o.compose(l,u,c)},end:function(){o.compose(h,f,p)}}}}("hiddenMatrix",e,t,n),g&&b.push(g)),p||v||m||g||L||y){var w=function(){var n;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),null!==(n=e.parent)&&void 0!==n&&n.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),EU(e)&&TU(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,x))};b.push({update:w,start:w,end:w})}return b}function vW(e,t,n){var i=[];if(!("cloner"in n)||!e.cloner)return i;var r=e.cloner,a="cloner"in t?t.cloner:{},o=n.cloner;FT.forEach((function(e){var t;(t="count"===e?KH("count",r.parameters,a,o,!0):eW(e,r.parameters,null!==a&&void 0!==a?a:{},o))&&i.push(t)}));var s=function(e,t,n){if("radial"!==e.parameters.type)return;var i=t.radial,r=n.radial;if(!r)return;var a=e.parameters.radial,o=[];return jT.forEach((function(e){var t=eW(e,a,null!==i&&void 0!==i?i:{},r);t&&o.push(t)})),o}(r,a,o);(null===s||void 0===s?void 0:s.length)&&i.push.apply(i,u(s));var l=function(e,t,n){if("linear"!==e.parameters.type)return;var i=t.linear,r=n.linear;if(!r)return;var a=[],o=e.parameters.linear;return UT.forEach((function(e){var t=eW(e,o,null!==i&&void 0!==i?i:{},r);t&&a.push(t)})),a}(r,a,o);(null===l||void 0===l?void 0:l.length)&&i.push.apply(i,u(l));var c=function(e,t,n){if("grid"!==e.parameters.type)return;var i=t.grid,r=n.grid;if(!r)return;var a=[],o=e.parameters.grid;return ZT.forEach((function(e){var t;(t="count"===e?JH(e,o,null!==i&&void 0!==i?i:{},r,!0):eW(e,o,null!==i&&void 0!==i?i:{},r))&&a.push(t)})),a}(r,a,o);(null===c||void 0===c?void 0:c.length)&&i.push.apply(i,u(c));var d=function(e,t,n){if("toObject"!==e.parameters.type)return;var i=t.toObject,r=n.toObject;if(!r)return;var a=[],o=e.parameters.toObject;return VT.forEach((function(e){var t;(t="count"===e?KH(e,o,null!==i&&void 0!==i?i:{},r,!0):eW(e,o,null!==i&&void 0!==i?i:{},r))&&a.push(t)})),a}(r,a,o);(null===d||void 0===d?void 0:d.length)&&i.push.apply(i,u(d));var h=function(e,t,n){if(!e.parameters.randomness)return;var i=t.randomnessObject,r=n.randomnessObject;if(!r)return;var a=[],o=e.parameters.randomnessObject;return GT.forEach((function(e){var t=eW(e,o,null!==i&&void 0!==i?i:{},r);t&&a.push(t)})),a}(r,a,o);return null!==h&&void 0!==h&&h.length&&i.push.apply(i,u(h)),i.length&&i.push({update:function(){r.update()}}),i}function mW(e,t,n,i,r){var a=[];return e.data.visible&&a.push.apply(a,u(pW(e,t,n,r))),e.data.visible&&a.push.apply(a,u(vW(e,t,n))),EU(e)?(e instanceof fj&&e.data.visible&&a.push.apply(a,u(tW(e,t,n,i))),e.data.visible&&a.push.apply(a,u(function(e,t,n,i){var r=[];if(Array.isArray(e.material)){if(!("materials"in n)||!n.materials)return r;var a="materials"in t&&t.materials?t.materials:[],o=n.materials;e.material.forEach((function(e,t){var n;if(o[t]){var s=null!==(n=a[t])&&void 0!==n?n:{},l=o[t];"string"==typeof s||"string"==typeof l||r.push.apply(r,u(iW(e,s,l,i)))}}))}else{if(!("material"in n)||!n.material)return r;var s="material"in t&&t.material?t.material:{},l=n.material;if("string"==typeof s||"string"==typeof l)return r;r.push.apply(r,u(iW(e.material,s,l,i)))}return r}(e,t,n,i)))):function(e){return AU.is(e)}(e)?e.data.visible&&a.push.apply(a,u(nW(e,t,n,i))):function(e){return e instanceof wU}(e)&&a.push.apply(a,u(function(e,t,n){var i,r,a,o,s=[],l="OrthographicCamera"===e.cameraType?null===(i=t.orthographic)||void 0===i?void 0:i.zoom:null===(r=t.perspective)||void 0===r?void 0:r.zoom,u="OrthographicCamera"===e.cameraType?null===(a=n.orthographic)||void 0===a?void 0:a.zoom:null===(o=n.perspective)||void 0===o?void 0:o.zoom;if(void 0!==u){var c=null!==l&&void 0!==l?l:e.zoom,d=u;c!==d&&s.push({update:function(t){e.zoom=rf.lerp(c,d,t),e.updateProjectionMatrix()},start:function(){e.zoom=c,e.updateProjectionMatrix()},end:function(){e.zoom=d,e.updateProjectionMatrix()}})}if(void 0!==n.targetOffset){var h=KH("targetOffset",e,t,n);h&&s.push(h)}return s}(e,t,n))),a.length?{update:function(e){a.forEach((function(t){return t.update(e)}))},start:function(e){a.forEach((function(t){var n;return null===(n=t.start)||void 0===n?void 0:n.call(t,e)}))},end:function(e){a.forEach((function(t){var n;return null===(n=t.end)||void 0===n?void 0:n.call(t,e)}))}}:void 0}var gW=new Rf;function LW(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];e.traverseChildren((function(r){var a,o,s,l,c;if(n&&(null!==(a=r.rigidBody)&&void 0!==a&&a.setTranslation(r.position0,!0),null!==(o=r.rigidBody)&&void 0!==o&&o.setRotation(r.rotation0,!0),null!==(s=r.rigidBody)&&void 0!==s&&s.setLinvel(gW,!0),null!==(l=r.rigidBody)&&void 0!==l&&l.setAngvel(gW,!0)),OO.is(r)){var d=r.uuid,h=r.data;if(delete r.states,r.uuid!==MT){var f=!1;i.some((function(t){var n;return null===(n=e.scene.find(d))||void 0===n?void 0:n.isDescendantOf(t)}))?f=!0:!0===(null===(c=h.physics)||void 0===c?void 0:c.fusedBody)&&"dynamic"===h.physics.rigidBody&&i.push(d),r.data=h,r.currentState=null,r.reversibleToState=null,r.currentTransitionEvent=null;var p,v=(0,x.Z)(h.states);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=$e({},m.data);!0===e.data.globalPhysics.usePhysics&&h.physics&&("dynamic"===h.physics.rigidBody||f)&&(void 0!==m.data.position&&delete g.position,void 0!==m.data.rotation&&delete g.rotation,void 0!==m.data.hiddenMatrix&&delete g.hiddenMatrix),r.states||(r.states={}),r.states[m.id]=SP.patch(h,g)}}catch(L){v.e(L)}finally{v.f()}(function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t instanceof fj&&t.removeInteractionGeometry(),t.changeSelectedState(n,{scene:e,shared:i},r),t instanceof fj&&t.updateGeometryGroupsIfNeeded(),t instanceof wU&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),t.cloner){var a,o=(0,x.Z)(t.cloner.children);try{for(o.s();!(a=o.n()).done;){a.value.playModeVisible=void 0}}catch(L){o.e(L)}finally{o.f()}}t.updateVisible()})(e.scene,r,null,t,void 0!==h.events.find((function(e){return"Follow"===e.data.type||"LookAt"===e.data.type}))),function(e){e.traverseEntity((function(t){var n,i=(0,x.Z)(t.data.events);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":a.push.apply(a,u(r.data.actions));break;case"GameControl":for(var o=0,s=Object.values(r.data.gameActions);o<s.length;o++){var l=s[o];a.push.apply(a,u(l))}break;case"DragDrop":a.push.apply(a,u(r.data.dragDropActions.drag).concat(u(r.data.dragDropActions.drop)));break;case"Conditional":a.push.apply(a,u(r.data.inActions).concat(u(r.data.outActions)))}for(var c=0,d=a;c<d.length;c++){var h=d[c];if("Create"===h.data.type&&"Yes"===h.data.hideBase){var f=e.scene.find(h.data.object);f&&(f.visible=!1)}}}}catch(L){i.e(L)}finally{i.f()}}))}(e)}}}))}function yW(e){var t;if(5===e.easing){var n=e.control1,i=e.control2;t="cubicBezier(\n\t\t\t".concat(n[0],", ").concat(n[1],", ").concat(i[0],", ").concat(i[1],"\n\t\t)")}else if(6===e.easing){var r=e.mass,a=e.stiffness,s=e.damping,l=e.velocity;t="spring( ".concat(r,", ").concat(a,", ").concat(s,", ").concat(l," )")}else{var u;switch(e.easing){case 0:default:u=wT.linear;break;case 1:u=wT.ease;break;case 2:u=wT.easeIn;break;case 3:u=wT.easeOut;break;case 4:u=wT.easeInOut}var c=o(u,4),d=c[0],h=c[1],f=c[2],p=c[3];t="cubicBezier( ".concat(d,", ").concat(h,", ").concat(f,", ").concat(p," )")}return{duration:e.duration,easing:t}}function bW(e){var t={delay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return"alternate"===t.direction&&(t.delay/=2,t.endDelay/=2,"start"===e.delayDirection?(t.pingPongDelayCorrection=t.delay,"number"==typeof t.loop&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):"end"===e.delayDirection?"number"==typeof t.loop&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):"start-end"===e.delayDirection&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var xW={type:"beginState"},wW={type:"completeState",isfromEntity:!1},_W=function(){function e(t,n,i,r,a,o){var s=this;if((0,c.Z)(this,e),this.object=t,this.data=r,this.sharedAssets=a,this.allowSlerp=o,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=function(){s.callback&&(s.callback.update(s.targets.t),s.object.dispatchEvent({type:"requestRender"})),0===s.targets.t||1===s.targets.t?s._changeCompleted||(s._changeCompleted=!0,s._changeBegan=!1,s.onChangeComplete()):(s._changeCompleted&&(s._changeCompleted=!1),s._changeBegan||(s._changeBegan=!0,s.onChangeBegin()))},this.onChangeBegin=function(){s.object.reversibleToState=s.to.id;var e=s.targets.t>.5?s.from.id:s.to.id;s.object.prevState!==s.object.currentState&&(s.object.prevState=s.object.currentState),s.object.currentState=e,s.object.dispatchEvent({type:"beginState",state:e}),s.object.traverseEntity((function(e){e!==s.object&&e instanceof wU&&e.dispatchEvent(xW)}))},this.onChangeComplete=function(){s.firstLoop&&(s.onFirstLoop(),s.firstLoop=!1),s.object.reversibleToState=s.to.id;var e=s.targets.t<.5?s.from.id:s.to.id;s.object.prevState!==s.object.currentState&&(s.object.prevState=s.object.currentState),s.object.currentState=e,s.object.dispatchEvent({type:"completeState",state:e}),s.object.traverseEntity((function(e){e!==s.object&&e instanceof wU&&e.dispatchEvent(wW)}))},this.onFirstLoop=function(){s.useCurrentState&&(s.callback=mW(s.object,s.from.data,s.to.data,s.sharedAssets,s.allowSlerp))},void 0===n){var l=kW(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!l)throw new Error("Missing property");this.from=l}else{var u=kW(this.object,n);if(!u)throw new Error("Missing property");this.from=u}if(void 0===i)throw new Error("Missing property");var d=kW(this.object,i);if(!d)throw new Error("Missing property");this.to=d,this.useCurrentState=void 0===n||void 0===i,this.params=$e($e($e({targets:this.targets,t:1,autoplay:!1},bW(r)),yW(r)),{},{change:this.onChange}),this.callback=mW(this.object,void 0===n?{}:this.from.data,void 0===i?{}:this.to.data,this.sharedAssets,this.allowSlerp)}return(0,d.Z)(e,[{key:"changeBegan",get:function(){return this._changeBegan}},{key:"changeCompleted",get:function(){return this._changeCompleted}}]),e}(),SW=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a;if((0,c.Z)(this,n),(a=t.call(this)).data=e,a.page=i,a.sharedAssets=r,a.toggleIsForward=!1,a.timelineNeedsRebuild=!1,a.useToggle=!1,a.onTimelineChangeComplete=function(){var e;"normal"!==a.data.tweens[0].data.direction&&(a.toggleIsForward=!a.toggleIsForward),!1!==a.timelineNeedsRebuild&&(null!==(e=a.timeline)&&void 0!==e&&e.pause(),a.buildTimeline({isForward:a.toggleIsForward,isRebuild:!0}),a.timeline.play())},!e.object)throw new Error("Missing property");var o=a.page.scene.find(e.object);if(!o)throw new Error("Missing property");if(!o.states)throw new Error("Missing property");if(a.object=o,e.tweens.length<2)throw new Error("Missing property");return a.tweens=Array(a.data.tweens.length-1),a.startOnceDelay="start-once"===e.tweens[0].data.delayDirection?e.tweens[0].data.delay:0,a.init(),a}return(0,d.Z)(n,[{key:"playing",get:function(){var e;return null!==(e=this.tweens.some((function(e){return e.changeBegan})))&&void 0!==e&&e}},{key:"init",value:function(){this.initialCurrentState=kW(this.object,this.object.currentState).id,this.toggleIsForward=!1}},{key:"currentState",get:function(){return this.useToggle?this.initialCurrentState:this.object.currentState}},{key:"buildTimeline",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isForward,i=void 0===n||n,r=t.isRebuild,a=void 0!==r&&r;try{var o,s=bW(this.data.tweens[0].data),l=s.loop;a&&"number"==typeof s.loop&&s.loop--,null!==(o=this.timeline)&&void 0!==o&&o.pause(),this.timeline=qH.timeline($e($e({autoplay:!1},s),!0===l||l>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}));var u=this.tweens.findIndex((function(e){return null===e||void 0===e?void 0:e.changeBegan}));if(this.timelineNeedsRebuild=-1!==u&&(!0===l||l>1),s.pingPongDelayCorrection&&!1===a&&(this.timelineNeedsRebuild=!0),i){for(var c=-1===u?0:u,d=c;d<this.data.tweens.length-1;d++){var h,f,p=this.data.tweens[d],v=this.data.tweens[d+1],m=void 0;d!==c||!0!==this.object.wasMovedByUser&&!0!==(null===(h=this.object.previousAction)||void 0===h?void 0:h.playing)?m=void 0===p.data.state?this.currentState:p.data.state:(m=void 0,this.object instanceof wU&&(this.object.wasMovedByUser=!1));var g=new _W(this.object,m,void 0===v.data.state?this.currentState:v.data.state,v.data,this.sharedAssets,null!==(f=this.data.allowSlerp)&&void 0!==f&&f);-1!==u&&d===c&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[d]=g,this.timeline.add(g.params,this.timeline.duration+(d===c?s.delay:0)+(d!==c||a?0:s.pingPongDelayCorrection))}this.timeline.duration+=s.endDelay}else{for(var L=-1===u?this.data.tweens.length-1:u+1,y=L;y>0;y--){var b,x,w=this.data.tweens[y],_=this.data.tweens[y-1],S=void 0;y!==L||!0!==this.object.wasMovedByUser&&!0!==(null===(b=this.object.previousAction)||void 0===b?void 0:b.playing)?S=void 0===w.data.state?this.currentState:w.data.state:(S=void 0,this.object instanceof wU&&(this.object.wasMovedByUser=!1));var k=new _W(this.object,S,void 0===_.data.state?this.currentState:_.data.state,w.data,this.sharedAssets,null!==(x=this.data.allowSlerp)&&void 0!==x&&x);-1!==u&&y===L&&Object.assign(k.params,{startOnceDelay:0}),this.tweens[y-1]=k,this.timeline.add(k.params,this.timeline.duration+(y===L?s.endDelay:0))}this.timeline.duration+=s.delay+(a?0:s.pingPongDelayCorrection)}}catch(A){A instanceof Error&&console.error(A.message)}!0===(null===(e=this.object.previousAction)||void 0===e?void 0:e.playing)&&this.object.previousAction.pause(),this.object.previousAction=this}},{key:"play",value:function(){var e=this;if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){try{e.buildTimeline(),e.timeline.play()}catch(eT){eT instanceof Error&&console.error(eT.message)}}),this.startOnceDelay)}},{key:"pause",value:function(){var e;null!==(e=this.timeline)&&void 0!==e&&e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}},{key:"stop",value:function(){this.pause();var e=void 0===this.data.tweens[0].data.state?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.sharedAssets}),this.object.currentState=e}},{key:"seek",value:function(e){var t;void 0===this.timeline&&this.buildTimeline(),null===(t=this.timeline)||void 0===t||t.seek(e*this.timeline.duration,!0)}},{key:"toggle",value:function(e){var t,n=this;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.playing?(null!==(t=this.timeline)&&void 0!==t&&t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout((function(){var e;null!==(e=n.timeline)&&void 0!==e&&e.pause(),n.buildTimeline({isForward:n.toggleIsForward}),n.timeline.play()}),this.startOnceDelay)}},{key:"playFromCurrent",value:function(){this.toggle(!0)}},{key:"reverseFromCurrent",value:function(){this.toggle(!1)}},{key:"dispose",value:function(){this.pause()}}]),n}(Vh);function kW(e,t){var n,i,r;if("string"==typeof t?(i=t,r=null===(n=e.states)||void 0===n?void 0:n[i]):null===t&&(i=null,r=e.data),void 0!==i&&void 0!==r)return{id:i,data:r}}var AW={type:"beginState"},MW={type:"completeState",isfromEntity:!1},CW={type:"requestRender"},EW=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this)).data=e,r.page=i,r.toggleIsForward=!1,r.useToggle=!1,r.posStart=new Rf,r.posEnd=new Rf,r.qStart=new If,r.qEnd=new If,r.zoomStart=1,r.zoomEnd=1,r.toCamera=r.page.scene.find(e.targetCamera),r}return(0,d.Z)(n,[{key:"init",value:function(){}},{key:"playing",get:function(){return this.animation&&this.animation.began&&!this.animation.completed}},{key:"buildAnimation",value:function(){var e=this;if(this.data.animate){var t={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=qH($e($e({targets:t,t:1},yW(this.data)),{},{update:function(){0===t.t&&(e.useToggle&&!e.toggleIsForward?(e.posEnd.copy(e.fromCamera.position),e.qEnd.copy(e.fromCamera.quaternion),e.zoomEnd=e.fromCamera.zoom,e.switchCamera(e.fromCamera)):(e.posEnd.copy(e.toCamera.position),e.qEnd.copy(e.toCamera.quaternion),e.zoomEnd=e.toCamera.zoom,e.fromCamera=e.page.activeCamera,e.switchCamera(e.toCamera)),e.page.activeCamera.dispatchEvent(AW));var n=e.page.activeCamera;n.position.lerpVectors(e.posStart,e.posEnd,t.t),n.quaternion.slerpQuaternions(e.qStart,e.qEnd,t.t),n.zoom=e.zoomStart+(e.zoomEnd-e.zoomStart)*t.t,n.wasMovedBySwitchCameraAction=!0,n.updateMatrix(),n.updateMatrixWorld(),n.updateProjectionMatrix(),n.dispatchEvent(CW),1===t.t&&n.dispatchEvent(MW)}}))}}},{key:"switchCamera",value:function(e){this.page.switchActiveCamera(e),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:e})}},{key:"play",value:function(){var e=this;this.playing||this.page.activeCamera!==this.toCamera&&(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){delete e.timeoutId;try{var t;e.data.animate?(e.buildAnimation(),null===(t=e.animation)||void 0===t||t.play()):e.switchCamera(e.toCamera)}catch(eT){eT instanceof Error&&console.error(eT.message)}}),1e3*this.data.delay))}},{key:"pause",value:function(){var e;null!==(e=this.animation)&&void 0!==e&&e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}},{key:"toggle",value:function(e){var t,n,i=this;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.playing?(null!==(t=this.animation)&&void 0!==t&&t.pause(),this.buildAnimation(!0),null===(n=this.animation)||void 0===n||n.play()):this.timeoutId=window.setTimeout((function(){var e,t;delete i.timeoutId,i.data.animate?(null!==(e=i.animation)&&void 0!==e&&e.pause(),i.buildAnimation(),null===(t=i.animation)||void 0===t||t.play()):(i.toggleIsForward?(i.fromCamera=i.page.activeCamera,i.switchCamera(i.toCamera)):i.switchCamera(i.fromCamera),i.page.activeCamera.dispatchEvent(MW),i.page.activeCamera.dispatchEvent(CW))}),1e3*this.data.delay)}},{key:"playFromCurrent",value:function(){this.toggle(!0)}},{key:"reverseFromCurrent",value:function(){this.toggle(!1)}},{key:"dispose",value:function(){this.pause(),this.toggleIsForward=!1}}]),n}(Vh),TW=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r){var a,o,s,l,u;(0,c.Z)(this,n),(u=t.call(this)).page=i,u.animationControls=r,u.startOnceDelay=0,u.toggleIsForward=!1;var d=e.object,h=i.scene.find(e.object);h&&Array.isArray(h.identity)&&(d=h.identity[0]),u.data=$e($e({},e),{},{object:d});var f=u.animationControls.clipIdToAction[e.clipId+"/"+d];u.duration=null!==(a=null===f||void 0===f||null===(o=f.getClip())||void 0===o?void 0:o.duration)&&void 0!==a?a:1;var p=null!==(s=null===f||void 0===f||null===(l=f.getClip())||void 0===l||null===(l=l.tracks[0])||void 0===l?void 0:l.times.length)&&void 0!==s?s:1/0;return u.leftFrameTime=u.data.crop[0]/p*u.duration,u.rightFrameTime=u.data.crop[1]/p*u.duration,u.startOnceDelay=e.delay,u}return(0,d.Z)(n,[{key:"playing",get:function(){var e,t;return null!==(e=null===(t=this.threeAnimAction)||void 0===t?void 0:t.isRunning())&&void 0!==e&&e}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){var n;if(e.threeAnimAction=e.animationControls.play(e.data),e.threeAnimAction){e.threeAnimAction.reset(),e.threeAnimAction.time=e.leftFrameTime,e.threeAnimAction._clip.start=e.leftFrameTime,e.threeAnimAction._clip.duration=e.rightFrameTime;var i=e.data.object;Object.entries(e.animationControls.clipIdToAction).forEach((function(n){var r=o(n,2),a=r[0],s=r[1],l=a.split("/")[1];e.threeAnimAction!==s&&l===i&&s.isRunning()&&(t?s.fadeOut(.2):s.stop())})),t&&(null===(n=e.threeAnimAction)||void 0===n||n.fadeIn(.2))}}),this.startOnceDelay)}},{key:"pause",value:function(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}},{key:"stop",value:function(){var e;null===(e=this.threeAnimAction)||void 0===e||e.fadeOut(.2)}},{key:"seek",value:function(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=rf.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}},{key:"toggle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout((function(){if(t.threeAnimAction=t.animationControls.play(t.data),t.threeAnimAction){var e;t.toggleIsForward?(t.threeAnimAction.time=t.leftFrameTime,t.threeAnimAction._clip.start=t.leftFrameTime,t.threeAnimAction._clip.duration=t.rightFrameTime):(t.threeAnimAction.time=t.rightFrameTime,t.threeAnimAction._clip.start=t.rightFrameTime,t.threeAnimAction._clip.duration=t.leftFrameTime),t.threeAnimAction.paused=!1,t.threeAnimAction.timeScale=t.toggleIsForward?1:-1;var i=t.data.clipId.split("/")[1];Object.entries(t.animationControls.clipIdToAction).forEach((function(e){var r=o(e,2),a=r[0],s=r[1],l=a.split("/")[1];t.threeAnimAction!==s&&l===i&&s.isRunning()&&(n?s.fadeOut(.2):s.stop())})),n&&(null===(e=t.threeAnimAction)||void 0===e||e.fadeIn(.2))}}),this.startOnceDelay)}},{key:"playFromCurrent",value:function(){this.toggle(!0)}},{key:"reverseFromCurrent",value:function(){this.toggle(!1)}},{key:"dispose",value:function(){var e,t=null===(e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])||void 0===e?void 0:e.getClip();t&&(t.duration=this.duration),this.pause()}}]),n}(Vh),PW=function(){function e(t,n,i,r){(0,c.Z)(this,e),this.data=t,this.page=n,this.eventManager=i,this.shared=r,this.timeOutId=-1,this.scene=n.scene}return(0,d.Z)(e,[{key:"dispatch",value:function(){var e=this;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout((function(){e.play()}),1e3*this.data.delay))}},{key:"dispose",value:function(){window.clearTimeout(this.timeOutId)}},{key:"play",value:function(){var e=this;if(!this.scene.children.every((function(t){return t.uuid!==e.data.target}))){"fade"===this.data.transition&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,1e3*this.data.duration),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();var t=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(t),LW(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}}}]),e}();function DW(e,t,n,i,r,a){var o={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[]};return t.forEach((function(t){var s=t.id,l=t.data;try{"Audio"===l.type?hT[e.type].includes("Audio")&&o.Audio.push(new FG(s,l,a,i)):"Video"===l.type?hT[e.type].includes("Video")&&o.Video.push(new zW(s,l,a)):"Link"===l.type?hT[e.type].includes("Link")&&o.Link.push(new ZG(l,r)):"Create"===l.type?hT[e.type].includes("Create")&&o.Create.push(new GW(l,n,r.controlsManager)):"Destroy"===l.type?hT[e.type].includes("Destroy")&&o.Destroy.push(new VG(l,n,r)):"Reset"===l.type?hT[e.type].includes("Reset")&&o.Reset.push(new GG(n,i,r)):"Transition"===l.type?hT[e.type].includes("Transition")&&o.Transition.push(new SW(l,n,i)):"SwitchCamera"===l.type?hT[e.type].includes("SwitchCamera")&&o.SwitchCamera.push(new EW(l,n)):"SceneTransition"===l.type?hT[e.type].includes("SceneTransition")&&o.SceneTransition.push(new PW(l,n,r,i)):"Animation"===l.type&&hT[e.type].includes("Animation")&&o.Animation.push(new TW(l,n,r.animationControls))}catch(u){}})),o}function OW(e){Object.values(e).forEach((function(e){e.forEach((function(e){(e instanceof FG||e instanceof zW||e instanceof TW||e instanceof SW||e instanceof GW||e instanceof VG||e instanceof EW||e instanceof PW)&&e.dispose()}))}))}var IW=new Map,RW=new Map,BW=function(){function e(t,n,i){(0,c.Z)(this,e),this.data=n,this.delay=0,this.status="stopped";var r=n.layerId,a=n.loop,o=n.volume,s=n.delay;if(this.object=i,void 0===r)throw new Error("Missing property");var l=function(e,t){var n;if("material"in e){var i=e.material;n=Array.isArray(i)?e.material[0].layers.find((function(e){return e.uuid===t})):e.material.layers.find((function(e){return e.uuid===t}))}if(n)return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}(i,r);l&&(this.videoElement=l,this.videoElement.loop=a===1/0,this.videoElement.autoplay=!0,void 0!==o&&(this.videoElement.volume=o)),void 0!==s&&(this.delay=s),RW.has(i.uuid)?RW.get(i.uuid).push(this):RW.set(i.uuid,[this]),IW.set(t,this),this.pause()}return(0,d.Z)(e,[{key:"mute",value:function(){!this.videoElement||(this.videoElement.muted=!0)}},{key:"unMute",value:function(){!this.videoElement||(this.videoElement.muted=!1)}},{key:"play",value:function(e){var t=this;if(this.videoElement){var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):n?(this.mute(),window.setTimeout((function(){t.unMute()}),100)):this.unMute(),this.delayTimerId=window.setTimeout((function(){if(t.videoElement){var e=t.videoElement.play();void 0!==e&&e.then((function(e){})).catch((function(e){t.play()})),t.clearDelay()}}),this.delay),this.status="playing"}}},{key:"clearDelay",value:function(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},{key:"pause",value:function(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}},{key:"stop",value:function(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}},{key:"playByToggle",value:function(){"stop"===this.data.toggle?"playing"===this.status?this.stop():(this.stop(),this.play()):"pause"===this.data.toggle?"playing"===this.status?this.pause():this.play():(this.stop(),this.play())}},{key:"dispose",value:function(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}}]),e}(),NW=function(){function e(t){(0,c.Z)(this,e),this.data=t}return(0,d.Z)(e,[{key:"dispatch",value:function(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}},{key:"pauseVideo",value:function(e){var t=this,n=IW.get(e);!n||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){n[t.data.interaction](),t.disposeDelay()}),this.data.delay)):n[this.data.interaction]())}},{key:"pauseAllVideosFromObject",value:function(e){var t=this,n=RW.get(e);null===n||void 0===n||!n.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){n.forEach((function(e){return e[t.data.interaction]()})),t.disposeDelay()}),this.data.delay)):n.forEach((function(e){return e[t.data.interaction]()})))}},{key:"pauseAllVideos",value:function(){var e=this,t=u(RW.values());!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((function(){t.forEach((function(t){t.forEach((function(t){t[e.data.interaction]()}))})),e.disposeDelay()}),this.data.delay)):t.forEach((function(t){t.forEach((function(t){t[e.data.interaction]()}))})))}},{key:"disposeDelay",value:function(){clearTimeout(this.timeoutId),delete this.timeoutId}},{key:"dispose",value:function(){clearTimeout(this.timeoutId),delete this.timeoutId}}]),e}(),zW=function(){function e(t,n,i){if((0,c.Z)(this,e),this.data=n,"play"===n.interaction)this.interaction=new BW(t,n,i);else{if("pause"!==n.interaction&&"stop"!==n.interaction)throw new Error("Missing property");this.interaction=new NW(n)}}return(0,d.Z)(e,[{key:"dispatchBasic",value:function(){this.interaction instanceof BW?this.interaction.playByToggle():this.interaction.dispatch()}},{key:"dispatchConditional",value:function(){this.interaction instanceof BW?this.interaction.play():this.interaction.dispatch()}},{key:"dispose",value:function(){this.interaction.dispose()}}]),e}(),FW=function(){var e,t,n,i;function r(n){var r;!e&&!jW()&&(null===(r=t)||void 0===r?void 0:r.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),n&&(t=n,i=n.requestRender)}function a(r){for(var o=n?r-n:0,s=t.sharedGameControlGlobals.createdObjects,l=t.sharedGameControlGlobals.nCreatedPerAction,u=s.length,c=0;c<u;){var d=s[c];void 0===d.userData.createdTime&&(d.userData.createdTime=r),void 0===d.userData.lifetime&&void 0===d.userData.quantity||d.userData.lifetime&&r-d.userData.createdTime<d.userData.lifetime||d.userData.quantity&&l[d.userData.actionId]<=d.userData.quantity?(d.userData.velocity&&(d.position.addScaledVector(d.userData.velocity,o/1e3),d.updateMatrix(),i()),c++):(l[d.userData.actionId]>d.userData.quantity&&l[d.userData.actionId]--,s.splice(c,1),d.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&d.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(d.rigidBody)):(d.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter((function(e){return void 0!==e.bvhGeometry}))),u--,i())}e=c>0?requestAnimationFrame(a):void 0,n=c>0?r:void 0}return typeof document<"u"&&document.addEventListener("visibilitychange",(function(){jW()?e&&(cancelAnimationFrame(e),e=void 0,n=void 0):r()})),r}();function jW(){return!!document&&document.hidden}var UW=new If,ZW=new Rf,VW=new Rf,GW=function(){function e(t,n,i){var r=this;(0,c.Z)(this,e),this.data=t,this.page=n,this.controlsManager=i,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=rf.generateUUID(),this.dispatch=function(){r.data.delay?r.timeoutIdQueue.push(window.setTimeout(r.dispatchInner,1e3*r.data.delay)):r.dispatchInner()},this.dispatchFromStart=function(){r.timeoutIdQueue.push(window.setTimeout(r.dispatchInner,1e3*r.data.delay))},this.dispatchThrottled=dM(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=function(){null===r.intervalId&&(r.intervalId=window.setInterval(r.dispatch,1e3/r.data.creationSpeed))},this.dispatchStop=function(){null!==r.intervalId&&(window.clearInterval(r.intervalId),r.intervalId=null)},this.dispatchInner=function(){r.timeoutIdQueue.shift();var e=new BO(r.object);if(e.playModeVisible=!0,e.expand(),"world"!==r.data.coordinateSystem){var t=r.data.coordinateSystem,n=r.page.scene.find(t);n&&(n.updateMatrixWorldSVD(),e.hiddenMatrix.copy(n.matrixWorldRigid))}e.position.fromArray(r.data.position),e.rotation.fromArray(r.data.rotation),e.updateMatrix(),r.page.add(e);var i=r.controlsManager.sharedGameControlGlobals;i.createdObjects.push(e),void 0===i.nCreatedPerAction[r.uniqueId]?i.nCreatedPerAction[r.uniqueId]=1:i.nCreatedPerAction[r.uniqueId]++,e.updateWorldMatrix(!0,!0),e.traverseObject(r.traverseObjectCB),FW(),r.controlsManager.requestRender()},this.traverseObjectCB=function(e){var t,n,i,a;if(e.hasNonUniformScale&&e.updateMatrixWorldSVD(),r.controlsManager.sharedGameControlGlobals.rapierWorld){var o;if(e instanceof iU){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;a=e.object}else if(e instanceof BO)a=e.object;else if(null!==(o=(a=e).dataPatched.cloner)&&void 0!==o&&o.hideBase)return!0}else{if(e instanceof iU)return;a=e instanceof BO?e.object:e}"Time"===r.data.destroy?e.userData.lifetime=1e3*r.data.lifetime:"Quantity"===r.data.destroy&&(e.userData.quantity=r.data.destroyAfterQuantity,e.userData.actionId=r.uniqueId);var s=(new Rf).fromArray(r.data.velocity),l=a.dataPatched;if(!("visibility"===l.physics.enabled?!l.visible:!l.physics.enabled)&&(r.controlsManager.sharedGameControlGlobals.rapierWorld?(r.controlsManager.addRigidBody(e,a,{fromCreate:!0,dynamic:r.data.dynamic}),"Collision"===r.data.destroy&&(null!==(t=e.rigidBody)&&void 0!==t&&t.collider(0).setActiveEvents(1),e.userData.hasCollisionDestroy=!0),e.matrixWorld.decompose(ZW,UW,VW),s.applyQuaternion(UW),r.data.velocity.some((function(e){return 0!==e}))&&r.data.dynamic&&(null===(n=e.rigidBody)||void 0===n||n.setLinvel(s.divideScalar(r.controlsManager.pixelsPerMeter),!0))):("geometry"in e.object&&r.controlsManager.addBoundsTree(e),r.data.velocity.some((function(e){return 0!==e}))&&r.data.dynamic&&(e.userData.velocity=s)),!0===(null===(i=a.dataPatched.physics)||void 0===i?void 0:i.fusedBody)))return!0};var a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,"world"!==this.data.coordinateSystem&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");FW(i)}return(0,d.Z)(e,[{key:"dispose",value:function(){var e;null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach((function(e){return window.clearTimeout(e)})),this.dispatchThrottled.cancel(),(e=this.page).remove.apply(e,u(this.controlsManager.sharedGameControlGlobals.createdObjects)),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}}]),e}(),HW=.02,WW=(new Rf,new Rf),qW=new Rf,XW=new Rf,YW=new Rf,QW=new Rf,KW=new Rf,JW=new dp,$W=new dp,eq=new dp,tq=(new dp,new If),nq=new If,iq=new xp(0,0,0,"YXZ"),rq=new Rf(1,0,0),aq=new Rf(0,1,0),oq=new Rf(0,0,1),sq=new Rf(1,1,1),lq=new np,uq=new mx,cq=new zf,dq={type:"requestRender"},hq={type:"updateMatrix"},fq=Math.PI/6,pq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s,l,d,h){var f,p,v,m,g,L,y,b,w,_,S,k,A,M,C,E,T,P,D,O;(0,c.Z)(this,n),(O=t.call(this)).object=e,O.domElement=i,O.data=r,O.gloabalPhysics=a,O.controlsManager=o,O.cameraFollow=s,O.camera=l,O.page=d,O.sharedAssets=h,O.enableDamping=!0,O.hiddenMatrix0=new dp,O.target0=new Rf,O.zoom0=1,O.rotForce=1,O.moveForce=1,O.pixelsPerMeter=200,O.euler0=new xp(0,0,0,"YXZ"),O.position0Cam=new Rf,O.quat0Cam=new If,O.scale0Cam=new Rf,O.hiddenMatrix0Cam=new dp,O.threshEndTranslate=.01,O.threshEndRotate=1e-8,O.threshEndRotVel=.005,O.collider={type:"capsule",radius:40,segment:new mx(new Rf(0,-40,0),new Rf(0,40,0)),matrix:new dp,position:new Rf,rotation:new If},O.euler=new xp(0,0,0,"YXZ"),O.eulerDelta=new Rf,O.lastPosition=new Rf,O.lastCameraQuaternion=new If,O.lastCameraPosition=new Rf,O.PI_2=Math.PI/2,O.prevMouse=new af,O.velocityTarget=new Rf,O.velocity=new Rf,O.directionXZ=new Rf,O.rotVelocityStick=new Rf,O.rotVelocityTarget=new Rf,O.rotVelocity=new Rf,O.rotDirection=new Rf,O.nonColliderRotOffset=new dp,O.nonColliderPosOffset=new dp,O.firstPointerId=-1,O.rot=new Rf,O.path=[],O.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},O.vrEulerYOffset=0,O.onObject=!1,O.actionState={},O.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],O.collisionEnabled=!0,O.offsetMatrix=new dp,O.objectToTarget=new Rf,O.objectToTarget0=new Rf,O.objectToCamXZ=new Rf,O.objectToCamXZ0=new Rf,O.targetToCamera=new Rf,O.targetToCamera0=new Rf,O.cameraPolarAxis0=new Rf,O.targetPos=new Rf,O.targetQuat=new If,O.lerpFactorPos=(new Rf).setScalar(.3),O.lerpFactorPosStart=.3,O.lerpFactorPosEnd=.3,O.lerpFactorRotStart=.3,O.lerpFactorRotEnd=.3,O.lerpFactorPosCamera=.3,O.lerpFactorRotCamera=.3,O.objXZQuat=new If,O.objXZQuatInv=new If,O.objXZRotMat=new dp,O.isFirstPerson=!1,O.actions={},O.didHit=!1,O.groundVelocity=new Rf,O.pushedVelocity=new Rf,O.groundYRotation=0,O.objectRealQuat=new If,O.colliderWorldQuat=new If,O.groundNormal=new Rf,O.groundTilt=new If,O.groundTiltInv=new If,O.lastHitObj=null,O.isFirstFrame=!0,O.rotationAccumWhenOrientWithCamera=0,O.navMeshPathDest=null,O.position=new Rf,O.quaternion=new If,O.scale=new Rf,O.initialAction=!0,O.onPointerDown=function(e){e.target!==O.domElement||-1!==O.firstPointerId||(O.firstPointerId=e.pointerId,O.domElement.ownerDocument.addEventListener("pointermove",O.onPointerMove),O.domElement.ownerDocument.addEventListener("pointerup",O.onPointerUp),"keys"!==O.rotBy&&!mM&&(!gM||LM>=15.5)&&O.domElement.requestPointerLock(),O.prevMouse.set(e.clientX,e.clientY))},O.onPointerUp=function(e){O.firstPointerId=-1,O.domElement.ownerDocument.removeEventListener("pointermove",O.onPointerMove),O.domElement.ownerDocument.removeEventListener("pointerup",O.onPointerUp),"mouse"===e.pointerType&&O.domElement.ownerDocument.exitPointerLock()},O.onPointerMove=function(e){if(e.pointerId===O.firstPointerId){var t=e.clientX-O.prevMouse.x,n=e.clientY-O.prevMouse.y;O.prevMouse.set(e.clientX,e.clientY),"mouse"===e.pointerType&&"keys"!==O.rotBy&&(gM&&LM<15.5&&!mM?(O.eulerDelta.y=-t*O.mouseOrbitSensitivity,O.eulerDelta.x=-n*O.mouseOrbitSensitivity):(O.eulerDelta.y=-e.movementX*O.mouseOrbitSensitivity,O.eulerDelta.x=-e.movementY*O.mouseOrbitSensitivity)),"mouse"!==e.pointerType&&"drag"===O.rotByTouch&&(O.eulerDelta.y=-t*O.mouseOrbitSensitivity*5,O.eulerDelta.x=-n*O.mouseOrbitSensitivity*5),O.controlsManager.requestRender()}},O.onPointerlockChange=function(e){O.domElement.ownerDocument.pointerLockElement===O.domElement?n.isLocked=!0:n.isLocked=!1},O.onPointerlockError=function(){console.error("SPE.GameControls: Unable to use Pointer Lock API")},O.handleVisibilityChange=function(){var e;if(null!==(e=document)&&void 0!==e&&e.hidden)for(var t in O.movementState)O.movementState[t]=0},O.onKeyDown=function(e){!(e.target instanceof HTMLInputElement)&&("ArrowLeft"===e.code||"ArrowUp"===e.code||"ArrowRight"===e.code||"ArrowDown"===e.code||"Space"===e.code)&&e.preventDefault();var t,n=(0,x.Z)(O.keyAssignments);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e.key.toUpperCase()===i[1]||e.key===i[1]){O.movementState[i[0]]=1;break}}}catch(r){n.e(r)}finally{n.f()}O.controlsManager.requestRender()},O.onKeyUp=function(e){var t,n=(0,x.Z)(O.keyAssignments);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e.key.toUpperCase()===i[1]||e.key===i[1]||e.code.slice(3,e.code.length).toUpperCase()===i[1]){O.movementState[i[0]]=0;break}}}catch(r){n.e(r)}finally{n.f()}},O.copyVRGamePadValues=function(e,t){for(var n=2;n<4;n++){var i=e.axes[n];0===t?2===n?O.movementState.movePosX=i:O.movementState.movePosZ=i:(e.buttons[3].pressed?O.movementState.jump=1:O.movementState.jump=0,2===n?(Math.abs(O.movementState.rotPosY)<.3&&Math.abs(i)>=.3&&(O.vrEulerYOffset+=i<0?1:-1),O.movementState.rotPosY=i):"fly"===O.moveMode&&(O.movementState.moveNegY=i))}},O.sharedGameControlGlobals=o.sharedGameControlGlobals,e===l&&(O.isFirstPerson=!0),O.hiddenMatrix0.copy(O.object.hiddenMatrix),O.object.parent?O.object.hiddenMatrix.copy(O.object.parent.matrixWorld).invert():O.object.hiddenMatrix.identity(),O.object.matrix.copy(O.object.matrixWorld),O.object.matrix.decompose(O.position,O.quaternion,O.scale),O.euler0.setFromQuaternion(O.quaternion,"YXZ");var I,R=O.euler0.clone(),B=R.y;if(O.objectRealQuat.copy(O.quaternion),R.y=0,O.quaternion.setFromEuler(R),O.objXZQuat.copy(O.quaternion),O.objXZQuatInv.copy(O.objXZQuat).invert(),O.objXZRotMat.makeRotationFromQuaternion(O.quaternion),R.set(0,B,0),O.quaternion.setFromEuler(R),O.rot.setFromEuler(R),O.object.matrixAutoUpdate=!1,(O.isFirstPerson||!0===O.cameraFollow)&&(O.target0.copy(O.camera.getTarget()),O.zoom0=O.camera.zoom),!0===O.cameraFollow){var N;O.position0Cam.copy(O.camera.position),O.quat0Cam.copy(O.camera.quaternion),O.scale0Cam.copy(O.camera.scale),O.hiddenMatrix0Cam.copy(O.camera.hiddenMatrix),O.camera.parent?(O.camera.hiddenMatrix.copy(null===(N=O.camera)||void 0===N?void 0:N.parent.matrixWorld),O.camera.matrix.copy(O.camera.matrixWorld)):O.camera.hiddenMatrix.identity(),O.camera.matrix.copy(O.camera.matrixWorld),O.camera.matrix.decompose(O.camera.position,O.camera.quaternion,O.camera.scale),O.camera.matrixAutoUpdate=!1,O.offsetMatrix.copy(O.object.matrix).invert().multiply(O.camera.matrix);var z,F,j=new Rf(0,0,-1).applyQuaternion(O.camera.quaternion),U=(new Rf).subVectors(O.position,O.camera.position);O.objectToCamXZ.copy(U),O.objectToCamXZ.y=0,O.objectToCamXZ0.copy(O.objectToCamXZ),Math.abs(j.y)<1e-6?(U.y=0,j.y=0,F=U.projectOnVector(j)):F=U.y/j.y>0?j.multiplyScalar(U.y/j.y):j.multiplyScalar(U.length()),O.targetToCamera0.copy(F).negate(),z=O.camera.position.clone().add(F),O.objectToTarget0.subVectors(z,O.position);var Z=(new xp).setFromQuaternion(O.camera.quaternion,"YXZ");O.cameraPolarOffset=-Z.x,Z.x=0,Z.z=0,Z.y-=Math.PI/2,O.cameraPolarAxis0.set(0,0,-1).applyEuler(Z)}(O.object instanceof wU&&(O.object.matrixAutoUpdate=!1),O.euler.setFromQuaternion(O.quaternion,"YXZ"),O.rotByTouch=null!==(f=r.rotByTouch)&&void 0!==f?f:"joystick",O.rotBy=null!==(p=r.rotBy)&&void 0!==p?p:"keys",O.rotationMode=null!==(v=r.rotationMode)&&void 0!==v?v:"normal",O.moveMode=null!==(m=r.moveMode)&&void 0!==m?m:"walk",O.collisionEnabled=r.collisionEnabled,O.speedTranslate=1*(null!==(g=r.speedTranslate)&&void 0!==g?g:250),O.speedOrbit=.025*(null!==(L=r.speedRotate)&&void 0!==L?L:100),O.mouseOrbitSensitivity=16e-6*(null!==(y=r.speedRotate)&&void 0!==y?y:100),O.keyAssignments=r.keyAssignments.map((function(e){var t=[e[0],e[1]];return"\u25b2"===t[1]?t[1]="ArrowUp":"\u25c0"===t[1]?t[1]="ArrowLeft":"\u25bc"===t[1]?t[1]="ArrowDown":"\u25b6"===t[1]?t[1]="ArrowRight":"\u21e7"===t[1]?t[1]="Shift":"\u21b5"===t[1]?t[1]="Enter":"Space"===t[1]?t[1]=" ":"\u2318"===t[1]?t[1]="Meta":"Ctrl"===t[1]?t[1]="Control":"Esc"===t[1]&&(t[1]="Escape"),t})),"mouse"===r.rotBy)&&(I=O.keyAssignments.findIndex((function(e){return"rotNegX"===e[0]})),-1!==I&&(O.keyAssignments[I][1]=""),I=O.keyAssignments.findIndex((function(e){return"rotPosX"===e[0]})),-1!==I&&(O.keyAssignments[I][1]=""),I=O.keyAssignments.findIndex((function(e){return"rotPosY"===e[0]})),-1!==I&&(O.keyAssignments[I][1]=""),I=O.keyAssignments.findIndex((function(e){return"rotNegY"===e[0]})),-1!==I&&(O.keyAssignments[I][1]=""));O.lerpFactorPosStart=1-Math.pow(.02,1/(60*(null!==(b=r.delayPos[0])&&void 0!==b?b:.3))),O.lerpFactorPosEnd=1-Math.pow(.02,1/(60*(null!==(w=r.delayPos[1])&&void 0!==w?w:.3))),O.lerpFactorPos.setScalar(O.lerpFactorPosStart),O.lerpFactorRotStart=1-Math.pow(.02,1/(60*(null!==(_=r.delayRot[0])&&void 0!==_?_:.3))),O.lerpFactorRotEnd=1-Math.pow(.02,1/(60*(null!==(S=r.delayRot[1])&&void 0!==S?S:.3))),O.lerpFactorPosCamera=1-Math.pow(.02,1/(60*(null!==(k=r.delayPosCamera)&&void 0!==k?k:.3))),O.lerpFactorRotCamera=1-Math.pow(.02,1/(60*(null!==(A=r.delayRotCamera)&&void 0!==A?A:.3))),O.gravity=12*(null!==(M=O.gloabalPhysics.gravity)&&void 0!==M?M:uP.defaultData.gravity),O.usePhysics=null!==(C=O.gloabalPhysics.usePhysics)&&void 0!==C?C:uP.defaultData.usePhysics,O.jumpPower=20*r.jumpPower,O.resetYPosition=O.position.y+Math.abs(r.resetYPosition)*(O.gravity>0?1:-1),O.alignToGround=null!==(E=r.alignToGround)&&void 0!==E&&E,O.orientMode=r.autoOrientMove?r.orientMode:"none",O.orientWith=null!==(T=r.orientWith)&&void 0!==T?T:RP.defaultDataThirdPerson.orientWith,O.slopeThresh=65*Math.PI/180,"capsule"===r.collider.type?(O.collider.radius=r.collider.radius,O.collider.segment.start.y=r.collider.height/2-r.collider.radius,O.collider.segment.end.y=-O.collider.segment.start.y,O.offset=r.collider.height*HW/O.pixelsPerMeter,O.stepThresh=.3*r.collider.height/O.pixelsPerMeter,O.colliderHeight=r.collider.height):"sphere"===r.collider.type?(O.collider.radius=r.collider.radius,O.collider.segment.start.y=0,O.collider.segment.end.y=0,O.offset=2*r.collider.radius*HW/O.pixelsPerMeter,O.stepThresh=2*r.collider.radius*.3/O.pixelsPerMeter,O.colliderHeight=2*r.collider.radius):(O.offset=r.collider.height*HW/O.pixelsPerMeter,O.stepThresh=.3*r.collider.height/O.pixelsPerMeter,O.colliderHeight=r.collider.height),O.collider.type=r.collider.type;var V=(new Rf).fromArray(r.collider.position),G=(new If).setFromEuler((new xp).fromArray([].concat(u(r.collider.rotation),["XYZ"])));O.collider.position.copy(V).multiply(O.scale),O.collider.rotation.copy(G),O.collider.matrix.compose(V,G,sq),void 0!==r.cameraXAxis&&(O.cameraXAxis=r.cameraXAxis,O.cameraYAxis=r.cameraYAxis,O.minPolarAngle=r.cameraRotXLimits[0],O.maxPolarAngle=r.cameraRotXLimits[1],O.minAzimuthAngleRel=r.cameraRotYLimits[0],O.maxAzimuthAngleRel=r.cameraRotYLimits[1]),O.forwardDir=null!==(P=r.forwardDirection)&&void 0!==P?P:"-z",O.runMultiplier=null!==(D=r.runMultiplier)&&void 0!==D?D:2;var H=2*r.navmesh.destinationHelperRadius;if(H>0){var W=new YM;W.push({fi:0,data:$e($e({},HT.defaultData("light","phong")),{},{alpha:0}),id:"layer1"}),W.push({fi:0,data:$e($e({},HT.defaultData("color")),{},{color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a}),id:"layer2"});var q=new BF({layers:W},{scene:O.page.scene,shared:O.sharedAssets});O.navMeshPathDest=new Sv(eI.create({parameters:{width:H,height:H/10,hollow:.7}}),q),O.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}return O.activate(),O}return(0,d.Z)(n,[{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();var t=(new xp).setFromQuaternion(this.quaternion,"YXZ"),n=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,n,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof wU?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}},{key:"activate",value:function(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}},{key:"deactivate",value:function(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}},{key:"dispose",value:function(){var e;this.deactivate(),(null===(e=this.navMeshPathDest)||void 0===e?void 0:e.parent)&&this.page.remove(this.navMeshPathDest)}},{key:"instantiateActions",value:function(){var e=this,t=this.data,n=this.page,i=this.sharedAssets,r=this.object;void 0!==t.gameActions&&Object.entries(t.gameActions).forEach((function(t,a){var s=o(t,2),l=s[0];s[1].forEach((function(t){var a=t.id,o=t.data;try{void 0===e.actions[l]&&(e.actions[l]=[]),"Transition"===o.type?e.actions[l].push(new SW(o,n,i)):"Animation"===o.type?e.actions[l].push(new TW(o,n,e.controlsManager.eventManager.animationControls)):"Audio"===o.type?e.actions[l].push(new FG(a,o,r,i)):"Video"===o.type?e.actions[l].push(new zW(a,o,r)):"Create"===o.type&&e.actions[l].push(new GW(o,n,e.controlsManager))}catch(s){}}))})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}},{key:"disposeActions",value:function(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),OW(this.actions)}},{key:"dispatchStartEvent",value:function(e){var t=this;void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach((function(e){e instanceof SW?e.play():e instanceof TW?e.play(!1===t.initialAction):e instanceof GW?e.dispatchStart():e instanceof FG&&e.dispatchGameControl("start")}))))}},{key:"dispatchStopEvent",value:function(e){var t=this;void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach((function(e){e instanceof SW?(e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:t.page.scene,shared:t.sharedAssets})):e instanceof TW||(e instanceof GW?e.dispatchStop():e instanceof FG&&e.dispatchGameControl("stop"))}))))}},{key:"colliderWorldPosition",get:function(){return YW.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}},{key:"update",value:function(e,t,n){var i,r;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);var a=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);var o=60*a,s=!1;if(this.usePhysics&&this.collisionEnabled){var l,u=QW.set(0,(0===this.velocity.y?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/120,1)*(this.gravity>0?1:-1):this.velocity.y)*a,0).divideScalar(this.pixelsPerMeter),c=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,u,null===(l=this.object.rigidBody)||void 0===l?void 0:l.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(c){var d;this.onObject=!0,this.groundNormal.set(c.normal2.x,c.normal2.y,c.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),0===(null===(d=c.collider.parent())||void 0===d?void 0:d.bodyType())&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);var h=c.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);var f,p=(0,x.Z)(this.sharedGameControlGlobals.entitiesWithTransformAnim);try{for(p.s();!(f=p.n()).done;){var v=f.value;if(v.rigidBody===h&&v.userData.isFollowingObj!==this.object.uuid){(v.hasNonUniformScale?v.matrixWorldRigid:v.matrixWorld).decompose(YW,nq,QW),this.groundVelocity.subVectors(YW,v.prevT),this.object.getWorldPosition(QW).add(this.collider.position).sub(YW),this.groundYRotation=iq.setFromQuaternion(nq).y-v.prevR.y,KW.copy(QW).applyAxisAngle(aq,this.groundYRotation),this.groundVelocity.add(KW.sub(QW)).divideScalar(a);break}}}catch(xe){p.e(xe)}finally{p.f()}}else this.onObject=!1}if("walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*o),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,"+z"===this.forwardDir&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){var m=this.navMeshPathDest.material;if("walk"===this.moveMode&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);var g=YW.subVectors(this.path[1],this.position),L=QW.subVectors(this.path[1],this.path[0]);g.dot(L)<0?this.path.shift():(this.directionXZ.x=L.x,this.directionXZ.z=L.z),m.opacity=m.userData.opacity0}else m.opacity-=.05*m.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),!1===this.didHit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-Math.pow(1-this.lerpFactorPos.x,o)),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-Math.pow(1-this.lerpFactorPos.y,o)),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-Math.pow(1-this.lerpFactorPos.z,o))):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?Math.pow(this.velocity.x,2)+Math.pow(this.velocity.z,2)<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));var y=XW.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){var b=QW.copy(y);b.y=0,y.set(0,y.y,b.length()*("+z"===this.forwardDir?1:-1))}if(this.directionXZ.manhattanLength()>0&&"none"!==this.orientMode)if("camera"===this.orientWith&&this.path.length<=1){var w=YW;this.camera.getWorldDirection(w);var _=KW.copy(aq).multiplyScalar(w.dot(aq));w.sub(_);var S=QW.copy(this.directionXZ);S.x*=-1,this.rot.y=w.angleTo(S)*(w.cross(S).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*("+z"===this.forwardDir?1:-1);if(iq.setFromVector3(this.rot),"walk"===this.moveMode&&(iq.x=0),y.applyEuler(iq),s&&(nq.setFromUnitVectors(aq,this.groundNormal),y.applyQuaternion(nq)),n){var k=iq.set(0,this.vrEulerYOffset*fq,0);n.applyEuler(k),y.x+=n.x,y.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*a}if(!0===this.usePhysics){var A=QW;this.pushedVelocity.set(0,0,0);var M,C=(0,x.Z)(this.sharedGameControlGlobals.entitiesWithTransformAnim);try{for(C.s();!(M=C.n()).done;){var E=M.value,T=KW.setFromMatrixPosition(E.matrixWorld).sub(E.prevT).divideScalar(a).divideScalar(this.pixelsPerMeter),P=E.rigidBody.collider(0).castCollider(T,this.object.rigidBody.collider(0),YW.copy(y).divideScalar(this.pixelsPerMeter),a,!1);T.multiplyScalar(this.pixelsPerMeter);var D=OO.is(E)?E:E.object;if(null!==P&&this.lastHitObj!==D){var O=void 0;E instanceof BO&&(O=E);var I=this.sharedGameControlGlobals.entityToCollisionEvents[D.uuid];if(I){var R,B=(0,x.Z)(I);try{for(B.s();!(R=B.n()).done;){var N=R.value;"character"===N.data.target&&(N.dispatch(O),D.dispatchEvent(DY))}}catch(xe){B.e(xe)}finally{B.f()}}this.lastHitObj=D}if(null!==P){this.pushedVelocity.copy(T),A.copy(P.normal1).applyQuaternion(E.quaternion);break}}}catch(xe){C.e(xe)}finally{C.f()}if(0!==this.pushedVelocity.manhattanLength()){var z=A.dot(y);z<0&&y.addScaledVector(A,-z),y.add(this.pushedVelocity)}else y.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),"normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,"normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(a),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-Math.pow(1-this.lerpFactorRotEnd,o)):this.rotVelocity.lerp(this.rotVelocityTarget,1-Math.pow(1-this.lerpFactorRotStart,o)),this.euler.x+=this.rotVelocity.x*a,this.euler.y+=this.rotVelocity.y*a+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*a),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){if("radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(aq,this.euler.y-this.euler0.y);var F=QW.copy(this.objectToCamXZ).normalize(),j=KW.copy(y).multiplyScalar(a);j.y=0;var U=j.sub(YW.copy(F).multiplyScalar(j.dot(F))).cross(F).y;this.euler.y-=Math.atan2(U,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*a+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.rot.y);if(!0===this.cameraFollow&&("walk"===this.moveMode?"Limit"===this.cameraXAxis?this.euler.x=rf.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=rf.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):"Limit"===this.cameraXAxis&&(this.euler.x=rf.clamp(this.euler.x,-this.PI_2,this.PI_2))),"fly"===this.moveMode?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(iq.copy(t),iq.y=0):(iq.copy(this.euler),iq.y=0),this.nonColliderRotOffset.makeRotationFromEuler(iq)),t&&("walk"===this.moveMode?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*fq),tq.setFromAxisAngle(rq,this.rot.x),nq.setFromAxisAngle(aq,this.rot.y),nq.multiply(tq),tq.setFromAxisAngle(oq,this.rot.z),nq.multiply(tq),this.quaternion.copy(nq),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){var Z,V,G=QW.copy(y).multiplyScalar(a/this.pixelsPerMeter),H=null;this.didHit=!1;for(var W=new Rf,q=0;q<5;q++){var X,Y=G.length(),Q=KW.copy(G).normalize();if(null===(H=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(W),this.colliderWorldQuat,Q,null===(X=this.object.rigidBody)||void 0===X?void 0:X.collider(0).shape,Y,!1,24,void 0,void 0,this.object.rigidBody))){0===q&&0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),W.add(G);break}this.didHit=!0;var K=this.sharedGameControlGlobals.colliderToEntity.get(H.collider.handle);if(K!==this.lastHitObj&&0===q){this.lastHitObj=K;var J=this.sharedGameControlGlobals.entityToCollisionEvents[null===K||void 0===K?void 0:K.uuid];if(J){var $,ee=(0,x.Z)(J);try{for(ee.s();!($=ee.n()).done;){var te=$.value;if("character"===te.data.target){var ne,ie=(null===(ne=this.sharedGameControlGlobals.rapierWorld)||void 0===ne?void 0:ne.getCollider(H.collider.handle))._parent,re=void 0;if(K.cloner){var ae,oe=(0,x.Z)(K.cloner.children);try{for(oe.s();!(ae=oe.n()).done;){var se=ae.value;if(se.rigidBody===ie){re=se;break}}}catch(xe){oe.e(xe)}finally{oe.f()}}te.dispatch(re),K.dispatchEvent(DY)}}}catch(xe){ee.e(xe)}finally{ee.f()}}}var le=WW.set(H.normal2.x,H.normal2.y,H.normal2.z).applyQuaternion(this.colliderWorldQuat),ue=qW.copy(Q).multiplyScalar(H.toi).dot(le),ce=H.toi;if(0===ce&&(this.position.y+=this.offset*this.pixelsPerMeter),ue>this.offset&&(ce=H.toi*(ue-this.offset)/ue,W.addScaledVector(Q,ce)),G.copy(Q).multiplyScalar(Y-ce),Math.acos(-le.y)>this.slopeThresh){var de,he=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(W),fe=KW.copy(H.witness2).applyQuaternion(this.colliderWorldQuat);fe.y=0;var pe=he.add(fe);pe.y+=this.stepThresh;var ve=this.sharedGameControlGlobals.rapierWorld.castShape(pe,this.colliderWorldQuat,G,null===(de=this.object.rigidBody)||void 0===de?void 0:de.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);null!==ve&&0===ve.toi&&(le.y=0,le.normalize())}G.addScaledVector(le,-G.dot(le))}this.position.addScaledVector(W,this.pixelsPerMeter),null!==(Z=this.object.rigidBody)&&void 0!==Z&&Z.setTranslation(YW.copy(this.position).divideScalar(this.pixelsPerMeter),!0),null===(V=this.object.rigidBody)||void 0===V||V.setRotation(tq.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else for(var me=this.onObject?1:5,ge=y.multiplyScalar(a/me),Le=0;Le<me;Le++)this.position.add(ge),0===Le&&this.checkTrigger(),this.collisionAdjustment(a/me);else this.position.addScaledVector(y,a);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();var ye=this.objectToTarget.add(this.position),be=this.targetToCamera.add(ye);JW.lookAt(be,ye,aq).setPosition(be),JW.decompose(this.targetPos,this.targetQuat,YW),this.camera.quaternion.slerp(this.targetQuat,1-Math.pow(1-this.lerpFactorRotCamera,o)),this.camera.position.lerp(this.targetPos,1-Math.pow(1-this.lerpFactorPosCamera,o)),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=rf.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=rf.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(hq),!(this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(void 0===this.camera||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&("fly"===this.moveMode||!0===this.onObject||!1===this.collisionEnabled)&&(null===(i=this.navMeshPathDest)||void 0===i||null===(i=i.material)||void 0===i?void 0:i.opacity)<-.04*(null===(r=this.navMeshPathDest)||void 0===r||null===(r=r.material)||void 0===r?void 0:r.userData.opacity0))&&(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(dq),!0)}},{key:"updateFollowArms",value:function(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);var e,t=tq.setFromAxisAngle(aq,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?rf.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(t),e="Limit"===this.cameraXAxis?rf.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):rf.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);var n=YW.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&n.applyQuaternion(t);var i=nq.setFromAxisAngle(n,e);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(t),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(i)}},{key:"groundTiltAdjustment",value:function(e){180*aq.angleTo(e)/Math.PI<15||180*aq.angleTo(e)/Math.PI>85?tq.identity():tq.setFromUnitVectors(aq,e),this.groundTilt.slerp(tq,.06),this.groundTiltInv.copy(this.groundTilt).invert()}},{key:"checkTrigger",value:function(){for(var e,t=this,n=0;n<this.sharedGameControlGlobals.triggers.length;n++)for(var i=o(this.sharedGameControlGlobals.triggers[n],4),r=i[0],a=i[1],s=i[2],l=i[3],u=function(){var n=t.sharedGameControlGlobals.entitiesWithTransformAnim[c];if(s===n||!1===l.isValidTriggeringObject(OO.is(n)?n:n.object))return 1;var i=$W.copy(s.matrixWorld).decompose(YW,tq,QW).compose(YW,tq,sq).multiply(a),o=JW.copy(n.matrixWorld).invert().multiply(i);r instanceof zf?e=n.bvhGeometry.boundsTree.intersectsBox(r,o):(lq.radius=r,lq.center.setFromMatrixPosition(o),e=n.bvhGeometry.boundsTree.intersectsSphere(lq)),e?-1===l.currentIntersectedObjects.indexOf(n)&&(l.currentIntersectedObjects.push(n),l.dispatch(),s.dispatchEvent(OY)):l.currentIntersectedObjects=l.currentIntersectedObjects.filter((function(e){return e!==n}))},c=0;c<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;c++)u()}},{key:"collisionAdjustment",value:function(e){var t,n=this,i=qW.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);var r=JW.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(YW,tq,QW).compose(YW,tq,sq);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach((function(e){if(e!==n.object&&!e.isDescendantOf(n.object)){cq.makeEmpty(),e.updateMatrixWorldSVD();var t=e.matrixWorldRigid,a=$W.copy(t).invert(),o=eq.copy($W).multiply(r);uq.copy(n.collider.segment),uq.start.applyMatrix4(o),uq.end.applyMatrix4(o);var s=WW.copy(n.position).applyMatrix4(a);cq.expandByPoint(uq.start),cq.expandByPoint(uq.end),cq.min.addScalar(-n.collider.radius),cq.max.addScalar(n.collider.radius),e.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder:function(e){return e.distanceToPoint(uq.end)},intersectsBounds:function(e){return e.intersectsBox(cq)},intersectsTriangle:function(e){var r=YW,a=QW,o=e.closestPointToSegment(uq,r,a);if(o<n.collider.radius){var l=n.collider.radius-o,u=a.sub(r).normalize(),c=KW.copy(s);c.addScaledVector(u,l);var d=c.applyMatrix4(t).sub(n.position);i.add(d),uq.start.addScaledVector(u,l),uq.end.addScaledVector(u,l)}}})}})),cq.makeEmpty(),uq.copy(this.collider.segment),uq.start.applyMatrix4(r),uq.end.applyMatrix4(r),cq.expandByPoint(uq.start),cq.expandByPoint(uq.end),cq.min.addScalar(-this.collider.radius),cq.max.addScalar(this.collider.radius),null!==(t=this.sharedGameControlGlobals.staticMeshBVH)&&void 0!==t&&t.shapecast({traverseBoundsOrder:function(e){return e.distanceToPoint(uq.end)},intersectsBounds:function(e){return e.intersectsBox(cq)},intersectsTriangle:function(e){var t=YW,r=QW,a=e.closestPointToSegment(uq,t,r);if(a<n.collider.radius){var o=n.collider.radius-a,s=r.sub(t).normalize();n.alignToGround&&n.groundTiltAdjustment(s),i.addScaledVector(s,o),uq.start.addScaledVector(s,o),uq.end.addScaledVector(s,o)}}}),this.onObject=Math.abs(i.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");var a=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(a),this.position.add(i)}}]),n}(Vh),vq=pq;vq.isLocked=!1;var mq=ac(sc());function gq(e,t){var n=new cv;if(!e.getAttribute("position"))return n.setAttribute("position",new nv([],3)),n.setIndex([]),n;var i=GB(e.getAttribute("position"),e.getIndex()),r=i.positions,a=i.triIndices;return n.setAttribute("position",new nv(r,3)),n.setIndex(a),t&&n.applyMatrix4(t),n}var Lq=new dp,yq=new dp,bq=[[0,0,0],[0,0,0],[0,0,0]];function xq(e){var t=e.elements;bq[0][0]=t[0],bq[0][1]=t[4],bq[0][2]=t[8],bq[1][0]=t[1],bq[1][1]=t[5],bq[1][2]=t[9],bq[2][0]=t[2],bq[2][1]=t[6],bq[2][2]=t[10];var n=(0,mq.SVD)(bq),i=n.u,r=n.v,a=Lq.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=yq.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return a.multiply(o.transpose())}var wq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).layers.enable(3),e.layers.enable(8),e}return(0,d.Z)(n,[{key:"setFromCamera",value:function(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}},{key:"intersectVisibleObjects",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){e.visible&&t.intersectObject(e,n,i)})),i}},{key:"createRaycastLineHelper",value:function(){var e=new NL({color:65280,linewidth:10}),t=new Rf(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new Rf(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=(new Rf).addVectors(t,n.multiplyScalar(i)),a=new cv;return a.setFromPoints([t,r]),new VL(a,e)}}]),n}(lx),_q=function(e){return e instanceof OU||e instanceof GV};function Sq(e,t){return e.distance-t.distance}function kq(e,t,n){if(KO(t)&&t.visible){EU(t)&&t.raycast(e,n);var i,r=(0,x.Z)(t.children);try{for(r.s();!(i=r.n()).done;){kq(e,i.value,n)}}catch(a){r.e(a)}finally{r.f()}}}function Aq(e,t,n){if(!n.some((function(t){return void 0!==Cq(e,t)})))return[];var i=[];return t.children.forEach((function(t){return kq(e,t,i)})),i.sort(Sq),i}function Mq(e){var t=[];if(e.length){var n=e[0].object;KO(n)&&t.push(n);for(var i=n.parent;i;)_q(i)&&t.push(i),i=i.parent}return t}function Cq(e,t){if(EU(t)){if(t.visible){var n=[];return t.raycast(e,n),n.length?n[0]:void 0}}else if(_q(t))return Eq(e,t)}function Eq(e,t){if(KO(t)&&t.visible){if(EU(t)){var n=[];if(t.raycast(e,n),n.length)return n[0]}var i,r=(0,x.Z)(t.children);try{for(r.s();!(i=r.n()).done;){var a=Eq(e,i.value);if(a)return a}}catch(o){r.e(o)}finally{r.f()}}}var Tq=function(){function e(t,n,i,r,a,o,s){(0,c.Z)(this,e),this.renderer=t,this.publish=n,this.scene=i,this.getCamera=r,this.sharedAssets=a,this.requestRender=o,this.isExport=s,this.raycaster=new wq,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this._useWindowEvents="window"===n.mouseEventTarget,this.domElement=t.domElement,this.eventElement=this._useWindowEvents?window:t.domElement}return(0,d.Z)(e,[{key:"stopRaycast",get:function(){return this.publish.stopRaycast}},{key:"page",get:function(){return this.scene.activePage}},{key:"useWindowEvents",get:function(){return this._useWindowEvents},set:function(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}},{key:"updateRaycaster",value:function(e){var t;if(this.raycasterNeedsUpdate){this.raycasterNeedsUpdate=!1;var n=(null===(t=e.touches)||void 0===t?void 0:t.length)>0?e.touches[0]:e,i=n.pageX,r=n.pageY,a=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(function(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width*2-1,y:-(t-(n.top+window.scrollY))/n.height*2+1}}(i,r,a),this.getCamera())}}}]),e}(),Pq=function(e){return e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e}(Pq||{}),Dq=function(){function e(t){(0,c.Z)(this,e),this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}return(0,d.Z)(e,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){}}]),e}(),Oq=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],Iq=function(e){var t;return null===(t=Oq.find((function(t){var n=o(t,2);n[0];return n[1]===e})))||void 0===t?void 0:t[0]},Rq=function(e){var t;return null===(t=Oq.find((function(t){return o(t,1)[0]===e})))||void 0===t?void 0:t[1]},Bq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).objectsPerEvents=new Map,i.splineEvents={},i.onBeginEvent=function(e){var t;if(e.eventName&&e.target&&"Scroll"!==e.eventName){var n=null===(t=i.splineEvents[Iq(e.eventName)])||void 0===t?void 0:t[e.target.uuid];if(n)"Scroll"===e.eventName&&void 0!==e.deltaY&&Object.assign(n,{deltaY:e.deltaY}),i.eventContext.domElement.dispatchEvent(n)}},i.eventContext.page.traverseEntity((function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length){var n,r=(0,x.Z)(Oq);try{var a=function(){var t=o(n.value,2),r=t[0],a=t[1];if(e.data.events.some((function(e){return e.data.type===a&&!e.data.disabled}))){var s;i.objectsPerEvents.has(r)?null===(s=i.objectsPerEvents.get(r))||void 0===s||s.push(e):i.objectsPerEvents.set(r,[e]);var l={id:e.uuid,name:e.name},u=function(e,t){var n=Iq(e);if(n){var i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}}(a,l),c=i.splineEvents[r];c?c[e.uuid]=u:i.splineEvents[r]=Ke({},e.uuid,u)}};for(r.s();!(n=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}}})),i}return(0,d.Z)(n,[{key:"connect",value:function(){var e=this;this.objectsPerEvents.forEach((function(t){t.forEach((function(t){t.addEventListener("beginEvent",e.onBeginEvent)}))}))}},{key:"disconnect",value:function(){var e=this;this.objectsPerEvents.forEach((function(t){t.forEach((function(t){t.removeEventListener("beginEvent",e.onBeginEvent)}))}))}}]),n}(Dq),Nq=function(){function e(t,n,i,r,a,o){if((0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=n.toggle,("KeyDown"===n.type||"KeyUp"===n.type||"KeyPress"===n.type)&&!n.key)throw new Error("Missing property");this.actions=DW(n,n.actions,r,a,o,i)}return(0,d.Z)(e,[{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatchHeld",value:function(e){this.actions.Create.forEach((function(t){e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()}))}},{key:"dispatch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.actions.Transition.forEach((function(t){t.object.currentTransitionEvent!==e?(t.object.currentTransitionEvent=e,t.init()):!1===e.useToggle&&e.alreadyPlayedNonTogglingActions.add(t)})),this.useToggle?(this.actions.Transition.forEach((function(e){e.toggle()})),this.actions.Animation.forEach((function(e){e.toggle()})),this.actions.SwitchCamera.forEach((function(e){e.toggle()}))):"MousePress"===this.data.type||"KeyPress"===this.data.type?this.entered||(this.entered=!0,this.actions.Transition.forEach((function(e){return e.playFromCurrent()})),this.actions.Animation.forEach((function(e){return e.playFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.playFromCurrent()})),this.actions.Create.forEach((function(e){return e.dispatchStart()}))):(this.actions.Transition.some((function(e){return e.playing}))||this.actions.Transition.forEach((function(t){!1===e.alreadyPlayedNonTogglingActions.has(t)&&t.play()})),this.actions.SwitchCamera.some((function(e){return e.playing}))||this.actions.SwitchCamera.forEach((function(e){e.play()})),this.actions.Animation.forEach((function(e){e.play()}))),this.actions.Link.forEach((function(e){e.dispatch()})),this.actions.SceneTransition.forEach((function(e){e.dispatch()})),!1===t&&this.actions.Create.forEach((function(e){e.dispatch()})),this.actions.Destroy.forEach((function(e){e.dispatch()})),this.actions.Reset.forEach((function(e){e.dispatch()})),this.actions.Audio.forEach((function(e){e.dispatchBasic()})),this.actions.Video.forEach((function(e){e.dispatchBasic()}))}},{key:"dispatchRelease",value:function(){this.entered&&(this.entered=!1,this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Create.forEach((function(e){return e.dispatchStop()})))}},{key:"dispatchUserEvent",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),e?(this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.reverseFromCurrent()}))):(this.actions.Transition.forEach((function(e){return e.playFromCurrent()})),this.actions.Animation.forEach((function(e){return e.playFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.playFromCurrent()}))),this.actions.Link.forEach((function(e){e.dispatch()})),this.actions.SceneTransition.forEach((function(e){e.dispatch()})),this.actions.Create.forEach((function(e){e.dispatch()})),this.actions.Destroy.forEach((function(e){e.dispatch()})),this.actions.Reset.forEach((function(e){e.dispatch()})),this.actions.Audio.forEach((function(e){e.dispatchBasic()})),this.actions.Video.forEach((function(e){e.dispatchBasic()}))}}]),e}(),zq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},r.canvasMouseEvents=[],r.windowMouseEvents=[],r.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},r.heldKeys={},r.heldKeysPress={},r._prevObjects=[],r.onWindowMouseDown=function(e){(e.target===r.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&r.canvasMouseEvents.forEach((function(e){("MouseDown"===e.data.type||"MousePress"===e.data.type)&&e.dispatch()})),r.windowMouseEvents.forEach((function(e){("MouseDown"===e.data.type||"MousePress"===e.data.type)&&e.dispatch()}))},r.onWindowMouseUp=function(e){(e.target===r.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&r.canvasMouseEvents.forEach((function(e){"MouseUp"===e.data.type?e.dispatch():"MousePress"===e.data.type&&e.dispatchRelease()})),r.windowMouseEvents.forEach((function(e){"MouseUp"===e.data.type?e.dispatch():"MousePress"===e.data.type&&e.dispatchRelease()}))},r.onMouseDown=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMouseEvent("MouseDown"))},r.onMouseUp=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMouseEvent("MouseUp"))},r.onMousePressDown=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMousePressEvent())},r.onMousePressRelease=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMousePressEvent(!0))},r.onKeyDown=function(e){r.heldKeys[e.key]||(r.handleKeyEvent(e,"KeyDown"),r.handleKeyEventHeld(e,"KeyDown",!0)),r.heldKeys[e.key]=!0},r.onKeyUp=function(e){r.handleKeyEvent(e,"KeyUp"),r.handleKeyEventHeld(e,"KeyUp",!0)},r.onKeyPressDown=function(e){r.heldKeysPress[e.key]?r.handleKeyEventHeld(e,"KeyPress"):(r.handleKeyEvent(e,"KeyPress"),r.handleKeyEventHeld(e,"KeyPress",!0)),r.heldKeysPress[e.key]=!0},r.onKeyPressUp=function(e){r.handleKeyEvent(e,"KeyPress",!0)},r.releaseHeldKey=function(e){delete r.heldKeys[e.key]},r.releaseHeldKeyPress=function(e){delete r.heldKeysPress[e.key]},r._onUserEvent=function(e){var t,n,i=e.eventName,a=e.target,o=e.reverse;if(i&&a){var s=Rq(i);s&&("MouseDown"===s||"MouseUp"===s||"MousePress"===s?(a.dispatchEvent({type:"beginEvent",eventName:s}),null===(t=r.eventsPerObjects[s])||void 0===t||null===(t=t[a.uuid])||void 0===t||t.forEach((function(e){e.dispatchUserEvent(o)}))):("KeyDown"===s||"KeyUp"===s||"KeyPress"===s)&&(a.dispatchEvent({type:"beginEvent",eventName:s}),null===(n=r.eventsPerObjects[s])||void 0===n||null===(n=n[a.uuid])||void 0===n||n.forEach((function(e){e.dispatchUserEvent()}))))}};var a=r.eventContext,o=a.page,s=a.sharedAssets;return o.traverseEntity((function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length)for(var n=function(){var t,n=l[a],u=r.eventsPerObjects[n];e.data.events.filter((function(e){var t=e.data;return t.type===n&&!0!==t.disabled})).forEach((function(t){var n=t.id,a=t.data;try{var l=new Nq(n,a,e,o,s,i);l.actions.Video.length&&(r.hasVideoAction=!0),"MouseDown"!==a.type&&"MouseUp"!==a.type&&"MousePress"!==a.type||"Canvas"!==a.mode&&"Window"!==a.mode?u[e.uuid]?u[e.uuid].push(l):u[e.uuid]=[l]:"Canvas"===a.mode&&r.canvasMouseEvents.push(l)}catch(c){}})),(null===(t=u[e.uuid])||void 0===t?void 0:t.length)&&r.objectsPerTypes[n].push(e)},a=0,l=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];a<l.length;a++)n()})),r}return(0,d.Z)(n,[{key:"connect",value:function(){var e,t,n,i,r,a,s=this,l=this.eventContext.domElement;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),typeof window<"u"&&(window.addEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.addEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),null!==(e=this.objectsPerTypes.MouseDown)&&void 0!==e&&e.length&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMouseDown)),null!==(t=this.objectsPerTypes.MouseUp)&&void 0!==t&&t.length&&(this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMouseUp)),null!==(n=this.objectsPerTypes.MousePress)&&void 0!==n&&n.length&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMousePressRelease)),null!==(i=this.objectsPerTypes.KeyDown)&&void 0!==i&&i.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),null!==(r=this.objectsPerTypes.KeyUp)&&void 0!==r&&r.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),null!==(a=this.objectsPerTypes.KeyPress)&&void 0!==a&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach((function(e){var t=o(e,2);t[0];t[1].forEach((function(e){e.addEventListener("userEvent",s._onUserEvent)}))}))}},{key:"disconnect",value:function(){var e=this,t=this.eventContext.domElement;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},typeof window<"u"&&(window.removeEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.removeEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerdown",this.onMousePressDown),t.removeEventListener("pointerup",this.onMouseUp),t.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach((function(e){Object.values(e).forEach((function(e){e.forEach((function(e){e.disconnect()}))}))})),this.canvasMouseEvents.forEach((function(e){e.disconnect()})),Object.entries(this.objectsPerTypes).forEach((function(t){var n=o(t,2);n[0];n[1].forEach((function(t){t.removeEventListener("userEvent",e._onUserEvent)}))}))}},{key:"handleMouseEvent",value:function(e){var t=this,n=this.eventContext,i=n.stopRaycast,r=n.raycaster,a=n.page,o=this.objectsPerTypes[e];if(o.length)if(i){Mq(Aq(r,a,o)).forEach((function(n){t.eventsPerObjects[e][n.uuid]&&t.handleObjectMouseEventDispatch(n,e)}))}else o.forEach((function(n){Cq(r,n)&&t.handleObjectMouseEventDispatch(n,e)}))}},{key:"handleMousePressEvent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="MousePress",i=this.objectsPerTypes[n],r=[];if(i.length){if(!t){var a=this.eventContext,o=a.stopRaycast,s=a.raycaster,l=a.page;if(o){var u=Aq(s,l,i);r=Mq(u)}else i.forEach((function(e){Cq(s,e)&&r.push(e)}))}this._prevObjects.length&&this._prevObjects.forEach((function(t){r.includes(t)||e.handleObjectMouseEventDispatchRelease(t,n)})),r.length&&r.forEach((function(t){e.handleObjectMouseEventDispatch(t,n)})),this._prevObjects=r}}},{key:"handleObjectMouseEventDispatch",value:function(e,t){var n;e.dispatchEvent({type:"beginEvent",eventName:t}),null===(n=this.eventsPerObjects[t])||void 0===n||null===(n=n[e.uuid])||void 0===n||n.forEach((function(e){e.dispatch()}))}},{key:"handleObjectMouseEventDispatchRelease",value:function(e,t){var n;e.dispatchEvent({type:"beginEvent",eventName:t}),null===(n=this.eventsPerObjects[t])||void 0===n||null===(n=n[e.uuid])||void 0===n||n.forEach((function(e){e.dispatchRelease()}))}},{key:"handleKeyEvent",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.objectsPerTypes[t].forEach((function(r){var a=n.eventsPerObjects[t][r.uuid];a.some((function(t){var n=t.data;return"key"in n&&n.key===e.key}))&&r.dispatchEvent({type:"beginEvent",eventName:t}),a.forEach((function(t){"key"in t.data&&t.data.key===e.key&&(i?t.dispatchRelease():t.dispatch(!0))}))}))}},{key:"handleKeyEventHeld",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.objectsPerTypes[t].forEach((function(r){n.eventsPerObjects[t][r.uuid].forEach((function(t){"key"in t.data&&t.data.key===e.key&&t.dispatchHeld(i)}))}))}}]),n}(Dq),Fq=new Rf,jq=new Rf,Uq=function(){function e(t,n,i,r,a){(0,c.Z)(this,e),this.actionsIn=DW(t,t.inActions,i,r,a,n),this.actionsOut=DW(t,t.outActions,i,r,a,n)}return(0,d.Z)(e,[{key:"disconnect",value:function(){OW(this.actionsIn),OW(this.actionsOut)}}]),e}(),Zq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s){var l;(0,c.Z)(this,n),(l=t.call(this,i,r,a,o,s)).id=e,l.data=i,l.object=r,l.stage="out",l.objects=[],l.onUpdateMatrix=function(){var e,t=(0,x.Z)(l.objects);try{for(t.s();!(e=t.n()).done;){if(!e.value.visible)return}}catch(o){t.e(o)}finally{t.f()}var n=Fq.setFromMatrixPosition(l.objects[0].matrixWorld),i=jq.setFromMatrixPosition(l.objects[1].matrixWorld),r=n.distanceTo(i)<=l.distance?"in":"out";if(l.stage!==r){l.stage=r;var a="in"===r?l.actionsIn:l.actionsOut;a.Audio.forEach((function(e){return e.dispatchConditional()})),a.Video.forEach((function(e){return e.dispatchConditional()})),a.Link.forEach((function(e){return e.dispatch()})),a.Create.forEach((function(e){return e.dispatch()})),a.Destroy.forEach((function(e){return e.dispatch()})),a.Reset.forEach((function(e){return e.dispatch()})),a.Transition.forEach((function(e){e.object.currentTransitionEvent!==(0,Ye.Z)(l)&&(e.object.currentTransitionEvent=(0,Ye.Z)(l)),e.init()})),a.Transition.forEach((function(e){return e.play()})),a.Animation.forEach((function(e){return e.play()})),a.SwitchCamera.forEach((function(e){return e.play()})),a.SceneTransition.forEach((function(e){return e.dispatch()}))}};var u=i.condition,d=u.distance,h=u.fromObject,f=u.toObject;l.distance=d;for(var p=0,v=[h,f];p<v.length;p++){var m=v[p];if(!m)throw new Error("Missing property");var g=a.find(m);if(!g)throw new Error("Missing property");l.objects.push(g)}return l}return(0,d.Z)(n,[{key:"connect",value:function(){var e=this;window.setTimeout((function(){e.objects.forEach((function(t){t.addEventListener("updateMatrix",e.onUpdateMatrix)})),e.onUpdateMatrix()}),0)}},{key:"disconnect",value:function(){var e=this;Au((0,p.Z)(n.prototype),"disconnect",this).call(this),this.stage="out",this.objects.forEach((function(t){t.removeEventListener("updateMatrix",e.onUpdateMatrix)}))}}]),n}(Uq),Vq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,r,a,o,s){var l,u;(0,c.Z)(this,n),(u=t.call(this,i,r,a,o,s)).id=e,u.data=i,u.object=r,u.onBegin=function(e){e.target;var t=e.state;u.toState!==t&&(u.actionsOut.Audio.forEach((function(e){return e.dispatchConditional()})),u.actionsOut.Video.forEach((function(e){return e.dispatchConditional()})),u.actionsOut.Link.forEach((function(e){return e.dispatch()})),u.actionsOut.Create.forEach((function(e){return e.dispatch()})),u.actionsOut.Destroy.forEach((function(e){return e.dispatch()})),u.actionsOut.Reset.forEach((function(e){return e.dispatch()})),u.actionsIn.Transition.forEach((function(e){return e.pause()})),u.object.currentTransitionEvent=(0,Ye.Z)(u),u.actionsOut.Transition.forEach((function(e){return e.play()})),u.actionsOut.Animation.forEach((function(e){return e.play()})),u.actionsIn.SwitchCamera.forEach((function(e){return e.pause()})),u.actionsOut.SwitchCamera.forEach((function(e){return e.play()})),u.actionsOut.SceneTransition.forEach((function(e){return e.dispatch()})))},u.onComplete=function(e){e.target;var t=e.state;u.toState===t&&(u.actionsIn.Audio.forEach((function(e){return e.dispatchConditional()})),u.actionsIn.Video.forEach((function(e){return e.dispatchConditional()})),u.actionsIn.Link.forEach((function(e){return e.dispatch()})),u.actionsIn.Create.forEach((function(e){return e.dispatch()})),u.actionsIn.Destroy.forEach((function(e){return e.dispatch()})),u.actionsIn.Reset.forEach((function(e){return e.dispatch()})),u.actionsOut.Transition.forEach((function(e){return e.pause()})),u.actionsOut.Transition.forEach((function(e){return e.pause()})),u.object.currentTransitionEvent=(0,Ye.Z)(u),u.actionsIn.Transition.forEach((function(e){return e.play()})),u.actionsIn.Animation.forEach((function(e){return e.play()})),u.actionsOut.SwitchCamera.forEach((function(e){return e.pause()})),u.actionsIn.SwitchCamera.forEach((function(e){return e.play()})),u.actionsIn.SceneTransition.forEach((function(e){return e.dispatch()})))};var d=i.condition;if(!d.object)throw new Error("Missing property");var h=a.find(d.object);if(!h)throw new Error("Missing property");if(u.toObject=h,d.state&&(null===(l=u.toObject.states)||void 0===l||!l[d.state]))throw new Error("Missing property");return u.toState=d.state,u}return(0,d.Z)(n,[{key:"connect",value:function(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}},{key:"disconnect",value:function(){Au((0,p.Z)(n.prototype),"disconnect",this).call(this),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}}]),n}(Uq),Gq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).eventsPerConditions={Comparison:[],Distance:[],State:[]},r.hasVideoAction=!1;var a=r.eventContext,o=a.page,s=a.sharedAssets;return o.traverseEntity((function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length){var n,a=(0,x.Z)(e.data.events);try{for(a.s();!(n=a.n()).done;){var l=n.value,u=l.id,c=l.data;if(!c.disabled&&"Conditional"===c.type)try{var d=void 0;"Comparison"===c.condition.type||("Distance"===c.condition.type?d=new Zq(u,c,e,o,s,i):"State"===c.condition.type&&(d=new Vq(u,c,e,o,s,i))),d&&(r.eventsPerConditions[c.condition.type].push(d),(d.actionsIn.Video.length||d.actionsOut.Video.length)&&(r.hasVideoAction=!0))}catch(d){}}}catch(h){a.e(h)}finally{a.f()}}})),r}return(0,d.Z)(n,[{key:"connect",value:function(){Au((0,p.Z)(n.prototype),"connect",this).call(this),Object.values(this.eventsPerConditions).forEach((function(e){return e.forEach((function(e){return e.connect()}))}))}},{key:"disconnect",value:function(){Au((0,p.Z)(n.prototype),"disconnect",this).call(this),Object.values(this.eventsPerConditions).forEach((function(e){return e.forEach((function(e){return e.disconnect()}))}))}}]),n}(Dq),Hq=new Rf,Wq=new Rf,qq=new Rf,Xq=new Uv,Yq=new Rf,Qq=new Rf,Kq=new Rf,Jq=new If,$q=new xp,eX=new dp,tX=new of,nX=new Rf,iX=new Rf,rX=.2;function aX(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var oX=function(){var e=new dp;return function(t,n,i){var r=t.obj;e.copy(r.hiddenMatrix),null!==r.parent&&e.premultiply(r.parent.matrixWorld),e.invert(),r.position.copy(n),"global"===t.reference&&aX(r.position,t.limits),r.position.applyMatrix4(e),"parent"===t.reference?aX(r.position,t.limits):"local"===t.reference&&(Jq.copy(t.quat0).invert(),r.position.sub(t.position0),r.position.applyQuaternion(Jq),aX(r.position,t.limits),Jq.invert(),r.position.applyQuaternion(Jq),r.position.add(t.position0)),e.multiply(null!==i&&void 0!==i?i:r.matrixWorld).decompose(Yq,r.quaternion,Qq),r.updateMatrix(),r.hasNonUniformScale&&(r.updateMatrixWorld(),r.updateMatrixWorldSVD()),r instanceof yN&&TU(r.parent)&&r.invalidateDownstreamBooleanData(!0)}}(),sX=function(){function e(t,n,i,r,a,o){var s=this;(0,c.Z)(this,e),this.object=t,this.data=n,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=0===this.data.resetSpeed?1:8/this.data.resetSpeed+1,this.snapDampingFactor=0===this.data.snapSpeed?1:8/this.data.snapSpeed+1,this.actionsDrag=DW(n,n.dragDropActions.drag,i,r,a,this.object),this.actionsDrop=DW(n,n.dragDropActions.drop,i,r,a,this.object);var l=[];this.data.objects.forEach((function(e){var t=i.find(e);!t||!1!==t.data.visible&&(l.push(t),o[t.uuid]&&o[t.uuid].forEach((function(e){var t=i.find(e);!t||!1!==t.data.visible&&l.push(t)})))})),this.data.dropDestinations.forEach((function(e){var t=i.find(e);!t||!1!==t.data.visible&&(s.dropDestIds.push(t.uuid),o[t.uuid]&&o[t.uuid].forEach((function(e){var t=i.find(e);!t||!1!==t.data.visible&&s.dropDestIds.push(t.uuid)})))})),this.dragItems=l.map((function(e){return"locked"===s.data.planeMode&&(e.userData.lockedPlane=!0),e.userData.worldPosition0=(new Rf).setFromMatrixPosition(e.matrixWorld),{obj:e,fromPosition:(new Rf).setFromMatrixPosition(e.matrixWorld),pointStart:new Rf,pointEnd:new Rf,paused:!0,currentDampingFactor:s.data.dampingFactor,reset:!1,position0:(new Rf).copy(e.position),quat0:(new If).copy(e.quaternion),snapped:!1,orientationMatrix:new dp,limits:s.data.limits,reference:s.data.referenceFrame}}))}return(0,d.Z)(e,[{key:"activeDragItem",get:function(){return null!==this.activeIdx?this.dragItems[this.activeIdx]:null}},{key:"dispose",value:function(){OW(this.actionsDrag),OW(this.actionsDrop),this.dragItems.forEach((function(e){e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()}))}}]),e}(),lX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).eventManager=i,r.events=[],r.lastDropDestination=null,r.dragTimeout=null,r.onPointerDown=function(e){if(!(xM.length>1)){r.eventContext.updateRaycaster(e);var t=r.eventContext,n=t.raycaster,i=t.page.raycastWithClones(n);if(r.lastDropDestination=null,0!==i.length){var a,o=(0,x.Z)(r.events);try{for(o.s();!(a=o.n()).done;){var s,l=a.value,u=0,c=(0,x.Z)(l.dragItems);try{for(c.s();!(s=c.n()).done;){var d=s.value,h=d.obj,f=d.pointEnd,p=d.pointStart;if(h===i[0].object||h===i[0].object.object||OO.is(h)&&h.isAncestorOf(i[0].object.uuid)){var v;if(l.activeIdx=u,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,"hand"===l.data.cursor&&r.setCursor("grabbing"),r.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);var m=l.activeDragItem.obj;h.hasNonUniformScale&&h.updateMatrixWorldSVD(),(m.hasNonUniformScale?m.matrixWorldRigid:m.matrixWorld).decompose(Yq,Jq,Qq),$q.setFromQuaternion(Jq),void 0===m.prevR?(m.prevR=$q.clone(),m.prevT=Yq.clone()):(m.prevR.copy($q),m.prevT.copy(Yq)),r.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}return r.calcPlaneIntersectPos(h,p,l.data.plane,l.data.referenceFrame),f.copy(p),(r.eventManager.controlsManager.usePhysics&&"dynamic"===(null===(v=h.data.physics)||void 0===v?void 0:v.rigidBody)||!1===l.data.drop||!1===l.data.resetOnSnapFail)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),r.activeEvent=l,void(r.eventManager.controlsManager.orbitControls&&(r.eventManager.controlsManager.orbitControls.enabled=!1))}u++}}catch(g){c.e(g)}finally{c.f()}}}catch(g){o.e(g)}finally{o.f()}r.activeEvent=null}else r.activeEvent=null}},r.onPointerMove=function(e){if(!(xM.length>1)){r.eventContext.updateRaycaster(e);var t=r.eventContext,n=t.raycaster,i=t.page,a=i.raycastWithClones(n);if(0!==xM.length){if(r.activeEvent&&r.activeEvent.activeDragItem){var o,s=r.activeEvent.activeDragItem;if(s.snapped=!1,r.activeEvent.data.drop&&(o=a.filter((function(e){return s.obj!==e.object&&!s.obj.isAncestorOf(e.object.uuid)&&!(e.object instanceof OU)&&("all"===r.activeEvent.data.dropOn||r.activeEvent.dropDestIds.some((function(t){return t===e.object.uuid||i.scene.find(t).isAncestorOf(e.object.uuid)})))}))[0]),o){var l=Kq.copy(o.face.normal).applyMatrix3(tX.getNormalMatrix(o.object.matrixWorld));if("center"===r.activeEvent.data.snapTo)s.fromPosition.setFromMatrixPosition(o.object.matrixWorld);else if("surface"===r.activeEvent.data.snapTo){if(s.fromPosition.copy(o.point),"bbox"===r.activeEvent.data.snapSurfaceMode){Yq.copy(l).applyMatrix3(tX.setFromMatrix4(s.obj.matrixWorld).transpose());var u=s.obj;Yq.x>rX?Qq.x=-u.recursiveBBox.min.x:Yq.x<-rX&&(Qq.x=-u.recursiveBBox.max.x),Yq.y>rX?Qq.y=-u.recursiveBBox.min.y:Yq.y<-rX&&(Qq.y=-u.recursiveBBox.max.y),Yq.z>rX?Qq.z=-u.recursiveBBox.min.z:Yq.z<-rX&&(Qq.z=-u.recursiveBBox.max.z),Qq.applyMatrix3(tX.invert())}else Qq.copy(l).multiplyScalar(r.activeEvent.data.snapSurfaceOffset);s.fromPosition.add(Qq)}r.activeEvent.data.autoOrient&&(Yq.set(0,1,0).cross(l),Yq.length()<1e-4&&Yq.set(-1,0,0).cross(l),Qq.crossVectors(Kq,Yq),s.orientationMatrix.makeBasis(Yq,Qq,l)),s.pointStart.copy(s.fromPosition),s.pointEnd.copy(s.pointStart),s.currentDampingFactor=r.activeEvent.snapDampingFactor,s.snapped=!0,r.lastDropDestination!==o.object&&(r.lastDropDestination=o.object,r.activeEvent.actionsDrop.Transition.forEach((function(e){e.play()})),r.activeEvent.actionsDrop.Animation.forEach((function(e){e.play()})),r.activeEvent.actionsDrop.Audio.forEach((function(e){e.dispatchGameControl("start")})),r.activeEvent.actionsDrop.Create.forEach((function(e){e.dispatchThrottled()})))}else s.orientationMatrix.makeRotationFromQuaternion(s.quat0),r.lastDropDestination=null,s.currentDampingFactor=r.activeEvent.data.dampingFactor,r.calcPlaneIntersectPos(s.obj,s.pointEnd,r.activeEvent.data.plane,r.activeEvent.data.referenceFrame),r.activeEvent.actionsDrop.Transition.forEach((function(e){e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:r.eventContext.page.scene,shared:r.eventContext.sharedAssets})})),r.activeEvent.actionsDrop.Animation.forEach((function(e){e.stop()})),r.activeEvent.actionsDrop.Audio.forEach((function(e){e.dispatchGameControl("stop")}));r.activeEvent.actionsDrag.Create.forEach((function(e){e.dispatchThrottled()})),!1===r.activeEvent.wasDragEventTriggered&&(r.activeEvent.wasDragEventTriggered=!0,r.activeEvent.actionsDrag.Transition.forEach((function(e){e.play()})),r.activeEvent.actionsDrag.Animation.forEach((function(e){e.play()})),r.activeEvent.actionsDrag.Audio.forEach((function(e){e.dispatchGameControl("start")}))),r.dragTimeout&&window.clearTimeout(r.dragTimeout),r.dragTimeout=window.setTimeout((function(){!r.activeEvent||(r.activeEvent.wasDragEventTriggered=!1,r.activeEvent.actionsDrag.Audio.forEach((function(e){e.dispatchGameControl("stop")})),r.activeEvent.actionsDrag.Transition.forEach((function(e){e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:r.eventContext.page.scene,shared:r.eventContext.sharedAssets})})),r.activeEvent.actionsDrag.Animation.forEach((function(e){e.stop()})))}),500),r.updateDragItem(s),s.obj.dispatchEvent({type:"requestRender"})}}else{var c,d=!1,h=(0,x.Z)(r.events);try{for(h.s();!(c=h.n()).done;){var f,p=c.value,v=(0,x.Z)(p.dragItems);try{for(v.s();!(f=v.n()).done;){var m,g,L,y=f.value.obj;if(y===(null===(m=a[0])||void 0===m?void 0:m.object)||y===(null===(g=a[0])||void 0===g||null===(g=g.object)||void 0===g?void 0:g.object)||OO.is(y)&&y.isAncestorOf(null===(L=a[0])||void 0===L?void 0:L.object.uuid)){switch(d=!0,p.data.cursor){case"hand":r.setCursor("grab");break;case"move":r.setCursor("move")}break}}}catch(b){v.e(b)}finally{v.f()}if(d)break}}catch(b){h.e(b)}finally{h.f()}d||r.setCursor("default")}}},r.onPointerUp=function(e){if(r.activeEvent&&r.activeEvent.activeDragItem){var t;"hand"===r.activeEvent.data.cursor&&r.setCursor("grab");var n="dynamic"===(null===(t=r.activeEvent.activeDragItem.obj.data.physics)||void 0===t?void 0:t.rigidBody);!1===r.activeEvent.activeDragItem.snapped&&r.activeEvent.data.drop&&r.activeEvent.data.resetOnSnapFail&&(!1===r.eventManager.controlsManager.usePhysics||!n)&&(r.activeEvent.activeDragItem.reset=r.activeEvent.data.resetOnSnapFail,r.activeEvent.activeDragItem.paused=!1,r.activeEvent.activeDragItem.currentDampingFactor=r.activeEvent.resetDampingFactor),r.eventManager.controlsManager.usePhysics&&n&&(r.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),r.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),r.activeEvent.activeDragItem.paused=!0),!0===r.activeEvent.wasDragEventTriggered&&(r.activeEvent.wasDragEventTriggered=!1,r.activeEvent.actionsDrag.Transition.forEach((function(e){e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:r.eventContext.page.scene,shared:r.eventContext.sharedAssets})})),r.activeEvent.actionsDrag.Animation.forEach((function(e){e.stop()})),r.activeEvent.actionsDrag.Audio.forEach((function(e){e.dispatchGameControl("stop")}))),r.eventManager.controlsManager.orbitControls&&(r.eventManager.controlsManager.orbitControls.enabled=!0)}};var a={};return e.page.traverseEntity((function(e){e.component&&(a[e.component.uuid]?a[e.component.uuid].push(e.uuid):a[e.component.uuid]=[e.uuid])})),e.page.traverseEntity((function(t){var n;null===(n=t.data)||void 0===n||n.events.filter((function(e){return"DragDrop"===e.data.type&&!e.data.disabled})).forEach((function(n){r.events.push(new sX(t,n.data,e.page,e.sharedAssets,i,a))}))})),r}return(0,d.Z)(n,[{key:"connect",value:function(){if(this.events.length){this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");var e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}}},{key:"disconnect",value:function(){if(this.events.length){this.domEventsNeeded.clear();var e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach((function(e){return e.dispose()}))}}},{key:"setCursor",value:function(e){this.eventContext.domElement.style.cursor=e}},{key:"onAnimationFrameDamping",value:function(){var e,t=(0,x.Z)(this.events);try{for(t.s();!(e=t.n()).done;){var n,i=e.value,r=(0,x.Z)(i.dragItems);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.paused||this.updateDragItem(a,!0)}}catch(o){r.e(o)}finally{r.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"calcPlaneIntersectPos",value:function(e,t,n,i){var r=this.eventContext,a=r.getCamera,o=r.raycaster;a().getWorldDirection(Wq),Wq.negate();var s=Jq.identity();switch("parent"===i?eX.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Yq,s,Qq):"local"===i&&e.matrixWorld.decompose(Yq,s,Qq),n){case"x":Yq.set(1,0,0).applyQuaternion(s),nX.copy(Wq).cross(Yq),iX.copy(Yq).cross(nX);break;case"y":Yq.set(0,1,0).applyQuaternion(s),nX.copy(Wq).cross(Yq),iX.copy(Yq).cross(nX);break;case"z":Yq.set(0,0,1).applyQuaternion(s),nX.copy(Wq).cross(Yq),iX.copy(Yq).cross(nX);break;case"xy":iX.set(0,0,1).applyQuaternion(s);break;case"yz":iX.set(1,0,0).applyQuaternion(s);break;case"xz":iX.set(0,1,0).applyQuaternion(s);break;case"adaptive":Wq.angleTo(Qq.set(0,1,0))>Math.PI/6?(Yq.crossVectors(Qq.set(0,1,0),Wq),iX.crossVectors(Yq,Qq)):iX.set(0,1,0);break;default:iX.copy(Wq)}qq.setFromMatrixPosition(e.matrixWorld);var l=e.userData.lockedPlane?e.userData.worldPosition0:qq;if(Xq.setFromNormalAndCoplanarPoint(iX,l),o.ray.intersectPlane(Xq,t)&&("x"===n||"y"===n||"z"===n)){var u=Qq.subVectors(t,l).dot(Yq);t.copy(l).addScaledVector(Yq,u)}}},{key:"updateDragItem",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];qq.setFromMatrixPosition(e.obj.matrixWorld),"current"===e.reset?Hq.subVectors(e.fromPosition,qq).divideScalar(e.currentDampingFactor):"original"===e.reset?(Hq.subVectors(e.obj.userData.worldPosition0,qq).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):Hq.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(qq).divideScalar(e.currentDampingFactor),e.paused=!(e.currentDampingFactor>1)||Hq.length()<.01,(this.activeEvent&&1===this.activeEvent.data.dampingFactor||i)&&oX(e,Hq.add(qq),null!==(t=this.activeEvent)&&void 0!==t&&t.data.drop&&null!==(n=this.activeEvent)&&void 0!==n&&n.data.autoOrient?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}}]),n}(Dq),uX=new Rf,cX=new Rf,dX=new Rf,hX=new Rf,fX=new Uv,pX={type:"requestRender"},vX=function(){var e=new Rf,t=new Rf;return function(n,i,r){return r>0?(e.subVectors(n,i),e.length()<=r?n:t.copy(i).add(e.normalize().multiplyScalar(r))):i}}(),mX=function(){var e=new dp;return function(t,n){t.position.copy(n),null!==t.parent&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof yN&&TU(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),gX=(0,d.Z)((function e(t,n,i,r,a){(0,c.Z)(this,e),this.data=t,this.object=n,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new Rf,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=$e($e($e({},aT.defaultData),t),void 0===t.resetOnPointerLeave&&{resetOnPointerLeave:!1}),void 0===t.target||"cursor"===t.target||(this.target=i.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=DW(t,t.actions,i,r,a,n)})),LX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).events=[],r.pairOfEventListeners=[],r.onMouseMove=function(e){if(!(xM.length>1)){r.eventContext.updateRaycaster(e);var t,n=(0,x.Z)(r.events);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0===i.target&&r.updateSingleEvent(i)}}catch(a){n.e(a)}finally{n.f()}}},r.onMouseEnter=function(e){var t,n=(0,x.Z)(r.events);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0===i.target&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)}}catch(a){n.e(a)}finally{n.f()}},r.onMouseLeave=function(e){var t,n=(0,x.Z)(r.events);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0===i.target&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),r.updateSingleEvent(i))}}catch(a){n.e(a)}finally{n.f()}},r.onTargetChange=function(e){return function(){r.updateSingleEvent(e)}};var a=r.eventContext.page;return a.traverseEntity((function(t){var n,o,s=null===(n=t.data)||void 0===n?void 0:n.events.find((function(e){return"Follow"===e.data.type&&!e.data.disabled}));s&&(!a.data.globalPhysics.usePhysics||"dynamic"!==(null===(o=t.dataPatched.physics)||void 0===o?void 0:o.rigidBody))&&r.events.push(new gX(s.data,t,a,e.sharedAssets,i))})),r}return(0,d.Z)(n,[{key:"connect",value:function(){if(this.events.length){var e=this.eventContext,t=e.domElement,n=e.eventElement;this.domEventsNeeded.clear(),mM&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));var i,r=(0,x.Z)(this.events);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(void 0!==a.target){var o=a.target,s=this.onTargetChange(a);this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}}}catch(l){r.e(l)}finally{r.f()}}}},{key:"disconnect",value:function(){if(this.events.length){var e=this.eventContext,t=e.domElement,n=e.eventElement;this.domEventsNeeded.clear(),mM&&t.removeEventListener("pointerdown",this.onMouseMove),n.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave);var i,r=(0,x.Z)(this.pairOfEventListeners);try{for(r.s();!(i=r.n()).done;){var a=o(i.value,2),s=a[0],l=a[1];s.removeEventListener("requestRender",l)}}catch(h){r.e(h)}finally{r.f()}var u,c=(0,x.Z)(this.events);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.paused=!0,d.isReset=!1,OW(d.actions)}}catch(h){c.e(h)}finally{c.f()}}}},{key:"onAnimationFrameDamping",value:function(){var e,t=(0,x.Z)(this.events);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.paused||this.updateSingleEvent(n,!0)}}catch(i){t.e(i)}finally{t.f()}}},{key:"updateSingleEvent",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.events.forEach((function(e){e.actions.Create.forEach((function(e){e.dispatchThrottled()}))}));var r=e.data,a=r.plane,o=r.limitDistance,s=r.limitDistanceEnabled;if(e.object.getWorldPosition(dX),e.isReset)hX.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(hX);else{var l=this.eventContext,u=l.getCamera,c=l.raycaster;if("custom"===a?(u().getWorldDirection(cX),cX.negate(),uX.copy(cX)):"xy"===a?uX.set(0,0,1):"xz"===a?uX.set(0,1,0):"yz"===a&&uX.set(1,0,0),fX.setFromNormalAndCoplanarPoint(uX,dX),!c.ray.intersectPlane(fX,hX))return}if(!e.isReset)if(hX.distanceTo(e.worldPosition0)>o&&s&&e.target){if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;hX.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor}else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout((function(){e.delayFinished=!0,e.paused=!1,n.updateSingleEvent(e)}),1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;!1===e.data.enabledTranslation[0]&&(hX.x=dX.x),!1===e.data.enabledTranslation[1]&&(hX.y=dX.y),!1===e.data.enabledTranslation[2]&&(hX.z=dX.z);var d=vX(dX,hX,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){var h=uX.subVectors(d,dX).divideScalar(e.currentDampingFactor);dX.add(h),i&&mX(e.object,dX),e.paused=h.length()<.01}else mX(e.object,d),e.paused=!0;null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(pX)}}]),n}(Dq),yX=new Rf,bX=new Rf,xX=new dp,wX=new If,_X=new If,SX=new Rf,kX=new Rf,AX=new Rf,MX=new Rf,CX=new Uv,EX={type:"requestRender"},TX={type:"changeRotation"},PX=function(){var e=new dp;return function(t,n){null!==t.parent?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),n.premultiply(xq(e).invert()),t.rotation.setFromRotationMatrix(n),t.updateMatrix(),t instanceof yN&&TU(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),DX=(0,d.Z)((function e(t,n,i){(0,c.Z)(this,e),this.object=n,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new If,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=$e($e($e({},oT.defaultData),t),void 0===t.resetOnPointerLeave&&{resetOnPointerLeave:!1}),void 0===t.target||"cursor"===t.target||(this.target=i.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1})),OX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this,e)).events=[],i.pairOfEventListeners=[],i.pairOfUserEventListeners=[],i.onMouseMove=function(e){if(!(xM.length>1)){i._lastMouseEvent=e,i.eventContext.updateRaycaster(e);var t,n=(0,x.Z)(i.events);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0===r.target&&i.updateSingleEvent(r)}}catch(a){n.e(a)}finally{n.f()}}},i.onMouseEnter=function(e){var t,n=(0,x.Z)(i.events);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0===r.target&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)}}catch(a){n.e(a)}finally{n.f()}},i.onMouseLeave=function(e){var t,n=(0,x.Z)(i.events);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0===r.target&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),i.updateSingleEvent(r))}}catch(a){n.e(a)}finally{n.f()}},i.onScroll=function(e){if(i._lastMouseEvent){var t=new PointerEvent("pointermove",{clientX:i._lastMouseEvent.clientX,clientY:i._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});i.eventContext.eventElement.dispatchEvent(t)}},i.onTargetChange=function(e){return function(){i.updateSingleEvent(e)}},i.createUserEventListener=function(e){return function(t){var n=t.eventName,r=t.target;if(n&&r){var a=Rq(n);a&&"LookAt"===a&&i.updateSingleEvent(e)}}};var r=i.eventContext.page;return r.traverseEntity((function(e){var t,n,a=null===(t=e.data)||void 0===t?void 0:t.events.find((function(e){return"LookAt"===e.data.type&&!e.data.disabled}));a&&(!r.data.globalPhysics.usePhysics||"dynamic"!==(null===(n=e.dataPatched.physics)||void 0===n?void 0:n.rigidBody))&&i.events.push(new DX(a.data,e,r))})),i}return(0,d.Z)(n,[{key:"connect",value:function(){if(this.events.length){var e=this.eventContext,t=e.domElement,n=e.eventElement;this.domEventsNeeded.clear(),mM&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?n.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));var i,r=(0,x.Z)(this.events);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(void 0!==a.target){var o=this.onTargetChange(a),s=a.target;this.pairOfEventListeners.push([s,o]),s.addEventListener("requestRender",o)}var l=this.createUserEventListener(a),u=a.object;this.pairOfUserEventListeners.push([u,l]),u.addEventListener("userEvent",l)}}catch(c){r.e(c)}finally{r.f()}}}},{key:"disconnect",value:function(){if(this.events.length){var e=this.eventContext,t=e.domElement,n=e.eventElement;this.domEventsNeeded.clear(),mM&&t.removeEventListener("pointerdown",this.onMouseMove),n.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave),n.removeEventListener("scroll",this.onScroll);var i,r=(0,x.Z)(this.pairOfEventListeners);try{for(r.s();!(i=r.n()).done;){var a=o(i.value,2),s=a[0],l=a[1];s.removeEventListener("requestRender",l)}}catch(g){r.e(g)}finally{r.f()}var u,c=(0,x.Z)(this.pairOfUserEventListeners);try{for(c.s();!(u=c.n()).done;){var d=o(u.value,2),h=d[0],f=d[1];h.removeEventListener("userEvent",f)}}catch(g){c.e(g)}finally{c.f()}var p,v=(0,x.Z)(this.events);try{for(v.s();!(p=v.n()).done;){var m=p.value;m.paused=!0,m.isReset=!1}}catch(g){v.e(g)}finally{v.f()}}}},{key:"onAnimationFrameDamping",value:function(){var e,t=(0,x.Z)(this.events);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.paused||this.updateSingleEvent(n)}}catch(i){t.e(i)}finally{t.f()}}},{key:"updateSingleEvent",value:function(e){var t,n=this,i=e.data,r=i.tilt,a=i.axis,o=i.distance,s=i.plane,l=i.limitDistance,u=i.enabledRotation,c=i.limitDistanceEnabled,d=this.eventContext,h=d.getCamera,f=d.raycaster,p=e.object,v=e.target;if(p.getWorldPosition(SX),!e.isReset)if(e.target)e.target.getWorldPosition(kX);else{if("custom"===s?(h().getWorldDirection(bX),bX.negate(),CX.setFromNormalAndCoplanarPoint(bX,SX)):("xy"===s?yX.set(0,0,1):"xz"===s?yX.set(0,1,0):"yz"===s&&yX.set(1,0,0),CX.setFromNormalAndCoplanarPoint(yX,SX)),!f.ray.intersectPlane(CX,kX))return;o>0&&("custom"===s||void 0===s)&&kX.addScaledVector(bX,o)}if(e.isReset||(v?"target"===r?AX.copy(v.up).applyMatrix4(xX.extractRotation(v.matrixWorld)).normalize():u.some((function(e){return!1===e}))?("x"===a?(MX.set(0,0,1),!1===u[2]&&MX.set(0,1,0)):"y"===a?(MX.set(1,0,0),!1===u[0]&&MX.set(0,0,1)):(MX.set(0,1,0),!1===u[1]&&MX.set(1,0,0)),AX.copy(MX).applyQuaternion(e.worldQuaternion0).normalize()):AX.set(0,1,0):"custom"===s?AX.set(0,1,0):AX.copy(yX)),e.isReset)_X.copy(e.worldQuaternion0);else if(SX.distanceTo(kX)>l&&c&&v){if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;_X.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor}else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout((function(){e.delayFinished=!0,e.paused=!1,n.updateSingleEvent(e)}),1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;(function(e,t,n,i,r,a){var o,s,l,u,c,d=e.elements;BX.subVectors(t,n),0===BX.lengthSq()&&(BX.z=1),BX.normalize(),RX.crossVectors(i,BX),0===RX.lengthSq()&&(1===Math.abs(i.z)?BX.x+=1e-4:BX.z+=1e-4,BX.normalize(),RX.crossVectors(i,BX)),RX.normalize(),IX.crossVectors(BX,RX),"x"===r?1===a.z?(RX=(o=[BX,RX,IX])[0],IX=o[1],BX=o[2]):(RX.negate(),RX=(s=[BX,RX])[0],BX=s[1]):"y"===r?1===a.x?(RX=(l=[IX,BX,RX])[0],IX=l[1],BX=l[2]):(RX.negate(),IX=(u=[BX,IX])[0],BX=u[1]):1===a.x&&(RX.negate(),RX=(c=[IX,RX])[0],IX=c[1]),d[0]=RX.x,d[4]=IX.x,d[8]=BX.x,d[1]=RX.y,d[5]=IX.y,d[9]=BX.y,d[2]=RX.z,d[6]=IX.z,d[10]=BX.z})(xX,kX,SX,AX,a,MX),_X.setFromRotationMatrix(xX),wX.setFromUnitVectors(MX.applyQuaternion(_X),AX),u.some((function(e){return!1===e}))&&"target"!==r&&_X.premultiply(wX).normalize()}e.currentDampingFactor>1?(p.updateWorldMatrix(!0,!1),wX.setFromRotationMatrix(xq(p.matrixWorld)),wX.slerp(_X,1/e.currentDampingFactor),PX(p,xX.makeRotationFromQuaternion(wX)),e.paused=8*(1-wX.dot(_X))<1e-6):(PX(p,xX.makeRotationFromQuaternion(_X)),e.paused=!0),null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),p.dispatchEvent(EX),p.dispatchEvent(TX)}}]),n}(Dq),IX=new Rf,RX=new Rf,BX=new Rf;var NX,zX,FX,jX=function(){function e(t,n,i,r,a,o){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.entered=!1,this.actions=DW(n,n.actions,r,a,o,i)}return(0,d.Z)(e,[{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatchEnter",value:function(){var e=this;this.actions.Transition.forEach((function(t){t.object.currentTransitionEvent!==e&&(t.object.currentTransitionEvent=e,t.init())})),this.entered||(this.entered=!0,this.actions.Transition.forEach((function(e){return e.playFromCurrent()})),this.actions.Animation.forEach((function(e){return e.play()})),this.actions.Create.forEach((function(e){return e.dispatch()})),this.actions.Destroy.forEach((function(e){return e.dispatch()})),this.actions.SwitchCamera.forEach((function(e){return e.playFromCurrent()})),this.actions.SceneTransition.forEach((function(e){return e.dispatch()})))}},{key:"dispatchLeave",value:function(){var e=this;this.actions.Transition.forEach((function(t){t.object.currentTransitionEvent!==e&&(t.object.currentTransitionEvent=e,t.init())})),this.entered&&(this.entered=!1,this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.reverseFromCurrent()})))}},{key:"dispatchUserEvent",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),e?(this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.reverseFromCurrent()}))):(this.actions.Transition.forEach((function(e){return e.playFromCurrent()})),this.actions.Animation.forEach((function(e){return e.playFromCurrent()})),this.actions.Create.forEach((function(e){return e.dispatch()})),this.actions.Destroy.forEach((function(e){return e.dispatch()})),this.actions.SwitchCamera.forEach((function(e){return e.playFromCurrent()}))),this.actions.SceneTransition.forEach((function(e){return e.dispatch()}))}}]),e}(),UX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).eventsPerObjects={},r.objects=[],r._prevObjects=[],r.onMouseDown=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMouseHoverEvent())},r.onMouseUp=function(e){xM.length>1||r.handleMouseHoverEvent(!0)},r.onMouseMove=function(e){xM.length>1||(r.eventContext.updateRaycaster(e),r.handleMouseHoverEvent())},r.onUserEvent=function(e){var t,n=e.eventName,i=e.target,a=e.reverse;if(n&&i){var o=Rq(n);o&&"MouseHover"===o&&(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(t=r.eventsPerObjects[i.uuid])||void 0===t||t.forEach((function(e){return e.dispatchUserEvent(a)})))}};var a=r.eventContext,o=a.page,s=a.sharedAssets;return o.traverseEntity((function(e){var t;if(e.visible&&null!==(t=e.data)&&void 0!==t&&t.events.length){var n,a,l=(0,x.Z)(e.data.events);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=u.id,d=u.data;if(!d.disabled&&"MouseHover"===d.type)try{var h=new jX(c,d,e,o,s,i);r.eventsPerObjects[e.uuid]?r.eventsPerObjects[e.uuid].push(h):r.eventsPerObjects[e.uuid]=[h]}catch(h){}}}catch(f){l.e(f)}finally{l.f()}(null===(n=r.eventsPerObjects[e.uuid])||void 0===n?void 0:n.length)&&r.objects.push(e)}})),r}return(0,d.Z)(n,[{key:"connect",value:function(){var e=this;if(this.objects.length){var t=this.eventContext.domElement;this.domEventsNeeded.clear(),mM&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.objects.forEach((function(t){t.addEventListener("userEvent",e.onUserEvent)}))}}},{key:"disconnect",value:function(){var e=this;if(this.objects.length){var t=this.eventContext.domElement;this.domEventsNeeded.clear(),mM&&(t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach((function(e){e.forEach((function(e){e.disconnect()}))})),this.objects.forEach((function(t){t.removeEventListener("userEvent",e.onUserEvent)}))}}},{key:"handleMouseHoverEvent",value:function(){var e=this,t=[];if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){var n=this.eventContext,i=n.stopRaycast,r=n.raycaster,a=n.page;if(i){var o=Aq(r,a,this.objects);t=Mq(o)}else this.objects.forEach((function(e){Cq(r,e)&&t.push(e)}))}this._prevObjects.length&&this._prevObjects.forEach((function(n){var i;t.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(i=e.eventsPerObjects[n.uuid])||void 0===i||i.forEach((function(e){return e.dispatchLeave()})))})),t.length&&t.forEach((function(t){var n;t.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(n=e.eventsPerObjects[t.uuid])||void 0===n||n.forEach((function(e){return e.dispatchEnter()}))})),this._prevObjects=t}}]),n}(Dq),ZX=function(){function e(t,n,i,r,a,o){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.scrollCounter=0,this.actions=DW(n,n.actions,r,a,o,i)}return(0,d.Z)(e,[{key:"connect",value:function(){this.scrollCounter=0}},{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatch",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())}));var n=e>0?1:-1;this.scrollCounter+=n,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);var i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach((function(e){return e.seek(i)})),this.actions.Animation.forEach((function(e){return e.seek(n)})),this.actions.Create.forEach((function(e){return e.dispatchThrottled()}))}},{key:"dispatchUserEvent",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),e?(this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()}))):(this.actions.Transition.forEach((function(e){e.playFromCurrent()})),this.actions.Animation.forEach((function(e){e.playFromCurrent()}))),this.actions.Create.forEach((function(e){return e.dispatchThrottled()}))}}]),e}(),VX=function(){function e(t,n,i,r,a,o,s){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.domElement=o,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=DW(n,n.actions,r,a,s,i)}return(0,d.Z)(e,[{key:"computeScrollBounds",value:function(){var e,t,n=this.domElement.getBoundingClientRect(),i=document.body,r=document.documentElement,a=window.pageYOffset||r.scrollTop||i.scrollTop,o=r.clientTop||i.clientTop||0,s=Math.round(n.top+a-o);if("enter"===this.data.startFrom){var l=window.innerHeight,u=n.height,c=this.data.enterAnchor,d="top"===c?l:"bottom"===c?l-u:l-.5*u;this.scrollStart=s-d}else this.scrollStart=0;this.scrollStart+=null!==(e=this.data.startOffset)&&void 0!==e?e:0,this.scrollEnd=this.scrollStart+(null!==(t=this.data.endAfter)&&void 0!==t?t:400),this.dispatch({x:window.scrollX,y:window.scrollY})}},{key:"connect",value:function(){this.computeScrollBounds()}},{key:"disconnect",value:function(){OW(this.actions)}},{key:"handleResize",value:function(){this.computeScrollBounds()}},{key:"dispatch",value:function(e){var t=this,n=(e.x,e.y);this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())}));var i=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(n-this.scrollStart)/i));this.actions.Transition.forEach((function(e){return e.seek(r)})),this.actions.Animation.forEach((function(e){return e.seek(r)})),this.actions.Create.forEach((function(e){return e.dispatchThrottled()}))}},{key:"dispatchUserEvent",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),e?(this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()}))):(this.actions.Transition.forEach((function(e){e.playFromCurrent()})),this.actions.Animation.forEach((function(e){e.playFromCurrent()}))),this.actions.Create.forEach((function(e){return e.dispatchThrottled()}))}}]),e}(),GX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;(0,c.Z)(this,n),(r=t.call(this,e)).wheelEventsPerObject=new Map,r.scrollEventsPerObject=new Map,r.isInview=!0,r.handleResize=function(){u(r.scrollEventsPerObject.entries()).forEach((function(e){var t=o(e,2);t[0];t[1].forEach((function(e){return e.handleResize()}))}))},r.onScroll=function(e){if(r.isInview){var t={y:window.scrollY,x:window.scrollX};u(r.scrollEventsPerObject.entries()).forEach((function(e){var n=o(e,2),i=n[0],r=n[1];i.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:t}),r.forEach((function(e){return e.dispatch(t)}))}))}},r.onWheel=function(e){!r.isInview||e.ctrlKey||u(r.wheelEventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0],r=n[1];i.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:e.deltaY}),r.forEach((function(t){return t.dispatch(e.deltaY)}))}))},r.onUserEvent=function(e){var t,n=e.eventName,i=e.target,a=e.reverse;if(n&&i){var o=Rq(n);o&&"Scroll"===o&&(i.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),null===(t=r.wheelEventsPerObject.get(i))||void 0===t||t.forEach((function(e){e.dispatchUserEvent(a)})))}};var a=r.eventContext,s=a.page,l=a.sharedAssets,d=a.domElement,h=a.isExport;return s.traverseEntity((function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length){var n,a=(0,x.Z)(e.data.events);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.id,c=o.data;if(!c.disabled&&"Scroll"===c.type)if("load"!==c.trigger&&h){var f,p=new VX(u,c,e,s,l,d,i);r.scrollEventsPerObject.has(e)?null===(f=r.scrollEventsPerObject.get(e))||void 0===f||f.push(p):r.scrollEventsPerObject.set(e,[p])}else{var v,m=new ZX(u,c,e,s,l,i);r.wheelEventsPerObject.has(e)?null===(v=r.wheelEventsPerObject.get(e))||void 0===v||v.push(m):r.wheelEventsPerObject.set(e,[m])}}}catch(g){a.e(g)}finally{a.f()}}})),r.intersectionObserver=new IntersectionObserver((function(e){var t=e[0];t&&(r.isInview=t.isIntersecting)}),{root:null}),r}return(0,d.Z)(n,[{key:"connect",value:function(){var e=this;this.intersectionObserver.observe(this.eventContext.domElement),u(this.wheelEventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0];n[1].forEach((function(e){return e.connect()})),i.addEventListener("userEvent",e.onUserEvent)})),u(this.scrollEventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0];n[1].forEach((function(e){return e.connect()})),i.addEventListener("userEvent",e.onUserEvent)})),u(this.wheelEventsPerObject.values()).some((function(e){return e.length}))&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),u(this.scrollEventsPerObject.values()).some((function(e){return e.length}))&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}},{key:"disconnect",value:function(){var e=this;window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),u(this.wheelEventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0];n[1].forEach((function(e){return e.disconnect()})),i.removeEventListener("userEvent",e.onUserEvent)})),u(this.scrollEventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0];n[1].forEach((function(e){return e.disconnect()})),i.removeEventListener("userEvent",e.onUserEvent)}))}}]),n}(Dq),HX=function(){function e(t,n,i,r,a,o){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.actions=DW(n,n.actions,r,a,o,i)}return(0,d.Z)(e,[{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatch",value:function(){this.actions.Transition.forEach((function(e){e.play()})),this.actions.Animation.forEach((function(e){e.play()})),this.actions.SwitchCamera.forEach((function(e){e.play()})),this.actions.SceneTransition.forEach((function(e){e.dispatch()})),this.actions.Create.forEach((function(e){e.dispatchFromStart()})),this.actions.Destroy.forEach((function(e){e.dispatchFromStart()}))}},{key:"dispatchAfter",value:function(e){this.actions.Audio.forEach((function(t){var n;(null!==(n=t.interaction.data.triggerAfter)&&void 0!==n?n:"any")===e&&(t.interaction instanceof NG?t.interaction.audioPlayer.play():t.interaction instanceof zG&&t.interaction.dispatch())})),this.actions.Video.forEach((function(t){var n,i=null!==(n=t.interaction.data.triggerAfter)&&void 0!==n?n:"autoplay";i===e&&(t.interaction instanceof BW?t.interaction.play("autoplay"===i):t.interaction instanceof NW&&t.interaction.dispatch())}))}},{key:"dispatchUserEvent",value:function(e){var t=this;this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),e?(this.actions.Transition.forEach((function(e){return e.reverseFromCurrent()})),this.actions.Animation.forEach((function(e){return e.reverseFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.reverseFromCurrent()}))):(this.actions.Transition.forEach((function(e){return e.playFromCurrent()})),this.actions.Animation.forEach((function(e){return e.playFromCurrent()})),this.actions.SwitchCamera.forEach((function(e){return e.playFromCurrent()}))),this.actions.SceneTransition.forEach((function(e){return e.dispatch()})),this.actions.Create.forEach((function(e){e.dispatch()})),this.actions.Destroy.forEach((function(e){e.dispatch()})),this.actions.Audio.forEach((function(e){e.interaction instanceof NG?e.interaction.audioPlayer.play():e.interaction instanceof zG&&e.interaction.dispatch()})),this.actions.Video.forEach((function(e){e.interaction instanceof BW?e.interaction.play():e.interaction instanceof NW&&e.interaction.dispatch()}))}}]),e}(),WX=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).eventManager=i,r.eventsPerObject=new Map,r.eventsAfterPerObject=new Map,r.onMouseDown=function(){u(r.eventsAfterPerObject.entries()).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach((function(e){e.dispatchAfter("mouseDown")}))}))},r.onKeyDown=function(){u(r.eventsAfterPerObject.entries()).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach((function(e){e.dispatchAfter("keyDown")}))}))},r.onAny=function(){var e=r.eventContext,t=e.domElement;(e.isExport?document:t).removeEventListener("pointerdown",r.onAny),document.removeEventListener("keydown",r.onAny),u(r.eventsAfterPerObject.entries()).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach((function(e){e.dispatchAfter("any")}))}))},r.onSceneTransitionAudioVideoPlay=function(){u(r.eventsAfterPerObject.entries()).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach((function(e){e.actions.Audio.forEach((function(e){e.interaction instanceof NG&&e.interaction.audioPlayer.play()})),e.actions.Video.forEach((function(e){var t,n=null!==(t=e.interaction.data.triggerAfter)&&void 0!==t?t:"autoplay";e.interaction instanceof BW&&e.interaction.play("autoplay"===n)}))}))}))},r.onPlay=function(){u(r.eventsAfterPerObject.entries()).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach((function(e){e.dispatchAfter("autoplay")}))}))},r.onUserEvent=function(e){var t,n,i=e.eventName,a=e.target,o=e.reverse;if(i&&a){var s=Rq(i);s&&"Start"===s&&(a.dispatchEvent({type:"beginEvent",eventName:"Start"}),null!==(t=r.eventsPerObject.get(a))&&void 0!==t&&t.forEach((function(e){e.dispatchUserEvent(o)})),null===(n=r.eventsAfterPerObject.get(a))||void 0===n||n.forEach((function(e){e.dispatchUserEvent(o)})))}},r}return(0,d.Z)(n,[{key:"connect",value:function(){var e=this,t=this.eventContext,n=t.sharedAssets,i=t.page;if(i.traverseEntity((function(t){var r;if(null!==(r=t.data)&&void 0!==r&&r.events.length){var a,o=(0,x.Z)(t.data.events);try{for(o.s();!(a=o.n()).done;){var s,l,u,c=a.value,d=c.id,h=c.data;if(!h.disabled&&"Start"===h.type){var f=new HX(d,h,t,i,n,e.eventManager);(f.actions.Transition.length||f.actions.Animation.length||f.actions.SwitchCamera.length||f.actions.Create.length||f.actions.Destroy.length||f.actions.SceneTransition.length)&&(e.eventsPerObject.has(t)?null===(s=e.eventsPerObject.get(t))||void 0===s||s.push(f):e.eventsPerObject.set(t,[f])),f.actions.Audio.length&&(e.eventsAfterPerObject.has(t)?null===(l=e.eventsAfterPerObject.get(t))||void 0===l||l.push(f):e.eventsAfterPerObject.set(t,[f])),f.actions.Video.length&&(e.hasVideoAction=!0,e.eventsAfterPerObject.has(t)?null===(u=e.eventsAfterPerObject.get(t))||void 0===u||u.push(f):e.eventsAfterPerObject.set(t,[f]))}}}catch(p){o.e(p)}finally{o.f()}}})),u(this.eventsAfterPerObject.values()).some((function(e){return e.length}))){if(0===this.eventManager.activateCount){var r=this.eventContext,a=r.domElement,s=r.isExport?document:a;s.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),s.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),u(this.eventsAfterPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0];n[1];i.addEventListener("userEvent",e.onUserEvent)}))}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}u(this.eventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0],r=n[1];i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach((function(e){return e.dispatch()})),i.addEventListener("userEvent",e.onUserEvent)}))}},{key:"disconnect",value:function(){var e=this;if(u(this.eventsAfterPerObject.values()).some((function(e){return e.length}))){var t=this.eventContext,n=t.domElement,i=t.isExport?document:n;i.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),u(this.eventsAfterPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0],r=n[1];i.removeEventListener("userEvent",e.onUserEvent),r.forEach((function(e){return e.disconnect()}))}))}u(this.eventsPerObject.entries()).forEach((function(t){var n=o(t,2),i=n[0],r=n[1];i.removeEventListener("userEvent",e.onUserEvent),r.forEach((function(e){return e.disconnect()}))})),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}}]),n}(Dq),qX=function(){function e(t,n,i,r,a,o){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.disabled=!1,this.actions=DW(n,n.actions,r,a,o,i),this.target=n.target,this.useToggle=n.toggle}return(0,d.Z)(e,[{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatch",value:function(e){var t=this;this.disabled||(this.actions.Transition.forEach((function(e){e.object.currentTransitionEvent!==t&&(e.object.currentTransitionEvent=t,e.init())})),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach((function(e){e.toggle()})),this.actions.Animation.forEach((function(e){e.toggle()}))):(this.actions.Transition.forEach((function(e){e.play()})),this.actions.Animation.forEach((function(e){e.play()}))),this.actions.Reset.forEach((function(e){e.dispatch()})),this.actions.Link.forEach((function(e){e.dispatch()})),this.actions.Reset.forEach((function(e){e.dispatch()})),this.actions.Create.forEach((function(e){e.dispatch()})),this.actions.Destroy.forEach((function(t){t.dispatch(null!==e&&void 0!==e&&e)})),this.actions.Audio.forEach((function(e){e.dispatchBasic()})),this.actions.Video.forEach((function(e){e.dispatchBasic()})))}}]),e}(),XX="\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport('".concat("https://unpkg.com/@splinetool/runtime@0.9.418/build/","' + 'navmesh.js'),\n\t\tfetch('").concat("https://unpkg.com/@splinetool/navmesh-wasm@0.9.418/build/","' + 'navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n"),YX={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1};OM.then((function(e){NX=e,zX=new e.Vec3,FX=new e.Vec3}));var QX=new Rf,KX=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,c.Z)(this,e),this.usePhysics=n,this.isExport=i,this.onPointerDown=function(e){if(1===xM.length){var n=t.eventContext,i=n.raycaster,r=n.page;t.eventContext.updateRaycaster(e);var a=r.raycastWithClones(i);if(0!==a.length){if(t.gameControl){var o=QX.copy(t.gameControl.colliderWorldPosition);o.y-=t.gameControl.colliderHeight/2,t.gameControl.path=t.computePath(o,a[0].point)}t.eventContext.requestRender()}}},this.traverseWithPhysics=function(e,n){return function(i){var r,a,o,s,l,u,c;if(i instanceof iU){if(!i.objectForSample)return!0===i.object.dataPatched.physics.fusedBody&&"dynamic"===i.object.dataPatched.physics.rigidBody||void 0;if(i.objectForSample.dataPatched.physics.fusedBody)return;c=i.object}else if(i instanceof BO)c=i.object;else if(!1===(null===(r=(c=i).dataPatched.cloner)||void 0===r?void 0:r.disabled)&&null!==(a=c.dataPatched.cloner)&&void 0!==a&&a.hideBase&&!0!==(null===(o=c.dataPatched.physics)||void 0===o?void 0:o.fusedBody))return!0;if(!n||c.userData.navmesh){var d=c.dataPatched;if(!d.visible&&!0!==(null===(s=d.physics)||void 0===s?void 0:s.enabled))return!0;i.updateMatrixWorldSVD();var h,f,p=RY(d),v=c.userData.hasDestroy,m=c.userData.hasDrag,g=!1,L=!1,y=(0,x.Z)(d.events);try{for(y.s();!(h=y.n()).done;){var b=h.value;!0!==b.data.disabled&&("GameControl"===b.data.type?g=!0:"Follow"===b.data.type&&(L=!0))}}catch(w){y.e(w)}finally{y.f()}if(g||p||L||v||m)return!0;if(t.usePhysics&&"dynamic"===(null===(l=d.physics)||void 0===l?void 0:l.rigidBody)){if(t.usePhysics&&null!==(f=d.physics)&&void 0!==f&&f.fusedBody)return!0}else if("geometry"in i&&i.geometry&&e.push(gq(i.geometry,i.matrixWorld)),t.usePhysics&&null!==(u=d.physics)&&void 0!==u&&u.fusedBody)return i.traverseObject((function(t,n){var i,r;if(0!==n){var a;if(t instanceof iU){if(!t.objectForSample)return!0===t.object.dataPatched.physics.fusedBody&&"dynamic"===t.object.dataPatched.physics.rigidBody||void 0;if(t.objectForSample.dataPatched.physics.fusedBody)return;a=t.object}else if(t instanceof BO)a=t.object;else if(a=t,null!==(i=t.dataPatched.cloner)&&void 0!==i&&i.hideBase)return!0;var o=a.dataPatched;if(!o.visible&&!0!==(null===(r=o.physics)||void 0===r?void 0:r.enabled))return!0;"geometry"in t&&t.geometry&&e.push(gq(t.geometry,t.matrixWorld))}})),!0}}},this.traverseNoPhysics=function(e,t){return function(n){var i;if(!(n instanceof iU)){var r=(i=n instanceof BO?n.object:n).dataPatched;if("visibility"===r.physics.enabled?!r.visible:!r.physics.enabled)return!0;if(!t||i.userData.navmesh){var a=n.geometry,o=!0===i.userData.hasDestroy,s=!0===i.userData.hasDrag;if(RY(r)||o||s||i.dataPatched.events.some((function(e){return!0!==e.data.disabled&&"GameControl"===e.data.type})))return!0;a&&e.push(gq(a,n.matrixWorld))}}}},this.navmeshWasm=NX,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(i?XX:"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport(self.location.origin + '/_libraries/navmesh.js'),\n\t\tfetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n")+"\n\nonmessage = function(messageEvent) {\n\tconst meshData = messageEvent.data;\n\tconst positions = meshData[0];\n\tconst offset = meshData[1];\n\tconst indices = meshData[2];\n\tconst indicesLength = meshData[3];\n\tconst parameters = meshData[4];\n\n\tconst module = self.module;\n\tconst rc = new module.rcConfig();\n\trc.cs = parameters.cs;\n\trc.ch = parameters.ch;\n\trc.borderSize = parameters.borderSize ? parameters.borderSize : 0;\n\trc.tileSize = parameters.tileSize ? parameters.tileSize : 0;\n\trc.walkableSlopeAngle = parameters.walkableSlopeAngle;\n\trc.walkableHeight = parameters.walkableHeight;\n\trc.walkableClimb = parameters.walkableClimb;\n\trc.walkableRadius = parameters.walkableRadius;\n\trc.maxEdgeLen = parameters.maxEdgeLen;\n\trc.maxSimplificationError = parameters.maxSimplificationError;\n\trc.minRegionArea = parameters.minRegionArea;\n\trc.mergeRegionArea = parameters.mergeRegionArea;\n\trc.maxVertsPerPoly = parameters.maxVertsPerPoly;\n\trc.detailSampleDist = parameters.detailSampleDist;\n\trc.detailSampleMaxError = parameters.detailSampleMaxError;\n\n\tif (!self.navMesh) {\n\t\tself.navMesh = new module.NavMesh();\n\t}\n\tself.navMesh.build(positions, offset, indices, indicesLength, rc);\n\n\tconst navmeshData = navMesh.getNavmeshData();\n\tconst arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);\n\tconst ret = new Uint8Array(navmeshData.size);\n\tret.set(arrView);\n\tnavMesh.freeNavmeshData(navmeshData);\n\n\tpostMessage(ret);\n}\n"])),this._worker=new Worker(this._workerURL)}return(0,d.Z)(e,[{key:"init",value:function(e,t,n){var i=this;this.gameControl=t,this.eventContext=n,this.resolution=e.ch,this.setDefaultQueryExtent((new Rf).setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=function(){i.createNavMesh(n.page,e,(function(e){i.buildFromNavmeshData(e.data)}))},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}},{key:"createNavMesh",value:function(e,t,n){t.objects.forEach((function(t){var n,i=e.scene.find(t);i.traverseEntity((function(e){e.userData.navmesh=!0})),null===(n=i.cloner)||void 0===n||n.traverseObject((function(e){e.userData.navmesh=!0}))}));var i=[],r=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,"custom"===t.zones);if(e.traverseChildren(r),t.objects.forEach((function(t){var n,i=e.scene.find(t);i.traverseEntity((function(e){e.userData.navmesh=void 0})),null===(n=i.cloner)||void 0===n||n.traverseObject((function(e){e.userData.navmesh=void 0}))})),0===i.length)return!1;var a=$P(i),o=GB(a.getAttribute("position"),a.getIndex()),s=o.positions,l=o.triIndices;return this._worker.postMessage([s,s.length/3,l,l.length,$e($e({},YX),t)]),this._worker.onmessage=n,!0}},{key:"createDebugNavGeometry",value:function(){var e,t,n=this.navMesh.getDebugNavMesh(),i=n.getTriangleCount(),r=new Uint32Array(3*i),a=new Float32Array(3*i*3);for(e=0;e<3*i;e++)r[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){var o=n.getTriangle(e).getPoint(t);a[9*e+3*t+0]=o.x,a[9*e+3*t+1]=o.y,a[9*e+3*t+2]=o.z}var s=new cv;return s.setIndex(new $p(r,1)),s.setAttribute("position",new $p(a,3)),s}},{key:"getClosestPoint",value:function(e){return zX.x=e.x,zX.y=e.y,zX.z=e.z,this.navMesh.getClosestPoint(zX)}},{key:"getClosestPointToRef",value:function(e,t){zX.x=e.x,zX.y=e.y,zX.z=e.z;var n=this.navMesh.getClosestPoint(zX);t.set(n.x,n.y,n.z)}},{key:"getRandomPointAround",value:function(e,t){return zX.x=e.x,zX.y=e.y,zX.z=e.z,this.navMesh.getRandomPointAround(zX,t)}},{key:"getRandomPointAroundToRef",value:function(e,t,n){zX.x=e.x,zX.y=e.y,zX.z=e.z;var i=this.navMesh.getRandomPointAround(zX,t);n.set(i.x,i.y,i.z)}},{key:"moveAlong",value:function(e,t){return zX.x=e.x,zX.y=e.y,zX.z=e.z,FX.x=t.x,FX.y=t.y,FX.z=t.z,this.navMesh.moveAlong(zX,FX)}},{key:"moveAlongToRef",value:function(e,t,n){return zX.x=e.x,zX.y=e.y,zX.z=e.z,FX.x=t.x,FX.y=t.y,FX.z=t.z,this.navMesh.moveAlong(zX,FX)}},{key:"computePath",value:function(e,t){var n=this.getClosestPoint(t);FX.x=n.x,FX.y=n.y,FX.z=n.z,this.getClosestPoint(e);for(var i=this.navMesh.computePath(zX,FX),r=i.getPointCount(),a=[],o=0;o<r;o++){var s=i.getPoint(o);a.push(new Rf(s.x,s.y,s.z))}return a}},{key:"createCrowd",value:function(e,t){return new JX(this,e,t)}},{key:"setDefaultQueryExtent",value:function(e){zX.x=e.x,zX.y=e.y,zX.z=e.z,this.navMesh.setDefaultQueryExtent(zX)}},{key:"getDefaultQueryExtent",value:function(){return this.navMesh.getDefaultQueryExtent()}},{key:"buildFromNavmeshData",value:function(e){var t=e.length*e.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,t);i.set(e);var r=new this.navmeshWasm.NavmeshData;r.dataPointer=i.byteOffset,r.size=e.length,this.navMesh.buildFromNavmeshData(r),this.navmeshWasm._free(i.byteOffset)}},{key:"getNavmeshData",value:function(){var e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),n=new Uint8Array(e.size);return n.set(t),this.navMesh.freeNavmeshData(e),n}},{key:"getDefaultQueryExtentToRef",value:function(e){var t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}},{key:"dispose",value:function(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),null===(e=this.eventContext)||void 0===e||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}},{key:"addCylinderObstacle",value:function(e,t,n){return zX.x=e.x,zX.y=e.y,zX.z=e.z,this.navMesh.addCylinderObstacle(zX,t,n)}},{key:"addBoxObstacle",value:function(e,t,n){return zX.x=e.x,zX.y=e.y,zX.z=e.z,FX.x=t.x,FX.y=t.y,FX.z=t.z,this.navMesh.addBoxObstacle(zX,FX,n)}},{key:"removeObstacle",value:function(e){this.navMesh.removeObstacle(e)}},{key:"isSupported",value:function(){return void 0!==this.navmeshWasm}}]),e}(),JX=function(){function e(t,n,i){(0,c.Z)(this,e),this.navmeshWasmWrapper=t,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(n,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}return(0,d.Z)(e,[{key:"onReachTarget",value:function(e,t){}},{key:"addAgent",value:function(e,t,n){var i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;var r=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(n),this.agents.push(r),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new Rf(0,0,0)),r}},{key:"getAgentPosition",value:function(e){return this.crowd.getAgentPosition(e)}},{key:"getAgentPositionToRef",value:function(e,t){var n=this.crowd.getAgentPosition(e);t.set(n.x,n.y,n.z)}},{key:"getAgentVelocity",value:function(e){return this.crowd.getAgentVelocity(e)}},{key:"getAgentVelocityToRef",value:function(e,t){var n=this.crowd.getAgentVelocity(e);t.set(n.x,n.y,n.z)}},{key:"getAgentNextTargetPath",value:function(e){return this.crowd.getAgentNextTargetPath(e)}},{key:"getAgentNextTargetPathToRef",value:function(e,t){var n=this.crowd.getAgentNextTargetPath(e);t.set(n.x,n.y,n.z)}},{key:"getAgentState",value:function(e){return this.crowd.getAgentState(e)}},{key:"overOffmeshConnection",value:function(e){return this.crowd.overOffmeshConnection(e)}},{key:"agentGoto",value:function(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));var n=this.agents.indexOf(e);n>-1&&(this._agentDestinationArmed[n]=!0,this._agentDestination[n].set(t.x,t.y,t.z))}},{key:"agentTeleport",value:function(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}},{key:"updateAgentParameters",value:function(e,t){var n=this.crowd.getAgentParameters(e);void 0!==t.radius&&(n.radius=t.radius),void 0!==t.height&&(n.height=t.height),void 0!==t.maxAcceleration&&(n.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(n.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(n.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(n.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(n.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,n)}},{key:"removeAgent",value:function(e){this.crowd.removeAgent(e);var t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}},{key:"getAgents",value:function(){return this.agents}},{key:"update",value:function(e){if(this.navmeshWasmWrapper.navMesh.update(),!(e<=.001)){var t=1/60,n=Math.floor(e/t);n>10&&(n=10),n<1&&(n=1);for(var i=e/n,r=0;r<n;r++)this.crowd.update(i);for(var a=0;a<this.agents.length;a++){var o=this.agents[a],s=this.getAgentPosition(o);if(this.transforms[a].copy(s),this._agentDestinationArmed[a]){var l=s.x-this._agentDestination[a].x,u=s.z-this._agentDestination[a].z,c=this.reachRadii[a],d=this._agentDestination[a].y-this.reachRadii[a],h=this._agentDestination[a].y+this.reachRadii[a],f=l*l+u*u;s.y>d&&s.y<h&&f<c*c&&(this.onReachTarget(o,this._agentDestination[a]),this._agentDestinationArmed[a]=!1)}}}}},{key:"setDefaultQueryExtent",value:function(e){var t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}},{key:"getDefaultQueryExtent",value:function(){return this.crowd.getDefaultQueryExtent()}},{key:"getDefaultQueryExtentToRef",value:function(e){var t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}},{key:"getCorners",value:function(e){var t,n=this.crowd.getCorners(e),i=n.getPointCount(),r=[];for(t=0;t<i;t++){var a=n.getPoint(t);r.push(new Rf(a.x,a.y,a.z))}return r}},{key:"dispose",value:function(){this.crowd.destroy()}}]),e}();function $X(e){var t=!1;return e.scene.objects.forEach((function(n){"Page"===n.data.type&&!t&&n.data.publish.gameControlObject&&TP.traverseModuleInstances(e.scene.objects,n.id,(function(e,n,i){var r,a=(0,x.Z)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;"GameControl"===o.data.type&&o.data.navmesh.enabled&&(t=!0)}}catch(s){a.e(s)}finally{a.f()}}))})),t}var eY={type:"change"},tY={type:"changeZoom"},nY={type:"changePan"},iY={type:"start"},rY={type:"end",changed:!0},aY={type:"end",changed:!1},oY=new If,sY=new af,lY=2*Math.PI,uY=new Rf,cY=new af,dY=new Rf,hY=new If,fY=new dp,pY={type:"requestRender"},vY=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isPlayMode:!1,isExport:!1};return(0,c.Z)(this,n),(r=t.call(this)).object=e,r.domElement=i,r.options=a,r.enabled=!0,r.useKeyEvents=!0,r.enableDamping=!1,r.enableZoom=!0,r.enableRotate=!0,r.enablePan=!0,r.autoRotate=!1,r.rotationLimitsMode=0,r.panLimitsMode=0,r.rotationSoftLimit=2,r.panSoftLimit=2,r.hoverRotatePanMode=0,r.zoomLimitsEnabled=!1,r.mouseButtons=[0,5],r.mouseButtonsPlay=[3,4,5],r.touches=[null,mc,pc],r.offset=new Rf,r.eye=new Rf,r.lastPosition=new Rf,r.lastQuaternion=new If,r.current=new af,r.overShoot=new af,r.overRatio=new af,r.spherical=new dx,r.sphericalDelta=new dx,r.panOffset=new Rf,r.panLeftV=new Rf,r.panUpV=new Rf,r.panV=new Rf,r.rotateStart=new af,r.rotateEnd=new af,r.rotateDelta=new af,r.panStart=new af,r.panEnd=new af,r.panDelta=new af,r.dollyStart=new af,r.dollyEnd=new af,r.dollyDelta=new af,r.rotationRangeFactor=new af,r.panRangeFactor=new af,r.state=-1,r.zoomChanged=!1,r.isPointerDown=!1,r.isThetaFlipped=!1,r.prevScale=0,r.scale=1,r.gesture=!1,r.timer=-1,r.timerHover=-1,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.minPhi=0,r.maxPhi=Math.PI,r.minTheta=-1/0,r.maxTheta=1/0,r.minH=0,r.maxH=Math.PI,r.minV=-1/0,r.maxV=1/0,r.autoRotateClockwise=!0,r.isPanOverShoot=!1,r.isRotateOverShoot=!1,r.resetHoverEffectOnPointerLeave=!1,r.hasChange=!1,r.useWindowEvents=!1,r.isTouchZoom=!0,r.autoRotateSpeed=2,r.dampingFactor=.125,r.zoomSpeed=2,r.rotateSpeed=1,r.panSpeed=1,r.hoverRotatePanStrength=.1,r.thetaIsFree=!1,r.phiIsFree=!1,r.needsUpdate=!0,r.onCameraChange=function(e){r.object.removeEventListener("beginState",r.onBeginState),r.object.removeEventListener("completeState",r.onCompleteState),r.object.removeEventListener("cameraChange",r.onCameraChange),r.object=e.camera,r.object.addEventListener("beginState",r.onBeginState),r.object.addEventListener("completeState",r.onCompleteState),r.object.addEventListener("cameraChange",r.onCameraChange)},r.update=function(){r.object.updateWorldMatrix(!0,!1),r.object.matrixWorld.decompose(dY,hY,uY),r.offset.copy(dY).sub(r.target),r.spherical.setFromVector3(r.offset),r.object.isUpVectorFlipped&&(r.spherical.phi*=-1,r.spherical.theta-=Math.PI),r.autoRotate&&-1===r.state&&r.rotateLeft((!0===r.autoRotateClockwise?1:-1)*r.getAutoRotationAngle()),0!==r.rotationLimitsMode&&r.applyLimits(r.sphericalDelta,r.rotationLimitsMode,r.rotationSoftLimit,r.maxTheta,r.minTheta,r.maxPhi,r.minPhi,r.rotationRangeFactor),2!==r.rotationLimitsMode&&(r.spherical.phi+=r.sphericalDelta.phi),(1!==r.rotationLimitsMode||!0===r.autoRotate)&&(r.spherical.theta+=r.sphericalDelta.theta),r.spherical.radius*=r.scale,r.zoomLimitsEnabled&&(r.spherical.radius=Math.max(r.minDistance,Math.min(r.maxDistance,r.spherical.radius))),0!==r.panLimitsMode&&(r.target.applyQuaternion(oY.copy(hY).invert()),r.panOffset.applyQuaternion(oY),r.applyLimits(r.panOffset,r.panLimitsMode,r.panSoftLimit,r.maxH,r.minH,r.maxV,r.minV,r.panRangeFactor),r.target.applyQuaternion(hY),r.panOffset.applyQuaternion(hY)),2===r.panLimitsMode&&(r.panOffset.y=0),1===r.panLimitsMode&&(r.panOffset.x=0),-1!==r.state||r.gesture?(r.target.add(r.panOffset),r.panOffset.set(0,0,0)):(r.panOffset.multiplyScalar(1-r.dampingFactor),r.target.add(r.panOffset)),r.offset.setFromSpherical(r.spherical),dY.copy(r.target).add(r.offset),r.object.position.copy(r.target).add(r.offset),r.object.parent&&(fY.copy(r.object.parent.matrixWorld).invert(),r.object.position.applyMatrix4(fY));var e=r.spherical.phi%lY;return r.eye.copy(r.offset).normalize(),r.object.up.copy(Bp.DEFAULT_UP).applyAxisAngle(r.eye,r.object.angleOffsetFromUp),e>0&&e>Math.PI||e<0&&e>-Math.PI?(r.object.up.negate(),r.object.lookAt(r.target),r.object.isUpVectorFlipped=!0):(r.object.lookAt(r.target),r.object.isUpVectorFlipped=!1),-1===r.state||!0===r.enableDamping?(r.sphericalDelta.theta*=1-r.dampingFactor,r.sphericalDelta.phi*=1-r.dampingFactor):r.sphericalDelta.set(0,0,0),r.scale=1,r.zoomChanged||r.lastPosition.distanceToSquared(r.object.position)>.01||8*(1-r.lastQuaternion.dot(r.object.quaternion))>1e-8?(r.dispatchEvent(eY),r.object.dispatchEvent(pY),r.lastPosition.copy(r.object.position),r.lastQuaternion.copy(r.object.quaternion),r.zoomChanged=!1,!0):(r.isPanOverShoot=!1,r.isRotateOverShoot=!1,r.object.wasMovedBySwitchCameraAction=!1,r.sphericalDelta.set(0,0,0),r.panOffset.set(0,0,0),!1)},r.onPointerDown=function(e){!1!==r.enabled&&("touch"===e.pointerType||"pen"===e.pointerType&&mM?r.onPointerDownTouch(e):r.onPointerDownMouse(e),-1!==r.state&&(r.isPointerDown=!0,r.dispatchEvent(iY),r.domElement.addEventListener("pointermove",r.onPointerMove),r.domElement.addEventListener("pointerup",r.onPointerUp),e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&mM||r.domElement.setPointerCapture(e.pointerId)))},r.onPointerLeave=function(e){r.resetHoverEffectOnPointerLeave&&!r.useWindowEvents?(1===r.hoverRotatePanMode?(r.sphericalDelta.theta=-r.spherical.theta,r.sphericalDelta.phi=-r.spherical.phi,uY.subVectors(r.position0,r.target0),r.spherical.setFromVector3(uY),r.sphericalDelta.theta+=r.spherical.theta,r.sphericalDelta.phi+=r.spherical.phi,r.sphericalDelta.theta/=8,r.sphericalDelta.phi/=8):2===r.hoverRotatePanMode&&r.panOffset.subVectors(r.target0,r.target).divideScalar(8),r.update()):r.pointerLeaveEvent=e},r.onPointerEnter=function(e){r.resetHoverEffectOnPointerLeave||void 0===r.pointerLeaveEvent?cY.set(e.clientX-r.domElement.clientWidth/2,e.clientY-r.domElement.clientHeight/2):cY.set(e.clientX-r.pointerLeaveEvent.clientX,e.clientY-r.pointerLeaveEvent.clientY),1===r.hoverRotatePanMode?(r.rotateDelta.copy(cY).multiplyScalar(r.rotateSpeed*r.hoverRotatePanStrength).rotateAround(sY,-r.object.angleOffsetFromUp),r.rotateLeft(2*Math.PI*r.rotateDelta.x/r.domElement.clientHeight),r.rotateUp(2*Math.PI*r.rotateDelta.y/r.domElement.clientHeight),r.rotateStart.set(e.clientX,e.clientY)):2===r.hoverRotatePanMode&&(r.panDelta.copy(cY).multiplyScalar(r.panSpeed*r.hoverRotatePanStrength),r.pan(r.panDelta.x,r.panDelta.y),r.panStart.set(e.clientX,e.clientY)),r.update()},r.onPointerMove=function(e){!1!==r.enabled&&(r.checkRaycastLock()||("touch"===e.pointerType||"pen"===e.pointerType&&mM?r.onPointerMoveTouch(e):r.onPointerMoveMouse(e),e.stopPropagation()))},r.onPointerUp=function(e){r.isPointerDown=!1,0===xM.length&&(r.domElement.removeEventListener("pointermove",r.onPointerMove),r.domElement.removeEventListener("pointerup",r.onPointerUp)),xM.length>1&&e.preventDefault(),r.hasChange?r.dispatchEvent(rY):r.dispatchEvent(aY),r.state=-1,e&&(e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&mM||r.domElement.releasePointerCapture(e.pointerId))},r.onPointerDownMouse=function(e){switch(r.useKeyEvents?r.mouseButtons[e.button]:r.mouseButtonsPlay[e.button]){case 0:if(!0!==e.altKey||e.shiftKey||bM(e)){if(" "===r.key){if(!1===r.enablePan)return;r.handleMouseDownPan(e),r.state=2}}else{if(!1===r.enableRotate)return;r.handleMouseDownRotate(e),r.state=0}break;case 4:if(!1===r.enablePan)return;r.handleMouseDownPan(e),r.state=2;break;case 3:if(bM(e)||e.shiftKey){if(!1===r.enablePan)return;r.handleMouseDownPan(e),r.state=2}else{if(!1===r.enableRotate)return;r.handleMouseDownRotate(e),r.state=0}break;case 5:if(bM(e)||e.shiftKey){if(!1===r.enableRotate)return;r.handleMouseDownRotate(e),r.state=0}else{if(!1===r.enablePan)return;r.handleMouseDownPan(e),r.state=2}break;default:r.state=-1}},r.onPointerMoveMouse=function(e){switch(r.state){case 0:if(!1===r.enableRotate)return;r.handleMouseMoveRotate(e);break;case 1:if(!1===r.enableZoom)return;r.handleMouseMoveDolly(e);break;case 2:if(!1===r.enablePan)return;r.handleMouseMovePan(e)}r.object.wasMovedByUser=!0},r.onPointerDownTouch=function(e){switch(xM.length>1&&e.preventDefault(),r.touches[xM.length-1]){case fc:if(!1===r.enableRotate)return void(r.state=-1);r.handleTouchStartRotate(),r.state=3;break;case pc:if(!1===r.enablePan)return void(r.state=-1);r.handleTouchStartPan(),r.state=4;break;case vc:if(!1===r.enableZoom&&!1===r.enablePan)return;r.handleTouchStartDollyPan(),r.state=5;break;case mc:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.handleTouchStartDollyRotate(),r.state=6;break;default:r.state=-1}},r.onPointerMoveTouch=function(e){switch(xM.length>1&&e.preventDefault(),r.state){case 3:if(!1===r.enableRotate)return;r.handleTouchMoveRotate(e),r.update();break;case 4:if(!1===r.enablePan)return;r.handleTouchMovePan(e),r.update();break;case 5:if(!1===r.enableZoom&&!1===r.enablePan)return;r.handleTouchMoveDollyPan(e),r.update();break;case 6:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.handleTouchMoveDollyRotate(e),r.update();break;default:r.state=-1}r.object.wasMovedByUser=!0},r.dispatchEndDebounced=JA((function(){return r.dispatchEvent(rY)}),33),r.onMouseWheel=function(e){!1===r.enabled||!1===r.enableZoom&&!1===r.enablePan||r.checkRaycastLock()||(!1===r.options.isExport&&r.domElement.clientHeight===document.body.clientHeight&&r.domElement.clientWidth===document.body.clientWidth&&e.preventDefault(),r.dispatchEvent(iY),r.handleMouseWheel(e),r.dispatchEndDebounced(),r.object.wasMovedByUser=!0)},r.onGesture=function(e){if(e.preventDefault(),!1!==r.enabled&&!r.checkRaycastLock()&&!pM)if("gesturechange"===e.type){if(!1===r.enableZoom||!1===r.isTouchZoom)return;r.dispatchEvent(iY),e.scale>r.prevScale?r.dollyIn(r.getZoomScale()):e.scale<r.prevScale&&r.dollyOut(r.getZoomScale()),r.prevScale=e.scale,r.update(),r.object.wasMovedByUser=!0}else r.dispatchEvent(rY)},r.onContextMenu=function(e){e.preventDefault()},r.onTouchEnd=function(e){e.preventDefault()},r.onKeyDown=function(e){!1!==r.enabled&&(r.key=e.key," "===e.key&&r.dispatchEvent(iY))},r.onKeyUp=function(e){!1!==r.enabled&&(r.key=void 0,-1!==r.state&&"Alt"===e.key&&r.onPointerUp(xM[0])," "===e.key&&r.dispatchEvent(rY))},r.onPointerHover=function(e){"mouse"!==e.pointerType||!1===r.enabled||-1!==r.state||2===r.hoverRotatePanMode&&r.isPanOverShoot||1===r.hoverRotatePanMode&&r.isRotateOverShoot||(r.isPointerDown=!0,2===r.hoverRotatePanMode?r.handleMouseMovePan(e,r.hoverRotatePanStrength):1===r.hoverRotatePanMode&&r.handleMouseMoveRotate(e,r.hoverRotatePanStrength))},r.onBeginState=function(){r.enabled=!1,r.needsUpdate=!1},r.onCompleteState=function(e){e.isfromEntity&&r.options.isPlayMode||(r.enabled=!0,r.needsUpdate=!0,r.object.updateUp(),r.object.getTarget(r.target))},r.target=r.object.getTarget(),r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r.quat0=r.object.quaternion.clone(),r.isUpVectorFlipped0=r.object.isUpVectorFlipped,r.offset.copy(r.object.position).sub(r.target),r.spherical.setFromVector3(r.offset),r.object.isUpVectorFlipped&&(r.spherical.phi*=-1,r.spherical.theta-=Math.PI),r.addEventListenersToCamera(),r}return(0,d.Z)(n,[{key:"dispatchEvent",value:function(e){"start"===e.type?this.hasChange=!1:this.hasChange=!0,Au((0,p.Z)(n.prototype),"dispatchEvent",this).call(this,e)}},{key:"addEventListenersToCamera",value:function(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}},{key:"removeEventListenersFromCamera",value:function(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}},{key:"updateUseWindowEvents",value:function(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),0!==this.hoverRotatePanMode&&!this.useWindowEvents){var t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}},{key:"fromJSON",value:function(e,t){var n;this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.useWindowEvents="window"===t,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));var i=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=Math.pow(i,2),this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;var r=this.object.getTarget().applyQuaternion(oY.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=mY(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=mY(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=mY(mY(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=mY(mY(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=fc),1===e.panTouches&&(this.touches[0]=pc),2===e.orbitTouches&&(this.touches[1]=mc),2===e.panTouches&&(this.touches[1]=vc),3===e.orbitTouches&&(this.touches[2]=fc),3===e.panTouches&&(this.touches[2]=pc),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=null!==(n=e.resetHoverEffectOnPointerLeave)&&void 0!==n&&n}},{key:"connect",value:function(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),0!==this.hoverRotatePanMode&&!this.useWindowEvents){var e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}},{key:"dispose",value:function(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}},{key:"applyLimits",value:function(e,t,n,i,r,a,o,s){var l,u,c;this.overShoot.set(0,0),e instanceof Rf?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,u=e.phi,this.current.set(mY(this.spherical.theta),mY(this.spherical.phi)),c=!1),0===n&&(this.current.x+=l,this.current.y+=u),(3===t||2===t)&&(!c&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(3===t||1===t)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),c||(this.overShoot.x=mY(this.overShoot.x),this.overShoot.y=mY(this.overShoot.y)),0!==n?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===n&&(this.overRatio.x=gY(Math.abs(this.overRatio.x)),this.overRatio.y=gY(Math.abs(this.overRatio.y))),this.isPointerDown||1===n?2===n&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):2===n&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=.05*this.overShoot.x),this.phiIsFree||(u=.05*this.overShoot.y),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof Rf?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}},{key:"setEnableDampingSpeed",value:function(e){this.enableDamping=e,this.rotateSpeed=!0===e?.2:1}},{key:"stopDamping",value:function(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}},{key:"getAutoRotationAngle",value:function(){return 2*Math.PI/60/60*this.autoRotateSpeed}},{key:"getZoomScale",value:function(){return Math.pow(.95,this.zoomSpeed)}},{key:"rotateLeft",value:function(e){this.sphericalDelta.theta-=e}},{key:"rotateUp",value:function(e){this.sphericalDelta.phi-=e}},{key:"panLeft",value:function(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}},{key:"panUp",value:function(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}},{key:"pan",value:function(e,t){var n=this.domElement;if(n&&this.object.isPerspectiveCamera){var i=this.object.position;this.panV.copy(i).sub(this.target);var r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*t*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(nY)}},{key:"dollyOut",value:function(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(tY)}},{key:"dollyIn",value:function(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(tY)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(iY),this.dollyOut(e),this.dispatchEvent(rY)}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(iY),this.dollyIn(e),this.dispatchEvent(rY)}},{key:"handleMouseDownRotate",value:function(e){this.rotateStart.set(e.clientX,e.clientY)}},{key:"handleMouseDownDolly",value:function(e){this.dollyStart.set(e.clientX,e.clientY)}},{key:"handleMouseDownPan",value:function(e){this.panStart.set(e.clientX,e.clientY)}},{key:"handleMouseMoveRotate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0!==e.movementX?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(sY,-this.object.angleOffsetFromUp);var n=this.domElement,i=this.useWindowEvents?window.innerHeight:n.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,a=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(a),this.update()}},{key:"handleMouseMoveDolly",value:function(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}},{key:"handleMouseMovePan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0!==e.movementX?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}},{key:"handleMouseWheel",value:function(e){var t=this;if(!1===vM&&!1===bM(e)&&!0===function(e){return 0===e.wheelDeltaY||0===e.deltaY?!(fM&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout((function(){t.gesture=!1,t.isPointerDown=!1}),30)}else{if(!1===this.enableZoom)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}},{key:"handleTouchStartRotate",value:function(){if(2===xM.length){var e=.5*(xM[0].pageX+xM[1].pageX),t=.5*(xM[0].pageY+xM[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(xM[0].pageX,xM[0].pageY)}},{key:"handleTouchStartPan",value:function(){if(2===xM.length){var e=.5*(xM[0].pageX+xM[1].pageX),t=.5*(xM[0].pageY+xM[1].pageY);this.panStart.set(e,t)}else this.panStart.set(xM[0].pageX,xM[0].pageY)}},{key:"handleTouchStartDolly",value:function(){var e=xM[0].pageX-xM[1].pageX,t=xM[0].pageY-xM[1].pageY,n=Math.sqrt(e*e+t*t);this.dollyStart.set(0,n)}},{key:"handleTouchStartDollyPan",value:function(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}},{key:"handleTouchStartDollyRotate",value:function(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}},{key:"handleTouchMoveRotate",value:function(e){if(2===xM.length){var t=CM(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.rotateEnd.set(n,i)}else{if(e.pointerId!==xM[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);var r=this.domElement;r&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/r.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/r.clientHeight)),this.rotateStart.copy(this.rotateEnd)}},{key:"handleTouchMovePan",value:function(e){if(2===xM.length){var t=CM(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(n,i)}else{if(e.pointerId!==xM[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}},{key:"handleTouchMoveDolly",value:function(e){var t=CM(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}},{key:"handleTouchMoveDollyPan",value:function(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}},{key:"handleTouchMoveDollyRotate",value:function(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}},{key:"checkRaycastLock",value:function(){if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;var e,t=null===(e=this.options)||void 0===e?void 0:e.showCameraLock;return t&&t(),!0}return!1}}]),n}(Vh);function mY(e){for(var t=2*Math.PI;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function gY(e){return 1-Math.pow(1-e,4)}var LY,yY=function(){function e(t,n,i,r,a,o){(0,c.Z)(this,e),this.id=t,this.data=n,this.object=i,this.currentIntersectedObjects=[],this.disabled=!1,this.actions=DW(n,n.actions,r,a,o,i),this.target=n.target,this.useToggle=n.toggle,this.triggeringObjects=n.triggeringObjects.map((function(e){return r.scene.find(e)}))}return(0,d.Z)(e,[{key:"isValidTriggeringObject",value:function(e){return"all"===this.target||this.triggeringObjects.some((function(t){return t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid)}))}},{key:"disconnect",value:function(){OW(this.actions)}},{key:"dispatch",value:function(){var e=this;this.disabled||(this.actions.Transition.forEach((function(t){t.object.currentTransitionEvent!==e&&(t.object.currentTransitionEvent=e,t.init())})),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach((function(e){e.toggle()})),this.actions.SwitchCamera.forEach((function(e){e.toggle()}))):(this.actions.Transition.forEach((function(e){e.play()})),this.actions.SwitchCamera.forEach((function(e){e.play()}))),this.actions.Link.forEach((function(e){e.dispatch()})),this.actions.Reset.forEach((function(e){e.dispatch()})),this.actions.Create.forEach((function(e){e.dispatch()})),this.actions.Destroy.forEach((function(e){e.dispatch(!1)})),this.actions.Audio.forEach((function(e){e.dispatchBasic()})),this.actions.Video.forEach((function(e){e.dispatchBasic()})),this.actions.SceneTransition.forEach((function(e){e.dispatch()})))}}]),e}();NM.then((function(e){return LY=e}));var bY=new Rf,xY=new If,wY=new Rf,_Y=new xp(0,0,0,"YXZ"),SY=new xp(0,0,0,"XYZ"),kY=new Rf,AY=new Rf,MY=new Rf(1,1,1),CY=new If,EY=new dp,TY=new dp,PY={type:"updateMatrix"},DY={type:"beginEvent",eventName:"Collision"},OY={type:"beginEvent",eventName:"Trigger"};function IY(e){if(TP.physicsEnabled(e.scene.objects))return!0;var t=!1;return e.scene.objects.traverse((function(e,n){if(n.events){var i,r=(0,x.Z)(n.events);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!0!==a.data.disabled&&"GameControl"===a.data.type&&a.data.collisionEnabled){t=!0;break}}}catch(o){r.e(o)}finally{r.f()}}})),t}var RY=function(e){return e.states.some((function(e){return void 0!==e.data.position||void 0!==e.data.rotation||void 0!==e.data.hiddenMatrix||void 0!==e.data.cloner||void 0!==e.data.pathSnapping}))},BY=function(){function e(t){var n=this;(0,c.Z)(this,e),this.eventContext=t,this.orbitControlsNeedsUpdate=!0,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=function(e){if(e.bodyType()===LY.RigidBodyType.Dynamic){e.isSleeping()||n.nActiveRigidBodies++;var t=o(n.rigidBodyToMesh.get(e.handle),3),i=t[0],r=t[1],a=t[2];if(bY.copy(e.translation()).multiplyScalar(n.pixelsPerMeter),xY.copy(e.rotation()),i.matrixWorld.compose(bY,xY,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(PY),a){var s=i.cloner;if(s&&void 0===s.objectForSample){s.matrixWorld.copy(i.matrixWorld);var l,u=(0,x.Z)(s.children);try{for(u.s();!(l=u.n()).done;){l.value.updateMatrixWorld(!0)}}catch(h){u.e(h)}finally{u.f()}}var c,d=(0,x.Z)(i.children);try{for(d.s();!(c=d.n()).done;){c.value.updateMatrixWorld(!0)}}catch(h){d.e(h)}finally{d.f()}}}},this.handleCollisionEvents=function(e,t,i){var r,a,o,s;if(!1!==i)if(n.sensorToTriggerEvent[e]?(o=n.sensorToTriggerEvent[e],s=n.sharedGameControlGlobals.colliderToEntity.get(t)):n.sensorToTriggerEvent[t]&&(o=n.sensorToTriggerEvent[t],s=n.sharedGameControlGlobals.colliderToEntity.get(e)),o&&s&&o.isValidTriggeringObject(s))o.dispatch();else{for(var l=function(){var i,r,a=n.sharedGameControlGlobals.createdObjects[u];if(a.userData.hasCollisionDestroy&&((null===(i=a.rigidBody)||void 0===i?void 0:i.collider(0).handle)===e||(null===(r=a.rigidBody)||void 0===r?void 0:r.collider(0).handle)===t))return n.sharedGameControlGlobals.createdObjects.splice(u,1),a.removeFromParent(),requestAnimationFrame((function(){var e;return null===(e=n.sharedGameControlGlobals.rapierWorld)||void 0===e?void 0:e.removeRigidBody(a.rigidBody)})),1},u=n.sharedGameControlGlobals.createdObjects.length-1;u>=0&&!l();u--);if((null===(r=n.gameControl)||void 0===r?void 0:r.object)===n.sharedGameControlGlobals.colliderToEntity.get(e)){var c=n.sharedGameControlGlobals.colliderToEntity.get(t),d=n.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(void 0===d)return;var h,f=(0,x.Z)(d);try{for(f.s();!(h=f.n()).done;){var p=h.value;"character"===p.data.target&&n.dispatchCollisionEvent(p,c,t)}}catch(P){f.e(P)}finally{f.f()}}else if((null===(a=n.gameControl)||void 0===a?void 0:a.object)===n.sharedGameControlGlobals.colliderToEntity.get(t)){var v=n.sharedGameControlGlobals.colliderToEntity.get(e),m=n.sharedGameControlGlobals.entityToCollisionEvents[v.uuid];if(void 0===m)return;var g,L=(0,x.Z)(m);try{for(L.s();!(g=L.n()).done;){var y=g.value;"character"===y.data.target&&n.dispatchCollisionEvent(y,v,e)}}catch(P){L.e(P)}finally{L.f()}}else{var b=n.sharedGameControlGlobals.colliderToEntity.get(e),w=n.sharedGameControlGlobals.entityToCollisionEvents[b.uuid];if(void 0!==w){var _,S=(0,x.Z)(w);try{for(S.s();!(_=S.n()).done;){var k=_.value;"scene"===k.data.target&&n.dispatchCollisionEvent(k,b,e)}}catch(P){S.e(P)}finally{S.f()}}var A=n.sharedGameControlGlobals.colliderToEntity.get(t),M=n.sharedGameControlGlobals.entityToCollisionEvents[null===A||void 0===A?void 0:A.uuid];if(void 0!==M){var C,E=(0,x.Z)(M);try{for(E.s();!(C=E.n()).done;){var T=C.value;"scene"===T.data.target&&n.dispatchCollisionEvent(T,A,t)}}catch(P){E.e(P)}finally{E.f()}}}}},this.isExport=t.isExport,this.sharedAssets=t.sharedAssets,this.renderer=t.renderer,this.requestRender=t.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=200,this.gravity=this.page.data.globalPhysics.gravity}return(0,d.Z)(e,[{key:"page",get:function(){return this.eventContext.page}},{key:"attachVRControllers",value:function(e){var t=this;e.forEach((function(e){e.addEventListener("connected",(function(e){"gamepad"in e.data&&"axes"in e.data.gamepad&&t.sharedGameControlGlobals.gamePads.push(e.data.gamepad)}))}))}},{key:"markIsDestroyTarget",value:function(){var e=this;this.page.traverseVisibleEntity((function(t){var n,i=t.dataPatched,r=(0,x.Z)(i.events);try{for(r.s();!(n=r.n()).done;){var a,o=n.value;if(!0!==o.data.disabled){var s=null===(a=o.data.actions)||void 0===a||null===(a=a.find((function(e){return"Destroy"===e.data.type})))||void 0===a?void 0:a.data;if(s){var l,u=(0,x.Z)(s.objects);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=e.page.scene.find(c);d&&(d.userData.hasDestroy=!0)}}catch(h){u.e(h)}finally{u.f()}}}}}catch(h){r.e(h)}finally{r.f()}}))}},{key:"markIsDragObject",value:function(){var e=this;this.page.traverseVisibleEntity((function(t){var n,i=t.dataPatched,r=(0,x.Z)(i.events);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!0!==a.data.disabled&&"DragDrop"===a.data.type){var o,s=(0,x.Z)(a.data.objects);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=e.page.scene.find(l);u&&(u.userData.hasDrag=!0)}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){r.e(c)}finally{r.f()}}))}},{key:"initBVH",value:function(){var e=this,t=[];if(this.page.traverseChildren((function(n){var i,r,a;if(!(n instanceof iU)){var o=(a=n instanceof BO?n.object:n).dataPatched;if("visibility"===(null===(i=o.physics)||void 0===i?void 0:i.enabled)?!o.visible:null===(r=o.physics)||void 0===r||!r.enabled)return!0;var s=n.geometry,l=!0===a.userData.hasDestroy,u=!0===a.userData.hasDrag;if(RY(o)||l||u||a.dataPatched.events.some((function(e){return!0!==e.data.disabled&&"GameControl"===e.data.type})))return n.updateMatrixWorldSVD(),e.addBoundsTree(n),!0;s&&t.push(gq(s,n.matrixWorld))}})),t.length>0){var n=$P(t,!1);this.sharedGameControlGlobals.staticMeshBVH=new mO(n)}}},{key:"addRigidBody",value:function(e,t,n){var i=[],r="geometry"in e?e.geometry:void 0,a=t.dataPatched;if(void 0!==(null===r||void 0===r?void 0:r.getAttribute("position"))&&i.push(gq(r,e.shearScale)),a.physics.fusedBody){var o=this.gatherChildrenGeom(e,i);e.traverseObject(o),e.children.forEach((function(e){return e.updateMatrixWorld(!0)}));var s=e.cloner;s&&void 0===s.objectForSample&&"dynamic"===a.physics.rigidBody&&(s.traverseObject(o),s.children.forEach((function(e){return e.updateMatrixWorld(!0)})))}if(i.length>0){var l,c,d,h=!n.fromCreate&&"dynamic"===a.physics.rigidBody||n.fromCreate&&n.dynamic;h?(l=(c=(d=LY.RigidBodyDesc.dynamic()).setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale)).enabledRotations.apply(c,u(a.physics.enabledRotation))).enabledTranslations.apply(l,u(a.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(d=LY.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):d=LY.RigidBodyDesc.fixed();var f=$P(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(bY,xY,wY),e.position0=bY.clone().divideScalar(this.pixelsPerMeter),e.rotation0=xY.clone(),bY.divideScalar(this.pixelsPerMeter),d.setTranslation(bY.x,bY.y,bY.z).setRotation(xY),r?null===f||void 0===f||f.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):null===f||void 0===f||f.scale(wY.x/this.pixelsPerMeter,wY.y/this.pixelsPerMeter,wY.z/this.pixelsPerMeter);var p=this.sharedGameControlGlobals.rapierWorld.createRigidBody(d);h&&this.rigidBodyToMesh.set(p.handle,[e,wY.clone(),a.physics.fusedBody]);var v=!(void 0===a.geometry||"SubdivGeometry"===a.geometry.type||"NonParametricGeometry"===a.geometry.type||"BooleanGeometry"===a.geometry.type||"VectorGeometry"===a.geometry.type||"StarGeometry"===a.geometry.type||"RectangleGeometry"===a.geometry.type||"EllipseGeometry"===a.geometry.type||"TriangleGeometry"===a.geometry.type||"TorusGeometry"===a.geometry.type||"HelixGeometry"===a.geometry.type);try{this.addCollider(p,a.physics,f,t,v)}catch(m){try{this.addCollider(p,a.physics,f,t,!1)}catch(g){console.error(g)}}e.rigidBody=p}}},{key:"addBoundsTree",value:function(e){var t,n=[];if(void 0!==(null===(t=e.geometry)||void 0===t?void 0:t.getAttribute("position"))&&n.push(gq(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,n)),e.children.forEach((function(e){return e.updateMatrixWorld(!0)})),n.length>0){var i=$P(n,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new mO(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}},{key:"addCollider",value:function(e,t,n,i){var r,a,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0!==(null===n||void 0===n?void 0:n.getAttribute("position").count)&&0!==(null===n||void 0===n||null===(r=n.getIndex())||void 0===r?void 0:r.count)){var s;n&&(s="trimesh"===t.colliderType?LY.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):LY.ColliderDesc.convexMesh(n.getAttribute("position").array,o?n.getIndex().array:void 0)),s.setFrictionCombineRule(LY.CoefficientCombineRule.Average).setRestitutionCombineRule(LY.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);var l=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(l.handle,i),(null===(a=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])||void 0===a?void 0:a.some((function(e){return"scene"===e.target})))&&l.setActiveEvents(LY.ActiveEvents.COLLISION_EVENTS)}}},{key:"gatherChildrenGeom",value:function(e,t){return function(n,i){var r;if(0!==i){var a;if(n instanceof iU){if(!n.objectForSample)return!0===n.object.dataPatched.physics.fusedBody&&"dynamic"===n.object.dataPatched.physics.rigidBody||void 0;if(n.objectForSample.dataPatched.physics.fusedBody)return;a=n.object}else if(n instanceof BO)a=n.object;else if(null!==(r=(a=n).dataPatched.cloner)&&void 0!==r&&r.hideBase)return!0;var o=a.dataPatched;if("visibility"===o.physics.enabled?!o.visible:!o.physics.enabled)return!0;1===i?e.hasNonUniformScale?n.matrixWorld.multiplyMatrices(e.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);var s=n.geometry;void 0!==(null===s||void 0===s?void 0:s.getAttribute("position"))&&t.push(gq(s,n.matrixWorld))}}}},{key:"activate",value:function(e){var t=this;this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;var n=this.page.playCamera,i=!1,r=5,a=8,s=9,l="drag",u=this.page.data.publish.gameControlObject,c=null!==u?this.page.find(u):null,d=null;if(c){var h,f=(0,x.Z)(c.data.events);try{for(f.s();!(h=f.n()).done;){var p=h.value;if(p.data.disabled||"GameControl"!==p.data.type)break;for(var v=c;this.usePhysics&&null!==(null===(m=v=v.parent)||void 0===m?void 0:m.parent)&&(null===(g=v.data.physics)||void 0===g||!g.fusedBody);)var m,g;p.data.collisionEnabled&&(this.needsCollisionDetection=!0),null===d&&(d=p.data)}}catch(T){f.e(T)}finally{f.f()}}if(c&&d){i=i||d.camera===n.uuid||c.uuid===n.uuid;var L=new vq(c,this.renderer.domElement,d,this.eventContext.page.data.globalPhysics,this,c.uuid!==n.uuid&&d.camera===n.uuid,n,this.page,this.sharedAssets);this.gameControl=L,d.keyAssignments,r=d.joystickPosLoc,a=d.joystickRotLoc,s=d.jumpTouchButtonLoc,l=d.rotByTouch,mM&&d.touchControl&&(this.joystickToGameControls[r]="pos","walk"===d.moveMode&&(this.joystickToGameControls[s]="jmp"),"joystick"===l&&(this.joystickToGameControls[a]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){var y,b=this.gameControl.data;if(!this.navigationMeshWrapper)this.navigationMeshWrapper=new KX(this.usePhysics,this.isExport),y="sphere"===b.collider.type?2*b.collider.radius:b.collider.height,y=Math.floor(y/b.navmesh.ch-1),this.navigationMeshWrapper.init($e($e({},b.navmesh),{},{walkableHeight:y}),this.gameControl,this.eventContext)}if(!1===i){var w=this.eventManager.publish.orbitControls,_=w.enableRotate,S=w.enablePan,k=w.enableZoom,A=w.autoRotate,M=w.hoverRotatePanMode;(_||S||k||A||0!==M)&&(this.orbitControls=new vY(n,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}var C=this.renderer.domElement.width/this.renderer.getPixelRatio(),E=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((function(e,n){var i=document.body.appendChild(document.createElement("div")),r=o(t.eventManager.eventContext.publish.joystickSizeAndXYOffset[n],3),a=r[0],s=r[1],l=r[2],u=(C-5*a)/4+a,c={},d="jmp"===e,h=d?0:a;for(var f in n<10?(n<5?c.top=h/2:c.bottom=h/2,c.left=h/2+n%5*u):10===n?(c.left=h/2,c.top=E/2):(c.right=h/2,c.top=E/2),c.top?c.top-=s[1]:c.bottom+=s[1],c.left?c.left+=s[0]:c.right-=s[0],c)c[f]+="px";if(d){var p=i.appendChild(document.createElement("div"));Object.assign(p.style,c,{position:"absolute",width:a+"px",height:a+"px",backgroundColor:"rgba(255,255,255,".concat("show"===l?.4:0,")"),zIndex:"9999",borderRadius:a+"px",border:"show"===l?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});var v=a/16*16*.4;return"show"===l&&(p.innerHTML='\n\t\t\t\t\t\t<svg width="'.concat(v,'" height="').concat(.4*a,'" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t')),p.addEventListener("pointerdown",(function(){t.gameControl.movementState.jump=1,t.requestRender()})),p.addEventListener("touchend",(function(e){return e.preventDefault()})),void(t.joysticks[n]=[void 0,i])}var m={zone:i,mode:"static",position:c,size:a};"hide"===l&&(m.restOpacity=0);var g=IG(m);g.on("move",(function(n,i){var r=t.gameControl;"pos"===e?i.force<.2?r.moveForce=0:(r.movementState.movePosZ=Math.sin(-i.angle.radian),r.movementState.movePosX=Math.cos(-i.angle.radian),i.force>1.2?r.movementState.run=1:r.movementState.run=0,i.force<.3?r.moveForce=(i.force-.2)/.1:r.moveForce=1):"rot"===e&&(i.force<.2?r.rotForce=0:(r.movementState.rotPosX=i.vector.y,r.movementState.rotPosY=-i.vector.x,i.force<.3?r.rotForce=(i.force-.2)/.1:r.rotForce=1)),t.requestRender()})),g.on("end",(function(n,i){var r=t.gameControl;"pos"===e?(r.movementState.movePosZ=0,r.movementState.movePosX=0,r.moveForce=1):"rot"===e&&(r.movementState.rotPosX=0,r.movementState.rotPosY=0,r.rotForce=1)})),t.joysticks[n]=[g,i]})),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout((function(){t.collisionEvents.forEach((function(e){return e.disabled=!1}))}),80)}},{key:"initPhysics",value:function(){var e,t=this;null!==(e=this.sharedGameControlGlobals.rapierWorld)&&void 0!==e&&e.free(),this.sharedGameControlGlobals.rapierWorld=new LY.World(new LY.Vector3(0,this.gravity,0)),this.events=new LY.EventQueue(!0);var n=[],i=[];if(this.page.traverseChildren((function(e){var r,a,o,s,l;if(e instanceof iU){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;l=e.object}else if(e instanceof BO)l=e.object;else if(!1===(null===(r=(l=e).dataPatched.cloner)||void 0===r?void 0:r.disabled)&&null!==(a=l.dataPatched.cloner)&&void 0!==a&&a.hideBase&&!0!==(null===(o=l.dataPatched.physics)||void 0===o?void 0:o.fusedBody))return!0;var u,c,d=l.dataPatched,h=(0,x.Z)(d.events);try{for(h.s();!(c=h.n()).done;){var f=c.value;!0!==f.data.disabled&&"GameControl"===f.data.type&&(u=f.data)}}catch(E){h.e(E)}finally{h.f()}if(!d.physics||("visibility"===d.physics.enabled?!d.visible:!d.physics.enabled))return!0;e.updateMatrixWorldSVD();var p,v=RY(d),m=!1,g=l.userData.hasDestroy,L=l.userData.hasDrag,y=!1,b=(0,x.Z)(d.events);try{var w=function(){var n=p.value;if(!0!==n.data.disabled)if("Collision"===n.data.type){m=!0;var i=new qX(n.id,n.data,l,t.page,t.sharedAssets,t.eventManager);i.disabled=!0,t.collisionEvents.push(i),t.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&t.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every((function(e){return e.id!==n.id}))?t.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(i):t.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[i]}else if("Follow"===n.data.type){y=!0;var r=n.data.target;e.traverseVisible((function(e){e.userData.isFollowingObj=r}))}};for(b.s();!(p=b.n()).done;)w()}catch(E){b.e(E)}finally{b.f()}"dynamic"===d.physics.rigidBody&&!1===d.physics.fusedBody&&(e.matrixWorldFusedFalse=e.matrixWorld.clone());var _=e.geometry;if(void 0!==u){var S=LY.RigidBodyDesc.kinematicPositionBased();(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(bY,xY,wY),e.position0=bY.clone().divideScalar(t.pixelsPerMeter),e.rotation0=xY.clone(),bY.divideScalar(t.pixelsPerMeter),S.setTranslation(bY.x,bY.y,bY.z).setRotation(xY);var k,A=t.sharedGameControlGlobals.rapierWorld.createRigidBody(S);e.rigidBody=A,(k="sphere"===u.collider.type?LY.ColliderDesc.ball(u.collider.radius/t.pixelsPerMeter):"capsule"===u.collider.type?LY.ColliderDesc.capsule((u.collider.height/2-u.collider.radius)/t.pixelsPerMeter,u.collider.radius/t.pixelsPerMeter):LY.ColliderDesc.cuboid(u.collider.width/t.pixelsPerMeter/2,u.collider.height/t.pixelsPerMeter/2,u.collider.depth/t.pixelsPerMeter/2)).setFrictionCombineRule(LY.CoefficientCombineRule.Average).setRestitutionCombineRule(LY.CoefficientCombineRule.Average).setDensity(d.physics.density).setFriction(d.physics.friction).setRestitution(d.physics.restitution);var M=t.sharedGameControlGlobals.rapierWorld.createCollider(k,A);t.sharedGameControlGlobals.colliderToEntity.set(M.handle,l),bY.fromArray(u.collider.position).multiply(wY.setFromMatrixScale(l.matrixWorld)).divideScalar(t.pixelsPerMeter),M.setTranslationWrtParent(bY);var C=(new If).setFromEuler((new xp).setFromVector3((new Rf).fromArray(u.collider.rotation)));M.setRotationWrtParent(C),M.setActiveEvents(LY.ActiveEvents.COLLISION_EVENTS),t.generateSensorColliderDescs(l,!0)}else"dynamic"===d.physics.rigidBody||v||y||g||L||m?(t.addRigidBody(e,l,{hasFollow:y,hasTransformAnim:v,hasDrag:L}),t.generateSensorColliderDescs(l,d.physics.fusedBody)):(_&&n.push(gq(_,e.matrixWorld)),d.physics.fusedBody&&e.traverseObject((function(e,t){var i;if(0!==t){var r;if(e instanceof iU){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;r=e.object}else if(e instanceof BO)r=e.object;else if(null!==(i=(r=e).dataPatched.cloner)&&void 0!==i&&i.hideBase)return!0;var a=r.dataPatched;if("visibility"===a.physics.enabled?!a.visible:!a.physics.enabled)return!0;var o=e.geometry;void 0!==(null===o||void 0===o?void 0:o.getAttribute("position"))&&n.push(gq(o,e.matrixWorld))}})),t.generateSensorColliderDescs(l,d.physics.fusedBody,i));return!(!0!==(null===(s=d.physics)||void 0===s?void 0:s.fusedBody)&&!u)||void 0})),0!==n.length){var r=$P(n);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);var a=LY.RigidBodyDesc.fixed(),s=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a),l=LY.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(LY.CoefficientCombineRule.Multiply).setRestitutionCombineRule(LY.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(l,s);for(var u=0,c=i;u<c.length;u++){var d=o(c[u],2),h=d[0],f=d[1],p=this.sharedGameControlGlobals.rapierWorld.createCollider(h,s);this.sensorToTriggerEvent[p.handle]=f}}}},{key:"updatePositions",value:function(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}},{key:"rebuildBVH",value:function(){var e=this;this.usePhysics?(null===this.gameControl||this.needsCollisionDetection)&&this.initPhysics():(this.page.traverseEntity((function(t){var n,i=(0,x.Z)(t.dataPatched.events);try{for(i.s();!(n=i.n()).done;){var r=n.value;if("Trigger"===r.data.type&&!0!==r.data.disabled){var a=new yY(r.id,r.data,t,e.page,e.sharedAssets,e.eventManager),o=(new dp).compose(kY.fromArray(r.data.position),CY.setFromEuler(SY.fromArray(r.data.rotation)),MY);if("box"===r.data.triggerZone){var s=new zf;s.min.fromArray(r.data.size).multiplyScalar(-.5),s.max.fromArray(r.data.size).multiplyScalar(.5),e.sharedGameControlGlobals.triggers.push([s,o,t,a])}else e.sharedGameControlGlobals.triggers.push([r.data.radius,o,t,a])}}}catch(l){i.e(l)}finally{i.f()}})),this.needsCollisionDetection&&this.initBVH())}},{key:"disconnectEvents",value:function(){this.collisionEvents.forEach((function(e){return e.disconnect()})),this.sharedGameControlGlobals.triggers.forEach((function(e){return e[3].disconnect()})),this.sharedGameControlGlobals.triggers.length=0}},{key:"deactivate",value:function(){var e,t,n,i;this.page.traverse((function(e){var t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)})),null!==(e=this.sharedGameControlGlobals.rapierWorld)&&void 0!==e&&e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),null!==(t=this.gameControl)&&void 0!==t&&t.reset(),null!==(n=this.gameControl)&&void 0!==n&&n.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach((function(e){var t=o(e,2),n=t[0],i=t[1];null!==n&&void 0!==n&&n.destroy(),i.remove()})),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),null!==(i=this.navigationMeshWrapper)&&void 0!==i&&i.dispose(),this.navigationMeshWrapper=void 0;for(var r=0,a=Object.values(this.sharedGameControlGlobals.entityToCollisionEvents);r<a.length;r++){a[r].forEach((function(e){return e.disconnect()}))}this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}},{key:"update",value:function(e,t,n){var i=!0;if(void 0!==this.orbitControls&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):2===this.initializationCounter&&this.gameControl&&(i=!this.gameControl.update(e,t,n)&&i),this.usePhysics){var r,a,o=(0,x.Z)(this.sharedGameControlGlobals.entitiesWithTransformAnim);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(bY,xY,wY),_Y.setFromQuaternion(xY);var l=s;void 0===l.prevR?(l.prevR=_Y.clone(),l.prevT=bY.clone()):(l.prevR.copy(_Y),l.prevT.copy(bY)),s.rigidBody.setNextKinematicTranslation(bY.divideScalar(this.pixelsPerMeter)),s.rigidBody.setNextKinematicRotation(xY)}}catch(u){o.e(u)}finally{o.f()}this.sharedGameControlGlobals.rapierWorld.step(this.events),null!==(r=this.events)&&void 0!==r&&r.drainCollisionEvents(this.handleCollisionEvents),i=!this.updatePositions()&&i}return i}},{key:"dispatchCollisionEvent",value:function(e,t,n){var i,r,a=(null===(i=this.sharedGameControlGlobals.rapierWorld)||void 0===i?void 0:i.getCollider(n))._parent;if(t.cloner){var o,s=(0,x.Z)(t.cloner.children);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.rigidBody===a){r=l;break}}}catch(u){s.e(u)}finally{s.f()}}e.dispatch(r),t.dispatchEvent(DY)}},{key:"updateUseWindowEvents",value:function(e){var t;null===(t=this.orbitControls)||void 0===t||t.updateUseWindowEvents(e)}},{key:"generateSensorColliderDescs",value:function(e,t,n){var i=this,r=TY.copy(e.matrixWorld).invert();e.traverseEntity((function(a,o){if(!1===t&&1===o)return!0;var s,l=(0,x.Z)(a.dataPatched.events);try{for(l.s();!(s=l.n()).done;){var c=s.value;if("Trigger"===c.data.type&&!0!==c.data.disabled){var d,h=new yY(c.id,c.data,a,i.page,i.sharedAssets,i.eventManager),f=void 0;if(f="box"===c.data.triggerZone?(d=LY.ColliderDesc).cuboid.apply(d,u(c.data.size.map((function(e){return e/(2*i.pixelsPerMeter)})))):LY.ColliderDesc.ball(c.data.radius/i.pixelsPerMeter),f.setDensity(0).setSensor(!0).setActiveEvents(LY.ActiveEvents.COLLISION_EVENTS),kY.fromArray(c.data.position),CY.setFromEuler(SY.fromArray(c.data.rotation)),EY.compose(kY,CY,MY).premultiply(a.matrixWorld),n?(EY.decompose(kY,CY,AY),f.setActiveCollisionTypes(LY.ActiveCollisionTypes.KINEMATIC_FIXED|LY.ActiveCollisionTypes.DYNAMIC_FIXED)):(EY.premultiply(r).decompose(kY,CY,AY),e.rigidBody.bodyType()===LY.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===LY.RigidBodyType.Fixed?f.setActiveCollisionTypes(LY.ActiveCollisionTypes.KINEMATIC_FIXED|LY.ActiveCollisionTypes.DYNAMIC_FIXED):f.setActiveCollisionTypes(LY.ActiveCollisionTypes.KINEMATIC_KINEMATIC|LY.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),kY.divideScalar(i.pixelsPerMeter),f.setTranslation(kY.x,kY.y,kY.z),f.setRotation(CY),n)n.push([f,h]);else{var p=i.sharedGameControlGlobals.rapierWorld.createCollider(f,e.rigidBody);i.sensorToTriggerEvent[p.handle]=h}}}}catch(v){l.e(v)}finally{l.f()}}))}}]),e}();function NY(e){var t,n=this._clip.duration,i=null!==(t=this._clip.start)&&void 0!==t?t:0,r=this.loop,a=this.time+e,o=this._loopCount,s=r===_h;if(0===e)return-1===o?a:s&&1===(1&o)?n-(a-i):a;if(2200===r){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),a>=n||a<i){var l=Math.floor((a-i)/(n-i));a-=(n-i)*l,o+=Math.abs(l);var u=this.repetitions-o;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s||(a=e>0?n:i,1===this.repetitions&&(a=n)),this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===u){var c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=a;if(s&&1===(1&o))return n-(a-i)}return a}var zY,FY=!1,jY=function(){function e(t,n,i,r){var a=this;(0,c.Z)(this,e),this.scene=t,this.requestRender=n,this.updateDisplayProgress=i,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=function(e){"Empty"===e.data.type&&e.data.animations&&e.data.animations.forEach((function(t,n){var i=t[0]+"/";if(Array.isArray(e.identity)?i+=e.identity[0]:i+=e.uuid,!a.clipIdToAction[i]){var r=gb.parse(JSON.parse(t[2]));e.animations[n]=r;var o=a.mixer.clipAction(r,e);!1===FY&&(Object.getPrototypeOf(o)._updateTime=NY,FY=!0),o.clampWhenFinished=!0,a.clipIdToAction[i]=o}}))},this.mixer=new ox(t),this.scene.traverseEntity(this.addClip)}return(0,d.Z)(e,[{key:"deleteClip",value:function(e,t){var n=this.scene.find(t);if(n){var i=n.animations.find((function(t){return t.uuid===e}));if(i){var r=this.clipIdToAction[e];!r||(r.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],n.animations=n.animations.filter((function(t){return t.uuid!==e})))}}}},{key:"isPlaying",get:function(){return Object.values(this.clipIdToAction).some((function(e){return e.isRunning()}))}},{key:"playFromInspector",value:function(e){this.mixer.stopAllAction();var t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}},{key:"onExitPlayMode",value:function(){Object.values(this.clipIdToAction).forEach((function(e){e.repetitions=1/0,e.loop=2201})),this.mixer.stopAllAction(),this.requestRender()}},{key:"play",value:function(e){var t=e.clipId+"/"+e.object,n=this.clipIdToAction[t];if(n)return e&&(e.repeat>=0&&(n.repetitions=e.repeat+1),"pingpong"===e.direction&&0!==e.repeat&&(n.loop=_h)),n.play(),n.paused=!1,this.requestRender(),n}},{key:"resumeFromInspector",value:function(e){var t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}},{key:"pauseFromInspector",value:function(e){var t=this.clipIdToAction[e];!t||(t.paused=!0)}},{key:"stop",value:function(){this.mixer.stopAllAction(),this.requestRender()}},{key:"update",value:function(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(!1===this.isPlaying||null!==(t=this.animationInspectorState)&&void 0!==t&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}},{key:"maxFrames",get:function(){var e,t;return null!==(e=null===(t=this.activeClip)||void 0===t||null===(t=t.tracks[0])||void 0===t?void 0:t.times.length)&&void 0!==e?e:0}},{key:"setProgressFromInspector",value:function(e,t){if(this.clipIdToAction[t]){this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);var n=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),n&&(this.clipIdToAction[t].paused=!0)}}}]),e}(),UY=new WeakMap,ZY=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return(0,d.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,i){var r=this,a=new kb(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){r.decodeDracoFile(e,t).catch(i)}),n,i)}},{key:"decodeDracoFile",value:function(e,t,n,i){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,r).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this,i=JSON.stringify(t);if(UY.has(e)){var r=UY.get(e);if(r.key===i)return r.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var a,o=this.workerNextTaskID++,s=e.byteLength,l=this._getWorker(o,s).then((function(n){return a=n,new Promise((function(n,i){a._callbacks[o]={resolve:n,reject:i},a.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return l.catch((function(){return!0})).then((function(){a&&o&&n._releaseTask(a,o)})),UY.set(e,{key:i,promise:l}),l}},{key:"_createGeometry",value:function(e){var t=new cv;e.index&&t.setIndex(new $p(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],r=i.name,a=i.array,o=i.itemSize;t.setAttribute(r,new $p(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new kb(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,i){n.load(e,t,void 0,i)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var i=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var r=VY.toString(),a=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var i=new Worker(n.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:n.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(i)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=n.workerPool[n.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}]),n}(wb);function VY(){var e,t;function n(e,t,n,i,r,a){var o=a.num_components(),s=n.num_points()*o,l=s*r.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);var d=new r(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:i,array:d,itemSize:o}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=r.buffer,o=r.taskConfig;t.then((function(e){var t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var l=function(e,t,i,r){var a,o,s=r.attributeIDs,l=r.attributeTypes,u=t.GetEncodedGeometryType(i);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(i,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(i,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var d in s){var h=self[l[d]],f=void 0,p=void 0;if(r.useUniqueIDs)p=s[d],f=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[d]])))continue;f=t.GetAttribute(a,p)}c.attributes.push(n(e,t,a,d,h,f))}return u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var i=3*n.num_faces(),r=4*i,a=e._malloc(r);t.GetTrianglesUInt32Array(n,r,a);var o=new Uint32Array(e.HEAPF32.buffer,a,i).slice();return e._free(a),{array:o,itemSize:1}}(e,t,a)),e.destroy(a),c}(t,i,s,o),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},u)}catch(l){console.error(l),self.postMessage({type:"error",id:r.id,error:l.message})}finally{t.destroy(s),t.destroy(i)}}))}}}function GY(e){return HY.apply(this,arguments)}function HY(){return HY=(0,ju.Z)((0,Fu.Z)().mark((function e(t){var n,i;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zY){e.next=13;break}return n={attributeIDs:zY.defaultAttributeIDs,attributeTypes:zY.defaultAttributeTypes,useUniqueIDs:!1},e.prev=2,e.next=5,zY.decodeGeometry(new Int8Array(t).buffer,n);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(!i){e.next=13;break}return e.abrupt("return",{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map((function(e){var t=o(e,2),n=t[0],i=t[1];return{name:n,itemSize:i.itemSize,array:i.array}}))});case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,8]])}))),HY.apply(this,arguments)}function WY(e,t){return qY.apply(this,arguments)}function qY(){return qY=(0,ju.Z)((0,Fu.Z)().mark((function e(t,n){var i,r,a,s,l,u,c,d;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=kC(qE.deserialize(new Uint8Array(t))),r=o(i,2),a=r[0],s=r[1],JP(a),l=[],a.scene.objects.traverse((function(e,t){"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&void 0!==t.geometry.data.draco&&l.push(t)})),e.t0=l.length,!e.t0){e.next=8;break}return e.next=8,zY||(zY=new ZY).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),zY.decoderPending;case 8:u=(0,Fu.Z)().mark((function e(){var t,n,i;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d[c],e.next=3,GY(MC(t.geometry.data.draco));case 3:(n=e.sent)&&(n.index&&(t.geometry.data.index={array:n.index.array,itemSize:1,normalized:!1,type:"Uint32Array"}),i={},n.attributes.forEach((function(e){var t=e.name,n=e.array,r=e.itemSize;i[t]={array:n,itemSize:r,type:"Float32Array",normalized:!1}})),t.geometry.data.attributes=i,t.geometry.data.draco=void 0);case 5:case"end":return e.stop()}}),e)})),c=0,d=l;case 10:if(!(c<d.length)){e.next=15;break}return e.delegateYield(u(),"t1",12);case 12:c++,e.next=10;break;case 15:return e.abrupt("return",(n&&n(a),s.result().data));case 16:case"end":return e.stop()}}),e)}))),qY.apply(this,arguments)}var XY=Object.keys(Pq).filter((function(e){return isNaN(Number(e))})),YY=function(){function e(t,n,i,r){var a=this;(0,c.Z)(this,e),this.publish=t,this.controlsManager=n,this.animationControls=i,this.eventContext=r,this.isEnable=!1,this._isPaused=!1,this.activateCount=0,this.onResetRaycaster=function(){a.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=function(e){(e.touches.length>1||a.preventTouchScroll)&&e.preventDefault()},this.onMouseWheelPreventScroll=function(e){a.preventScroll&&e.preventDefault()},this.stopRaycast=t.stopRaycast,this.preventScroll=t.preventScroll,this.preventTouchScroll=t.preventTouchScroll,this.hideCursor=t.hideCursor,this.requestRender=r.requestRender}return(0,d.Z)(e,[{key:"activate",value:function(){var e,t=this;if(this.handlers=(Ke(e={Spline:new Bq(this.eventContext)},"Conditional",new Gq(this.eventContext,this)),Ke(e,"Start",new WX(this.eventContext,this)),Ke(e,"Basic",new zq(this.eventContext,this)),Ke(e,"MouseHover",new UX(this.eventContext,this)),Ke(e,"Scroll",new GX(this.eventContext,this)),Ke(e,"Follow",new LX(this.eventContext,this)),Ke(e,"DragDrop",new lX(this.eventContext,this)),Ke(e,"LookAt",new OX(this.eventContext)),e),!this.isPaused){var n=this.eventContext,i=n.page,r=n.domElement,a=n.eventElement;this.hideCursor&&(r.style.cursor="none"),this.isEnable=!0,i.traverseEntity((function(e){e.addEventListener("requestRender",t.requestRender)})),Object.values(this.handlers).forEach((function(e){return e.connect()})),XY.forEach((function(e){(Object.values(t.handlers).some((function(t){return t.domEventsNeeded.has(e)}))||"pointerdown"===e&&t.controlsManager.navigationMeshWrapper)&&(r.addEventListener(e,t.onResetRaycaster),a.addEventListener(e,t.onResetRaycaster))})),r.addEventListener("wheel",this.onMouseWheelPreventScroll),r.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}}},{key:"deactivate",value:function(){var e,t=this,n=this.eventContext,i=n.page,r=n.domElement;this.isEnable=!1,r.style.cursor="",Object.values(this.handlers).forEach((function(e){return e.disconnect()})),null!==(e=this.controlsManager.gameControl)&&void 0!==e&&e.disposeActions(),this.controlsManager.disconnectEvents(),i.traverseEntity((function(e){e.removeEventListener("requestRender",t.requestRender)})),XY.forEach((function(e){r.removeEventListener(e,t.onResetRaycaster)})),r.removeEventListener("touchmove",this.onTouchMovePreventScroll),r.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}},{key:"isPaused",get:function(){return this._isPaused}},{key:"pause",value:function(){this._isPaused=!0,this.deactivate()}},{key:"resume",value:function(){this._isPaused=!1,this.activate()}},{key:"reset",value:function(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}},{key:"updateUseWindowEvents",value:function(e){var t=this.isEnable;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}}]),e}(),QY=function(){function e(t,n,i,r,a){(0,c.Z)(this,e),this._aspect=1,this.enableResponsive=!1,this._renderer=t,this._camera=n,this._frameSize=(new af).copy(i),this._editorSize=(new af).copy(r),this._aspect=n.aspect,this._fov=null!==a&&void 0!==a?a:n.fov}return(0,d.Z)(e,[{key:"frameSize",set:function(e){this._frameSize.copy(e)}},{key:"updateRenderer",value:function(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}},{key:"updateViewport",value:function(){if(this._renderer&&this._camera&&"PerspectiveCamera"===this._camera.cameraType){var e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.y;this._aspect=e/t,t<=n&&(this._camera.zoom*=n/t),this._renderer.setViewport(0,0,e,t)}}},{key:"updateCamera",value:function(){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){var e=this._frameSize.y,t=this._editorSize.y,n=this._fov;if(e>t){var i=function(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i}(e,1080,2160,1,15)/100;n*=e/t,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}},{key:"setCamera",value:function(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}},{key:"revert",value:function(){var e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}}]),e}();var KY=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,e),this.shared=new oj(t.shared,n),this.scene=new aG(t.scene,this.sharedAssets)}return(0,d.Z)(e,[{key:"sharedAssets",get:function(){return this.shared}},{key:"reset",value:function(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}},{key:"resetPersonalCameraFromDocumentData",value:function(){var e,t=(0,x.Z)(this.scene.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n instanceof jV&&n.personalCamera.updateState(n.data.camera,{scene:this.scene,shared:this.shared})}}catch(i){t.e(i)}finally{t.f()}}},{key:"dispose",value:function(){this.scene.dispose(),this.shared.dispose()}},{key:"gc",value:function(){var e=this;this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity((function(t){t instanceof fj&&t.markGeometryAsReachable(e.shared)})),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}}]),e}(),JY=function(){function e(t){var n=t.x,i=void 0===n?10:n,r=t.y,a=void 0===r?10:r;(0,c.Z)(this,e),this._startTime=0;var o=document.getElementById("spe-perfs");o?this.element=o:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left="".concat(i,"px"),this.element.style.top="".concat(a,"px")}return(0,d.Z)(e,[{key:"dispose",value:function(){var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)}},{key:"start",value:function(){this._startTime=performance.now()}},{key:"end",value:function(){var e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}}]),e}();function $Y(e){var t;if(e.index)for(var n=0;n<e.index.array.length;n+=3)t=e.index.array[n],e.index.array[n]=e.index.array[n+2],e.index.array[n+2]=t}function eQ(e){return e instanceof yj?"SubdivObject":"NonParametricGeometry"===e.geometry.type?"NonParametric":"Mesh"}function tQ(e,t){for(var n=function(e,t){var n={};return e.traverseEntity((function(e){if(e.visible&&e instanceof yN&&"Mesh"===e.type&&!Array.isArray(e.material)&&(!e.states||!Object.keys(e.states).length)){for(var i=e.parent;i;){if(i instanceof yN&&e.states&&Object.keys(e.states).length)return;i=i.parent}var r=e.material.uuid,a=t.shared.materials[r];if(a){if(!WT.isMergable(a))return}else{var o,s=null===(o=t.scene.objects.get(e.uuid))||void 0===o?void 0:o.data;if(s&&"material"in s&&"string"!=typeof s.material){if(!WT.isMergable(s.material))return;r=WT.getHash(s.material)}}n[r]||(n[r]={});var l=n[r][eQ(e)];if(l){if(l.push(e),e.cloner){var u,c=(0,x.Z)(e.cloner.children);try{for(c.s();!(u=c.n()).done;){var d=u.value;l.push(d)}}catch(v){c.e(v)}finally{c.f()}}}else if(n[r][eQ(e)]=[e],e.cloner){var h,f=(0,x.Z)(e.cloner.children);try{for(f.s();!(h=f.n()).done;){var p=h.value;n[r][eQ(e)].push(p)}}catch(v){f.e(v)}finally{f.f()}}}})),n}(t,e),i=function(e){var t=0;return Object.values(e).forEach((function(e){Object.values(e).forEach((function(e){var n=e.length;n>t&&(t=n)}))})),t}(n),r=new Array(i),a=0,s=new Array(i),l=0,u=new Array(i),c=0,d=new Array(i),h=0,f=0,p=Object.entries(n);f<p.length;f++)for(var v=o(p[f],2),m=v[0],g=v[1],L=function(){var e=b[y];if(l=0,c=0,e.forEach((function(e){e instanceof yN&&(s[l++]=e.geometry.clone(),u[c++]=e)})),c<2)return 1;for(var i=0;i<c;i++)u[i].updateWorldMatrix(!0,!1),s[i].applyMatrix4(u[i].matrixWorld),u[i].matrixWorld.determinant()<0&&$Y(s[i]);var o=$P(s.slice(0,l),!1);if(o){var f;if("SubdivObject"===m)console.warn("Turning subdiv object into mesh"),f=new Sv(o,u[0].material);else f=new Sv(o,u[0].material);f.castShadow=u[0].castShadow,f.receiveShadow=u[0].receiveShadow,t.add(f);for(var p=function e(i){h=0;var r,a=(0,x.Z)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.children&&e(o.children),o instanceof yN&&(Array.isArray(o.material)||n[o.material.uuid]&&n[o.material.uuid][eQ(o)]&&n[o.material.uuid][eQ(o)].length>1||(d[h++]=o))}}catch(l){a.e(l)}finally{a.f()}for(var s=0;s<h;s++)t.attach(d[s])},v=0;v<c;v++){var g=u[v];p(g.children),r[a++]=g}}},y=0,b=Object.values(g);y<b.length;y++)L();for(var w=0;w<a;w++)r[w].removeFromParent()}var nQ=ac(dc(),1),iQ=new af;function rQ(e){var t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var aQ,oQ=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.renderOnDemand,a=i.renderMode,o=void 0===a?"auto":a;(0,c.Z)(this,e),this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=function(){n._skipRender=!1},this.requestRender=function(){n._renderRequested=!0},this.render=function(e){var t,i,r,a,o,s,l,u,c,d;if(n.time=e,n.dt=n.time-n._lastTime,n._lastTime=n.time,null!==(t=n._perfs)&&void 0!==t&&t.start(),n._renderer)if(n._isPaused||!("manual"===n.renderMode&&!n._renderRequested||"auto"===n.renderMode&&n._skipRender)){if(n._renderRequested=!1,n._skipRender=!0,n._controls&&(n._skipRender=n._controls.update(n.dt)),n._eventManager&&(null!==(i=n._eventManager.handlers)&&void 0!==i&&i.Start.hasVideoAction||null!==(r=n._eventManager.handlers)&&void 0!==r&&r.Basic.hasVideoAction||null!==(a=n._eventManager.handlers)&&void 0!==a&&a.Conditional.hasVideoAction)&&(n._skipRender=!1),null!==(o=n._animationControls)&&void 0!==o&&o.update(n.dt),n._skipRender?(n.currentTAAFrame++,n.currentTAAFrame<32?n._skipRender=!1:n.currentTAAFrame=0):n.currentTAAFrame=0,n._scene&&n._scene.activeCamera!==n._camera&&(n._camera=n._scene.activeCamera),n._eventManager&&(n._eventManager.isEnable||n._eventManager.activate(),(null===(s=n._eventManager.handlers)||void 0===s?void 0:s.Follow).onAnimationFrameDamping(),(null===(l=n._eventManager.handlers)||void 0===l?void 0:l.LookAt).onAnimationFrameDamping(),(null===(u=n._eventManager.handlers)||void 0===u?void 0:u.DragDrop).onAnimationFrameDamping()),n._scene&&n._camera){if(n._scene.pathConstraints.applyConstraints(n._scene),n._renderer.sceneTransitionTimeRemaining>0){n._renderer.sceneTransitionTimeRemaining-=n.dt;var h=1-n._renderer.sceneTransitionTimeRemaining/n._renderer.sceneTransitionDuration;n._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=h,n._skipRender=!1}else n._renderer.pipeline.sceneTransitionFromTexture=null;n._renderer.renderSplineScene(n._scene,n._camera)}n.canvas.dispatchEvent(n._renderedEvent),null===(c=n._perfs)||void 0===c||c.end()}else{var f;null===(f=n._perfs)||void 0===f||f.end()}else null===(d=n._perfs)||void 0===d||d.end()},this._resize=function(){var e,t,i;!n._renderer||(1===n._viewportMode&&n._frameView&&(n._frameView.frameSize=iQ.set(n._viewportWidth,n._viewportHeight)),n._renderer.setSize(n._viewportWidth,n._viewportHeight,!1),n._camera=null===(e=n._scene)||void 0===e?void 0:e.activeCamera,n._camera&&(null!==(t=n._frameView)&&void 0!==t&&t.setCamera(n._camera),null!==(i=n._frameView)&&void 0!==i&&i.updateCamera(),"PerspectiveCamera"===n._camera.cameraType&&(n._camera.aspect=n._viewportWidth/n._viewportHeight),n._camera.updateProjectionMatrix()),n._requestRenderAutoMode())},this._debouncedResize=JA(this._resize,10),this.canvas=t,this.renderMode=r?"auto":o,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new JY({x:10,y:10})),function(e){e.addEventListener("pointerdown",kM,!0),e.addEventListener("pointerdown",MM,!0),e.addEventListener("pointermove",MM,!0),e.addEventListener("pointerup",AM,!0),e.addEventListener("pointercancel",AM,!0),e.addEventListener("pointerleave",AM,!0),window.addEventListener("keydown",EM,!0),window.addEventListener("keyup",TM,!0)}(t)}return(0,d.Z)(e,[{key:"load",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t,n){var i;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rQ(t),this.disposed=!1,e.next=3,fetch(t,n);case 3:return e.next=5,e.sent.arrayBuffer();case 5:return i=e.sent,e.next=8,this.start(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,ju.Z)((0,Fu.Z)().mark((function e(t){var n,i,r,a,o,s,l,u,c,d,h,f,p,v=this,m=arguments;return(0,Fu.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(m.length>1&&void 0!==m[1]?m[1]:{}).interactive,o=void 0===a||a,!this.disposed){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,WY(t);case 5:return s=e.sent,this._data=s,s.version&&(0,nQ.default)(s.version,"0.9.418")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),e.next=10,Promise.all([kU(s)&&nN(),Lj(s)&&DB(),TP.physicsEnabled(s.scene.objects)&&zM(),Fj(s)&&qF(),$X(s)&&IM()].filter(Boolean));case 10:if(null!==(n=this._eventManager)&&void 0!==n&&n.deactivate(),null!==(i=this._controls)&&void 0!==i&&i.deactivate(),null===(r=this._scene)||void 0===r||r.dispose(),(l=new KY(s)).resetPersonalCameraFromDocumentData(),this._scene=l.scene,this._sharedAssetsManager=l.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")&&(u=performance.now(),tQ(s,l.scene),c=performance.now(),console.log("Merged geometries in ",c-u," ms")),kU(s)&&this._scene.traverse((function(e){TU(e)&&e.recomputeBoolean()})),this._sharedAssetsManager.setRequestRender((function(){var e;v._requestRenderAutoMode(),null===(e=v._scene)||void 0===e||e.traverse((function(e){e instanceof iU&&e.pendingMediaLoad&&e.update()}))})),d=Object.keys(s.shared.fonts).map((function(e){return v._sharedAssetsManager.getFont(e).loadingPromise})),Promise.all(d).then((function(){l.scene.markNeedsUpdateRendererDirty(),v._requestRenderAutoMode()})),e.t0=Fj(s)&&IY(s),!e.t0){e.next=22;break}return e.next=22,Promise.all(d);case 22:if(this._scene.rewriteEventsBeforeGoToPlayMode(),LW(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new TV({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=!0===s.scene.publish.hdTransmission,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),void 0!==s.scene.blueNoiseTextureData&&this._renderer.pipeline.updateBlueNoiseTexture(s.scene.blueNoiseTextureData),!this._frameView){e.next=30;break}this._frameView.setCamera(this._camera),e.next=32;break;case 30:"fullscreen"===(f=Object.values(s.frames)[0]).preset?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=f.size[0],this._viewportHeight=f.size[1],this.canvas.style.width="".concat(this._viewportWidth,"px"),this.canvas.style.height="".concat(this._viewportHeight,"px")),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new QY(this._renderer,this._camera,new af(this._viewportWidth,this._viewportHeight),new af(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=null!==(h=f.allowResponsive)&&void 0!==h&&h&&"fullscreen"===f.preset;case 32:o&&(p=new Tq(this._renderer,this.data.scene.publish,this._scene,(function(){return v._scene.activeCamera}),this._sharedAssetsManager,this._requestRenderAutoMode,!0),this._scene.updateMatrixWorld(!0),this._controls=new BY(p),this._animationControls=new jY(this._scene,this._requestRenderAutoMode),this._eventManager=new YY(s.scene.publish,this._controls,this._animationControls,p),this._controls.activate(this._eventManager)),this._resize(),0===this.dt&&(this.render(performance.now()),this._renderer.setAnimationLoop(this.render)),this._resizeObserverTimeout=setTimeout((function(){!v._resizeObserver&&v.canvas.parentElement&&(v._resizeObserver=new ResizeObserver((function(){v._viewportWidth=v.canvas.clientWidth,v._viewportHeight=v.canvas.clientHeight,v._debouncedResize()})),v._resizeObserver.observe(v.canvas.parentElement))}),300);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findObjectById",value:function(e){var t,n=null===(t=this._scene)||void 0===t?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(n)}},{key:"findObjectByName",value:function(e){var t,n=null===(t=this._scene)||void 0===t?void 0:t.getObjectByName(e);return this._createProxyObject(n)}},{key:"getAllObjects",value:function(){var e,t=this,n=[];return null!==(e=this._scene)&&void 0!==e&&e.traverseEntity((function(e){if(e.uuid!==MT&&!(e instanceof jV)){var i=t._createProxyObject(e);i&&n.push(i)}})),n}},{key:"getSplineEvents",value:function(){var e;return(null===(e=this._eventManager)||void 0===e?void 0:e.handlers.Spline).splineEvents}},{key:"emitEvent",value:function(e,t){var n;null===(n=this.findObjectById(t)||this.findObjectByName(t))||void 0===n||n.emitEvent(e)}},{key:"emitEventReverse",value:function(e,t){var n;null===(n=this.findObjectById(t)||this.findObjectByName(t))||void 0===n||n.emitEventReverse(e)}},{key:"addEventListener",value:function(e,t){this.canvas.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.canvas.removeEventListener(e,t)}},{key:"setZoom",value:function(e){var t,n;(null===(t=this._controls)||void 0===t?void 0:t.orbitControls)instanceof vY&&(null===(n=this._controls)||void 0===n||n.orbitControls.zoomOut(e))}},{key:"eventManager",get:function(){return this._eventManager}},{key:"controls",get:function(){return this._controls}},{key:"setSize",value:function(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}},{key:"setBackgroundColor",value:function(e){var t,n=new CN(0,0,0,1);try{n.setStyle(e)}catch(i){console.error("This is not a valid css color",e)}null!==(t=this._scene)&&void 0!==t&&t.activePage.setBackgroundColor(n),this._requestRenderAutoMode()}},{key:"dispose",value:function(){var e,t,n,i,r,a,o;this.disposed=!0,null!==(e=this._eventManager)&&void 0!==e&&e.deactivate(),null!==(t=this._scene)&&void 0!==t&&t.dispose(),null!==(n=this._sharedAssetsManager)&&void 0!==n&&n.dispose(),this._proxyObjectCache.forEach((function(e){hw.unsubscribe(e)})),null!==(i=this._renderer)&&void 0!==i&&i.setAnimationLoop(null),null!==(r=this._renderer)&&void 0!==r&&r.dispose(),this._renderer=void 0,null!==(a=this._sharedAssetsManager)&&void 0!==a&&a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),void 0!==this._resizeObserverTimeout&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),null!==(o=this._controls)&&void 0!==o&&o.deactivate(),function(e){e.removeEventListener("pointerdown",kM,!0),e.removeEventListener("pointerdown",MM,!0),e.removeEventListener("pointermove",MM,!0),e.removeEventListener("pointerup",AM,!0),e.removeEventListener("pointercancel",AM,!0),e.removeEventListener("pointerleave",AM,!0),window.removeEventListener("keydown",EM,!0),window.removeEventListener("keyup",TM,!0)}(this.canvas)}},{key:"isStopped",get:function(){return this._isPaused}},{key:"stop",value:function(){var e,t,n;this._isPaused||(null!==(e=this._renderer)&&void 0!==e&&e.setAnimationLoop(null),this._isPaused=!0,null!==(t=this._eventManager)&&void 0!==t&&t.pause(),(null===(n=this._controls)||void 0===n?void 0:n.orbitControls)&&(this._controls.orbitControls.enabled=!1))}},{key:"play",value:function(){var e,t,n;!this._isPaused||(this._isPaused=!1,null!==(e=this._eventManager)&&void 0!==e&&e.resume(),null!==(t=this._controls)&&void 0!==t&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),null===(n=this._renderer)||void 0===n||n.setAnimationLoop(this.render))}},{key:"setGlobalEvents",value:function(e){var t;null===(t=this._eventManager)||void 0===t||t.updateUseWindowEvents(e)}},{key:"data",get:function(){return this._data}},{key:"_createProxyObject",value:function(e){var t,n=this;if(null!=e){if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);var i;e.traverseAncestors((function(e){e instanceof jV&&(i=e.name)}));var r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:i,parentUuid:e.parent instanceof jV||e instanceof aG||null===(t=e.parent)||void 0===t?void 0:t.uuid,emitEvent:function(t){e.dispatchEvent({type:"userEvent",eventName:t})},emitEventReverse:function(t){e.dispatchEvent({type:"userEvent",eventName:t,reverse:!0})}},a=hw(r,(function(t,i){var r;"object"!=typeof e[t]&&null!==(r=Object.getOwnPropertyDescriptor(e,t))&&void 0!==r&&r.writable&&(e[t]=i),n._requestRenderAutoMode(),e.updateMatrix()}));return this._proxyObjectCache.set(e.uuid,a),a}}}]),e}(),sQ=["className","children","debounceTime","ignoreDimensions","parentSizeStyles","enableDebounceLeadingCall","resizeObserverPolyfill"],lQ=["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","renderOnDemand"],uQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cQ={},dQ={get exports(){return cQ},set exports(e){cQ=e}},hQ={};!function(t){t.exports=function(){if(aQ)return hQ;aQ=1;var t=e,n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,i){var s,l={},u=null,c=null;for(s in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)r.call(t,s)&&!o.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:n,type:e,key:u,ref:c,props:l,_owner:a.current}}return hQ.Fragment=i,hQ.jsx=s,hQ.jsxs=s,hQ}()}(dQ);var fQ=cQ.jsx,pQ=NaN,vQ="[object Symbol]",mQ=/^\s+|\s+$/g,gQ=/^[-+]0x[0-9a-f]+$/i,LQ=/^0b[01]+$/i,yQ=/^0o[0-7]+$/i,bQ=parseInt,xQ="object"==typeof uQ&&uQ&&uQ.Object===Object&&uQ,wQ="object"==typeof self&&self&&self.Object===Object&&self,_Q=xQ||wQ||Function("return this")(),SQ=Object.prototype.toString,kQ=Math.max,AQ=Math.min,MQ=function(){return _Q.Date.now()};function CQ(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function EQ(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&SQ.call(e)==vQ}(e))return pQ;if(CQ(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=CQ(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mQ,"");var n=LQ.test(e);return n||yQ.test(e)?bQ(e.slice(2),n?2:8):gQ.test(e)?pQ:+e}var TQ=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=MQ();if(p(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?AQ(n,a-(e-u)):n}(e))}function m(e){return s=void 0,h&&i?f(e):(i=r=void 0,o)}function g(){var e=MQ(),n=p(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?f(e):o}(l);if(d)return s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=EQ(t)||0,CQ(n)&&(c=!!n.leading,a=(d="maxWait"in n)?kQ(EQ(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},g.flush=function(){return void 0===s?o:m(MQ())},g};function PQ(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}var DQ=[],OQ={width:"100%",height:"100%"},IQ=(0,e.forwardRef)((function(t,n){var i=t.className,r=t.children,a=t.debounceTime,s=void 0===a?300:a,l=t.ignoreDimensions,u=void 0===l?DQ:l,c=t.parentSizeStyles,d=t.enableDebounceLeadingCall,h=void 0===d||d,f=t.resizeObserverPolyfill,p=Li(t,sQ),v=(0,e.useRef)(null),m=(0,e.useRef)(0),g=o((0,e.useState)({width:0,height:0,top:0,left:0}),2),L=g[0],y=g[1],b=(0,e.useMemo)((function(){var e=Array.isArray(u)?u:[u];return TQ((function(t){y((function(n){return Object.keys(n).filter((function(e){return n[e]!==t[e]})).every((function(t){return e.includes(t)}))?n:t}))}),s,{leading:h})}),[s,h,u]);return(0,e.useEffect)((function(){var e=new(f||window.ResizeObserver)((function(e){e.forEach((function(e){var t,n=null!==(t=null==e?void 0:e.contentRect)&&void 0!==t?t:{},i=n.left,r=n.top,a=n.width,o=n.height;m.current=window.requestAnimationFrame((function(){b({width:a,height:o,top:r,left:i})}))}))}));return v.current&&e.observe(v.current),function(){window.cancelAnimationFrame(m.current),e.disconnect(),b.cancel()}}),[b,f]),fQ("div",$e($e({style:$e($e({},OQ),c),ref:PQ([n,v]),className:i},p),{},{children:r($e($e({},L),{},{ref:v.current,resize:b}))}))})),RQ=(0,e.forwardRef)((function(t,n){var i=t.scene,r=t.style,a=t.onMouseDown,s=t.onMouseUp,l=t.onMouseHover,u=t.onKeyDown,c=t.onKeyUp,d=t.onStart,h=t.onLookAt,f=t.onFollow,p=t.onWheel,v=t.onLoad,m=t.renderOnDemand,g=void 0===m||m,L=Li(t,lQ),y=(0,e.useRef)(null),b=o((0,e.useState)(!0),2),w=b[0],_=b[1];return(0,e.useEffect)((function(){var e;_(!0);var t=[{name:"mouseDown",cb:a},{name:"mouseUp",cb:s},{name:"mouseHover",cb:l},{name:"keyDown",cb:u},{name:"keyUp",cb:c},{name:"start",cb:d},{name:"lookAt",cb:h},{name:"follow",cb:f},{name:"scroll",cb:p}];if(y.current){var n=function(){var n=(0,ju.Z)((0,Fu.Z)().mark((function n(){var r,a,o;return(0,Fu.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.load(i);case 2:r=(0,x.Z)(t);try{for(r.s();!(a=r.n()).done;)(o=a.value).cb&&e.addEventListener(o.name,o.cb)}catch(s){r.e(s)}finally{r.f()}_(!1),null==v||v(e);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e=new oQ(y.current,{renderOnDemand:g}),n()}return function(){for(var n=0,i=t;n<i.length;n++){var r=i[n];r.cb&&e.removeEventListener(r.name,r.cb)}e.dispose()}}),[i]),fQ(IQ,$e($e({ref:n,parentSizeStyles:r,debounceTime:50},L),{},{children:function(){return fQ("canvas",{ref:y,style:{display:w?"none":"block"}})}}))})),BQ=function(){return(0,We.jsxs)("div",{id:"HeroSection",className:"RowSection SectionWidth HeroRowSection",children:[(0,We.jsx)(zu,{}),(0,We.jsx)(RQ,{scene:"https://prod.spline.design/TimDkEBrjFXIB-eP/scene.splinecode"})]})},NQ=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsx)(We.Fragment,{children:(0,We.jsxs)(Pu.h3,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.1},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"Title MainFont",children:[t("firstSection.Beyond the digital"),(0,We.jsx)("br",{}),t("firstSection.Human connection")]})})},zQ=function(){var e=Jt().t;return(0,We.jsx)(We.Fragment,{children:(0,We.jsx)("h3",{className:"SubTitle SubFont",children:e("What we can help")})})},FQ=function(){var e=Jt().t;return(0,We.jsxs)("div",{className:"TitleDescGroup",children:[(0,We.jsxs)("div",{className:"TitleSubtitleGroup",children:[(0,We.jsx)(zQ,{}),(0,We.jsx)(NQ,{})]}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:e("firstSection.description")})]})},jQ=function(){var t=o((0,e.useState)(!1),2),n=t[0],i=t[1],r=o((0,e.useState)(!1),2),a=r[0],s=r[1],l=o((0,e.useState)(!1),2),u=l[0],c=l[1],d=o((0,e.useState)(!1),2),h=d[0],f=d[1],p=o((0,e.useState)(!1),2),v=p[0],m=p[1],g=o((0,e.useState)(!1),2),L=g[0],y=g[1],b=o((0,e.useState)(!1),2),x=b[0],w=b[1],_=o((0,e.useState)(!1),2),S=_[0],k=_[1],A=Jt().t;return(0,We.jsx)("div",{className:"ListWidth",children:(0,We.jsxs)("ul",{className:"ListCol",children:[(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return i(!n)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:n?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Analytics and Reporting.title")})}),n&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Analytics and Reporting.description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return s(!a)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:a?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.E-commerce Solutions.title")})}),a&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.E-commerce Solutions.description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return c(!u)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:u?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Email Marketing.title")})}),u&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Email Marketing.description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return f(!h)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:h?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Pay-Per-Click Advertising (PPC).title")})}),h&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Pay-Per-Click Advertising (PPC).description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return m(!v)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:v?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Content Marketing.title")})}),v&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Content Marketing.description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return y(!L)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:L?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Search Engine Optimization (SEO).title")})}),L&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Search Engine Optimization (SEO).description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return w(!x)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:x?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Website Design and Development.title")})}),x&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Website Design and Development.description")})})})]}),(0,We.jsxs)("li",{className:"ListCol",onClick:function(){return k(!S)},children:[(0,We.jsx)(Pu.div,{whileHover:{borderLeft:"1px solid #01FFA4"},className:S?"ListDeco":"ListDefault",children:(0,We.jsx)(Pu.span,{initial:{color:"#fff"},whileHover:{color:"#c2c0ba"},className:"MainFont ListTitle",children:A("firstSection.Marketing & Communication Strategy.title")})}),S&&(0,We.jsx)(Pu.ul,{initial:{y:0,visible:"hidden"},animate:{y:1,duration:1e3,ease:"easeInOut"},className:"ListCol",children:(0,We.jsx)("li",{className:"ListDescAlign",children:(0,We.jsx)("span",{className:"SubFont ListDescription",children:A("firstSection.Marketing & Communication Strategy.description")})})})]})]})})},UQ=function(){return(0,We.jsxs)("div",{id:"what_we_can_help",className:"FirstSection SectionWidth",children:[(0,We.jsx)(FQ,{}),(0,We.jsx)(jQ,{})]})},ZQ=function(){var e=Jt().t;return(0,We.jsx)(We.Fragment,{children:(0,We.jsx)("h3",{className:"SubTitle SubFont",children:e("We've worked with")})})},VQ=function(){return(0,We.jsx)("div",{className:"TitleSubtitleGroup",children:(0,We.jsx)(ZQ,{})})},GQ=function(){return(0,We.jsxs)("div",{className:"Relative",children:[(0,We.jsx)("div",{id:"weve_worked_with"}),(0,We.jsx)("div",{className:"SecondSection SectionWidth",children:(0,We.jsx)(VQ,{})})]})},HQ=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsx)(We.Fragment,{children:(0,We.jsxs)(Pu.h3,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.1},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"MainFont ThirdTitleGroup",children:[(0,We.jsx)("span",{className:"ThirdSmallTitle",children:t("thirdSection.We live in exciting times")}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{className:"Title",children:t("thirdSection.the whole world is meeting daily in a few platforms and spaces.")})]})})},WQ=function(){var e=Jt().t;return(0,We.jsx)(We.Fragment,{children:(0,We.jsx)("h3",{className:"SubTitle SubFont ThirdTitleGroup",children:e("Who we can help")})})},qQ=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsxs)("div",{className:"TitleDescGroupThird",children:[(0,We.jsxs)("div",{className:"TitleSubtitleGroup",children:[(0,We.jsx)(WQ,{}),(0,We.jsx)(HQ,{})]}),(0,We.jsxs)(Pu.div,{className:"DescGroupThird",ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.6},variants:{visible:{opacity:1},hidden:{opacity:0}},children:[(0,We.jsx)("p",{className:"SubFont SectionDescription ThirdTitleGroup",children:t("thirdSection.description1")}),(0,We.jsx)("p",{className:"SubFont SectionDescription ThirdTitleGroup",children:t("thirdSection.description2")}),(0,We.jsx)("p",{className:"SubFont SectionDescription ThirdTitleGroup",children:t("thirdSection.description3")})]})]})},XQ=function(){return(0,We.jsx)("div",{id:"who_we_can_help",className:"ThirdSection SectionWidth",children:(0,We.jsx)(qQ,{})})},YQ=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsx)(We.Fragment,{children:(0,We.jsxs)(Pu.h3,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.1},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"Title MainFont",children:[t("fourthSection.There was no such thing"),(0,We.jsx)("br",{}),t("fourthSection.as a Deep Bridge")]})})},QQ=function(){var e=Jt().t;return(0,We.jsx)(We.Fragment,{children:(0,We.jsx)("h3",{className:"SubTitle SubFont",children:e("Who we are")})})},KQ=function(){var t=Jt().t,n=(0,e.useRef)(null),i=Nu(n);return(0,We.jsx)("div",{className:"FlexEndAlignment",children:(0,We.jsxs)("div",{className:"TitleDescGroupFourth",children:[(0,We.jsxs)("div",{className:"TitleSubtitleGroup",children:[(0,We.jsx)(QQ,{}),(0,We.jsx)(YQ,{})]}),(0,We.jsx)(Pu.p,{ref:n,initial:"hidden",animate:i?"visible":"hidden",transition:{duration:.4,delay:.6},variants:{visible:{opacity:1},hidden:{opacity:0}},className:"SubFont SectionDescription TitleDescGroupFourth",children:t("fourthSection.description1")})]})})},JQ=function(){var t=(0,e.useRef)(null),n=Nu(t);return(0,We.jsx)("div",{ref:t,className:"ImageContainer",children:(0,We.jsxs)(Pu.svg,{style:{width:"100%",height:"100%",stroke:"#838786"},viewBox:"0 0 600 600",xmlns:"http://www.w3.org/2000/svg",children:[(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M560.499 153.46L565.084 154.773L567.157 155.497L569.188 156.34L571.224 157.351L573.223 158.541L575.19 159.958L577.082 161.584L579.183 163.794L579.998 164.769L580.747 165.762L582.561 168.592L583.278 169.872L583.972 171.28L585.291 174.533L586.397 178.073L587.197 181.878L587.734 185.914L587.947 190.12L587.891 194.489L587.54 198.913L586.947 203.406L585.185 212.181L583.001 220.227L580.863 226.943L579.123 231.923L577.827 235.399L576.828 238.133L576.004 240.862L575.671 242.316L575.412 243.829L575.236 245.423L575.176 247.082L575.269 248.822L575.523 250.622L576.004 252.59L576.684 254.677L577.675 257.064L578.933 259.684L582.371 265.616L586.674 271.954L591.14 278.05L595.036 283.445L598.057 288.192L599.145 290.316L600.005 292.393L600.482 293.997L600.75 295.214L600.926 296.38L601 297.578L600.972 298.859L600.852 300.13L600.482 302.021L599.954 303.907L598.52 307.793L596.748 312.331L594.906 317.935L593.296 324.793L592.116 332.611L591.14 340.954L589.867 349.442L588.021 357.889L585.837 366.295L583.944 374.765L582.806 383.313L582.288 391.724L581.71 399.556L581.127 403.082L580.326 406.29L579.655 408.094L578.781 409.953L577.86 411.57L577.096 412.65L575.893 414.054L574.565 415.357L573.552 416.19L572.159 417.156L570.743 418.018L568.749 419.052L566.695 419.968L562.465 421.649L558.268 423.284L554.335 424.952L551.157 426.46L548.801 427.75L546.904 428.993L545.095 430.424L543.281 432.073L541.453 433.923L539.704 435.86L537.997 437.928L536.331 440.12L534.476 442.726L532.241 445.97L529.747 449.638L527.281 453.296L525.134 456.486L523.505 458.9L522.33 460.646L521.367 462.085L520.386 463.575L519.345 465.202L518.225 467.02L517.11 468.965L516.018 471.116L515.033 473.494L514.575 474.856L514.144 476.342L513.408 479.804L512.867 483.992L512.599 488.634L512.631 493.305L512.909 497.665L513.33 501.82L513.718 505.729L513.825 507.675L513.82 509.57L513.626 511.684L513.501 512.404L513.302 513.179L512.872 514.423L512.478 515.288L512.155 515.867L511.747 516.468L511.164 517.175L510.419 517.922L509.66 518.564L509.258 518.856L508.781 519.166L507.939 519.621L506.394 520.287L505.325 520.665L504.265 520.975L501.503 521.526L498.449 521.936L491.98 522.501L488.737 522.861L485.706 523.326L482.564 524.118L481.398 524.492L480.371 524.879L479.066 525.494L477.636 526.319L476.345 527.198L475.614 527.804L474.531 528.88L473.611 529.937L472.634 531.313L471.783 532.73L470.265 535.532L469.409 536.98L468.437 538.411L467.151 539.924L466.563 540.53L465.892 541.149L464.222 542.462L462.306 543.737L460.095 544.972L457.638 546.207L452.27 548.667L446.815 551.228L441.85 553.825L437.727 556.19L434.497 558.085L431.666 559.652L428.746 561.092L425.701 562.4L422.407 563.694L419.015 565.01L415.457 566.441L411.783 567.986L407.79 569.676L403.287 571.467L397.952 573.38L391.585 575.408L384.325 577.494L376.418 579.545L368.089 581.376L359.542 582.871L351.056 584.169L343.019 585.659L339.303 586.602L335.884 587.632L332.788 588.798L329.989 590.015L327.555 591.241L325.288 592.507L321.197 595.031L317.098 597.496L315.053 598.549L312.966 599.455L310.569 600.253L309.616 600.499L308.672 600.695L306.96 600.923L305.66 601L304.364 600.995L302.629 600.863L301.329 600.667L300.042 600.403L297.932 599.802L295.859 599.036L293.8 598.12L291.764 597.1L287.845 594.881L283.894 592.562L279.817 590.425L277.522 589.432L275.051 588.521L272.252 587.696L269.179 586.976L265.797 586.425L262.132 586.033L258.333 585.873L254.368 585.91L250.402 586.17L246.576 586.584L239.431 587.778L233.375 589.104L228.192 590.316L225.948 590.776L223.81 591.113L221.302 591.304L220.59 591.309L219.826 591.272L218.429 591.099L217.267 590.849L216.768 590.708L216.208 590.516L215.116 590.051L213.82 589.373L212.497 588.548L210.507 587.04L208.425 585.213L206.32 583.076L204.14 580.67L200.018 575.626L196.293 570.97L194.539 568.929L192.841 567.111L191.189 565.598L189.495 564.291L188.2 563.484L187.131 562.928L185.983 562.427L184.753 562.012L183.568 561.712L182.286 561.47L180.311 561.265L178.265 561.201L174.138 561.384L169.909 561.766L165.902 562.049L163.972 562.076L162.172 562.008L160.395 561.78L159.697 561.639L158.98 561.447L157.966 561.087L157.152 560.709L156.735 560.482L156.287 560.204L155.671 559.748L155.009 559.16L154.561 558.695L154.14 558.208L153.168 556.837L152.233 555.265L150.285 551.346L148.268 547.018L146.181 543.077L144.783 541.004L144.358 540.452L143.895 539.91L142.979 538.981L142.192 538.315L141.313 537.691L140.508 537.236L139.541 536.794L138.916 536.566L138.282 536.365L137.292 536.128L136.117 535.946L134.858 535.832L132.975 535.81L130.99 535.905L126.904 536.37L122.652 537.022L118.515 537.627L114.596 538.015L112.805 538.065L111.14 538.015L109.613 537.828L108.905 537.691L108.234 537.518L107.484 537.254L106.846 536.962L106.42 536.725L106.031 536.461L105.647 536.142L105.286 535.787L104.962 535.404L104.75 535.103L104.541 534.757L104.333 534.333L104.125 533.773L103.926 533.08L103.792 532.379L103.676 530.83V529.071L104.023 524.715L104.662 519.822L105.277 515.065L105.494 512.746L105.596 510.44L105.545 508.149L105.305 505.898L104.87 503.866L104.532 502.745L104.083 501.597L103.463 500.353L102.774 499.237L102.316 498.599L101.76 497.925L100.974 497.109L99.9789 496.243L99.2062 495.665L98.4011 495.132L97.2397 494.471L95.8377 493.824L94.3107 493.232L92.1221 492.576L89.9427 492.093L87.7957 491.737L85.6904 491.487L81.6463 491.177L77.5651 490.972L73.1786 490.739L68.6949 490.425L64.5351 490.02L60.9075 489.5L59.2371 489.158L57.5898 488.721L55.9333 488.161L54.2953 487.459L52.5416 486.502L51.8383 486.047L51.1072 485.513L49.6913 484.292L48.8908 483.495L48.1042 482.588L46.8919 480.916L46.1377 479.695L45.476 478.447L44.5459 476.223L43.9999 474.633L43.5465 473.043L42.9311 469.904L42.51 466.505L42.3295 462.905L42.3064 459.106L42.6442 451.178L43.1115 443.072L43.3244 435.049L43.0051 427.285L42.0565 419.872L40.5203 412.869L38.5399 406.385L36.3096 400.567L34.0192 395.569L31.7519 391.395L29.3412 387.614L26.7268 384.01L23.7007 380.155L20.2257 375.827L16.251 370.715L11.9987 364.778L7.99159 358.336L6.24717 355.046L4.7526 351.884L3.53104 348.827L2.56397 345.979L1.88841 343.396L1.40256 340.949L1.12956 338.698L1 336.516L1.07866 332.383L1.41181 327.763L1.819 322.054L2.15216 315.079L2.32799 307.114L2.37888 298.544L2.45755 289.682L2.72592 280.743L3.29506 271.84L4.18809 263.028L5.38189 254.326L6.85332 245.742L8.57461 237.281L10.4995 228.989L12.5586 220.952L14.6778 213.343L16.7785 206.399L18.7867 200.371L20.6237 195.405L22.3311 191.3L23.9598 187.805L25.5793 184.661L27.1849 181.782L28.8137 179.03L30.4147 176.424L32.0573 173.808L33.7277 171.116L35.6572 167.945L38.0356 163.967L40.8303 159.274L43.8333 154.258L46.8178 149.392L49.5432 145.091L51.8707 141.596L53.8881 138.798L55.6557 136.539L57.3492 134.547L59.0566 132.652L61.0648 130.511L63.5588 127.895L66.5017 124.897L69.6157 121.822L72.5771 118.979L75.1266 116.559L77.2644 114.491L79.0366 112.664L80.5866 110.869L81.9655 108.978L83.3213 106.732L84.6863 104.025L86.1253 100.768L87.5366 97.2092L88.8183 93.7146L89.8964 90.6027L90.8542 87.8781L91.8491 85.404L92.4506 84.1602L93.14 82.9255L93.9637 81.6725L94.9169 80.4286L96.0922 79.1347L97.4525 77.827L99.0535 76.5103L100.867 75.189L102.88 73.9269L105.083 72.6922L109.825 70.4323L114.656 68.4093L119.075 66.5959L122.661 64.9876L124.045 64.2768L125.275 63.5706L126.293 62.8826L127.261 62.1263L128.167 61.3062L129.028 60.4405L130.768 58.5269L132.859 56.2305L135.765 53.3692L137.598 51.7791L139.694 50.1206L142.03 48.4941L144.617 46.8994L147.389 45.4414L150.35 44.0837L153.418 42.8945L156.541 41.8374L162.7 40.097L168.299 38.6617L172.986 37.3404L176.886 35.9417L178.594 35.1717L180.255 34.306L181.907 33.3264L183.536 32.2557L186.863 29.8272L190.509 26.9705L194.641 23.7447L199.439 20.168L204.959 16.3681L210.868 12.6867L216.624 9.50647L221.742 7.06889L226.059 5.37397L229.964 4.21214L233.944 3.35101L237.979 2.69947L242.249 2.17551L246.585 1.76089L251.096 1.4374L255.594 1.20503L260.198 1.05467L264.737 1L269.36 1.03189L273.894 1.1458L278.489 1.35083L282.977 1.62876L287.493 1.98414L291.866 2.39876L296.253 2.87261L300.505 3.38746L304.854 3.95243L309.273 4.55841L314.192 5.2464L319.772 6.03918L326.454 7.00055L334.116 8.13505L342.431 9.43357L351.075 10.8916L359.788 12.5227L368.38 14.3224L376.681 16.277L384.501 18.3273L391.613 20.3822L397.786 22.3231L402.88 24.0636L407.137 25.6218L410.816 27.0616L414.198 28.4558L417.382 29.8318L420.514 31.2305L423.54 32.6339L426.543 34.0554L429.458 35.4405L432.448 36.8074L435.562 38.1013L439.212 39.368L443.678 40.5936L449.253 41.7645L455.773 42.8079L462.839 43.7602L469.886 44.8309L473.222 45.528L476.29 46.339L479.057 47.355L480.311 47.9109L481.491 48.5169L482.629 49.2367L483.938 50.2346L484.558 50.7813L485.155 51.3645L485.72 52.0206L486.326 52.8635L486.849 53.7428L487.284 54.6268L487.603 55.4514L487.89 56.4401L488.07 57.3104L488.204 58.1852L488.306 59.3743L488.32 60.6729L488.269 61.9714L487.807 66.2406L487.075 71.0793L486.354 76.1276L485.928 80.7886L485.905 82.9482L486.057 85.0031L486.367 86.6752L486.687 87.7915L486.844 88.2243L487.057 88.721L487.589 89.7507L488.135 90.5981L488.663 91.2679L488.922 91.5549L489.25 91.8784L489.921 92.4525L490.823 93.0904L491.804 93.6599L492.272 93.8877L492.822 94.1247L493.863 94.4755L495.552 94.8855L496.593 95.0678L497.722 95.2136L500.55 95.3184L503.594 95.2136L509.85 94.5529L515.893 93.8968L520.085 93.7784L520.853 93.8194L521.571 93.8877L523.482 94.2112L524.768 94.5529L525.606 94.8491L526.383 95.2136L527.105 95.6419L527.864 96.1932L528.567 96.8128L529.21 97.4917L529.502 97.8562L529.826 98.3027L530.223 98.9588L530.723 99.9794L531.297 101.506L531.76 103.169L532.047 104.75L532.296 107.069L532.44 109.424L532.384 116.487L532.181 123.695L532.338 130.47L532.671 133.545L533.171 136.347L533.763 138.429L534.249 139.773L534.8 141.036L535.415 142.147L536.179 143.277L536.646 143.87L537.197 144.489L537.955 145.227L538.973 146.047L539.644 146.517L540.408 146.995L542.37 148.007L544.512 148.9L549.574 150.563L555.154 152.08L560.499 153.46Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M146.704 50.9587L152.771 48.8583L158.721 46.6167L161.534 45.3728L164.227 44.0287L166.735 42.5844L169.155 41.0034L173.722 37.4814L178.507 33.2988L183.786 28.697L189.695 24.1135L192.902 21.9948L196.293 20.0448L199.852 18.3362L203.567 16.8782L207.454 15.7118L211.466 14.8142L215.612 14.1946L219.864 13.7982L228.568 13.5385L237.359 13.6251L245.998 13.6752L254.262 13.4337L261.976 12.8277L269.074 11.921L275.783 10.8503L282.872 9.69303L290.594 8.63143L298.886 7.8751L307.539 7.59717L316.307 7.86599L324.932 8.64966L333.182 9.82516L340.845 11.233L347.823 12.7184L354.301 14.2128L360.959 15.8257L368.039 17.6117L375.484 19.58L383.128 21.7351L390.823 24.0542L398.457 26.4736L405.99 28.9066L413.389 31.2531L420.64 33.4036L427.678 35.2717L434.419 36.8071L440.763 38.0236L446.686 38.9941L452.387 39.9099L458.263 41.0307L461.243 41.7461L464.204 42.6163L467.087 43.6688L469.817 44.9126L472.144 46.2704L473.394 47.1315L474.625 48.1202L475.99 49.4233L477.156 50.7583L477.688 51.4599L478.243 52.2709L479.011 53.5877L479.839 55.3646L480.501 57.2099L480.954 58.9094L481.297 60.782L481.533 62.6682L481.69 65.607V68.6642L481.403 74.7832L481.084 80.5469L481.033 85.9961L481.19 88.5248L481.482 90.8667L481.963 93.0537L482.25 94.0242L482.569 94.9126L483.134 96.1519L483.735 97.1999L484.073 97.701L484.434 98.184L485.179 99.0451L486.007 99.8334L486.595 100.316L487.21 100.763L488.224 101.378L489.492 102.011L490.195 102.298L490.898 102.553L492.333 102.945L493.809 103.237L495.391 103.437L497.885 103.524L500.509 103.405L503.23 103.077L506.057 102.599L512.114 101.319L518.272 100.088L521.183 99.7103L523.968 99.5645L526.194 99.6967L527.652 99.9108L528.346 100.066L529.086 100.284L530.141 100.704L531.071 101.182L531.871 101.688L532.468 102.148L533.088 102.722L533.593 103.296L534.176 104.098L534.745 105.064L535.198 105.984L535.606 107.019L535.934 108.158L536.369 110.449L536.642 112.955L536.702 116.363L536.554 120.04L535.865 127.708L535.134 135.395L534.861 142.621L535.023 145.938L535.402 149.013L535.934 151.346L536.406 152.859L536.989 154.33L537.678 155.67L538.493 156.946L539.099 157.752L539.751 158.518L540.691 159.456L542.153 160.663L543.805 161.803L546.377 163.215L549.246 164.532L555.71 166.906L562.623 169.129L569.638 171.548L573.132 172.965L576.435 174.501L579.536 176.237L582.326 178.127L584.241 179.75L585.569 181.08L586.745 182.488L587.763 183.982L588.642 185.563L589.141 186.657L589.576 187.773L590.113 189.568L590.567 191.764L590.849 194.124L590.923 196.744L590.83 198.945L590.608 201.278L589.979 204.986L589.067 208.777L586.61 216.249L583.691 223.658L580.674 231.504L579.337 235.586L578.24 239.728L577.379 244.73L577.213 246.393L577.129 248.025L577.19 251.273L577.426 253.697L577.814 256.062L578.471 258.677L579.281 261.087L580.267 263.575L581.988 267.097L583.89 270.468L587.8 276.929L589.664 280.21L591.344 283.572L592.913 287.645L593.348 289.085L593.736 290.684L594.185 293.491L594.365 295.728L594.393 298.125L594.06 301.879L593.426 305.533L591.608 312.495L589.882 318.728L589.248 321.557L588.762 324.35L588.489 327.084L588.355 329.831L588.392 335.522L588.406 341.609L588.211 344.703L587.841 347.81L587.23 350.858L586.444 353.866L584.417 359.884L582.099 366.473L581.086 370.054L580.239 373.831L579.684 377.777L579.332 381.882L579.165 390.274L578.865 398.471L578.175 403.05L577.833 404.522L577.43 405.907L576.625 408.025L575.561 410.199L574.335 412.226L573.187 413.771L571.526 415.625L569.768 417.334L567.13 419.484L564.405 421.402L558.903 424.77L553.383 427.973L548.122 431.262L543.421 434.657L541.362 436.361L539.446 438.101L537.729 439.842L536.101 441.669L533.042 445.651L530.159 450.075L527.462 454.841L525.028 459.83L522.932 464.914L521.266 469.967L520.063 474.883L519.318 479.608L518.952 484.283L518.832 489.172L518.809 494.156L518.684 498.963L518.508 501.232L518.208 503.437L517.625 505.998L517.37 506.818L517.083 507.592L516.431 509L515.815 510.062L515.45 510.595L515.061 511.092L514.367 511.839L513.608 512.522L512.845 513.087L512.044 513.579L511.248 513.967L510.156 514.386L509.18 514.677L508.111 514.928L505.862 515.215L503.47 515.324L498.103 515.183L492.504 515.078L489.829 515.229L487.354 515.548L485.67 515.958L484.374 516.381L483.111 516.924L482.181 517.443L481.232 518.085L480.524 518.646L479.793 519.297L479.039 520.086L478.049 521.311L477.063 522.669L474.638 526.633L472.205 530.611L470.886 532.433L469.428 534.151L467.744 535.773L465.879 537.272L463.742 538.693L461.405 540.051L456.195 542.653L450.651 545.341L445.168 548.225L439.949 551.191L435.021 553.989L430.204 556.513L425.012 558.946L419.201 561.461L412.82 564.117L405.958 566.846L398.703 569.498L391.119 571.986L383.299 574.291L375.317 576.341L367.229 577.973L359.117 579.116L351.154 580.055L343.589 581.349L340.044 582.296L336.588 583.472L333.256 584.903L330.004 586.515L323.091 590.365L315.576 594.215L311.592 595.787L307.465 597.022L303.897 597.692L301.482 597.97L298.882 598.12L294.449 598.006L289.965 597.555L280.84 595.942L271.591 594.133L262.276 592.776L252.994 592.088L243.916 591.814L235.3 591.354L231.274 590.826L227.457 590.037L224.491 589.108L222.571 588.347L220.632 587.436L218.578 586.251L216.736 584.989L214.857 583.549L212.248 581.23L209.754 578.77L204.511 573.393L201.67 570.796L198.649 568.386L195.548 566.409L193.799 565.461L192.013 564.614L188.446 563.306L184.818 562.295L177.572 560.932L170.9 559.643L167.517 558.599L166.407 558.171L165.282 557.661L163.857 556.882L162.326 555.866L160.785 554.677L158.79 552.795L156.889 550.781L152.845 546.421L149.781 543.751L148.976 543.158L148.046 542.543L146.158 541.504L144.261 540.652L142.184 539.905L138.903 539.131L135.451 538.616L128.446 538.156L121.996 537.677L119.154 537.131L117.919 536.789L116.873 536.392L116.04 535.969L115.314 535.518L114.634 534.998L114.079 534.479L113.792 534.169L113.523 533.846L113.185 533.363L112.848 532.77L112.496 531.982L112.158 530.998L111.885 529.909L111.728 528.902L111.585 526.874L111.571 524.674L112.006 518.814L112.589 512.973L112.764 510.13L112.811 507.511L112.616 504.927L112.473 503.929L112.269 502.973L111.936 501.893L111.561 500.981L111.182 500.252L110.756 499.583L110.312 499.022L109.771 498.457L109.118 497.888L108.656 497.546L108.119 497.191L107.411 496.794L106.337 496.316L105.435 495.988L104.528 495.714L102.469 495.282L100.285 495.013L98.0131 494.89L95.6533 494.872L90.5218 495.072L85.0757 495.4L79.6295 495.673L74.3315 495.724L71.657 495.614L69.0473 495.391L66.4839 495.026L64.0685 494.512L61.8336 493.81L60.8017 493.4L59.7653 492.899L58.5021 492.138L57.5257 491.418L56.9381 490.912L56.3319 490.302L55.587 489.409L54.8328 488.32L54.3006 487.408L53.8055 486.388L53.2734 484.957L52.7552 483.098L52.3711 481.08L52.1166 477.968L52.112 474.587L52.3896 471.07L52.8708 467.384L54.222 460.112L55.661 453.378L56.7854 447.473L57.4286 442.01L57.5304 439.441L57.4748 436.93L57.2527 434.506L56.8779 432.105L56.3134 429.59L55.6055 427.016L53.7407 421.512L51.4318 415.643L48.8545 409.511L46.1846 403.241L43.5518 396.981L41.0161 390.885L38.5453 385.089L35.9679 379.626L32.9742 374.223L29.2262 368.523L24.687 362.55L19.6434 356.485L14.6646 350.499L12.4251 347.569L10.3892 344.616L8.64473 341.628L7.15942 338.511L5.961 335.176L5.04483 331.681L4.42479 327.954L4.05462 324.05L3.92969 319.981L3.98059 315.762L4.43867 307.059L5.05408 298.161L5.62322 289.249L6.15071 280.506L6.74761 272.081L7.49721 264.144L8.3995 256.827L9.43597 250.129L10.6437 243.714L12.1243 236.989L13.8965 229.841L15.9278 222.355L18.1304 214.691L20.4208 207L22.7621 199.41L25.159 192.06L27.653 185.099L30.2581 178.674L32.9511 172.911L35.6903 167.844L38.499 163.302L41.613 158.759L45.0094 154.089L48.5352 149.378L52.0195 144.799L55.2816 140.507L58.2291 136.557L60.9174 132.77L63.5641 128.774L66.2062 124.473L68.7743 119.922L71.1804 115.265L73.3552 110.663L75.28 106.299L77.0245 102.321L78.7643 98.7672L79.7498 97.0449L80.8372 95.3865L82.0819 93.7508L83.4747 92.188L85.0525 90.6981L86.7831 89.3039L88.6941 88.0282L90.7439 86.8527L92.914 85.7956L95.186 84.8252L99.827 83.1029L104.334 81.4991L108.42 79.7951L110.247 78.8519L112.006 77.7949L113.713 76.5784L115.365 75.2343L116.994 73.7307L118.604 72.1087L121.732 68.6232L124.776 65.0785L127.9 61.7342L129.621 60.1304L131.467 58.6086L133.536 57.1324L135.789 55.7291L138.269 54.4215L140.93 53.1867L146.704 50.9587Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M213.941 24.9292L205.427 24.0727L201.364 23.9998L197.491 24.182L193.831 24.6923L192.124 25.0386L190.393 25.4714L187.858 26.3052L186.012 27.057L184.3 27.8543L181.657 29.3625L179.196 31.0483L176.942 32.8571L174.805 34.7889L170.594 39.0171L166.383 43.3546L162.154 47.3504L160.044 49.0909L157.879 50.6901L155.662 52.0935L153.367 53.3601L150.901 54.5174L148.319 55.5881L142.836 57.5791L137.26 59.5748L132.004 61.8164L129.602 63.0785L127.39 64.4135L125.396 65.835L123.578 67.3158L121.986 68.8285L120.515 70.4186L119.173 72.0543L117.909 73.7492L115.485 77.2575L113.134 80.7156L110.761 83.8913L109.516 85.3357L108.183 86.7025L106.707 88.0193L105.106 89.2677L103.353 90.4477L101.465 91.5549L99.4519 92.5664L97.3326 93.5004L92.923 95.1133L88.5503 96.5121L84.5247 97.9291L82.7248 98.7218L80.9942 99.6376L79.3238 100.708L77.7275 101.911L76.182 103.264L74.6875 104.741L73.2669 106.317L71.8973 107.98L69.3801 111.425L67.0851 114.983L64.8224 118.819L62.4117 123.043L59.7973 127.549L57.0442 132.155L54.2587 136.675L51.5518 141.008L48.9884 145.227L46.4203 149.72L43.7782 154.754L41.0991 160.354L38.4709 166.418L35.9723 172.765L33.6356 179.185L31.4608 185.45L29.4249 191.386L27.463 197.013L25.4363 202.713L23.2569 208.905L20.9942 215.68L18.7778 222.979L16.7003 230.684L14.817 238.675L13.1374 246.867L11.6983 255.201L10.5184 263.648L9.58374 272.205L8.78787 280.866L7.98738 289.609L7.18688 298.389L6.65476 307.114L6.64551 311.42L6.88612 315.662L7.46914 319.813L8.40382 323.872L9.5606 327.326L10.449 329.476L11.4253 331.568L13.4566 335.19L15.6823 338.616L20.4621 344.972L25.0106 350.768L29.0038 356.426L30.8038 359.402L32.4556 362.463L35.3892 368.942L37.9295 375.69L40.2662 382.442L42.5567 388.917L44.8795 394.876L47.2393 400.203L49.6547 404.977L52.2412 409.661L55.0268 414.564L57.8354 419.79L60.4174 425.367L61.5325 428.314L62.4857 431.363L63.2261 434.566L63.7489 437.883L64.0034 441.382L64.0173 445.027L63.7535 448.845L63.2723 452.818L61.7685 461.092L60.038 469.475L58.7609 477.417L58.511 481.048L58.5341 484.361L58.7701 486.356L59.1958 488.434L59.3994 489.167L59.6493 489.919L60.0518 490.885L60.6441 491.992L61.3197 493.027L61.6482 493.464L62.0369 493.929L62.6245 494.535L63.3325 495.145L64.2348 495.788L64.8178 496.143L65.4101 496.466L66.2614 496.863L67.3951 497.268L68.3946 497.551L69.4866 497.801L71.8186 498.13L74.308 498.289L76.8946 498.303L79.583 498.202L85.0198 497.747L90.6557 497.086L96.3517 496.384L101.71 495.838L104.125 495.692L106.365 495.651L108.961 495.806L109.645 495.897L110.27 496.006L111.455 496.307L112.417 496.644L112.898 496.858L113.398 497.123L113.963 497.496L114.49 497.924L114.981 498.394L115.304 498.767L115.633 499.205L115.975 499.756L116.429 500.663L116.794 501.574L117.086 502.494L117.359 503.77L117.581 505.347L117.715 506.937L117.729 509.465L117.618 512.19L117.155 517.922L116.864 523.699L117.058 526.733L117.211 527.745L117.451 528.784L117.923 530.219L118.381 531.262L118.844 532.087L119.159 532.556L119.501 533.003L120.084 533.632L120.811 534.279L121.685 534.921L122.527 535.436L123.402 535.878L124.263 536.22L125.808 536.68L127.353 537.031L129.01 537.331L132.235 537.646L135.705 537.855L142.623 538.32L145.89 538.817L148.939 539.546L150.804 540.234L152.502 541.022L154.177 541.965L155.352 542.771L156.884 544.024L158.425 545.428L162.321 549.483L164.403 551.551L166.67 553.52L169.011 555.105L170.437 555.916L172.015 556.682L173.963 557.411L176.193 558.067L178.46 558.609L181.967 559.187L185.628 559.67L192.878 560.732L197.251 561.83L198.431 562.213L199.555 562.646L201.693 563.643L203.521 564.687L205.256 565.862L206.885 567.184L208.504 568.724L210.045 570.341L212.275 573.038L214.51 575.932L219.017 581.686L221.363 584.251L223.862 586.575L226.115 588.242L227.697 589.236L229.47 590.179L231.644 591.104L233.851 591.856L236.234 592.525L240.047 593.286L244.101 593.869L252.763 594.694L261.897 595.514L271.216 596.585L280.498 597.788L289.571 598.612L293.963 598.667L298.243 598.412L302.032 597.82L304.142 597.346L306.345 596.731L310.125 595.314L313.748 593.619L317.177 591.701L320.522 589.65L327.144 585.5L330.609 583.513L334.223 581.686L337.999 580.137L341.909 578.848L345.948 577.872L350.071 577.112L358.432 576.032L366.738 574.934L374.789 573.435L382.489 571.549L389.73 569.507L396.379 567.457L402.358 565.402L407.818 563.274L413.356 560.878L419.154 558.24L425.1 555.465L430.93 552.599L436.376 549.66L441.313 546.763L445.862 544.052L450.415 541.509L455.26 539.072L460.294 536.684L465.139 534.156L467.346 532.761L469.372 531.294L471.163 529.718L472.759 528.059L474.12 526.346L475.346 524.546L477.507 520.765L479.589 516.965L480.7 515.206L481.893 513.598L482.99 512.432L483.786 511.716L484.707 511.033L485.72 510.431L486.905 509.857L487.599 509.579L488.376 509.315L489.741 508.964L491.361 508.673L492.999 508.468L495.571 508.349L498.297 508.363L503.72 508.595L506.278 508.65L508.726 508.586L511.336 508.276L512.331 508.076L513.27 507.811L514.566 507.324L515.584 506.832L516.329 506.39L517.101 505.843L517.828 505.219L518.637 504.381L519.378 503.474L520.035 502.517L520.636 501.456L521.4 499.792L522.089 497.97L522.834 495.355L523.459 492.548L524.431 486.657L525.259 480.675L526.133 474.92L527.151 469.626L528.378 464.883L529.877 460.568L531.843 456.221L534.314 451.743L537.252 447.25L540.579 442.926L542.361 440.899L544.221 438.958L546.164 437.131L548.186 435.381L552.656 431.964L557.621 428.524L562.702 425.011L565.112 423.212L567.38 421.312L569.739 418.947L570.484 418.077L571.248 417.07L572.53 415.079L573.39 413.461L574.103 411.784L574.718 409.844L575.241 407.579L575.607 405.283L575.838 401.615L575.843 397.706L575.486 389.436L575.533 380.957L575.977 376.774L576.699 372.633L577.749 368.573L578.989 364.559L581.715 356.613L584.005 348.576L584.805 344.466L585.416 340.316L586.226 331.877L587.151 323.489L588.72 315.489L590.788 308.199L592.662 301.82L593.273 298.995L593.615 296.207V294.156L593.477 292.539L593.167 290.84L592.741 289.341L591.991 287.372L591.112 285.45L589.497 282.575L587.614 279.531L583.329 272.801L581.275 269.161L579.429 265.284L578.017 261.242L577.49 259.247L577.069 257.06L576.768 254.112L576.708 251.26L576.875 248.239L577.601 243.642L578.744 238.958L581.955 229.417L585.393 219.895L586.832 215.229L587.92 210.75L588.512 206.449L588.637 204.408L588.614 202.362L588.391 200.257L587.98 198.166L587.526 196.585L586.971 195.095L586.3 193.692L585.421 192.225L584.333 190.726L583.033 189.218L581.802 188.024L579.637 186.315L577.328 184.798L574.07 183.103L570.637 181.659L563.484 179.29L556.404 177.162L553.156 176.05L550.12 174.829L547.164 173.312L546.021 172.615L544.855 171.804L543.24 170.464L541.912 169.152L541.301 168.45L540.727 167.721L539.742 166.254L538.821 164.573L538.363 163.593L537.923 162.486L537.326 160.586L536.827 158.399L536.475 156.18L536.23 152.686L536.234 149L536.868 141.204L537.942 133.144L538.932 125.239L539.228 121.467L539.325 117.967L539.108 114.482L538.927 113.129L538.678 111.844L538.27 110.472L537.734 109.115L537.197 108.058L536.961 107.657L536.716 107.292L536.234 106.691L535.698 106.13L535.041 105.561L534.337 105.055L533.893 104.786L533.435 104.545L532.797 104.267L531.95 103.984L530.881 103.734L529.969 103.592L529.067 103.501L527.799 103.465L525.833 103.561L523.732 103.779L520.868 104.253L517.869 104.877L511.988 106.253L506.181 107.524L503.447 107.98L500.828 108.29L498.347 108.408L495.955 108.34L493.859 108.089L492.693 107.871L491.499 107.584L489.773 107.032L488.658 106.586L487.525 106.071L485.739 105.087L484.087 103.984L482.578 102.791L481.204 101.51L479.973 100.18L478.853 98.7583L477.84 97.2502L476.929 95.6646L476.082 93.9241L475.304 92.0698L474.61 90.1015L473.981 88.0329L472.949 83.6817L472.07 79.0071L471.135 74.0727L469.914 69.2249L469.113 66.9103L468.151 64.6595L466.98 62.4771L465.606 60.3903L464.153 58.5952L463.26 57.6384L462.251 56.6588L460.322 55.0596L458.267 53.6335L456.111 52.3805L453.876 51.2733L449.115 49.3324L443.733 47.4507L437.815 45.4049L431.55 43.1177L425.16 40.6345L418.853 38.0512L412.81 35.5088L407.11 33.1304L401.636 30.9298L395.847 28.7474L389.453 26.5011L382.442 24.2003L374.923 21.8811L367.039 19.6076L358.895 17.4753L350.571 15.6118L342.108 14.1948L333.538 13.4248L329.221 13.3291L324.89 13.4339L320.55 13.7619L316.205 14.2814L307.534 15.876L298.923 18.0129L290.404 20.4231L281.992 22.8425L273.677 25.0523L265.408 26.8611L257.131 28.114L248.769 28.6881L240.251 28.5059L231.556 27.6311L222.737 26.2961L213.941 24.9292Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M541.306 117.498L541.449 119.904L541.542 123.918L541.283 127.472L540.829 131.245L539.534 138.872L538.048 146.207L536.734 152.818L535.864 158.564L535.651 161.256L535.614 163.844L535.818 166.487L535.975 167.539L536.211 168.637L536.711 170.296L537.257 171.649L537.539 172.223L537.886 172.861L538.715 174.146L539.76 175.495L540.922 176.748L542.365 178.037L543.855 179.181L545.405 180.224L548.126 181.746L551.125 183.154L557.653 185.564L564.779 187.824L571.836 190.362L575.764 192.271L576.847 192.899L577.98 193.656L580.118 195.328L581.497 196.635L582.224 197.437L582.89 198.28L583.866 199.752L584.708 201.328L585.356 202.85L585.624 203.629L585.851 204.413L586.175 205.935L586.43 208.021L586.513 209.871L586.462 211.853L586.194 214.222L585.638 217.102L584.875 220.127L583.464 224.365L581.793 228.629L578.226 236.735L575.19 244.043L574.121 247.36L573.363 250.604L573.071 253.082L573.006 254.955L573.094 256.796L573.353 258.596L573.83 260.609L574.505 262.696L575.783 265.594L577.314 268.483L581.104 274.802L583.033 278.196L584.838 281.814L586.499 286.183L586.962 287.737L587.378 289.464L587.832 292.353L588.035 294.972L588.081 297.597L587.776 301.802L587.193 306.076L585.638 314.756L584.347 323.513L583.626 332.16L583.029 340.48L582.524 344.426L581.816 348.221L580.817 351.811L579.614 355.238L576.713 361.548L573.839 367.43L572.59 370.414L571.558 373.476L570.785 376.857L570.535 378.474L570.364 380.092L570.281 383.577L570.48 387.149L570.952 390.735L571.563 394.184L572.854 400.64L573.326 403.543L573.622 406.308L573.64 409.01L573.552 410.24L573.395 411.416L573.057 412.924L572.553 414.496L571.914 416.013L571.16 417.439L570.188 418.97L569.138 420.446L567.324 422.638L565.288 424.834L560.902 429.108L556.52 433.172L552.471 437.058L548.7 441.04L545.169 445.305L541.972 449.797L539.205 454.349L536.924 458.814L535.082 463.202L533.491 467.822L532.024 472.866L530.603 478.233L529.146 483.682L527.54 488.849L526.629 491.204L525.629 493.332L524.653 494.954L523.959 495.925L523.237 496.758L522.529 497.424L521.756 498.025L520.997 498.513L520.197 498.923L519.484 499.214L518.489 499.52L517.444 499.756L516.319 499.939L514.075 500.084L511.664 500.075L506.644 499.766L501.577 499.492L499.065 499.524L496.677 499.702L494.512 500.08L493.378 500.358L492.346 500.677L491.157 501.155L489.94 501.77L488.839 502.445L488.029 503.055L487.057 503.93L486.169 504.882L485.054 506.345L484.059 507.917L482.231 511.42L480.454 515.093L478.483 518.656L477.299 520.419L475.957 522.141L474.416 523.791L472.699 525.367L470.802 526.807L468.762 528.146L466.615 529.354L464.412 530.47L460.007 532.529L455.736 534.63L451.341 537.113L446.797 539.997L442.16 543.045L437.501 545.952L432.841 548.544L428.029 550.923L422.675 553.356L416.757 555.962L410.404 558.673L403.787 561.316L397.134 563.762L390.683 565.99L384.585 567.986L378.708 569.685L372.383 571.116L365.331 572.155L357.604 572.879L349.451 573.804L345.338 574.597L341.238 575.677L337.235 577.158L333.321 578.957L329.545 581.094L325.936 583.409L319.111 588.22L312.568 592.521L309.107 594.394L305.507 595.993L301.676 597.255L299.765 597.747L297.683 598.185L293.495 598.74L289.173 599L284.736 598.982L280.188 598.763L270.984 597.979L261.85 597.014L253.105 595.938L245.105 594.499L241.514 593.514L238.159 592.298L235.753 591.127L234.018 590.115L232.362 588.99L230.469 587.459L228.859 585.951L227.327 584.37L225 581.614L222.714 578.647L218.277 572.674L216.014 569.913L213.585 567.325L210.813 564.91L209.448 563.899L208.018 562.979L205.88 561.84L203.761 560.928L201.443 560.122L197.852 559.265L194.137 558.668L186.683 557.921L183.11 557.484L179.76 556.896L176.952 556.09L175.415 555.529L173.893 554.855L172.593 554.135L170.881 552.987L169.187 551.675L167.17 549.802L165.236 547.834L161.169 543.811L158.448 541.719L157.434 541.063L156.282 540.425L154.478 539.614L152.405 538.89L150.286 538.316L146.949 537.774L143.442 537.455L136.46 537.186L133.174 536.967L130.232 536.598L128.408 536.142L126.932 535.637L126.22 535.322L125.521 534.944L124.97 534.571L124.387 534.092L123.855 533.555L123.369 532.976L123.032 532.502L122.689 531.932L122.435 531.404L122.157 530.666L121.87 529.618L121.681 528.629L121.546 527.645L121.472 525.103L121.607 522.333L122.208 516.733L122.745 511.142L122.786 508.555L122.625 506.158L122.328 504.623L121.986 503.452L121.713 502.741L121.389 502.076L120.926 501.315L120.394 500.595L119.793 499.93L119.311 499.483L118.742 499.027L118.113 498.613L117.174 498.103L115.985 497.592L114.68 497.159L113.356 496.859L111.431 496.581L109.479 496.426L106.624 496.417L103.621 496.585L97.6195 497.305L91.8448 498.226L86.2275 499.105L80.8184 499.67L78.2827 499.747L75.8627 499.647L73.6834 499.337L72.5266 499.073L71.4299 498.718L70.139 498.166L69.1303 497.624L68.3298 497.087L67.9873 496.822L67.6588 496.535L66.9648 495.843L66.2476 494.986L65.6553 494.134L65.2759 493.483L64.952 492.817L64.5679 491.797L64.1144 490.184L63.8461 488.808L63.6749 487.455L63.6101 485.454L63.6934 483.017L63.9016 480.584L64.5031 476.734L65.3175 472.615L67.2702 464.154L69.0192 455.807L69.6115 451.825L69.9816 448.03L70.0557 444.439L69.8845 441.031L69.4356 437.851L68.7601 434.839L67.8809 432.033L66.8398 429.381L65.6738 426.898L64.4106 424.551L61.7361 420.237L58.9228 416.2L55.8596 411.935L52.6392 407.329L49.5066 402.476L46.6979 397.533L44.3705 392.548L42.4687 387.286L40.8261 381.381L39.2806 374.843L37.6195 367.858L35.5373 360.723L34.2463 357.197L32.7656 353.729L31.0675 350.367L29.1935 347.127L25.0059 341.018L20.6148 335.236L16.2977 329.153L14.3589 325.873L12.6654 322.405L11.3744 318.897L10.8006 316.929L10.3333 314.947L9.74103 310.978L9.47266 306.905L9.5143 302.732L9.76879 298.476L10.6618 289.847L11.6844 281.153L12.6422 272.492L13.6139 263.935L14.7615 255.529L16.145 247.333L17.6997 239.418L19.3238 231.919L20.9618 224.975L22.6322 218.683L24.4414 212.91L26.5792 207.078L29.0963 200.991L31.8819 194.726L34.746 188.471L37.4946 182.438L39.9793 176.793L42.168 171.572L44.19 166.542L46.2676 161.302L48.4886 155.844L50.8485 150.321L53.287 144.95L55.7347 139.961L58.164 135.505L60.6302 131.614L63.3463 128.037L66.3725 124.684L67.9781 123.116L69.6068 121.663L71.2587 120.328L72.9245 119.111L74.5764 118.045L76.2838 117.061L79.8791 115.302L83.5669 113.703L87.1205 112.108L88.828 111.238L90.4937 110.29L92.1456 109.22L93.7558 108.035L95.3198 106.732L96.8283 105.31L98.258 103.793L99.6138 102.189L102.062 98.8406L104.181 95.4463L106.032 92.1202L107.771 88.8124L109.59 85.4089L111.575 82.0282L112.653 80.4016L113.814 78.8343L115.101 77.3034L116.507 75.8408L118.122 74.3965L119.913 73.0069L121.907 71.6992L124.077 70.4554L126.396 69.33L128.848 68.2821L133.924 66.4413L138.921 64.7328L143.535 62.8875L145.691 61.8168L147.768 60.6139L149.823 59.2106L151.831 57.6569L153.788 55.9347L155.718 54.0758L159.415 50.1164L163.056 46.0477L167.077 41.9152L169.359 39.9013L171.853 37.9832L175.05 35.983L176.23 35.3542L177.549 34.7346L180.371 33.6639L182.282 33.0944L184.216 32.6478L187.131 32.2241L189.459 32.0419L191.772 31.9781L195.816 32.1558L200.018 32.5886L208.648 33.9828L217.36 35.5046L225.939 36.5981L234.305 36.9717L242.467 36.5981L250.505 35.6413L258.477 34.3154L266.413 32.8392L274.269 31.3584L281.941 29.9369L289.285 28.5746L296.188 27.235L302.749 25.8408L309.482 24.31L316.788 22.6606L324.687 21.0978L332.997 19.9041L341.479 19.3391L345.722 19.3437L349.9 19.5259L358.044 20.4326L365.72 21.8952L372.776 23.704L379.153 25.6495L385.024 27.6542L391.007 29.8458L397.273 32.2651L403.709 34.8941L410.057 37.6825L416.054 40.5574L421.505 43.437L426.354 46.2846L430.838 49.196L435.238 52.3398L439.504 55.6659L443.47 59.0557L447.028 62.4L450.267 65.7761L453.316 69.3391L456.12 73.0205L458.624 76.6564L460.919 80.2057L463.163 83.7823L465.361 87.2678L467.517 90.5164L469.724 93.5691L472.07 96.5307L474.49 99.3373L476.91 101.916L479.358 104.258L482.088 106.513L483.582 107.589L485.174 108.6L486.849 109.525L488.612 110.345L490.458 111.019L492.374 111.548L494.377 111.903L496.446 112.095L498.676 112.117L501.013 111.999L506.098 111.325L511.484 110.249L517.259 108.965L523.047 107.83L525.888 107.434L528.581 107.22L531.237 107.261L532.417 107.37L533.472 107.548L534.596 107.857L535.536 108.208L536.281 108.573L536.78 108.869L537.248 109.202L537.822 109.689L538.414 110.295L538.955 110.965L539.436 111.68L539.89 112.5L540.08 112.947L540.894 115.731L541.306 117.498Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M548.478 450.471L545.808 454.75L543.203 459.256L540.686 463.908L538.27 468.45L535.892 472.56L534.68 474.351L533.379 476.009L531.917 477.549L531.191 478.21L530.432 478.825L529.016 479.804L528.026 480.383L526.92 480.93L525.527 481.477L524.236 481.868L522.922 482.169L521.386 482.392L519.965 482.497L518.545 482.543L516.194 482.474L513.77 482.301L509.05 481.882L504.501 481.677L501.929 481.837L501.221 481.928L500.49 482.06L499.324 482.365L498.25 482.748L497.741 482.976L497.186 483.254L496.422 483.714L495.594 484.32L495.02 484.807L494.479 485.322L493.776 486.083L493.045 487.022L492.332 488.06L491.453 489.582L490.68 491.177L489.394 494.453L488.237 497.966L487.08 501.574L485.84 505.101L484.378 508.504L483.513 510.172L482.541 511.794L481.463 513.329L480.264 514.773L478.978 516.049L478.238 516.696L477.47 517.302L475.804 518.45L473.99 519.526L469.83 521.58L465.259 523.631L460.669 525.822L456.361 528.223L452.386 530.811L448.444 533.609L444.247 536.552L439.745 539.414L435.057 542.029L430.347 544.393L425.609 546.662L420.44 549.105L414.781 551.724L408.743 554.349L402.533 556.814L396.402 559.065L390.554 561.151L384.913 563.088L378.856 564.915L372.133 566.386L364.72 567.266L356.803 567.699L348.706 568.355L344.722 569.043L340.821 570.045L337.504 571.266L335.449 572.182L333.446 573.198L330.003 575.28L326.685 577.595L320.314 582.616L313.591 587.892L309.972 590.379L306.146 592.667L302.138 594.612L297.965 596.216L293.634 597.405L289.201 598.225L284.671 598.685L280.076 598.836L275.454 598.722L270.841 598.362L266.255 597.797L261.776 597.018L257.394 596.02L253.193 594.79L249.195 593.286L245.438 591.518L242.388 589.71L240.542 588.434L238.816 587.103L235.998 584.516L233.453 581.736L231.195 578.829L229.095 575.809L225.074 569.589L223.038 566.683L220.895 564.003L218.688 561.771L217.393 560.664L216.014 559.67L214.311 558.664L212.386 557.743L211.271 557.297L210.008 556.868L208.148 556.385L205.589 555.93L203.002 555.602L195.511 555.246L188.237 554.804L184.521 554.135L183.119 553.77L181.824 553.351L180.278 552.695L178.367 551.67L176.595 550.522L174.397 548.699L172.357 546.731L168.442 542.771L165.291 540.102L164.629 539.632L163.949 539.199L162.061 538.183L160.248 537.395L158.383 536.762L156.518 536.32L154.232 535.951L151.784 535.677L144.737 535.445L138.121 535.167L135.28 534.698L133.688 534.297L133.22 534.142L132.795 533.982L132.004 533.604L131.24 533.158L130.523 532.648L129.926 532.137L129.625 531.832L129.292 531.454L128.945 530.989L128.598 530.42L128.265 529.741L127.885 528.716L127.603 527.668L127.45 526.797L127.302 524.793L127.284 522.733L127.446 520.068L127.719 517.27L128.316 511.712L128.496 509.055L128.547 506.572L128.362 503.898L128.242 503.023L128.07 502.157L127.733 500.968L127.288 499.802L127.006 499.205L126.715 498.672L126.321 498.084L125.868 497.528L125.322 496.972L124.938 496.635L124.535 496.334L124.068 496.034L123.513 495.742L122.819 495.455L122.282 495.277L121.676 495.118L120.885 494.977L119.455 494.849L118.002 494.826L115.878 494.972L113.574 495.259L108.215 496.234L102.251 497.524L96.2127 498.84L90.5167 499.925L85.1168 500.608L82.5719 500.727L80.2028 500.658L78.3149 500.412L77.061 500.134L76.589 499.993L76.0662 499.806L75.0713 499.364L74.2569 498.909L73.6184 498.471L73.1973 498.13L72.8086 497.761L72.2765 497.168L71.7305 496.43L71.1938 495.546L70.8838 494.931L70.5923 494.229L70.3007 493.277L69.9537 491.646L69.7871 490.452L69.69 489.181L69.7223 487.076L69.8889 484.962L70.148 482.871L70.8097 479.449L71.675 475.859L73.7017 468.797L75.6497 462.094L77.2137 455.497L77.7365 452.285L78.0651 449.209L78.153 446.271L78.0419 443.491L77.7134 440.917L77.2044 438.493L76.5427 436.288L75.7145 434.147L74.7382 432.096L73.6369 430.101L71.0503 426.087L68.0936 422.123L64.9425 418.309L61.6943 414.669L58.2471 410.96L54.661 407.073L51.1907 403.028L49.5851 400.941L48.0859 398.786L46.6746 396.471L45.3883 394.029L44.2037 391.345L43.1395 388.47L42.2326 385.381L41.4598 382.101L40.3586 375.075L39.6645 367.621L39.0306 359.994L38.0034 352.485L37.2075 348.859L36.1849 345.35L34.8939 341.997L33.3624 338.785L31.5855 335.755L29.6098 332.843L25.1909 327.271L20.4943 321.726L18.3057 318.952L16.3808 316.282L14.5855 313.252L14.058 312.204L13.5629 311.106L12.9336 309.347L12.5033 307.739L12.2071 306.103L12.0637 304.554L12.0498 302.786L12.1516 300.913L12.5125 298.139L13.0446 295.255L14.5161 288.685L16.0893 281.272L17.4312 273.271L18.4908 264.983L19.5087 256.631L20.7442 248.385L22.3082 240.334L24.0896 232.543L25.9173 225.089L27.6525 218.09L29.2905 211.68L30.9516 205.866L32.8488 200.367L35.1762 194.813L37.9293 189.231L40.9694 183.805L44.0788 178.729L47.1049 174.105L50.0385 169.794L53.0415 165.48L56.0955 161.197L59.0846 157.083L61.9349 153.255L64.6927 149.61L67.5245 145.961L70.4211 142.38L73.2575 138.994L75.9551 135.828L78.5926 132.684L81.23 129.472L83.7981 126.264L86.1718 123.13L88.2957 120.031L90.3131 116.692L92.3074 113.019L94.3017 109.069L96.296 104.996L98.2856 100.977L100.271 97.1819L102.288 93.7374L103.32 92.1883L104.426 90.6938L105.634 89.2632L106.934 87.9145L108.405 86.5932L110.011 85.3312L111.774 84.142L113.671 83.0303L115.684 82.0324L117.798 81.1121L122.148 79.5675L126.469 78.2189L130.703 76.77L132.827 75.8998L134.937 74.9111L137.001 73.7766L139.009 72.5054L140.925 71.1066L142.738 69.6031L144.423 68.0084L146.019 66.3271L148.999 62.7141L151.942 58.7501L154.973 54.7042L156.56 52.7633L158.253 50.9134L160.132 49.1456L162.186 47.5236L164.537 46.0519L165.763 45.4004L167.128 44.7899L169.423 43.988L171.306 43.4822L173.203 43.1086L175.929 42.8125L178.145 42.7122H180.348L184.235 42.9765L188.32 43.4595L196.742 44.8035L205.219 46.0292L209.388 46.3891L213.473 46.5486L217.467 46.4438L221.377 46.1066L225.185 45.528L228.9 44.758L236.04 42.7532L242.782 40.4159L249.093 38.0694L255.039 35.9235L260.943 34.06L267.37 32.4334L274.44 31.1258L282.052 30.21L290.039 29.7042L298.242 29.5402L306.562 29.5812L314.951 29.6404L323.382 29.5402L331.859 29.1802L340.354 28.6107L348.808 28.0275L357.113 27.7405L365.118 28.0047L368.963 28.392L372.665 28.9251L379.61 30.4287L385.885 32.3195L391.595 34.4017L397.198 36.657L403.042 39.0809L409.085 41.6051L415.101 44.1748L420.792 46.7627L425.919 49.3689L430.426 52.0434L434.59 54.973L438.542 58.2125L442.211 61.6433L445.501 65.0833L448.471 68.4913L451.322 71.9996L454.029 75.5125L456.546 78.8932L458.961 82.1737L461.353 85.4177L463.672 88.5342L465.888 91.441L468.128 94.2932L470.399 97.0999L472.653 99.788L474.948 102.326L477.525 104.9L480.463 107.465L482.069 108.695L483.772 109.876L485.553 110.964L487.418 111.953L489.348 112.814L491.328 113.543L493.341 114.126L495.395 114.559L497.473 114.846L499.564 114.992L501.771 115.006L504.053 114.91L508.846 114.423L513.871 113.662L519.16 112.801L524.393 112.117L527.049 111.926L529.594 111.898L532.116 112.108L533.25 112.29L534.305 112.55L535.633 113.006L536.678 113.475L537.442 113.903L537.807 114.145L538.224 114.455L538.96 115.097L539.658 115.831L540.297 116.628L540.718 117.243L541.125 117.958L541.569 118.933L542.115 120.482L542.467 121.808L542.726 123.125L542.934 125.184L543.008 127.394L542.962 129.745L542.615 133.463L542.041 137.445L540.366 145.779L538.451 154.317L536.84 162.678L536.322 166.692L536.054 170.533L536.146 174.46L536.29 176.018L536.53 177.604L537.072 179.877L537.78 181.969L538.127 182.789L538.552 183.682L539.404 185.167L540.463 186.675L541.245 187.627L542.166 188.616L543.443 189.792L545.243 191.163L547.15 192.393L550.042 193.892L553.128 195.195L559.967 197.528L567.019 199.802L570.452 201.055L573.658 202.399L577.235 204.276L578.323 204.941L579.276 205.593L580.655 206.709L581.936 207.944L582.561 208.654L583.093 209.352L583.588 210.14L584.046 211.056L584.421 212.008L584.657 212.814L584.824 213.625L584.912 214.477L584.93 215.685L584.819 217.143L584.578 218.678L583.787 221.517L582.686 224.551L579.577 231.641L576.088 239.737L574.552 244.02L573.311 248.366L572.529 252.718L572.307 254.814L572.215 257.023L572.344 259.876L572.696 262.545L573.265 265.293L573.973 267.648L574.982 270.264L576.134 272.884L577.957 276.396L579.78 279.645L582.964 285.586L584.296 288.88L584.648 289.988L584.925 291.072L585.217 292.803L585.356 294.671L585.337 296.539L585.171 298.207L584.824 300.139L584.361 302.166L582.524 308.345L580.507 315.375L579.711 319.179L579.081 323.161L578.512 331.399L578.332 339.701L578.096 343.756L577.656 347.679L576.888 351.433L575.838 355.032L574.473 358.422L572.913 361.63L569.499 367.539L566.366 373.066L565.038 375.927L563.946 378.875L563.122 382.083L562.822 383.695L562.572 385.445L562.345 389.049L562.354 392.831L562.942 400.777L563.613 408.873L563.715 412.842L563.604 416.678L563.183 420.359L562.498 423.89L561.521 427.235L560.332 430.415L558.958 433.422L557.468 436.265L554.336 441.496L551.291 446.18L548.478 450.471Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M251.523 31.9775L245.392 35.1213L239.927 38.3243L234.722 41.7187L229.697 45.2543L224.963 48.7626L220.539 52.1115L216.097 55.442L211.581 58.6405L207.047 61.4654L204.756 62.6591L202.387 63.6934L199.815 64.5955L197.094 65.3245L194.16 65.8485L191.051 66.172L187.798 66.2403L184.406 66.0945L180.964 65.7209L177.502 65.1833L170.835 63.8301L164.838 62.6181L162.085 62.2126L159.48 61.9757H157.051L155.908 62.0486L154.76 62.1898L153.353 62.4769L152.058 62.8596L150.73 63.3653L149.536 63.9485L148.324 64.6684L147.167 65.4703L145.524 66.8189L143.965 68.3225L142.503 69.9263L141.152 71.5711L138.736 74.9245L136.529 78.3735L134.479 81.7998L132.578 85.0529L130.727 88.2241L128.894 91.295L127.113 94.1882L125.285 97.013L123.384 99.7832L121.371 102.44L120.274 103.743L119.103 105.014L117.808 106.276L116.392 107.488L114.847 108.622L113.171 109.643L111.422 110.477L110.418 110.878L109.405 111.219L107.346 111.721L105.208 112.067L103.043 112.263L100.905 112.363L96.7868 112.495L94.8203 112.627L92.9694 112.855L91.2991 113.229L90.5124 113.466L89.6842 113.775L88.6431 114.263L87.6991 114.801L86.7367 115.434L85.3717 116.505L84.0807 117.703L82.8592 119.006L81.707 120.405L79.5091 123.503L77.3205 126.993L75.0902 130.684L72.8738 134.388L70.7083 138.042L68.478 141.869L66.1275 145.933L63.7445 150.125L61.4587 154.33L59.3857 158.586L57.4608 163.233L55.6424 168.487L53.9396 174.296L52.3571 180.456L50.8348 186.707L49.2708 192.744L47.5495 198.366L45.5645 203.551L43.1908 208.709L40.4885 214.017L37.74 219.411L35.2969 224.779L34.2882 227.462L33.4183 230.187L32.6918 233.085L32.0903 236.101L31.225 242.758L30.5541 250.102L29.6102 257.921L28.0416 265.99L25.927 274.132L23.8494 282.205L23.109 286.178L22.6787 290.078L22.6833 293.409L22.8545 295.519L23.1831 297.569L23.7244 299.701L24.5481 302.061L25.6169 304.476L27.4493 307.665L29.5269 310.65L34.0522 316.145L38.6932 321.462L40.8032 324.104L42.6679 326.692L44.1949 329.226L45.4442 331.782L46.1845 333.786L46.6241 335.326L46.9665 336.889L47.2997 339.545L47.3968 342.238L47.2765 344.99L46.9989 347.788L46.1105 353.615L45.037 360.026L44.1717 366.851L43.9404 370.309L43.8848 373.671L44.0514 376.952L44.417 380.055L45.0185 382.948L45.8282 385.65L46.6935 387.787L47.3413 389.108L48.0493 390.379L49.4744 392.525L51.0708 394.557L52.8291 396.494L54.6846 398.316L58.5297 401.66L62.4165 404.722L66.2894 407.72L69.9217 410.691L73.2625 413.712L76.3997 416.928L79.2685 420.263L81.8366 423.63L84.2427 427.157L86.5007 430.902L88.4719 434.752L89.2862 436.666L89.9618 438.593L90.4662 440.507L90.7993 442.457L90.9566 444.544L90.9381 446.717L90.7068 449.05L90.295 451.505L89.6749 454.13L88.8883 456.905L86.7783 463.156L84.3121 469.89L81.9985 476.524L80.2726 482.688L79.722 485.618L79.412 488.333L79.3934 490.32L79.4906 491.787L79.6803 493.045L79.9163 493.938L80.2356 494.817L80.6243 495.651L80.8788 496.093L81.1471 496.489L81.4803 496.899L81.8967 497.332L82.3548 497.724L82.9054 498.116L83.308 498.357L83.7244 498.576L84.3028 498.817L85.1681 499.091L86.2601 499.341L87.4308 499.514L88.7865 499.596L90.4106 499.578L92.0394 499.478L94.5612 499.159L97.2218 498.681L102.899 497.323L108.942 495.642L114.976 493.956L120.769 492.58L123.629 492.074L126.336 491.737L129.339 491.628L130.32 491.655L131.277 491.732L132.596 491.951L133.896 492.284L134.563 492.511L135.15 492.762L135.738 493.081L136.293 493.455L136.812 493.878L137.288 494.348L137.506 494.598L137.709 494.858L138.01 495.3L138.334 495.901L138.662 496.676L138.884 497.341L139.06 498.011L139.218 498.89L139.361 500.476L139.398 502.093L139.269 504.376L139.019 506.813L138.315 511.998L137.811 517.22L137.853 520.327L137.936 521.193L138.084 522.086L138.463 523.53L138.797 524.442L139.13 525.152L139.393 525.608L139.74 526.109L140.249 526.715L140.828 527.28L141.457 527.799L142.207 528.31L142.679 528.579L143.243 528.852L143.956 529.13L145.196 529.485L146.903 529.827L148.611 530.055L151.794 530.16L155.278 530.105L162.326 529.895L165.694 530.037L168.803 530.415L170.571 530.861L172.306 531.463L173.213 531.85L174.051 532.274L174.907 532.793L175.962 533.572L176.947 534.429L177.951 535.417L179.538 537.363L181.001 539.427L183.911 543.564L185.683 545.5L186.47 546.22L187.4 546.922L188.594 547.651L189.894 548.284L190.967 548.703L192.055 549.027L193.337 549.278L195.59 549.505L197.885 549.537L201.055 549.255L204.372 548.735L210.776 547.391L213.728 546.803L216.528 546.375L219.471 546.193L220.6 546.22L221.678 546.325L222.987 546.571L224.186 546.904L225.171 547.273L226.198 547.765L227.128 548.316L228.304 549.173L229.28 549.997L230.261 550.94L231.455 552.312L232.755 554.034L233.981 555.811L237.41 561.775L240.894 568.395L244.716 574.988L246.859 578.114L249.177 581.071L251.731 583.814L254.438 586.288L257.066 588.265L258.621 589.281L260.296 590.261L262.975 591.582L264.738 592.302L266.533 592.931L269.879 593.842L273.335 594.493L276.93 594.903L280.627 595.068L284.343 594.981L288.008 594.635L291.575 594.02L295.027 593.117L298.048 592.024L299.71 591.295L301.459 590.42L304.591 588.57L307.654 586.429L310.639 584.01L313.572 581.358L319.065 575.758L324.257 570.14L329.49 564.86L332.137 562.591L334.88 560.591L337.481 559.078L339.017 558.34L340.72 557.665L342.858 557.014L344.935 556.567L347.165 556.253L350.548 556.121L353.907 556.28L357.248 556.681L360.371 557.183L366.016 558.13L368.418 558.404L370.755 558.499L372.624 558.376L373.864 558.203L375.178 557.943L377.524 557.26L379.949 556.367L385.159 553.98L390.619 551.282L396.074 548.735L401.354 546.526L406.606 544.484L411.945 542.361L417.197 540.001L422.171 537.472L426.771 534.962L431.097 532.62L435.562 530.315L440.166 528.045L444.654 525.795L448.726 523.512L450.526 522.35L452.248 521.134L455.417 518.532L458.342 515.744L461.062 512.96L463.69 510.34L466.49 507.839L467.98 506.672L469.516 505.588L471.103 504.604L472.746 503.711L476.239 502.143L480.135 500.676L484.267 499.091L486.326 498.189L488.339 497.177L490.25 496.029L492.055 494.744L493.651 493.354L494.461 492.548L495.229 491.701L496.599 489.946L497.829 488.069L498.921 486.069L499.902 483.973L501.596 479.622L503.049 475.266L504.395 471.106L505.728 467.261L507.185 463.607L508.893 459.893L510.827 456.13L512.905 452.43L515.047 448.913L517.273 445.541L519.679 442.051L522.182 438.415L524.648 434.734L527.05 431.057L529.498 427.157L531.982 422.965L534.416 418.605L536.748 414.263L539.066 409.971L541.588 405.442L544.327 400.726L547.229 396.024L550.269 391.473L553.526 386.903L557.006 382.141L560.435 377.23L561.994 374.751L563.419 372.204L564.659 369.575L565.696 366.86L566.505 363.958L567.074 360.932L567.357 357.798L567.403 354.581L567.195 351.346L566.852 348.211L566.015 342.247L565.705 339.509L565.524 336.803L565.552 334.133L565.793 331.481L566.302 328.774L567.01 326.054L569.064 319.972L571.396 313.183L572.372 309.611L573.094 305.934L573.404 302.394L573.423 300.476L573.316 298.571L572.997 296.252L572.46 293.819L571.78 291.445L570.48 288.037L569.036 284.798L566.177 278.674L565.002 275.713L564.071 272.715L563.567 270.031L563.382 268.304L563.326 266.573L563.442 264.436L563.715 262.399L564.136 260.253L565.057 257.037L566.209 253.774L569.032 246.79L571.725 239.39L572.84 234.766L573.053 233.458L573.192 232.087L573.219 229.927L573.076 228.036L572.868 226.733L572.562 225.517L572.155 224.369L571.591 223.148L570.846 221.872L570.281 221.065L569.601 220.2L568.759 219.302L567.648 218.309L566.237 217.256L564.77 216.3L561.878 214.801L558.764 213.507L552.295 211.315L546.09 209.219L543.245 208.035L540.644 206.713L538.761 205.483L537.498 204.485L536.947 203.984L536.42 203.456L535.448 202.316L534.573 201.095L533.967 200.079L533.44 199.031L532.857 197.583L532.283 195.66L532.042 194.607L531.839 193.446L531.617 191.218L531.561 189.081L531.621 186.948L531.982 183.495L532.588 179.914L534.375 172.742L536.563 165.707L538.817 158.754L540.913 151.528L542.477 144.216L542.935 140.639L543.143 137.263L543.046 134.21L542.888 132.602L542.662 131.166L542.259 129.517L541.639 127.704L541.329 126.97L541.014 126.305L540.482 125.38L539.76 124.35L539.085 123.535L538.382 122.801L537.646 122.154L536.716 121.48L535.874 120.961L535.008 120.487L533.866 119.967L532.487 119.466L531.001 119.006L528.887 118.5L526.726 118.099L522.395 117.489L518.124 116.978L514.117 116.441L510.226 115.739L506.542 114.837L503.104 113.698L499.805 112.299L496.77 110.718L494.1 109.055L491.712 107.306L489.473 105.424L487.326 103.401L485.068 101.105L482.731 98.5849L480.422 95.9833L478.201 93.3817L475.952 90.6753L473.653 87.8824L471.33 85.094L468.914 82.3147L466.259 79.4944L463.353 76.7424L461.793 75.4393L460.16 74.2046L458.374 73.0063L456.458 71.8581L454.348 70.7464L452.072 69.6757L447.088 67.712L441.753 65.976L436.409 64.3814L431.356 62.7776L426.687 60.9915L422.056 58.8228L417.382 56.2941L412.718 53.6241L408.077 51.0909L405.676 49.929L403.214 48.872L400.526 47.8924L397.666 47.013L394.58 46.2704L391.308 45.6462L384.257 44.8033L376.761 44.293L369.13 43.7462L361.672 42.8168L354.615 41.3496L348.072 39.395L341.965 37.1078L335.866 34.5563L329.295 31.7861L322.239 29.0205L314.947 26.5009L307.798 24.4278L301.186 22.9334L295.318 22.0495L292.63 21.8262L289.937 21.7351L287.253 21.7852L284.579 21.972L281.738 22.3137L278.804 22.7967L272.326 24.2593L265.349 26.3597L258.274 28.9932L251.523 31.9775Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M523.61 435.044L525.85 431.24L528.219 427.23L530.658 423.075L533.078 418.929L535.484 414.865L538.043 410.632L540.782 406.213L543.632 401.761L546.547 397.41L549.606 393.031L552.831 388.452L556.028 383.732L558.879 378.907L560.109 376.369L561.164 373.745L562.062 370.861L562.77 367.799L563.251 364.496L563.547 360.992L563.584 353.451L563.418 345.446L563.501 341.382L563.774 337.318L564.329 333.29L565.121 329.367L566.185 325.526L567.397 321.868L570.058 315.07L572.311 309.151L573.204 305.857L573.38 304.946L573.496 304.067L573.588 302.435L573.528 300.895L573.445 300.13L573.306 299.278L573.001 298.048L572.399 296.339L571.626 294.581L570.266 292.125L568.669 289.56L565.185 284.306L563.598 281.673L562.229 279.039L561.183 276.419L560.785 275.13L560.461 273.708L560.216 271.927L560.128 270.018L560.211 268.109L560.466 266.264L560.914 264.232L561.484 262.231L562.64 259.106L564.056 255.844L567.392 249.082L570.668 242.494L572.006 239.45L573.056 236.666L573.653 234.388L573.903 232.912L573.958 232.356L573.977 231.837L573.94 230.907L573.815 229.982L573.63 229.153L573.394 228.424L573.102 227.727L572.732 227.039L572.182 226.192L571.413 225.23L570.895 224.665L570.294 224.078L569.276 223.239L567.573 222.055L565.662 220.92L562.89 219.581L559.869 218.346L553.479 216.172L547.176 214.108L544.187 212.992L541.397 211.785L538.584 210.254L537.547 209.589L536.604 208.892L535.271 207.739L534.193 206.623L533.596 205.907L533.054 205.155L532.286 203.903L531.565 202.449L531.157 201.442L530.778 200.317L530.371 198.672L530.042 196.64L529.853 194.462L529.89 191.259L530.195 187.906L530.769 184.502L531.551 181.021L533.554 174.141L535.849 167.33L538.26 160.094L540.43 152.504L541.282 148.658L541.911 144.945L542.258 141.318L542.332 137.919L542.128 135.263L541.869 133.527L541.513 131.873L541.069 130.452L540.333 128.661L539.93 127.841L539.519 127.103L538.917 126.192L538.056 125.112L537.385 124.383L536.645 123.672L535.826 122.993L534.6 122.164L533.235 121.394L531.329 120.546L529.334 119.849L525.276 118.77L521.274 117.922L517.345 117.106L513.658 116.236L510.136 115.193L506.777 113.931L505.171 113.206L503.607 112.414L500.415 110.518L497.157 108.236L493.914 105.643L490.776 102.873L487.843 100.075L485.182 97.3553L482.776 94.7673L480.462 92.1839L478.13 89.5459L475.78 86.9306L473.36 84.3882L470.653 81.8094L467.641 79.3217L466.021 78.169L464.323 77.1028L462.5 76.1324L460.575 75.253L458.414 74.4375L456.078 73.6766L450.854 72.3188L445.171 71.075L439.415 69.7354L433.983 68.1316L431.484 67.1976L429.12 66.1861L426.945 65.1063L424.831 63.9217L420.731 61.2882L416.617 58.4588L412.416 55.7342L410.241 54.504L408.002 53.3968L405.549 52.3853L402.944 51.4969L400.08 50.7451L397.012 50.1163L390.284 49.2734L383.02 48.7586L375.579 48.1799L368.319 47.1457L364.844 46.3893L361.508 45.4918L358.334 44.4484L355.289 43.2911L349.593 40.6941L343.99 37.7462L338.206 34.5614L332.283 31.3994L326.361 28.5244L320.327 26.0504L313.641 23.9089L306.233 22.214L302.318 21.5898L298.274 21.1205L294.188 20.8426L290.051 20.7515L285.919 20.8608L281.861 21.1524L277.864 21.6308L274.009 22.2687L270.294 23.0706L266.759 23.9909L263.427 25.0252L260.253 26.1597L254.386 28.7021L248.634 31.7092L242.994 35.0626L237.658 38.5526L232.735 42.0245L228.002 45.5783L223.402 49.2005L219.067 52.7316L214.995 56.1078L210.895 59.4657L206.768 62.6778L202.589 65.5528L200.373 66.8468L198.064 68.0086L195.533 69.0474L192.831 69.9313L189.893 70.6148L186.76 71.0886L183.415 71.3028L179.884 71.2982L172.393 70.6512L164.675 69.6124L157.29 68.9016L153.898 68.8925L150.752 69.1249L148.716 69.4848L146.934 69.9313L145.347 70.4462L144.084 70.9793L142.511 71.804L141.113 72.6696L140.082 73.4305L138.976 74.3873L137.911 75.4261L136.607 76.9252L135.422 78.5016L133.317 81.7821L131.475 85.0443L129.782 88.2018L128.12 91.3228L126.515 94.3163L124.955 97.2003L123.415 100.062L121.952 102.859L120.537 105.657L119.135 108.532L117.728 111.425L116.229 114.332L114.494 117.302L113.526 118.765L112.495 120.159L111.398 121.467L110.246 122.656L109.038 123.69L108.427 124.146L107.747 124.597L106.715 125.176L105.864 125.572L104.934 125.941L103.384 126.429L101.755 126.816L98.3587 127.34L94.7496 127.7L91.1311 128.174L89.3589 128.529L87.6238 128.98L85.9302 129.559L84.3107 130.265L82.8439 131.076L82.0805 131.572L81.3448 132.096L79.9335 133.267L78.5638 134.58L77.2312 136.015L75.9356 137.559L74.7094 139.177L73.5342 140.872L71.3733 144.508L69.2865 148.677L67.2505 153.306L65.3349 158.19L63.6275 163.12L62.1468 167.959L60.7818 172.802L59.3104 177.982L57.5983 183.445L55.5994 188.972L53.3414 194.298L50.889 199.255L48.2561 203.903L45.3549 208.646L42.3982 213.539L39.7191 218.523L38.5854 221.052L37.5999 223.645L36.7577 226.424L36.0683 229.331L35.5362 232.484L35.1243 235.828L34.5969 243.054L34.0277 250.759L32.8756 258.605L31.9548 262.496L30.8581 266.277L28.2022 273.485L25.4999 280.019L24.3709 282.971L23.4455 285.787L22.7977 288.648L22.6218 289.819L22.5293 291.054L22.5524 292.671L22.7098 294.18L22.8717 295.077L23.1169 296.057L23.5519 297.323L24.3478 299.068L25.3518 300.836L27.0824 303.251L29.1276 305.716L33.8334 310.655L38.6271 315.58L43.1385 320.751L45.0866 323.399L46.7477 325.991L48.0711 328.529L48.6124 329.764L49.1029 331.035L49.6813 332.953L50.0052 334.416L50.2366 335.896L50.4078 338.384L50.3615 340.881L50.1209 343.487L49.7415 346.157L48.6448 352.158L47.4186 358.864L46.4701 365.954L46.2295 369.521L46.1832 372.966L46.3822 376.305L46.794 379.458L47.4279 382.274L47.8628 383.75L48.3302 385.108L49.1677 387.058L49.8988 388.471L50.6808 389.806L52.1337 391.874L53.7624 393.82L55.5346 395.656L57.3901 397.369L61.2306 400.513L65.085 403.42L68.8978 406.29L72.4468 409.16L75.7274 412.136L78.7767 415.284L81.5345 418.501L84.0007 421.713L86.3698 425.125L88.6047 428.707L90.5527 432.37L91.3671 434.229L92.0473 436.138L92.5979 438.184L92.9959 440.325L93.218 442.658L93.2642 445.132L93.093 447.756L92.7321 450.513L92.1584 453.356L91.4134 456.29L89.4607 462.4L87.0639 468.943L84.6809 475.49L82.8162 481.536L82.1684 484.361L81.7381 486.999L81.5992 489.254L81.6085 490.498L81.701 491.66L81.8815 492.64L82.173 493.687L82.4923 494.521L82.6403 494.84L82.8301 495.186L83.1447 495.669L83.5056 496.125L83.9082 496.544L84.394 496.973L84.7087 497.2L85.0881 497.446L85.5554 497.697L86.2773 498.007L87.2027 498.308L87.8598 498.472L88.5122 498.599L89.6227 498.727L91.2561 498.795L92.9033 498.759L95.3464 498.513L97.9376 498.093L103.472 496.808L109.455 495.114L115.525 493.332L121.48 491.783L124.47 491.168L127.329 490.721L130.11 490.489L132.655 490.475L134.21 490.635L135.737 490.922L136.389 491.095L136.967 491.286L137.694 491.596L138.402 491.974L139.059 492.416L139.503 492.767L139.952 493.186L140.308 493.587L140.669 494.075L141.016 494.653L141.34 495.319L141.627 496.07L141.821 496.749L142.039 497.897L142.155 498.868L142.229 499.902L142.205 502.053L142.034 504.34L141.368 509.365L140.632 514.537L140.183 519.626L140.234 522.533L140.304 523.326L140.419 524.114L140.697 525.312L141.039 526.342L141.331 527.016L141.488 527.322L141.659 527.599L141.956 528.01L142.293 528.392L142.663 528.748L143.066 529.071L143.492 529.354L143.769 529.509L144.056 529.65L144.487 529.818L145.111 529.996L146.018 530.174L146.883 530.274L147.726 530.324L149.988 530.21L152.505 529.905L158.169 528.912L164.383 528.014L168.224 527.873L169.297 527.909L170.403 528.01L172.115 528.315L173.693 528.738L174.591 529.053L175.516 529.449L176.377 529.914L177.358 530.556L178.431 531.408L179.44 532.329L180.176 533.112L181.346 534.602L182.508 536.224L185.377 540.498L187.431 542.972L188.07 543.61L188.754 544.198L190.087 545.164L191.355 545.925L192.308 546.389L193.284 546.772L194.441 547.1L196.186 547.437L197.638 547.606L199.077 547.683L200.951 547.629L203.251 547.392L205.68 547.032L212.311 545.519L218.201 544.07L221.436 543.555L222.19 543.492L222.986 543.478L224.258 543.564L225.355 543.738L226.262 543.961L227.146 544.266L228.117 544.717L229.381 545.442L230.287 546.057L231.208 546.781L232.365 547.87L233.735 549.374L235.09 551.059L236.886 553.716L238.63 556.65L241.976 563.083L245.39 569.767L247.227 573.034L249.185 576.164L251.332 579.126L253.645 581.846L255.926 584.046L257.305 585.195L258.86 586.334L261.261 587.805L263.177 588.794L265.144 589.655L268.258 590.735L270.372 591.314L272.496 591.783L276.448 592.375L280.543 592.653L284.665 592.594L288.756 592.202L292.758 591.469L296.594 590.425L299.93 589.177L301.758 588.357L303.632 587.404L306.769 585.5L309.731 583.345L312.576 580.916L315.311 578.287L320.461 572.692L325.227 567.175L330.072 561.926L332.566 559.598L335.115 557.543L337.507 555.989L338.923 555.215L340.501 554.495L342.491 553.784L344.43 553.269L346.521 552.886L348.543 552.691L350.75 552.645L352.962 552.713L356.215 553.05L359.343 553.529L365.238 554.54L368 554.914L370.675 555.128L373.451 555.096L374.571 555.01L375.764 554.859L377.712 554.467L379.147 554.076L380.563 553.615L382.997 552.631L385.468 551.483L390.567 548.845L395.735 546.207L400.82 543.888L405.855 541.851L411.056 539.837L416.266 537.641L421.235 535.217L425.816 532.698L430.064 530.256L434.33 527.845L438.744 525.522L443.14 523.344L447.258 521.28L450.928 519.207L454.319 516.911L457.419 514.359L460.154 511.685L462.556 509.028L464.897 506.308L467.289 503.675L468.543 502.445L469.866 501.283L471.329 500.162L472.911 499.109L474.674 498.112L476.585 497.173L478.653 496.321L480.856 495.519L485.497 494.052L490.138 492.521L492.322 491.624L494.372 490.617L496.162 489.509L497.079 488.844L497.925 488.161L499.068 487.081L499.906 486.165L500.72 485.163L501.849 483.518L502.825 481.8L503.663 480.06L504.413 478.274L505.704 474.633L506.985 470.665L508.378 466.432L509.919 462.14L511.561 457.989L513.273 454.108L515.069 450.426L517.063 446.644L519.21 442.749L521.413 438.849L523.61 435.044Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M536.21 128.579L537.205 129.814L538.727 131.937L539.588 133.536L540.05 134.593L540.448 135.673L540.888 137.281L541.124 138.525L541.281 139.783L541.365 142.065L541.244 144.475L540.902 147.041L540.374 149.747L538.727 155.834L536.45 162.627L533.841 169.694L531.268 176.592L529.01 183.199L527.192 189.901L526.539 193.277L526.104 196.571L525.938 199.806L526.044 202.886L526.377 205.315L526.724 206.9L527.182 208.459L527.761 209.903L528.51 211.388L528.987 212.181L529.556 213.001L530.366 213.994L531.402 215.051L532.226 215.771L533.082 216.441L534.378 217.302L536.02 218.222L537.82 219.102L540.522 220.191L543.41 221.184L549.518 223.034L555.496 225.002L558.341 226.191L560.91 227.517L562.58 228.656L563.727 229.599L564.329 230.173L564.935 230.852L565.592 231.732L566.175 232.675L566.67 233.659L566.966 234.402L567.239 235.254L567.457 236.256L567.623 237.55L567.684 239.113L567.623 240.657L567.415 242.261L566.939 244.48L566.342 246.685L565.268 249.802L564.024 253.018L561.289 259.862L560.012 263.466L558.915 267.202L558.022 271.749L557.832 273.266L557.717 274.765L557.712 277.763L557.879 280.005L558.179 282.192L559.036 285.759L560.155 289.158L562.811 295.473L565.079 301.191L566.041 304.69L566.245 305.716L566.416 306.841L566.568 308.987L566.559 310.682L566.425 312.486L565.944 315.284L565.217 318.045L564.264 320.847L563.163 323.676L560.613 329.85L558.138 336.634L557.106 340.215L556.245 343.92L555.616 347.697L555.181 351.538L554.853 359.256L554.839 366.778L554.626 373.818L554.325 377.071L553.895 380.137L553.307 382.976L552.576 385.682L551.72 388.197L550.716 390.666L548.347 395.528L545.696 400.321L543.012 404.918L540.43 409.26L537.894 413.557L535.372 417.926L532.938 422.255L530.667 426.405L528.529 430.388L526.382 434.488L524.258 438.666L522.231 442.771L520.339 446.708L518.516 450.599L516.688 454.613L514.879 458.664L513.12 462.532L511.367 466.026L510.427 467.639L509.437 469.152L508.364 470.564L507.216 471.831L506.147 472.788L505.416 473.335L504.662 473.799L503.936 474.15L503.121 474.46L502.46 474.656L501.728 474.815L500.886 474.929L499.628 474.998L498.281 474.984L496.458 474.843L494.566 474.633L490.697 474.241L488.569 474.269L487.847 474.332L487.084 474.451L486.01 474.711L484.96 475.066L484.386 475.307L483.831 475.581L483.067 476.027L482.068 476.747L481.091 477.595L480.323 478.374L479.569 479.271L478.875 480.183L477.931 481.572L477.089 482.976L475.608 485.741L474.192 488.539L472.763 491.277L471.282 493.911L469.621 496.571L467.793 499.177L465.762 501.679L464.614 502.918L463.379 504.13L462.055 505.297L460.653 506.413L459.154 507.461L457.581 508.445L454.004 510.368L450.025 512.272L445.948 514.218L442.075 516.25L438.531 518.405L435.019 520.829L431.461 523.389L427.773 525.872L423.71 528.21L419.06 530.401L413.929 532.42L408.644 534.365L403.582 536.411L398.918 538.703L394.374 541.336L389.849 544.088L387.605 545.355L385.347 546.476L382.709 547.496L381.779 547.788L380.738 548.052L378.656 548.426L377.212 548.585L375.662 548.663L372.955 548.562L370.161 548.257L364.404 547.177L358.264 545.961L355.085 545.555L351.934 545.387L349.227 545.528L347.52 545.747L345.882 546.079L344.087 546.608L342.231 547.337L340.45 548.212L338.835 549.182L337.188 550.362L335.614 551.638L333.329 553.802L331.085 556.199L326.735 561.402L322.219 566.983L317.291 572.542L314.607 575.162L311.752 577.617L308.583 579.955L305.145 582.096L301.147 584.083L299.43 584.798L297.533 585.481L293.794 586.534L291.629 586.98L289.283 587.322L285.739 587.564L283.374 587.55L280.885 587.377L277.766 586.912L275.341 586.356L272.866 585.609L270.187 584.547L267.892 583.417L265.749 582.169L263.63 580.684L261.752 579.135L259.924 577.408L258.193 575.481L256.782 573.654L255.468 571.763L253.589 568.61L251.877 565.352L248.8 558.85L245.621 552.604L243.479 549.351L242.692 548.339L241.85 547.391L240.208 545.824L238.824 544.717L237.885 544.079L236.899 543.514L235.502 542.858L233.757 542.22L232.203 541.792L230.634 541.477L228.843 541.277L226.16 541.204L223.3 541.295L219.418 541.71L215.443 542.279L207.767 543.304L203.39 543.432L202.187 543.382L200.974 543.254L199.494 542.963L197.911 542.507L196.731 542.061L195.565 541.505L194.769 541.031L193.853 540.352L192.687 539.327L191.623 538.247L190.105 536.315L188.735 534.265L186.103 530.128L184.474 528.155L183.766 527.444L182.998 526.797L181.92 526.064L180.832 525.453L179.87 525.016L178.792 524.633L177.723 524.364L175.997 524.095L174.766 523.991L173.438 523.936L170.509 524.095L167.437 524.478L161.482 525.563L156.031 526.46L153.074 526.629L152.153 526.615L151.353 526.547L150.474 526.387L149.595 526.15L148.896 525.891L148.378 525.649L147.915 525.371L147.545 525.102L147.156 524.747L146.795 524.36L146.434 523.886L146.115 523.385L145.847 522.865L145.643 522.355L145.407 521.562L145.162 520.382L145 519.116L144.954 516.974L145.088 514.678L145.754 509.716L146.582 504.741L147.193 499.984L147.295 497.765L147.221 495.701L146.999 494.298L146.74 493.282L146.55 492.73L146.291 492.152L145.916 491.487L145.481 490.853L145.023 490.316L144.574 489.874L144.366 489.696L144.088 489.482L143.533 489.126L142.76 488.716L141.835 488.334L141.118 488.092L140.4 487.905L139.345 487.732L137.37 487.573H135.348L132.451 487.855L129.332 488.375L122.915 489.978L116.599 491.947L110.458 493.951L104.596 495.651L101.884 496.243L99.3254 496.635L97.1368 496.744L95.9152 496.708L94.7168 496.567L93.6017 496.312L92.7456 496.034L91.9914 495.715L91.4917 495.451L90.9549 495.095L90.3858 494.639L89.8629 494.129L89.391 493.573L88.9653 492.976L88.6784 492.494L88.4332 491.988L88.1833 491.359L87.8872 490.357L87.6095 488.958L87.5031 488.142L87.4337 487.249L87.4383 485.727L87.6234 483.463L87.9427 481.189L88.6645 477.877L89.6131 474.378L91.8757 467.448L94.1754 460.75L96.2067 454.039L96.998 450.722L97.5903 447.524L97.9327 444.43L98.053 441.491L97.9188 438.739L97.5903 436.156L97.0628 433.777L96.3918 431.568L95.6098 429.554L94.7446 427.668L92.8567 424.255L90.7236 420.906L88.4378 417.562L86.0733 414.313L83.6024 411.197L80.8539 408.08L77.8463 405.073L74.6443 402.257L71.1369 399.455L67.4769 396.635L63.8816 393.705L62.1094 392.106L60.3881 390.398L58.7825 388.58L57.325 386.643L56.0525 384.552L55.5065 383.495L54.9836 382.329L54.123 379.923L53.7204 378.51L53.3919 377.098L52.9246 374.146L52.6608 371.002L52.6377 367.744L52.795 364.354L53.5816 357.579L54.6829 351.087L55.724 345.136L56.4366 339.605L56.5939 336.903L56.5846 334.247L56.3671 331.668L55.9276 329.126L55.289 326.847L54.8356 325.585L54.2711 324.259L52.9847 321.785L51.4254 319.307L49.5653 316.837L47.4738 314.368L42.8282 309.607L37.928 304.855L35.5728 302.412L33.4305 299.938L31.4038 297.086L30.7051 295.915L30.0943 294.726L29.266 292.721L28.7015 290.876L28.4887 289.937L28.3221 288.99L28.1602 287.313V285.372L28.2434 284.165L28.3915 282.962L28.7385 281.167L29.3169 279.135L30.0573 277.016L31.3112 274.159L32.7503 271.362L35.9893 265.78L39.1727 260.235L40.5377 257.534L41.6853 254.927L42.5413 252.453L43.1706 249.993L43.5269 247.592L43.6703 245.168L43.6148 242.689L43.4297 240.17L42.8513 234.666L42.4534 228.72L42.4811 225.695L42.6893 222.747L43.1197 219.886L43.7397 217.152L44.5402 214.596L45.5304 212.108L46.6872 209.707L47.9874 207.37L50.9071 202.827L53.9888 198.553L57.0103 194.589L60.0318 190.685L63.0163 186.826L65.862 183.121L68.5411 179.563L71.2156 175.973L73.8531 172.446L76.3841 169.088L78.8735 165.812L81.3814 162.573L83.843 159.479L86.1751 156.559L88.5211 153.62L90.8717 150.708L93.1436 147.915L95.3276 145.182L97.5023 142.402L99.6216 139.65L101.616 136.944L103.545 134.151L105.442 131.24L107.242 128.315L108.88 125.458L110.384 122.615L111.833 119.676L113.23 116.733L114.563 113.858L115.895 110.964L117.269 108.039L118.639 105.169L120.013 102.39L121.471 99.5648L123.007 96.7399L124.645 93.9105L126.491 91.0173L128.546 88.1788L129.675 86.8028L130.882 85.4769L132.197 84.1921L133.608 82.9892L135.357 81.7545L135.982 81.3718L136.671 80.9982L137.957 80.4241L138.957 80.0687L139.979 79.7953L141.122 79.604L142.376 79.4946L143.635 79.4855L145.745 79.6677L148.026 80.014L153.472 81.1667L159.811 82.5154L163.134 83.0621L166.428 83.4449L169.658 83.5861L172.73 83.5177L175.631 83.1852L178.343 82.6566L180.823 81.9231L183.127 81.0346L185.191 80.0322L187.162 78.8841L189.036 77.6311L190.841 76.2825L194.362 73.3665L197.768 70.3138L201.187 67.1472L204.755 63.8303L208.396 60.4633L212.116 57.0689L216.068 53.5378L220.154 49.9931L224.313 46.5076L228.83 42.9036L233.628 39.2814L238.602 35.7913L243.905 32.3878L249.666 29.0572L255.699 25.9635L261.793 23.3164L264.852 22.2001L267.957 21.2205L271.27 20.3457L274.735 19.5848L282.185 18.4686L290.074 17.9719L298.061 18.1542L305.783 19.0062L309.443 19.6668L312.951 20.4596L316.255 21.3754L319.48 22.4325L325.675 24.9293L331.788 27.9592L337.692 31.3353L343.184 34.8527L348.26 38.402L353.253 42.0926L358.139 45.7512L362.873 49.1729L367.708 52.335L370.202 53.7793L372.673 55.0687L375.153 56.1759L377.578 57.0871L379.915 57.7569L382.247 58.2398L384.528 58.5132L386.828 58.6317L391.538 58.4995L396.6 58.1988L401.907 58.1305L404.531 58.3127L407.048 58.6544L409.417 59.1921L411.698 59.9165L413.845 60.8323L415.909 61.9349L417.885 63.2152L419.763 64.6231L421.54 66.1312L423.201 67.6803L426.251 70.8196L429.203 74.0044L432.238 77.0297L433.844 78.3966L435.542 79.6404L437.689 80.9116L438.596 81.3672L439.512 81.7773L441.844 82.6202L444.384 83.3036L447.156 83.7866L450.127 84.1192L456.452 84.3607L462.837 84.4472L468.765 84.8208L471.439 85.199L473.896 85.6865L476.099 86.3107L478.116 87.0306L479.879 87.8371L481.536 88.7529L483.063 89.7461L484.525 90.8259L487.315 93.1359L489.929 95.5143L492.368 97.8334L494.728 100.125L497.124 102.444L499.544 104.727L501.969 106.905L504.533 109.046L507.286 111.133L510.145 113.074L513.065 114.819L516.207 116.487L519.501 118.095L522.851 119.685L526.363 121.426L529.848 123.398L531.532 124.506L533.147 125.722L535.072 127.467L536.21 128.579Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M476.441 93.1088L478.093 92.8992L480.698 92.6896L482.308 92.7579L483.377 92.8809L484.497 93.0769L485.881 93.4277L486.954 93.7785L488.074 94.2159L489.846 95.0452L491.6 96.0202L493.335 97.1091L495.056 98.3029L498.355 100.868L501.418 103.511L504.199 106.062L506.74 108.44L509.261 110.75L511.867 112.997L514.527 115.12L517.29 117.147L520.237 119.175L523.259 121.207L526.294 123.33L529.334 125.736L530.787 127.08L532.152 128.538L533.498 130.288L534.007 131.053L534.512 131.914L535.511 133.969L535.951 135.062L536.358 136.247L537.006 138.821L537.26 140.175L537.459 141.623L537.654 144.649L537.63 147.865L537.348 151.187L536.848 154.631L536.15 158.058L535.284 161.498L533.202 168.177L530.791 174.738L528.228 181.349L525.827 187.805L523.883 193.87L523.134 196.763L522.546 199.624L522.139 202.467L521.926 205.228L521.944 207.916L522.176 210.463L522.564 212.454L522.925 213.748L523.393 215.042L523.99 216.323L524.707 217.544L525.16 218.2L525.646 218.833L526.562 219.854L527.747 220.966L529.098 222.036L530.602 223.025L532.092 223.863L533.614 224.624L536.201 225.713L538.963 226.72L544.886 228.647L547.916 229.677L550.859 230.83L554.163 232.461L555.204 233.085L556.181 233.759L557.828 235.099L558.924 236.17L559.618 236.972L560.303 237.915L560.965 239.031L561.576 240.329L562.066 241.687L562.293 242.494L562.492 243.428L562.654 244.644L562.728 246.485L562.658 248.248L562.478 249.98L561.761 253.451L560.701 257.023L558.027 264.004L555.366 270.596L554.26 273.768L553.353 276.939L552.664 280.629L552.516 281.905L552.423 283.304L552.437 285.832L552.585 287.728L552.844 289.605L553.543 292.671L554.468 295.688L556.694 301.574L558.929 307.748L559.748 310.969L560.289 314.263L560.442 317.056L560.414 318.92L560.271 320.897L559.753 324.169L558.975 327.353L557.99 330.433L556.865 333.409L554.427 339.086L551.924 344.831L549.587 350.986L547.63 357.584L546.204 364.5L545.298 371.526L544.761 378.397L544.317 384.853L543.71 390.694L542.771 395.947L541.374 401.059L539.56 406.185L537.496 411.238L535.358 416.04L533.244 420.483L531.115 424.711L528.913 428.93L526.715 433.071L524.568 436.949L522.412 440.452L520.052 443.76L518.798 445.305L517.512 446.735L516.184 448.011L514.791 449.155L513.454 450.052L512.662 450.508L511.792 450.955L510.182 451.638L508.526 452.189L506.846 452.608L505.148 452.95L501.654 453.497L498.355 454.139L496.768 454.577L495.26 455.092L493.867 455.702L492.539 456.431L491.285 457.288L490.105 458.254L488.99 459.324L487.94 460.482L486.968 461.712L486.061 463.01L485.205 464.405L484.395 465.876L482.827 469.093L481.332 472.496L479.902 475.859L478.551 478.998L477.256 481.85L475.904 484.589L474.447 487.204L472.874 489.641L471.999 490.84L471.055 492.011L470.037 493.154L468.941 494.261L467.761 495.314L466.502 496.312L465.105 497.287L463.596 498.234L460.255 500.048L456.702 501.738L453.176 503.374L449.752 505.105L446.388 507.101L443.186 509.338L440.206 511.73L437.24 514.268L434.131 516.847L430.771 519.275L428.921 520.414L426.954 521.494L422.493 523.508L417.552 525.33L412.504 527.075L407.738 528.948L405.554 529.987L403.425 531.121L399.256 533.727L395.101 536.548L392.991 537.906L390.825 539.158L388.516 540.279L386.083 541.213L383.547 541.888L382.094 542.161L380.636 542.343L378.3 542.448L376.454 542.407L374.626 542.275L371.53 541.815L368.416 541.181L362.415 539.742L359.49 539.104L356.64 538.625L353.508 538.393H352.3L351.134 538.457L349.394 538.689L347.784 539.045L346.113 539.573L344.684 540.174L343.124 540.995L341.551 541.992L339.362 543.687L337.229 545.633L335.17 547.783L333.139 550.103L329.104 555.146L324.963 560.477L320.618 565.749L318.258 568.346L315.746 570.874L313.108 573.234L310.313 575.412L307.31 577.39L304.122 579.121L300.536 580.643L298.796 581.244L297.038 581.755L293.563 582.497L291.55 582.784L289.38 582.967L286.109 582.985L283.939 582.844L281.685 582.547L278.886 581.955L276.72 581.317L274.55 580.506L272.371 579.481L270.404 578.351L268.475 577.034L266.809 575.681L265.166 574.1L263.639 572.41L261.576 569.658L259.702 566.687L258.045 563.607L256.523 560.431L253.719 553.962L250.98 547.966L249.457 545.191L247.815 542.694L246.399 541.013L245.223 539.856L244.636 539.354L243.937 538.83L242.729 538.06L241.448 537.4L240.217 536.889L238.954 536.493L237.616 536.201L235.821 535.978L234.47 535.901H233.012L231.138 536.037L228.908 536.361L226.553 536.807L220.066 538.539L213.75 540.316L210.636 540.99L207.688 541.414L205.583 541.473L203.825 541.377L203.107 541.286L202.353 541.145L201.46 540.894L200.498 540.534L199.489 540.052L198.855 539.687L198.193 539.245L197.578 538.758L196.949 538.152L196.088 537.158L195.264 536.028L194.131 534.015L193.113 531.846L191.239 527.59L189.652 524.629L189.369 524.196L189.036 523.736L188.148 522.701L187.398 521.977L186.774 521.476L186.445 521.248L186.103 521.034L185.381 520.656L184.525 520.3L183.456 519.963L182.785 519.808L182.119 519.685L181.133 519.585L179.208 519.562L177.149 519.685L174.428 520.068L171.56 520.61L165.549 521.872L162.486 522.387L159.64 522.706L157.414 522.715L155.67 522.574L155.129 522.492L154.638 522.387L153.953 522.187L153.194 521.89L152.468 521.53L151.866 521.161L151.496 520.897L151.163 520.615L150.816 520.264L150.497 519.886L150.173 519.412L149.858 518.851L149.59 518.268L149.345 517.603L149.187 517.033L149.021 516.086L148.901 514.805L148.854 513.534L148.965 511.315L149.234 508.987L150.053 504.144L150.886 499.41L151.182 497.173L151.348 495.05L151.32 492.803L151.242 491.951L151.112 491.186L150.853 490.211L150.576 489.45L150.284 488.84L150.085 488.489L149.821 488.101L149.391 487.573L148.905 487.076L148.364 486.621L147.79 486.215L147.489 486.033L147.179 485.869L146.494 485.568L145.449 485.213L144.31 484.93L143.093 484.73L141.654 484.639L139.776 484.652L137.777 484.785L134.829 485.222L131.711 485.864L125.473 487.596L119.467 489.559L113.512 491.55L107.89 493.223L105.29 493.838L102.814 494.293L100.436 494.539L98.2427 494.585L96.8175 494.462L95.4942 494.23L95.0037 494.107L94.4947 493.947L93.8006 493.665L93.1899 493.346L92.6624 493.004L92.2691 492.699L91.8665 492.316L91.538 491.947L91.2141 491.5L90.8994 490.963L90.6357 490.402L90.5015 490.061L90.3673 489.651L90.2146 489.013L90.0527 487.896L89.9879 486.949L89.9786 485.942L90.1036 484.415L90.3303 482.885L90.6172 481.372L91.2788 478.779L92.1164 475.982L94.2448 469.922L96.6047 463.616L98.8257 457.306L100.704 450.854L101.408 447.633L101.917 444.517L102.185 441.5L102.245 438.63L102.065 435.933L101.695 433.399L101.144 431.071L100.464 428.902L99.6817 426.93L98.8211 425.084L96.9841 421.749L94.9574 418.478L92.8336 415.193L90.6912 411.949L88.4979 408.746L86.1103 405.474L83.5284 402.262L80.7799 399.237L77.7584 396.271L74.5471 393.346L71.3498 390.439L68.1478 387.268L66.6394 385.555L65.2374 383.732L63.8492 381.536L63.3634 380.629L62.9192 379.709L61.9845 377.349L61.221 374.784L60.6611 371.963L60.2771 368.929L60.1105 365.712L60.1059 362.313L60.5131 355.192L61.1516 347.82L61.6143 340.425L61.6513 336.776L61.5218 333.194L61.1701 329.691L60.5917 326.296L59.745 323.034L58.6437 319.918L57.3897 317.22L56.5846 315.744L55.6546 314.222L53.8083 311.666L51.7585 309.261L49.5005 306.946L47.0944 304.704L42.0878 300.367L37.3311 296.066L35.2212 293.865L33.4258 291.701L32.3153 290.011L31.5565 288.598L31.2789 287.978L31.0429 287.363L30.7005 286.215L30.4645 285.035L30.3395 283.928L30.3164 282.821L30.3812 281.8L30.594 280.483L30.8624 279.358L31.2233 278.164L31.8249 276.661L32.63 274.984L33.523 273.348L35.087 270.874L36.8453 268.318L40.5516 263.215L44.0451 258.03L45.6553 255.228L47.1083 252.262L48.3391 249.105L49.3247 245.779L49.9956 242.289L50.4028 238.671L50.5092 234.962L50.4305 231.167L49.991 223.626L49.8336 216.432L50.0326 213.074L50.412 209.912L51.0228 206.978L51.7955 204.24L52.7302 201.761L53.8037 199.419L54.9744 197.255L56.27 195.164L59.0833 191.163L62.003 187.382L64.8579 183.841L67.6944 180.342L70.4892 176.857L73.159 173.481L75.6947 170.205L78.2072 166.888L80.6503 163.616L82.9639 160.463L85.2358 157.301L87.48 154.112L89.6177 151.009L91.6213 148.016L93.6155 144.927L95.5728 141.792L97.4376 138.721L99.182 135.696L100.917 132.538L102.62 129.294L104.244 126.1L105.771 123.011L107.312 119.895L108.922 116.715L110.574 113.589L112.226 110.668L113.855 107.967L115.585 105.278L117.404 102.604L119.282 100.039L121.323 97.5921L122.447 96.4257L123.664 95.3322L125.136 94.2341L125.746 93.8469L126.38 93.5006L127.62 92.9402L128.606 92.5894L129.619 92.316L131.137 92.0472L132.4 91.915L133.659 91.8558L135.968 91.9333L138.452 92.1793L143.783 93.1133L149.558 94.2934L155.513 95.2046L158.409 95.396L161.158 95.4005L163.74 95.1727L166.141 94.7718L167.978 94.2888L169.167 93.8924L170.343 93.4459L172.143 92.5939L173.868 91.6007L175.507 90.4889L177.084 89.2907L180.106 86.7255L182.961 84.0464L185.885 81.1897L188.856 78.2327L191.822 75.2711L194.945 72.1501L198.166 68.9562L201.405 65.776L204.856 62.4317L208.433 59.0282L212.065 55.6612L215.961 52.1529L220.047 48.6218L224.235 45.1682L228.765 41.6417L233.595 38.1151L238.616 34.7253L243.928 31.4722L249.721 28.2828L255.838 25.303L262.052 22.7151L268.304 20.6375L275.022 19.0109L282.384 17.8582L290.232 17.2659L298.25 17.3023L306.075 17.9721L309.809 18.5416L313.39 19.2433L316.777 20.0771L320.053 21.0475L323.186 22.141L326.263 23.3803L332.362 26.2781L338.257 29.5996L343.703 33.1215L348.64 36.7301L353.373 40.5618L357.839 44.4665L361.966 48.2892L366.033 52.1438L370.045 55.8662L373.987 59.2287L376.06 60.8006L378.166 62.2449L380.331 63.5343L382.524 64.6324L384.718 65.4889L385.796 65.8261L386.98 66.1359L389.317 66.5505L391.691 66.7692L394.152 66.7966L396.669 66.6872L401.75 66.2362L407.039 65.8261L409.69 65.7896L412.235 65.9127L414.752 66.2589L415.881 66.4913L416.932 66.7601L418.579 67.3069L419.782 67.8081L420.934 68.3776L422.327 69.2023L423.377 69.9313L424.455 70.7559L426.056 72.1684L427.537 73.6582L428.907 75.1937L430.193 76.7793L432.581 80.0506L434.779 83.3357L436.824 86.4749L438.915 89.5822L441.076 92.5165L442.2 93.8651L443.39 95.1317L444.935 96.5168L445.481 96.9405L446.036 97.3278L447.253 98.0523L448.105 98.4669L449.049 98.8268L450.043 99.0956L451.159 99.3007L451.797 99.369L452.5 99.41L453.815 99.3827L455.184 99.2551L456.628 99.0364L458.9 98.5079L461.315 97.8108L466.539 96.0293L471.745 94.2888L476.441 93.1088Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M520.316 198.148L518.77 203.852L518.238 206.372L517.85 208.736L517.646 210.882L517.6 212.96L517.743 214.933L517.877 215.871L518.081 216.878L518.609 218.787L518.983 219.826L519.409 220.838L520.385 222.738L521.015 223.772L521.695 224.76L523.009 226.369L523.953 227.362L524.948 228.282L526.498 229.504L527.752 230.351L529.052 231.126L531.449 232.319L534.031 233.395L539.514 235.226L545.367 237.03L548.213 238.046L550.883 239.199L553.312 240.561L554.404 241.304L555.468 242.17L556.491 243.19L557.351 244.22L557.99 245.159L558.3 245.687L558.578 246.234L558.98 247.195L559.369 248.43L559.674 249.824L559.79 250.585L559.873 251.446L559.906 252.795L559.734 255.1L559.374 257.41L558.592 260.472L557.541 263.589L554.968 269.653L552.03 275.827L549.249 281.937L548.093 284.871L547.153 287.659L546.422 290.671L546.242 291.705L546.108 292.794L546.015 294.735L546.066 296.193L546.219 297.637L546.533 299.268L546.954 300.79L547.486 302.385L548.504 304.813L549.698 307.296L552.363 312.395L553.599 314.928L554.668 317.416L555.626 320.336L555.871 321.316L556.06 322.296L556.306 324.246L556.371 325.722L556.338 327.198L556.153 329.075L555.899 330.556L555.547 332.119L554.783 334.675L553.839 337.295L551.494 342.726L548.879 348.166L546.288 353.387L543.831 358.422L541.443 363.557L539.167 368.701L537.075 373.685L535.183 378.46L533.341 383.326L531.467 388.297L529.566 393.172L527.692 397.747L525.836 401.993L523.856 406.185L521.718 410.244L519.511 414.008L517.322 417.452L515.032 420.81L512.677 424.036L510.368 427.08L508.086 430.068L505.81 433.053L503.621 435.955L501.562 438.835L499.545 441.819L497.597 444.835L495.788 447.82L494.071 450.9L492.41 454.121L490.836 457.401L489.388 460.673L488.019 464.067L486.626 467.694L485.173 471.434L483.604 475.075L482.753 476.788L481.846 478.41L480.86 479.909L479.801 481.299L478.663 482.542L477.436 483.672L476.131 484.661L474.743 485.536L473.23 486.329L471.629 487.039L468.025 488.352L464.119 489.6L460.27 490.903L456.781 492.366L455.226 493.168L453.736 494.047L452.32 495.013L450.969 496.047L449.692 497.141L448.47 498.275L446.189 500.635L443.917 503.187L441.604 505.779L439.147 508.308L437.796 509.552L436.352 510.759L434.807 511.889L433.169 512.946L431.392 513.912L429.504 514.796L425.154 516.423L420.3 517.931L415.349 519.525L412.98 520.423L410.727 521.403L408.645 522.473L406.641 523.662L402.865 526.341L399.155 529.289L395.296 532.119L393.158 533.399L390.863 534.515L388.433 535.377L387.027 535.759L385.611 536.042L383.547 536.274L381.59 536.342L379.637 536.283L376.505 535.891L373.298 535.253L367.093 533.559L361.36 532.055L358.588 531.558L355.914 531.294L353.883 531.317L352.37 531.454L350.931 531.704L349.561 532.073L348.136 532.597L347.358 532.943L346.512 533.367L345.165 534.174L343.731 535.185L342.356 536.274L340.381 538.092L338.447 540.097L334.699 544.498L330.937 549.332L327.133 554.257L322.969 559.351L318.457 564.272L316.019 566.632L313.455 568.887L310.744 571.002L307.972 572.902L305.136 574.533L302.225 575.913L299.38 576.952L297.802 577.403L296.201 577.768L293.443 578.191L291.676 578.328L289.922 578.355L287.428 578.205L285.572 577.945L283.777 577.563L281.69 576.934L279.886 576.223L278.15 575.376L276.249 574.241L274.606 573.075L273.051 571.803L271.103 569.926L269.849 568.546L268.582 567.01L266.652 564.309L264.903 561.456L261.803 555.333L259.138 549.232L256.495 543.245L255.112 540.511L253.641 538.001L252.016 535.764L251.174 534.77L250.244 533.832L249.129 532.898L248.083 532.173L247.153 531.636L246.182 531.185L245.159 530.816L243.887 530.483L242.572 530.251L241.254 530.132L239.884 530.123L237.857 530.292L235.72 530.629L232.855 531.362L229.931 532.328L223.948 534.78L218.081 537.377L215.356 538.493L212.903 539.377L210.766 539.928L209.757 540.11L208.776 540.197L208.017 540.183L207.258 540.101L206.578 539.969L205.981 539.796L205.403 539.573L204.838 539.29L204.153 538.862L203.436 538.32L202.923 537.873L202.451 537.399L201.891 536.748L200.924 535.395L199.994 533.868L198.98 531.8L198.041 529.59L196.287 524.979L195.38 522.81L194.404 520.801L193.275 518.983L192.683 518.172L192.026 517.42L191.332 516.778L190.638 516.24L189.957 515.812L189.509 515.575L189.041 515.366L188.417 515.147L187.616 514.946L186.718 514.805L186.034 514.746L185.353 514.728L184.377 514.778L182.633 515.019L180.874 515.375L178.325 516.085L175.567 516.978L169.936 518.992L164.804 520.692L162.088 521.321L161.38 521.43L160.76 521.494L159.872 521.503L159.104 521.439L158.479 521.334L158.058 521.225L157.66 521.093L157.169 520.869L156.698 520.605L156.253 520.3L155.842 519.954L155.541 519.662L155.268 519.352L154.972 518.956L154.597 518.336L154.194 517.525L153.958 516.942L153.764 516.359L153.537 515.457L153.315 514.058L153.19 512.55L153.204 510.395L153.357 508.094L153.963 503.46L154.712 498.822L155.286 494.393L155.393 492.375L155.337 490.452L155.124 488.935L154.874 487.873L154.722 487.404L154.546 486.962L154.157 486.174L153.769 485.536L153.361 484.994L153 484.588L152.612 484.215L152.057 483.773L151.293 483.276L150.456 482.834L149.877 482.579L149.294 482.369L148.332 482.11L146.731 481.827L145.745 481.718L144.69 481.659L142.71 481.704L140.979 481.85L139.151 482.087L136.218 482.656L133.178 483.413L127.237 485.253L121.513 487.276L115.905 489.258L110.634 490.871L108.15 491.473L105.785 491.906L103.259 492.142L102.31 492.17L101.468 492.147L100.307 492.024L99.2239 491.81L98.6178 491.646L98.0255 491.427L97.4888 491.167L96.9798 490.858L96.5448 490.539L96.1423 490.183L95.897 489.928L95.6703 489.655L95.3927 489.263L95.0734 488.707L94.7726 488.046L94.5459 487.418L94.3516 486.721L94.2081 485.887L94.0832 484.347L94.0925 482.775L94.3423 480.515L94.7958 478.087L95.4667 475.494L96.3042 472.728L98.3725 466.842L100.64 460.777L102.81 454.627L104.665 448.302L105.369 445.131L105.892 442.042L106.183 439.035L106.276 436.16L106.123 433.436L105.79 430.866L105.258 428.478L104.596 426.25L103.819 424.205L102.958 422.296L101.126 418.86L99.1684 415.621L97.1464 412.39L95.1521 409.178L93.1948 405.993L91.1311 402.64L88.9517 399.214L86.6798 395.865L84.2598 392.562L81.6501 389.217L78.9849 385.882L76.3567 382.47L73.8441 378.788L72.7151 376.843L71.7064 374.82L70.8411 372.701L70.1193 370.505L69.5178 368.054L69.0319 365.429L68.4304 359.565L68.199 353.096L68.1481 346.248L68.0417 339.258L67.653 332.324L66.7878 325.644L66.1168 322.464L65.2747 319.43L64.2336 316.573L62.9935 313.876L61.5499 311.393L59.8887 309.046L57.987 306.804L55.914 304.658L51.2684 300.489L46.4238 296.33L44.05 294.129L41.8522 291.846L39.7005 289.14L38.9509 288.019L38.2846 286.871L37.3546 284.921L36.7299 283.231L36.4662 282.31L36.2302 281.271L36.0081 279.75L35.9248 278.091L35.9572 276.788L36.0868 275.371L36.3505 273.854L36.9196 271.776L37.7062 269.644L38.553 267.803L39.4784 266.131L40.5427 264.404L42.264 261.953L44.1195 259.597L48.0479 255.037L51.8653 250.704L55.3541 246.389L56.9135 244.175L58.2923 241.956L59.4353 239.728L60.3561 237.459L60.9159 235.541L61.1936 234.237L61.4018 232.825L61.5267 230.857L61.5221 229.326L61.4481 227.804L61.1288 225.161L60.6614 222.446L59.4491 216.783L58.2785 210.659L57.9129 207.506L57.7417 204.399L57.8296 201.346L58.1304 198.421L58.6625 195.642L59.3658 193.026L60.2219 190.616L61.2074 188.334L62.2763 186.224L63.447 184.178L65.9873 180.242L68.6109 176.501L71.1558 172.979L73.6498 169.525L76.1068 166.058L78.4435 162.677L80.6321 159.438L82.8115 156.13L84.9585 152.79L86.9944 149.537L88.9332 146.357L90.8581 143.09L92.7321 139.801L94.4858 136.584L96.1469 133.404L97.7803 130.096L99.3489 126.729L100.83 123.439L102.292 120.259L103.971 117.001L104.943 115.361L106.026 113.744L107.243 112.194L108.603 110.736L110.019 109.515L110.88 108.882L111.856 108.272L113.3 107.538L114.53 107.037L115.882 106.622L117.427 106.308L119.014 106.107L120.708 106.025L122.711 106.112L124.419 106.294L126.223 106.568L129.12 107.215L132.095 108.003L137.81 109.657L143.358 111.014L145.944 111.365L148.359 111.506L149.942 111.438L151.335 111.274L152.589 111.046L153.662 110.764L154.856 110.34L156.031 109.83L157.53 109.01L158.942 108.057L160.279 107.019L161.547 105.916L163.939 103.615L166.285 101.2L168.645 98.7126L170.981 96.2249L173.397 93.6415L175.863 91.0035L178.32 88.3563L180.897 85.5633L183.544 82.7066L186.246 79.7952L189.078 76.7698L191.979 73.7126L194.996 70.5779L198.157 67.3658L201.382 64.1628L204.797 60.8686L208.387 57.5198L212.061 54.2165L216.003 50.8358L220.172 47.4186L224.48 44.088L229.08 40.7574L234.017 37.4359L239.162 34.2694L244.516 31.3169L250.452 28.4192L256.889 25.6627L263.538 23.2069L270.118 21.2021L276.596 19.7168L283.435 18.6734L290.75 18.0811L298.302 17.9763L305.747 18.3864L312.766 19.3204L316.042 19.9719L319.281 20.7738L325.676 22.8333L332.052 25.485L338.178 28.5786L343.786 31.9138L348.816 35.4039L353.545 39.1628L357.904 43.0401L361.846 46.9038L365.608 50.9041L369.143 54.9091L372.488 58.8456L375.769 62.7048L378.999 66.2768L380.683 67.9718L382.432 69.5528L384.26 70.9925L386.194 72.2637L387.989 73.1977L389.178 73.7035L390.395 74.1227L392.288 74.6102L393.806 74.8881L395.332 75.0749L398.026 75.1706L400.839 75.0658L406.47 74.3732L411.773 73.585L414.336 73.3025L416.779 73.1476L419.37 73.2296L420.356 73.3253L421.268 73.4574L422.679 73.7718L423.91 74.1546L425.08 74.6193L426.186 75.1706L427.311 75.854L428.384 76.6104L429.869 77.8633L431.239 79.2302L432.493 80.6654L433.65 82.1689L435.75 85.2945L437.615 88.4748L439.267 91.5593L440.826 94.6576L442.261 97.6692L443.635 100.695L444.935 103.697L446.208 106.672L447.54 109.597L448.258 110.992L449.044 112.322L450.09 113.78L450.492 114.249L450.96 114.723L451.751 115.397L452.399 115.858L452.922 116.167L453.472 116.432L454.328 116.751L455.291 117.01L456.077 117.152L456.85 117.225L457.85 117.215L459.326 117.07L460.214 116.924L461.066 116.732L462.5 116.286L464.18 115.639L465.827 114.91L468.288 113.63L470.824 112.181L475.965 109.06L481.249 106.085L483.836 104.873L486.362 103.879L488.856 103.164L490.045 102.904L491.234 102.699L492.835 102.553L494.261 102.526L495.556 102.594L496.681 102.749L497.934 103.032L499.184 103.415L500.151 103.811L501.206 104.349L502.279 104.982L503.709 105.989L505.079 107.096L507.675 109.465L510.104 111.866L512.515 114.277L515.009 116.687L517.554 119.047L520.145 121.384L522.847 123.877L525.521 126.578L526.808 128.059L528.025 129.636L529.223 131.449L530.361 133.454L531.389 135.718L532.296 138.21L533.004 140.949L533.526 143.906L533.786 147.072L533.823 150.426L533.587 153.916L533.128 157.529L532.448 161.174L531.583 164.869L529.473 172.077L527.113 178.888L524.712 185.399L522.37 191.883L520.316 198.148Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M206.236 57.8069L210.044 54.6859L214.097 51.5466L218.299 48.4849L222.755 45.4504L227.534 42.4251L232.495 39.5228L237.598 36.8255L243.211 34.151L249.259 31.5767L255.468 29.2394L261.646 27.2529L267.906 25.6445L274.768 24.3232L282.287 23.3117L290.32 22.6693L298.607 22.4597L306.871 22.7012L314.821 23.4029L322.196 24.5419L328.818 26.1001L331.821 27.0251L334.773 28.0912L337.679 29.2986L340.534 30.6336L346.063 33.6452L351.139 36.9394L355.669 40.3976L359.903 44.1382L363.78 48.0019L367.297 51.8929L370.573 55.8614L373.543 59.7478L376.371 63.6935L379.022 67.5846L381.562 71.4391L384.042 75.2071L386.499 78.802L389.063 82.1827L390.382 83.7045L391.784 85.1215L393.533 86.6113L394.162 87.0761L394.87 87.5408L396.193 88.2789L397.23 88.7437L398.303 89.1127L399.418 89.3861L400.649 89.5729L401.343 89.6321L402.121 89.6549L403.435 89.5957L404.929 89.4089L406.415 89.1309L408.673 88.5158L411.009 87.7367L415.956 85.8277L420.8 84.11L423.086 83.5086L425.261 83.1076L426.806 82.9983L428.023 83.0028L429.217 83.1076L430.17 83.2807L431.179 83.5632L431.831 83.8002L432.526 84.1009L433.317 84.52L434.349 85.1989L435.376 86.0054L436.287 86.8574L437.046 87.6729L437.759 88.5204L438.768 89.8873L439.679 91.3179L440.526 92.8306L441.308 94.3979L442.677 97.5736L443.885 100.868L444.954 104.221L445.963 107.707L446.944 111.251L448.013 115.056L449.183 118.983L450.52 122.915L452.154 126.948L453.102 128.943L454.13 130.843L455.254 132.616L456.517 134.283L457.947 135.828L458.687 136.516L459.529 137.195L460.834 138.083L462 138.725L462.523 138.971L463.139 139.218L464.351 139.614L465.628 139.91L466.498 140.047L467.363 140.124L468.603 140.142L470.056 140.038L470.968 139.905L471.861 139.728L473.189 139.372L474.688 138.83L476.238 138.151L478.302 137.017L480.296 135.718L484.285 132.629L488.241 129.362L492.285 126.296L494.376 124.952L496.412 123.817L498.259 123.016L499.314 122.637L500.355 122.332L501.493 122.1L502.724 121.959L503.288 121.931H503.899L504.764 121.995L505.819 122.173L506.467 122.328L507.161 122.528L508.137 122.879L509.142 123.344L510.113 123.872L511.506 124.774L512.848 125.804L514.162 126.938L515.439 128.173L516.665 129.476L517.845 130.848L519.002 132.328L520.126 133.905L521.214 135.577L522.246 137.349L523.194 139.186L524.036 141.104L524.763 143.109L525.36 145.186L525.836 147.469L526.197 149.897L526.41 152.485L526.489 155.224L526.415 158.026L526.202 160.914L525.36 166.669L524.064 172.355L522.324 178.314L520.321 184.438L518.299 190.461L516.452 196.298L514.819 202.326L513.537 208.632L513.088 211.853L512.792 215.047L512.658 218.232L512.7 221.321L512.931 224.328L513.334 227.18L513.931 229.873L514.699 232.369L515.522 234.351L516.138 235.563L516.799 236.684L517.743 238.006L518.687 239.108L519.715 240.129L520.922 241.14L522.167 242.024L523.555 242.867L525.79 243.961L528.182 244.913L533.582 246.553L539.227 248.079L541.99 248.927L544.622 249.893L547.408 251.209L548.426 251.797L549.342 252.417L550.466 253.337L551.369 254.226L552.054 255.037L552.336 255.424L552.655 255.907L553.127 256.759L553.608 257.848L554.02 259.092L554.196 259.775L554.353 260.554L554.506 261.78L554.552 263.543L554.506 264.782L554.399 265.999L553.89 268.833L553.113 271.712L552.128 274.533L550.975 277.339L548.282 283.085L545.451 288.862L542.901 294.521L541.828 297.305L540.907 300.139L540.148 303.078L539.583 306.103L539.246 309.21L539.139 312.381L539.283 315.571L539.648 318.755L540.231 321.899L540.944 324.966L542.54 330.884L543.933 336.762L544.4 339.746L544.673 342.726L544.71 345.701L544.544 348.608L544.164 351.442L543.614 354.171L542.924 356.759L542.101 359.301L540.152 364.231L537.913 369.134L535.586 373.904L533.323 378.424L531.116 382.789L528.904 387.181L526.734 391.5L524.656 395.624L522.63 399.642L520.575 403.688L518.553 407.661L516.605 411.461L514.685 415.22L512.76 419.015L510.877 422.751L509.081 426.351L507.314 429.964L505.546 433.659L503.834 437.313L502.21 440.867L500.609 444.475L499.013 448.207L497.463 451.948L495.973 455.606L494.455 459.269L492.836 462.928L491.975 464.678L491.073 466.304L489.902 468.045L489.476 468.582L489.032 469.084L488.134 469.949L487.413 470.523L486.978 470.819L486.469 471.116L485.747 471.453L484.997 471.726L484.22 471.931L483.762 472.018L483.299 472.077L482.61 472.109L481.555 472.063L480.55 471.945L479.565 471.776L477.594 471.243L475.539 470.587L471.458 469.348L468.973 468.888L468.154 468.801L467.372 468.774L466.378 468.828L465.299 468.979L464.48 469.161L463.643 469.421L462.917 469.721L462.153 470.118L461.366 470.614L460.571 471.216L459.923 471.799L458.951 472.861L458.053 474L456.989 475.599L456.027 477.298L454.347 480.843L452.857 484.406L451.469 487.75L449.988 490.935L449.202 492.407L448.327 493.828L447.355 495.204L446.277 496.517L445.06 497.751L443.723 498.895L442.201 499.961L440.526 500.927L438.624 501.811L436.546 502.608L434.316 503.287L431.942 503.889L427.089 504.886L422.462 505.88L420.375 506.472L418.376 507.169L416.506 507.998L414.72 508.964L413.041 510.071L411.458 511.288L409.977 512.6L408.571 513.99L405.813 517.033L403.065 520.218L400.21 523.293L398.655 524.756L397.031 526.082L395.259 527.271L394.403 527.754L393.523 528.169L392.163 528.679L390.992 529.002L390.354 529.13L389.637 529.235L388.369 529.317L386.842 529.285L385.232 529.112L383.663 528.788L382.104 528.355L380.47 527.818L375.417 525.676L370.217 523.284L367.686 522.259L365.173 521.412L362.438 520.769L361.328 520.587L360.166 520.469L358.552 520.428L357.029 520.514L355.484 520.737L354.276 521.029L352.93 521.48L352.106 521.817L351.305 522.195L350.033 522.911L348.696 523.804L347.409 524.77L345.572 526.369L343.796 528.141L340.39 532.023L337.04 536.301L333.727 540.726L330.224 545.336L326.532 549.893L322.377 554.508L317.8 558.891L315.325 560.964L312.743 562.914L310.027 564.719L307.32 566.295L304.595 567.612L301.934 568.655L299.699 569.293L298.26 569.594L296.849 569.785L295.053 569.872L293.457 569.808L292.666 569.726L291.879 569.603L290.412 569.279L288.779 568.76L287.932 568.423L287.109 568.054L285.401 567.143L283.842 566.154L282.357 565.074L280.385 563.361L279.15 562.135L277.979 560.864L276.064 558.445L274.315 555.852L272.704 553.059L271.205 550.13L268.554 544.243L265.986 538.37L264.621 535.591L263.154 533.012L261.465 530.624L260.6 529.595L259.674 528.656L258.263 527.453L257.009 526.574L256.162 526.073L255.182 525.594L253.937 525.111L252.498 524.692L251.128 524.414L249.638 524.232L248.088 524.182L245.788 524.319L243.359 524.647L240.116 525.403L236.807 526.414L230.362 528.802L224.087 531.089L220.987 531.978L218.053 532.579L216.073 532.752H214.305L213.482 532.688L212.732 532.579L211.844 532.369L210.881 532.041L209.956 531.631L209.243 531.239L208.582 530.811L208.04 530.387L207.476 529.859L206.786 529.084L206.259 528.396L205.722 527.622L205.232 526.793L204.477 525.216L203.751 523.517L202.113 519.293L200.702 516.3L200.438 515.853L200.114 515.361L199.249 514.249L198.508 513.461L197.888 512.914L197.56 512.664L197.217 512.431L196.477 512.008L195.496 511.561L194.455 511.188L193.742 510.996L193.03 510.846L191.98 510.718L189.925 510.654L187.718 510.773L184.844 511.206L181.828 511.835L175.951 513.315L170.283 514.564L167.248 514.887L166.262 514.924L165.323 514.896L164.383 514.778L163.435 514.568L162.611 514.313L162.13 514.122L161.649 513.88L161.274 513.639L160.922 513.365L160.547 513.01L160.163 512.577L159.821 512.108L159.654 511.835L159.497 511.561L159.307 511.147L159.099 510.563L158.868 509.652L158.734 508.923L158.632 508.135L158.567 506.18L158.669 504.089L159.206 499.537L159.779 494.872L159.951 492.639L159.992 490.466L159.821 488.101L159.687 487.204L159.506 486.352L159.104 485.008L158.697 483.996L158.391 483.376L158.044 482.798L157.521 482.082L156.929 481.413L156.332 480.848L155.925 480.52L155.439 480.173L154.703 479.736L153.63 479.221L152.649 478.843L151.575 478.515L150.247 478.232L148.577 478.014L146.786 477.904L144.214 477.968L141.548 478.232L138.906 478.674L136.292 479.253L131.253 480.706L126.293 482.442L121.397 484.279L116.793 485.964L112.647 487.267L110.667 487.737L108.802 488.06L107.127 488.188H106.243L105.461 488.124L104.744 487.996L104.092 487.823L103.569 487.632L103.222 487.477L102.852 487.267L102.509 487.031L102.153 486.73L101.82 486.397L101.487 485.996L101.279 485.696L101.089 485.386L100.871 484.944L100.58 484.183L100.321 483.29L100.14 482.392L100.02 481.258L99.9783 479.873L100.015 478.483L100.251 476.314L100.649 474.022L101.871 469.257L103.555 464.14L105.438 458.909L107.261 453.743L108.904 448.416L110.214 442.817L110.681 439.946L111.005 437.071L111.148 434.206L111.125 431.399L110.917 428.661L110.556 426.032L110.033 423.526L109.39 421.17L108.65 418.974L107.835 416.915L106.072 413.211L104.129 409.684L102.139 406.276L100.214 402.959L98.2755 399.51L96.346 395.938L94.472 392.352L92.6212 388.712L90.724 384.894L88.8223 380.975L86.9899 377.043L85.1854 372.92L83.4409 368.514L81.8585 363.949L80.5212 359.347L79.4246 354.627L78.4621 349.41L77.5876 343.646L76.7732 337.491L75.9774 331.153L75.1306 324.884L74.1126 318.947L73.488 316.181L72.7569 313.552L71.9009 311.119L70.8598 308.755L69.6058 306.454L68.1575 304.244L66.4779 302.102L64.6085 300.039L62.5865 298.088L60.4348 296.211L55.6874 292.421L50.94 288.552L48.6588 286.456L46.5812 284.274L44.8738 282.064L44.0502 280.802L43.3376 279.504L42.6158 277.841L42.0744 276.228L41.8245 275.244L41.6209 274.146L41.4729 272.706L41.459 271.024L41.5423 269.799L41.6996 268.582L42.0142 267.056L42.6065 265.129L43.3376 263.274L44.1982 261.502L45.0774 259.98L46.026 258.499L47.6686 256.244L49.4362 254.071L53.1471 249.966L56.8118 246.179L60.4441 242.452L63.8867 238.817L67.1257 235.222L70.1981 231.577L73.0021 227.936L75.5794 224.173L76.7732 222.214L77.8652 220.218L78.8277 218.195L79.6513 216.113L80.313 213.953L80.7942 211.73L81.0904 209.333L81.1922 206.814L81.0672 204.176L80.7526 201.433L79.5727 195.792L78.0735 190.056L76.6622 184.01L76.2087 180.952L75.9635 177.964L75.9681 175.043L76.181 172.241L76.5974 169.576L77.1665 167.07L77.8606 164.732L78.6426 162.545L79.4847 160.55L80.3963 158.632L82.3536 154.982L84.3802 151.424L86.356 147.984L88.2763 144.703L90.266 141.4L92.3158 138.138L93.3569 136.607L94.4211 135.19L95.8185 133.618L96.2396 133.208L96.7023 132.807L97.6647 132.092L98.2801 131.713L98.7521 131.481L98.9603 131.399L99.2194 131.308L99.696 131.185L100.187 131.103L100.682 131.066L101.121 131.076L101.505 131.121L101.718 131.162L101.926 131.217L102.31 131.344L102.833 131.572L103.495 131.932L104.143 132.36L104.786 132.871L105.309 133.376L106.438 134.693L107.516 136.124L110.102 140.265L112.717 144.352L114.355 146.371L114.956 147.004L115.627 147.615L116.585 148.353L117.552 148.963L118.329 149.364L118.681 149.515L119.033 149.647L119.671 149.838L120.398 149.984L121.212 150.075L121.957 150.093L122.698 150.061L123.429 149.966L124.303 149.77L125.298 149.451L126.27 149.059L127.232 148.581L128.481 147.829L129.684 147.004L131.304 145.715L132.882 144.298L135.899 141.245L138.749 138.047L141.493 134.793L144.107 131.572L146.652 128.346L149.04 125.216L151.386 122.05L153.611 118.947L155.781 115.844L157.864 112.814L159.909 109.83L161.912 106.937L163.916 104.094L165.915 101.337L167.969 98.5988L170.033 95.9334L172.212 93.1951L174.466 90.4431L176.793 87.6638L179.223 84.839L181.675 82.046L184.294 79.1346L187.019 76.1821L189.837 73.2115L192.836 70.1588L195.936 67.1107L199.202 64.0216L202.664 60.8915L206.236 57.8069Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M90.1871 160.937L90.1826 160.96L90.1871 160.978V160.987V160.996V161"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M536.378 309.174L538.83 303.966L541.5 298.59L544.151 293.104L546.576 287.4L547.636 284.379L548.519 281.285L549.241 277.503L549.385 276.264L549.459 275.07L549.422 272.815L549.213 270.933L549.07 270.145L548.857 269.298L548.445 268.077L547.918 266.892L547.284 265.762L546.877 265.133L546.432 264.541L545.748 263.744L544.905 262.937L543.749 262.003L542.43 261.11L541.292 260.468L539.311 259.566L537.261 258.768L531.755 257.082L526.531 255.552L524.042 254.668L521.714 253.683L519.526 252.503L518.568 251.893L517.67 251.25L516.356 250.152L515.394 249.2L514.45 248.125L513.497 246.84L512.747 245.633L512.076 244.38L511.137 242.197L510.341 239.846L509.679 237.286L509.138 234.552L508.731 231.686L508.444 228.684L508.263 222.451L508.601 216.067L509.383 209.725L510.503 203.606L511.798 197.806L513.131 192.238L514.459 186.384L515.63 180.128L516.453 173.644L516.671 170.396L516.745 167.261L516.638 164.213L516.37 161.361L515.917 158.7L515.306 156.299L514.695 154.618L514.149 153.41L513.58 152.38L513.006 151.56L512.405 150.845L511.794 150.244L511.53 150.011L511.201 149.756L510.568 149.337L509.892 148.977L509.189 148.672L508.661 148.494L508.06 148.33L507.356 148.198L506.375 148.107L505.357 148.088L504.279 148.152L503.044 148.33L501.489 148.663L499.851 149.1L497.519 149.897L495.085 150.84L490.268 152.854L485.41 154.677L482.893 155.401L480.38 155.939L477.854 156.23L476.646 156.285L475.392 156.271L473.685 156.121L472.185 155.861L470.774 155.511L469.46 155.055L468.104 154.444L466.809 153.729L465.661 152.959L464.509 152.039L463.422 151.045L461.955 149.437L460.622 147.692L459.387 145.801L458.249 143.797L457.217 141.733L456.273 139.609L454.589 135.149L453.066 130.415L451.687 125.626L450.47 121.006L449.369 116.559L448.282 112.099L447.176 107.743L446.005 103.684L445.344 101.747L444.603 99.8973L443.77 98.1477L442.808 96.5166L441.841 95.2135L441.105 94.3934L440.79 94.0836L440.402 93.7464L439.453 93.022L438.551 92.457L437.875 92.1107L437.181 91.8191L436.191 91.5047L434.928 91.2223L433.965 91.0856L433.012 91.0218L431.735 91.0537L429.921 91.2496L428.121 91.5868L425.576 92.3431L422.971 93.3227L418.025 95.6145L413.296 97.9154L411.117 98.8175L409.007 99.5283L407.295 99.9019L406.147 100.061L404.99 100.13L403.963 100.089L402.941 99.9565L402.149 99.788L401.381 99.5693L400.497 99.2367L399.516 98.7628L398.827 98.3619L398.156 97.929L397.212 97.2137L396.236 96.348L395.306 95.4322L394.038 93.9833L392.853 92.4297L390.628 89.0444L388.587 85.527L386.579 81.8455L384.589 78.1596L382.498 74.3733L380.332 70.6099L377.986 66.7599L375.511 62.9646L372.753 59.0644L369.778 55.2099L366.474 51.3507L362.86 47.6055L358.927 44.0653L354.513 40.7029L352.148 39.1446L349.682 37.6866L347.077 36.3289L344.356 35.085L341.372 33.9004L338.179 32.7932L331.16 30.8569L323.497 29.3351L315.404 28.2507L307.071 27.6037L298.636 27.385L290.191 27.59L281.835 28.2097L273.663 29.2348L265.815 30.6199L258.444 32.2966L251.712 34.1738L245.669 36.174L240.107 38.3199L234.647 40.7074L229.331 43.268L224.352 45.8833L219.743 48.5168L215.25 51.2961L210.952 54.1528L206.968 56.9868L203.141 59.8937L199.476 62.837L196.071 65.7347L192.795 68.6598L189.681 71.5758L186.793 74.4007L183.966 77.2757L181.255 80.1324L178.668 82.939L176.151 85.7639L173.763 88.5295L171.413 91.3589L169.127 94.2111L166.892 97.1135L164.68 100.102L162.501 103.155L160.298 106.335L158.082 109.602L155.824 112.978L153.524 116.436L151.215 119.904L148.832 123.471L146.449 127.025L144.011 130.638L141.554 134.256L139.129 137.819L136.658 141.432L134.211 144.99L131.726 148.585L129.246 152.171L126.793 155.697L124.304 159.265L121.856 162.773L119.371 166.318L116.905 169.854L114.481 173.33L112.042 176.829L109.659 180.251L107.258 183.686L104.879 187.085L102.547 190.384L100.169 193.71L97.809 196.986L95.4399 200.244L93.0431 203.506L90.674 206.686L88.2355 209.916L85.76 213.151L83.2845 216.322L80.6747 219.585L77.991 222.852L75.2194 226.132L72.3089 229.472L69.3152 232.798L66.1363 236.233L62.8187 239.764L59.4223 243.377L55.8826 247.246L52.3984 251.287L49.1177 255.515L47.6185 257.716L46.3229 259.853L45.1153 262.304L44.7728 263.138L44.4813 263.976L44.1621 265.22L43.9955 266.259L43.9492 266.933L43.9538 267.685L44.0464 268.505L44.2268 269.398L44.5137 270.341L44.9117 271.33L45.453 272.373L46.3692 273.84L47.3964 275.248L49.1455 277.226L51.1768 279.23L55.6882 283.003L60.5791 286.661L65.3404 290.284L67.5291 292.111L69.5696 293.992L71.439 295.947L73.1233 297.979L74.5808 300.084L75.8487 302.271L76.8944 304.522L77.755 306.85L78.4861 309.379L79.1154 312.049L80.1288 317.808L80.9755 323.881L81.7853 329.991L82.6274 335.869L83.5251 341.332L84.4921 346.33L85.5749 351.091L86.8381 355.907L88.2494 360.741L89.7486 365.407L91.2848 369.79L92.8858 374.027L94.5932 378.26L96.3607 382.388L98.1514 386.311L100.03 390.183L102.01 394.047L104.037 397.801L106.092 401.528L108.174 405.401L110.145 409.438L111.894 413.803L112.657 416.199L113.328 418.737L113.861 421.403L114.258 424.187L114.485 427.039L114.55 429.964L114.448 432.898L114.198 435.837L113.291 441.596L112.005 447.086L110.534 452.262L109.058 457.306L107.748 462.536L107.258 465.215L106.952 467.803L106.901 470.437L106.971 471.617L107.11 472.687L107.406 473.95L107.767 475.025L108.141 475.877L108.34 476.237L108.59 476.642L109.011 477.207L109.493 477.731L110.015 478.219L110.649 478.697L111.047 478.957L111.528 479.226L112.116 479.499L112.93 479.791L114.069 480.087L114.879 480.242L115.762 480.365L117.081 480.451L118.95 480.419L120.829 480.278L123.485 479.9L126.215 479.367L131.532 478.055L136.654 476.715L141.855 475.599L144.52 475.221L147.143 475.02L149.952 475.061L151.067 475.157L152.215 475.321L153.783 475.681L155.227 476.15L155.903 476.428L156.611 476.77L157.494 477.289L158.327 477.886L159.105 478.556L159.526 478.975L159.924 479.417L160.497 480.155L161.104 481.103L161.636 482.11L162.084 483.14L162.487 484.301L162.876 485.882L163.163 487.491L163.366 489.778L163.426 492.106L163.278 496.999L163.204 501.797L163.436 504.485L163.561 505.21L163.732 505.921L164.056 506.823L164.375 507.506L164.685 508.039L165.009 508.481L165.185 508.686L165.374 508.882L165.735 509.201L166.184 509.534L166.735 509.862L167.313 510.144L167.85 510.345L168.461 510.522L169.058 510.632L170.099 510.732L171.524 510.759L172.93 510.686L175.503 510.281L178.293 509.675L183.966 508.153L189.782 506.759L193.447 506.262L194.433 506.199L195.344 506.189L196.931 506.294L198.417 506.527L199.254 506.723L200.101 506.987L200.883 507.319L201.711 507.757L202.493 508.276L203.099 508.741L203.664 509.247L204.187 509.789L204.765 510.509L205.464 511.561L206.084 512.659L206.958 514.682L207.708 516.846L209.022 521.28L209.707 523.353L210.466 525.275L211.345 526.952L211.97 527.918L212.182 528.205L212.442 528.515L212.988 529.075L213.538 529.545L214.075 529.923L214.528 530.183L215.065 530.429L215.565 530.597L216.166 530.747L216.939 530.866L217.721 530.916L218.498 530.902L219.322 530.816L220.951 530.488L222.672 530L225.055 529.094L227.646 527.959L233.19 525.239L238.987 522.437L242.014 521.143L245.109 520.004L249.038 518.92L250.167 518.687L251.388 518.5L253.831 518.3L255.664 518.304L257.394 518.459L258.819 518.733L260.337 519.161L261.489 519.589L262.669 520.136L263.692 520.719L264.835 521.512L265.913 522.396L266.921 523.353L267.93 524.474L269.119 526.059L270.211 527.722L271.586 530.228L272.853 532.889L275.264 538.534L277.763 544.147L279.179 546.899L280.715 549.524L282.418 551.998L284.273 554.253L286.059 556.021L287.271 557.051L288.507 557.953L290.048 558.891L291.579 559.643L292.371 559.962L293.273 560.281L294.832 560.705L296.665 561.033L297.646 561.142L298.626 561.206L300.389 561.197L302.291 561.028L304.17 560.714L306.122 560.222L307.83 559.648L309.5 558.973L312.082 557.688L314.604 556.167L317.047 554.444L319.379 552.567L321.559 550.617L323.636 548.571L327.528 544.275L331.053 539.905L334.325 535.541L337.411 531.262L340.405 527.13L343.431 523.198L344.981 521.357L346.605 519.608L348.322 517.976L350.145 516.5L352.014 515.275L353.079 514.691L354.18 514.186L356.017 513.52L357.488 513.124L358.987 512.851L360.764 512.696L362.546 512.687L364.424 512.823L366.331 513.138L368.191 513.58L370.139 514.158L372.947 515.224L375.705 516.459L380.976 519.102L385.839 521.384L388.573 522.341L389.346 522.551L390.151 522.729L391.405 522.902L392.678 522.961L393.372 522.947L394.029 522.893L394.871 522.756L395.768 522.528L396.578 522.255L397.43 521.895L398.267 521.462L399.415 520.728L400.571 519.863L402.02 518.578L403.408 517.152L404.685 515.662L405.897 514.104L408.206 510.805L410.353 507.488L412.519 504.176L413.638 502.595L414.818 501.073L416.082 499.633L417.46 498.307L418.839 497.232L419.668 496.685L420.602 496.17L421.889 495.596L423.11 495.168L424.359 494.844L425.678 494.626L427.173 494.494L428.677 494.443L430.925 494.544L433.119 494.74L437.237 495.145L439.162 495.232L440.989 495.186L442.401 494.995L443.331 494.794L444.293 494.494L445.228 494.111L446.186 493.61L446.699 493.295L447.255 492.917L448.124 492.229L449.022 491.391L449.864 490.498L451.026 489.049L452.108 487.472L453.136 485.746L454.13 483.9L456 480.019L457.777 475.986L459.581 471.744L461.418 467.48L463.306 463.329L465.398 459.156L467.716 455.182L468.974 453.374L470.339 451.688L471.973 450.016L472.681 449.392L473.476 448.781L474.717 447.979L475.813 447.405L476.415 447.141L477.109 446.886L478.15 446.589L479.39 446.357L480.315 446.252L481.241 446.207L482.175 446.234L483.814 446.435L485.465 446.735L487.478 447.227L489.361 447.733L491.143 448.139L492.827 448.394L493.803 448.407L494.599 448.344L495.206 448.243L495.853 448.079L496.427 447.874L497.093 447.569L497.829 447.141L498.528 446.649L499.106 446.161L500.008 445.241L500.846 444.252L501.915 442.753L502.951 441.104L504.876 437.591L506.648 433.932L508.416 430.06L510.202 426.123L511.979 422.264L513.746 418.427L515.588 414.473L517.476 410.486L519.359 406.568L521.261 402.599L523.246 398.453L525.259 394.207L527.207 389.906L529.048 385.331L530.751 380.183L531.496 377.367L532.139 374.396L532.634 371.284L532.972 368.04L533.102 364.678L533.046 361.21L532.403 354.048L531.422 346.74L530.696 339.505L530.571 335.969L530.612 332.52L530.858 329.162L531.269 325.922L531.848 322.806L532.556 319.822L533.379 316.997L534.3 314.281L536.378 309.174Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M528.826 383.932L527.202 388.525L525.333 393.04L523.376 397.455L521.451 401.647L519.581 405.624L517.666 409.652L515.769 413.698L513.95 417.635L512.173 421.48L510.355 425.412L508.532 429.344L506.695 433.085L504.728 436.589L503.664 438.233L502.554 439.723L501.383 441.022L500.786 441.591L500.129 442.12L499.403 442.594L498.685 442.976L498.056 443.245L497.343 443.478L496.733 443.614L495.969 443.715L495.067 443.76L494.165 443.733L492.434 443.468L490.611 443.072L486.78 442.206L484.198 441.915L483.471 441.892L482.754 441.919L481.583 442.056L480.422 442.302L479.668 442.521L478.927 442.785L477.997 443.2L476.97 443.774L476.248 444.243L475.554 444.758L474.634 445.546L473.602 446.571L472.574 447.719L471.228 449.442L469.955 451.292L467.642 455.205L465.49 459.388L463.501 463.621L461.641 467.858L459.813 472.168L458.022 476.383L456.213 480.369L454.186 484.178L453.066 485.928L451.831 487.55L450.586 488.876L449.823 489.573L448.944 490.247L447.801 490.981L446.658 491.573L446.066 491.828L445.39 492.079L444.27 492.402L442.729 492.703L441.161 492.881L438.898 492.885L436.622 492.721L432.305 492.111L430.389 491.874L428.566 491.746L426.942 491.801L426.063 491.901L425.202 492.07L424.152 492.366L423.046 492.79L421.991 493.304L421.024 493.897L420.006 494.639L419.043 495.441L417.729 496.735L416.512 498.139L415.36 499.674L414.254 501.305L412.214 504.613L410.173 508.048L408.026 511.379L406.823 513.01L405.495 514.577L403.801 516.263L403.172 516.796L402.446 517.348L400.937 518.323L399.85 518.901L398.647 519.416L397.157 519.881L395.528 520.236L394.751 520.35L393.978 520.418L392.456 520.446L390.6 520.318L388.652 520.031L385.899 519.307L383.1 518.323L380.416 517.17L377.797 515.908L372.707 513.311L370.32 512.208L368.052 511.292L365.813 510.627L364.781 510.395L363.805 510.244L362.541 510.153L361.273 510.181L360.566 510.244L359.867 510.345L358.793 510.577L357.447 511.005L356.147 511.548L354.916 512.19L353.74 512.914L352.537 513.744L350.816 515.12L349.15 516.637L345.935 520.018L342.844 523.74L339.836 527.667L336.777 531.791L333.631 535.992L330.249 540.302L326.598 544.553L322.489 548.754L320.291 550.736L317.991 552.622L315.525 554.435L312.975 556.116L310.329 557.62L307.751 558.878L305.128 559.889L303.929 560.267L302.837 560.55L301.199 560.841L299.807 560.964L299.201 560.973L298.516 560.946L297.419 560.823L296.248 560.582L295.346 560.322L294.388 559.98L293.042 559.37L291.524 558.531L290.071 557.588L288.206 556.121L286.999 555.037L285.86 553.907L283.959 551.715L282.182 549.328L280.544 546.753L279.012 544.038L276.356 538.543L273.927 532.948L271.512 527.686L270.249 525.357L268.902 523.211L267.417 521.289L266.649 520.437L265.816 519.63L264.756 518.774L263.761 518.104L263.016 517.689L262.244 517.325L261.198 516.938L260.018 516.623L259.074 516.45L258.038 516.332L256.774 516.295L255.062 516.4L253.355 516.641L250.912 517.238L248.413 518.068L243.078 520.359L237.484 523.084L231.857 525.658L228.942 526.774L226.092 527.663L223.366 528.214L221.904 528.396L220.572 528.456L219.406 528.392L218.133 528.214L217.004 527.945L216.477 527.781L215.894 527.558L215.274 527.262L214.603 526.866L213.83 526.31L213.108 525.686L212.437 525.011L211.933 524.423L211.331 523.571L210.702 522.514L210.087 521.353L209.18 519.252L208.324 517.056L207.449 514.869L206.491 512.814L205.399 511.046L204.719 510.149L204.372 509.761L203.946 509.333L203.067 508.595L202.183 507.966L201.314 507.461L200.74 507.183L200.157 506.946L199.259 506.659L197.959 506.372L196.589 506.176L195.122 506.08L193.591 506.116L191.439 506.335L189.283 506.663L186.262 507.333L183.286 508.112L177.711 509.648L175.092 510.244L172.704 510.645L171.071 510.727L169.71 510.682L169.174 510.623L168.632 510.518L168.082 510.358L167.54 510.14L167.077 509.903L166.643 509.629L166.235 509.315L166.046 509.146L165.87 508.964L165.615 508.677L165.352 508.308L165.046 507.789L164.736 507.114L164.542 506.604L164.361 506.03L164.199 505.333L163.977 503.665L163.862 501.934L163.922 496.99L164.037 491.751L163.963 489.199L163.732 486.784L163.302 484.666L162.973 483.545L162.561 482.493L161.978 481.335L161.377 480.383L160.808 479.622L160.169 478.916L159.387 478.205L158.439 477.485L157.499 476.897L156.435 476.351L155.375 475.927L153.811 475.453L152.687 475.203L151.572 475.007L149.772 474.834L147.967 474.788L146.047 474.834L143.192 475.098L140.323 475.535L134.766 476.729L129.551 478.05L124.545 479.212L122.046 479.659L119.635 479.959L116.901 480.064L115.999 480.032L115.096 479.955L113.764 479.722L112.681 479.435L112.033 479.203L111.39 478.907L110.867 478.592L110.372 478.237L109.905 477.836L109.479 477.394L109.178 477.03L108.905 476.647L108.628 476.168L108.308 475.494L107.961 474.537L107.767 473.854L107.6 473.102L107.448 472.05L107.355 470.405L107.374 468.642L107.586 466.245L107.966 463.757L109.062 458.805L110.441 453.756L111.936 448.508L113.352 443.218L114.518 438.16L115.309 433.577L115.536 431.517L115.661 429.49L115.67 427.522L115.554 425.553L115.314 423.594L114.957 421.649L114.462 419.598L113.847 417.489L112.283 413.142L110.432 408.873L108.47 404.845L106.388 400.845L104.306 396.918L102.321 393.104L100.359 389.177L98.4525 385.153L96.6572 381.144L94.9266 377.039L93.2192 372.738L91.5951 368.35L90.0959 363.958L88.6707 359.379L87.2872 354.463L85.9962 349.328L84.8487 344.184L83.8909 339.19L83.1043 334.274L82.3778 328.984L81.6329 323.266L80.7768 317.302L79.6663 311.379L78.9584 308.531L78.1301 305.82L77.1584 303.283L76.0155 300.886L74.7616 298.772L74.0027 297.674L73.1976 296.608L71.4578 294.63L69.5468 292.749L67.4831 290.976L65.3083 289.263L60.547 285.755L55.8274 282.041L53.6156 279.991L51.612 277.809L50.0157 275.645L49.2198 274.351L48.4934 272.92L47.8687 271.325L47.3828 269.676L47.1515 268.564L46.9895 267.443L46.9062 265.976L46.9618 264.277L47.1006 263.042L47.2996 261.821L47.6697 260.295L48.3222 258.367L49.0949 256.531L50.3581 254.121L51.8156 251.834L53.4212 249.642L55.1194 247.565L58.6268 243.669L62.0555 240.115L65.461 236.639L68.7047 233.263L71.791 229.946L74.7477 226.638L77.5147 223.43L80.2355 220.168L82.8729 216.924L85.4086 213.739L87.9396 210.5L90.4198 207.297L92.8722 204.094L95.3153 200.863L97.6844 197.669L100.086 194.361L102.487 191.008L104.856 187.65L107.272 184.192L109.664 180.738L112.084 177.216L114.523 173.672L116.919 170.173L119.376 166.578L121.824 162.996L124.29 159.388L126.771 155.77L129.191 152.216L131.661 148.581L134.114 144.963L136.575 141.318L139.042 137.664L141.443 134.087L143.891 130.424L146.32 126.784L148.74 123.148L151.137 119.539L153.437 116.072L155.755 112.591L158.013 109.21L160.271 105.893L162.506 102.686L164.741 99.5738L166.985 96.5622L169.266 93.628L171.566 90.7803L173.944 87.9555L176.336 85.2172L178.886 82.406L181.528 79.5766L184.267 76.738L187.155 73.8494L190.121 70.9972L193.272 68.0903L196.58 65.1835L199.981 62.354L203.669 59.4654L207.565 56.5904L211.581 53.8293L215.94 51.0409L220.586 48.2799L225.375 45.6418L230.395 43.1131L235.809 40.6209L241.454 38.2516L247.136 36.1284L252.864 34.2923L259.194 32.6156L266.228 31.1075L273.848 29.8545L281.9 28.9159L290.201 28.3418L298.617 28.155L307.02 28.3555L315.28 28.9433L323.234 29.9137L330.674 31.2669L337.411 32.9892L340.451 33.9733L343.348 35.0577L346.05 36.2332L348.674 37.5272L351.219 38.9442L353.648 40.4523L358.169 43.6918L362.139 47.0953L365.817 50.7812L369.163 54.5948L372.212 58.4676L375.021 62.3905L377.556 66.2405L379.921 70.1087L382.072 73.8722L384.127 77.663L386.052 81.3581L387.972 85.085L389.906 88.6845L392.021 92.1928L393.164 93.8239L394.399 95.3593L395.94 96.9449L396.592 97.5144L397.273 98.0338L398.443 98.7947L399.475 99.3369L400.044 99.5875L400.701 99.829L401.872 100.162L403.228 100.417L404.01 100.508L404.866 100.553L406.115 100.522L407.836 100.33L409.539 100.007L411.941 99.2868L414.379 98.3482L419.247 96.0519L424.11 93.71L426.521 92.7304L428.857 91.9604L430.787 91.5458L432.078 91.3635L433.341 91.2815L434.377 91.3225L435.497 91.4592L436.344 91.6323L437.191 91.8738L437.908 92.1517L438.662 92.5208L439.44 92.9992L440.226 93.5778L440.855 94.1337L441.587 94.9128L442.086 95.5233L442.595 96.2113L443.562 97.7878L444.418 99.4918L445.186 101.314L445.885 103.242L447.102 107.26L448.25 111.675L449.388 116.304L450.517 120.92L451.697 125.49L453.029 130.237L454.543 135.053L456.227 139.678L458.133 143.933L459.225 145.997L460.405 147.975L461.691 149.87L463.052 151.638L464.491 153.242L466.022 154.709L467.734 156.076L468.549 156.645L469.354 157.146L470.798 157.912L471.792 158.349L472.834 158.727L474 159.037L475.119 159.233L476.322 159.338L477.498 159.329L478.812 159.219L480.112 159.028L482.213 158.559L484.448 157.935L489.454 156.258L494.868 154.463L497.626 153.702L500.249 153.137L502.771 152.845L503.951 152.795L505.099 152.818L506.241 152.95L507.384 153.187L508.236 153.438L509.022 153.747L509.679 154.08L510.373 154.508L511.081 155.05L511.526 155.442L511.988 155.916L512.516 156.54L513.029 157.288L513.529 158.153L513.983 159.11L514.404 160.244L514.806 161.689L515.135 163.247L515.436 165.63L515.588 168.2V170.865L515.454 173.644L514.853 179.217L513.918 184.716L512.738 190.316L511.391 196.307L510.04 202.672L508.865 209.265L508.037 215.931L507.676 222.533L507.847 228.952L508.139 232.06L508.564 235.058L509.133 237.942L509.827 240.671L510.67 243.227L511.651 245.587L512.724 247.61L513.381 248.653L514.084 249.624L515.139 250.863L516.171 251.884L517.282 252.822L518.573 253.738L519.896 254.536L521.349 255.287L523.676 256.258L526.152 257.105L531.538 258.577L537.16 260.144L540.755 261.507L541.537 261.876L542.259 262.263L543.763 263.233L544.781 264.026L545.438 264.632L546.104 265.357L546.766 266.222L547.404 267.243L547.955 268.323L548.223 268.97L548.492 269.726L548.783 270.82L549.042 272.332L549.167 273.676L549.214 275.121L549.121 276.939L548.862 278.971L548.492 280.989L547.742 283.914L546.803 286.803L544.582 292.334L542.018 297.865L539.381 303.319L536.892 308.572L534.606 313.748L532.5 319.056L530.687 324.369L529.326 329.499L528.854 331.969L528.521 334.456L528.331 337.012L528.276 339.609L528.368 342.247L528.577 344.926L529.308 350.298L530.219 355.775L531.015 361.607L531.242 364.605L531.33 367.612L531.246 370.601L531.015 373.499L530.631 376.301L530.131 378.975L528.826 383.932Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M183.106 76.8567L180.265 79.6497L177.568 82.4062L174.916 85.2265L172.372 88.0559L169.854 90.981L167.383 93.9836L164.945 97.0864L162.52 100.303L160.11 103.634L157.704 107.069L155.284 110.609L152.896 114.168L150.448 117.881L148.01 121.613L145.548 125.403L143.096 129.208L140.703 132.93L138.246 136.753L135.803 140.571L133.365 144.385L130.912 148.216L128.511 151.971L126.059 155.789L123.611 159.602L121.186 163.361L118.72 167.175L116.286 170.929L113.82 174.697L111.354 178.447L108.929 182.078L106.43 185.75L103.932 189.35L101.405 192.904L98.8649 196.398L96.3617 199.734L93.7705 203.087L91.17 206.372L88.5464 209.634L85.8997 212.874L83.29 216.013L80.5693 219.23L77.793 222.451L74.938 225.681L71.9813 228.957L68.9644 232.197L65.7578 235.586L62.4402 239.104L59.1133 242.794L55.8511 246.827L54.3612 248.964L53.0147 251.201L51.6219 254.062L51.2286 255.055L50.8862 256.062L50.2893 258.358L50.0348 259.867L49.9053 261.379L49.9238 263.115L50.0857 264.746L50.2569 265.712L50.5114 266.769L50.9556 268.118L51.6081 269.631L52.1633 270.706L52.7833 271.749L53.7273 273.107L54.9396 274.56L56.3231 276.014L58.4793 277.946L60.8207 279.791L65.6236 283.235L70.2045 286.598L72.3515 288.37L74.3365 290.22L76.0948 292.152L77.6819 294.221L79.0932 296.471L80.324 298.863L81.3651 301.383L82.2397 303.989L82.9522 306.632L83.5306 309.261L84.3728 314.414L84.9974 319.471L85.6267 324.816L86.3717 330.47L87.2832 336.265L88.3336 341.965L89.4904 347.36L90.7073 352.326L92.0029 357.001L93.4512 361.703L95.0198 366.391L96.6485 370.893L98.3051 375.148L100.105 379.445L102.021 383.732L103.996 387.878L106.056 391.979L108.202 396.12L110.331 400.23L112.39 404.404L114.296 408.75L115.86 413.161L116.471 415.393L116.957 417.653L117.327 420.022L117.577 422.465L117.697 424.952V427.49L117.35 432.516L116.615 437.441L115.546 442.485L114.232 447.765L112.834 453.096L111.585 458.126L110.72 462.527L110.511 464.391L110.456 466.159L110.553 467.448L110.71 468.409L110.951 469.353L111.344 470.464L111.756 471.367L112.015 471.831L112.33 472.332L112.931 473.143L113.616 473.909L114.107 474.378L114.616 474.802L115.314 475.289L116.064 475.718L116.781 476.05L117.522 476.328L118.308 476.542L119.433 476.747L120.228 476.834L121.015 476.88L122.986 476.825L125.078 476.602L129.904 475.695L135.479 474.465L141.55 473.303L144.683 472.893L147.769 472.674L151.17 472.729L152.47 472.838L153.696 473.016L155.644 473.458L157.329 474L158.12 474.314L158.86 474.661L159.901 475.253L160.984 476L161.905 476.761L162.803 477.636L163.469 478.424L164.172 479.431L164.783 480.493L165.32 481.591L165.764 482.725L166.241 484.365L166.615 486.133L166.944 488.63L167.152 491.254L167.425 496.567L167.633 499.146L167.925 501.479L168.406 503.565L168.693 504.504L169.035 505.342L169.359 505.939L169.711 506.463L170.067 506.9L170.41 507.251L170.683 507.488L170.965 507.698L171.266 507.88L171.636 508.062L172.075 508.231L172.594 508.372L173.181 508.477L173.769 508.527L174.273 508.532L175.217 508.45L176.314 508.276L177.461 508.03L179.622 507.397L182.014 506.591L187.086 504.732L192.125 503.078L194.517 502.499L196.803 502.125L198.547 502.03L199.926 502.075L200.5 502.13L201.037 502.212L201.99 502.435L202.855 502.722L203.688 503.087L204.091 503.296L204.539 503.565L205.155 503.994L205.793 504.536L206.543 505.297L207.265 506.171L207.797 506.955L208.588 508.358L209.296 509.826L210.115 511.885L210.892 514.035L212.47 518.173L213.729 520.683L214.131 521.339L214.566 521.95L215.422 522.952L216.13 523.645L216.764 524.169L217.171 524.451L217.592 524.706L218.342 525.084L219.24 525.435L220.272 525.74L220.975 525.891L221.766 526L222.687 526.055L224.209 526.005L225.472 525.873L226.81 525.658L229.461 524.966L232.186 524.014L237.522 521.626L242.968 518.874L248.386 516.318L251.079 515.261L253.786 514.391L256.757 513.726L257.964 513.539L259.241 513.416L261.259 513.375L262.846 513.471L264.438 513.707L265.761 514.04L267.149 514.518L268.033 514.906L268.954 515.38L269.893 515.967L270.929 516.756L271.762 517.494L272.54 518.282L273.405 519.307L274.474 520.806L275.455 522.364L276.704 524.706L277.875 527.194L280.137 532.506L282.585 537.983L283.959 540.589L285.5 543.077L287.407 545.596L288.258 546.558L289.234 547.542L290.9 548.959L292.409 550.025L293.098 550.444L293.908 550.886L295.62 551.665L297.438 552.299L298.489 552.586L299.539 552.813L301.344 553.06L303.454 553.155L304.573 553.128L305.684 553.05L307.53 552.8L309.608 552.34L311.727 551.702L313.763 550.904L315.516 550.062L317.182 549.15L319.635 547.565L321.93 545.806L324.1 543.902L326.103 541.929L329.689 537.906L332.961 533.728L335.927 529.641L338.786 525.567L341.53 521.667L344.353 517.867L347.291 514.327L348.887 512.65L350.585 511.083L352.774 509.384L353.542 508.873L354.338 508.399L356.281 507.411L357.448 506.928L358.729 506.504L360.58 506.071L362.135 505.834L363.796 505.72L365.61 505.77L367.387 505.962L369.256 506.299L371.986 507.087L374.702 508.131L377.298 509.352L379.82 510.687L384.761 513.452L387.112 514.632L389.435 515.63L391.772 516.373L392.891 516.646L394.043 516.847L395.344 516.951L396.746 516.942L397.509 516.883L398.305 516.778L399.217 516.582L400.262 516.259L401.132 515.913L401.97 515.512L402.835 515.015L403.964 514.213L405.084 513.279L406.458 511.88L407.731 510.345L408.901 508.728L409.989 507.033L412.071 503.401L414.065 499.661L416.152 495.852L418.419 492.184L419.659 490.48L420.978 488.903L422.519 487.368L423.185 486.803L423.912 486.252L424.98 485.586L425.971 485.081L426.586 484.826L427.215 484.602L428.155 484.352L429.274 484.156L430.107 484.069L430.936 484.028L432.944 484.142L435.021 484.425L439.38 485.258L441.666 485.641L443.97 485.864L445.965 485.823L447.218 485.691L448.412 485.454L449.472 485.135L450.582 484.689L451.425 484.27L452.304 483.759L453.201 483.14L454.363 482.16L455.492 481.026L456.866 479.317L458.134 477.444L459.305 475.463L460.401 473.385L462.395 469.189L464.339 464.81L466.282 460.395L468.216 456.112L470.225 451.839L472.302 447.569L474.398 443.423L476.559 439.313L478.785 435.204L481.029 431.226L483.361 427.29L485.758 423.426L488.196 419.754L490.797 416.136L493.471 412.66L496.215 409.375L499.019 406.199L501.814 403.192L504.646 400.093L505.983 398.471L507.246 396.786L508.449 394.968L509.564 393.04L510.545 390.99L511.42 388.844L512.827 384.411L513.965 379.873L515.052 374.957L516.186 369.694L517.366 364.304L518.583 359.042L519.855 354.048L521.243 349.191L522.807 344.216L524.487 339.204L526.227 334.329L528.031 329.627L530.039 324.761L532.21 319.772L534.472 314.806L536.827 309.803L539.321 304.536L541.778 299.105L543.939 293.651L544.846 290.872L545.577 288.074L546.184 284.534L546.285 283.518L546.341 282.438L546.285 280.274L546.091 278.57L545.957 277.859L545.79 277.194L545.392 276L544.925 274.929L544.36 273.909L544.046 273.421L543.652 272.884L543.032 272.164L542.274 271.435L541.223 270.596L540.02 269.804L538.956 269.23L537.036 268.405L535.041 267.676L529.424 266.095L523.987 264.6L521.544 263.744L519.249 262.76L517.306 261.68L516.265 261.001L515.228 260.227L514.016 259.147L513.016 258.099L512.105 256.983L511.161 255.607L510.379 254.276L509.666 252.909L508.685 250.658L507.829 248.289L507.107 245.893L506.501 243.473L505.613 238.621L505.034 233.477L504.734 227.932L504.715 222.105L504.965 216.218L505.423 210.514L505.992 205.146L506.557 200.093L507.024 194.954L507.223 189.806L507.154 187.309L506.955 184.962L506.538 182.616L506.302 181.691L506.011 180.766L505.474 179.467L504.928 178.429L504.6 177.9L504.197 177.331L503.549 176.561L502.772 175.791L502.119 175.239L501.361 174.688L500.537 174.196L499.089 173.503L497.58 172.938L495.308 172.332L492.828 171.836L487.484 171.029L482.061 170.109L479.47 169.498L477.036 168.779L474.805 167.922L472.7 166.901L470.896 165.812L469.919 165.134L468.92 164.364L467.254 162.874L465.722 161.256L464.306 159.502L463.002 157.643L461.826 155.711L460.757 153.711L458.796 149.323L457.065 144.653L455.584 139.933L454.289 135.145L453.058 130.055L451.846 124.765L450.647 119.521L449.453 114.564L448.186 109.962L446.686 105.529L445.83 103.424L444.91 101.483L443.734 99.4602L443.299 98.8086L442.813 98.1525L441.842 97.0408L441.055 96.2708L440.278 95.6329L439.593 95.1819L438.862 94.7855L438.163 94.4848L437.812 94.3663L437.46 94.2661L436.863 94.1385L436.192 94.061L435.452 94.0428L434.961 94.0702L434.415 94.1339L433.786 94.257L432.773 94.5531L431.944 94.8538L431.079 95.2183L429.256 96.1751L427.308 97.3415L423.292 100.034L419.127 102.8L417.003 104.044L414.898 105.119L412.723 105.985L411.705 106.308L410.706 106.554L409.285 106.791L407.851 106.896L407.185 106.9L406.541 106.869L405.435 106.736L404.26 106.49L403.497 106.263L402.673 105.966L401.66 105.515L400.415 104.805L399.24 103.994L398.176 103.11L397.208 102.18L396.232 101.137L394.9 99.5012L393.664 97.7652L391.429 94.0519L389.416 90.2019L387.556 86.3473L385.719 82.47L383.892 78.6883L381.953 74.8657L379.921 71.125L377.673 67.3023L375.253 63.5434L372.518 59.7162L369.524 55.971L366.156 52.2714L362.422 48.7403L360.423 47.0727L358.331 45.4826L356.087 43.938L353.713 42.4664L351.256 41.104L348.702 39.8511L346.065 38.7257L343.353 37.7279L337.32 35.9829L330.499 34.5568L323.022 33.445L315.095 32.634L306.905 32.1237L298.6 31.9187L290.294 32.0372L282.095 32.4928L274.127 33.2765L266.548 34.3563L259.528 35.673L253.166 37.1675L247.382 38.8077L241.663 40.7031L235.939 42.84L230.391 45.1181L225.223 47.4418L220.387 49.8247L215.677 52.3625L211.198 54.9686L207.061 57.5748L203.091 60.263L199.288 63.0195L195.739 65.7578L192.347 68.528L189.094 71.3255L186.059 74.0683L183.106 76.8567Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M481.268 430.488L479.186 434.826L477.145 439.145L475.086 443.587L473.064 448.02L471.098 452.399L469.076 456.896L467.012 461.347L464.874 465.557L463.694 467.626L462.445 469.585L461.098 471.412L459.655 473.057L458.364 474.237L457.438 474.948L456.388 475.608L455.277 476.16L454.199 476.588L453.408 476.834L452.524 477.039L451.525 477.185L449.868 477.262L448.203 477.212L445.991 476.93L443.751 476.538L439.351 475.8L436.538 475.617L435.756 475.627L435.001 475.681L433.604 475.886L432.313 476.201L431.679 476.401L430.98 476.661L429.925 477.144L428.773 477.8L428.084 478.26L427.417 478.748L426.381 479.631L425.303 480.698L424.28 481.814L422.869 483.591L421.532 485.495L419.112 489.482L416.84 493.674L414.665 497.797L412.463 501.807L410.144 505.57L408.932 507.292L407.678 508.887L406.35 510.349L404.999 511.621L403.828 512.505L402.898 513.088L402.556 513.27L402.172 513.457L401.45 513.735L400.761 513.926L400.113 514.049L399.701 514.095L399.285 514.113L398.669 514.09L397.892 513.985L396.962 513.785L396.064 513.521L394.949 513.074L393.607 512.441L392.293 511.739L388.129 509.037L383.848 506.012L379.332 503.082L377.014 501.861L374.617 500.836L372.322 500.116L371.004 499.806L369.588 499.569L367.751 499.415L366.113 499.41L364.535 499.519L362.994 499.752L361.374 500.134L359.852 500.608L358.344 501.214L357.039 501.857L355.78 502.577L353.897 503.861L352.111 505.297L350.445 506.832L348.863 508.459L345.86 511.962L343.065 515.603L340.307 519.407L337.568 523.239L334.676 527.18L331.627 531.089L328.235 535.031L324.519 538.767L322.488 540.544L320.355 542.198L318.12 543.701L315.83 544.986L313.599 545.97L312.355 546.412L311.091 546.767L309.204 547.141L307.69 547.31L306.094 547.355L304.507 547.246L303.031 547.018L302.161 546.818L301.222 546.544L299.945 546.057L298.631 545.414L297.788 544.922L296.9 544.334L295.715 543.405L294.406 542.188L293.12 540.803L291.486 538.676L289.982 536.356L287.313 531.304L284.916 526.173L282.417 521.221L280.997 518.906L279.433 516.778L277.984 515.206L276.925 514.245L275.708 513.32L274.287 512.45L272.756 511.689L271.863 511.325L270.956 511.015L269.475 510.632L267.559 510.313L266.528 510.208L265.389 510.149L263.534 510.19L261.484 510.386L259.453 510.719L256.496 511.452L253.581 512.413L250.777 513.548L248.038 514.805L242.707 517.539L237.515 520.214L235.021 521.344L232.56 522.3L229.797 523.098L228.724 523.326L227.715 523.476L226.267 523.567L224.902 523.531L224.12 523.449L223.31 523.298L222.551 523.08L221.811 522.788L221.029 522.401L220.418 522.036L219.775 521.581L219.238 521.12L218.632 520.496L217.882 519.562L217.207 518.583L216.203 516.687L215.287 514.619L213.556 510.345L212.617 508.34L211.553 506.458L210.456 504.96L209.674 504.076L209.258 503.665L208.818 503.278L207.948 502.631L207.023 502.057L206.125 501.606L205.19 501.237L204.191 500.941L202.733 500.649L201.697 500.517L200.67 500.435L198.203 500.467L195.635 500.704L190.499 501.579L185.405 502.481L181.911 502.782L181.25 502.786L180.537 502.754L179.061 502.567L177.946 502.326L177.127 502.066L176.738 501.911L176.368 501.738L175.803 501.419L175.202 501.009L174.573 500.49L173.939 499.856L173.619 499.487L173.319 499.109L172.902 498.485L172.389 497.547L171.856 496.353L171.371 495.059L170.723 492.717L170.195 490.211L169.293 485.213L168.779 482.812L168.155 480.488L167.155 477.791L166.767 476.939L166.355 476.141L165.503 474.765L164.592 473.549L164.199 473.089L163.754 472.619L162.995 471.927L162.107 471.253L161.371 470.788L160.534 470.346L159.669 469.981L158.692 469.672L157.771 469.457L156.758 469.293L155.62 469.193L154.051 469.184L152.478 469.266L150.141 469.553L147.675 469.972L142.187 471.102L136.218 472.255L133.141 472.692L130.157 472.943L126.89 472.929L125.65 472.829L124.507 472.665L122.925 472.296L121.564 471.849L120.653 471.458L119.824 471.011L119.065 470.496L118.353 469.908L117.696 469.261L117.099 468.56L116.576 467.817L116.16 467.088L115.725 466.118L115.243 464.701L114.892 463.261L114.697 461.949L114.573 459.962L114.577 457.839L114.804 455L115.211 452.089L116.335 446.421L117.58 441.058L118.686 435.887L119.524 430.515L119.949 424.939L119.968 422.114L119.847 419.348L119.584 416.628L119.19 414.004L118.668 411.502L118.029 409.083L117.284 406.768L116.433 404.49L114.48 400.007L112.365 395.678L110.228 391.478L108.062 387.186L105.98 382.875L104.041 378.606L102.144 374.105L100.335 369.48L98.6599 364.86L97.0959 360.149L95.5874 355.187L94.1808 350.112L92.9361 345.1L91.8811 340.193L90.9511 335.044L90.1182 329.445L89.3825 323.444L88.7161 317.225L88.0545 311.024L87.2679 305.096L86.7681 302.321L86.1759 299.692L85.4633 297.269L84.5887 294.94L83.5291 292.749L82.2798 290.662L80.8176 288.676L79.1704 286.803L77.3473 285.058L75.3854 283.422L70.9202 280.224L66.1866 277.062L61.6197 273.722L59.4773 271.863L57.5617 269.899L56.2013 268.163L55.3916 266.933L54.6558 265.557L54.0497 264.122L53.5777 262.632L53.3325 261.625L53.1566 260.605L53.0225 259.156V257.493L53.0965 256.458L53.2122 255.438L53.4991 253.93L53.9664 252.244L54.5633 250.531L55.5766 248.289L56.7843 246.13L58.1586 244.025L59.6439 241.992L62.7718 238.152L65.9229 234.561L69.074 231.067L72.0955 227.709L75.0522 224.374L77.9303 221.066L80.6927 217.826L83.4736 214.514L86.2036 211.211L88.9429 207.834L91.6683 204.413L94.3335 200.982L97.0126 197.428L99.6315 193.865L102.26 190.17L104.869 186.416L107.419 182.652L109.982 178.798L112.481 174.966L114.998 171.061L117.502 167.134L119.949 163.265L122.439 159.297L124.91 155.356L127.376 151.406L129.851 147.437L132.271 143.564L134.742 139.605L137.222 135.65L139.679 131.741L142.192 127.786L144.681 123.895L147.203 119.995L149.743 116.136L152.242 112.404L154.801 108.668L157.35 105.06L159.951 101.51L162.565 98.0796L165.207 94.7809L167.882 91.5961L170.598 88.5343L173.342 85.591L176.164 82.7206L179.001 79.9823L181.999 77.2258L185.099 74.5148L188.315 71.8312L191.707 69.143L195.196 66.5277L198.897 63.9261L202.83 61.3382L206.907 58.8459L211.21 56.4084L215.833 53.9936L220.64 51.6881L225.564 49.5376L230.866 47.4326L236.562 45.3732L242.429 43.4459L248.232 41.7464L253.988 40.3021L260.225 39.0173L267.097 37.8919L274.519 36.9806L282.343 36.3382L290.408 35.9919L298.584 35.9373L306.756 36.156L314.802 36.6207L322.581 37.3041L329.91 38.2108L336.61 39.3544L342.588 40.7851L345.337 41.628L348.03 42.5985L350.667 43.6919L353.212 44.8993L355.683 46.2298L358.02 47.6376L360.204 49.1093L362.281 50.6584L364.248 52.285L366.113 53.9753L369.537 57.4973L372.521 61.0831L375.219 64.81L377.588 68.5143L379.772 72.3324L381.729 76.1231L383.599 80.0734L385.361 84.0555L387.12 88.1835L388.929 92.3661L390.877 96.5031L391.974 98.5762L393.181 100.617L394.495 102.567L395.962 104.404L397.679 106.167L398.535 106.919L399.442 107.611L401.066 108.659L402.454 109.384L403.083 109.662L403.722 109.903L405.152 110.34L406.767 110.682L407.687 110.81L408.71 110.892L410.168 110.896L412.088 110.728L413.99 110.395L415.655 109.958L417.404 109.352L419.093 108.673L421.467 107.534L423.753 106.285L428.153 103.684L430.259 102.517L432.304 101.524L434.307 100.786L435.274 100.513L436.269 100.317L437.236 100.226H438.213L439.032 100.294L439.462 100.367L439.952 100.476L440.563 100.668L441.225 100.941L441.919 101.305L442.525 101.688L443.094 102.112L443.7 102.649L444.455 103.456L445.07 104.212L445.676 105.055L446.407 106.272L447.064 107.557L447.694 108.946L448.55 111.22L449.345 113.68L450.743 118.87L451.946 124.118L453.019 129.23L454.093 134.374L455.264 139.719L456.559 145.123L457.994 150.344L459.581 155.196L461.418 159.73L463.597 164.072L464.805 166.118L466.096 168.077L467.465 169.922L468.937 171.69L470.515 173.38L472.176 174.97L473.911 176.447L475.72 177.841L479.598 180.447L483.605 182.839L487.515 185.167L489.43 186.411L491.249 187.719L492.933 189.118L494.478 190.635L495.751 192.161L496.403 193.068L497.047 194.088L497.852 195.624L498.375 196.836L498.828 198.07L499.471 200.39L499.985 202.891L500.67 208.468L501.058 214.578L501.322 220.993L501.614 227.504L502.021 233.937L502.59 240.134L503.33 245.929L504.246 251.191L504.788 253.579L505.436 255.925L506.204 258.222L507.115 260.45L508.434 263.024L508.929 263.849L509.457 264.632L510.729 266.263L511.617 267.238L512.575 268.145L513.843 269.157L515.139 270.031L516.573 270.856L518.919 271.931L521.441 272.865L526.956 274.446L532.472 276.018L535.748 277.299L536.479 277.649L537.229 278.064L538.533 278.93L539.473 279.682L540.134 280.31L540.731 280.989L541.314 281.791L541.819 282.648L542.286 283.627L542.545 284.302L542.763 284.985L543.003 285.978L543.216 287.441L543.299 288.644L543.318 289.842L543.216 291.573L542.989 293.277L542.661 295.072L542.004 297.697L541.18 300.317L539.13 305.657L536.798 311.006L534.443 316.136L532.203 320.966L529.973 325.827L527.803 330.666L525.739 335.34L523.759 339.919L521.774 344.549L519.821 349.105L517.943 353.492L516.032 357.912L514.079 362.354L512.131 366.692L510.201 370.924L508.212 375.23L506.204 379.486L504.246 383.609L502.224 387.842L500.156 392.102L498.111 396.28L496.033 400.513L493.914 404.8L491.818 409.01L489.713 413.261L487.579 417.576L485.474 421.84L483.383 426.123L481.268 430.488Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M495.548 402.882L493.447 407.429L491.36 411.948L489.232 416.564L487.122 421.147L485.049 425.649L482.916 430.274L480.773 434.894L478.654 439.386L476.41 443.97L474.083 448.444L471.663 452.558L470.349 454.522L469.011 456.317L467.271 458.294L466.753 458.814L466.189 459.324L465.083 460.19L464.088 460.832L463.658 461.069L463.176 461.306L462.455 461.584L461.64 461.816L460.872 461.967L460.035 462.062L459.359 462.081L457.888 461.985L456.393 461.807L451.914 461.042L449.448 460.732L446.833 460.591L444.552 460.732L443.099 460.941L441.697 461.251L440.244 461.716L438.648 462.386L437.047 463.229L435.714 464.085L434.382 465.115L433.123 466.227L431.411 468.049L429.833 470.017L428.376 472.104L427.025 474.264L424.614 478.642L422.314 483.249L420.052 487.855L417.761 492.256L415.216 496.48L413.837 498.412L412.371 500.171L410.858 501.651L409.983 502.376L409.09 503.009L407.952 503.67L406.901 504.153L406.129 504.435L405.337 504.654L404.356 504.832L403.352 504.918H402.26L401.178 504.822L400.252 504.654L398.966 504.294L397.943 503.925L396.948 503.515L394.899 502.435L392.881 501.155L388.837 498.148L384.807 495.127L382.711 493.719L380.615 492.471L378.167 491.3L377.306 490.953L376.371 490.63L374.576 490.142L373.355 489.91L372.041 489.746L370.375 489.673L369.061 489.719L367.663 489.86L365.933 490.179L364.646 490.507L363.388 490.908L361.222 491.769L359.057 492.821L356.947 494.033L354.897 495.387L352.972 496.822L351.126 498.357L347.623 501.72L344.467 505.251L341.451 509.023L338.559 512.855L335.625 516.773L332.585 520.637L329.3 524.364L327.546 526.118L325.709 527.749L323.756 529.248L321.734 530.547L319.833 531.517L318.713 531.978L317.477 532.383L315.839 532.761L314.359 532.971L313.614 533.021L312.873 533.03L311.485 532.948L310.199 532.757L309.292 532.552L308.32 532.255L307.201 531.809L306.044 531.226L305.165 530.697L304.253 530.069L303.217 529.235L301.916 528L300.704 526.679L299.14 524.688L297.673 522.564L294.837 517.99L291.982 513.525L290.483 511.488L288.896 509.593L287.026 507.748L286.235 507.06L285.37 506.381L283.88 505.387L282.709 504.731L281.538 504.185L280.201 503.693L278.901 503.337L277.499 503.068L276.06 502.923L274.676 502.891L273.205 502.954L270.989 503.241L268.749 503.715L266.38 504.394L263.923 505.242L258.884 507.342L253.882 509.757L248.95 512.299L243.975 514.778L241.528 515.867L239.122 516.805L236.174 517.685L235.327 517.871L234.425 518.031L232.708 518.195L231.26 518.209L230.649 518.168L229.992 518.081L229.039 517.881L228.104 517.594L227.202 517.22L226.693 516.965L226.203 516.682L225.606 516.281L224.921 515.716L224.056 514.869L223.264 513.953L222.024 512.131L220.844 510.099L218.549 505.852L217.328 503.852L215.991 501.989L214.598 500.444L213.742 499.642L212.756 498.868L211.71 498.198L210.526 497.574L209.702 497.218L208.781 496.886L207.629 496.571L205.917 496.261L204.085 496.065L201.605 496.02L199.083 496.143L194.174 496.64L189.459 497.027L186.692 496.958L185.923 496.881L185.128 496.744L184.003 496.448L183.05 496.106L182.277 495.746L181.944 495.555L181.551 495.309L180.996 494.894L180.357 494.32L179.718 493.632L179.279 493.077L178.881 492.507L178.418 491.723L177.659 490.129L176.951 488.361L175.387 483.249L173.666 477.868L172.283 474.742L171.82 473.89L171.265 473.016L170.284 471.712L169.321 470.651L168.572 469.954L167.771 469.325L166.716 468.641L165.37 467.931L164.148 467.411L162.903 466.983L161.464 466.623L159.271 466.268L156.916 466.049L153.654 466.031L150.239 466.204L143.308 466.878L136.547 467.389L132.485 467.293L131.407 467.193L130.412 467.042L128.607 466.614L127.154 466.131L126.275 465.757L125.387 465.279L124.572 464.728L123.813 464.108L123.11 463.416L122.472 462.664L121.912 461.866L121.468 461.092L121 460.048L120.482 458.531L120.103 456.987L119.885 455.57L119.742 453.424L119.728 451.127L119.936 448.029L120.334 444.835L121.435 438.575L122.629 432.675L123.619 427.289L124.258 422.25L124.415 419.753L124.452 417.27L124.364 414.814L124.147 412.386L123.795 410.007L123.314 407.652L122.694 405.26L121.953 402.85L120.153 397.97L118.108 393.218L115.994 388.671L113.791 384.06L111.635 379.449L109.613 374.906L107.651 370.163L105.772 365.256L104.051 360.345L102.482 355.406L100.983 350.148L99.5766 344.671L98.3365 339.204L97.3139 333.932L96.5041 328.793L95.8378 323.275L95.2687 317.288L94.7597 310.932L94.223 304.426L93.5058 298.034L92.4276 292.051L91.6919 289.318L90.8128 286.766L89.8179 284.579L89.2025 283.431L88.527 282.333L87.3193 280.656L86.4309 279.599L85.4222 278.515L83.5806 276.815L81.5955 275.239L77.1951 272.277L72.6096 269.453L68.0427 266.4L65.9003 264.696L63.9754 262.887L62.6104 261.274L61.796 260.126L61.0372 258.832L60.357 257.365L59.8156 255.829L59.575 254.95L59.3853 254.057L59.191 252.649L59.1123 250.795L59.2002 248.954L59.4223 247.332L59.8017 245.633L60.2783 243.992L61.1529 241.691L62.2217 239.463L63.4433 237.295L64.7805 235.199L67.6355 231.221L70.5274 227.544L73.5166 223.899L76.4733 220.323L79.3884 216.769L82.2803 213.192L85.0751 209.679L87.9254 206.03L90.7573 202.335L93.5844 198.553L96.3931 194.708L99.1231 190.867L101.862 186.917L104.537 182.966L107.211 178.934L109.863 174.87L112.44 170.851L115.05 166.728L117.627 162.623L120.2 158.495L122.768 154.353L125.271 150.312L127.834 146.175L130.403 142.042L132.957 137.96L135.562 133.827L138.144 129.768L140.772 125.695L143.423 121.653L146.061 117.73L148.786 113.775L151.535 109.916L154.362 106.085L157.235 102.339L160.15 98.7263L163.135 95.218L166.152 91.8919L169.28 88.6707L172.454 85.6135L175.739 82.6656L179.103 79.8362L182.523 77.148L186.104 74.5145L189.759 71.9949L193.567 69.5391L197.57 67.1198L201.674 64.8097L205.954 62.5818L210.521 60.3765L215.255 58.2716L220.067 56.3169L225.212 54.4079L230.719 52.5398L236.378 50.7766L241.972 49.1956L247.52 47.815L253.544 46.5302L260.184 45.3456L267.352 44.3067L274.903 43.4866L282.691 42.9308L290.608 42.6528H298.585L306.553 42.9034L314.46 43.3682L322.211 44.0151L329.67 44.8398L336.661 45.8559L343.001 47.0906L348.627 48.5987L351.228 49.4872L353.754 50.485L356.206 51.6058L358.548 52.8223L360.773 54.1391L362.86 55.5196L364.762 56.9366L366.571 58.4538L368.297 60.0622L369.917 61.7343L372.86 65.2244L375.511 68.924L377.875 72.7558L380.041 76.7562L382.012 80.8431L383.914 85.1852L385.751 89.6503L387.592 94.2202L389.54 98.9495L391.627 103.611L393.936 108.012L395.255 110.149L396.675 112.167L398.54 114.395L399.202 115.083L399.877 115.726L401.377 116.96L402.436 117.698L403.611 118.391L404.995 119.038L406.355 119.53L407.045 119.73L407.836 119.908L409.196 120.118L410.788 120.218L412.477 120.172L413.981 119.995L415.596 119.671L417.187 119.252L419.482 118.441L421.745 117.466L426.354 115.138L430.916 112.873L433.193 111.953L435.455 111.251L437.251 110.919L438.606 110.791L439.226 110.777L439.902 110.809L440.892 110.937L441.873 111.156L442.748 111.438L443.289 111.657L443.886 111.948L444.599 112.368L445.339 112.905L446.153 113.621L446.621 114.099L447.065 114.591L447.703 115.42L448.675 116.951L449.54 118.564L450.535 120.865L451.41 123.33L452.798 128.424L453.908 133.791L454.931 139.545L455.972 145.546L457.078 151.528L458.272 157.237L459.595 162.513L461.131 167.471L462.982 172.341L465.111 177.007L467.47 181.326L470.122 185.445L472.995 189.359L475.984 193.045L479.075 196.676L482.078 200.234L484.998 203.975L487.626 207.893L488.829 209.994L489.958 212.19L490.981 214.459L491.906 216.801L493.419 221.599L494.609 226.733L495.608 232.392L496.506 238.461L497.348 244.721L498.158 250.909L498.944 256.804L499.763 262.295L500.753 267.516L501.387 270.127L502.151 272.719L503.072 275.275L504.164 277.708L505.464 279.982L506.167 281.021L506.986 282.073L508.157 283.331L509.365 284.424L510.739 285.472L512.164 286.37L513.825 287.254L515.532 288.042L518.184 289.035L520.881 289.901L526.101 291.482L528.419 292.352L530.557 293.373L531.991 294.289L532.981 295.054L533.504 295.532L534.046 296.102L534.638 296.854L535.212 297.728L535.702 298.653L535.947 299.209L536.197 299.856L536.475 300.799L536.748 302.189L536.882 303.342L536.956 304.481L536.933 306.144L536.794 307.784L536.554 309.515L536.021 312.053L535.327 314.596L533.537 319.776L531.427 324.997L529.238 330.041L527.105 334.798L524.944 339.541L522.788 344.261L520.682 348.836L518.61 353.328L516.495 357.88L514.399 362.368L512.358 366.732L510.258 371.22L508.148 375.736L506.084 380.151L503.983 384.67L501.859 389.245L499.772 393.742L497.676 398.275L495.548 402.882Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M509.554 374.369L507.402 379.012L505.26 383.65L503.169 388.174L501.022 392.817L498.856 397.505L496.732 402.098L494.576 406.75L492.397 411.452L490.25 416.081L488.079 420.724L485.854 425.435L483.605 430.078L481.268 434.652L478.774 439.149L476.123 443.291L474.693 445.195L473.222 446.922L471.487 448.635L470.779 449.237L470.098 449.756L469.085 450.412L467.947 451.009L467.41 451.246L466.822 451.465L466.045 451.688L465.115 451.861L464.305 451.948L463.491 451.989L461.659 451.866L459.738 451.606L455.218 450.904L451.738 450.713L451.021 450.727L450.211 450.786L448.406 451.046L446.815 451.415L445.279 451.907L443.914 452.494L442.424 453.292L440.92 454.258L439.583 455.292L438.393 456.372L437.19 457.579L435.571 459.47L434.09 461.47L431.337 465.853L428.838 470.419L426.492 475.048L424.146 479.777L421.782 484.42L419.325 488.89L416.664 493.104L415.262 494.981L413.8 496.681L412.301 498.111L411.45 498.808L410.612 499.396L409.571 499.993L408.683 500.399L407.979 500.649L407.188 500.859L406.387 500.986L405.568 501.045L404.675 501.032L404.083 500.977L403.5 500.891L402.681 500.708L401.617 500.362L400.705 499.998L399.752 499.551L397.855 498.448L395.921 497.141L392.006 494.161L387.916 491.122L385.769 489.728L383.557 488.489L380.989 487.345L379.953 486.967L378.898 486.639L376.709 486.119L375.27 485.887L373.822 485.727L371.522 485.655L370.051 485.705L368.602 485.828L366.062 486.229L363.586 486.839L361.204 487.637L358.885 488.612L356.609 489.764L354.406 491.063L352.31 492.471L350.302 493.983L348.386 495.592L346.545 497.287L343.079 500.886L339.835 504.677L336.698 508.559L333.519 512.422L330.206 516.022L328.425 517.694L326.588 519.197L324.594 520.537L323.641 521.084L322.678 521.553L321.123 522.164L319.851 522.533L319.166 522.678L318.477 522.788L317.264 522.879L316.047 522.865L315.09 522.774L314.15 522.61L313.137 522.337L311.975 521.908L311.004 521.462L310.069 520.952L309.005 520.264L307.658 519.216L306.377 518.09L304.665 516.318L302.98 514.4L299.667 510.436L298.002 508.568L296.271 506.795L294.416 505.142L292.486 503.679L290.654 502.549L289.576 501.989L288.386 501.46L286.725 500.877L285.383 500.517L283.93 500.23L282.052 500.016L280.608 499.952L279.165 499.966L276.74 500.162L274.301 500.553L271.821 501.132L269.313 501.866L264.154 503.775L259.037 506.048L254.127 508.458L249.204 510.905L244.355 513.083L242.041 513.926L239.764 514.587L237.617 514.983L236.451 515.106L235.346 515.133L234.101 515.051L232.953 514.869L232.148 514.673L231.306 514.391L230.57 514.063L229.724 513.593L228.789 512.955L227.914 512.245L227.202 511.548L226.101 510.272L225.064 508.923L222.519 505.05L219.835 501.05L217.869 498.695L217.281 498.093L216.68 497.542L215.491 496.608L214.292 495.829L213.667 495.482L212.946 495.136L211.849 494.703L210.22 494.229L208.462 493.874L206.042 493.642L203.534 493.596L198.583 493.879L193.794 494.188L190.56 494.12L189.949 494.061L189.282 493.961L187.76 493.619L186.742 493.291L186.067 493.008L185.423 492.676L184.748 492.243L184.049 491.705L183.341 491.049L182.902 490.58L182.444 490.024L181.911 489.259L181.018 487.687L180.186 485.937L179.265 483.522L178.381 480.912L176.595 475.717L175.133 472.473L174.739 471.763L174.318 471.088L173.273 469.667L172.361 468.637L171.727 468.022L171.052 467.457L169.973 466.705L168.696 465.972L167.632 465.471L166.452 465.01L164.958 464.573L162.82 464.145L160.641 463.862L157.42 463.725L154.01 463.789L147.009 464.29L140.105 464.682L135.668 464.514L134.687 464.404L133.771 464.254L131.892 463.803L130.379 463.293L129.463 462.905L128.528 462.404L127.677 461.835L126.872 461.183L126.131 460.468L125.451 459.689L124.859 458.859L124.387 458.053L123.887 456.978L123.337 455.41L122.929 453.811L122.698 452.344L122.532 450.107L122.508 447.71L122.707 444.425L123.096 440.994L124.156 433.982L125.215 426.884L125.905 419.831L126.016 416.35L125.969 412.928L125.724 409.566L125.308 406.303L124.716 403.132L123.984 400.098L122.194 394.457L120.153 389.395L117.969 384.611L115.739 379.909L113.597 375.289L111.561 370.614L109.603 365.721L107.785 360.727L106.147 355.734L104.611 350.494L103.158 344.936L101.839 339.236L100.719 333.632L99.8308 328.251L99.1599 322.902L98.6278 317.156L98.1928 310.946L97.7856 304.399L97.2674 297.738L96.4669 291.245L95.8885 288.147L95.1805 285.231L94.3014 282.515L93.2603 280.005L92.2146 278.055L91.4603 276.866L90.6367 275.727L89.4151 274.282L88.3694 273.207L87.1941 272.118L85.223 270.551L83.1407 269.102L78.546 266.313L73.8819 263.548L71.6979 262.104L69.6295 260.55L67.4085 258.545L66.7052 257.807L66.0019 256.978L64.9746 255.556L64.1788 254.212L63.8317 253.515L63.5217 252.804L63.0683 251.519L62.6842 249.993L62.513 249.023L62.3973 248.048L62.3418 246.571L62.4205 244.881L62.6518 243.109L63.022 241.377L63.4662 239.865L63.9891 238.379L64.9561 236.124L66.0851 233.937L68.7041 229.677L71.5452 225.654L74.4741 221.785L77.4309 217.986L80.3182 214.313L83.2564 210.55L86.1715 206.764L89.0681 202.927L91.9416 199.032L94.7317 195.173L97.5543 191.177L100.326 187.163L103.093 183.076L105.828 178.952L108.479 174.888L111.163 170.706L113.814 166.532L116.456 162.336L119.094 158.117L121.666 153.998L124.294 149.788L126.927 145.578L129.537 141.423L132.202 137.222L134.844 133.094L137.542 128.952L140.263 124.843L142.97 120.847L145.774 116.833L148.596 112.91L151.52 109.005L154.505 105.178L157.545 101.465L160.678 97.8425L163.852 94.398L167.156 91.0583L170.529 87.8917L174.036 84.8391L177.636 81.9413L181.31 79.1894L185.127 76.5422L188.991 74.0545L193.035 71.6351L197.241 69.2932L201.507 67.0789L205.982 64.9284L210.692 62.828L215.491 60.846L220.331 59.019L225.55 57.2147L231.107 55.456L236.766 53.8021L242.333 52.3304L247.89 51.0365L253.942 49.8199L260.582 48.6991L267.717 47.7195L275.204 46.945L282.903 46.4164L290.718 46.1567H298.58L306.446 46.4073L314.247 46.8584L321.915 47.4917L329.318 48.2799L336.291 49.2322L342.653 50.3804L348.312 51.7609L350.908 52.5719L353.435 53.4877L355.896 54.522L358.251 55.6519L360.5 56.8958L362.619 58.2079L364.554 59.5794L366.404 61.051L368.158 62.6229L369.81 64.2723L371.355 65.9809L372.813 67.7669L375.506 71.5212L377.903 75.476L380.096 79.6587L382.081 83.9506L384.006 88.557L385.885 93.3364L387.726 98.1159L389.684 103.018L391.844 107.935L393.015 110.295L394.264 112.559L395.625 114.705L397.11 116.719L398.892 118.719L399.669 119.471L400.543 120.223L401.913 121.221L403.209 122.004L403.884 122.35L404.574 122.665L406.027 123.207L407.674 123.658L408.465 123.822L409.358 123.963L410.987 124.095H412.782L414.577 123.963L416.461 123.663L418.131 123.275L419.76 122.811L422.217 121.936L424.618 120.915L429.333 118.628L433.812 116.564L436.436 115.666L437.186 115.471L437.982 115.311L439.323 115.156L440.434 115.129L441.137 115.17L441.887 115.275L442.609 115.452L443.391 115.721L444.14 116.058L444.728 116.382L445.292 116.746L445.899 117.22L446.671 117.945L447.412 118.756L448.129 119.676L448.841 120.783L449.614 122.227L450.35 123.808L451.271 126.273L452.113 128.966L453.529 134.698L454.676 140.53L455.648 146.148L456.564 151.565L457.596 157.187L458.808 163.001L460.224 168.778L461.83 174.25L463.63 179.267L465.717 184.023L468.076 188.593L470.612 192.885L473.324 197.022L476.132 201.064L478.899 205.005L481.643 209.083L484.193 213.265L486.525 217.708L488.575 222.428L490.268 227.299L491.652 232.411L492.855 238.028L493.928 244.075L494.9 250.312L495.774 256.477L496.552 262.354L497.278 267.894L498.088 273.366L499.157 278.966L499.855 281.782L500.67 284.497L501.66 287.103L502.808 289.527L503.978 291.436L504.82 292.589L505.727 293.651L506.787 294.68L508.092 295.747L509.568 296.749L510.896 297.496L512.52 298.253L514.278 298.972L519.609 300.704L524.888 302.481L527.507 303.715L528.46 304.258L529.284 304.818L530.14 305.524L530.876 306.249L531.482 306.969L531.834 307.452L532.148 307.953L532.5 308.632L532.852 309.506L533.171 310.577L533.319 311.247L533.453 312.008L533.559 313.06L533.569 314.833L533.439 316.614L533.051 319.006L532.468 321.439L530.82 326.551L528.798 331.8L526.656 336.912L524.532 341.746L522.366 346.558L520.187 351.342L518.059 355.989L515.939 360.582L513.783 365.243L511.65 369.854L509.554 374.369Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M371.361 67.3842L374.197 71.0383L376.691 74.9202L378.991 79.1256L381.105 83.5497L383.067 88.1196L385.001 92.9719L386.913 97.9063L388.833 102.75L390.952 107.67L393.335 112.514L394.635 114.796L396.019 116.974L397.522 119.024L399.124 120.915L400.988 122.761L401.784 123.449L402.64 124.118L404.125 125.102L405.291 125.749L406.439 126.273L407.582 126.674L408.757 126.98L409.558 127.121L410.358 127.217L411.506 127.267L413.014 127.189L414.513 126.989L416.679 126.469L418.891 125.749L423.624 123.754L428.492 121.517L430.898 120.51L433.304 119.653L436.15 118.92L437.126 118.742L438.158 118.628L439.643 118.587L440.948 118.665L441.85 118.797L442.716 118.997L443.539 119.266L444.423 119.644L445.344 120.141L445.927 120.519L446.556 120.984L447.283 121.617L448.097 122.469L448.847 123.398L449.522 124.369L450.239 125.599L450.984 127.153L451.674 128.848L452.525 131.472L453.279 134.315L454.529 140.384L455.574 146.621L456.509 152.668L457.43 158.336L458.448 163.748L459.702 169.27L461.215 174.847L462.973 180.246L464.926 185.267L467.124 189.992L469.567 194.558L472.14 198.895L474.823 203.114L477.53 207.292L480.112 211.406L482.625 215.762L484.934 220.323L486.946 225.089L488.742 230.283L490.292 235.746L491.569 241.222L492.61 246.585L493.498 252.08L494.331 258.003L495.141 264.345L495.946 270.92L496.788 277.458L497.76 283.654L498.343 286.525L499.019 289.209L499.819 291.637L500.8 293.938L501.878 295.892L502.572 296.945L503.396 298.02L504.562 299.301L505.691 300.358L506.903 301.314L508.116 302.125L509.578 302.941L511.169 303.72L513.539 304.691L516.019 305.611L521.053 307.588L523.677 309.005L524.639 309.639L525.523 310.336L526.541 311.315L527.401 312.309L528.054 313.206L528.665 314.245L529.095 315.161L529.516 316.323L529.895 317.74L530.155 319.166L530.289 320.533L530.307 322.514L530.173 324.61L529.766 327.353L529.16 330.064L528.406 332.679L527.522 335.263L525.49 340.384L523.274 345.446L521.058 350.307L518.897 354.973L516.694 359.702L514.515 364.404L512.396 368.974L510.23 373.64L508.051 378.36L505.908 382.994L503.743 387.659L501.55 392.402L499.389 397.082L497.237 401.734L495.049 406.481L492.892 411.197L490.764 415.853L488.566 420.619L486.322 425.335L483.967 429.877L482.666 432.124L481.283 434.274L479.798 436.311L478.183 438.188L476.494 439.787L475.508 440.58L474.472 441.295L472.949 442.166L471.524 442.817L470.793 443.09L470.048 443.327L468.799 443.628L466.994 443.892L465.074 444.015L462.497 443.892L460.035 443.614L455.487 443.013L452.854 442.881L452.261 442.899L451.692 442.949L450.66 443.127L449.712 443.377L449.055 443.605L448.351 443.906L447.505 444.352L446.302 445.127L445.089 446.052L443.535 447.501L442.012 449.146L440.527 450.982L439.06 452.977L436.312 457.169L433.679 461.684L431.166 466.327L428.807 470.911L426.433 475.645L424.041 480.356L421.597 484.844L418.886 489.168L417.415 491.149L415.864 492.949L414.347 494.384L413.431 495.118L412.431 495.797L411.247 496.448L410.238 496.89L409.437 497.164L408.54 497.387L407.619 497.528L406.596 497.587L405.486 497.551L404.301 497.405L403.367 497.2L401.715 496.662L400.012 495.947L397.888 494.808L395.746 493.496L391.257 490.543L388.879 489.104L386.38 487.751L383.674 486.543L380.791 485.527L377.769 484.794L376.265 484.534L374.632 484.338L371.837 484.21L370.047 484.256L368.284 484.379L365.165 484.844L362.18 485.536L359.339 486.447L356.688 487.518L354.273 488.707L351.964 490.047L349.775 491.519L347.698 493.095L345.736 494.744L343.852 496.476L340.285 500.116L336.879 503.87L333.483 507.607L330.022 511.051L328.203 512.614L326.371 513.99L324.502 515.129L323.581 515.598L322.614 516.013L321.429 516.4L320.36 516.651L319.597 516.765L318.834 516.824L317.922 516.81L317.01 516.719L316.034 516.528L315.086 516.259L314.29 515.958L313.216 515.43L312.369 514.942L311.56 514.418L309.82 513.074L308.048 511.529L304.489 508.235L302.574 506.554L300.515 504.909L298.321 503.429L295.98 502.125L293.389 501.018L292.066 500.554L290.613 500.125L287.929 499.556L286.342 499.328L284.634 499.168L281.539 499.109L278.434 499.301L275.371 499.729L272.419 500.353L269.587 501.141L266.852 502.066L261.675 504.212L256.575 506.631L251.555 509.01L249.089 510.062L246.59 510.987L244.022 511.744L241.459 512.268L239.316 512.468L237.688 512.477L237.095 512.441L236.424 512.363L235.207 512.14L234.009 511.807L232.935 511.416L231.899 510.933L231.001 510.413L229.923 509.648L229.049 508.923L228.137 508.099L226.481 506.299L224.87 504.362L221.631 500.535L219.285 498.303L218.577 497.729L217.837 497.191L216.134 496.143L214.672 495.391L213.067 494.708L211.23 494.12L209.356 493.66L207.347 493.268L204.275 492.876L201.11 492.594L194.919 492.056L190.907 491.355L190.162 491.168L189.366 490.931L187.765 490.311L186.405 489.641L185.642 489.195L184.938 488.716L184.147 488.074L183.282 487.231L182.495 486.315L181.778 485.349L181.172 484.374L180.293 482.652L179.487 480.871L177.516 475.736L176.461 473.13L175.346 470.687L173.898 468.186L173.278 467.27L172.644 466.455L171.658 465.384L170.571 464.4L169.937 463.903L169.299 463.461L168.419 462.956L167.341 462.454L166.383 462.099L165.403 461.812L164.292 461.584L162.654 461.388L160.905 461.306L158.485 461.388L155.963 461.625L150.503 462.4L144.571 463.238L141.503 463.539L138.537 463.685L135.067 463.562L133.97 463.448L132.971 463.288L131.351 462.892L129.949 462.413L129.177 462.076L128.483 461.707L127.784 461.242L127.127 460.714L126.521 460.126L125.975 459.488L125.494 458.809L125.109 458.14L124.693 457.224L124.221 455.871L123.869 454.504L123.643 453.137L123.481 451.187L123.425 449.219L123.541 446.416L123.823 443.514L124.674 437.833L125.66 432.301L126.585 426.56L127.247 420.519L127.474 414.327L127.381 411.247L127.159 408.258L126.784 405.36L126.289 402.581L125.679 399.957L124.947 397.387L123.175 392.421L121.098 387.541L118.918 382.802L116.744 378.119L114.583 373.303L112.542 368.464L110.687 363.662L108.896 358.591L107.207 353.31L105.685 348.02L104.371 342.817L103.2 337.377L102.15 331.467L101.247 325.102L100.516 318.405L99.9795 311.543L99.5862 304.681L99.2438 298.011L98.795 291.737L98.0407 286.065L97.4809 283.522L96.759 281.085L95.8058 278.697L95.2922 277.627L94.7277 276.583L93.557 274.752L92.7288 273.64L91.845 272.574L90.1191 270.806L88.2497 269.184L86.1675 267.644L83.9511 266.163L79.3518 263.343L74.7524 260.368L72.5406 258.686L70.4908 256.841L68.8991 255.06L67.9875 253.848L67.187 252.567L66.4004 251.005L65.7572 249.364L65.4657 248.412L65.2298 247.455L64.9799 245.929L64.8503 244.138L64.8457 243.018L64.8966 241.901L65.0863 240.225L65.4611 238.334L65.9793 236.402L66.9048 233.805L68.0014 231.349L69.2045 229.066L70.5278 226.857L73.4198 222.628L76.4135 218.637L79.4119 214.773L82.401 210.937L85.2884 207.187L88.222 203.301L91.1185 199.378L93.9966 195.378L96.8469 191.327L99.6047 187.318L102.395 183.176L105.143 179.03L107.873 174.838L110.58 170.624L113.195 166.519L115.874 162.281L118.544 158.039L121.195 153.811L123.874 149.547L126.502 145.369L129.186 141.14L131.879 136.93L134.558 132.812L137.311 128.652L140.069 124.565L142.901 120.473L145.779 116.432L148.675 112.504L151.66 108.618L154.658 104.9L157.819 101.2L161.039 97.6421L164.403 94.1657L167.827 90.8715L171.381 87.7004L174.976 84.748L178.766 81.8821L182.643 79.1848L186.646 76.5923L190.782 74.1046L194.942 71.7855L199.296 69.5256L203.835 67.3341L208.426 65.2747L213.154 63.3109L218.18 61.3837L223.38 59.5475L228.614 57.8526L233.977 56.2898L239.821 54.7543L246.104 53.2736L252.587 51.9067L258.986 50.713L265.099 49.7516L270.994 49.0272L277.222 48.485L283.95 48.125L291.075 47.9519L298.349 47.9656L305.498 48.1569L312.281 48.485L318.574 48.9224L324.548 49.4782L330.758 50.2391L337.249 51.2461L343.783 52.5582L349.997 54.1894L352.866 55.128L355.55 56.1349L357.984 57.2056L360.293 58.3811L362.458 59.666L364.499 61.051L366.405 62.5273L368.182 64.0809L370.19 66.1221L371.361 67.3842Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M455.685 152.125L456.648 158.404L457.666 164.91L458.781 171.375L460.03 177.513L461.428 183.149L463.029 188.356L464.93 193.487L467.073 198.489L469.349 203.246L471.76 207.894L474.249 212.523L476.669 217.07L479.038 221.749L481.273 226.597L483.272 231.549L485.063 236.785L486.683 242.398L488.098 248.202L489.278 253.939L490.227 259.47L491 265.038L491.671 271.038L492.258 277.517L492.79 284.356L493.336 291.345L494.021 298.207L495.034 304.613L495.756 307.529L496.645 310.208L497.547 312.19L498.255 313.452L499.106 314.701L499.925 315.685L500.971 316.737L501.795 317.452L502.655 318.122L504.863 319.498L507.273 320.738L512.479 322.997L515.047 324.232L517.421 325.631L518.91 326.82L519.91 327.768L520.539 328.474L521.169 329.317L521.71 330.214L522.214 331.258L522.663 332.442L522.908 333.249L523.126 334.165L523.316 335.336L523.431 337.031L523.427 338.42L523.362 339.787L522.978 342.703L522.344 345.655L521.539 348.54L520.609 351.314L518.526 356.577L516.241 361.707L513.895 366.751L511.609 371.617L509.36 376.41L507.093 381.271L504.872 386.078L502.674 390.803L500.402 395.637L498.107 400.462L495.807 405.169L493.346 409.967L490.791 414.664L488.126 419.056L486.696 421.157L485.262 423.084L483.786 424.824L482.301 426.333L481.084 427.335L480.13 428.009L479.237 428.524L478.557 428.825L477.849 429.062L477.183 429.221L476.753 429.29L476.258 429.335L475.762 429.34L475.124 429.294L474.106 429.121L473.097 428.875L471.381 428.278L469.544 427.544L465.897 426.123L463.991 425.617L463.232 425.49L462.473 425.421L461.58 425.43L460.692 425.522L459.878 425.672L459.086 425.891L458.193 426.232L456.865 426.875L456.208 427.248L455.514 427.686L454.256 428.615L453.099 429.595L451.993 430.624L450.309 432.406L448.661 434.365L445.621 438.593L442.785 443.172L440.175 447.833L437.7 452.595L435.298 457.447L432.985 462.245L430.68 467.097L428.297 471.995L425.808 476.729L424.461 479.03L423.032 481.23L421.477 483.331L419.811 485.235L418.247 486.671L417.178 487.495L416.04 488.224L414.657 488.94L413.384 489.459L412.449 489.755L411.496 489.978L410.326 490.147L409.011 490.22L407.795 490.188L406.485 490.056L405.277 489.833L403.343 489.277L401.441 488.584L399.017 487.468L396.639 486.197L391.863 483.436L389.457 482.133L387.014 480.943L384.497 479.936L381.91 479.125L379.204 478.551L376.423 478.205L373.6 478.119L370.796 478.255L368.038 478.602L365.355 479.125L362.773 479.804L360.232 480.629L355.124 482.675L350.127 485.071L345.356 487.6L340.618 490.174L335.796 492.589L333.349 493.628L330.85 494.53L328.199 495.291L325.441 495.874L322.563 496.243L319.597 496.412L316.603 496.357L313.623 496.143L307.867 495.382L302.55 494.553L297.549 493.961L295.087 493.815L292.616 493.792L290.154 493.91L287.702 494.166L285.143 494.576L282.534 495.122L277.078 496.64L271.595 498.585L266.306 500.768L261.156 503.078L256.015 505.374L251.037 507.324L248.64 508.053L246.261 508.591L243.994 508.873L242.768 508.932L241.588 508.896L240.172 508.727L238.858 508.449L238.095 508.226L237.266 507.925L236.387 507.524L235.318 506.914L234.444 506.326L233.532 505.638L231.825 504.071L230.154 502.326L226.79 498.667L224.921 496.854L222.871 495.145L220.65 493.674L219.345 492.935L218.008 492.288L215.907 491.477L214.121 490.922L212.196 490.425L209.069 489.855L205.857 489.432L199.56 488.757L196.617 488.302L193.905 487.691L191.981 487.017L190.509 486.352L189.903 486.024L189.343 485.677L188.515 485.08L187.603 484.292L186.761 483.427L185.988 482.502L185.331 481.572L184.374 479.914L183.494 478.191L181.352 473.157L179.062 468.145L177.451 465.47L176.873 464.646L176.271 463.889L175.179 462.714L174.05 461.702L173.463 461.242L172.796 460.778L171.797 460.194L170.668 459.657L169.747 459.301L168.725 458.982L167.471 458.695L165.745 458.449L164.005 458.322L161.483 458.326L158.878 458.49L153.474 459.105L147.676 459.798L144.687 460.03L141.799 460.112L138.435 459.926L137.371 459.789L136.399 459.616L134.826 459.197L133.475 458.705L132.721 458.363L132.036 457.98L131.337 457.511L130.62 456.923L129.959 456.267L129.463 455.693L129.019 455.082L128.621 454.426L128.159 453.46L127.705 452.257L127.33 450.945L127.08 449.633L126.881 447.756L126.789 445.861L126.854 443.145L127.076 440.325L127.83 434.73L128.751 429.112L129.625 423.125L130.236 416.796L130.403 410.349L130.273 407.165L130.009 404.084L129.602 401.105L129.075 398.248L128.432 395.564L127.668 392.935L125.845 387.837L123.74 382.816L121.556 377.936L119.395 373.093L117.257 368.077L115.249 362.996L113.426 357.925L111.7 352.59L110.08 346.977L108.623 341.313L107.392 335.814L106.406 330.46L105.592 324.747L104.935 318.528L104.458 311.867L104.144 304.9L103.936 297.783L103.7 290.689L103.237 283.814L102.848 280.529L102.325 277.417L101.631 274.492L100.761 271.772L99.7942 269.526L99.1603 268.309L98.42 267.07L97.3604 265.584L96.3193 264.336L95.1995 263.161L93.2792 261.466L91.2063 259.916L88.9899 258.486L86.6902 257.133L82.0908 254.572L77.5933 251.82L74.9789 249.824L74.308 249.228L73.6972 248.622L72.5312 247.287L71.7076 246.148L71.3143 245.514L70.9626 244.863L70.4212 243.664L69.9446 242.307L69.6994 241.377L69.4912 240.347L69.3292 239.003L69.2783 237.213L69.3709 235.418L69.6207 233.641L69.9678 232.069L70.3935 230.52L71.231 228.169L72.2397 225.881L73.4196 223.599L74.7245 221.325L77.5239 216.951L80.439 212.741L83.4373 208.554L86.3894 204.472L89.3601 200.33L92.2937 196.175L95.1625 192.033L98.0313 187.814L100.831 183.636L103.653 179.367L106.453 175.075L109.201 170.824L111.977 166.487L114.721 162.199L117.479 157.871L120.237 153.547L122.944 149.337L125.734 145.036L128.533 140.771L131.361 136.529L134.215 132.324L137.047 128.274L140.009 124.182L143.012 120.173L146.121 116.19L149.305 112.29L152.557 108.509L155.921 104.814L159.364 101.278L162.964 97.8379L166.666 94.562L170.529 91.3954L174.522 88.3838L178.608 85.5316L182.842 82.7978L187.113 80.2555L191.564 77.7905L196.131 75.4259L200.693 73.2207L205.455 71.0701L210.387 68.9788L215.338 67.0196L220.363 65.1789L225.675 63.3838L231.145 61.6752L236.581 60.1261L241.963 58.7501L247.756 57.4607L254.114 56.2305L260.976 55.1006L268.208 54.1301L275.667 53.3601L283.255 52.8316L290.909 52.5582L298.585 52.5354L306.266 52.7541L313.924 53.1824L321.508 53.802L328.925 54.5948L336.032 55.5562L342.64 56.7089L348.567 58.0803L351.214 58.8549L353.759 59.7297L356.174 60.7047L358.502 61.7936L360.737 63.0056L362.851 64.3178L364.822 65.7211L366.696 67.2383L368.469 68.8649L370.139 70.5917L371.708 72.4142L373.184 74.3233L374.581 76.3234L375.904 78.4011L378.301 82.7295L380.527 87.4178L382.572 92.2702L384.478 97.1864L386.403 102.362L388.393 107.611L390.48 112.678L392.83 117.548L394.163 119.899L395.602 122.123L397.157 124.177L398.864 126.059L400.576 127.599L401.613 128.392L402.779 129.157L404.357 130.005L405.823 130.634L407.336 131.13L408.937 131.49L410.728 131.741L412.533 131.85L414.356 131.8L416.119 131.618L417.974 131.322L420.649 130.675L423.282 129.841L428.362 127.813L433.197 125.708L435.437 124.838L437.51 124.164L439.153 123.818L440.203 123.69L440.707 123.663L441.189 123.672L441.924 123.749L442.655 123.895L443.368 124.105L443.872 124.3L444.414 124.565L445.015 124.925L445.816 125.508L446.588 126.182L447.343 126.966L448.064 127.877L449.008 129.285L449.86 130.766L450.933 133.053L451.914 135.559L452.752 138.142L453.492 140.826L454.686 146.271L455.685 152.125Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M477.072 233.709L474.99 228.57L472.88 223.654L470.659 218.61L468.438 213.475L466.351 208.331L464.38 202.941L462.543 197.264L460.937 191.496L459.609 185.823L458.54 180.169L457.587 174.068L456.675 167.498L455.731 160.664L454.677 153.898L453.409 147.597L452.65 144.744L451.794 142.138L450.757 139.733L450.211 138.685L449.647 137.741L448.758 136.511L447.824 135.427L447.333 134.944L446.778 134.461L446.01 133.901L445.186 133.418L444.39 133.039L443.872 132.839L443.266 132.643L442.475 132.465L441.471 132.329L440.263 132.265L439.069 132.292L437.824 132.429L436.122 132.748L434.428 133.162L431.971 133.932L429.408 134.844L424.174 136.812L419.126 138.466L416.794 139.013L414.508 139.35L412.653 139.423L411.417 139.373L410.108 139.218L408.743 138.931L407.322 138.493L405.948 137.933L404.565 137.218L403.232 136.397L401.881 135.436L399.979 133.809L398.165 131.964L396.472 129.946L394.88 127.763L393.436 125.499L392.099 123.148L389.619 118.068L387.384 112.796L385.353 107.584L383.349 102.312L381.276 97.0316L379.12 91.9788L376.811 87.2494L374.183 82.716L372.758 80.5973L371.24 78.5607L369.616 76.6289L367.881 74.8018L366.035 73.0841L364.073 71.494L361.977 70.0223L359.76 68.6737L357.424 67.4617L354.98 66.3819L352.306 65.375L349.46 64.4455L343.357 62.8372L337.036 61.5569L330.818 60.5682L324.849 59.8346L318.866 59.2833L312.466 58.855L305.618 58.5634L298.474 58.4268L291.269 58.4632L284.255 58.6819L277.643 59.0737L271.525 59.625L265.728 60.3449L259.708 61.2972L253.415 62.4864L247.062 63.8623L240.931 65.375L235.226 66.9788L229.854 68.6919L224.509 70.601L219.267 72.6604L214.255 74.8018L209.341 77.0663L204.441 79.4628L199.675 81.9141L194.974 84.4337L190.273 87.0444L185.697 89.6597L181.125 92.3661L176.618 95.1271L172.306 97.911L167.998 100.859L163.838 103.907L159.766 107.105L155.829 110.441L152.039 113.899L148.374 117.507L144.849 121.225L141.424 125.08L138.098 129.035L134.877 133.062L131.721 137.181L128.7 141.291L125.683 145.537L122.74 149.793L119.797 154.135L116.873 158.509L114.013 162.837L111.121 167.252L108.271 171.622L105.398 176.032L102.51 180.442L99.6739 184.766L96.7541 189.19L93.8159 193.601L90.8453 198.034L87.8654 202.536L85.0197 207.014L82.2851 211.725L81.0358 214.145L79.9253 216.555L79.0045 218.947L78.278 221.38L77.769 223.973L77.6302 225.175L77.5654 226.351L77.6163 228.21L77.8014 229.764L77.9263 230.42L78.1022 231.153L78.5094 232.392L79.0322 233.6L79.5134 234.511L80.0548 235.386L80.7905 236.375L81.9566 237.664L83.3031 238.926L85.3298 240.462L87.5461 241.901L92.3676 244.621L97.1058 247.378L99.2805 248.868L101.321 250.494L103.172 252.299L103.991 253.219L104.815 254.262L105.888 255.871L106.638 257.197L107.327 258.664L108.026 260.518L108.484 262.063L108.882 263.726L109.349 266.578L109.659 269.617L109.891 276.187L109.803 283.203L109.622 290.466L109.525 297.829L109.631 305.21L109.997 312.555L110.649 319.795L111.57 326.838L112.708 333.559L114.013 339.815L115.434 345.542L116.993 350.895L118.779 356.267L120.75 361.612L122.819 366.76L124.943 371.745L127.145 376.834L129.255 382.005L131.087 387.277L132.596 393.081L133.174 396.225L133.637 399.524L134.086 406.463L133.938 413.657L133.295 420.815L132.383 427.622L131.471 433.75L130.865 438.922L130.768 441.072L130.838 443.109L131.06 444.667L131.296 445.688L131.633 446.758L132.175 448.029L132.767 449.141L133.1 449.674L133.461 450.189L134.276 451.178L135.206 452.116L135.765 452.608L136.348 453.059L137.302 453.684L138.38 454.262L139.125 454.595L139.967 454.909L141.091 455.237L142.623 455.543L144.182 455.739L146.5 455.825L148.939 455.761L154.269 455.342L160.183 454.873L163.251 454.773L166.295 454.836L169.854 455.21L170.996 455.415L172.075 455.661L174.032 456.272L175.628 456.928L176.294 457.251L177.026 457.657L178.238 458.449L179.459 459.415L180.223 460.113L181.023 460.924L181.977 462.053L183.129 463.657L184.188 465.334L185.53 467.822L186.766 470.369L189.116 475.235L190.324 477.353L191.624 479.267L192.707 480.529L193.767 481.563L194.211 481.941L194.655 482.288L195.502 482.848L196.464 483.367L197.251 483.718L198.135 484.042L199.06 484.297L200.629 484.579L202.225 484.762L204.432 484.862L206.741 484.876L211.669 484.88L214.218 485.008L216.763 485.295L219.41 485.855L220.465 486.156L221.58 486.548L223.19 487.254L224.565 487.992L225.888 488.817L227.905 490.348L229.872 492.056L233.648 495.651L235.61 497.428L237.687 499.091L240.033 500.59L241.171 501.191L242.351 501.706L243.901 502.226L245.734 502.663L246.724 502.832L247.714 502.946L249.399 503.023L251.37 502.959L253.452 502.745L256.325 502.212L259.166 501.469L264.613 499.574L269.966 497.369L275.366 495.1L280.761 493.013L286.272 491.204L292.287 489.632L298.747 488.316L305.382 487.245L311.883 486.375L318.005 485.582L323.747 484.725L329.517 483.641L335.463 482.251L341.432 480.593L347.211 478.788L352.75 476.952L358.437 475.057L364.188 473.262L369.69 471.804L372.235 471.284L374.664 470.924L376.918 470.756L379.162 470.77L381.202 470.984L382.345 471.184L383.567 471.453L385.871 472.132L388.236 473.002L390.669 474.086L393.177 475.335L398.119 478.087L402.945 480.834L405.337 482.078L407.591 483.121L409.816 483.91L410.83 484.197L411.732 484.388L412.782 484.516L413.703 484.548L414.476 484.507L414.823 484.466L415.226 484.393L415.818 484.247L416.461 484.019L417.211 483.682L417.752 483.39L418.326 483.03L419.103 482.461L420.232 481.477L421.37 480.338L422.814 478.629L424.23 476.72L427.002 472.364L429.621 467.671L432.124 462.764L434.567 457.707L436.913 452.704L439.227 447.715L441.568 442.658L443.895 437.687L446.227 432.834L448.657 427.905L451.123 423.043L453.617 418.314L456.259 413.498L458.98 408.709L461.793 404.025L464.782 399.355L467.882 394.959L469.52 392.89L471.163 391.008L472.852 389.304L474.522 387.874L475.637 387.126L476.683 386.548L477.299 386.27L477.877 386.056L478.511 385.892L479.159 385.782L479.816 385.737L480.403 385.746L480.732 385.778L481.116 385.832L481.5 385.919L482.018 386.088L483.17 386.612L484.29 387.213L485.105 387.71L486.289 388.516L487.557 389.3L489.593 390.311L490.287 390.571L490.634 390.671L490.986 390.749L491.768 390.858L492.485 390.894L493.207 390.867L493.85 390.785L494.201 390.712L494.544 390.621L495.095 390.43L495.789 390.115L496.543 389.692L497.2 389.245L497.871 388.712L498.602 388.019L499.8 386.648L500.906 385.158L502.123 383.176L502.776 381.941L503.4 380.593L504.344 378.091L504.714 376.861L505.029 375.549L505.381 373.376L505.501 371.927L505.492 370.51L505.348 369.257L505.108 368.09L504.844 367.238L504.663 366.765L504.414 366.263L504.136 365.799L503.761 365.293L503.34 364.824L502.822 364.336L502.257 363.899L501.665 363.511L501.249 363.293L500.74 363.083L499.356 362.696L497.88 362.404L495.89 362.181L494.049 361.999L492.119 361.612L491.624 361.452L491.268 361.302L490.93 361.119L490.5 360.828L490.097 360.5L489.681 360.085L489.306 359.634L489.005 359.21L488.746 358.768L488.473 358.181L488.024 356.941L487.682 355.743L487.409 354.563L487.029 351.879L486.77 348.84L486.631 342.12L486.798 334.885L487.122 327.44L487.474 319.977L487.77 312.564L487.946 305.21L487.955 297.893L487.76 290.603L487.353 283.326L486.719 276.105L485.868 269.002L484.822 262.145L483.605 255.688L482.254 249.761L480.755 244.334L479.024 239.013L477.072 233.709Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M268.73 62.1264L275.902 61.3746L283.338 60.8324L290.927 60.5226L298.58 60.4497L306.238 60.6137L313.836 60.9919L321.276 61.566L328.434 62.3086L335.144 63.2153L341.256 64.2952L346.767 65.621L352.033 67.3433L354.601 68.3866L357.067 69.5439L359.417 70.8151L361.657 72.2002L363.748 73.6901L365.733 75.3076L367.612 77.0617L369.38 78.9297L371.022 80.898L372.554 82.9483L374.002 85.1262L375.372 87.3952L377.88 92.1474L380.087 97.0362L382.183 102.248L384.228 107.657L386.246 113.006L388.337 118.259L390.683 123.481L391.974 125.996L393.353 128.378L394.834 130.593L396.472 132.666L398.364 134.652L399.303 135.495L400.284 136.27L401.834 137.309L403.292 138.111L404.81 138.785L406.554 139.373L408.322 139.815L410.228 140.143L412.319 140.307L414.267 140.325L416.211 140.238L419.26 139.869L422.296 139.313L428.144 137.919L433.817 136.653L437.486 136.211L438.347 136.174L439.268 136.179L440.975 136.329L442.47 136.598L443.321 136.821L444.131 137.099L445.066 137.518L445.963 138.019L446.889 138.648L447.472 139.113L448.027 139.605L448.749 140.348L449.609 141.418L450.285 142.398L450.942 143.491L451.673 144.936L452.363 146.603L452.964 148.303L453.714 151L454.343 153.861L455.384 160.167L456.286 166.979L457.175 173.977L458.133 180.852L459.192 187.331L460.391 193.286L461.779 198.836L463.449 204.404L465.356 209.958L467.373 215.311L469.423 220.419L471.574 225.64L473.712 230.934L475.716 236.206L477.599 241.651L479.362 247.387L480.935 253.228L482.249 258.951L483.3 264.523L484.17 270.378L484.887 276.725L485.442 283.527L485.808 290.648L485.969 297.947L485.928 305.301L485.687 312.573L485.285 319.644L484.739 326.374L484.096 332.648L483.355 338.48L482.49 344.166L481.402 350.075L480.056 356.153L478.455 362.126L476.655 367.744L474.712 372.979L472.542 378.155L470.2 383.203L467.813 388.047L465.337 392.931L462.806 397.82L460.34 402.604L457.855 407.497L455.37 412.45L452.969 417.334L450.581 422.314L448.194 427.385L445.871 432.402L443.585 437.45L441.285 442.617L439.013 447.742L436.769 452.777L434.423 457.916L431.989 462.956L429.431 467.703L428.019 470.018L426.543 472.196L424.97 474.228L423.309 476.055L421.754 477.444L420.708 478.242L419.644 478.921L418.39 479.558L417.247 480.019L416.405 480.278L415.549 480.474L414.499 480.62L413.333 480.679L412.245 480.647L411.084 480.529L409.909 480.315L408.238 479.85L406.508 479.249L404.19 478.237L401.834 477.075L396.943 474.533L394.412 473.335L391.807 472.246L389.013 471.298L386.065 470.514L382.997 469.968L379.818 469.644L376.607 469.576L373.405 469.722L370.24 470.077L367.173 470.592L361.315 471.972L355.651 473.663L349.909 475.517L344.157 477.335L338.517 478.975L332.862 480.401L326.782 481.695L320.295 482.884L313.646 483.987L307.135 485.076L301.023 486.224L295.346 487.514L289.687 489.09L284.009 490.958L278.489 493.022L273.223 495.182L267.884 497.433L262.535 499.565L259.934 500.476L257.385 501.237L254.886 501.811L252.42 502.171L250.185 502.271L248.931 502.226L247.631 502.084L246.293 501.82L244.891 501.406L244.123 501.123L243.29 500.759L242.254 500.212L240.889 499.323L239.519 498.28L237.733 496.653L235.929 494.877L232.171 491.291L230.084 489.641L227.836 488.165L225.513 486.971L224.092 486.361L222.547 485.778L219.572 484.921L216.421 484.215L209.929 483.153L203.691 481.973L200.429 480.971L199.36 480.556L198.282 480.06L196.926 479.294L195.557 478.347L194.826 477.768L194.058 477.084L193.202 476.21L191.98 474.697L190.856 473.111L189.523 470.911L188.264 468.66L185.604 464.181L183.605 461.548L182.962 460.828L182.198 460.072L180.685 458.814L179.214 457.793L178.446 457.333L177.659 456.919L176.049 456.217L174.027 455.52L171.834 454.941L168.544 454.408L165.046 454.085L157.795 453.934L150.646 453.861L147.273 453.624L144.173 453.183L141.961 452.604L140.36 452.025L139.67 451.715L138.958 451.328L138.134 450.795L137.361 450.185L136.644 449.506L135.992 448.772L135.413 447.984L134.955 447.209L134.46 446.157L133.9 444.612L133.484 443.036L133.211 441.45L133.003 439.158L132.919 436.835L133.017 433.431L133.28 429.832L134.076 422.396L134.84 414.805L135.205 407.238L135.154 403.501L134.941 399.843L134.534 396.253L133.974 392.781L132.406 386.211L130.472 380.26L128.385 374.884L126.187 369.626L123.994 364.368L121.948 359.147L120.065 353.843L118.284 348.203L116.655 342.371L115.244 336.584L114.092 330.966L113.157 325.235L112.407 319.052L111.871 312.4L111.57 305.379L111.528 298.102L111.699 290.68L111.986 283.185L112.213 275.704L112.139 268.368L111.889 264.805L111.468 261.384L110.82 258.112L109.95 255.051L109.016 252.69L108.28 251.173L107.438 249.688L106.452 248.253L105.272 246.822L103.991 245.482L101.913 243.71L99.6966 242.125L95.0602 239.318L90.4654 236.534L87.5781 234.388L86.9535 233.841L86.3751 233.281L85.1211 231.864L84.2373 230.657L83.8209 229.982L83.4415 229.285L82.914 228.091L82.4513 226.734L82.169 225.636L81.9469 224.428L81.8035 222.975L81.7988 221.025L81.9515 219.079L82.2662 217.147L82.6734 215.425L83.1638 213.739L84.0846 211.197L85.1766 208.709L87.7817 203.784L90.6459 199.036L93.5656 194.503L96.564 189.956L99.5207 185.486L102.454 181.021L105.369 176.556L108.215 172.218L111.139 167.79L114.073 163.375L117.016 158.996L119.996 154.631L122.957 150.412L126.043 146.157L129.181 141.965L132.41 137.823L135.719 133.759L139.087 129.846L142.599 126.018L146.199 122.392L150.003 118.856L153.927 115.503L158.049 112.259L162.297 109.151L166.628 106.181L171.07 103.274L175.475 100.494L180.024 97.6832L184.591 94.8765L189.121 92.1063L193.729 89.3043L198.305 86.5751L202.974 83.8778L207.712 81.2534L212.418 78.8022L217.365 76.4102L222.464 74.1457L227.595 72.0817L232.986 70.1454L238.64 68.3274L244.345 66.7008L249.967 65.3112L255.719 64.1175L261.965 63.0513L268.73 62.1264Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M381.891 107.766L383.973 113.188L386.106 118.697L388.327 124.014L390.812 129.135L392.214 131.618L393.727 133.974L395.356 136.152L397.156 138.17L399.067 139.92L400.177 140.785L401.339 141.574L403.051 142.539L404.652 143.273L406.308 143.874L408.191 144.371L410.084 144.717L412.11 144.945L415.188 144.991L418.348 144.777L421.485 144.321L424.539 143.733L430.36 142.43L433.173 141.874L435.894 141.473L438.74 141.341L439.873 141.378L441.03 141.505L442.307 141.769L443.473 142.12L444.426 142.508L444.926 142.749L445.407 143.018L446.175 143.519L446.971 144.152L447.772 144.913L448.267 145.46L448.785 146.102L449.451 147.064L450.451 148.859L451.321 150.754L452.306 153.515L453.167 156.527L454.49 162.801L455.457 169.079L456.23 175.148L457.003 181.286L457.919 187.737L459.043 194.417L460.371 201.082L461.866 207.452L463.486 213.357L465.23 218.902L467.15 224.474L469.149 230.046L471.102 235.514L472.971 240.999L474.785 246.759L476.46 252.668L477.904 258.5L479.079 264.186L480.046 270.091L480.842 276.483L481.443 283.359L481.827 290.576L481.971 297.984L481.869 305.415L481.531 312.71L480.981 319.713L480.263 326.274L479.412 332.32L478.422 338.015L477.219 343.906L475.794 350.021L474.202 356.135L472.508 361.985L470.773 367.498L468.89 373.048L466.877 378.629L464.823 384.06L462.787 389.286L460.663 394.653L458.474 400.062L456.304 405.352L454.129 410.628L451.904 415.999L449.692 421.298L447.554 426.424L445.356 431.705L443.122 437.058L440.901 442.312L438.633 447.56L436.259 452.864L433.789 458.003L431.151 462.869L429.717 465.216L428.227 467.407L426.663 469.417L425.025 471.221L423.419 472.656L422.466 473.39L421.448 474.055L420.347 474.638L419.273 475.089L418.482 475.349L417.594 475.563L416.608 475.709L415.507 475.777L414.489 475.759L413.392 475.659L412.277 475.467L410.671 475.048L408.996 474.501L406.683 473.549L404.277 472.437L399.238 470.018L396.614 468.874L393.903 467.836L390.988 466.924L387.911 466.173L384.718 465.649L381.414 465.334L378.078 465.27L374.756 465.416L371.48 465.772L368.296 466.277L362.239 467.64L356.423 469.298L350.523 471.121L344.587 472.934L338.784 474.597L333.116 476.082L327.138 477.513L320.84 478.939L314.478 480.356L308.338 481.791L302.545 483.281L296.812 484.953L291.028 486.853L285.359 488.926L279.918 491.077L274.444 493.319L268.933 495.496L263.584 497.31L261.016 497.975L258.453 498.453L255.806 498.699L254.589 498.722L253.414 498.677L251.679 498.467L250.161 498.153L248.703 497.715L247.486 497.223L245.987 496.449L244.557 495.56L242.628 494.093L240.735 492.471L236.987 489.122L234.952 487.464L232.754 485.896L230.255 484.475L229.033 483.878L227.789 483.345L224.938 482.379L221.894 481.568L215.42 480.356L208.947 479.185L205.912 478.401L203.089 477.44L201.173 476.533L199.725 475.7L198.319 474.729L197.208 473.804L195.899 472.483L194.691 471.066L193.187 468.92L191.79 466.656L188.976 461.926L187.422 459.698L185.705 457.652L184.243 456.299L182.906 455.274L182.295 454.864L181.573 454.436L180.194 453.752L178.228 452.982L176.201 452.367L173.078 451.766L169.714 451.365L162.56 451.046L155.3 450.8L151.811 450.467L148.558 449.916L146.194 449.223L144.482 448.558L143.742 448.198L142.96 447.756L141.96 447.073L141.021 446.298L140.16 445.446L139.586 444.777L139.003 443.988L138.48 443.132L137.921 441.993L137.282 440.33L136.796 438.63L136.468 436.935L136.204 434.53L136.074 432.092L136.125 428.543L136.343 424.825L137.046 417.198L137.68 409.489L137.888 401.893L137.467 394.608L137 391.127L136.398 387.796L134.83 381.609L132.942 376.019L130.832 370.638L128.629 365.27L126.515 359.962L124.548 354.641L122.679 348.982L120.958 343.091L119.458 337.218L118.223 331.491L117.219 325.663L116.395 319.366L115.775 312.578L115.396 305.411L115.285 298.007L115.447 290.512L115.863 283.067L116.474 275.827L117.196 268.961L117.913 262.637L118.477 256.914L118.737 251.57L118.686 248.959L118.482 246.421L117.996 243.596L117.76 242.64L117.446 241.615L116.742 239.81L116.104 238.498L115.373 237.245L114.322 235.76L113.249 234.461L112.092 233.236L110.051 231.445L107.821 229.755L102.977 226.588L100.594 225.003L98.391 223.358L96.568 221.663L95.661 220.665L94.8513 219.594L94.0323 218.259L93.329 216.838L92.9403 215.854L92.6164 214.856L92.311 213.498L92.0796 211.735L92.0102 210.614L92.001 209.393L92.1259 207.593L92.4174 205.639L92.8292 203.707L93.6436 200.937L94.6569 198.235L95.823 195.619L97.1186 193.063L99.9781 188.061L102.963 183.304L106.003 178.679L109.057 174.141L112.055 169.804L115.169 165.421L118.32 161.101L121.55 156.823L124.858 152.622L128.25 148.599L131.836 144.708L135.598 141.104L139.711 137.714L144.116 134.68L148.882 131.964L153.94 129.572L159.053 127.467L164.244 125.376L169.422 123.03L171.898 121.704L174.271 120.291L176.506 118.797L178.663 117.193L182.744 113.703L186.543 110.031L190.263 106.204L193.96 102.408L197.754 98.6539L201.641 95.0636L205.708 91.61L209.886 88.3978L214.324 85.3315L218.895 82.5066L223.745 79.8458L228.821 77.39L233.998 75.1985L239.495 73.1846L245.284 71.3439L251.133 69.7447L256.889 68.4234L262.774 67.3344L269.151 66.4141L276.045 65.6623L283.342 65.1155L290.894 64.7875L298.57 64.6873L306.251 64.8239L313.821 65.1748L321.141 65.7215L328.054 66.4368L334.43 67.3253L340.265 68.4234L345.878 69.854L351.389 71.7266L354.04 72.8383L356.566 74.0457L358.917 75.3534L361.17 76.7977L363.313 78.3787L365.335 80.0873L367.223 81.9098L368.995 83.8462L370.661 85.901L372.22 88.0516L373.659 90.275L375.001 92.5577L377.523 97.4875L379.809 102.609L381.891 107.766Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M372.609 93.1952L375.306 97.8607L377.782 102.932L380.091 108.231L382.243 113.543L384.408 118.979L386.694 124.487L389.128 129.795L391.825 134.775L393.352 137.163L394.981 139.404L396.73 141.464L398.627 143.341L400.515 144.872L401.649 145.651L402.907 146.398L404.601 147.218L406.16 147.82L407.766 148.294L409.57 148.663L411.366 148.89L413.286 149.013L416.187 148.945L419.153 148.663L425.016 147.647L430.837 146.517L433.766 146.097L436.597 145.888L439.11 145.974L440.503 146.138L441.9 146.43L443.108 146.822L444.278 147.319L445.31 147.874L445.805 148.189L446.282 148.521L447.115 149.196L447.952 150.02L448.781 150.991L449.581 152.098L450.257 153.237L451.117 155.019L451.885 156.973L452.76 159.875L453.505 163.047L454.685 169.899L455.624 177.084L456.452 184.188L457.271 190.912L458.155 197.136L459.196 203.055L460.492 209.142L462.033 215.384L463.731 221.558L465.494 227.44L467.266 233.044L469.108 238.785L470.935 244.621L472.62 250.385L474.086 256.044L475.401 262.012L476.562 268.51L477.538 275.485L478.283 282.802L478.76 290.325L478.945 297.947L478.843 305.588L478.464 313.174L477.83 320.619L476.978 327.809L475.96 334.598L474.827 340.894L473.596 346.74L472.208 352.558L470.635 358.545L468.923 364.568L467.155 370.391L465.383 375.941L463.504 381.609L461.528 387.363L459.539 392.995L457.586 398.407L455.555 403.952L453.459 409.57L451.367 415.07L449.313 420.405L447.175 425.886L444.996 431.394L442.835 436.78L440.618 442.156L438.286 447.578L435.857 452.841L433.261 457.807L431.832 460.208L430.332 462.463L428.741 464.541L427.047 466.414L425.46 467.849L424.386 468.678L423.299 469.384L422.022 470.054L420.851 470.537L419.995 470.819L419.121 471.038L418.038 471.22L416.645 471.33L415.609 471.334L414.489 471.271L413.161 471.093L411.393 470.715L409.644 470.236L407.155 469.366L404.615 468.35L399.331 466.086L393.931 464.044L391.159 463.22L388.341 462.568L385.421 462.113L382.432 461.848L379.42 461.798L376.417 461.93L373.47 462.24L370.55 462.705L364.808 463.999L358.894 465.689L352.897 467.553L347.035 469.38L341.329 471.084L335.351 472.76L329.128 474.414L322.918 476.009L316.944 477.554L311.174 479.121L305.279 480.843L299.352 482.734L293.633 484.73L288.154 486.812L282.56 489.044L276.897 491.281L271.284 493.263L268.461 494.093L265.593 494.762L262.664 495.241L259.749 495.473L257.088 495.423L255.598 495.286L254.053 495.045L252.345 494.621L250.568 494.024L248.884 493.314L247.394 492.534L245.881 491.582L244.414 490.557L242.304 488.867L240.208 487.085L236.002 483.677L233.795 482.187L231.546 480.907L229.556 480.023L228.252 479.549L226.924 479.148L224.467 478.629L221.977 478.292L217.059 478.009L212.552 477.827L210.437 477.613L208.397 477.235L206.851 476.756L205.727 476.296L204.653 475.745L203.501 475.007L202.27 474.064L201.114 473.029L199.48 471.207L197.893 469.147L194.825 464.523L193.238 462.167L191.521 459.866L189.097 457.178L188.329 456.445L187.436 455.684L185.349 454.157L183.822 453.21L182.128 452.321L179.931 451.405L177.816 450.704L175.669 450.121L172.157 449.469L168.497 449.036L161.167 448.631L154.255 448.307L151.131 447.97L148.304 447.473L146.453 446.927L144.949 446.339L144.339 446.047L143.7 445.692L142.816 445.104L141.988 444.43L141.229 443.687L140.817 443.222L140.438 442.739L139.952 442.015L139.489 441.168L138.999 440.038L138.582 438.794L138.305 437.623L138.041 435.823L137.879 433.891L137.865 431.226L138.009 428.438L138.61 422.738L139.388 416.687L140.091 410.172L140.475 403.369L140.369 396.599L139.707 390.17L139.179 387.167L138.532 384.238L136.903 378.62L134.899 373.043L132.743 367.562L130.615 362.222L128.528 356.736L126.529 351.055L124.733 345.355L123.193 339.71L121.851 333.805L120.666 327.376L119.671 320.45L118.922 313.165L118.454 305.661L118.297 298.048L118.459 290.42L118.917 282.843L119.639 275.408L120.569 268.222L121.633 261.406L122.739 255.032L123.808 249.018L124.761 242.917L125.446 236.479L125.599 233.171L125.566 229.882L125.293 226.638L124.766 223.535L124.067 221.088L123.47 219.507L122.735 217.931L121.925 216.578L120.722 214.933L119.384 213.416L117.275 211.552L115.067 209.875L110.741 206.709L108.798 204.886L108.076 204.08L107.377 203.141L106.674 201.952L106.123 200.79L105.744 199.774L105.424 198.64L105.225 197.551L105.101 196.093L105.082 194.817L105.156 193.45L105.383 191.751L105.785 189.906L106.304 188.083L107.271 185.477L108.455 182.925L109.843 180.388L111.393 177.882L113.045 175.449L114.781 173.13L116.604 170.911L118.496 168.838L120.486 166.91L122.522 165.211L124.442 163.903L125.576 163.261L126.802 162.682L128.218 162.167L129.499 161.821L130.429 161.652L131.36 161.557L132.391 161.543L133.516 161.625L134.723 161.821L135.996 162.14L136.889 162.45L138.652 163.284L140.364 164.236L142.451 165.594L144.482 166.951L146.504 168.131L148.586 169.111L150.146 169.608L151.478 169.904L152.195 170.013L153.01 170.091L154.194 170.104L155.573 169.995L156.582 169.845L157.577 169.639L159.044 169.225L160.64 168.633L162.199 167.949L164.504 166.728L166.813 165.302L169.024 163.762L171.181 162.103L175.396 158.454L179.297 154.545L182.896 150.33L184.525 148.134L186.052 145.865L187.487 143.478L188.833 140.999L191.188 135.882L193.234 130.515L195.186 124.847L197.208 119.161L199.383 113.789L201.831 108.764L204.667 104.016L206.199 101.811L207.832 99.6741L211.376 95.6236L215.245 91.9149L219.432 88.4932L223.851 85.3995L228.622 82.5382L233.591 79.9821L238.852 77.6721L244.414 75.5899L250.064 73.7948L255.732 72.3186L261.808 71.0656L268.448 69.9903L275.592 69.1246L283.079 68.4868L290.773 68.0995L298.566 67.9719L306.367 68.0995L314.103 68.4731L321.66 69.0745L328.887 69.8901L335.615 70.9152L341.704 72.1728L347.22 73.7355L349.908 74.6924L352.527 75.7722L355.081 76.9887L357.515 78.31L359.782 79.7315L361.953 81.2943L364.021 82.9938L365.974 84.8163L367.787 86.7527L369.49 88.7848L372.609 93.1952Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M126.048 177.317L126.636 177.69L127.172 178.101L127.496 178.401L127.649 178.579L127.751 178.711L127.802 178.798L127.843 178.884L127.931 179.117L128.015 179.431L128.093 179.896L128.13 180.456L128.116 181.094L128.084 181.468L128.028 181.828L127.853 182.547L127.436 183.773L127.061 184.643L126.603 185.536L125.854 186.703L124.822 188.024L124.345 188.557L123.869 189.031L123.11 189.669L122.129 190.357L121.282 190.84L120.884 191.031L120.509 191.181L120.005 191.336L119.408 191.464L118.797 191.537L118.27 191.546L117.89 191.514L117.594 191.469L117.321 191.396L117.067 191.295L116.822 191.172L116.586 191.022L116.317 190.817L116.067 190.585L115.845 190.325L115.651 190.052L115.512 189.815L115.369 189.518L115.276 189.25L115.193 188.894L115.114 188.37L115.077 187.664L115.105 186.944L115.142 186.593L115.211 186.188L115.387 185.495L115.734 184.516L116.183 183.518L116.757 182.506L117.391 181.609L118.321 180.52L118.941 179.9L119.612 179.303L120.384 178.729L121.375 178.128L122.282 177.677L122.61 177.545L122.98 177.417L123.235 177.353L123.674 177.29L124.479 177.249L125.571 177.28L126.048 177.317Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M202.872 123.972L204.811 118.149L206.893 112.705L209.304 107.542L210.669 105.064L212.126 102.699L213.648 100.476L215.291 98.3344L217.049 96.2658L218.905 94.293L220.834 92.4295L222.847 90.6571L227.178 87.3356L231.736 84.4242L236.742 81.7588L242.064 79.3987L247.607 77.3849L253.738 75.5897L260.387 73.9996L267.263 72.6737L274.009 71.644L280.372 70.915L286.331 70.4548L292.351 70.1997L298.533 70.1177L304.715 70.1906L310.749 70.4229L316.755 70.833L323.173 71.4891L329.988 72.4277L336.92 73.6761L343.583 75.2525L349.621 77.1662L352.3 78.2414L354.873 79.4488L357.316 80.7975L359.644 82.2782L361.828 83.8911L363.891 85.6316L365.821 87.4906L367.63 89.4634L369.333 91.5593L370.934 93.7554L373.854 98.4073L376.389 103.26L378.768 108.499L381.012 113.912L383.145 119.275L385.347 124.747L387.726 130.214L390.34 135.381L391.807 137.814L393.426 140.129L395.527 142.635L396.314 143.441L397.221 144.279L398.993 145.678L400.399 146.617L401.885 147.441L403.976 148.366L405.795 149.013L407.766 149.555L410.265 150.02L412.398 150.271L414.674 150.435L418.348 150.439L422.161 150.266L429.708 149.719L433.354 149.601L436.787 149.706L439.462 150.093L441.437 150.553L442.127 150.767L442.886 151.041L444.112 151.597L445.394 152.326L446.5 153.087L447.596 153.993L448.434 154.822L449.331 155.893L450.132 157.037L450.854 158.23L451.538 159.593L452.283 161.484L452.908 163.42L453.635 166.404L454.232 169.621L455.171 176.574L455.967 183.928L456.767 191.322L457.651 198.467L458.641 205.132L459.766 211.274L461.07 217.147L462.611 223.152L464.314 229.257L466.072 235.276L467.784 241.117L469.473 247.049L471.125 253.292L472.661 259.707L473.985 266.035L475.03 272.1L475.803 277.991L476.368 284.26L476.729 290.999L476.881 298.056L476.817 305.169L476.544 312.076L476.085 318.582L475.461 324.674L474.646 330.693L473.601 337.026L472.347 343.623L470.931 350.262L469.422 356.659L467.872 362.677L466.262 368.5L464.518 374.442L462.676 380.415L460.821 386.206L458.997 391.755L457.077 397.45L455.078 403.251L453.07 408.923L451.099 414.372L449.044 419.954L446.921 425.622L444.806 431.171L442.696 436.611L440.47 442.138L438.148 447.573L435.686 452.686L434.302 455.178L432.822 457.552L431.207 459.793L429.453 461.83L427.787 463.388L426.649 464.286L425.437 465.083L423.961 465.876L422.499 466.5L421.596 466.814L420.578 467.092L419.195 467.357L417.409 467.543L416.271 467.584L415.035 467.566L413.314 467.42L411.292 467.097L409.163 466.659L403.203 464.96L396.985 463.051L390.271 461.447L386.768 460.914L383.182 460.577L379.577 460.49L376.005 460.613L372.47 460.955L369.046 461.456L362.545 462.841L356.534 464.504L350.612 466.341L344.601 468.245L338.618 470.081L332.792 471.799L326.971 473.453L320.919 475.152L314.802 476.893L308.87 478.656L303.23 480.456L297.478 482.442L291.657 484.593L285.943 486.807L280.325 489.021L274.597 491.204L268.975 493.104L266.319 493.833L263.774 494.384L261.086 494.721L260.04 494.776L259.045 494.78L257.366 494.648L256.051 494.434L254.696 494.088L253.553 493.682L252.137 493.017L250.781 492.247L248.879 490.912L246.973 489.39L243.142 486.115L241.06 484.438L238.815 482.807L236.382 481.367L233.781 480.096L230.889 479.025L227.794 478.1L221.181 476.706L214.523 475.467L211.367 474.706L208.429 473.795L206.102 472.797L204.686 472.059L203.39 471.261L202.21 470.391L200.804 469.138L199.494 467.785L197.851 465.689L196.32 463.452L193.303 458.786L191.693 456.59L189.93 454.549L188.278 453.027L187.093 452.107L185.751 451.228L184.28 450.458L182.475 449.692L180.5 449.031L177.427 448.343L174.119 447.851L166.993 447.341L159.701 446.913L156.175 446.494L152.88 445.865L150.363 445.072L148.637 444.357L147.892 443.979L147.198 443.569L146.185 442.862L145.232 442.065L144.353 441.186L143.77 440.502L143.173 439.691L142.585 438.712L141.965 437.427L141.363 435.837L140.896 434.215L140.549 432.483L140.258 430.023L140.105 427.535L140.114 423.908L140.295 420.109L140.901 412.317L141.419 404.449L141.493 396.735L140.942 389.372L140.424 385.882L139.776 382.552L138.161 376.401L136.278 370.838L134.159 365.32L131.98 359.766L129.921 354.239L128.014 348.576L126.228 342.512L124.609 336.169L123.234 329.841L122.156 323.758L121.374 317.876L120.814 311.639L120.477 304.959L120.37 298.006L120.495 291.054L120.837 284.37L121.37 278.118L122.087 272.195L123.021 266.022L124.164 259.479L125.455 252.754L126.825 246.129L128.213 239.846L129.615 233.955L131.142 228.068L132.868 222.122L134.793 216.327L136.903 210.9L139.277 205.761L141.988 200.831L144.963 196.248L148.235 191.883L151.761 187.741L155.462 183.8L159.331 179.982L163.282 176.287L167.335 172.646L171.417 169.052L175.512 165.452L179.57 161.807L183.521 158.062L187.302 154.125L190.795 149.952L192.415 147.742L193.937 145.455L195.357 143.067L196.676 140.593L198.943 135.477L200.961 129.873L202.872 123.972Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M306.562 76.2685L314.497 76.6604L322.201 77.3256L329.494 78.2642L336.198 79.467L342.232 80.966L345.046 81.8545L347.799 82.8705L350.492 84.0187L353.083 85.2899L355.558 86.6841L357.914 88.2013L360.121 89.8233L362.217 91.582L364.206 93.4819L366.09 95.5004L367.843 97.6144L369.486 99.8151L372.531 104.563L375.279 109.593L377.741 114.719L380.142 120.14L382.535 125.685L384.955 131.112L387.555 136.488L390.442 141.723L391.988 144.174L393.64 146.521L395.416 148.753L397.3 150.822L399.303 152.695L401.409 154.349L403.343 155.583L404.624 156.271L405.902 156.854L407.558 157.451L409.067 157.861L410.607 158.158L412.407 158.349L414.068 158.408L415.73 158.385L418.413 158.176L421.171 157.825L427.043 156.932L430.111 156.545L433.169 156.317L436.542 156.381L437.824 156.504L439.027 156.704L440.6 157.105L442.03 157.615L443.007 158.053L444.011 158.604L444.941 159.246L445.889 160.035L446.833 160.987L447.3 161.534L447.745 162.094L448.402 163.074L449.471 165.037L450.428 167.224L451.442 170.254L452.307 173.548L453.598 180.447L454.514 187.367L455.231 193.951L455.898 200.198L456.684 206.645L457.67 213.461L458.85 220.519L460.182 227.558L461.589 234.319L462.996 240.662L464.379 246.731L465.814 253.15L467.239 260.048L468.571 267.279L469.71 274.555L470.598 281.554L471.218 287.987L471.584 293.723L471.746 299.022L471.732 304.235L471.551 309.547L471.2 315.397L470.649 321.972L469.89 329.134L468.937 336.625L467.822 344.156L466.582 351.46L465.277 358.312L463.935 364.632L462.542 370.614L461.011 376.751L459.35 383.057L457.624 389.313L455.893 395.314L454.139 401.146L452.275 407.123L450.322 413.151L448.351 418.997L446.38 424.606L444.26 430.333L442.016 436.06L439.666 441.559L437.088 446.813L435.668 449.341L434.178 451.715L432.591 453.893L430.883 455.879L429.185 457.488L428.158 458.317L427.024 459.101L425.673 459.862L424.345 460.468L423.526 460.773L422.601 461.055L421.24 461.356L419.394 461.588L417.529 461.67L414.832 461.502L412.046 461.105L406.276 459.825L399.854 458.235L392.784 456.864L389.096 456.417L385.311 456.144L381.517 456.098L377.769 456.248L374.062 456.604L370.476 457.114L363.688 458.513L357.465 460.212L351.477 462.103L345.457 464.103L339.488 466.099L333.691 468.013L327.893 469.903L321.928 471.863L315.969 473.863L310.199 475.886L304.475 477.995L298.617 480.246L292.727 482.533L286.85 484.698L280.631 486.638L277.374 487.436L274.028 488.056L270.651 488.429L267.319 488.516L264.441 488.306L262.636 488.037L260.901 487.673L258.981 487.108L256.991 486.356L255.103 485.531L252.498 484.151L249.972 482.629L244.975 479.444L242.379 477.995L239.709 476.697L236.775 475.549L233.666 474.537L227.021 472.965L220.27 471.617L217.031 470.842L214.001 469.949L211.238 468.833L209.975 468.218L208.712 467.507L207.296 466.55L205.885 465.402L204.561 464.158L202.775 462.103L201.105 459.907L197.88 455.337L196.219 453.205L194.409 451.196L192.401 449.387L191.365 448.599L190.194 447.824L188.542 446.926L186.89 446.193L185.081 445.55L182.078 444.803L178.83 444.238L171.755 443.55L164.425 442.926L160.858 442.416L157.517 441.687L154.954 440.817L153.195 440.047L152.437 439.641L151.729 439.208L150.6 438.388L149.545 437.463L148.661 436.534L148.147 435.9L147.611 435.153L147 434.142L146.361 432.811L145.741 431.171L145.251 429.503L144.881 427.722L144.57 425.198L144.39 422.646L144.367 418.938L144.506 415.051L145.019 407.105L145.427 399.113L145.371 391.327L144.695 383.955L143.441 377.18L141.766 371.065L139.828 365.384L137.699 359.725L135.575 354.071L133.609 348.43L131.795 342.502L130.12 335.987L128.635 328.916L127.408 321.443L126.497 313.73L125.937 305.893L125.752 298.006L125.942 290.115L126.497 282.269L127.39 274.528L128.57 267.001L129.972 259.834L131.527 253.178L133.178 247.086L134.969 241.341L136.973 235.609L139.157 229.977L141.466 224.606L143.95 219.366L146.653 214.204L149.489 209.269L152.506 204.476L155.694 199.824L158.961 195.432L162.44 191.094L166.013 186.944L169.779 182.852L173.652 178.911L177.678 175.034L181.763 171.293L185.956 167.58L190.106 163.948L194.261 160.231L198.204 156.467L202.007 152.412L205.427 148.107L207.023 145.769L208.541 143.318L209.929 140.785L211.22 138.169L213.501 132.716L215.578 126.856L217.591 120.888L219.66 115.192L221.95 109.912L223.264 107.356L224.68 104.891L226.212 102.54L227.863 100.294L229.626 98.1703L231.51 96.1473L233.522 94.2337L235.642 92.434L237.872 90.7437L240.19 89.1626L242.605 87.6955L245.104 86.3332L250.439 83.8683L256.001 81.8135L261.748 80.1687L268.124 78.8109L275.157 77.7129L282.686 76.8927L290.529 76.3779L298.529 76.1729L306.562 76.2685Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M426.048 159.789L418.441 159.894L414.725 159.748L411.209 159.411L407.914 158.777L406.387 158.376L404.869 157.889L402.926 157.096L401.26 156.253L399.687 155.301L398.22 154.239L396.758 152.991L395.388 151.66L393.556 149.569L391.9 147.341L390.336 144.917L388.85 142.357L386.143 137.058L383.682 131.681L381.253 126.105L378.833 120.564L376.403 115.284L373.757 110.067L370.869 105.096L369.356 102.799L367.732 100.581L365.978 98.4301L364.118 96.3889L362.156 94.4889L360.074 92.7165L357.807 91.0399L355.392 89.4725L352.847 88.051L350.177 86.7661L347.317 85.5815L344.3 84.5017L337.762 82.62L330.882 81.1301L324.061 80.0229L317.606 79.262L311.531 78.7927L305.312 78.5421L298.941 78.4829L292.597 78.6242L286.406 78.9932L280.154 79.6356L273.561 80.6334L266.768 82.0185L260.128 83.7681L254.016 85.8458L251.263 86.9803L248.593 88.2378L246.015 89.6274L243.545 91.1355L241.208 92.7484L238.982 94.4844L236.895 96.3296L234.929 98.2979L233.083 100.398L231.357 102.617L229.76 104.95L228.284 107.388L226.938 109.921L225.693 112.536L223.389 118.172L221.297 124L219.28 129.686L217.105 135.208L214.565 140.593L213.14 143.158L211.622 145.619L210.012 147.947L208.295 150.193L204.566 154.444L200.619 158.349L196.431 162.117L192.188 165.766L187.917 169.425L183.697 173.125L179.57 176.906L175.549 180.802L171.662 184.816L167.9 188.962L164.277 193.245L160.825 197.624L157.508 202.171L154.407 206.763L151.381 211.634L148.513 216.655L145.833 221.785L143.275 227.18L140.906 232.67L138.763 238.179L136.723 244.038L134.825 250.12L133.15 256.18L131.744 262.14L130.541 268.405L129.532 275.212L128.75 282.515L128.255 290.17L128.079 297.993L128.25 305.816L128.741 313.456L129.532 320.737L130.569 327.503L131.818 333.723L133.303 339.637L135.08 345.664L137.083 351.747L139.18 357.706L141.262 363.511L143.344 369.575L145.246 375.79L146.731 381.827L147.656 387.422L147.902 390.051L148.022 392.689L147.897 397.961L147.397 403.465L146.685 409.643L146.046 416.345L145.87 419.776L145.866 423.075L146.18 427.02L146.347 428.105L146.574 429.207L147.12 431.094L147.721 432.615L148.091 433.376L148.554 434.165L149.197 435.058L149.919 435.887L150.72 436.648L151.34 437.158L152.071 437.682L152.968 438.21L154.398 438.889L155.819 439.436L157.253 439.896L160.381 440.58L163.805 441.104L171.158 441.824L178.64 442.662L182.24 443.309L185.617 444.147L188.597 445.2L190.143 445.874L191.549 446.585L193.127 447.551L194.71 448.708L196.204 449.975L198.199 452.052L200.012 454.244L203.349 458.713L204.982 460.787L206.717 462.75L208.767 464.664L209.66 465.379L210.678 466.099L212.298 467.056L213.811 467.799L215.365 468.441L218.086 469.288L221.006 470.004L227.456 471.266L234.239 472.788L237.589 473.799L240.796 474.965L243.831 476.341L246.686 477.818L251.859 480.925L256.82 483.887L259.328 485.094L261.933 486.074L264.232 486.666L265.81 486.953L267.518 487.158L269.841 487.254L271.617 487.203L273.39 487.076L276.319 486.67L279.234 486.069L284.916 484.447L290.769 482.369L296.687 480.1L302.494 477.85L308.264 475.667L314.205 473.507L320.161 471.416L325.977 469.434L331.853 467.461L337.91 465.443L343.976 463.411L349.932 461.424L355.988 459.456L362.267 457.538L368.542 455.843L374.543 454.585L377.389 454.171L380.253 453.902L383.14 453.788L386.037 453.829L388.952 454.034L391.881 454.376L397.781 455.428L404.101 456.763L410.801 457.907L414.202 458.194L417.502 458.212L420.176 457.934L421.934 457.615L423.697 457.151L425.247 456.595L426.969 455.802L427.991 455.242L428.963 454.645L430.328 453.661L431.776 452.417L433.197 450.982L435.001 448.776L436.625 446.389L438.106 443.86L439.471 441.218L441.873 435.823L444.08 430.119L446.18 424.227L448.161 418.382L450.021 412.609L451.886 406.567L453.727 400.344L455.472 394.17L457.091 388.147L458.664 381.959L460.228 375.426L461.737 368.701L463.13 362.08L464.342 355.775L465.378 349.742L466.322 343.409L467.192 336.561L467.965 329.248L468.594 321.603L469.048 313.757L469.275 305.816L469.256 297.874L468.974 290.019L468.423 282.347L467.646 275.002L466.688 268.117L465.619 261.752L464.462 255.738L463.167 249.428L461.765 242.712L460.349 235.782L459.03 228.92L457.892 222.355L456.962 216.09L456.18 209.698L455.472 202.813L454.764 195.464L453.963 187.896L452.899 180.488L452.191 176.975L451.33 173.708L450.155 170.51L449.586 169.275L448.92 168.058L447.976 166.678L447.055 165.557L446.199 164.678L445.264 163.876L444.145 163.083L442.798 162.304L441.484 161.675L440.026 161.115L438.583 160.705L436.042 160.222L433.442 159.912L428.912 159.77L426.048 159.789Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M456.065 233.842L455.185 226.005L454.422 218.492L453.76 211.429L453.14 204.823L452.423 198.349L451.41 191.669L450.725 188.288L449.915 185.008L448.916 181.828L447.759 178.912L446.565 176.611L445.7 175.226L444.797 174.018L443.904 173.048L442.923 172.155L441.947 171.412L440.911 170.765L439.907 170.259L438.653 169.767L437.357 169.376L436.038 169.075L434.664 168.87L432.647 168.733L430.495 168.706L427.649 168.838L424.827 169.07L419.362 169.494L416.641 169.558L413.962 169.448L411.255 169.075L410.02 168.815L408.803 168.492L406.684 167.749L405.291 167.143L403.843 166.409L401.862 165.193L400.557 164.273L399.22 163.22L397.124 161.316L395.167 159.238L393.302 156.96L391.521 154.522L388.291 149.406L385.38 144.075L382.623 138.516L379.99 132.99L377.389 127.568L374.659 122.146L371.786 116.938L368.686 112.054L366.997 109.703L365.229 107.466L363.388 105.374L361.435 103.392L359.325 101.488L357.072 99.6926L354.716 98.0433L352.259 96.5306L349.622 95.1136L346.846 93.8014L343.968 92.6123L340.992 91.5415L334.963 89.792L328.731 88.5025L321.892 87.5457L314.456 86.8896L306.613 86.5434L298.64 86.5251L290.825 86.8532L283.436 87.5275L276.689 88.5527L270.595 89.9697L267.643 90.8718L264.742 91.906L261.887 93.0861L259.148 94.3846L256.538 95.8062L254.049 97.3598L251.703 99.0411L249.482 100.873L247.386 102.85L245.433 104.96L243.624 107.201L241.958 109.552L240.408 112.045L238.969 114.646L236.35 120.159L234.013 125.795L231.75 131.44L229.28 137.14L226.508 142.58L225.018 145.064L223.403 147.474L221.645 149.811L219.789 152.044L215.829 156.19L211.535 160.076L207.153 163.685L202.595 167.275L198.093 170.815L193.591 174.465L189.209 178.201L184.947 182.083L180.834 186.088L176.863 190.248L173.065 194.53L169.405 198.973L165.948 203.497L162.593 208.24L159.428 213.07L156.384 218.118L153.501 223.308L150.864 228.52L148.328 234.074L145.945 239.86L143.803 245.752L141.841 251.943L140.022 258.586L138.417 265.471L137.103 272.269L136.117 278.739L135.465 284.93L135.076 291.346L134.946 297.993L135.071 304.636L135.46 311.047L136.126 317.22L137.13 323.667L138.491 330.433L140.152 337.286L142.03 343.92L144.02 350.167L146.088 356.222L148.194 362.382L150.114 368.569L151.627 374.661L152.622 380.816L153.075 387.318L153.015 394.02L152.562 400.622L151.937 406.901L151.419 412.96L151.294 415.963L151.326 418.847L151.659 422.159L151.845 423.216L152.081 424.191L152.59 425.754L153.122 427.003L153.529 427.773L154.042 428.588L154.755 429.513L155.62 430.456L156.499 431.249L157.522 432.019L158.577 432.666L160.169 433.45L161.326 433.928L162.482 434.343L165.513 435.14L168.849 435.796L176.114 436.794L183.624 437.883L187.27 438.639L190.712 439.56L194.035 440.785L195.502 441.432L196.848 442.107L198.81 443.282L200.291 444.321L201.794 445.505L203.978 447.528L206.038 449.661L210.021 453.939L212.141 455.976L214.399 457.857L217.041 459.639L218.35 460.395L219.683 461.083L222.695 462.336L225.897 463.393L232.607 464.97L239.26 466.296L245.414 467.886L248.246 468.893L250.995 470.068L253.641 471.439L256.168 472.911L260.897 475.982L265.478 478.88L267.699 480.042L269.934 480.985L271.789 481.545L273.048 481.823L274.417 482.028L276.115 482.137L277.665 482.119L279.211 482.01L281.807 481.641L284.528 481.076L290.469 479.422L296.706 477.344L302.865 475.126L308.838 472.902L314.937 470.619L321.049 468.355L327 466.173L332.918 464.027L339.007 461.844L345.134 459.675L351.172 457.589L357.372 455.552L363.846 453.597L370.37 451.884L376.686 450.595L382.794 449.834L389.073 449.588L395.435 449.829L401.673 450.417L407.771 451.096L413.981 451.538L417.072 451.524L420.042 451.301L422.638 450.841L424.073 450.481L425.521 450.012L427.163 449.324L428.649 448.54L430.148 447.579L431.49 446.535L432.85 445.282L434.123 443.947L435.849 441.801L437.426 439.482L438.898 436.958L440.286 434.274L442.799 428.62L445.001 422.815L447.018 416.769L448.934 410.445L450.716 404.071L452.303 397.847L453.723 391.655L455.074 384.981L456.365 377.754L457.559 370.118L458.623 362.304L459.535 354.563L460.28 347.123L460.872 340.161L461.33 333.687L461.696 327.367L461.997 320.651L462.223 313.452L462.353 305.948L462.344 298.394L462.177 291.072L461.848 284.188L461.376 277.768L460.756 271.449L459.974 264.71L459.054 257.443L458.054 249.752L457.036 241.824L456.065 233.842Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M306.586 92.0791L314.077 92.3661L321.175 92.9767L327.75 93.9289L334.076 95.3003L340.336 97.1775L343.395 98.3166L346.319 99.5604L349.091 100.914L351.747 102.399L354.255 104.003L356.647 105.743L358.919 107.611L361.061 109.598L363.069 111.675L364.966 113.862L368.492 118.551L371.69 123.544L374.595 128.697L377.409 134.142L380.148 139.66L382.864 145.141L385.747 150.704L388.819 156.103L392.174 161.17L394.029 163.589L395.977 165.844L398.023 167.886L400.216 169.754L402.576 171.412L403.756 172.127L405.037 172.815L407.046 173.713L408.6 174.278L410.183 174.743L412.876 175.299L415.61 175.617L418.405 175.722L421.191 175.69L426.641 175.453L429.385 175.385L432.051 175.449L434.942 175.791L436.044 176.009L437.08 176.292L438.422 176.779L439.634 177.349L440.458 177.818L441.319 178.406L442.221 179.139L443.23 180.119L444.035 181.035L444.77 181.996L445.613 183.308L446.492 184.971L447.302 186.798L448.273 189.683L449.111 192.845L450.425 199.957L451.415 207.789L452.216 215.995L452.923 224.292L453.59 232.438L454.228 240.234L454.844 247.506L455.418 254.185L455.945 260.459L456.454 267.015L456.912 274.114L457.278 281.714L457.5 289.687L457.555 297.875L457.453 306.162L457.236 314.441L456.949 322.606L456.658 330.529L456.385 338.065L456.139 345.095L455.885 351.629L455.556 358.008L455.07 364.81L454.372 372.141L453.433 379.841L452.262 387.655L450.901 395.3L449.402 402.513L447.797 409.142L446.043 415.298L444.002 421.376L441.661 427.249L440.375 429.991L438.982 432.611L437.46 435.072L435.78 437.372L433.85 439.55L432.883 440.484L431.87 441.35L430.251 442.526L428.728 443.45L427.132 444.243L425.161 445.013L423.25 445.601L421.316 446.07L417.979 446.599L414.398 446.936L406.652 447.164L398.434 447.205L390.078 447.451L381.883 448.125L374.123 449.264L366.988 450.777L360.492 452.531L354.278 454.504L348.063 456.65L341.937 458.864L335.991 461.056L329.958 463.307L323.762 465.621L317.612 467.927L311.597 470.159L305.341 472.401L298.984 474.51L292.866 476.228L290.025 476.834L287.235 477.267L284.524 477.481L281.849 477.472L279.471 477.239L278.138 477.012L276.718 476.688L274.252 475.895L271.855 474.893L266.788 472.237L261.328 469.303L255.118 466.491L251.75 465.298L248.229 464.236L241.117 462.619L234.319 461.32L231.205 460.627L228.267 459.83L225.583 458.864L223.015 457.67L221.003 456.472L219.712 455.579L218.384 454.563L216.306 452.7L214.344 450.713L210.448 446.398L208.435 444.293L206.311 442.307L203.512 440.138L202.522 439.482L201.508 438.867L199.223 437.71L197.608 437.022L195.845 436.375L192.601 435.459L189.131 434.703L181.737 433.573L174.287 432.497L170.761 431.791L167.531 430.925L165.005 429.946L163.376 429.144L162.784 428.798L162.145 428.379L161.146 427.595L160.221 426.725L159.448 425.85L159.004 425.262L158.541 424.56L158.023 423.608L157.435 422.241L156.945 420.783L156.533 419.202L156.051 415.986L155.815 412.477L155.913 404.809L156.292 396.608L156.477 388.215L156.135 379.891L155.126 371.859L153.544 364.309L151.619 357.356L149.597 350.932L147.556 344.58L145.585 338.01L143.822 331.322L142.378 324.747L141.309 318.382L140.574 311.94L140.13 305.114L139.981 298.002L140.13 290.885L140.564 284.033L141.282 277.54L142.309 271.098L143.692 264.427L145.391 257.648L147.32 251.055L149.407 244.877L151.683 238.995L154.205 233.213L156.894 227.672L159.707 222.428L162.765 217.229L165.986 212.204L169.364 207.342L172.913 202.622L176.54 198.162L180.395 193.774L184.346 189.61L188.525 185.532L192.786 181.677L197.265 177.905L201.791 174.337L206.524 170.77L211.276 167.252L216.033 163.662L220.655 159.921L224.977 155.966L227.032 153.848L228.994 151.624L230.826 149.31L232.543 146.909L235.68 141.746L238.461 136.243L240.95 130.675L243.416 125.057L246.109 119.485L247.567 116.838L249.131 114.291L250.806 111.894L252.634 109.602L254.619 107.443L256.752 105.424L259.033 103.565L261.439 101.87L264.021 100.308L266.737 98.8861L269.592 97.6012L272.567 96.4531L275.58 95.4689L278.638 94.626L281.734 93.9335L284.857 93.3776L291.659 92.5666L298.993 92.1429L306.586 92.0791Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M282.842 102.959L280.288 103.793L276.313 105.237L273.5 106.568L270.83 108.089L268.341 109.798L266.018 111.675L263.885 113.693L261.914 115.862L260.077 118.186L258.369 120.633L255.362 125.736L252.544 131.312L249.772 137.003L246.913 142.439L243.692 147.665L241.915 150.152L240.037 152.535L238.056 154.786L235.974 156.937L231.467 160.996L226.692 164.737L221.75 168.268L216.739 171.717L211.89 175.079L207.013 178.611L202.298 182.246L197.68 186.083L193.242 190.083L188.967 194.261L184.877 198.599L180.948 203.114L177.237 207.743L173.674 212.568L170.371 217.452L167.159 222.633L164.133 227.973L161.329 233.417L158.668 239.158L156.235 245.063L154.083 251.091L152.098 257.716L150.298 265.024L148.766 272.879L147.605 281.094L146.883 289.5L146.643 297.984L146.911 306.445L147.674 314.796L148.891 322.915L150.488 330.67L152.348 337.91L154.319 344.607L156.281 351.014L158.229 357.848L159.932 365.315L161.139 373.344L161.699 381.75L161.685 390.288L161.412 398.681L161.357 406.581L161.597 410.213L162.069 413.557L162.694 415.926L163.319 417.648L163.652 418.395L164.073 419.188L164.721 420.195L165.461 421.147L166.359 422.113L167.011 422.706L167.691 423.257L168.626 423.904L170.121 424.751L171.615 425.458L173.128 426.077L176.377 427.071L179.912 427.895L187.292 429.162L194.529 430.41L197.879 431.189L201.044 432.11L203.936 433.231L206.689 434.579L209.271 436.178L211.691 437.955L213.93 439.869L216.077 441.883L220.307 446.075L222.453 448.034L224.707 449.865L227.099 451.492L229.626 452.913L232.295 454.08L235.067 455.028L238.079 455.816L241.244 456.499L248.157 457.789L255.459 459.379L262.723 461.534L269.669 464.14L276.346 466.719L279.802 467.899L283.356 468.897L287.02 469.617L290.778 470.059L294.586 470.159L298.431 469.981L302.262 469.525L306.01 468.86L313.215 467.07L319.873 464.96L326.18 462.691L332.491 460.313L338.752 457.934L344.85 455.656L351 453.442L357.371 451.269L363.835 449.255L370.295 447.505L377.046 446.02L384.417 444.785L392.334 443.824L400.515 443.077L408.575 442.37L416.08 441.4L419.486 440.707L422.637 439.851L425.321 438.839L426.723 438.192L428.051 437.486L429.874 436.32L431.234 435.295L432.609 434.105L434.122 432.574L435.227 431.281L436.329 429.845L437.948 427.389L439.429 424.751L440.757 421.986L441.951 419.097L444.024 412.851L445.791 405.834L447.263 398.17L448.387 390.065L449.132 381.709L449.507 373.234L449.599 364.723L449.525 356.253L449.447 347.902L449.484 339.787L449.687 332.055L450.044 324.843L450.483 318.172L450.955 311.743L451.427 304.909L451.839 297.501L452.144 289.609L452.297 281.385L452.306 272.993L452.177 264.573L451.95 256.267L451.668 248.211L451.358 240.557L451.043 233.39L450.691 226.642L450.196 219.876L449.391 212.8L448.077 205.624L447.147 202.143L446.009 198.881L444.667 196.011L443.829 194.535L442.913 193.2L441.835 191.901L440.632 190.703L439.619 189.842L438.54 189.058L437.263 188.283L435.019 187.213L432.673 186.333L429.314 185.459L425.746 184.775L418.459 183.682L414.891 183.053L411.509 182.306L408.372 181.344L405.41 180.169L403.027 178.934L401.57 178.041L400.177 177.084L397.859 175.184L395.721 173.088L393.736 170.824L391.89 168.427L388.554 163.343L385.463 157.889L382.561 152.348L379.72 146.767L376.824 141.145L373.886 135.714L370.79 130.442L367.468 125.412L363.942 120.833L362.003 118.642L359.958 116.546L357.829 114.591L355.59 112.764L353.161 111.014L350.583 109.374L347.872 107.88L345.035 106.522L342 105.287L338.807 104.175L335.355 103.178L331.695 102.285L323.843 100.89L315.505 100.052L306.95 99.8152L298.459 100.216L290.315 101.269L282.842 102.959Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M307.292 102.95L299.986 103.328L296.501 103.711L293.16 104.226L290.028 104.873L286.937 105.697L283.897 106.709L280.94 107.898L278.071 109.279L275.355 110.814L272.838 112.495L270.46 114.359L268.234 116.4L266.161 118.587L264.259 120.911L262.496 123.339L259.248 128.611L256.31 134.06L253.432 139.559L250.336 145.018L246.931 150.125L245.061 152.531L243.081 154.845L240.985 157.046L238.782 159.151L234.118 163.078L229.223 166.692L224.147 170.163L219.136 173.508L214.064 176.948L209.099 180.488L204.287 184.16L199.618 188.01L195.19 191.983L190.896 196.179L186.829 200.508L182.882 205.078L179.125 209.798L175.543 214.696L172.142 219.772L169.005 224.915L165.984 230.383L163.161 236.019L160.598 241.755L158.187 247.852L155.998 254.153L154.134 260.459L152.593 266.901L151.311 273.931L150.326 281.577L149.706 289.669L149.502 297.993L149.733 306.303L150.39 314.368L151.427 321.968L152.778 328.943L154.379 335.34L156.244 341.65L158.284 348.075L160.26 354.508L161.926 360.901L163.147 367.575L163.869 374.906L164.073 382.857L163.934 391.177L163.855 399.51L164.013 403.565L164.374 407.401L165.123 411.301L165.535 412.823L166.049 414.336L166.831 416.09L167.775 417.78L168.482 418.828L169.237 419.785L170.134 420.737L171.217 421.685L172.476 422.605L173.915 423.48L175.261 424.141L177.663 425.057L180.147 425.827L183.673 426.661L187.421 427.389L195.024 428.793L198.735 429.627L202.242 430.574L205.504 431.718L208.535 433.039L211.233 434.543L213.777 436.247L216.151 438.138L218.418 440.124L222.837 444.102L225.174 445.993L227.636 447.742L230.356 449.314L233.272 450.699L236.478 451.861L239.898 452.868L247.181 454.422L254.589 455.77L261.608 457.328L264.829 458.267L267.933 459.32L273.75 461.748L279.409 464.313L282.25 465.439L285.146 466.409L288.228 467.184L291.435 467.744L294.752 468.031L298.149 468.077L301.554 467.872L304.932 467.471L308.231 466.887L311.484 466.158L317.851 464.363L324.329 462.199L330.798 459.875L337.072 457.561L343.254 455.283L349.625 452.991L356.099 450.781L362.563 448.745L369.249 446.876L376.481 445.168L384.148 443.701L391.917 442.534L399.436 441.637L406.423 440.83L412.901 439.819L416.099 439.117L419.222 438.233L422.281 437.126L425.177 435.8L427.773 434.297L429.11 433.395L430.378 432.442L432.284 430.775L433.474 429.577L434.677 428.232L436.514 425.808L438.152 423.221L439.623 420.464L440.937 417.575L442.075 414.618L443.061 411.589L443.912 408.445L444.639 405.219L445.796 398.175L446.559 390.521L446.934 382.424L446.962 374.077L446.753 365.607L446.471 357.096L446.305 348.585L446.388 340.097L446.763 331.631L447.378 323.189L448.137 314.769L448.91 306.358L449.599 297.956L450.136 289.559L450.497 281.158L450.682 272.738L450.714 264.295L450.612 255.802L450.395 247.255L450.062 238.657L449.585 230.064L448.91 221.594L447.929 213.484L447.276 209.648L446.499 206.08L445.541 202.786L444.417 199.811L443.376 197.77L442.399 196.225L441.937 195.596L441.455 195.004L440.493 193.979L439.355 192.967L438.401 192.247L437.309 191.541L436.139 190.917L434.121 190.074L432.025 189.391L428.911 188.675L425.533 188.065L418.292 186.871L414.604 186.078L411.009 185.099L407.576 183.846L404.378 182.379L401.843 180.916L400.302 179.877L398.849 178.788L396.438 176.665L394.249 174.387L392.288 172.013L390.483 169.525L387.151 164.172L384.125 158.622L381.289 153.096L378.415 147.446L375.496 141.897L372.483 136.57L369.212 131.363L365.695 126.487L363.784 124.155L361.776 121.918L359.662 119.785L357.436 117.767L355.071 115.867L352.587 114.085L349.986 112.45L347.275 110.951L344.383 109.561L341.347 108.285L338.243 107.16L335.064 106.171L331.876 105.337L328.651 104.645L321.927 103.624L314.732 103.059L307.292 102.95Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M333.69 112.596L326.893 111.001L320.563 110.021L317.639 109.748L314.737 109.607L311.887 109.598L309.041 109.725L306.163 110.003L303.285 110.427L300.227 111.033L297.066 111.817L293.874 112.792L290.658 113.958L287.548 115.311L284.61 116.81L281.903 118.464L279.344 120.3L276.957 122.328L274.745 124.51L272.728 126.811L270.854 129.235L267.369 134.479L264.149 139.883L260.933 145.255L257.449 150.49L255.603 152.923L253.645 155.274L251.554 157.538L249.361 159.698L244.72 163.653L239.662 167.343L234.461 170.765L229.098 174.114L223.749 177.449L218.609 180.78L213.505 184.315L208.619 187.983L203.862 191.874L199.309 195.952L194.927 200.23L190.749 204.686L186.756 209.333L182.994 214.117L179.394 219.134L176.058 224.237L172.856 229.654L169.862 235.258L167.15 240.94L164.596 247.004L162.278 253.301L160.288 259.648L158.627 266.222L157.239 273.417L156.175 281.231L155.504 289.491L155.291 297.966L155.555 306.431L156.281 314.66L157.415 322.433L158.872 329.609L160.571 336.233L162.495 342.772L164.541 349.469L166.447 356.203L167.955 362.792L168.927 369.33L169.339 376.155L169.242 383.117L168.807 389.851L168.335 396.079L168.196 399.055L168.191 401.93L168.469 405.465L168.622 406.427L168.816 407.338L169.362 409.183L169.927 410.6L170.288 411.329L170.69 412.031L171.514 413.238L172.481 414.404L173.314 415.27L174.207 416.058L175.391 416.942L177.293 418.122L179.422 419.211L182.582 420.437L186.043 421.512L193.377 423.23L200.669 424.802L204.089 425.677L207.332 426.661L210.308 427.804L213.176 429.144L215.902 430.711L218.507 432.443L223.384 436.252L228.261 440.22L230.843 442.047L233.545 443.71L236.562 445.236L239.815 446.59L243.285 447.71L246.945 448.667L254.487 450.089L261.909 451.255L268.767 452.581L274.967 454.322L281.019 456.572L287.03 458.96L290.079 460.021L293.175 460.933L296.451 461.653L299.838 462.172L303.322 462.427L306.876 462.454L310.425 462.24L313.928 461.83L317.342 461.252L320.692 460.527L327.184 458.755L333.796 456.613L340.45 454.303L346.942 452.012L353.277 449.802L359.87 447.61L366.631 445.519L373.34 443.646L379.989 442.02L387.12 440.516L394.708 439.099L402.417 437.723L409.802 436.261L413.23 435.431L416.465 434.502L419.435 433.436L422.276 432.183L425.053 430.647L426.279 429.855L427.445 429.025L429.453 427.371L430.652 426.232L431.781 425.03L433.511 422.893L434.409 421.608L435.306 420.177L436.732 417.475L437.935 414.623L438.976 411.461L439.855 408.071L440.554 404.445L441.09 400.613L441.646 392.516L441.562 384.042L441.016 375.385L440.281 366.646L439.684 357.894L439.485 349.155L439.813 340.466L440.618 331.9L441.734 323.563L442.964 315.598L444.135 308.158L445.148 301.292L445.963 294.753L446.643 287.805L447.184 280.256L447.587 272.173L447.846 263.73L447.966 255.119L447.952 246.53L447.777 238.17L447.383 230.26L446.638 223.039L446.069 219.763L445.301 216.601L444.167 213.252L443.626 211.971L443.02 210.728L441.623 208.326L440.609 206.873L439.485 205.511L437.962 203.966L436.389 202.631L434.603 201.36L432.896 200.371L430.809 199.378L428.537 198.449L425.247 197.392L421.916 196.494L415.438 194.831L412.439 193.906L409.519 192.817L406.706 191.491L404.036 189.951L401.538 188.188L399.201 186.229L397.008 184.069L394.958 181.755L393.056 179.331L391.279 176.807L387.897 171.394L384.769 165.817L381.766 160.163L378.758 154.426L375.751 148.85L372.618 143.396L369.296 138.124L365.788 133.263L363.859 130.912L361.814 128.638L359.671 126.483L357.413 124.456L354.979 122.515L352.393 120.692L349.677 119.029L346.84 117.512L343.763 116.099L340.51 114.792L333.69 112.596Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M429.425 383.919L430.767 390.648L431.253 393.646L431.591 396.558L431.716 399.351L431.619 402.098L431.276 404.659L430.989 406.026L430.633 407.379L429.786 409.817L429.189 411.211L428.477 412.66L427.029 415.111L426.131 416.423L425.168 417.671L423.396 419.662L422.179 420.861L420.902 421.986L418.39 423.895L415.664 425.64L412.8 427.194L409.802 428.584L403.365 431.003L396.42 433.14L389.322 435.14L382.423 437.058L375.741 438.967L368.893 441.027L361.971 443.218L355.169 445.405L348.464 447.455L341.242 449.378L333.426 450.987L329.378 451.574L325.241 451.975L321.1 452.135L317.005 452.066L312.956 451.72L309.009 451.164L301.467 449.542L294.336 447.724L287.099 446.07L279.377 444.754L271.242 443.742L263.02 442.785L255.126 441.491L251.438 440.603L247.977 439.541L244.798 438.27L241.805 436.817L239.056 435.199L236.405 433.445L231.306 429.741L226.063 426.187L223.277 424.597L220.386 423.171L217.373 421.954L214.264 420.911L207.374 419.148L200.003 417.489L196.306 416.532L192.808 415.425L189.291 413.935L187.935 413.234L186.58 412.4L185.044 411.243L183.706 410.031L182.827 409.092L181.953 407.989L181.092 406.673L180.134 404.85L179.523 403.447L178.954 401.893L178.371 399.811L177.853 397.219L177.446 394.435L177.113 390.375L176.941 386.129L176.835 377.508L176.599 369.025L175.942 361.019L174.818 353.675L173.323 346.872L171.491 339.933L169.543 332.784L167.747 325.64L166.299 318.756L165.286 312.117L164.656 305.174L164.411 297.929L164.545 290.653L165.059 283.627L165.947 276.902L167.28 269.981L169.048 262.86L171.176 255.825L173.554 249.201L176.15 243.068L179.079 237.104L182.249 231.427L185.594 226.1L189.231 220.92L193.048 216.008L197.13 211.247L201.405 206.7L205.907 202.344L210.599 198.212L215.518 194.271L220.58 190.598L225.92 187.072L231.375 183.769L237.052 180.561L242.813 177.417L248.417 174.337L254.057 171.039L259.476 167.489L264.459 163.644L266.828 161.539L269.086 159.343L273.213 154.723L277.119 149.679L280.895 144.535L284.781 139.505L286.868 137.076L289.057 134.776L291.356 132.648L293.8 130.684L296.442 128.871L299.25 127.23L302.179 125.8L305.182 124.597L308.204 123.64L311.29 122.893L314.46 122.364L317.676 122.041L320.956 121.913L324.255 121.977L327.517 122.228L330.733 122.67L333.88 123.294L336.98 124.105L340.103 125.13L343.217 126.347L346.262 127.754L349.182 129.313L351.921 130.998L354.549 132.835L357.062 134.826L359.44 136.94L361.67 139.154L363.794 141.473L367.736 146.398L371.262 151.533L374.608 157.019L377.763 162.651L380.817 168.387L383.885 174.26L386.962 180.014L390.234 185.664L393.838 191.09L395.786 193.596L397.882 195.979L400.187 198.248L402.681 200.362L405.369 202.281L408.219 204.012L411.282 205.556L414.471 206.964L420.865 209.379L426.793 211.762L430.226 213.571L431.147 214.14L432.026 214.755L433.877 216.245L435.163 217.48L436.348 218.801L437.555 220.423L438.569 222.055L439.508 223.859L440.41 226.064L441.035 227.946L441.599 229.973L442.317 233.463L442.872 237.209L443.534 245.305L443.737 253.907L443.594 262.687L443.173 271.367L442.525 279.691L441.687 287.464L440.683 294.608L439.494 301.315L438.023 308.226L436.274 315.389L434.344 322.578L432.382 329.563L430.527 336.366L428.824 343.587L427.491 351.415L427.061 355.502L426.816 359.693L426.806 363.917L427.001 368.123L427.991 376.324L429.425 383.919Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M341.81 134.265L344.485 135.195L348.677 136.83L351.671 138.389L354.498 140.157L357.14 142.12L359.597 144.23L361.855 146.43L363.974 148.759L367.94 153.784L371.498 159.051L374.876 164.655L378.087 170.424L381.132 176.196L384.214 182.169L387.318 188.106L390.52 193.843L394.051 199.469L395.948 202.13L397.965 204.673L400.112 207.056L402.417 209.293L404.883 211.366L407.488 213.27L410.223 214.979L413.045 216.542L418.857 219.385L424.738 222.36L428.236 224.602L429.162 225.299L430.031 226.032L431.743 227.709L432.974 229.14L434.14 230.775L435.205 232.607L436.241 234.785L437.125 237.022L438.203 240.653L439.054 244.571L439.656 248.69L440.063 253.01L440.327 261.926L440.003 271.011L439.235 280.014L438.124 288.73L436.755 296.968L435.205 304.563L433.492 311.516L431.572 318.191L429.379 324.934L426.987 331.646L424.516 338.156L422.026 344.59L419.579 351.178L417.441 357.785L416.594 361.006L415.9 364.259L415.4 367.549L415.095 370.861L415.007 374.246L415.109 377.663L415.849 384.434L416.89 391.027L417.746 397.752L417.89 401.146L417.765 404.436L417.353 407.229L416.96 408.969L416.46 410.6L415.747 412.35L414.882 414.04L414.327 414.951L413.735 415.835L412.629 417.248L411.222 418.756L409.617 420.237L407.775 421.672L406.216 422.724L404.499 423.772L401.579 425.321L398.46 426.775L391.964 429.386L385.38 431.7L378.545 433.914L371.489 436.129L364.446 438.266L357.524 440.188L350.361 441.815L342.708 443.036L334.712 443.656L330.668 443.674L326.684 443.514L318.934 442.667L311.605 441.437L304.479 440.216L296.881 439.191L288.7 438.466L280.108 437.942L271.432 437.327L263.047 436.252L259.087 435.423L255.334 434.411L251.841 433.172L248.565 431.773L245.589 430.26L242.688 428.606L237.02 425.08L231.19 421.809L228.006 420.319L224.647 418.934L217.572 416.637L210.456 414.815L203.742 413.038L200.549 411.972L197.481 410.673L194.695 409.129L193.266 408.163L191.928 407.087L190.494 405.693L189.166 404.153L188.366 403.064L187.639 401.925L186.792 400.326L185.761 397.866L184.881 395.173L184.062 391.346L183.507 387.277L182.993 378.798L182.753 370.282L182.323 362.149L181.49 354.641L180.231 347.683L178.547 340.612L176.645 333.35L174.817 326.105L173.295 319.111L172.194 312.354L171.486 305.26L171.176 297.829L171.278 290.343L171.787 283.108L172.698 276.214L174.063 269.262L175.9 262.154L178.14 255.147L180.671 248.549L183.456 242.435L186.617 236.516L190.041 230.903L193.696 225.609L197.615 220.533L201.659 215.826L206.013 211.247L210.511 206.969L215.328 202.818L220.288 198.959L225.6 195.228L231.106 191.733L236.83 188.443L242.781 185.309L248.754 182.361L254.844 179.427L260.965 176.392L266.809 173.226L272.353 169.754L277.526 165.881L279.886 163.835L282.148 161.685L286.489 157.033L290.579 152.221L294.799 147.333L297.025 144.977L299.375 142.74L301.915 140.63L304.632 138.708L307.847 136.862L309.236 136.184L310.772 135.518L314.256 134.297L317.981 133.331L321.877 132.693L325.93 132.361L330.016 132.375L334.069 132.703L338.919 133.6L341.81 134.265Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M402.788 397.009L402.487 400.062L401.844 404.855L400.881 408.832L400.409 410.322L399.891 411.694L398.956 413.657L397.915 415.43L396.666 417.188L395.435 418.619L393.903 420.113L392.164 421.571L389.549 423.389L386.768 424.984L383.728 426.451L380.499 427.804L373.688 430.224L366.724 432.215L359.644 433.709L352.056 434.716L344.041 435.167L335.93 435.035L328.087 434.438L320.749 433.686L313.826 433.053L306.816 432.68L299.769 432.625L292.865 432.825L286.091 433.131L279.086 433.336L272.053 433.158L268.647 432.83L265.376 432.32L262.303 431.586L259.296 430.625L256.357 429.408L253.484 428L247.862 424.72L242.282 421.271L236.377 418.004L233.277 416.578L230.08 415.302L223.037 413.097L215.412 411.215L207.8 409.329L204.219 408.245L200.938 407.037L198.167 405.688L196.746 404.846L195.464 403.943L194.229 402.882L193.086 401.711L192.272 400.722L191.541 399.679L190.842 398.458L190.139 396.927L189.63 395.555L189.208 394.175L188.547 390.863L188.112 387.245L187.751 379.18L187.552 370.423L187.052 361.402L186.016 352.472L184.48 343.938L182.684 335.992L180.921 328.67L179.371 321.631L178.094 314.177L177.192 306.162L176.757 297.752L176.826 289.236L177.4 280.944L178.441 273.171L179.899 266.054L181.787 259.365L184.156 252.777L186.923 246.412L189.981 240.471L193.391 234.762L197.102 229.326L201.008 224.264L205.218 219.398L209.572 214.888L214.255 210.523L219.09 206.463L224.291 202.531L229.7 198.85L235.383 195.378L241.278 192.138L247.233 189.2L253.53 186.352L259.962 183.582L266.246 180.857L272.46 177.973L278.521 174.784L284.12 171.257L286.758 169.33L289.307 167.289L294.115 162.906L298.654 158.276L303.212 153.615L305.599 151.356L308.103 149.205L310.763 147.214L313.59 145.419L316.792 143.797L318.347 143.136L319.925 142.553L323.307 141.582L325.241 141.159L327.176 140.84L330.854 140.507L332.895 140.457L334.912 140.503L338.48 140.835L340.465 141.15L342.51 141.569L345.781 142.489L347.577 143.118L349.386 143.842L352.393 145.319L355.244 147.045L357.914 149L360.403 151.132L362.693 153.383L364.84 155.766L366.895 158.295L368.848 160.924L372.424 166.318L375.802 172.059L379.009 177.959L382.035 183.855L385.098 189.956L388.184 196.016L391.359 201.843L394.88 207.575L396.782 210.304L398.794 212.91L400.932 215.348L403.213 217.653L405.661 219.822L408.234 221.845L413.657 225.44L419.265 228.779L422.069 230.52L424.748 232.356L427.219 234.356L429.472 236.548L431.138 238.557L432.142 239.979L433.109 241.564L434.109 243.578L434.867 245.451L435.501 247.369L436.293 250.695L436.871 254.267L437.237 258.044L437.435 262.017L437.375 270.15L436.857 278.196L435.992 285.819L434.84 292.963L433.368 300.103L431.568 307.415L429.505 314.692L427.274 321.631L424.919 328.101L422.319 334.516L419.515 340.863L416.65 347L413.745 353.105L410.876 359.411L408.289 365.904L406.133 372.824L404.49 380.493L403.449 388.703L402.788 397.009Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M420.876 332.684L418.058 338.903L415.106 344.945L411.969 350.991L408.762 356.905L405.523 362.764L402.27 368.728L399.175 374.702L396.241 380.875L393.553 387.281L391.175 393.728L388.856 400.248L386.247 406.723L384.692 409.784L382.947 412.623L381.24 414.856L380.046 416.19L378.769 417.443L376.886 419.011L375.294 420.145L373.531 421.243L370.968 422.578L369.265 423.326L367.53 423.986L364.259 424.984L360.839 425.768L357.137 426.369L353.218 426.834L344.797 427.39L335.829 427.663L326.547 427.886L317.113 428.228L307.641 428.729L298.211 429.299L288.929 429.718L279.957 429.704L275.644 429.435L271.503 428.966L267.556 428.255L263.817 427.335L260.342 426.187L257.043 424.866L250.986 421.854L245.036 418.582L238.873 415.603L231.923 412.987L224.357 410.819L216.732 408.955L209.698 407.005L205.913 405.529L204.858 405.028L203.739 404.413L201.726 403.105L200.231 401.939L199.486 401.264L198.778 400.544L197.622 399.168L196.483 397.537L195.799 396.389L195.132 395.095L194.332 393.163L193.545 390.726L192.87 388.083L192.203 384.147L191.745 379.964L191.227 371.312L190.778 362.65L190.038 354.394L188.913 346.767L187.465 339.637L185.744 332.265L183.944 324.346L182.334 315.885L181.14 307.019L180.524 297.915L180.552 288.753L181.251 279.704L182.57 270.993L184.425 262.851L186.697 255.502L189.302 248.986L192.319 242.885L195.692 237.154L199.292 231.9L203.285 226.806L207.538 221.986L212.091 217.357L216.852 212.997L221.877 208.855L227.064 205.014L232.58 201.355L238.28 197.988L244.305 194.822L250.588 191.869L256.941 189.168L263.512 186.552L270.231 183.923L276.732 181.231L282.807 178.351L288.684 175.016L294.171 171.225L299.229 167.042L304.129 162.509L309.061 157.976L311.694 155.775L314.48 153.693L317.464 151.797L320.639 150.134L324.248 148.681L326.011 148.111L327.787 147.642L331.151 147.013L333.363 146.767L335.575 146.658L338.745 146.749L341.109 146.995L343.399 147.373L346.245 148.07L348.443 148.781L350.646 149.633L353.246 150.872L355.115 151.934L356.887 153.059L359.655 155.119L362.218 157.374L364.569 159.775L366.757 162.309L368.812 164.956L370.723 167.671L374.211 173.248L377.487 179.148L380.578 185.149L383.568 191.236L386.598 197.46L389.675 203.556L392.937 209.443L396.584 215.138L398.555 217.794L400.66 220.328L402.909 222.706L405.301 224.957L407.828 227.057L410.442 229.039L415.833 232.73L420.955 236.425L423.426 238.525L425.735 240.858L427.669 243.305L428.687 244.808L429.668 246.48L431 249.264L431.805 251.292L432.541 253.488L433.527 257.424L434.248 261.598L434.674 265.926L434.859 270.41L434.549 279.517L433.541 288.598L432.032 297.355L430.2 305.524L428.168 312.937L425.998 319.644L423.555 326.21L420.876 332.684Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M421.376 322.811L418.71 329.344L415.823 335.691L412.709 341.92L409.475 347.875L406.074 353.679L402.529 359.365L398.957 364.792L395.168 370.255L391.272 375.608L387.237 380.862L383.049 385.992L378.727 390.876L374.142 395.578L369.32 399.93L364.083 403.975L358.465 407.579L352.445 410.746L345.935 413.525L339.179 415.894L332.285 417.917L324.775 419.776L316.516 421.512L307.664 423.034L298.47 424.173L289.225 424.688L284.662 424.624L280.207 424.324L275.866 423.74L271.688 422.911L267.695 421.808L263.896 420.519L256.89 417.548L250.315 414.432L243.749 411.521L237.086 409.124L230.067 407.128L222.608 405.174L218.837 404.062L215.2 402.795L211.086 400.941L209.791 400.235L208.583 399.474L206.668 398.043L205.094 396.635L204.22 395.724L203.41 394.763L202.332 393.255L201.134 391.223L200.472 389.888L199.829 388.398L199.084 386.247L198.394 383.609L197.811 380.78L197.265 376.716L196.909 372.519L196.493 364.236L196.039 356.34L195.252 348.927L193.989 341.514L192.319 333.86L190.496 326.119L188.811 318.569L187.474 311.37L186.54 304.29L186.021 296.95L185.947 289.459L186.327 282.101L187.187 275.048L188.585 268.059L190.57 260.96L193.073 253.998L195.979 247.506L199.26 241.514L202.957 235.86L206.941 230.67L211.299 225.745L215.922 221.152L220.85 216.792L225.967 212.751L231.409 208.91L237.008 205.388L242.981 202.066L249.205 199.014L255.525 196.303L262.304 193.733L269.333 191.295L276.246 188.976L282.918 186.63L289.6 183.978L296.036 180.916L299.03 179.24L301.936 177.44L307.465 173.472L312.768 169.198L318.089 164.929L320.87 162.915L323.766 161.056L327.459 159.129L328.736 158.573L330.036 158.076L333.178 157.115L335.024 156.696L337.028 156.372L339.795 156.158L342.002 156.153L344.311 156.317L346.731 156.696L348.98 157.229L351.256 157.939L353.537 158.869L355.499 159.853L357.378 160.946L359.603 162.473L361.195 163.735L362.718 165.061L365.101 167.43L367.312 169.959L369.394 172.624L371.343 175.385L374.859 181.08L378.14 187.145L381.217 193.337L384.15 199.579L387.116 205.989L390.124 212.295L393.261 218.309L396.792 224.201L398.712 227.007L400.739 229.691L402.872 232.197L405.139 234.593L410.021 239.081L415.046 243.218L419.923 247.437L422.176 249.715L424.231 252.153L425.952 254.668L426.78 256.094L427.521 257.561L428.511 259.994L429.145 261.931L429.672 263.89L430.338 267.43L430.778 271.18L430.986 275.043L430.995 279.039L430.5 286.962L429.469 294.535L428.016 301.638L426.132 308.737L423.874 315.876L421.376 322.811Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M404.874 254.54L409.154 259.839L413.323 265.038L415.285 267.721L417.085 270.451L418.654 273.253L419.982 276.128L421.009 279.057L421.768 282.069L422.254 285.235L422.494 288.498L422.503 291.815L422.295 295.182L421.888 298.544L421.31 301.911L419.625 308.932L417.372 316.19L414.744 323.321L411.875 330.028L408.747 336.425L405.351 342.607L401.802 348.444L398.003 354.098L394.005 359.566L389.878 364.764L385.523 369.826L381.077 374.588L376.343 379.249L371.475 383.632L366.27 387.905L360.87 391.915L355.165 395.724L349.224 399.264L343.148 402.472L336.633 405.497L329.841 408.231L322.872 410.568L315.334 412.536L307.117 414.013L302.837 414.495L298.455 414.783L294.064 414.824L289.742 414.628L285.48 414.163L281.362 413.479L277.411 412.568L273.612 411.507L266.481 409.087L259.388 406.463L252.22 404.007L245.081 401.957L237.909 400.171L230.524 398.262L226.85 397.104L223.37 395.769L220.006 394.088L218.535 393.204L217.184 392.247L215.648 390.931L214.227 389.477L213.366 388.438L212.58 387.345L211.65 385.791L210.498 383.395L209.503 380.757L208.503 376.939L207.754 372.843L206.838 364.19L206.176 355.41L205.352 346.972L204.232 339.14L202.84 331.782L201.197 324.1L199.504 315.826L198.041 307.001L197.051 297.797L196.704 288.434L197.121 279.171L197.625 274.647L198.314 270.286L199.193 266.072L200.225 262.081L201.415 258.34L202.729 254.823L204.145 251.624L205.727 248.535L207.467 245.574L209.336 242.735L211.312 240.029L213.408 237.427L217.896 232.515L222.764 227.936L227.942 223.681L233.393 219.744L239.144 216.081L245.053 212.792L251.415 209.725L258.106 206.955L264.973 204.563L272.307 202.412L280.103 200.412L288.016 198.499L295.595 196.549L302.605 194.375L309.324 191.71L315.806 188.452L321.928 184.798L327.879 181.016L333.894 177.572L336.948 176.182L340.099 175.071L342.968 174.387L344.819 174.1L346.665 173.95L348.77 173.963L351.005 174.178L352.037 174.346L353.175 174.583L355.021 175.116L357.053 175.904L359.126 176.92L361 178.059L362.689 179.28L364.401 180.688L366.779 183.012L369.005 185.564L371.077 188.293L373.016 191.168L376.491 197.186L379.675 203.629L382.594 210.199L385.32 216.778L388.082 223.572L390.919 230.333L393.88 236.775L397.17 243.013L400.872 249L404.874 254.54Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M398.841 260.978L395.598 254.595L392.706 248.007L389.985 240.981L387.361 233.773L384.807 226.72L382.188 219.845L379.315 212.965L376.168 206.367L374.503 203.315L372.712 200.358L370.755 197.487L368.7 194.813L366.516 192.357L364.235 190.165L362.019 188.42L360.709 187.536L359.335 186.739L357.664 185.96L356.128 185.409L355.189 185.144L354.231 184.939L352.834 184.743L351.196 184.666L349.997 184.698L348.804 184.803L347.258 185.058L345.227 185.573L343.232 186.229L340.336 187.441L337.351 188.894L331.23 192.238L324.89 195.642L318.084 198.818L311.004 201.447L303.823 203.479L296.244 205.146L288.133 206.727L279.79 208.422L271.641 210.34L264.067 212.495L257.14 214.924L250.44 217.762L244.087 220.929L238.247 224.323L232.584 228.132L227.267 232.288L222.288 236.862L219.956 239.322L217.745 241.906L215.639 244.658L213.673 247.565L211.864 250.654L210.226 253.911L208.703 257.502L207.334 261.347L206.163 265.434L205.173 269.753L204.428 274.214L203.9 278.829L203.623 283.509L203.562 288.27L204.09 297.811L205.316 307.233L206.991 316.341L208.819 324.957L210.489 332.994L211.79 340.58L212.733 348.326L213.46 356.54L214.284 365.015L214.899 369.216L215.723 373.23L217.018 377.481L217.634 379.071L218.3 380.538L219.489 382.657L220.873 384.661L221.571 385.541L222.293 386.361L223.547 387.591L225.116 388.881L226.333 389.746L227.596 390.544L229.414 391.523L231.626 392.494L234.018 393.391L237.674 394.489L241.565 395.478L249.769 397.3L258.084 399.191L266.094 401.246L273.756 403.383L281.687 405.465L290.131 407.087L294.513 407.575L298.983 407.821L303.476 407.789L307.932 407.506L312.342 406.969L316.603 406.231L320.726 405.306L324.659 404.244L331.924 401.766L338.675 398.872L345.139 395.61L351.223 392.106L357.04 388.366L362.639 384.384L367.877 380.283L372.989 375.882L377.806 371.348L382.489 366.523L386.876 361.571L391.151 356.281L395.172 350.809L399.04 345L402.673 338.931L405.958 332.675L408.984 325.968L411.566 319.047L412.607 315.626L413.477 312.181L414.148 308.727L414.611 305.246L414.847 301.706L414.842 298.193L414.569 294.722L414.041 291.345L413.246 288.133L412.195 284.99L410.886 281.928L409.387 278.934L405.949 273.029L402.376 267.156L398.841 260.978Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M396.856 262.869L393.941 256.376L391.22 249.405L388.648 242.125L386.2 234.898L383.803 227.941L381.212 220.911L378.325 213.958L375.099 207.447L373.29 204.408L371.328 201.542L368.802 198.476L367.872 197.496L366.831 196.508L364.938 194.972L363.235 193.824L362.463 193.368L361.551 192.895L359.631 192.061L357.604 191.386L356.438 191.09L355.263 190.858L353.384 190.635L350.876 190.562L348.369 190.712L346.152 191.04L343.792 191.587L341.46 192.252L338.133 193.45L334.876 194.836L328.245 197.988L321.494 201.05L314.456 203.652L306.664 205.802L298.252 207.588L289.618 209.179L281.233 210.75L273.451 212.441L266.306 214.382L259.278 216.769L252.439 219.567L246.002 222.674L239.862 226.132L234.037 229.928L228.748 233.973L226.208 236.183L223.778 238.502L221.502 240.903L219.359 243.423L217.305 246.139L215.376 249.023L213.622 252.057L212.039 255.233L210.619 258.664L209.374 262.281L208.31 266.177L207.435 270.305L206.778 274.606L206.329 279.085L206.107 283.636L206.089 288.279L206.644 297.542L207.806 306.54L209.342 315.033L210.975 322.911L212.484 330.397L213.835 338.297L214.922 346.808L215.787 355.725L216.717 364.596L217.37 368.856L218.212 372.847L219.41 376.674L220.077 378.36L220.799 379.882L221.816 381.622L222.987 383.276L223.843 384.311L224.759 385.286L226.041 386.452L227.975 387.892L230.145 389.227L232.084 390.206L234.259 391.118L236.48 391.924L239.904 392.945L243.462 393.829L251.231 395.482L259.467 397.241L267.718 399.219L275.625 401.278L283.191 403.137L291.057 404.627L295.143 405.119L299.312 405.415L303.518 405.47L307.687 405.31L311.81 404.914L315.794 404.331L319.625 403.565L323.326 402.645L330.3 400.385L337.097 397.578L343.584 394.407L349.609 391.026L355.504 387.299L361.153 383.331L366.549 379.148L371.745 374.738L376.64 370.182L381.369 365.361L385.844 360.386L390.161 355.137L394.265 349.67L398.115 343.938L401.738 337.773L404.94 331.226L406.379 327.686L407.679 323.977L408.817 320.045L409.766 315.917L410.46 311.684L410.876 307.329L410.95 302.959L410.701 298.654L410.085 294.425L409.178 290.357L407.984 286.47L406.606 282.784L403.505 275.982L400.128 269.384L396.856 262.869Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M401.903 327.545L398.988 334.251L395.615 340.658L391.881 346.731L387.827 352.513L383.617 357.834L379.063 362.969L374.339 367.781L369.323 372.419L364.169 376.743L358.676 380.921L353.008 384.803L346.951 388.48L340.519 391.838L337.174 393.332L333.736 394.685L330.002 395.947L326.046 397.082L321.872 398.043L317.49 398.822L312.997 399.36L308.375 399.661L303.724 399.688L299.074 399.474L289.945 398.399L281.269 396.822L273.148 395.177L265.361 393.665L257.277 392.152L248.981 390.398L244.881 389.304L240.985 388.019L236.899 386.247L235.382 385.445L233.98 384.584L231.972 383.117L230.329 381.664L229.413 380.725L228.552 379.736L227.409 378.192L226.146 376.123L225.443 374.765L224.749 373.253L223.883 370.924L223.129 368.282L222.5 365.607L221.82 361.571L221.325 357.475L220.617 349.433L219.876 341.692L218.78 333.832L217.257 325.649L215.471 317.33L213.694 309.21L212.204 301.592L211.163 294.48L210.631 287.318L210.585 283.709L210.705 280.142L211.001 276.638L211.487 273.175L212.172 269.776L213.06 266.423L214.185 263.047L215.527 259.684L217.072 256.395L218.78 253.255L220.621 250.308L222.639 247.474L224.832 244.758L227.164 242.188L229.598 239.778L232.157 237.5L234.854 235.322L237.64 233.281L243.41 229.618L249.744 226.287L256.468 223.353L263.478 220.897L271.242 218.747L279.691 216.892L288.46 215.334L297.094 213.981L305.238 212.628L312.761 211.015L320.086 208.901L327.415 206.24L334.62 203.383L341.635 200.936L345.244 200.002L348.844 199.383L351.865 199.2L353.878 199.232L355.946 199.442L357.811 199.806L359.778 200.376L361.045 200.841L362.364 201.419L363.845 202.212L365.464 203.278L366.593 204.139L367.671 205.06L369.078 206.459L370.605 208.231L372.104 210.204L374.006 213.138L375.732 216.268L377.305 219.562L378.767 223.007L381.437 230.256L383.811 237.628L385.958 244.899L388.109 252.381L390.395 260.122L392.848 267.808L395.443 275.08L398.146 281.859L400.917 288.557L403.337 295.091L404.244 298.212L404.957 301.383L405.429 304.604L405.66 307.862L405.637 311.133L405.364 314.409L404.841 317.662L404.096 320.874L401.903 327.545Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M317.671 216.569L308.81 218.341L300.102 219.667L291.88 220.765L284.189 221.899L276.578 223.339L268.864 225.244L261.308 227.595L254.242 230.324L247.69 233.454L244.525 235.217L241.495 237.09L238.621 239.063L235.863 241.172L233.235 243.423L230.75 245.815L228.442 248.344L226.313 251.018L224.356 253.87L222.611 256.882L221.117 260.04L219.867 263.329L218.817 266.929L217.98 270.751L217.383 274.788L216.999 279.021L216.851 283.322L216.911 287.719L217.582 296.403L218.799 304.709L220.307 312.555L221.917 320.332L223.5 328.643L224.86 337.545L225.911 346.786L226.808 355.925L227.979 364.423L228.844 368.236L229.941 371.713L230.912 373.877L231.949 375.722L232.523 376.588L233.129 377.403L234.207 378.647L235.489 379.877L236.567 380.77L237.807 381.659L239.357 382.597L241.518 383.65L243.757 384.548L247.302 385.618L251.156 386.529L259.726 388.019L268.947 389.345L278.248 390.689L287.127 392.061L295.211 393.286L302.42 394.138L309.264 394.466L312.609 394.384L315.931 394.116L319.217 393.655L322.469 393.008L325.852 392.138L329.294 391.086L336.263 388.47L342.977 385.386L349.27 381.95L355.322 378.11L360.981 374.009L366.39 369.589L371.512 364.91L376.366 359.939L380.924 354.695L385.172 349.123L388.943 343.309L390.678 340.225L392.27 337.049L393.686 333.828L394.893 330.584L395.86 327.34L396.596 324.036L397.096 320.615L397.364 317.111L397.387 313.557L397.193 309.967L396.781 306.385L396.203 302.804L394.611 295.419L392.645 287.555L390.581 279.426L388.624 271.375L386.828 263.653L385.112 256.117L383.256 248.312L381.16 240.37L378.768 232.693L377.44 229.103L375.982 225.667L374.358 222.414L372.544 219.366L370.42 216.446L369.352 215.193L368.25 214.058L366.598 212.618L365.03 211.479L364.04 210.869L363.017 210.322L361.323 209.579L359.389 208.923L358.061 208.582L356.595 208.299L354.656 208.094L352.023 208.044L349.39 208.194L345.679 208.764L341.917 209.616L334.38 211.812L326.296 214.304L317.671 216.569Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M273.399 230.483L266.055 232.356L258.869 234.784L252.044 237.719L248.898 239.336L245.849 241.113L242.906 243.063L240.106 245.186L237.469 247.482L235.016 249.966L232.745 252.681L230.695 255.597L228.876 258.782L227.312 262.181L225.989 265.931L224.911 269.949L224.133 274.2L223.624 278.656L223.421 283.212L223.472 287.883L224.263 297.195L225.684 306.221L227.34 314.723L228.904 322.697L230.209 330.583L231.259 338.935L232.171 347.71L233.309 356.495L234.151 360.709L235.252 364.664L236.525 367.849L237.497 369.79L238.589 371.558L239.727 373.047L241.101 374.546L242.272 375.631L243.628 376.715L245.252 377.791L247.75 379.135L250.517 380.347L254.487 381.645L258.731 382.698L263.08 383.509L267.527 384.142L276.258 385.039L284.531 385.668L292.398 386.174L300.477 386.584L308.778 386.739L316.981 386.406L320.919 386.005L324.713 385.436L328.29 384.693L331.821 383.75L335.3 382.602L338.72 381.276L342.093 379.777L345.35 378.15L351.5 374.578L357.349 370.523L362.85 366.095L367.982 361.315L372.762 356.135L377.093 350.576L379.064 347.651L380.882 344.635L382.553 341.482L384.029 338.27L385.273 335.035L386.301 331.736L387.087 328.401L387.652 325.025L388.003 321.535L388.17 317.972L388.026 310.768L387.453 303.51L386.62 295.769L385.63 287.299L384.51 278.219L383.251 268.833L381.812 259.511L380.142 250.64L378.175 242.562L377.056 238.926L375.765 235.436L374.265 232.092L372.567 228.961L370.633 226.077L369.61 224.783L368.463 223.517L366.959 222.127L365.432 220.952L364.465 220.314L363.35 219.685L361.68 218.91L359.755 218.222L358.431 217.858L356.969 217.548L355.03 217.302L352.393 217.197L349.737 217.279L345.998 217.735L342.195 218.455L334.565 220.327L326.384 222.414L317.551 224.269L308.269 225.713L298.885 226.838L289.76 227.873L281.218 229.039L273.399 230.483Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M344.236 221.635L336.888 223.694L328.883 225.936L320.698 227.813L312.711 229.135L304.905 230.037L296.632 230.82L287.841 231.791L278.818 233.176L269.998 235.067L261.827 237.441L258.111 238.789L254.562 240.279L251.207 241.915L248.01 243.705L244.989 245.665L242.166 247.77L239.612 250.002L237.243 252.431L235.059 255.087L233.097 257.948L231.39 260.987L229.95 264.186L228.771 267.612L227.854 271.216L227.202 275.057L226.786 279.084L226.633 283.199L226.702 287.413L227.419 295.737L228.664 303.738L230.159 311.456L231.764 319.617L233.245 328.41L234.43 337.664L235.355 346.986L236.354 355.848L237.058 359.93L237.969 363.68L239.02 366.605L239.834 368.386L240.759 370.018L241.74 371.394L242.93 372.779L243.952 373.79L245.151 374.792L246.474 375.717L248.45 376.847L249.889 377.535L251.332 378.15L255.09 379.376L259.212 380.374L263.617 381.139L268.309 381.75L278.147 382.57L288.322 383.016L298.566 383.144L308.653 382.866L318.38 382.019L327.495 380.479L331.743 379.444L335.754 378.26L339.475 376.938L343.024 375.467L346.355 373.868L349.557 372.127L352.63 370.25L355.549 368.282L358.275 366.25L360.898 364.094L363.448 361.794L365.886 359.379L368.172 356.887L370.319 354.276L372.378 351.469L374.298 348.503L376.048 345.391L377.602 342.133L378.99 338.621L380.193 334.903L381.207 330.902L382.04 326.665L383.108 317.607L383.502 308.012L383.391 298.139L382.933 288.206L382.202 278.396L381.216 268.915L379.957 259.98L378.38 251.793L376.385 244.412L375.154 240.881L373.762 237.482L372.17 234.197L370.435 231.167L368.441 228.333L367.45 227.116L366.451 226.023L364.859 224.556L363.332 223.38L362.555 222.861L361.777 222.4L360.486 221.763L359.038 221.202L357.863 220.851L356.563 220.569L355.207 220.396L352.949 220.327L350.682 220.446L346.725 221.102L344.236 221.635Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M349.775 236.32L342.357 236.931L334.732 238.252L326.579 239.755L317.695 241.063L308.214 242.061L298.427 242.89L288.687 243.829L279.368 245.127L270.84 246.954L266.981 248.093L263.321 249.419L259.911 250.941L256.681 252.681L253.646 254.659L250.851 256.832L248.464 259.078L247.256 260.377L246.118 261.735L244.258 264.295L243.309 265.803L242.393 267.43L241.097 270.177L240.473 271.767L239.899 273.462L239.126 276.483L238.631 279.563L238.404 282.743L238.414 285.987L238.636 289.332L239.024 292.763L240.227 300.289L241.759 308.791L243.281 318.091L244.521 327.823L245.433 337.555L246.284 346.804L246.858 351.082L247.617 355.042L248.672 358.573L249.31 360.195L250.102 361.812L251.087 363.407L252.142 364.806L253.128 365.908L254.308 367.011L255.631 368.031L257.376 369.139L258.972 369.991L260.601 370.733L262.984 371.594L265.829 372.392L268.717 373.025L273.256 373.667L278.068 374.046L282.987 374.155L288.049 374.041L298.122 373.262L307.858 371.881L316.88 370.032L324.922 367.781L328.513 366.528L332.002 365.12L335.375 363.557L338.623 361.853L341.737 359.994L344.694 358.003L347.457 355.898L350.089 353.634L352.597 351.196L354.966 348.604L357.164 345.893L359.196 343.063L361.111 340.043L362.897 336.88L364.54 333.591L366.053 330.178L368.626 323.134L370.754 315.466L372.499 306.919L373.803 297.62L374.576 287.819L374.72 277.845L374.137 268.054L373.54 263.343L372.739 258.896L371.689 254.709L370.426 250.882L369.102 247.907L368.126 246.102L367.08 244.494L365.863 242.954L364.595 241.614L363.624 240.74L362.495 239.869L361.19 239.04L359.695 238.261L358.256 237.664L356.655 237.145L355.647 236.921L351.926 236.47L349.775 236.32Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M339.307 242.721L342.957 242.553L348.686 242.557L352.258 242.999L354.585 243.473L356.857 244.147L358.523 244.835L360.272 245.738L361.794 246.699L363.294 247.833L364.446 248.886L365.593 250.148L366.713 251.615L367.782 253.283L368.656 254.964L369.698 257.515L370.581 260.304L371.465 264.341L372.081 268.66L372.432 273.148L372.566 277.809L372.256 287.167L371.322 296.207L369.897 304.577L368.046 312.199L365.681 319.553L362.785 326.697L359.425 333.354L357.593 336.434L355.613 339.404L353.479 342.279L351.221 344.999L348.866 347.537L346.372 349.938L343.698 352.239L340.866 354.417L337.928 356.436L334.888 358.299L331.635 360.071L328.22 361.739L321.034 364.691L313.557 367.097L305.584 369.02L296.853 370.482L287.598 371.33L282.893 371.444L278.339 371.302L273.897 370.847L269.747 370.063L266.707 369.152L264.37 368.218L263.412 367.758L262.519 367.266L260.969 366.25L259.516 365.092L258.276 363.912L257.152 362.632L256.208 361.333L255.023 359.356L254.181 357.67L253.45 355.966L252.201 352.039L251.238 347.806L249.989 338.912L249.119 329.968L248.235 321.421L247.199 313.325L246.042 305.082L245.038 296.457L244.733 292.042L244.631 287.673L244.802 283.345L245.251 279.212L246.088 275.125L246.593 273.307L247.157 271.617L248.222 269.111L249.216 267.206L250.41 265.288L251.84 263.388L253.334 261.716L255.051 260.058L257.018 258.454L258.882 257.151L260.817 255.957L264.102 254.262L267.609 252.772L271.218 251.51L274.948 250.449L278.705 249.592L282.509 248.904L290.588 247.865L299.444 247.059L309.013 246.216L319.058 245.132L329.275 243.838L339.307 242.721Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M330.429 254.148L321.29 255.401L312.633 256.6L304.429 257.652L295.971 258.791L287.281 260.354L282.954 261.411L278.827 262.655L274.889 264.158L271.285 265.871L268.472 267.566L266.783 268.774L265.256 270.036L263.682 271.58L262.16 273.366L261.512 274.246L260.841 275.248L259.921 276.866L258.93 279.043L258.144 281.299L257.57 283.581L257.163 285.878L256.848 288.338L256.612 292.092L256.575 295.979L256.871 303.775L257.348 311.634L257.862 320.136L258.44 329.248L259.439 338.525L260.295 343.04L261.489 347.3L262.845 350.604L264.025 352.859L264.636 353.848L265.288 354.777L266.625 356.385L268.106 357.875L269.601 359.124L271.192 360.231L272.761 361.124L274.76 362.04L276.856 362.81L278.989 363.425L281.566 363.953L284.676 364.331L287.998 364.514L292.69 364.395L297.419 363.917L302.083 363.133L306.544 362.117L310.81 360.905L314.831 359.543L318.532 358.08L322.095 356.458L325.519 354.695L328.805 352.809L331.937 350.804L334.922 348.694L337.717 346.512L340.405 344.202L342.991 341.755L345.448 339.195L347.767 336.543L349.951 333.782L352.051 330.848L354.046 327.777L355.924 324.565L357.669 321.22L359.279 317.739L360.737 314.131L362.115 310.185L363.369 305.984L364.466 301.547L365.396 296.877L366.085 292.102L366.516 287.222L366.631 282.338L366.4 277.608L365.72 272.838L365.262 270.71L364.707 268.751L363.661 265.953L362.583 263.707L361.944 262.595L361.181 261.452L360.061 260.058L358.812 258.764L357.558 257.688L356.716 257.064L355.711 256.417L354.37 255.706L352.63 254.987L350.501 254.317L348.331 253.82L346.217 253.524L343.042 253.342H339.655L333.955 253.766L330.429 254.148Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M357.585 274.059L359.325 278.128L359.63 279.007L359.852 279.791L360.213 281.695L360.468 284.023L360.579 286.507L360.454 290.029L360.042 293.633L359.38 297.223L358.487 300.818L357.358 304.49L356.017 308.212L352.852 315.466L351.079 318.888L349.173 322.177L347.146 325.321L344.981 328.346L342.681 331.235L340.252 333.987L337.712 336.575L335.037 339.031L332.178 341.391L329.17 343.637L326.014 345.76L322.724 347.756L315.723 351.378L308.2 354.508L304.364 355.83L300.685 356.918L297.146 357.743L293.809 358.285L290.885 358.481L289.312 358.454L287.813 358.304L286.156 357.976L284.745 357.565L283.588 357.114L282.482 356.568L281.187 355.757L279.78 354.69L278.734 353.747L277.702 352.645L276.555 351.132L275.176 348.936L274.514 347.697L273.876 346.325L272.992 343.906L272.164 340.99L271.521 338.024L270.905 333.386L270.59 328.465L270.549 323.467L270.752 318.364L271.752 308.386L272.548 303.615L273.538 299.141L274.783 294.977L276.268 291.163L277.642 288.489L278.827 286.575L280.122 284.807L281.631 283.094L283.403 281.413L285.305 279.886L287.243 278.592L289.446 277.358L291.723 276.251L295.438 274.774L299.431 273.444L307.955 271.129L316.644 269.111L325.015 267.389L332.96 266.172L336.897 265.84L340.696 265.785L344.213 266.081L346.073 266.382L347.776 266.796L349.497 267.393L351.172 268.15L352.407 268.838L353.536 269.598L354.045 270.013L355.017 270.974L356.794 273.038L357.585 274.059Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M307.312 280.132L314.923 277.116L318.857 275.877L322.864 274.852L327.019 274.027L331.183 273.512L335.51 273.38L337.471 273.476L339.308 273.704L341.668 274.218L343.547 274.811L345.055 275.444L345.703 275.772L346.319 276.128L347.494 276.929L348.59 277.841L349.604 278.848L350.52 279.937L351.334 281.089L351.978 282.215L352.676 283.723L353.449 285.919L354.013 288.165L354.328 290.183L354.522 293.191L354.472 296.389L354.134 299.761L353.694 302.308L353.153 304.772L351.987 308.768L350.562 312.582L348.924 316.168L347.064 319.612L345.004 322.911L342.802 326.027L340.488 328.939L338.017 331.713L335.389 334.365L332.622 336.871L329.74 339.213L326.727 341.4L323.511 343.468L320.124 345.391L316.626 347.104L313.003 348.599L309.227 349.852L305.327 350.836L300.797 351.569L299.011 351.738L297.28 351.82L293.787 351.743L291.607 351.524L289.604 351.169L287.577 350.604L285.722 349.911L284.486 349.328L283.265 348.617L282.27 347.893L281.335 347.077L280.4 346.093L279.706 345.223L279.022 344.207L278.476 343.213L277.851 341.755L277.249 339.942L276.768 337.969L276.444 335.896L276.255 333.349L276.213 330.634L276.421 326.829L276.912 322.956L277.62 319.115L278.554 315.284L279.697 311.415L281.067 307.561L282.649 303.793L284.435 300.216L286.439 296.877L288.683 293.765L291.066 291.045L292.459 289.664L293.912 288.347L296.933 285.992L300.168 283.859L304.563 281.49L307.312 280.132Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M314.71 296.831L312.16 298.485L308.075 301.446L305.326 304.021L303.869 305.579L302.42 307.306L300.273 310.29L299.186 312.049L298.154 313.962L296.9 316.796L296.132 318.979L295.554 321.111L295.128 323.562L294.929 325.9L294.915 327.011L294.98 328.178L295.193 329.677L295.558 331.189L296.002 332.506L296.34 333.285L296.771 334.087L297.261 334.816L297.821 335.504L298.529 336.224L299.302 336.871L300.037 337.377L300.81 337.814L301.523 338.142L302.513 338.484L303.679 338.771L305.118 338.99L306.552 339.081L307.908 339.044L309.759 338.83L311.374 338.525L313.077 338.087L315.335 337.308L317.551 336.356L319.837 335.203L323.141 333.19L326.356 330.843L329.309 328.278L332.02 325.471L334.62 322.25L335.717 320.692L336.698 319.138L338.355 316.054L339.15 314.258L339.835 312.349L340.492 309.857L340.872 307.602L340.969 306.504L340.997 305.447L340.904 303.747L340.673 302.171L340.367 300.904L340.085 300.057L339.701 299.15L339.174 298.193L338.554 297.282L337.846 296.425L337.147 295.733L336.49 295.182L335.689 294.63L334.926 294.216L333.982 293.806L332.848 293.432L331.539 293.122L330.475 292.954L329.424 292.853L328.055 292.84L326.12 292.99L324.131 293.304L322.044 293.783L320.549 294.279L316.769 295.869L314.71 296.831Z"}),(0,We.jsx)(Pu.path,{initial:{pathLength:0},animate:n?{pathLength:1}:{pathLength:0},transition:{duration:2.4,ease:"easeInOut"},strokeWidth:.48,strokeDasharray:"0 1",fill:"none",d:"M327.605 311.224L327.707 313.152L327.665 314.487L327.6 314.997L327.503 315.443L327.239 316.213L326.735 317.33L325.995 318.655L325.578 319.293L325.078 319.977L324.139 321.07L322.672 322.51L321.775 323.275L320.905 323.936L319.729 324.683L318.267 325.435L317.222 325.877L316.282 326.182L315.547 326.337L314.681 326.438L313.899 326.46L313.238 326.424L312.701 326.337L312.493 326.287L312.229 326.21L311.923 326.082L311.627 325.923L311.285 325.695L310.966 325.435L310.674 325.144L310.415 324.829L310.188 324.492L310.031 324.196L309.906 323.891L309.804 323.563L309.716 323.121L309.647 322.464L309.638 321.676L309.712 320.783L309.79 320.259L309.901 319.763L310.142 318.993L310.651 317.762L311.364 316.396L311.762 315.739L312.178 315.129L313.154 313.917L314.561 312.45L315.348 311.744L316.213 311.056L317.3 310.327L318.679 309.566L319.947 309.01L320.41 308.841L320.923 308.686L321.701 308.522L322.52 308.427L323.343 308.399L324.047 308.44L324.616 308.527L324.916 308.6L325.189 308.691L325.324 308.75L325.527 308.864L325.796 309.06L326.133 309.356L326.578 309.835L327.295 310.755L327.605 311.224Z"})]})})},$Q=function(){return(0,We.jsxs)("div",{id:"who_we_are",className:"FourthSection",children:[(0,We.jsx)(JQ,{}),(0,We.jsx)(KQ,{})]})},eK=function(){return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(BQ,{}),(0,We.jsx)(UQ,{}),(0,We.jsx)(GQ,{}),(0,We.jsx)(XQ,{}),(0,We.jsx)($Q,{})]})},tK={_origin:"https://api.emailjs.com"},nK=function(e,t,n){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},iK=(0,d.Z)((function e(t){(0,c.Z)(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),rK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,r){var a=new XMLHttpRequest;a.addEventListener("load",(function(e){var t=e.target,n=new iK(t);200===n.status||"OK"===n.text?i(n):r(n)})),a.addEventListener("error",(function(e){var t=e.target;r(new iK(t))})),a.open("POST",tK._origin+e,!0),Object.keys(n).forEach((function(e){a.setRequestHeader(e,n[e])})),a.send(t)}))},aK=function(e,t,n,i){var r=i||tK._userID,a=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(n);nK(r,e,t);var o=new FormData(a);return o.append("lib_version","3.11.0"),o.append("service_id",e),o.append("template_id",t),o.append("user_id",r),rK("/api/v1.0/email/send-form",o)};var oK=n.p+"static/media/send.6f43246bb994a2d51b105568f933df1c.svg",sK=n(59),lK=function(){var t=(0,e.useRef)(),n=Jt().t,i=o((0,e.useState)(""),2),r=i[0],a=i[1],s=(0,sK.usePhoneValidation)(r);return(0,We.jsx)("div",{className:"ContactFormBackground",children:(0,We.jsxs)("form",{className:"ContactForm",ref:t,onSubmit:function(e){e.preventDefault(),aK("service_ouba78o","template_moxgym8",t.current,"3f-Zo-EJmOUVwvXcw").then((function(e){alert("\uc804\uc1a1\uc644\ub8cc"),console.log(e.text)}),(function(e){console.log(e.text),alert("\uc804\uc1a1\uc2e4\ud328")}))},children:[(0,We.jsxs)("div",{className:"FormRow",children:[(0,We.jsx)("label",{className:"FirstRowDetail",children:(0,We.jsx)("input",{className:"SubFont",type:"text",name:"user_fullname",placeholder:n("footer.Full Name"),required:!0})}),(0,We.jsx)("div",{className:"Phone",children:(0,We.jsx)(sK.PhoneInput,{defaultCountry:"it",inputProps:{name:"phone_number"},value:r,onChange:function(e){return a(e)}})})]}),(0,We.jsxs)("div",{className:"FormRow",children:[(0,We.jsx)("label",{className:"FirstRowDetail",children:(0,We.jsx)("input",{className:"SubFont",type:"email",name:"user_email",placeholder:n("footer.Email"),required:!0})}),(0,We.jsx)("label",{className:"FirstRowDetail",children:(0,We.jsxs)("select",{className:"SubjectSelector SubFont",name:"subject",required:!0,children:[(0,We.jsx)("option",{"data-subject":"",defaultChecked:!0,disabled:!0,children:n("footer.Subject.Subject")}),(0,We.jsx)("option",{"data-subject":"Analytics and Reporting",children:n("footer.Subject.Analytics and Reporting")}),(0,We.jsx)("option",{"data-subject":"E-commerce Solutions",children:n("footer.Subject.E-commerce Solutions")}),(0,We.jsx)("option",{"data-subject":"Email Marketing",children:n("footer.Subject.Email Marketing")}),(0,We.jsx)("option",{"data-subject":"Pay-Per-Click Advertising (PPC)",children:n("footer.Subject.Pay-Per-Click Advertising (PPC)")}),(0,We.jsx)("option",{"data-subject":"Content Marketing",children:n("footer.Subject.Content Marketing")}),(0,We.jsx)("option",{"data-subject":"Search Engine Optimization (SEO)",children:n("footer.Subject.Search Engine Optimization (SEO)")}),(0,We.jsx)("option",{"data-subject":"Website Design and Development",children:n("footer.Subject.Website Design and Development")}),(0,We.jsx)("option",{"data-subject":"Marketing & Communication Strategy",children:n("footer.Subject.Marketing & Communication Strategy")}),(0,We.jsx)("option",{"data-subject":"Etc.",children:"Etc."})]})})]}),(0,We.jsx)("label",{children:(0,We.jsx)("textarea",{className:"SubFont",name:"message",placeholder:n("footer.Details")})}),(0,We.jsxs)("label",{className:"CheckboxAgree",children:[(0,We.jsx)("input",{type:"checkbox",name:"Privacy Policy Agreement",readOnly:!0,defaultChecked:!0,required:!0}),(0,We.jsxs)("p",{className:"SubFont Agree",children:[n("footer.Policy"),(0,We.jsx)("a",{href:"/",children:"Privacy Policy.*"})]})]}),(0,We.jsxs)("button",{className:"SubFont SubmitButton",type:"submit",children:[n("footer.Submit"),(0,We.jsx)("img",{src:oK,disabled:!s.isValid,alt:""})]})]})})},uK=n.p+"static/media/connection_background.b3649f07563b9058b40b.png",cK=function(){return(0,We.jsx)("div",{className:"FooterBottom",children:(0,We.jsx)("div",{className:"SectionWidth",children:(0,We.jsxs)("div",{className:"FooterBand",children:[(0,We.jsx)("p",{className:"SubFont",children:"\xa9 2023 Deep Bridge. All rights reserved."}),(0,We.jsx)(Ue,{to:"/privacy_policy",className:"SubFont",target:"_blank",children:"Privacy Policy"})]})})})},dK=function(){var e=Jt().t;return(0,We.jsxs)("footer",{id:"lets_talk",children:[(0,We.jsxs)("section",{className:"FooterSection",children:[(0,We.jsx)("div",{className:"SectionWidth",children:(0,We.jsxs)("div",{className:"FormBackground",children:[(0,We.jsxs)("div",{className:"FooterTitleDesc",children:[(0,We.jsx)("h2",{className:"Title MainFont",children:e("Let's talk")}),(0,We.jsx)("p",{className:"SubFont SectionDescription",children:e("footer.Contact us Desc")})]}),(0,We.jsx)(lK,{})]})}),(0,We.jsx)("img",{src:uK,className:"FooterBackground",alt:""})]}),(0,We.jsx)(cK,{})]})};var hK=function(){return(0,We.jsxs)("div",{className:"App",children:[(0,We.jsx)(an,{}),(0,We.jsx)(nn,{}),(0,We.jsx)(Du,{}),(0,We.jsxs)(Te,{children:[(0,We.jsx)(Ce,{path:"/privacy_policy",element:(0,We.jsx)(Iu,{})}),(0,We.jsx)(Ce,{path:"/",element:(0,We.jsx)(eK,{})})]}),(0,We.jsx)(dK,{})]})},fK=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};Ge.createRoot(document.getElementById("root")).render((0,We.jsx)(e.StrictMode,{children:(0,We.jsx)(ze,{basename:"/deepbridgedigital",children:(0,We.jsx)(hK,{})})})),fK()}()}();
//# sourceMappingURL=main.642dd972.js.map